(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const d of r)if(d.type==="childList")for(const h of d.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&o(h)}).observe(document,{childList:!0,subtree:!0});function a(r){const d={};return r.integrity&&(d.integrity=r.integrity),r.referrerPolicy&&(d.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?d.credentials="include":r.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function o(r){if(r.ep)return;r.ep=!0;const d=a(r);fetch(r.href,d)}})();var Uh={exports:{}},Jr={};var Ly;function lE(){if(Ly)return Jr;Ly=1;var l=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function a(o,r,d){var h=null;if(d!==void 0&&(h=""+d),r.key!==void 0&&(h=""+r.key),"key"in r){d={};for(var f in r)f!=="key"&&(d[f]=r[f])}else d=r;return r=d.ref,{$$typeof:l,type:o,key:h,ref:r!==void 0?r:null,props:d}}return Jr.Fragment=n,Jr.jsx=a,Jr.jsxs=a,Jr}var By;function cE(){return By||(By=1,Uh.exports=lE()),Uh.exports}var v=cE(),jh={exports:{}},Te={};var Ky;function uE(){if(Ky)return Te;Ky=1;var l=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),h=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),k=Symbol.iterator;function N(b){return b===null||typeof b!="object"?null:(b=k&&b[k]||b["@@iterator"],typeof b=="function"?b:null)}var F={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Y=Object.assign,pe={};function Z(b,x,J){this.props=b,this.context=x,this.refs=pe,this.updater=J||F}Z.prototype.isReactComponent={},Z.prototype.setState=function(b,x){if(typeof b!="object"&&typeof b!="function"&&b!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,b,x,"setState")},Z.prototype.forceUpdate=function(b){this.updater.enqueueForceUpdate(this,b,"forceUpdate")};function ue(){}ue.prototype=Z.prototype;function ie(b,x,J){this.props=b,this.context=x,this.refs=pe,this.updater=J||F}var fe=ie.prototype=new ue;fe.constructor=ie,Y(fe,Z.prototype),fe.isPureReactComponent=!0;var W=Array.isArray;function ee(){}var se={H:null,A:null,T:null,S:null},Ee=Object.prototype.hasOwnProperty;function ge(b,x,J){var P=J.ref;return{$$typeof:l,type:b,key:x,ref:P!==void 0?P:null,props:J}}function ze(b,x){return ge(b.type,x,b.props)}function Fe(b){return typeof b=="object"&&b!==null&&b.$$typeof===l}function Ae(b){var x={"=":"=0",":":"=2"};return"$"+b.replace(/[=:]/g,function(J){return x[J]})}var we=/\/+/g;function Ke(b,x){return typeof b=="object"&&b!==null&&b.key!=null?Ae(""+b.key):x.toString(36)}function Qe(b){switch(b.status){case"fulfilled":return b.value;case"rejected":throw b.reason;default:switch(typeof b.status=="string"?b.then(ee,ee):(b.status="pending",b.then(function(x){b.status==="pending"&&(b.status="fulfilled",b.value=x)},function(x){b.status==="pending"&&(b.status="rejected",b.reason=x)})),b.status){case"fulfilled":return b.value;case"rejected":throw b.reason}}throw b}function j(b,x,J,P,$){var re=typeof b;(re==="undefined"||re==="boolean")&&(b=null);var ye=!1;if(b===null)ye=!0;else switch(re){case"bigint":case"string":case"number":ye=!0;break;case"object":switch(b.$$typeof){case l:case n:ye=!0;break;case S:return ye=b._init,j(ye(b._payload),x,J,P,$)}}if(ye)return $=$(b),ye=P===""?"."+Ke(b,0):P,W($)?(J="",ye!=null&&(J=ye.replace(we,"$&/")+"/"),j($,x,J,"",function(Ot){return Ot})):$!=null&&(Fe($)&&($=ze($,J+($.key==null||b&&b.key===$.key?"":(""+$.key).replace(we,"$&/")+"/")+ye)),x.push($)),1;ye=0;var it=P===""?".":P+":";if(W(b))for(var De=0;De<b.length;De++)P=b[De],re=it+Ke(P,De),ye+=j(P,x,J,re,$);else if(De=N(b),typeof De=="function")for(b=De.call(b),De=0;!(P=b.next()).done;)P=P.value,re=it+Ke(P,De++),ye+=j(P,x,J,re,$);else if(re==="object"){if(typeof b.then=="function")return j(Qe(b),x,J,P,$);throw x=String(b),Error("Objects are not valid as a React child (found: "+(x==="[object Object]"?"object with keys {"+Object.keys(b).join(", ")+"}":x)+"). If you meant to render a collection of children, use an array instead.")}return ye}function q(b,x,J){if(b==null)return b;var P=[],$=0;return j(b,P,"","",function(re){return x.call(J,re,$++)}),P}function oe(b){if(b._status===-1){var x=b._result;x=x(),x.then(function(J){(b._status===0||b._status===-1)&&(b._status=1,b._result=J)},function(J){(b._status===0||b._status===-1)&&(b._status=2,b._result=J)}),b._status===-1&&(b._status=0,b._result=x)}if(b._status===1)return b._result.default;throw b._result}var ne=typeof reportError=="function"?reportError:function(b){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var x=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof b=="object"&&b!==null&&typeof b.message=="string"?String(b.message):String(b),error:b});if(!window.dispatchEvent(x))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",b);return}console.error(b)},he={map:q,forEach:function(b,x,J){q(b,function(){x.apply(this,arguments)},J)},count:function(b){var x=0;return q(b,function(){x++}),x},toArray:function(b){return q(b,function(x){return x})||[]},only:function(b){if(!Fe(b))throw Error("React.Children.only expected to receive a single React element child.");return b}};return Te.Activity=T,Te.Children=he,Te.Component=Z,Te.Fragment=a,Te.Profiler=r,Te.PureComponent=ie,Te.StrictMode=o,Te.Suspense=y,Te.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=se,Te.__COMPILER_RUNTIME={__proto__:null,c:function(b){return se.H.useMemoCache(b)}},Te.cache=function(b){return function(){return b.apply(null,arguments)}},Te.cacheSignal=function(){return null},Te.cloneElement=function(b,x,J){if(b==null)throw Error("The argument must be a React element, but you passed "+b+".");var P=Y({},b.props),$=b.key;if(x!=null)for(re in x.key!==void 0&&($=""+x.key),x)!Ee.call(x,re)||re==="key"||re==="__self"||re==="__source"||re==="ref"&&x.ref===void 0||(P[re]=x[re]);var re=arguments.length-2;if(re===1)P.children=J;else if(1<re){for(var ye=Array(re),it=0;it<re;it++)ye[it]=arguments[it+2];P.children=ye}return ge(b.type,$,P)},Te.createContext=function(b){return b={$$typeof:h,_currentValue:b,_currentValue2:b,_threadCount:0,Provider:null,Consumer:null},b.Provider=b,b.Consumer={$$typeof:d,_context:b},b},Te.createElement=function(b,x,J){var P,$={},re=null;if(x!=null)for(P in x.key!==void 0&&(re=""+x.key),x)Ee.call(x,P)&&P!=="key"&&P!=="__self"&&P!=="__source"&&($[P]=x[P]);var ye=arguments.length-2;if(ye===1)$.children=J;else if(1<ye){for(var it=Array(ye),De=0;De<ye;De++)it[De]=arguments[De+2];$.children=it}if(b&&b.defaultProps)for(P in ye=b.defaultProps,ye)$[P]===void 0&&($[P]=ye[P]);return ge(b,re,$)},Te.createRef=function(){return{current:null}},Te.forwardRef=function(b){return{$$typeof:f,render:b}},Te.isValidElement=Fe,Te.lazy=function(b){return{$$typeof:S,_payload:{_status:-1,_result:b},_init:oe}},Te.memo=function(b,x){return{$$typeof:p,type:b,compare:x===void 0?null:x}},Te.startTransition=function(b){var x=se.T,J={};se.T=J;try{var P=b(),$=se.S;$!==null&&$(J,P),typeof P=="object"&&P!==null&&typeof P.then=="function"&&P.then(ee,ne)}catch(re){ne(re)}finally{x!==null&&J.types!==null&&(x.types=J.types),se.T=x}},Te.unstable_useCacheRefresh=function(){return se.H.useCacheRefresh()},Te.use=function(b){return se.H.use(b)},Te.useActionState=function(b,x,J){return se.H.useActionState(b,x,J)},Te.useCallback=function(b,x){return se.H.useCallback(b,x)},Te.useContext=function(b){return se.H.useContext(b)},Te.useDebugValue=function(){},Te.useDeferredValue=function(b,x){return se.H.useDeferredValue(b,x)},Te.useEffect=function(b,x){return se.H.useEffect(b,x)},Te.useEffectEvent=function(b){return se.H.useEffectEvent(b)},Te.useId=function(){return se.H.useId()},Te.useImperativeHandle=function(b,x,J){return se.H.useImperativeHandle(b,x,J)},Te.useInsertionEffect=function(b,x){return se.H.useInsertionEffect(b,x)},Te.useLayoutEffect=function(b,x){return se.H.useLayoutEffect(b,x)},Te.useMemo=function(b,x){return se.H.useMemo(b,x)},Te.useOptimistic=function(b,x){return se.H.useOptimistic(b,x)},Te.useReducer=function(b,x,J){return se.H.useReducer(b,x,J)},Te.useRef=function(b){return se.H.useRef(b)},Te.useState=function(b){return se.H.useState(b)},Te.useSyncExternalStore=function(b,x,J){return se.H.useSyncExternalStore(b,x,J)},Te.useTransition=function(){return se.H.useTransition()},Te.version="19.2.4",Te}var Py;function Cf(){return Py||(Py=1,jh.exports=uE()),jh.exports}var z=Cf(),Hh={exports:{}},Xr={},zh={exports:{}},Lh={};var Gy;function dE(){return Gy||(Gy=1,(function(l){function n(j,q){var oe=j.length;j.push(q);e:for(;0<oe;){var ne=oe-1>>>1,he=j[ne];if(0<r(he,q))j[ne]=q,j[oe]=he,oe=ne;else break e}}function a(j){return j.length===0?null:j[0]}function o(j){if(j.length===0)return null;var q=j[0],oe=j.pop();if(oe!==q){j[0]=oe;e:for(var ne=0,he=j.length,b=he>>>1;ne<b;){var x=2*(ne+1)-1,J=j[x],P=x+1,$=j[P];if(0>r(J,oe))P<he&&0>r($,J)?(j[ne]=$,j[P]=oe,ne=P):(j[ne]=J,j[x]=oe,ne=x);else if(P<he&&0>r($,oe))j[ne]=$,j[P]=oe,ne=P;else break e}}return q}function r(j,q){var oe=j.sortIndex-q.sortIndex;return oe!==0?oe:j.id-q.id}if(l.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;l.unstable_now=function(){return d.now()}}else{var h=Date,f=h.now();l.unstable_now=function(){return h.now()-f}}var y=[],p=[],S=1,T=null,k=3,N=!1,F=!1,Y=!1,pe=!1,Z=typeof setTimeout=="function"?setTimeout:null,ue=typeof clearTimeout=="function"?clearTimeout:null,ie=typeof setImmediate<"u"?setImmediate:null;function fe(j){for(var q=a(p);q!==null;){if(q.callback===null)o(p);else if(q.startTime<=j)o(p),q.sortIndex=q.expirationTime,n(y,q);else break;q=a(p)}}function W(j){if(Y=!1,fe(j),!F)if(a(y)!==null)F=!0,ee||(ee=!0,Ae());else{var q=a(p);q!==null&&Qe(W,q.startTime-j)}}var ee=!1,se=-1,Ee=5,ge=-1;function ze(){return pe?!0:!(l.unstable_now()-ge<Ee)}function Fe(){if(pe=!1,ee){var j=l.unstable_now();ge=j;var q=!0;try{e:{F=!1,Y&&(Y=!1,ue(se),se=-1),N=!0;var oe=k;try{t:{for(fe(j),T=a(y);T!==null&&!(T.expirationTime>j&&ze());){var ne=T.callback;if(typeof ne=="function"){T.callback=null,k=T.priorityLevel;var he=ne(T.expirationTime<=j);if(j=l.unstable_now(),typeof he=="function"){T.callback=he,fe(j),q=!0;break t}T===a(y)&&o(y),fe(j)}else o(y);T=a(y)}if(T!==null)q=!0;else{var b=a(p);b!==null&&Qe(W,b.startTime-j),q=!1}}break e}finally{T=null,k=oe,N=!1}q=void 0}}finally{q?Ae():ee=!1}}}var Ae;if(typeof ie=="function")Ae=function(){ie(Fe)};else if(typeof MessageChannel<"u"){var we=new MessageChannel,Ke=we.port2;we.port1.onmessage=Fe,Ae=function(){Ke.postMessage(null)}}else Ae=function(){Z(Fe,0)};function Qe(j,q){se=Z(function(){j(l.unstable_now())},q)}l.unstable_IdlePriority=5,l.unstable_ImmediatePriority=1,l.unstable_LowPriority=4,l.unstable_NormalPriority=3,l.unstable_Profiling=null,l.unstable_UserBlockingPriority=2,l.unstable_cancelCallback=function(j){j.callback=null},l.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ee=0<j?Math.floor(1e3/j):5},l.unstable_getCurrentPriorityLevel=function(){return k},l.unstable_next=function(j){switch(k){case 1:case 2:case 3:var q=3;break;default:q=k}var oe=k;k=q;try{return j()}finally{k=oe}},l.unstable_requestPaint=function(){pe=!0},l.unstable_runWithPriority=function(j,q){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var oe=k;k=j;try{return q()}finally{k=oe}},l.unstable_scheduleCallback=function(j,q,oe){var ne=l.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?ne+oe:ne):oe=ne,j){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=oe+he,j={id:S++,callback:q,priorityLevel:j,startTime:oe,expirationTime:he,sortIndex:-1},oe>ne?(j.sortIndex=oe,n(p,j),a(y)===null&&j===a(p)&&(Y?(ue(se),se=-1):Y=!0,Qe(W,oe-ne))):(j.sortIndex=he,n(y,j),F||N||(F=!0,ee||(ee=!0,Ae()))),j},l.unstable_shouldYield=ze,l.unstable_wrapCallback=function(j){var q=k;return function(){var oe=k;k=q;try{return j.apply(this,arguments)}finally{k=oe}}}})(Lh)),Lh}var Vy;function hE(){return Vy||(Vy=1,zh.exports=dE()),zh.exports}var Bh={exports:{}},Gt={};var Fy;function fE(){if(Fy)return Gt;Fy=1;var l=Cf();function n(y){var p="https://react.dev/errors/"+y;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var S=2;S<arguments.length;S++)p+="&args[]="+encodeURIComponent(arguments[S])}return"Minified React error #"+y+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var o={d:{f:a,r:function(){throw Error(n(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},r=Symbol.for("react.portal");function d(y,p,S){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:T==null?null:""+T,children:y,containerInfo:p,implementation:S}}var h=l.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(y,p){if(y==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Gt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,Gt.createPortal=function(y,p){var S=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(n(299));return d(y,p,null,S)},Gt.flushSync=function(y){var p=h.T,S=o.p;try{if(h.T=null,o.p=2,y)return y()}finally{h.T=p,o.p=S,o.d.f()}},Gt.preconnect=function(y,p){typeof y=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,o.d.C(y,p))},Gt.prefetchDNS=function(y){typeof y=="string"&&o.d.D(y)},Gt.preinit=function(y,p){if(typeof y=="string"&&p&&typeof p.as=="string"){var S=p.as,T=f(S,p.crossOrigin),k=typeof p.integrity=="string"?p.integrity:void 0,N=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;S==="style"?o.d.S(y,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:T,integrity:k,fetchPriority:N}):S==="script"&&o.d.X(y,{crossOrigin:T,integrity:k,fetchPriority:N,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Gt.preinitModule=function(y,p){if(typeof y=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var S=f(p.as,p.crossOrigin);o.d.M(y,{crossOrigin:S,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&o.d.M(y)},Gt.preload=function(y,p){if(typeof y=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var S=p.as,T=f(S,p.crossOrigin);o.d.L(y,S,{crossOrigin:T,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Gt.preloadModule=function(y,p){if(typeof y=="string")if(p){var S=f(p.as,p.crossOrigin);o.d.m(y,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:S,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else o.d.m(y)},Gt.requestFormReset=function(y){o.d.r(y)},Gt.unstable_batchedUpdates=function(y,p){return y(p)},Gt.useFormState=function(y,p,S){return h.H.useFormState(y,p,S)},Gt.useFormStatus=function(){return h.H.useHostTransitionStatus()},Gt.version="19.2.4",Gt}var Yy;function gE(){if(Yy)return Bh.exports;Yy=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(n){console.error(n)}}return l(),Bh.exports=fE(),Bh.exports}var Qy;function mE(){if(Qy)return Xr;Qy=1;var l=hE(),n=Cf(),a=gE();function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function d(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function h(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function f(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function y(e){if(d(e)!==e)throw Error(o(188))}function p(e){var t=e.alternate;if(!t){if(t=d(e),t===null)throw Error(o(188));return t!==e?null:e}for(var i=e,s=t;;){var c=i.return;if(c===null)break;var u=c.alternate;if(u===null){if(s=c.return,s!==null){i=s;continue}break}if(c.child===u.child){for(u=c.child;u;){if(u===i)return y(c),e;if(u===s)return y(c),t;u=u.sibling}throw Error(o(188))}if(i.return!==s.return)i=c,s=u;else{for(var g=!1,C=c.child;C;){if(C===i){g=!0,i=c,s=u;break}if(C===s){g=!0,s=c,i=u;break}C=C.sibling}if(!g){for(C=u.child;C;){if(C===i){g=!0,i=u,s=c;break}if(C===s){g=!0,s=u,i=c;break}C=C.sibling}if(!g)throw Error(o(189))}}if(i.alternate!==s)throw Error(o(190))}if(i.tag!==3)throw Error(o(188));return i.stateNode.current===i?e:t}function S(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=S(e),t!==null)return t;e=e.sibling}return null}var T=Object.assign,k=Symbol.for("react.element"),N=Symbol.for("react.transitional.element"),F=Symbol.for("react.portal"),Y=Symbol.for("react.fragment"),pe=Symbol.for("react.strict_mode"),Z=Symbol.for("react.profiler"),ue=Symbol.for("react.consumer"),ie=Symbol.for("react.context"),fe=Symbol.for("react.forward_ref"),W=Symbol.for("react.suspense"),ee=Symbol.for("react.suspense_list"),se=Symbol.for("react.memo"),Ee=Symbol.for("react.lazy"),ge=Symbol.for("react.activity"),ze=Symbol.for("react.memo_cache_sentinel"),Fe=Symbol.iterator;function Ae(e){return e===null||typeof e!="object"?null:(e=Fe&&e[Fe]||e["@@iterator"],typeof e=="function"?e:null)}var we=Symbol.for("react.client.reference");function Ke(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===we?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Y:return"Fragment";case Z:return"Profiler";case pe:return"StrictMode";case W:return"Suspense";case ee:return"SuspenseList";case ge:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case F:return"Portal";case ie:return e.displayName||"Context";case ue:return(e._context.displayName||"Context")+".Consumer";case fe:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case se:return t=e.displayName||null,t!==null?t:Ke(e.type)||"Memo";case Ee:t=e._payload,e=e._init;try{return Ke(e(t))}catch{}}return null}var Qe=Array.isArray,j=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe={pending:!1,data:null,method:null,action:null},ne=[],he=-1;function b(e){return{current:e}}function x(e){0>he||(e.current=ne[he],ne[he]=null,he--)}function J(e,t){he++,ne[he]=e.current,e.current=t}var P=b(null),$=b(null),re=b(null),ye=b(null);function it(e,t){switch(J(re,t),J($,e),J(P,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?ly(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=ly(t),e=cy(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}x(P),J(P,e)}function De(){x(P),x($),x(re)}function Ot(e){e.memoizedState!==null&&J(ye,e);var t=P.current,i=cy(t,e.type);t!==i&&(J($,e),J(P,i))}function Ci(e){$.current===e&&(x(P),x($)),ye.current===e&&(x(ye),Fr._currentValue=oe)}var bt,ei;function Bt(e){if(bt===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);bt=t&&t[1]||"",ei=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+bt+e+ei}var Rt=!1;function ja(e,t){if(!e||Rt)return"";Rt=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(t){var V=function(){throw Error()};if(Object.defineProperty(V.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(V,[])}catch(U){var M=U}Reflect.construct(e,[],V)}else{try{V.call()}catch(U){M=U}e.call(V.prototype)}}else{try{throw Error()}catch(U){M=U}(V=e())&&typeof V.catch=="function"&&V.catch(function(){})}}catch(U){if(U&&M&&typeof U.stack=="string")return[U.stack,M.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var u=s.DetermineComponentFrameRoot(),g=u[0],C=u[1];if(g&&C){var A=g.split(`
`),R=C.split(`
`);for(c=s=0;s<A.length&&!A[s].includes("DetermineComponentFrameRoot");)s++;for(;c<R.length&&!R[c].includes("DetermineComponentFrameRoot");)c++;if(s===A.length||c===R.length)for(s=A.length-1,c=R.length-1;1<=s&&0<=c&&A[s]!==R[c];)c--;for(;1<=s&&0<=c;s--,c--)if(A[s]!==R[c]){if(s!==1||c!==1)do if(s--,c--,0>c||A[s]!==R[c]){var B=`
`+A[s].replace(" at new "," at ");return e.displayName&&B.includes("<anonymous>")&&(B=B.replace("<anonymous>",e.displayName)),B}while(1<=s&&0<=c);break}}}finally{Rt=!1,Error.prepareStackTrace=i}return(i=e?e.displayName||e.name:"")?Bt(i):""}function Rs(e,t){switch(e.tag){case 26:case 27:case 5:return Bt(e.type);case 16:return Bt("Lazy");case 13:return e.child!==t&&t!==null?Bt("Suspense Fallback"):Bt("Suspense");case 19:return Bt("SuspenseList");case 0:case 15:return ja(e.type,!1);case 11:return ja(e.type.render,!1);case 1:return ja(e.type,!0);case 31:return Bt("Activity");default:return""}}function ti(e){try{var t="",i=null;do t+=Rs(e,i),i=e,e=e.return;while(e);return t}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}var qi=Object.prototype.hasOwnProperty,Ha=l.unstable_scheduleCallback,za=l.unstable_cancelCallback,Ns=l.unstable_shouldYield,Ms=l.unstable_requestPaint,Kt=l.unstable_now,vl=l.unstable_getCurrentPriorityLevel,Ko=l.unstable_ImmediatePriority,xs=l.unstable_UserBlockingPriority,fn=l.unstable_NormalPriority,Po=l.unstable_LowPriority,La=l.unstable_IdlePriority,Ba=l.log,Ds=l.unstable_setDisableYieldValue,ni=null,Nt=null;function bn(e){if(typeof Ba=="function"&&Ds(e),Nt&&typeof Nt.setStrictMode=="function")try{Nt.setStrictMode(ni,e)}catch{}}var Yt=Math.clz32?Math.clz32:Fo,Go=Math.log,Vo=Math.LN2;function Fo(e){return e>>>=0,e===0?32:31-(Go(e)/Vo|0)|0}var Ka=256,Si=262144,ii=4194304;function ai(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Pa(e,t,i){var s=e.pendingLanes;if(s===0)return 0;var c=0,u=e.suspendedLanes,g=e.pingedLanes;e=e.warmLanes;var C=s&134217727;return C!==0?(s=C&~u,s!==0?c=ai(s):(g&=C,g!==0?c=ai(g):i||(i=C&~e,i!==0&&(c=ai(i))))):(C=s&~u,C!==0?c=ai(C):g!==0?c=ai(g):i||(i=s&~e,i!==0&&(c=ai(i)))),c===0?0:t!==0&&t!==c&&(t&u)===0&&(u=c&-c,i=t&-t,u>=i||u===32&&(i&4194048)!==0)?t:c}function Ti(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Yo(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Qo(){var e=ii;return ii<<=1,(ii&62914560)===0&&(ii=4194304),e}function Us(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function Ga(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Au(e,t,i,s,c,u){var g=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var C=e.entanglements,A=e.expirationTimes,R=e.hiddenUpdates;for(i=g&~i;0<i;){var B=31-Yt(i),V=1<<B;C[B]=0,A[B]=-1;var M=R[B];if(M!==null)for(R[B]=null,B=0;B<M.length;B++){var U=M[B];U!==null&&(U.lane&=-536870913)}i&=~V}s!==0&&Cl(e,s,0),u!==0&&c===0&&e.tag!==0&&(e.suspendedLanes|=u&~(g&~t))}function Cl(e,t,i){e.pendingLanes|=t,e.suspendedLanes&=~t;var s=31-Yt(t);e.entangledLanes|=t,e.entanglements[s]=e.entanglements[s]|1073741824|i&261930}function Sl(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var s=31-Yt(i),c=1<<s;c&t|e[s]&t&&(e[s]|=t),i&=~c}}function Va(e,t){var i=t&-t;return i=(i&42)!==0?1:Ji(i),(i&(e.suspendedLanes|t))!==0?0:i}function Ji(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Xi(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function js(){var e=q.p;return e!==0?e:(e=window.event,e===void 0?32:My(e.type))}function qo(e,t){var i=q.p;try{return q.p=e,t()}finally{q.p=i}}var wn=Math.random().toString(36).slice(2),lt="__reactFiber$"+wn,wt="__reactProps$"+wn,Ei="__reactContainer$"+wn,Fa="__reactEvents$"+wn,Ai="__reactListeners$"+wn,Zi="__reactHandles$"+wn,si="__reactResources$"+wn,gn="__reactMarker$"+wn;function Jo(e){delete e[lt],delete e[wt],delete e[Fa],delete e[Ai],delete e[Zi]}function $i(e){var t=e[lt];if(t)return t;for(var i=e.parentNode;i;){if(t=i[Ei]||i[lt]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=py(e);e!==null;){if(i=e[lt])return i;e=py(e)}return t}e=i,i=e.parentNode}return null}function oi(e){if(e=e[lt]||e[Ei]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Pe(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(o(33))}function ri(e){var t=e[si];return t||(t=e[si]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function ut(e){e[gn]=!0}var Qt=new Set,Ya={};function mn(e,t){bi(e,t),bi(e+"Capture",t)}function bi(e,t){for(Ya[e]=t,e=0;e<t.length;e++)Qt.add(t[e])}var bu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Xo={},Hs={};function zs(e){return qi.call(Hs,e)?!0:qi.call(Xo,e)?!1:bu.test(e)?Hs[e]=!0:(Xo[e]=!0,!1)}function Ls(e,t,i){if(zs(t))if(i===null)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var s=t.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+i)}}function Bs(e,t,i){if(i===null)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+i)}}function Bn(e,t,i,s){if(s===null)e.removeAttribute(i);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttributeNS(t,i,""+s)}}function Wt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Qa(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function li(e,t,i){var s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var c=s.get,u=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(g){i=""+g,u.call(this,g)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return i},setValue:function(g){i=""+g},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Zo(e){if(!e._valueTracker){var t=Qa(e)?"checked":"value";e._valueTracker=li(e,t,""+e[t])}}function Ks(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),s="";return e&&(s=Qa(e)?e.checked?"true":"false":e.value),e=s,e!==i?(t.setValue(e),!0):!1}function Wi(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var $o=/[\n"\\]/g;function ct(e){return e.replace($o,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Wo(e,t,i,s,c,u,g,C){e.name="",g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"?e.type=g:e.removeAttribute("type"),t!=null?g==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Wt(t)):e.value!==""+Wt(t)&&(e.value=""+Wt(t)):g!=="submit"&&g!=="reset"||e.removeAttribute("value"),t!=null?wi(e,g,Wt(t)):i!=null?wi(e,g,Wt(i)):s!=null&&e.removeAttribute("value"),c==null&&u!=null&&(e.defaultChecked=!!u),c!=null&&(e.checked=c&&typeof c!="function"&&typeof c!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?e.name=""+Wt(C):e.removeAttribute("name")}function Tl(e,t,i,s,c,u,g,C){if(u!=null&&typeof u!="function"&&typeof u!="symbol"&&typeof u!="boolean"&&(e.type=u),t!=null||i!=null){if(!(u!=="submit"&&u!=="reset"||t!=null)){Zo(e);return}i=i!=null?""+Wt(i):"",t=t!=null?""+Wt(t):i,C||t===e.value||(e.value=t),e.defaultValue=t}s=s??c,s=typeof s!="function"&&typeof s!="symbol"&&!!s,e.checked=C?e.checked:!!s,e.defaultChecked=!!s,g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(e.name=g),Zo(e)}function wi(e,t,i){t==="number"&&Wi(e.ownerDocument)===e||e.defaultValue===""+i||(e.defaultValue=""+i)}function _n(e,t,i,s){if(e=e.options,t){t={};for(var c=0;c<i.length;c++)t["$"+i[c]]=!0;for(i=0;i<e.length;i++)c=t.hasOwnProperty("$"+e[i].value),e[i].selected!==c&&(e[i].selected=c),c&&s&&(e[i].defaultSelected=!0)}else{for(i=""+Wt(i),t=null,c=0;c<e.length;c++){if(e[c].value===i){e[c].selected=!0,s&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function El(e,t,i){if(t!=null&&(t=""+Wt(t),t!==e.value&&(e.value=t),i==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=i!=null?""+Wt(i):""}function Al(e,t,i,s){if(t==null){if(s!=null){if(i!=null)throw Error(o(92));if(Qe(s)){if(1<s.length)throw Error(o(93));s=s[0]}i=s}i==null&&(i=""),t=i}i=Wt(t),e.defaultValue=i,s=e.textContent,s===i&&s!==""&&s!==null&&(e.value=s),Zo(e)}function pt(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var qt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function er(e,t,i){var s=t.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?s?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":s?e.setProperty(t,i):typeof i!="number"||i===0||qt.has(t)?t==="float"?e.cssFloat=i:e[t]=(""+i).trim():e[t]=i+"px"}function Pt(e,t,i){if(t!=null&&typeof t!="object")throw Error(o(62));if(e=e.style,i!=null){for(var s in i)!i.hasOwnProperty(s)||t!=null&&t.hasOwnProperty(s)||(s.indexOf("--")===0?e.setProperty(s,""):s==="float"?e.cssFloat="":e[s]="");for(var c in t)s=t[c],t.hasOwnProperty(c)&&i[c]!==s&&er(e,c,s)}else for(var u in t)t.hasOwnProperty(u)&&er(e,u,t[u])}function Kn(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bl=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),tr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function yt(e){return tr.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function kn(){}var Ps=null;function nr(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var _i=null,ci=null;function Gs(e){var t=oi(e);if(t&&(e=t.stateNode)){var i=e[wt]||null;e:switch(e=t.stateNode,t.type){case"input":if(Wo(e,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+ct(""+t)+'"][type="radio"]'),t=0;t<i.length;t++){var s=i[t];if(s!==e&&s.form===e.form){var c=s[wt]||null;if(!c)throw Error(o(90));Wo(s,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name)}}for(t=0;t<i.length;t++)s=i[t],s.form===e.form&&Ks(s)}break e;case"textarea":El(e,i.value,i.defaultValue);break e;case"select":t=i.value,t!=null&&_n(e,!!i.multiple,t,!1)}}}var ir=!1;function wl(e,t,i){if(ir)return e(t,i);ir=!0;try{var s=e(t);return s}finally{if(ir=!1,(_i!==null||ci!==null)&&(fc(),_i&&(t=_i,e=ci,ci=_i=null,Gs(t),e)))for(t=0;t<e.length;t++)Gs(e[t])}}function ke(e,t){var i=e.stateNode;if(i===null)return null;var s=i[wt]||null;if(s===null)return null;i=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(o(231,t,typeof i));return i}var Pn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ar=!1;if(Pn)try{var ea={};Object.defineProperty(ea,"passive",{get:function(){ar=!0}}),window.addEventListener("test",ea,ea),window.removeEventListener("test",ea,ea)}catch{ar=!1}var ui=null,sr=null,qa=null;function Ja(){if(qa)return qa;var e,t=sr,i=t.length,s,c="value"in ui?ui.value:ui.textContent,u=c.length;for(e=0;e<i&&t[e]===c[e];e++);var g=i-e;for(s=1;s<=g&&t[i-s]===c[u-s];s++);return qa=c.slice(e,1<s?1-s:void 0)}function Vs(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ta(){return!0}function Xa(){return!1}function Mt(e){function t(i,s,c,u,g){this._reactName=i,this._targetInst=c,this.type=s,this.nativeEvent=u,this.target=g,this.currentTarget=null;for(var C in e)e.hasOwnProperty(C)&&(i=e[C],this[C]=i?i(u):u[C]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?ta:Xa,this.isPropagationStopped=Xa,this}return T(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=ta)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=ta)},persist:function(){},isPersistent:ta}),t}var ki={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fs=Mt(ki),Za=T({},ki,{view:0,detail:0}),_l=Mt(Za),or,rr,Ii,$a=T({},Za,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cr,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ii&&(Ii&&e.type==="mousemove"?(or=e.screenX-Ii.screenX,rr=e.screenY-Ii.screenY):rr=or=0,Ii=e),or)},movementY:function(e){return"movementY"in e?e.movementY:rr}}),kl=Mt($a),wu=T({},$a,{dataTransfer:0}),_u=Mt(wu),ku=T({},Za,{relatedTarget:0}),lr=Mt(ku),Iu=T({},ki,{animationName:0,elapsedTime:0,pseudoElement:0}),Ou=Mt(Iu),Ru=T({},ki,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Nu=Mt(Ru),Il=T({},ki,{data:0}),Ol=Mt(Il),Mu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Du={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Uu(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Du[e])?!!t[e]:!1}function cr(){return Uu}var Ys=T({},Za,{key:function(e){if(e.key){var t=Mu[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Vs(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?xu[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cr,charCode:function(e){return e.type==="keypress"?Vs(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Vs(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ur=Mt(Ys),ju=T({},$a,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Rl=Mt(ju),Hu=T({},Za,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cr}),zu=Mt(Hu),Lu=T({},ki,{propertyName:0,elapsedTime:0,pseudoElement:0}),Bu=Mt(Lu),Nl=T({},$a,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ml=Mt(Nl),Qs=T({},ki,{newState:0,oldState:0}),dr=Mt(Qs),Ku=[9,13,27,32],hr=Pn&&"CompositionEvent"in window,Wa=null;Pn&&"documentMode"in document&&(Wa=document.documentMode);var m=Pn&&"TextEvent"in window&&!Wa,E=Pn&&(!hr||Wa&&8<Wa&&11>=Wa),I=" ",D=!1;function L(e,t){switch(e){case"keyup":return Ku.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function X(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var H=!1;function ce(e,t){switch(e){case"compositionend":return X(t);case"keypress":return t.which!==32?null:(D=!0,I);case"textInput":return e=t.data,e===I&&D?null:e;default:return null}}function Se(e,t){if(H)return e==="compositionend"||!hr&&L(e,t)?(e=Ja(),qa=sr=ui=null,H=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return E&&t.locale!=="ko"?null:t.data;default:return null}}var Ye={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function je(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Ye[e.type]:t==="textarea"}function _t(e,t,i,s){_i?ci?ci.push(s):ci=[s]:_i=s,t=Sc(t,"onChange"),0<t.length&&(i=new Fs("onChange","change",null,i,s),e.push({event:i,listeners:t}))}var kt=null,xt=null;function Jt(e){ny(e,0)}function es(e){var t=Pe(e);if(Ks(t))return e}function fr(e,t){if(e==="change")return t}var gr=!1;if(Pn){var ts;if(Pn){var Gn="oninput"in document;if(!Gn){var na=document.createElement("div");na.setAttribute("oninput","return;"),Gn=typeof na.oninput=="function"}ts=Gn}else ts=!1;gr=ts&&(!document.documentMode||9<document.documentMode)}function Pu(){kt&&(kt.detachEvent("onpropertychange",Gu),xt=kt=null)}function Gu(e){if(e.propertyName==="value"&&es(xt)){var t=[];_t(t,xt,e,nr(e)),wl(Jt,t)}}function jS(e,t,i){e==="focusin"?(Pu(),kt=t,xt=i,kt.attachEvent("onpropertychange",Gu)):e==="focusout"&&Pu()}function HS(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return es(xt)}function zS(e,t){if(e==="click")return es(t)}function LS(e,t){if(e==="input"||e==="change")return es(t)}function BS(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var pn=typeof Object.is=="function"?Object.is:BS;function mr(e,t){if(pn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),s=Object.keys(t);if(i.length!==s.length)return!1;for(s=0;s<i.length;s++){var c=i[s];if(!qi.call(t,c)||!pn(e[c],t[c]))return!1}return!0}function _g(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function kg(e,t){var i=_g(e);e=0;for(var s;i;){if(i.nodeType===3){if(s=e+i.textContent.length,e<=t&&s>=t)return{node:i,offset:t-e};e=s}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=_g(i)}}function Ig(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Ig(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Og(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Wi(e.document);t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=Wi(e.document)}return t}function Vu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var KS=Pn&&"documentMode"in document&&11>=document.documentMode,qs=null,Fu=null,pr=null,Yu=!1;function Rg(e,t,i){var s=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Yu||qs==null||qs!==Wi(s)||(s=qs,"selectionStart"in s&&Vu(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),pr&&mr(pr,s)||(pr=s,s=Sc(Fu,"onSelect"),0<s.length&&(t=new Fs("onSelect","select",null,t,i),e.push({event:t,listeners:s}),t.target=qs)))}function ns(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var Js={animationend:ns("Animation","AnimationEnd"),animationiteration:ns("Animation","AnimationIteration"),animationstart:ns("Animation","AnimationStart"),transitionrun:ns("Transition","TransitionRun"),transitionstart:ns("Transition","TransitionStart"),transitioncancel:ns("Transition","TransitionCancel"),transitionend:ns("Transition","TransitionEnd")},Qu={},Ng={};Pn&&(Ng=document.createElement("div").style,"AnimationEvent"in window||(delete Js.animationend.animation,delete Js.animationiteration.animation,delete Js.animationstart.animation),"TransitionEvent"in window||delete Js.transitionend.transition);function is(e){if(Qu[e])return Qu[e];if(!Js[e])return e;var t=Js[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in Ng)return Qu[e]=t[i];return e}var Mg=is("animationend"),xg=is("animationiteration"),Dg=is("animationstart"),PS=is("transitionrun"),GS=is("transitionstart"),VS=is("transitioncancel"),Ug=is("transitionend"),jg=new Map,qu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");qu.push("scrollEnd");function Vn(e,t){jg.set(e,t),mn(t,[e])}var xl=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},In=[],Xs=0,Ju=0;function Dl(){for(var e=Xs,t=Ju=Xs=0;t<e;){var i=In[t];In[t++]=null;var s=In[t];In[t++]=null;var c=In[t];In[t++]=null;var u=In[t];if(In[t++]=null,s!==null&&c!==null){var g=s.pending;g===null?c.next=c:(c.next=g.next,g.next=c),s.pending=c}u!==0&&Hg(i,c,u)}}function Ul(e,t,i,s){In[Xs++]=e,In[Xs++]=t,In[Xs++]=i,In[Xs++]=s,Ju|=s,e.lanes|=s,e=e.alternate,e!==null&&(e.lanes|=s)}function Xu(e,t,i,s){return Ul(e,t,i,s),jl(e)}function as(e,t){return Ul(e,null,null,t),jl(e)}function Hg(e,t,i){e.lanes|=i;var s=e.alternate;s!==null&&(s.lanes|=i);for(var c=!1,u=e.return;u!==null;)u.childLanes|=i,s=u.alternate,s!==null&&(s.childLanes|=i),u.tag===22&&(e=u.stateNode,e===null||e._visibility&1||(c=!0)),e=u,u=u.return;return e.tag===3?(u=e.stateNode,c&&t!==null&&(c=31-Yt(i),e=u.hiddenUpdates,s=e[c],s===null?e[c]=[t]:s.push(t),t.lane=i|536870912),u):null}function jl(e){if(50<zr)throw zr=0,sh=null,Error(o(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Zs={};function FS(e,t,i,s){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yn(e,t,i,s){return new FS(e,t,i,s)}function Zu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Oi(e,t){var i=e.alternate;return i===null?(i=yn(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&65011712,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function zg(e,t){e.flags&=65011714;var i=e.alternate;return i===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,t=i.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Hl(e,t,i,s,c,u){var g=0;if(s=e,typeof e=="function")Zu(e)&&(g=1);else if(typeof e=="string")g=XT(e,i,P.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case ge:return e=yn(31,i,t,c),e.elementType=ge,e.lanes=u,e;case Y:return ss(i.children,c,u,t);case pe:g=8,c|=24;break;case Z:return e=yn(12,i,t,c|2),e.elementType=Z,e.lanes=u,e;case W:return e=yn(13,i,t,c),e.elementType=W,e.lanes=u,e;case ee:return e=yn(19,i,t,c),e.elementType=ee,e.lanes=u,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ie:g=10;break e;case ue:g=9;break e;case fe:g=11;break e;case se:g=14;break e;case Ee:g=16,s=null;break e}g=29,i=Error(o(130,e===null?"null":typeof e,"")),s=null}return t=yn(g,i,t,c),t.elementType=e,t.type=s,t.lanes=u,t}function ss(e,t,i,s){return e=yn(7,e,s,t),e.lanes=i,e}function $u(e,t,i){return e=yn(6,e,null,t),e.lanes=i,e}function Lg(e){var t=yn(18,null,null,0);return t.stateNode=e,t}function Wu(e,t,i){return t=yn(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Bg=new WeakMap;function On(e,t){if(typeof e=="object"&&e!==null){var i=Bg.get(e);return i!==void 0?i:(t={value:e,source:t,stack:ti(t)},Bg.set(e,t),t)}return{value:e,source:t,stack:ti(t)}}var $s=[],Ws=0,zl=null,yr=0,Rn=[],Nn=0,ia=null,di=1,hi="";function Ri(e,t){$s[Ws++]=yr,$s[Ws++]=zl,zl=e,yr=t}function Kg(e,t,i){Rn[Nn++]=di,Rn[Nn++]=hi,Rn[Nn++]=ia,ia=e;var s=di;e=hi;var c=32-Yt(s)-1;s&=~(1<<c),i+=1;var u=32-Yt(t)+c;if(30<u){var g=c-c%5;u=(s&(1<<g)-1).toString(32),s>>=g,c-=g,di=1<<32-Yt(t)+c|i<<c|s,hi=u+e}else di=1<<u|i<<c|s,hi=e}function ed(e){e.return!==null&&(Ri(e,1),Kg(e,1,0))}function td(e){for(;e===zl;)zl=$s[--Ws],$s[Ws]=null,yr=$s[--Ws],$s[Ws]=null;for(;e===ia;)ia=Rn[--Nn],Rn[Nn]=null,hi=Rn[--Nn],Rn[Nn]=null,di=Rn[--Nn],Rn[Nn]=null}function Pg(e,t){Rn[Nn++]=di,Rn[Nn++]=hi,Rn[Nn++]=ia,di=t.id,hi=t.overflow,ia=e}var Dt=null,at=null,Ue=!1,aa=null,Mn=!1,nd=Error(o(519));function sa(e){var t=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw vr(On(t,e)),nd}function Gg(e){var t=e.stateNode,i=e.type,s=e.memoizedProps;switch(t[lt]=e,t[wt]=s,i){case"dialog":Ne("cancel",t),Ne("close",t);break;case"iframe":case"object":case"embed":Ne("load",t);break;case"video":case"audio":for(i=0;i<Br.length;i++)Ne(Br[i],t);break;case"source":Ne("error",t);break;case"img":case"image":case"link":Ne("error",t),Ne("load",t);break;case"details":Ne("toggle",t);break;case"input":Ne("invalid",t),Tl(t,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0);break;case"select":Ne("invalid",t);break;case"textarea":Ne("invalid",t),Al(t,s.value,s.defaultValue,s.children)}i=s.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||t.textContent===""+i||s.suppressHydrationWarning===!0||oy(t.textContent,i)?(s.popover!=null&&(Ne("beforetoggle",t),Ne("toggle",t)),s.onScroll!=null&&Ne("scroll",t),s.onScrollEnd!=null&&Ne("scrollend",t),s.onClick!=null&&(t.onclick=kn),t=!0):t=!1,t||sa(e,!0)}function Vg(e){for(Dt=e.return;Dt;)switch(Dt.tag){case 5:case 31:case 13:Mn=!1;return;case 27:case 3:Mn=!0;return;default:Dt=Dt.return}}function eo(e){if(e!==Dt)return!1;if(!Ue)return Vg(e),Ue=!0,!1;var t=e.tag,i;if((i=t!==3&&t!==27)&&((i=t===5)&&(i=e.type,i=!(i!=="form"&&i!=="button")||Sh(e.type,e.memoizedProps)),i=!i),i&&at&&sa(e),Vg(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));at=my(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));at=my(e)}else t===27?(t=at,Ca(e.type)?(e=wh,wh=null,at=e):at=t):at=Dt?Dn(e.stateNode.nextSibling):null;return!0}function os(){at=Dt=null,Ue=!1}function id(){var e=aa;return e!==null&&(an===null?an=e:an.push.apply(an,e),aa=null),e}function vr(e){aa===null?aa=[e]:aa.push(e)}var ad=b(null),rs=null,Ni=null;function oa(e,t,i){J(ad,t._currentValue),t._currentValue=i}function Mi(e){e._currentValue=ad.current,x(ad)}function sd(e,t,i){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===i)break;e=e.return}}function od(e,t,i,s){var c=e.child;for(c!==null&&(c.return=e);c!==null;){var u=c.dependencies;if(u!==null){var g=c.child;u=u.firstContext;e:for(;u!==null;){var C=u;u=c;for(var A=0;A<t.length;A++)if(C.context===t[A]){u.lanes|=i,C=u.alternate,C!==null&&(C.lanes|=i),sd(u.return,i,e),s||(g=null);break e}u=C.next}}else if(c.tag===18){if(g=c.return,g===null)throw Error(o(341));g.lanes|=i,u=g.alternate,u!==null&&(u.lanes|=i),sd(g,i,e),g=null}else g=c.child;if(g!==null)g.return=c;else for(g=c;g!==null;){if(g===e){g=null;break}if(c=g.sibling,c!==null){c.return=g.return,g=c;break}g=g.return}c=g}}function to(e,t,i,s){e=null;for(var c=t,u=!1;c!==null;){if(!u){if((c.flags&524288)!==0)u=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var g=c.alternate;if(g===null)throw Error(o(387));if(g=g.memoizedProps,g!==null){var C=c.type;pn(c.pendingProps.value,g.value)||(e!==null?e.push(C):e=[C])}}else if(c===ye.current){if(g=c.alternate,g===null)throw Error(o(387));g.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(e!==null?e.push(Fr):e=[Fr])}c=c.return}e!==null&&od(t,e,i,s),t.flags|=262144}function Ll(e){for(e=e.firstContext;e!==null;){if(!pn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ls(e){rs=e,Ni=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Ut(e){return Fg(rs,e)}function Bl(e,t){return rs===null&&ls(e),Fg(e,t)}function Fg(e,t){var i=t._currentValue;if(t={context:t,memoizedValue:i,next:null},Ni===null){if(e===null)throw Error(o(308));Ni=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Ni=Ni.next=t;return i}var YS=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(i,s){e.push(s)}};this.abort=function(){t.aborted=!0,e.forEach(function(i){return i()})}},QS=l.unstable_scheduleCallback,qS=l.unstable_NormalPriority,vt={$$typeof:ie,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function rd(){return{controller:new YS,data:new Map,refCount:0}}function Cr(e){e.refCount--,e.refCount===0&&QS(qS,function(){e.controller.abort()})}var Sr=null,ld=0,no=0,io=null;function JS(e,t){if(Sr===null){var i=Sr=[];ld=0,no=dh(),io={status:"pending",value:void 0,then:function(s){i.push(s)}}}return ld++,t.then(Yg,Yg),t}function Yg(){if(--ld===0&&Sr!==null){io!==null&&(io.status="fulfilled");var e=Sr;Sr=null,no=0,io=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function XS(e,t){var i=[],s={status:"pending",value:null,reason:null,then:function(c){i.push(c)}};return e.then(function(){s.status="fulfilled",s.value=t;for(var c=0;c<i.length;c++)(0,i[c])(t)},function(c){for(s.status="rejected",s.reason=c,c=0;c<i.length;c++)(0,i[c])(void 0)}),s}var Qg=j.S;j.S=function(e,t){Rp=Kt(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&JS(e,t),Qg!==null&&Qg(e,t)};var cs=b(null);function cd(){var e=cs.current;return e!==null?e:et.pooledCache}function Kl(e,t){t===null?J(cs,cs.current):J(cs,t.pool)}function qg(){var e=cd();return e===null?null:{parent:vt._currentValue,pool:e}}var ao=Error(o(460)),ud=Error(o(474)),Pl=Error(o(542)),Gl={then:function(){}};function Jg(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Xg(e,t,i){switch(i=e[i],i===void 0?e.push(t):i!==t&&(t.then(kn,kn),t=i),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,$g(e),e;default:if(typeof t.status=="string")t.then(kn,kn);else{if(e=et,e!==null&&100<e.shellSuspendCounter)throw Error(o(482));e=t,e.status="pending",e.then(function(s){if(t.status==="pending"){var c=t;c.status="fulfilled",c.value=s}},function(s){if(t.status==="pending"){var c=t;c.status="rejected",c.reason=s}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,$g(e),e}throw ds=t,ao}}function us(e){try{var t=e._init;return t(e._payload)}catch(i){throw i!==null&&typeof i=="object"&&typeof i.then=="function"?(ds=i,ao):i}}var ds=null;function Zg(){if(ds===null)throw Error(o(459));var e=ds;return ds=null,e}function $g(e){if(e===ao||e===Pl)throw Error(o(483))}var so=null,Tr=0;function Vl(e){var t=Tr;return Tr+=1,so===null&&(so=[]),Xg(so,e,t)}function Er(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Fl(e,t){throw t.$$typeof===k?Error(o(525)):(e=Object.prototype.toString.call(t),Error(o(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Wg(e){function t(_,w){if(e){var O=_.deletions;O===null?(_.deletions=[w],_.flags|=16):O.push(w)}}function i(_,w){if(!e)return null;for(;w!==null;)t(_,w),w=w.sibling;return null}function s(_){for(var w=new Map;_!==null;)_.key!==null?w.set(_.key,_):w.set(_.index,_),_=_.sibling;return w}function c(_,w){return _=Oi(_,w),_.index=0,_.sibling=null,_}function u(_,w,O){return _.index=O,e?(O=_.alternate,O!==null?(O=O.index,O<w?(_.flags|=67108866,w):O):(_.flags|=67108866,w)):(_.flags|=1048576,w)}function g(_){return e&&_.alternate===null&&(_.flags|=67108866),_}function C(_,w,O,G){return w===null||w.tag!==6?(w=$u(O,_.mode,G),w.return=_,w):(w=c(w,O),w.return=_,w)}function A(_,w,O,G){var de=O.type;return de===Y?B(_,w,O.props.children,G,O.key):w!==null&&(w.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===Ee&&us(de)===w.type)?(w=c(w,O.props),Er(w,O),w.return=_,w):(w=Hl(O.type,O.key,O.props,null,_.mode,G),Er(w,O),w.return=_,w)}function R(_,w,O,G){return w===null||w.tag!==4||w.stateNode.containerInfo!==O.containerInfo||w.stateNode.implementation!==O.implementation?(w=Wu(O,_.mode,G),w.return=_,w):(w=c(w,O.children||[]),w.return=_,w)}function B(_,w,O,G,de){return w===null||w.tag!==7?(w=ss(O,_.mode,G,de),w.return=_,w):(w=c(w,O),w.return=_,w)}function V(_,w,O){if(typeof w=="string"&&w!==""||typeof w=="number"||typeof w=="bigint")return w=$u(""+w,_.mode,O),w.return=_,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case N:return O=Hl(w.type,w.key,w.props,null,_.mode,O),Er(O,w),O.return=_,O;case F:return w=Wu(w,_.mode,O),w.return=_,w;case Ee:return w=us(w),V(_,w,O)}if(Qe(w)||Ae(w))return w=ss(w,_.mode,O,null),w.return=_,w;if(typeof w.then=="function")return V(_,Vl(w),O);if(w.$$typeof===ie)return V(_,Bl(_,w),O);Fl(_,w)}return null}function M(_,w,O,G){var de=w!==null?w.key:null;if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return de!==null?null:C(_,w,""+O,G);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case N:return O.key===de?A(_,w,O,G):null;case F:return O.key===de?R(_,w,O,G):null;case Ee:return O=us(O),M(_,w,O,G)}if(Qe(O)||Ae(O))return de!==null?null:B(_,w,O,G,null);if(typeof O.then=="function")return M(_,w,Vl(O),G);if(O.$$typeof===ie)return M(_,w,Bl(_,O),G);Fl(_,O)}return null}function U(_,w,O,G,de){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return _=_.get(O)||null,C(w,_,""+G,de);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case N:return _=_.get(G.key===null?O:G.key)||null,A(w,_,G,de);case F:return _=_.get(G.key===null?O:G.key)||null,R(w,_,G,de);case Ee:return G=us(G),U(_,w,O,G,de)}if(Qe(G)||Ae(G))return _=_.get(O)||null,B(w,_,G,de,null);if(typeof G.then=="function")return U(_,w,O,Vl(G),de);if(G.$$typeof===ie)return U(_,w,O,Bl(w,G),de);Fl(w,G)}return null}function ae(_,w,O,G){for(var de=null,Le=null,le=w,_e=w=0,xe=null;le!==null&&_e<O.length;_e++){le.index>_e?(xe=le,le=null):xe=le.sibling;var Be=M(_,le,O[_e],G);if(Be===null){le===null&&(le=xe);break}e&&le&&Be.alternate===null&&t(_,le),w=u(Be,w,_e),Le===null?de=Be:Le.sibling=Be,Le=Be,le=xe}if(_e===O.length)return i(_,le),Ue&&Ri(_,_e),de;if(le===null){for(;_e<O.length;_e++)le=V(_,O[_e],G),le!==null&&(w=u(le,w,_e),Le===null?de=le:Le.sibling=le,Le=le);return Ue&&Ri(_,_e),de}for(le=s(le);_e<O.length;_e++)xe=U(le,_,_e,O[_e],G),xe!==null&&(e&&xe.alternate!==null&&le.delete(xe.key===null?_e:xe.key),w=u(xe,w,_e),Le===null?de=xe:Le.sibling=xe,Le=xe);return e&&le.forEach(function(ba){return t(_,ba)}),Ue&&Ri(_,_e),de}function me(_,w,O,G){if(O==null)throw Error(o(151));for(var de=null,Le=null,le=w,_e=w=0,xe=null,Be=O.next();le!==null&&!Be.done;_e++,Be=O.next()){le.index>_e?(xe=le,le=null):xe=le.sibling;var ba=M(_,le,Be.value,G);if(ba===null){le===null&&(le=xe);break}e&&le&&ba.alternate===null&&t(_,le),w=u(ba,w,_e),Le===null?de=ba:Le.sibling=ba,Le=ba,le=xe}if(Be.done)return i(_,le),Ue&&Ri(_,_e),de;if(le===null){for(;!Be.done;_e++,Be=O.next())Be=V(_,Be.value,G),Be!==null&&(w=u(Be,w,_e),Le===null?de=Be:Le.sibling=Be,Le=Be);return Ue&&Ri(_,_e),de}for(le=s(le);!Be.done;_e++,Be=O.next())Be=U(le,_,_e,Be.value,G),Be!==null&&(e&&Be.alternate!==null&&le.delete(Be.key===null?_e:Be.key),w=u(Be,w,_e),Le===null?de=Be:Le.sibling=Be,Le=Be);return e&&le.forEach(function(rE){return t(_,rE)}),Ue&&Ri(_,_e),de}function We(_,w,O,G){if(typeof O=="object"&&O!==null&&O.type===Y&&O.key===null&&(O=O.props.children),typeof O=="object"&&O!==null){switch(O.$$typeof){case N:e:{for(var de=O.key;w!==null;){if(w.key===de){if(de=O.type,de===Y){if(w.tag===7){i(_,w.sibling),G=c(w,O.props.children),G.return=_,_=G;break e}}else if(w.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===Ee&&us(de)===w.type){i(_,w.sibling),G=c(w,O.props),Er(G,O),G.return=_,_=G;break e}i(_,w);break}else t(_,w);w=w.sibling}O.type===Y?(G=ss(O.props.children,_.mode,G,O.key),G.return=_,_=G):(G=Hl(O.type,O.key,O.props,null,_.mode,G),Er(G,O),G.return=_,_=G)}return g(_);case F:e:{for(de=O.key;w!==null;){if(w.key===de)if(w.tag===4&&w.stateNode.containerInfo===O.containerInfo&&w.stateNode.implementation===O.implementation){i(_,w.sibling),G=c(w,O.children||[]),G.return=_,_=G;break e}else{i(_,w);break}else t(_,w);w=w.sibling}G=Wu(O,_.mode,G),G.return=_,_=G}return g(_);case Ee:return O=us(O),We(_,w,O,G)}if(Qe(O))return ae(_,w,O,G);if(Ae(O)){if(de=Ae(O),typeof de!="function")throw Error(o(150));return O=de.call(O),me(_,w,O,G)}if(typeof O.then=="function")return We(_,w,Vl(O),G);if(O.$$typeof===ie)return We(_,w,Bl(_,O),G);Fl(_,O)}return typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint"?(O=""+O,w!==null&&w.tag===6?(i(_,w.sibling),G=c(w,O),G.return=_,_=G):(i(_,w),G=$u(O,_.mode,G),G.return=_,_=G),g(_)):i(_,w)}return function(_,w,O,G){try{Tr=0;var de=We(_,w,O,G);return so=null,de}catch(le){if(le===ao||le===Pl)throw le;var Le=yn(29,le,null,_.mode);return Le.lanes=G,Le.return=_,Le}}}var hs=Wg(!0),em=Wg(!1),ra=!1;function dd(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function hd(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function la(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ca(e,t,i){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,(Ge&2)!==0){var c=s.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),s.pending=t,t=jl(e),Hg(e,null,i),t}return Ul(e,s,t,i),jl(e)}function Ar(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194048)!==0)){var s=t.lanes;s&=e.pendingLanes,i|=s,t.lanes=i,Sl(e,i)}}function fd(e,t){var i=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,i===s)){var c=null,u=null;if(i=i.firstBaseUpdate,i!==null){do{var g={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};u===null?c=u=g:u=u.next=g,i=i.next}while(i!==null);u===null?c=u=t:u=u.next=t}else c=u=t;i={baseState:s.baseState,firstBaseUpdate:c,lastBaseUpdate:u,shared:s.shared,callbacks:s.callbacks},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}var gd=!1;function br(){if(gd){var e=io;if(e!==null)throw e}}function wr(e,t,i,s){gd=!1;var c=e.updateQueue;ra=!1;var u=c.firstBaseUpdate,g=c.lastBaseUpdate,C=c.shared.pending;if(C!==null){c.shared.pending=null;var A=C,R=A.next;A.next=null,g===null?u=R:g.next=R,g=A;var B=e.alternate;B!==null&&(B=B.updateQueue,C=B.lastBaseUpdate,C!==g&&(C===null?B.firstBaseUpdate=R:C.next=R,B.lastBaseUpdate=A))}if(u!==null){var V=c.baseState;g=0,B=R=A=null,C=u;do{var M=C.lane&-536870913,U=M!==C.lane;if(U?(Me&M)===M:(s&M)===M){M!==0&&M===no&&(gd=!0),B!==null&&(B=B.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});e:{var ae=e,me=C;M=t;var We=i;switch(me.tag){case 1:if(ae=me.payload,typeof ae=="function"){V=ae.call(We,V,M);break e}V=ae;break e;case 3:ae.flags=ae.flags&-65537|128;case 0:if(ae=me.payload,M=typeof ae=="function"?ae.call(We,V,M):ae,M==null)break e;V=T({},V,M);break e;case 2:ra=!0}}M=C.callback,M!==null&&(e.flags|=64,U&&(e.flags|=8192),U=c.callbacks,U===null?c.callbacks=[M]:U.push(M))}else U={lane:M,tag:C.tag,payload:C.payload,callback:C.callback,next:null},B===null?(R=B=U,A=V):B=B.next=U,g|=M;if(C=C.next,C===null){if(C=c.shared.pending,C===null)break;U=C,C=U.next,U.next=null,c.lastBaseUpdate=U,c.shared.pending=null}}while(!0);B===null&&(A=V),c.baseState=A,c.firstBaseUpdate=R,c.lastBaseUpdate=B,u===null&&(c.shared.lanes=0),ga|=g,e.lanes=g,e.memoizedState=V}}function tm(e,t){if(typeof e!="function")throw Error(o(191,e));e.call(t)}function nm(e,t){var i=e.callbacks;if(i!==null)for(e.callbacks=null,e=0;e<i.length;e++)tm(i[e],t)}var oo=b(null),Yl=b(0);function im(e,t){e=Ki,J(Yl,e),J(oo,t),Ki=e|t.baseLanes}function md(){J(Yl,Ki),J(oo,oo.current)}function pd(){Ki=Yl.current,x(oo),x(Yl)}var vn=b(null),xn=null;function ua(e){var t=e.alternate;J(gt,gt.current&1),J(vn,e),xn===null&&(t===null||oo.current!==null||t.memoizedState!==null)&&(xn=e)}function yd(e){J(gt,gt.current),J(vn,e),xn===null&&(xn=e)}function am(e){e.tag===22?(J(gt,gt.current),J(vn,e),xn===null&&(xn=e)):da()}function da(){J(gt,gt.current),J(vn,vn.current)}function Cn(e){x(vn),xn===e&&(xn=null),x(gt)}var gt=b(0);function Ql(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||Ah(i)||bh(i)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var xi=0,be=null,Ze=null,Ct=null,ql=!1,ro=!1,fs=!1,Jl=0,_r=0,lo=null,ZS=0;function dt(){throw Error(o(321))}function vd(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!pn(e[i],t[i]))return!1;return!0}function Cd(e,t,i,s,c,u){return xi=u,be=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,j.H=e===null||e.memoizedState===null?Km:Dd,fs=!1,u=i(s,c),fs=!1,ro&&(u=om(t,i,s,c)),sm(e),u}function sm(e){j.H=Or;var t=Ze!==null&&Ze.next!==null;if(xi=0,Ct=Ze=be=null,ql=!1,_r=0,lo=null,t)throw Error(o(300));e===null||St||(e=e.dependencies,e!==null&&Ll(e)&&(St=!0))}function om(e,t,i,s){be=e;var c=0;do{if(ro&&(lo=null),_r=0,ro=!1,25<=c)throw Error(o(301));if(c+=1,Ct=Ze=null,e.updateQueue!=null){var u=e.updateQueue;u.lastEffect=null,u.events=null,u.stores=null,u.memoCache!=null&&(u.memoCache.index=0)}j.H=Pm,u=t(i,s)}while(ro);return u}function $S(){var e=j.H,t=e.useState()[0];return t=typeof t.then=="function"?kr(t):t,e=e.useState()[0],(Ze!==null?Ze.memoizedState:null)!==e&&(be.flags|=1024),t}function Sd(){var e=Jl!==0;return Jl=0,e}function Td(e,t,i){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i}function Ed(e){if(ql){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}ql=!1}xi=0,Ct=Ze=be=null,ro=!1,_r=Jl=0,lo=null}function Xt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ct===null?be.memoizedState=Ct=e:Ct=Ct.next=e,Ct}function mt(){if(Ze===null){var e=be.alternate;e=e!==null?e.memoizedState:null}else e=Ze.next;var t=Ct===null?be.memoizedState:Ct.next;if(t!==null)Ct=t,Ze=e;else{if(e===null)throw be.alternate===null?Error(o(467)):Error(o(310));Ze=e,e={memoizedState:Ze.memoizedState,baseState:Ze.baseState,baseQueue:Ze.baseQueue,queue:Ze.queue,next:null},Ct===null?be.memoizedState=Ct=e:Ct=Ct.next=e}return Ct}function Xl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function kr(e){var t=_r;return _r+=1,lo===null&&(lo=[]),e=Xg(lo,e,t),t=be,(Ct===null?t.memoizedState:Ct.next)===null&&(t=t.alternate,j.H=t===null||t.memoizedState===null?Km:Dd),e}function Zl(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return kr(e);if(e.$$typeof===ie)return Ut(e)}throw Error(o(438,String(e)))}function Ad(e){var t=null,i=be.updateQueue;if(i!==null&&(t=i.memoCache),t==null){var s=be.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(t={data:s.data.map(function(c){return c.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),i===null&&(i=Xl(),be.updateQueue=i),i.memoCache=t,i=t.data[t.index],i===void 0)for(i=t.data[t.index]=Array(e),s=0;s<e;s++)i[s]=ze;return t.index++,i}function Di(e,t){return typeof t=="function"?t(e):t}function $l(e){var t=mt();return bd(t,Ze,e)}function bd(e,t,i){var s=e.queue;if(s===null)throw Error(o(311));s.lastRenderedReducer=i;var c=e.baseQueue,u=s.pending;if(u!==null){if(c!==null){var g=c.next;c.next=u.next,u.next=g}t.baseQueue=c=u,s.pending=null}if(u=e.baseState,c===null)e.memoizedState=u;else{t=c.next;var C=g=null,A=null,R=t,B=!1;do{var V=R.lane&-536870913;if(V!==R.lane?(Me&V)===V:(xi&V)===V){var M=R.revertLane;if(M===0)A!==null&&(A=A.next={lane:0,revertLane:0,gesture:null,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null}),V===no&&(B=!0);else if((xi&M)===M){R=R.next,M===no&&(B=!0);continue}else V={lane:0,revertLane:R.revertLane,gesture:null,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null},A===null?(C=A=V,g=u):A=A.next=V,be.lanes|=M,ga|=M;V=R.action,fs&&i(u,V),u=R.hasEagerState?R.eagerState:i(u,V)}else M={lane:V,revertLane:R.revertLane,gesture:R.gesture,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null},A===null?(C=A=M,g=u):A=A.next=M,be.lanes|=V,ga|=V;R=R.next}while(R!==null&&R!==t);if(A===null?g=u:A.next=C,!pn(u,e.memoizedState)&&(St=!0,B&&(i=io,i!==null)))throw i;e.memoizedState=u,e.baseState=g,e.baseQueue=A,s.lastRenderedState=u}return c===null&&(s.lanes=0),[e.memoizedState,s.dispatch]}function wd(e){var t=mt(),i=t.queue;if(i===null)throw Error(o(311));i.lastRenderedReducer=e;var s=i.dispatch,c=i.pending,u=t.memoizedState;if(c!==null){i.pending=null;var g=c=c.next;do u=e(u,g.action),g=g.next;while(g!==c);pn(u,t.memoizedState)||(St=!0),t.memoizedState=u,t.baseQueue===null&&(t.baseState=u),i.lastRenderedState=u}return[u,s]}function rm(e,t,i){var s=be,c=mt(),u=Ue;if(u){if(i===void 0)throw Error(o(407));i=i()}else i=t();var g=!pn((Ze||c).memoizedState,i);if(g&&(c.memoizedState=i,St=!0),c=c.queue,Id(um.bind(null,s,c,e),[e]),c.getSnapshot!==t||g||Ct!==null&&Ct.memoizedState.tag&1){if(s.flags|=2048,co(9,{destroy:void 0},cm.bind(null,s,c,i,t),null),et===null)throw Error(o(349));u||(xi&127)!==0||lm(s,t,i)}return i}function lm(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=be.updateQueue,t===null?(t=Xl(),be.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function cm(e,t,i,s){t.value=i,t.getSnapshot=s,dm(t)&&hm(e)}function um(e,t,i){return i(function(){dm(t)&&hm(e)})}function dm(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!pn(e,i)}catch{return!0}}function hm(e){var t=as(e,2);t!==null&&sn(t,e,2)}function _d(e){var t=Xt();if(typeof e=="function"){var i=e;if(e=i(),fs){bn(!0);try{i()}finally{bn(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Di,lastRenderedState:e},t}function fm(e,t,i,s){return e.baseState=i,bd(e,Ze,typeof s=="function"?s:Di)}function WS(e,t,i,s,c){if(tc(e))throw Error(o(485));if(e=t.action,e!==null){var u={payload:c,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(g){u.listeners.push(g)}};j.T!==null?i(!0):u.isTransition=!1,s(u),i=t.pending,i===null?(u.next=t.pending=u,gm(t,u)):(u.next=i.next,t.pending=i.next=u)}}function gm(e,t){var i=t.action,s=t.payload,c=e.state;if(t.isTransition){var u=j.T,g={};j.T=g;try{var C=i(c,s),A=j.S;A!==null&&A(g,C),mm(e,t,C)}catch(R){kd(e,t,R)}finally{u!==null&&g.types!==null&&(u.types=g.types),j.T=u}}else try{u=i(c,s),mm(e,t,u)}catch(R){kd(e,t,R)}}function mm(e,t,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(s){pm(e,t,s)},function(s){return kd(e,t,s)}):pm(e,t,i)}function pm(e,t,i){t.status="fulfilled",t.value=i,ym(t),e.state=i,t=e.pending,t!==null&&(i=t.next,i===t?e.pending=null:(i=i.next,t.next=i,gm(e,i)))}function kd(e,t,i){var s=e.pending;if(e.pending=null,s!==null){s=s.next;do t.status="rejected",t.reason=i,ym(t),t=t.next;while(t!==s)}e.action=null}function ym(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function vm(e,t){return t}function Cm(e,t){if(Ue){var i=et.formState;if(i!==null){e:{var s=be;if(Ue){if(at){t:{for(var c=at,u=Mn;c.nodeType!==8;){if(!u){c=null;break t}if(c=Dn(c.nextSibling),c===null){c=null;break t}}u=c.data,c=u==="F!"||u==="F"?c:null}if(c){at=Dn(c.nextSibling),s=c.data==="F!";break e}}sa(s)}s=!1}s&&(t=i[0])}}return i=Xt(),i.memoizedState=i.baseState=t,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vm,lastRenderedState:t},i.queue=s,i=zm.bind(null,be,s),s.dispatch=i,s=_d(!1),u=xd.bind(null,be,!1,s.queue),s=Xt(),c={state:t,dispatch:null,action:e,pending:null},s.queue=c,i=WS.bind(null,be,c,u,i),c.dispatch=i,s.memoizedState=e,[t,i,!1]}function Sm(e){var t=mt();return Tm(t,Ze,e)}function Tm(e,t,i){if(t=bd(e,t,vm)[0],e=$l(Di)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var s=kr(t)}catch(g){throw g===ao?Pl:g}else s=t;t=mt();var c=t.queue,u=c.dispatch;return i!==t.memoizedState&&(be.flags|=2048,co(9,{destroy:void 0},eT.bind(null,c,i),null)),[s,u,e]}function eT(e,t){e.action=t}function Em(e){var t=mt(),i=Ze;if(i!==null)return Tm(t,i,e);mt(),t=t.memoizedState,i=mt();var s=i.queue.dispatch;return i.memoizedState=e,[t,s,!1]}function co(e,t,i,s){return e={tag:e,create:i,deps:s,inst:t,next:null},t=be.updateQueue,t===null&&(t=Xl(),be.updateQueue=t),i=t.lastEffect,i===null?t.lastEffect=e.next=e:(s=i.next,i.next=e,e.next=s,t.lastEffect=e),e}function Am(){return mt().memoizedState}function Wl(e,t,i,s){var c=Xt();be.flags|=e,c.memoizedState=co(1|t,{destroy:void 0},i,s===void 0?null:s)}function ec(e,t,i,s){var c=mt();s=s===void 0?null:s;var u=c.memoizedState.inst;Ze!==null&&s!==null&&vd(s,Ze.memoizedState.deps)?c.memoizedState=co(t,u,i,s):(be.flags|=e,c.memoizedState=co(1|t,u,i,s))}function bm(e,t){Wl(8390656,8,e,t)}function Id(e,t){ec(2048,8,e,t)}function tT(e){be.flags|=4;var t=be.updateQueue;if(t===null)t=Xl(),be.updateQueue=t,t.events=[e];else{var i=t.events;i===null?t.events=[e]:i.push(e)}}function wm(e){var t=mt().memoizedState;return tT({ref:t,nextImpl:e}),function(){if((Ge&2)!==0)throw Error(o(440));return t.impl.apply(void 0,arguments)}}function _m(e,t){return ec(4,2,e,t)}function km(e,t){return ec(4,4,e,t)}function Im(e,t){if(typeof t=="function"){e=e();var i=t(e);return function(){typeof i=="function"?i():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Om(e,t,i){i=i!=null?i.concat([e]):null,ec(4,4,Im.bind(null,t,e),i)}function Od(){}function Rm(e,t){var i=mt();t=t===void 0?null:t;var s=i.memoizedState;return t!==null&&vd(t,s[1])?s[0]:(i.memoizedState=[e,t],e)}function Nm(e,t){var i=mt();t=t===void 0?null:t;var s=i.memoizedState;if(t!==null&&vd(t,s[1]))return s[0];if(s=e(),fs){bn(!0);try{e()}finally{bn(!1)}}return i.memoizedState=[s,t],s}function Rd(e,t,i){return i===void 0||(xi&1073741824)!==0&&(Me&261930)===0?e.memoizedState=t:(e.memoizedState=i,e=Mp(),be.lanes|=e,ga|=e,i)}function Mm(e,t,i,s){return pn(i,t)?i:oo.current!==null?(e=Rd(e,i,s),pn(e,t)||(St=!0),e):(xi&42)===0||(xi&1073741824)!==0&&(Me&261930)===0?(St=!0,e.memoizedState=i):(e=Mp(),be.lanes|=e,ga|=e,t)}function xm(e,t,i,s,c){var u=q.p;q.p=u!==0&&8>u?u:8;var g=j.T,C={};j.T=C,xd(e,!1,t,i);try{var A=c(),R=j.S;if(R!==null&&R(C,A),A!==null&&typeof A=="object"&&typeof A.then=="function"){var B=XS(A,s);Ir(e,t,B,En(e))}else Ir(e,t,s,En(e))}catch(V){Ir(e,t,{then:function(){},status:"rejected",reason:V},En())}finally{q.p=u,g!==null&&C.types!==null&&(g.types=C.types),j.T=g}}function nT(){}function Nd(e,t,i,s){if(e.tag!==5)throw Error(o(476));var c=Dm(e).queue;xm(e,c,t,oe,i===null?nT:function(){return Um(e),i(s)})}function Dm(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:oe,baseState:oe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Di,lastRenderedState:oe},next:null};var i={};return t.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Di,lastRenderedState:i},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Um(e){var t=Dm(e);t.next===null&&(t=e.alternate.memoizedState),Ir(e,t.next.queue,{},En())}function Md(){return Ut(Fr)}function jm(){return mt().memoizedState}function Hm(){return mt().memoizedState}function iT(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var i=En();e=la(i);var s=ca(t,e,i);s!==null&&(sn(s,t,i),Ar(s,t,i)),t={cache:rd()},e.payload=t;return}t=t.return}}function aT(e,t,i){var s=En();i={lane:s,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},tc(e)?Lm(t,i):(i=Xu(e,t,i,s),i!==null&&(sn(i,e,s),Bm(i,t,s)))}function zm(e,t,i){var s=En();Ir(e,t,i,s)}function Ir(e,t,i,s){var c={lane:s,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null};if(tc(e))Lm(t,c);else{var u=e.alternate;if(e.lanes===0&&(u===null||u.lanes===0)&&(u=t.lastRenderedReducer,u!==null))try{var g=t.lastRenderedState,C=u(g,i);if(c.hasEagerState=!0,c.eagerState=C,pn(C,g))return Ul(e,t,c,0),et===null&&Dl(),!1}catch{}if(i=Xu(e,t,c,s),i!==null)return sn(i,e,s),Bm(i,t,s),!0}return!1}function xd(e,t,i,s){if(s={lane:2,revertLane:dh(),gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},tc(e)){if(t)throw Error(o(479))}else t=Xu(e,i,s,2),t!==null&&sn(t,e,2)}function tc(e){var t=e.alternate;return e===be||t!==null&&t===be}function Lm(e,t){ro=ql=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function Bm(e,t,i){if((i&4194048)!==0){var s=t.lanes;s&=e.pendingLanes,i|=s,t.lanes=i,Sl(e,i)}}var Or={readContext:Ut,use:Zl,useCallback:dt,useContext:dt,useEffect:dt,useImperativeHandle:dt,useLayoutEffect:dt,useInsertionEffect:dt,useMemo:dt,useReducer:dt,useRef:dt,useState:dt,useDebugValue:dt,useDeferredValue:dt,useTransition:dt,useSyncExternalStore:dt,useId:dt,useHostTransitionStatus:dt,useFormState:dt,useActionState:dt,useOptimistic:dt,useMemoCache:dt,useCacheRefresh:dt};Or.useEffectEvent=dt;var Km={readContext:Ut,use:Zl,useCallback:function(e,t){return Xt().memoizedState=[e,t===void 0?null:t],e},useContext:Ut,useEffect:bm,useImperativeHandle:function(e,t,i){i=i!=null?i.concat([e]):null,Wl(4194308,4,Im.bind(null,t,e),i)},useLayoutEffect:function(e,t){return Wl(4194308,4,e,t)},useInsertionEffect:function(e,t){Wl(4,2,e,t)},useMemo:function(e,t){var i=Xt();t=t===void 0?null:t;var s=e();if(fs){bn(!0);try{e()}finally{bn(!1)}}return i.memoizedState=[s,t],s},useReducer:function(e,t,i){var s=Xt();if(i!==void 0){var c=i(t);if(fs){bn(!0);try{i(t)}finally{bn(!1)}}}else c=t;return s.memoizedState=s.baseState=c,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:c},s.queue=e,e=e.dispatch=aT.bind(null,be,e),[s.memoizedState,e]},useRef:function(e){var t=Xt();return e={current:e},t.memoizedState=e},useState:function(e){e=_d(e);var t=e.queue,i=zm.bind(null,be,t);return t.dispatch=i,[e.memoizedState,i]},useDebugValue:Od,useDeferredValue:function(e,t){var i=Xt();return Rd(i,e,t)},useTransition:function(){var e=_d(!1);return e=xm.bind(null,be,e.queue,!0,!1),Xt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,i){var s=be,c=Xt();if(Ue){if(i===void 0)throw Error(o(407));i=i()}else{if(i=t(),et===null)throw Error(o(349));(Me&127)!==0||lm(s,t,i)}c.memoizedState=i;var u={value:i,getSnapshot:t};return c.queue=u,bm(um.bind(null,s,u,e),[e]),s.flags|=2048,co(9,{destroy:void 0},cm.bind(null,s,u,i,t),null),i},useId:function(){var e=Xt(),t=et.identifierPrefix;if(Ue){var i=hi,s=di;i=(s&~(1<<32-Yt(s)-1)).toString(32)+i,t="_"+t+"R_"+i,i=Jl++,0<i&&(t+="H"+i.toString(32)),t+="_"}else i=ZS++,t="_"+t+"r_"+i.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Md,useFormState:Cm,useActionState:Cm,useOptimistic:function(e){var t=Xt();t.memoizedState=t.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=i,t=xd.bind(null,be,!0,i),i.dispatch=t,[e,t]},useMemoCache:Ad,useCacheRefresh:function(){return Xt().memoizedState=iT.bind(null,be)},useEffectEvent:function(e){var t=Xt(),i={impl:e};return t.memoizedState=i,function(){if((Ge&2)!==0)throw Error(o(440));return i.impl.apply(void 0,arguments)}}},Dd={readContext:Ut,use:Zl,useCallback:Rm,useContext:Ut,useEffect:Id,useImperativeHandle:Om,useInsertionEffect:_m,useLayoutEffect:km,useMemo:Nm,useReducer:$l,useRef:Am,useState:function(){return $l(Di)},useDebugValue:Od,useDeferredValue:function(e,t){var i=mt();return Mm(i,Ze.memoizedState,e,t)},useTransition:function(){var e=$l(Di)[0],t=mt().memoizedState;return[typeof e=="boolean"?e:kr(e),t]},useSyncExternalStore:rm,useId:jm,useHostTransitionStatus:Md,useFormState:Sm,useActionState:Sm,useOptimistic:function(e,t){var i=mt();return fm(i,Ze,e,t)},useMemoCache:Ad,useCacheRefresh:Hm};Dd.useEffectEvent=wm;var Pm={readContext:Ut,use:Zl,useCallback:Rm,useContext:Ut,useEffect:Id,useImperativeHandle:Om,useInsertionEffect:_m,useLayoutEffect:km,useMemo:Nm,useReducer:wd,useRef:Am,useState:function(){return wd(Di)},useDebugValue:Od,useDeferredValue:function(e,t){var i=mt();return Ze===null?Rd(i,e,t):Mm(i,Ze.memoizedState,e,t)},useTransition:function(){var e=wd(Di)[0],t=mt().memoizedState;return[typeof e=="boolean"?e:kr(e),t]},useSyncExternalStore:rm,useId:jm,useHostTransitionStatus:Md,useFormState:Em,useActionState:Em,useOptimistic:function(e,t){var i=mt();return Ze!==null?fm(i,Ze,e,t):(i.baseState=e,[e,i.queue.dispatch])},useMemoCache:Ad,useCacheRefresh:Hm};Pm.useEffectEvent=wm;function Ud(e,t,i,s){t=e.memoizedState,i=i(s,t),i=i==null?t:T({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var jd={enqueueSetState:function(e,t,i){e=e._reactInternals;var s=En(),c=la(s);c.payload=t,i!=null&&(c.callback=i),t=ca(e,c,s),t!==null&&(sn(t,e,s),Ar(t,e,s))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var s=En(),c=la(s);c.tag=1,c.payload=t,i!=null&&(c.callback=i),t=ca(e,c,s),t!==null&&(sn(t,e,s),Ar(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=En(),s=la(i);s.tag=2,t!=null&&(s.callback=t),t=ca(e,s,i),t!==null&&(sn(t,e,i),Ar(t,e,i))}};function Gm(e,t,i,s,c,u,g){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,u,g):t.prototype&&t.prototype.isPureReactComponent?!mr(i,s)||!mr(c,u):!0}function Vm(e,t,i,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,s),t.state!==e&&jd.enqueueReplaceState(t,t.state,null)}function gs(e,t){var i=t;if("ref"in t){i={};for(var s in t)s!=="ref"&&(i[s]=t[s])}if(e=e.defaultProps){i===t&&(i=T({},i));for(var c in e)i[c]===void 0&&(i[c]=e[c])}return i}function Fm(e){xl(e)}function Ym(e){console.error(e)}function Qm(e){xl(e)}function nc(e,t){try{var i=e.onUncaughtError;i(t.value,{componentStack:t.stack})}catch(s){setTimeout(function(){throw s})}}function qm(e,t,i){try{var s=e.onCaughtError;s(i.value,{componentStack:i.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function Hd(e,t,i){return i=la(i),i.tag=3,i.payload={element:null},i.callback=function(){nc(e,t)},i}function Jm(e){return e=la(e),e.tag=3,e}function Xm(e,t,i,s){var c=i.type.getDerivedStateFromError;if(typeof c=="function"){var u=s.value;e.payload=function(){return c(u)},e.callback=function(){qm(t,i,s)}}var g=i.stateNode;g!==null&&typeof g.componentDidCatch=="function"&&(e.callback=function(){qm(t,i,s),typeof c!="function"&&(ma===null?ma=new Set([this]):ma.add(this));var C=s.stack;this.componentDidCatch(s.value,{componentStack:C!==null?C:""})})}function sT(e,t,i,s,c){if(i.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(t=i.alternate,t!==null&&to(t,i,c,!0),i=vn.current,i!==null){switch(i.tag){case 31:case 13:return xn===null?gc():i.alternate===null&&ht===0&&(ht=3),i.flags&=-257,i.flags|=65536,i.lanes=c,s===Gl?i.flags|=16384:(t=i.updateQueue,t===null?i.updateQueue=new Set([s]):t.add(s),lh(e,s,c)),!1;case 22:return i.flags|=65536,s===Gl?i.flags|=16384:(t=i.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([s])},i.updateQueue=t):(i=t.retryQueue,i===null?t.retryQueue=new Set([s]):i.add(s)),lh(e,s,c)),!1}throw Error(o(435,i.tag))}return lh(e,s,c),gc(),!1}if(Ue)return t=vn.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=c,s!==nd&&(e=Error(o(422),{cause:s}),vr(On(e,i)))):(s!==nd&&(t=Error(o(423),{cause:s}),vr(On(t,i))),e=e.current.alternate,e.flags|=65536,c&=-c,e.lanes|=c,s=On(s,i),c=Hd(e.stateNode,s,c),fd(e,c),ht!==4&&(ht=2)),!1;var u=Error(o(520),{cause:s});if(u=On(u,i),Hr===null?Hr=[u]:Hr.push(u),ht!==4&&(ht=2),t===null)return!0;s=On(s,i),i=t;do{switch(i.tag){case 3:return i.flags|=65536,e=c&-c,i.lanes|=e,e=Hd(i.stateNode,s,e),fd(i,e),!1;case 1:if(t=i.type,u=i.stateNode,(i.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||u!==null&&typeof u.componentDidCatch=="function"&&(ma===null||!ma.has(u))))return i.flags|=65536,c&=-c,i.lanes|=c,c=Jm(c),Xm(c,e,i,s),fd(i,c),!1}i=i.return}while(i!==null);return!1}var zd=Error(o(461)),St=!1;function jt(e,t,i,s){t.child=e===null?em(t,null,i,s):hs(t,e.child,i,s)}function Zm(e,t,i,s,c){i=i.render;var u=t.ref;if("ref"in s){var g={};for(var C in s)C!=="ref"&&(g[C]=s[C])}else g=s;return ls(t),s=Cd(e,t,i,g,u,c),C=Sd(),e!==null&&!St?(Td(e,t,c),Ui(e,t,c)):(Ue&&C&&ed(t),t.flags|=1,jt(e,t,s,c),t.child)}function $m(e,t,i,s,c){if(e===null){var u=i.type;return typeof u=="function"&&!Zu(u)&&u.defaultProps===void 0&&i.compare===null?(t.tag=15,t.type=u,Wm(e,t,u,s,c)):(e=Hl(i.type,null,s,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(u=e.child,!Yd(e,c)){var g=u.memoizedProps;if(i=i.compare,i=i!==null?i:mr,i(g,s)&&e.ref===t.ref)return Ui(e,t,c)}return t.flags|=1,e=Oi(u,s),e.ref=t.ref,e.return=t,t.child=e}function Wm(e,t,i,s,c){if(e!==null){var u=e.memoizedProps;if(mr(u,s)&&e.ref===t.ref)if(St=!1,t.pendingProps=s=u,Yd(e,c))(e.flags&131072)!==0&&(St=!0);else return t.lanes=e.lanes,Ui(e,t,c)}return Ld(e,t,i,s,c)}function ep(e,t,i,s){var c=s.children,u=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.mode==="hidden"){if((t.flags&128)!==0){if(u=u!==null?u.baseLanes|i:i,e!==null){for(s=t.child=e.child,c=0;s!==null;)c=c|s.lanes|s.childLanes,s=s.sibling;s=c&~u}else s=0,t.child=null;return tp(e,t,u,i,s)}if((i&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Kl(t,u!==null?u.cachePool:null),u!==null?im(t,u):md(),am(t);else return s=t.lanes=536870912,tp(e,t,u!==null?u.baseLanes|i:i,i,s)}else u!==null?(Kl(t,u.cachePool),im(t,u),da(),t.memoizedState=null):(e!==null&&Kl(t,null),md(),da());return jt(e,t,c,i),t.child}function Rr(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function tp(e,t,i,s,c){var u=cd();return u=u===null?null:{parent:vt._currentValue,pool:u},t.memoizedState={baseLanes:i,cachePool:u},e!==null&&Kl(t,null),md(),am(t),e!==null&&to(e,t,s,!0),t.childLanes=c,null}function ic(e,t){return t=sc({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function np(e,t,i){return hs(t,e.child,null,i),e=ic(t,t.pendingProps),e.flags|=2,Cn(t),t.memoizedState=null,e}function oT(e,t,i){var s=t.pendingProps,c=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Ue){if(s.mode==="hidden")return e=ic(t,s),t.lanes=536870912,Rr(null,e);if(yd(t),(e=at)?(e=gy(e,Mn),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:ia!==null?{id:di,overflow:hi}:null,retryLane:536870912,hydrationErrors:null},i=Lg(e),i.return=t,t.child=i,Dt=t,at=null)):e=null,e===null)throw sa(t);return t.lanes=536870912,null}return ic(t,s)}var u=e.memoizedState;if(u!==null){var g=u.dehydrated;if(yd(t),c)if(t.flags&256)t.flags&=-257,t=np(e,t,i);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(o(558));else if(St||to(e,t,i,!1),c=(i&e.childLanes)!==0,St||c){if(s=et,s!==null&&(g=Va(s,i),g!==0&&g!==u.retryLane))throw u.retryLane=g,as(e,g),sn(s,e,g),zd;gc(),t=np(e,t,i)}else e=u.treeContext,at=Dn(g.nextSibling),Dt=t,Ue=!0,aa=null,Mn=!1,e!==null&&Pg(t,e),t=ic(t,s),t.flags|=4096;return t}return e=Oi(e.child,{mode:s.mode,children:s.children}),e.ref=t.ref,t.child=e,e.return=t,e}function ac(e,t){var i=t.ref;if(i===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(o(284));(e===null||e.ref!==i)&&(t.flags|=4194816)}}function Ld(e,t,i,s,c){return ls(t),i=Cd(e,t,i,s,void 0,c),s=Sd(),e!==null&&!St?(Td(e,t,c),Ui(e,t,c)):(Ue&&s&&ed(t),t.flags|=1,jt(e,t,i,c),t.child)}function ip(e,t,i,s,c,u){return ls(t),t.updateQueue=null,i=om(t,s,i,c),sm(e),s=Sd(),e!==null&&!St?(Td(e,t,u),Ui(e,t,u)):(Ue&&s&&ed(t),t.flags|=1,jt(e,t,i,u),t.child)}function ap(e,t,i,s,c){if(ls(t),t.stateNode===null){var u=Zs,g=i.contextType;typeof g=="object"&&g!==null&&(u=Ut(g)),u=new i(s,u),t.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=jd,t.stateNode=u,u._reactInternals=t,u=t.stateNode,u.props=s,u.state=t.memoizedState,u.refs={},dd(t),g=i.contextType,u.context=typeof g=="object"&&g!==null?Ut(g):Zs,u.state=t.memoizedState,g=i.getDerivedStateFromProps,typeof g=="function"&&(Ud(t,i,g,s),u.state=t.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(g=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),g!==u.state&&jd.enqueueReplaceState(u,u.state,null),wr(t,s,u,c),br(),u.state=t.memoizedState),typeof u.componentDidMount=="function"&&(t.flags|=4194308),s=!0}else if(e===null){u=t.stateNode;var C=t.memoizedProps,A=gs(i,C);u.props=A;var R=u.context,B=i.contextType;g=Zs,typeof B=="object"&&B!==null&&(g=Ut(B));var V=i.getDerivedStateFromProps;B=typeof V=="function"||typeof u.getSnapshotBeforeUpdate=="function",C=t.pendingProps!==C,B||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(C||R!==g)&&Vm(t,u,s,g),ra=!1;var M=t.memoizedState;u.state=M,wr(t,s,u,c),br(),R=t.memoizedState,C||M!==R||ra?(typeof V=="function"&&(Ud(t,i,V,s),R=t.memoizedState),(A=ra||Gm(t,i,A,s,M,R,g))?(B||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(t.flags|=4194308)):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=R),u.props=s,u.state=R,u.context=g,s=A):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{u=t.stateNode,hd(e,t),g=t.memoizedProps,B=gs(i,g),u.props=B,V=t.pendingProps,M=u.context,R=i.contextType,A=Zs,typeof R=="object"&&R!==null&&(A=Ut(R)),C=i.getDerivedStateFromProps,(R=typeof C=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(g!==V||M!==A)&&Vm(t,u,s,A),ra=!1,M=t.memoizedState,u.state=M,wr(t,s,u,c),br();var U=t.memoizedState;g!==V||M!==U||ra||e!==null&&e.dependencies!==null&&Ll(e.dependencies)?(typeof C=="function"&&(Ud(t,i,C,s),U=t.memoizedState),(B=ra||Gm(t,i,B,s,M,U,A)||e!==null&&e.dependencies!==null&&Ll(e.dependencies))?(R||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(s,U,A),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(s,U,A)),typeof u.componentDidUpdate=="function"&&(t.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof u.componentDidUpdate!="function"||g===e.memoizedProps&&M===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&M===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=U),u.props=s,u.state=U,u.context=A,s=B):(typeof u.componentDidUpdate!="function"||g===e.memoizedProps&&M===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&M===e.memoizedState||(t.flags|=1024),s=!1)}return u=s,ac(e,t),s=(t.flags&128)!==0,u||s?(u=t.stateNode,i=s&&typeof i.getDerivedStateFromError!="function"?null:u.render(),t.flags|=1,e!==null&&s?(t.child=hs(t,e.child,null,c),t.child=hs(t,null,i,c)):jt(e,t,i,c),t.memoizedState=u.state,e=t.child):e=Ui(e,t,c),e}function sp(e,t,i,s){return os(),t.flags|=256,jt(e,t,i,s),t.child}var Bd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Kd(e){return{baseLanes:e,cachePool:qg()}}function Pd(e,t,i){return e=e!==null?e.childLanes&~i:0,t&&(e|=Tn),e}function op(e,t,i){var s=t.pendingProps,c=!1,u=(t.flags&128)!==0,g;if((g=u)||(g=e!==null&&e.memoizedState===null?!1:(gt.current&2)!==0),g&&(c=!0,t.flags&=-129),g=(t.flags&32)!==0,t.flags&=-33,e===null){if(Ue){if(c?ua(t):da(),(e=at)?(e=gy(e,Mn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:ia!==null?{id:di,overflow:hi}:null,retryLane:536870912,hydrationErrors:null},i=Lg(e),i.return=t,t.child=i,Dt=t,at=null)):e=null,e===null)throw sa(t);return bh(e)?t.lanes=32:t.lanes=536870912,null}var C=s.children;return s=s.fallback,c?(da(),c=t.mode,C=sc({mode:"hidden",children:C},c),s=ss(s,c,i,null),C.return=t,s.return=t,C.sibling=s,t.child=C,s=t.child,s.memoizedState=Kd(i),s.childLanes=Pd(e,g,i),t.memoizedState=Bd,Rr(null,s)):(ua(t),Gd(t,C))}var A=e.memoizedState;if(A!==null&&(C=A.dehydrated,C!==null)){if(u)t.flags&256?(ua(t),t.flags&=-257,t=Vd(e,t,i)):t.memoizedState!==null?(da(),t.child=e.child,t.flags|=128,t=null):(da(),C=s.fallback,c=t.mode,s=sc({mode:"visible",children:s.children},c),C=ss(C,c,i,null),C.flags|=2,s.return=t,C.return=t,s.sibling=C,t.child=s,hs(t,e.child,null,i),s=t.child,s.memoizedState=Kd(i),s.childLanes=Pd(e,g,i),t.memoizedState=Bd,t=Rr(null,s));else if(ua(t),bh(C)){if(g=C.nextSibling&&C.nextSibling.dataset,g)var R=g.dgst;g=R,s=Error(o(419)),s.stack="",s.digest=g,vr({value:s,source:null,stack:null}),t=Vd(e,t,i)}else if(St||to(e,t,i,!1),g=(i&e.childLanes)!==0,St||g){if(g=et,g!==null&&(s=Va(g,i),s!==0&&s!==A.retryLane))throw A.retryLane=s,as(e,s),sn(g,e,s),zd;Ah(C)||gc(),t=Vd(e,t,i)}else Ah(C)?(t.flags|=192,t.child=e.child,t=null):(e=A.treeContext,at=Dn(C.nextSibling),Dt=t,Ue=!0,aa=null,Mn=!1,e!==null&&Pg(t,e),t=Gd(t,s.children),t.flags|=4096);return t}return c?(da(),C=s.fallback,c=t.mode,A=e.child,R=A.sibling,s=Oi(A,{mode:"hidden",children:s.children}),s.subtreeFlags=A.subtreeFlags&65011712,R!==null?C=Oi(R,C):(C=ss(C,c,i,null),C.flags|=2),C.return=t,s.return=t,s.sibling=C,t.child=s,Rr(null,s),s=t.child,C=e.child.memoizedState,C===null?C=Kd(i):(c=C.cachePool,c!==null?(A=vt._currentValue,c=c.parent!==A?{parent:A,pool:A}:c):c=qg(),C={baseLanes:C.baseLanes|i,cachePool:c}),s.memoizedState=C,s.childLanes=Pd(e,g,i),t.memoizedState=Bd,Rr(e.child,s)):(ua(t),i=e.child,e=i.sibling,i=Oi(i,{mode:"visible",children:s.children}),i.return=t,i.sibling=null,e!==null&&(g=t.deletions,g===null?(t.deletions=[e],t.flags|=16):g.push(e)),t.child=i,t.memoizedState=null,i)}function Gd(e,t){return t=sc({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function sc(e,t){return e=yn(22,e,null,t),e.lanes=0,e}function Vd(e,t,i){return hs(t,e.child,null,i),e=Gd(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function rp(e,t,i){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),sd(e.return,t,i)}function Fd(e,t,i,s,c,u){var g=e.memoizedState;g===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:i,tailMode:c,treeForkCount:u}:(g.isBackwards=t,g.rendering=null,g.renderingStartTime=0,g.last=s,g.tail=i,g.tailMode=c,g.treeForkCount=u)}function lp(e,t,i){var s=t.pendingProps,c=s.revealOrder,u=s.tail;s=s.children;var g=gt.current,C=(g&2)!==0;if(C?(g=g&1|2,t.flags|=128):g&=1,J(gt,g),jt(e,t,s,i),s=Ue?yr:0,!C&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&rp(e,i,t);else if(e.tag===19)rp(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(c){case"forwards":for(i=t.child,c=null;i!==null;)e=i.alternate,e!==null&&Ql(e)===null&&(c=i),i=i.sibling;i=c,i===null?(c=t.child,t.child=null):(c=i.sibling,i.sibling=null),Fd(t,!1,c,i,u,s);break;case"backwards":case"unstable_legacy-backwards":for(i=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&Ql(e)===null){t.child=c;break}e=c.sibling,c.sibling=i,i=c,c=e}Fd(t,!0,i,null,u,s);break;case"together":Fd(t,!1,null,null,void 0,s);break;default:t.memoizedState=null}return t.child}function Ui(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),ga|=t.lanes,(i&t.childLanes)===0)if(e!==null){if(to(e,t,i,!1),(i&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(o(153));if(t.child!==null){for(e=t.child,i=Oi(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=Oi(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function Yd(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Ll(e)))}function rT(e,t,i){switch(t.tag){case 3:it(t,t.stateNode.containerInfo),oa(t,vt,e.memoizedState.cache),os();break;case 27:case 5:Ot(t);break;case 4:it(t,t.stateNode.containerInfo);break;case 10:oa(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,yd(t),null;break;case 13:var s=t.memoizedState;if(s!==null)return s.dehydrated!==null?(ua(t),t.flags|=128,null):(i&t.child.childLanes)!==0?op(e,t,i):(ua(t),e=Ui(e,t,i),e!==null?e.sibling:null);ua(t);break;case 19:var c=(e.flags&128)!==0;if(s=(i&t.childLanes)!==0,s||(to(e,t,i,!1),s=(i&t.childLanes)!==0),c){if(s)return lp(e,t,i);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),J(gt,gt.current),s)break;return null;case 22:return t.lanes=0,ep(e,t,i,t.pendingProps);case 24:oa(t,vt,e.memoizedState.cache)}return Ui(e,t,i)}function cp(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps)St=!0;else{if(!Yd(e,i)&&(t.flags&128)===0)return St=!1,rT(e,t,i);St=(e.flags&131072)!==0}else St=!1,Ue&&(t.flags&1048576)!==0&&Kg(t,yr,t.index);switch(t.lanes=0,t.tag){case 16:e:{var s=t.pendingProps;if(e=us(t.elementType),t.type=e,typeof e=="function")Zu(e)?(s=gs(e,s),t.tag=1,t=ap(null,t,e,s,i)):(t.tag=0,t=Ld(null,t,e,s,i));else{if(e!=null){var c=e.$$typeof;if(c===fe){t.tag=11,t=Zm(null,t,e,s,i);break e}else if(c===se){t.tag=14,t=$m(null,t,e,s,i);break e}}throw t=Ke(e)||e,Error(o(306,t,""))}}return t;case 0:return Ld(e,t,t.type,t.pendingProps,i);case 1:return s=t.type,c=gs(s,t.pendingProps),ap(e,t,s,c,i);case 3:e:{if(it(t,t.stateNode.containerInfo),e===null)throw Error(o(387));s=t.pendingProps;var u=t.memoizedState;c=u.element,hd(e,t),wr(t,s,null,i);var g=t.memoizedState;if(s=g.cache,oa(t,vt,s),s!==u.cache&&od(t,[vt],i,!0),br(),s=g.element,u.isDehydrated)if(u={element:s,isDehydrated:!1,cache:g.cache},t.updateQueue.baseState=u,t.memoizedState=u,t.flags&256){t=sp(e,t,s,i);break e}else if(s!==c){c=On(Error(o(424)),t),vr(c),t=sp(e,t,s,i);break e}else for(e=t.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,at=Dn(e.firstChild),Dt=t,Ue=!0,aa=null,Mn=!0,i=em(t,null,s,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(os(),s===c){t=Ui(e,t,i);break e}jt(e,t,s,i)}t=t.child}return t;case 26:return ac(e,t),e===null?(i=Sy(t.type,null,t.pendingProps,null))?t.memoizedState=i:Ue||(i=t.type,e=t.pendingProps,s=Tc(re.current).createElement(i),s[lt]=t,s[wt]=e,Ht(s,i,e),ut(s),t.stateNode=s):t.memoizedState=Sy(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Ot(t),e===null&&Ue&&(s=t.stateNode=yy(t.type,t.pendingProps,re.current),Dt=t,Mn=!0,c=at,Ca(t.type)?(wh=c,at=Dn(s.firstChild)):at=c),jt(e,t,t.pendingProps.children,i),ac(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Ue&&((c=s=at)&&(s=HT(s,t.type,t.pendingProps,Mn),s!==null?(t.stateNode=s,Dt=t,at=Dn(s.firstChild),Mn=!1,c=!0):c=!1),c||sa(t)),Ot(t),c=t.type,u=t.pendingProps,g=e!==null?e.memoizedProps:null,s=u.children,Sh(c,u)?s=null:g!==null&&Sh(c,g)&&(t.flags|=32),t.memoizedState!==null&&(c=Cd(e,t,$S,null,null,i),Fr._currentValue=c),ac(e,t),jt(e,t,s,i),t.child;case 6:return e===null&&Ue&&((e=i=at)&&(i=zT(i,t.pendingProps,Mn),i!==null?(t.stateNode=i,Dt=t,at=null,e=!0):e=!1),e||sa(t)),null;case 13:return op(e,t,i);case 4:return it(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=hs(t,null,s,i):jt(e,t,s,i),t.child;case 11:return Zm(e,t,t.type,t.pendingProps,i);case 7:return jt(e,t,t.pendingProps,i),t.child;case 8:return jt(e,t,t.pendingProps.children,i),t.child;case 12:return jt(e,t,t.pendingProps.children,i),t.child;case 10:return s=t.pendingProps,oa(t,t.type,s.value),jt(e,t,s.children,i),t.child;case 9:return c=t.type._context,s=t.pendingProps.children,ls(t),c=Ut(c),s=s(c),t.flags|=1,jt(e,t,s,i),t.child;case 14:return $m(e,t,t.type,t.pendingProps,i);case 15:return Wm(e,t,t.type,t.pendingProps,i);case 19:return lp(e,t,i);case 31:return oT(e,t,i);case 22:return ep(e,t,i,t.pendingProps);case 24:return ls(t),s=Ut(vt),e===null?(c=cd(),c===null&&(c=et,u=rd(),c.pooledCache=u,u.refCount++,u!==null&&(c.pooledCacheLanes|=i),c=u),t.memoizedState={parent:s,cache:c},dd(t),oa(t,vt,c)):((e.lanes&i)!==0&&(hd(e,t),wr(t,null,null,i),br()),c=e.memoizedState,u=t.memoizedState,c.parent!==s?(c={parent:s,cache:s},t.memoizedState=c,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=c),oa(t,vt,s)):(s=u.cache,oa(t,vt,s),s!==c.cache&&od(t,[vt],i,!0))),jt(e,t,t.pendingProps.children,i),t.child;case 29:throw t.pendingProps}throw Error(o(156,t.tag))}function ji(e){e.flags|=4}function Qd(e,t,i,s,c){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(c&335544128)===c)if(e.stateNode.complete)e.flags|=8192;else if(jp())e.flags|=8192;else throw ds=Gl,ud}else e.flags&=-16777217}function up(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!wy(t))if(jp())e.flags|=8192;else throw ds=Gl,ud}function oc(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Qo():536870912,e.lanes|=t,go|=t)}function Nr(e,t){if(!Ue)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var s=null;i!==null;)i.alternate!==null&&(s=i),i=i.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function st(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,s=0;if(t)for(var c=e.child;c!==null;)i|=c.lanes|c.childLanes,s|=c.subtreeFlags&65011712,s|=c.flags&65011712,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)i|=c.lanes|c.childLanes,s|=c.subtreeFlags,s|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=s,e.childLanes=i,t}function lT(e,t,i){var s=t.pendingProps;switch(td(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return st(t),null;case 1:return st(t),null;case 3:return i=t.stateNode,s=null,e!==null&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),Mi(vt),De(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(eo(t)?ji(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,id())),st(t),null;case 26:var c=t.type,u=t.memoizedState;return e===null?(ji(t),u!==null?(st(t),up(t,u)):(st(t),Qd(t,c,null,s,i))):u?u!==e.memoizedState?(ji(t),st(t),up(t,u)):(st(t),t.flags&=-16777217):(e=e.memoizedProps,e!==s&&ji(t),st(t),Qd(t,c,e,s,i)),null;case 27:if(Ci(t),i=re.current,c=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==s&&ji(t);else{if(!s){if(t.stateNode===null)throw Error(o(166));return st(t),null}e=P.current,eo(t)?Gg(t):(e=yy(c,s,i),t.stateNode=e,ji(t))}return st(t),null;case 5:if(Ci(t),c=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==s&&ji(t);else{if(!s){if(t.stateNode===null)throw Error(o(166));return st(t),null}if(u=P.current,eo(t))Gg(t);else{var g=Tc(re.current);switch(u){case 1:u=g.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:u=g.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":u=g.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":u=g.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":u=g.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild);break;case"select":u=typeof s.is=="string"?g.createElement("select",{is:s.is}):g.createElement("select"),s.multiple?u.multiple=!0:s.size&&(u.size=s.size);break;default:u=typeof s.is=="string"?g.createElement(c,{is:s.is}):g.createElement(c)}}u[lt]=t,u[wt]=s;e:for(g=t.child;g!==null;){if(g.tag===5||g.tag===6)u.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}t.stateNode=u;e:switch(Ht(u,c,s),c){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&ji(t)}}return st(t),Qd(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,i),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==s&&ji(t);else{if(typeof s!="string"&&t.stateNode===null)throw Error(o(166));if(e=re.current,eo(t)){if(e=t.stateNode,i=t.memoizedProps,s=null,c=Dt,c!==null)switch(c.tag){case 27:case 5:s=c.memoizedProps}e[lt]=t,e=!!(e.nodeValue===i||s!==null&&s.suppressHydrationWarning===!0||oy(e.nodeValue,i)),e||sa(t,!0)}else e=Tc(e).createTextNode(s),e[lt]=t,t.stateNode=e}return st(t),null;case 31:if(i=t.memoizedState,e===null||e.memoizedState!==null){if(s=eo(t),i!==null){if(e===null){if(!s)throw Error(o(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(557));e[lt]=t}else os(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;st(t),e=!1}else i=id(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=i),e=!0;if(!e)return t.flags&256?(Cn(t),t):(Cn(t),null);if((t.flags&128)!==0)throw Error(o(558))}return st(t),null;case 13:if(s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(c=eo(t),s!==null&&s.dehydrated!==null){if(e===null){if(!c)throw Error(o(318));if(c=t.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(o(317));c[lt]=t}else os(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;st(t),c=!1}else c=id(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=c),c=!0;if(!c)return t.flags&256?(Cn(t),t):(Cn(t),null)}return Cn(t),(t.flags&128)!==0?(t.lanes=i,t):(i=s!==null,e=e!==null&&e.memoizedState!==null,i&&(s=t.child,c=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(c=s.alternate.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==c&&(s.flags|=2048)),i!==e&&i&&(t.child.flags|=8192),oc(t,t.updateQueue),st(t),null);case 4:return De(),e===null&&mh(t.stateNode.containerInfo),st(t),null;case 10:return Mi(t.type),st(t),null;case 19:if(x(gt),s=t.memoizedState,s===null)return st(t),null;if(c=(t.flags&128)!==0,u=s.rendering,u===null)if(c)Nr(s,!1);else{if(ht!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(u=Ql(e),u!==null){for(t.flags|=128,Nr(s,!1),e=u.updateQueue,t.updateQueue=e,oc(t,e),t.subtreeFlags=0,e=i,i=t.child;i!==null;)zg(i,e),i=i.sibling;return J(gt,gt.current&1|2),Ue&&Ri(t,s.treeForkCount),t.child}e=e.sibling}s.tail!==null&&Kt()>dc&&(t.flags|=128,c=!0,Nr(s,!1),t.lanes=4194304)}else{if(!c)if(e=Ql(u),e!==null){if(t.flags|=128,c=!0,e=e.updateQueue,t.updateQueue=e,oc(t,e),Nr(s,!0),s.tail===null&&s.tailMode==="hidden"&&!u.alternate&&!Ue)return st(t),null}else 2*Kt()-s.renderingStartTime>dc&&i!==536870912&&(t.flags|=128,c=!0,Nr(s,!1),t.lanes=4194304);s.isBackwards?(u.sibling=t.child,t.child=u):(e=s.last,e!==null?e.sibling=u:t.child=u,s.last=u)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Kt(),e.sibling=null,i=gt.current,J(gt,c?i&1|2:i&1),Ue&&Ri(t,s.treeForkCount),e):(st(t),null);case 22:case 23:return Cn(t),pd(),s=t.memoizedState!==null,e!==null?e.memoizedState!==null!==s&&(t.flags|=8192):s&&(t.flags|=8192),s?(i&536870912)!==0&&(t.flags&128)===0&&(st(t),t.subtreeFlags&6&&(t.flags|=8192)):st(t),i=t.updateQueue,i!==null&&oc(t,i.retryQueue),i=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),s=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),s!==i&&(t.flags|=2048),e!==null&&x(cs),null;case 24:return i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),Mi(vt),st(t),null;case 25:return null;case 30:return null}throw Error(o(156,t.tag))}function cT(e,t){switch(td(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Mi(vt),De(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Ci(t),null;case 31:if(t.memoizedState!==null){if(Cn(t),t.alternate===null)throw Error(o(340));os()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(Cn(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(o(340));os()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return x(gt),null;case 4:return De(),null;case 10:return Mi(t.type),null;case 22:case 23:return Cn(t),pd(),e!==null&&x(cs),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Mi(vt),null;case 25:return null;default:return null}}function dp(e,t){switch(td(t),t.tag){case 3:Mi(vt),De();break;case 26:case 27:case 5:Ci(t);break;case 4:De();break;case 31:t.memoizedState!==null&&Cn(t);break;case 13:Cn(t);break;case 19:x(gt);break;case 10:Mi(t.type);break;case 22:case 23:Cn(t),pd(),e!==null&&x(cs);break;case 24:Mi(vt)}}function Mr(e,t){try{var i=t.updateQueue,s=i!==null?i.lastEffect:null;if(s!==null){var c=s.next;i=c;do{if((i.tag&e)===e){s=void 0;var u=i.create,g=i.inst;s=u(),g.destroy=s}i=i.next}while(i!==c)}}catch(C){Je(t,t.return,C)}}function ha(e,t,i){try{var s=t.updateQueue,c=s!==null?s.lastEffect:null;if(c!==null){var u=c.next;s=u;do{if((s.tag&e)===e){var g=s.inst,C=g.destroy;if(C!==void 0){g.destroy=void 0,c=t;var A=i,R=C;try{R()}catch(B){Je(c,A,B)}}}s=s.next}while(s!==u)}}catch(B){Je(t,t.return,B)}}function hp(e){var t=e.updateQueue;if(t!==null){var i=e.stateNode;try{nm(t,i)}catch(s){Je(e,e.return,s)}}}function fp(e,t,i){i.props=gs(e.type,e.memoizedProps),i.state=e.memoizedState;try{i.componentWillUnmount()}catch(s){Je(e,t,s)}}function xr(e,t){try{var i=e.ref;if(i!==null){switch(e.tag){case 26:case 27:case 5:var s=e.stateNode;break;case 30:s=e.stateNode;break;default:s=e.stateNode}typeof i=="function"?e.refCleanup=i(s):i.current=s}}catch(c){Je(e,t,c)}}function fi(e,t){var i=e.ref,s=e.refCleanup;if(i!==null)if(typeof s=="function")try{s()}catch(c){Je(e,t,c)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(c){Je(e,t,c)}else i.current=null}function gp(e){var t=e.type,i=e.memoizedProps,s=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":i.autoFocus&&s.focus();break e;case"img":i.src?s.src=i.src:i.srcSet&&(s.srcset=i.srcSet)}}catch(c){Je(e,e.return,c)}}function qd(e,t,i){try{var s=e.stateNode;NT(s,e.type,i,t),s[wt]=t}catch(c){Je(e,e.return,c)}}function mp(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Ca(e.type)||e.tag===4}function Jd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||mp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Ca(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Xd(e,t,i){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(e,t):(t=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,t.appendChild(e),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=kn));else if(s!==4&&(s===27&&Ca(e.type)&&(i=e.stateNode,t=null),e=e.child,e!==null))for(Xd(e,t,i),e=e.sibling;e!==null;)Xd(e,t,i),e=e.sibling}function rc(e,t,i){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(s!==4&&(s===27&&Ca(e.type)&&(i=e.stateNode),e=e.child,e!==null))for(rc(e,t,i),e=e.sibling;e!==null;)rc(e,t,i),e=e.sibling}function pp(e){var t=e.stateNode,i=e.memoizedProps;try{for(var s=e.type,c=t.attributes;c.length;)t.removeAttributeNode(c[0]);Ht(t,s,i),t[lt]=e,t[wt]=i}catch(u){Je(e,e.return,u)}}var Hi=!1,Tt=!1,Zd=!1,yp=typeof WeakSet=="function"?WeakSet:Set,It=null;function uT(e,t){if(e=e.containerInfo,vh=Ic,e=Og(e),Vu(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var s=i.getSelection&&i.getSelection();if(s&&s.rangeCount!==0){i=s.anchorNode;var c=s.anchorOffset,u=s.focusNode;s=s.focusOffset;try{i.nodeType,u.nodeType}catch{i=null;break e}var g=0,C=-1,A=-1,R=0,B=0,V=e,M=null;t:for(;;){for(var U;V!==i||c!==0&&V.nodeType!==3||(C=g+c),V!==u||s!==0&&V.nodeType!==3||(A=g+s),V.nodeType===3&&(g+=V.nodeValue.length),(U=V.firstChild)!==null;)M=V,V=U;for(;;){if(V===e)break t;if(M===i&&++R===c&&(C=g),M===u&&++B===s&&(A=g),(U=V.nextSibling)!==null)break;V=M,M=V.parentNode}V=U}i=C===-1||A===-1?null:{start:C,end:A}}else i=null}i=i||{start:0,end:0}}else i=null;for(Ch={focusedElem:e,selectionRange:i},Ic=!1,It=t;It!==null;)if(t=It,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,It=e;else for(;It!==null;){switch(t=It,u=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(i=0;i<e.length;i++)c=e[i],c.ref.impl=c.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&u!==null){e=void 0,i=t,c=u.memoizedProps,u=u.memoizedState,s=i.stateNode;try{var ae=gs(i.type,c);e=s.getSnapshotBeforeUpdate(ae,u),s.__reactInternalSnapshotBeforeUpdate=e}catch(me){Je(i,i.return,me)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,i=e.nodeType,i===9)Eh(e);else if(i===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Eh(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(o(163))}if(e=t.sibling,e!==null){e.return=t.return,It=e;break}It=t.return}}function vp(e,t,i){var s=i.flags;switch(i.tag){case 0:case 11:case 15:Li(e,i),s&4&&Mr(5,i);break;case 1:if(Li(e,i),s&4)if(e=i.stateNode,t===null)try{e.componentDidMount()}catch(g){Je(i,i.return,g)}else{var c=gs(i.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(c,t,e.__reactInternalSnapshotBeforeUpdate)}catch(g){Je(i,i.return,g)}}s&64&&hp(i),s&512&&xr(i,i.return);break;case 3:if(Li(e,i),s&64&&(e=i.updateQueue,e!==null)){if(t=null,i.child!==null)switch(i.child.tag){case 27:case 5:t=i.child.stateNode;break;case 1:t=i.child.stateNode}try{nm(e,t)}catch(g){Je(i,i.return,g)}}break;case 27:t===null&&s&4&&pp(i);case 26:case 5:Li(e,i),t===null&&s&4&&gp(i),s&512&&xr(i,i.return);break;case 12:Li(e,i);break;case 31:Li(e,i),s&4&&Tp(e,i);break;case 13:Li(e,i),s&4&&Ep(e,i),s&64&&(e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(i=CT.bind(null,i),LT(e,i))));break;case 22:if(s=i.memoizedState!==null||Hi,!s){t=t!==null&&t.memoizedState!==null||Tt,c=Hi;var u=Tt;Hi=s,(Tt=t)&&!u?Bi(e,i,(i.subtreeFlags&8772)!==0):Li(e,i),Hi=c,Tt=u}break;case 30:break;default:Li(e,i)}}function Cp(e){var t=e.alternate;t!==null&&(e.alternate=null,Cp(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Jo(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var ot=null,en=!1;function zi(e,t,i){for(i=i.child;i!==null;)Sp(e,t,i),i=i.sibling}function Sp(e,t,i){if(Nt&&typeof Nt.onCommitFiberUnmount=="function")try{Nt.onCommitFiberUnmount(ni,i)}catch{}switch(i.tag){case 26:Tt||fi(i,t),zi(e,t,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:Tt||fi(i,t);var s=ot,c=en;Ca(i.type)&&(ot=i.stateNode,en=!1),zi(e,t,i),Pr(i.stateNode),ot=s,en=c;break;case 5:Tt||fi(i,t);case 6:if(s=ot,c=en,ot=null,zi(e,t,i),ot=s,en=c,ot!==null)if(en)try{(ot.nodeType===9?ot.body:ot.nodeName==="HTML"?ot.ownerDocument.body:ot).removeChild(i.stateNode)}catch(u){Je(i,t,u)}else try{ot.removeChild(i.stateNode)}catch(u){Je(i,t,u)}break;case 18:ot!==null&&(en?(e=ot,hy(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,i.stateNode),Eo(e)):hy(ot,i.stateNode));break;case 4:s=ot,c=en,ot=i.stateNode.containerInfo,en=!0,zi(e,t,i),ot=s,en=c;break;case 0:case 11:case 14:case 15:ha(2,i,t),Tt||ha(4,i,t),zi(e,t,i);break;case 1:Tt||(fi(i,t),s=i.stateNode,typeof s.componentWillUnmount=="function"&&fp(i,t,s)),zi(e,t,i);break;case 21:zi(e,t,i);break;case 22:Tt=(s=Tt)||i.memoizedState!==null,zi(e,t,i),Tt=s;break;default:zi(e,t,i)}}function Tp(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Eo(e)}catch(i){Je(t,t.return,i)}}}function Ep(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Eo(e)}catch(i){Je(t,t.return,i)}}function dT(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new yp),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new yp),t;default:throw Error(o(435,e.tag))}}function lc(e,t){var i=dT(e);t.forEach(function(s){if(!i.has(s)){i.add(s);var c=ST.bind(null,e,s);s.then(c,c)}})}function tn(e,t){var i=t.deletions;if(i!==null)for(var s=0;s<i.length;s++){var c=i[s],u=e,g=t,C=g;e:for(;C!==null;){switch(C.tag){case 27:if(Ca(C.type)){ot=C.stateNode,en=!1;break e}break;case 5:ot=C.stateNode,en=!1;break e;case 3:case 4:ot=C.stateNode.containerInfo,en=!0;break e}C=C.return}if(ot===null)throw Error(o(160));Sp(u,g,c),ot=null,en=!1,u=c.alternate,u!==null&&(u.return=null),c.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Ap(t,e),t=t.sibling}var Fn=null;function Ap(e,t){var i=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:tn(t,e),nn(e),s&4&&(ha(3,e,e.return),Mr(3,e),ha(5,e,e.return));break;case 1:tn(t,e),nn(e),s&512&&(Tt||i===null||fi(i,i.return)),s&64&&Hi&&(e=e.updateQueue,e!==null&&(s=e.callbacks,s!==null&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=i===null?s:i.concat(s))));break;case 26:var c=Fn;if(tn(t,e),nn(e),s&512&&(Tt||i===null||fi(i,i.return)),s&4){var u=i!==null?i.memoizedState:null;if(s=e.memoizedState,i===null)if(s===null)if(e.stateNode===null){e:{s=e.type,i=e.memoizedProps,c=c.ownerDocument||c;t:switch(s){case"title":u=c.getElementsByTagName("title")[0],(!u||u[gn]||u[lt]||u.namespaceURI==="http://www.w3.org/2000/svg"||u.hasAttribute("itemprop"))&&(u=c.createElement(s),c.head.insertBefore(u,c.querySelector("head > title"))),Ht(u,s,i),u[lt]=e,ut(u),s=u;break e;case"link":var g=Ay("link","href",c).get(s+(i.href||""));if(g){for(var C=0;C<g.length;C++)if(u=g[C],u.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&u.getAttribute("rel")===(i.rel==null?null:i.rel)&&u.getAttribute("title")===(i.title==null?null:i.title)&&u.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){g.splice(C,1);break t}}u=c.createElement(s),Ht(u,s,i),c.head.appendChild(u);break;case"meta":if(g=Ay("meta","content",c).get(s+(i.content||""))){for(C=0;C<g.length;C++)if(u=g[C],u.getAttribute("content")===(i.content==null?null:""+i.content)&&u.getAttribute("name")===(i.name==null?null:i.name)&&u.getAttribute("property")===(i.property==null?null:i.property)&&u.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&u.getAttribute("charset")===(i.charSet==null?null:i.charSet)){g.splice(C,1);break t}}u=c.createElement(s),Ht(u,s,i),c.head.appendChild(u);break;default:throw Error(o(468,s))}u[lt]=e,ut(u),s=u}e.stateNode=s}else by(c,e.type,e.stateNode);else e.stateNode=Ey(c,s,e.memoizedProps);else u!==s?(u===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):u.count--,s===null?by(c,e.type,e.stateNode):Ey(c,s,e.memoizedProps)):s===null&&e.stateNode!==null&&qd(e,e.memoizedProps,i.memoizedProps)}break;case 27:tn(t,e),nn(e),s&512&&(Tt||i===null||fi(i,i.return)),i!==null&&s&4&&qd(e,e.memoizedProps,i.memoizedProps);break;case 5:if(tn(t,e),nn(e),s&512&&(Tt||i===null||fi(i,i.return)),e.flags&32){c=e.stateNode;try{pt(c,"")}catch(ae){Je(e,e.return,ae)}}s&4&&e.stateNode!=null&&(c=e.memoizedProps,qd(e,c,i!==null?i.memoizedProps:c)),s&1024&&(Zd=!0);break;case 6:if(tn(t,e),nn(e),s&4){if(e.stateNode===null)throw Error(o(162));s=e.memoizedProps,i=e.stateNode;try{i.nodeValue=s}catch(ae){Je(e,e.return,ae)}}break;case 3:if(bc=null,c=Fn,Fn=Ec(t.containerInfo),tn(t,e),Fn=c,nn(e),s&4&&i!==null&&i.memoizedState.isDehydrated)try{Eo(t.containerInfo)}catch(ae){Je(e,e.return,ae)}Zd&&(Zd=!1,bp(e));break;case 4:s=Fn,Fn=Ec(e.stateNode.containerInfo),tn(t,e),nn(e),Fn=s;break;case 12:tn(t,e),nn(e);break;case 31:tn(t,e),nn(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,lc(e,s)));break;case 13:tn(t,e),nn(e),e.child.flags&8192&&e.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(uc=Kt()),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,lc(e,s)));break;case 22:c=e.memoizedState!==null;var A=i!==null&&i.memoizedState!==null,R=Hi,B=Tt;if(Hi=R||c,Tt=B||A,tn(t,e),Tt=B,Hi=R,nn(e),s&8192)e:for(t=e.stateNode,t._visibility=c?t._visibility&-2:t._visibility|1,c&&(i===null||A||Hi||Tt||ms(e)),i=null,t=e;;){if(t.tag===5||t.tag===26){if(i===null){A=i=t;try{if(u=A.stateNode,c)g=u.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none";else{C=A.stateNode;var V=A.memoizedProps.style,M=V!=null&&V.hasOwnProperty("display")?V.display:null;C.style.display=M==null||typeof M=="boolean"?"":(""+M).trim()}}catch(ae){Je(A,A.return,ae)}}}else if(t.tag===6){if(i===null){A=t;try{A.stateNode.nodeValue=c?"":A.memoizedProps}catch(ae){Je(A,A.return,ae)}}}else if(t.tag===18){if(i===null){A=t;try{var U=A.stateNode;c?fy(U,!0):fy(A.stateNode,!1)}catch(ae){Je(A,A.return,ae)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;i===t&&(i=null),t=t.return}i===t&&(i=null),t.sibling.return=t.return,t=t.sibling}s&4&&(s=e.updateQueue,s!==null&&(i=s.retryQueue,i!==null&&(s.retryQueue=null,lc(e,i))));break;case 19:tn(t,e),nn(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,lc(e,s)));break;case 30:break;case 21:break;default:tn(t,e),nn(e)}}function nn(e){var t=e.flags;if(t&2){try{for(var i,s=e.return;s!==null;){if(mp(s)){i=s;break}s=s.return}if(i==null)throw Error(o(160));switch(i.tag){case 27:var c=i.stateNode,u=Jd(e);rc(e,u,c);break;case 5:var g=i.stateNode;i.flags&32&&(pt(g,""),i.flags&=-33);var C=Jd(e);rc(e,C,g);break;case 3:case 4:var A=i.stateNode.containerInfo,R=Jd(e);Xd(e,R,A);break;default:throw Error(o(161))}}catch(B){Je(e,e.return,B)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function bp(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;bp(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Li(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)vp(e,t.alternate,t),t=t.sibling}function ms(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ha(4,t,t.return),ms(t);break;case 1:fi(t,t.return);var i=t.stateNode;typeof i.componentWillUnmount=="function"&&fp(t,t.return,i),ms(t);break;case 27:Pr(t.stateNode);case 26:case 5:fi(t,t.return),ms(t);break;case 22:t.memoizedState===null&&ms(t);break;case 30:ms(t);break;default:ms(t)}e=e.sibling}}function Bi(e,t,i){for(i=i&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var s=t.alternate,c=e,u=t,g=u.flags;switch(u.tag){case 0:case 11:case 15:Bi(c,u,i),Mr(4,u);break;case 1:if(Bi(c,u,i),s=u,c=s.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch(R){Je(s,s.return,R)}if(s=u,c=s.updateQueue,c!==null){var C=s.stateNode;try{var A=c.shared.hiddenCallbacks;if(A!==null)for(c.shared.hiddenCallbacks=null,c=0;c<A.length;c++)tm(A[c],C)}catch(R){Je(s,s.return,R)}}i&&g&64&&hp(u),xr(u,u.return);break;case 27:pp(u);case 26:case 5:Bi(c,u,i),i&&s===null&&g&4&&gp(u),xr(u,u.return);break;case 12:Bi(c,u,i);break;case 31:Bi(c,u,i),i&&g&4&&Tp(c,u);break;case 13:Bi(c,u,i),i&&g&4&&Ep(c,u);break;case 22:u.memoizedState===null&&Bi(c,u,i),xr(u,u.return);break;case 30:break;default:Bi(c,u,i)}t=t.sibling}}function $d(e,t){var i=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==i&&(e!=null&&e.refCount++,i!=null&&Cr(i))}function Wd(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Cr(e))}function Yn(e,t,i,s){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)wp(e,t,i,s),t=t.sibling}function wp(e,t,i,s){var c=t.flags;switch(t.tag){case 0:case 11:case 15:Yn(e,t,i,s),c&2048&&Mr(9,t);break;case 1:Yn(e,t,i,s);break;case 3:Yn(e,t,i,s),c&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Cr(e)));break;case 12:if(c&2048){Yn(e,t,i,s),e=t.stateNode;try{var u=t.memoizedProps,g=u.id,C=u.onPostCommit;typeof C=="function"&&C(g,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(A){Je(t,t.return,A)}}else Yn(e,t,i,s);break;case 31:Yn(e,t,i,s);break;case 13:Yn(e,t,i,s);break;case 23:break;case 22:u=t.stateNode,g=t.alternate,t.memoizedState!==null?u._visibility&2?Yn(e,t,i,s):Dr(e,t):u._visibility&2?Yn(e,t,i,s):(u._visibility|=2,uo(e,t,i,s,(t.subtreeFlags&10256)!==0||!1)),c&2048&&$d(g,t);break;case 24:Yn(e,t,i,s),c&2048&&Wd(t.alternate,t);break;default:Yn(e,t,i,s)}}function uo(e,t,i,s,c){for(c=c&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var u=e,g=t,C=i,A=s,R=g.flags;switch(g.tag){case 0:case 11:case 15:uo(u,g,C,A,c),Mr(8,g);break;case 23:break;case 22:var B=g.stateNode;g.memoizedState!==null?B._visibility&2?uo(u,g,C,A,c):Dr(u,g):(B._visibility|=2,uo(u,g,C,A,c)),c&&R&2048&&$d(g.alternate,g);break;case 24:uo(u,g,C,A,c),c&&R&2048&&Wd(g.alternate,g);break;default:uo(u,g,C,A,c)}t=t.sibling}}function Dr(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var i=e,s=t,c=s.flags;switch(s.tag){case 22:Dr(i,s),c&2048&&$d(s.alternate,s);break;case 24:Dr(i,s),c&2048&&Wd(s.alternate,s);break;default:Dr(i,s)}t=t.sibling}}var Ur=8192;function ho(e,t,i){if(e.subtreeFlags&Ur)for(e=e.child;e!==null;)_p(e,t,i),e=e.sibling}function _p(e,t,i){switch(e.tag){case 26:ho(e,t,i),e.flags&Ur&&e.memoizedState!==null&&ZT(i,Fn,e.memoizedState,e.memoizedProps);break;case 5:ho(e,t,i);break;case 3:case 4:var s=Fn;Fn=Ec(e.stateNode.containerInfo),ho(e,t,i),Fn=s;break;case 22:e.memoizedState===null&&(s=e.alternate,s!==null&&s.memoizedState!==null?(s=Ur,Ur=16777216,ho(e,t,i),Ur=s):ho(e,t,i));break;default:ho(e,t,i)}}function kp(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function jr(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var i=0;i<t.length;i++){var s=t[i];It=s,Op(s,e)}kp(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Ip(e),e=e.sibling}function Ip(e){switch(e.tag){case 0:case 11:case 15:jr(e),e.flags&2048&&ha(9,e,e.return);break;case 3:jr(e);break;case 12:jr(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,cc(e)):jr(e);break;default:jr(e)}}function cc(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var i=0;i<t.length;i++){var s=t[i];It=s,Op(s,e)}kp(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:ha(8,t,t.return),cc(t);break;case 22:i=t.stateNode,i._visibility&2&&(i._visibility&=-3,cc(t));break;default:cc(t)}e=e.sibling}}function Op(e,t){for(;It!==null;){var i=It;switch(i.tag){case 0:case 11:case 15:ha(8,i,t);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var s=i.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:Cr(i.memoizedState.cache)}if(s=i.child,s!==null)s.return=i,It=s;else e:for(i=e;It!==null;){s=It;var c=s.sibling,u=s.return;if(Cp(s),s===i){It=null;break e}if(c!==null){c.return=u,It=c;break e}It=u}}}var hT={getCacheForType:function(e){var t=Ut(vt),i=t.data.get(e);return i===void 0&&(i=e(),t.data.set(e,i)),i},cacheSignal:function(){return Ut(vt).controller.signal}},fT=typeof WeakMap=="function"?WeakMap:Map,Ge=0,et=null,Re=null,Me=0,qe=0,Sn=null,fa=!1,fo=!1,eh=!1,Ki=0,ht=0,ga=0,ps=0,th=0,Tn=0,go=0,Hr=null,an=null,nh=!1,uc=0,Rp=0,dc=1/0,hc=null,ma=null,At=0,pa=null,mo=null,Pi=0,ih=0,ah=null,Np=null,zr=0,sh=null;function En(){return(Ge&2)!==0&&Me!==0?Me&-Me:j.T!==null?dh():js()}function Mp(){if(Tn===0)if((Me&536870912)===0||Ue){var e=Si;Si<<=1,(Si&3932160)===0&&(Si=262144),Tn=e}else Tn=536870912;return e=vn.current,e!==null&&(e.flags|=32),Tn}function sn(e,t,i){(e===et&&(qe===2||qe===9)||e.cancelPendingCommit!==null)&&(po(e,0),ya(e,Me,Tn,!1)),Ga(e,i),((Ge&2)===0||e!==et)&&(e===et&&((Ge&2)===0&&(ps|=i),ht===4&&ya(e,Me,Tn,!1)),gi(e))}function xp(e,t,i){if((Ge&6)!==0)throw Error(o(327));var s=!i&&(t&127)===0&&(t&e.expiredLanes)===0||Ti(e,t),c=s?pT(e,t):rh(e,t,!0),u=s;do{if(c===0){fo&&!s&&ya(e,t,0,!1);break}else{if(i=e.current.alternate,u&&!gT(i)){c=rh(e,t,!1),u=!1;continue}if(c===2){if(u=t,e.errorRecoveryDisabledLanes&u)var g=0;else g=e.pendingLanes&-536870913,g=g!==0?g:g&536870912?536870912:0;if(g!==0){t=g;e:{var C=e;c=Hr;var A=C.current.memoizedState.isDehydrated;if(A&&(po(C,g).flags|=256),g=rh(C,g,!1),g!==2){if(eh&&!A){C.errorRecoveryDisabledLanes|=u,ps|=u,c=4;break e}u=an,an=c,u!==null&&(an===null?an=u:an.push.apply(an,u))}c=g}if(u=!1,c!==2)continue}}if(c===1){po(e,0),ya(e,t,0,!0);break}e:{switch(s=e,u=c,u){case 0:case 1:throw Error(o(345));case 4:if((t&4194048)!==t)break;case 6:ya(s,t,Tn,!fa);break e;case 2:an=null;break;case 3:case 5:break;default:throw Error(o(329))}if((t&62914560)===t&&(c=uc+300-Kt(),10<c)){if(ya(s,t,Tn,!fa),Pa(s,0,!0)!==0)break e;Pi=t,s.timeoutHandle=uy(Dp.bind(null,s,i,an,hc,nh,t,Tn,ps,go,fa,u,"Throttled",-0,0),c);break e}Dp(s,i,an,hc,nh,t,Tn,ps,go,fa,u,null,-0,0)}}break}while(!0);gi(e)}function Dp(e,t,i,s,c,u,g,C,A,R,B,V,M,U){if(e.timeoutHandle=-1,V=t.subtreeFlags,V&8192||(V&16785408)===16785408){V={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:kn},_p(t,u,V);var ae=(u&62914560)===u?uc-Kt():(u&4194048)===u?Rp-Kt():0;if(ae=$T(V,ae),ae!==null){Pi=u,e.cancelPendingCommit=ae(Pp.bind(null,e,t,u,i,s,c,g,C,A,B,V,null,M,U)),ya(e,u,g,!R);return}}Pp(e,t,u,i,s,c,g,C,A)}function gT(e){for(var t=e;;){var i=t.tag;if((i===0||i===11||i===15)&&t.flags&16384&&(i=t.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var s=0;s<i.length;s++){var c=i[s],u=c.getSnapshot;c=c.value;try{if(!pn(u(),c))return!1}catch{return!1}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ya(e,t,i,s){t&=~th,t&=~ps,e.suspendedLanes|=t,e.pingedLanes&=~t,s&&(e.warmLanes|=t),s=e.expirationTimes;for(var c=t;0<c;){var u=31-Yt(c),g=1<<u;s[u]=-1,c&=~g}i!==0&&Cl(e,i,t)}function fc(){return(Ge&6)===0?(Lr(0),!1):!0}function oh(){if(Re!==null){if(qe===0)var e=Re.return;else e=Re,Ni=rs=null,Ed(e),so=null,Tr=0,e=Re;for(;e!==null;)dp(e.alternate,e),e=e.return;Re=null}}function po(e,t){var i=e.timeoutHandle;i!==-1&&(e.timeoutHandle=-1,DT(i)),i=e.cancelPendingCommit,i!==null&&(e.cancelPendingCommit=null,i()),Pi=0,oh(),et=e,Re=i=Oi(e.current,null),Me=t,qe=0,Sn=null,fa=!1,fo=Ti(e,t),eh=!1,go=Tn=th=ps=ga=ht=0,an=Hr=null,nh=!1,(t&8)!==0&&(t|=t&32);var s=e.entangledLanes;if(s!==0)for(e=e.entanglements,s&=t;0<s;){var c=31-Yt(s),u=1<<c;t|=e[c],s&=~u}return Ki=t,Dl(),i}function Up(e,t){be=null,j.H=Or,t===ao||t===Pl?(t=Zg(),qe=3):t===ud?(t=Zg(),qe=4):qe=t===zd?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Sn=t,Re===null&&(ht=1,nc(e,On(t,e.current)))}function jp(){var e=vn.current;return e===null?!0:(Me&4194048)===Me?xn===null:(Me&62914560)===Me||(Me&536870912)!==0?e===xn:!1}function Hp(){var e=j.H;return j.H=Or,e===null?Or:e}function zp(){var e=j.A;return j.A=hT,e}function gc(){ht=4,fa||(Me&4194048)!==Me&&vn.current!==null||(fo=!0),(ga&134217727)===0&&(ps&134217727)===0||et===null||ya(et,Me,Tn,!1)}function rh(e,t,i){var s=Ge;Ge|=2;var c=Hp(),u=zp();(et!==e||Me!==t)&&(hc=null,po(e,t)),t=!1;var g=ht;e:do try{if(qe!==0&&Re!==null){var C=Re,A=Sn;switch(qe){case 8:oh(),g=6;break e;case 3:case 2:case 9:case 6:vn.current===null&&(t=!0);var R=qe;if(qe=0,Sn=null,yo(e,C,A,R),i&&fo){g=0;break e}break;default:R=qe,qe=0,Sn=null,yo(e,C,A,R)}}mT(),g=ht;break}catch(B){Up(e,B)}while(!0);return t&&e.shellSuspendCounter++,Ni=rs=null,Ge=s,j.H=c,j.A=u,Re===null&&(et=null,Me=0,Dl()),g}function mT(){for(;Re!==null;)Lp(Re)}function pT(e,t){var i=Ge;Ge|=2;var s=Hp(),c=zp();et!==e||Me!==t?(hc=null,dc=Kt()+500,po(e,t)):fo=Ti(e,t);e:do try{if(qe!==0&&Re!==null){t=Re;var u=Sn;t:switch(qe){case 1:qe=0,Sn=null,yo(e,t,u,1);break;case 2:case 9:if(Jg(u)){qe=0,Sn=null,Bp(t);break}t=function(){qe!==2&&qe!==9||et!==e||(qe=7),gi(e)},u.then(t,t);break e;case 3:qe=7;break e;case 4:qe=5;break e;case 7:Jg(u)?(qe=0,Sn=null,Bp(t)):(qe=0,Sn=null,yo(e,t,u,7));break;case 5:var g=null;switch(Re.tag){case 26:g=Re.memoizedState;case 5:case 27:var C=Re;if(g?wy(g):C.stateNode.complete){qe=0,Sn=null;var A=C.sibling;if(A!==null)Re=A;else{var R=C.return;R!==null?(Re=R,mc(R)):Re=null}break t}}qe=0,Sn=null,yo(e,t,u,5);break;case 6:qe=0,Sn=null,yo(e,t,u,6);break;case 8:oh(),ht=6;break e;default:throw Error(o(462))}}yT();break}catch(B){Up(e,B)}while(!0);return Ni=rs=null,j.H=s,j.A=c,Ge=i,Re!==null?0:(et=null,Me=0,Dl(),ht)}function yT(){for(;Re!==null&&!Ns();)Lp(Re)}function Lp(e){var t=cp(e.alternate,e,Ki);e.memoizedProps=e.pendingProps,t===null?mc(e):Re=t}function Bp(e){var t=e,i=t.alternate;switch(t.tag){case 15:case 0:t=ip(i,t,t.pendingProps,t.type,void 0,Me);break;case 11:t=ip(i,t,t.pendingProps,t.type.render,t.ref,Me);break;case 5:Ed(t);default:dp(i,t),t=Re=zg(t,Ki),t=cp(i,t,Ki)}e.memoizedProps=e.pendingProps,t===null?mc(e):Re=t}function yo(e,t,i,s){Ni=rs=null,Ed(t),so=null,Tr=0;var c=t.return;try{if(sT(e,c,t,i,Me)){ht=1,nc(e,On(i,e.current)),Re=null;return}}catch(u){if(c!==null)throw Re=c,u;ht=1,nc(e,On(i,e.current)),Re=null;return}t.flags&32768?(Ue||s===1?e=!0:fo||(Me&536870912)!==0?e=!1:(fa=e=!0,(s===2||s===9||s===3||s===6)&&(s=vn.current,s!==null&&s.tag===13&&(s.flags|=16384))),Kp(t,e)):mc(t)}function mc(e){var t=e;do{if((t.flags&32768)!==0){Kp(t,fa);return}e=t.return;var i=lT(t.alternate,t,Ki);if(i!==null){Re=i;return}if(t=t.sibling,t!==null){Re=t;return}Re=t=e}while(t!==null);ht===0&&(ht=5)}function Kp(e,t){do{var i=cT(e.alternate,e);if(i!==null){i.flags&=32767,Re=i;return}if(i=e.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!t&&(e=e.sibling,e!==null)){Re=e;return}Re=e=i}while(e!==null);ht=6,Re=null}function Pp(e,t,i,s,c,u,g,C,A){e.cancelPendingCommit=null;do pc();while(At!==0);if((Ge&6)!==0)throw Error(o(327));if(t!==null){if(t===e.current)throw Error(o(177));if(u=t.lanes|t.childLanes,u|=Ju,Au(e,i,u,g,C,A),e===et&&(Re=et=null,Me=0),mo=t,pa=e,Pi=i,ih=u,ah=c,Np=s,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,TT(fn,function(){return Qp(),null})):(e.callbackNode=null,e.callbackPriority=0),s=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||s){s=j.T,j.T=null,c=q.p,q.p=2,g=Ge,Ge|=4;try{uT(e,t,i)}finally{Ge=g,q.p=c,j.T=s}}At=1,Gp(),Vp(),Fp()}}function Gp(){if(At===1){At=0;var e=pa,t=mo,i=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||i){i=j.T,j.T=null;var s=q.p;q.p=2;var c=Ge;Ge|=4;try{Ap(t,e);var u=Ch,g=Og(e.containerInfo),C=u.focusedElem,A=u.selectionRange;if(g!==C&&C&&C.ownerDocument&&Ig(C.ownerDocument.documentElement,C)){if(A!==null&&Vu(C)){var R=A.start,B=A.end;if(B===void 0&&(B=R),"selectionStart"in C)C.selectionStart=R,C.selectionEnd=Math.min(B,C.value.length);else{var V=C.ownerDocument||document,M=V&&V.defaultView||window;if(M.getSelection){var U=M.getSelection(),ae=C.textContent.length,me=Math.min(A.start,ae),We=A.end===void 0?me:Math.min(A.end,ae);!U.extend&&me>We&&(g=We,We=me,me=g);var _=kg(C,me),w=kg(C,We);if(_&&w&&(U.rangeCount!==1||U.anchorNode!==_.node||U.anchorOffset!==_.offset||U.focusNode!==w.node||U.focusOffset!==w.offset)){var O=V.createRange();O.setStart(_.node,_.offset),U.removeAllRanges(),me>We?(U.addRange(O),U.extend(w.node,w.offset)):(O.setEnd(w.node,w.offset),U.addRange(O))}}}}for(V=[],U=C;U=U.parentNode;)U.nodeType===1&&V.push({element:U,left:U.scrollLeft,top:U.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<V.length;C++){var G=V[C];G.element.scrollLeft=G.left,G.element.scrollTop=G.top}}Ic=!!vh,Ch=vh=null}finally{Ge=c,q.p=s,j.T=i}}e.current=t,At=2}}function Vp(){if(At===2){At=0;var e=pa,t=mo,i=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||i){i=j.T,j.T=null;var s=q.p;q.p=2;var c=Ge;Ge|=4;try{vp(e,t.alternate,t)}finally{Ge=c,q.p=s,j.T=i}}At=3}}function Fp(){if(At===4||At===3){At=0,Ms();var e=pa,t=mo,i=Pi,s=Np;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?At=5:(At=0,mo=pa=null,Yp(e,e.pendingLanes));var c=e.pendingLanes;if(c===0&&(ma=null),Xi(i),t=t.stateNode,Nt&&typeof Nt.onCommitFiberRoot=="function")try{Nt.onCommitFiberRoot(ni,t,void 0,(t.current.flags&128)===128)}catch{}if(s!==null){t=j.T,c=q.p,q.p=2,j.T=null;try{for(var u=e.onRecoverableError,g=0;g<s.length;g++){var C=s[g];u(C.value,{componentStack:C.stack})}}finally{j.T=t,q.p=c}}(Pi&3)!==0&&pc(),gi(e),c=e.pendingLanes,(i&261930)!==0&&(c&42)!==0?e===sh?zr++:(zr=0,sh=e):zr=0,Lr(0)}}function Yp(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Cr(t)))}function pc(){return Gp(),Vp(),Fp(),Qp()}function Qp(){if(At!==5)return!1;var e=pa,t=ih;ih=0;var i=Xi(Pi),s=j.T,c=q.p;try{q.p=32>i?32:i,j.T=null,i=ah,ah=null;var u=pa,g=Pi;if(At=0,mo=pa=null,Pi=0,(Ge&6)!==0)throw Error(o(331));var C=Ge;if(Ge|=4,Ip(u.current),wp(u,u.current,g,i),Ge=C,Lr(0,!1),Nt&&typeof Nt.onPostCommitFiberRoot=="function")try{Nt.onPostCommitFiberRoot(ni,u)}catch{}return!0}finally{q.p=c,j.T=s,Yp(e,t)}}function qp(e,t,i){t=On(i,t),t=Hd(e.stateNode,t,2),e=ca(e,t,2),e!==null&&(Ga(e,2),gi(e))}function Je(e,t,i){if(e.tag===3)qp(e,e,i);else for(;t!==null;){if(t.tag===3){qp(t,e,i);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(ma===null||!ma.has(s))){e=On(i,e),i=Jm(2),s=ca(t,i,2),s!==null&&(Xm(i,s,t,e),Ga(s,2),gi(s));break}}t=t.return}}function lh(e,t,i){var s=e.pingCache;if(s===null){s=e.pingCache=new fT;var c=new Set;s.set(t,c)}else c=s.get(t),c===void 0&&(c=new Set,s.set(t,c));c.has(i)||(eh=!0,c.add(i),e=vT.bind(null,e,t,i),t.then(e,e))}function vT(e,t,i){var s=e.pingCache;s!==null&&s.delete(t),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,et===e&&(Me&i)===i&&(ht===4||ht===3&&(Me&62914560)===Me&&300>Kt()-uc?(Ge&2)===0&&po(e,0):th|=i,go===Me&&(go=0)),gi(e)}function Jp(e,t){t===0&&(t=Qo()),e=as(e,t),e!==null&&(Ga(e,t),gi(e))}function CT(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),Jp(e,i)}function ST(e,t){var i=0;switch(e.tag){case 31:case 13:var s=e.stateNode,c=e.memoizedState;c!==null&&(i=c.retryLane);break;case 19:s=e.stateNode;break;case 22:s=e.stateNode._retryCache;break;default:throw Error(o(314))}s!==null&&s.delete(t),Jp(e,i)}function TT(e,t){return Ha(e,t)}var yc=null,vo=null,ch=!1,vc=!1,uh=!1,va=0;function gi(e){e!==vo&&e.next===null&&(vo===null?yc=vo=e:vo=vo.next=e),vc=!0,ch||(ch=!0,AT())}function Lr(e,t){if(!uh&&vc){uh=!0;do for(var i=!1,s=yc;s!==null;){if(e!==0){var c=s.pendingLanes;if(c===0)var u=0;else{var g=s.suspendedLanes,C=s.pingedLanes;u=(1<<31-Yt(42|e)+1)-1,u&=c&~(g&~C),u=u&201326741?u&201326741|1:u?u|2:0}u!==0&&(i=!0,Wp(s,u))}else u=Me,u=Pa(s,s===et?u:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),(u&3)===0||Ti(s,u)||(i=!0,Wp(s,u));s=s.next}while(i);uh=!1}}function ET(){Xp()}function Xp(){vc=ch=!1;var e=0;va!==0&&xT()&&(e=va);for(var t=Kt(),i=null,s=yc;s!==null;){var c=s.next,u=Zp(s,t);u===0?(s.next=null,i===null?yc=c:i.next=c,c===null&&(vo=i)):(i=s,(e!==0||(u&3)!==0)&&(vc=!0)),s=c}At!==0&&At!==5||Lr(e),va!==0&&(va=0)}function Zp(e,t){for(var i=e.suspendedLanes,s=e.pingedLanes,c=e.expirationTimes,u=e.pendingLanes&-62914561;0<u;){var g=31-Yt(u),C=1<<g,A=c[g];A===-1?((C&i)===0||(C&s)!==0)&&(c[g]=Yo(C,t)):A<=t&&(e.expiredLanes|=C),u&=~C}if(t=et,i=Me,i=Pa(e,e===t?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s=e.callbackNode,i===0||e===t&&(qe===2||qe===9)||e.cancelPendingCommit!==null)return s!==null&&s!==null&&za(s),e.callbackNode=null,e.callbackPriority=0;if((i&3)===0||Ti(e,i)){if(t=i&-i,t===e.callbackPriority)return t;switch(s!==null&&za(s),Xi(i)){case 2:case 8:i=xs;break;case 32:i=fn;break;case 268435456:i=La;break;default:i=fn}return s=$p.bind(null,e),i=Ha(i,s),e.callbackPriority=t,e.callbackNode=i,t}return s!==null&&s!==null&&za(s),e.callbackPriority=2,e.callbackNode=null,2}function $p(e,t){if(At!==0&&At!==5)return e.callbackNode=null,e.callbackPriority=0,null;var i=e.callbackNode;if(pc()&&e.callbackNode!==i)return null;var s=Me;return s=Pa(e,e===et?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s===0?null:(xp(e,s,t),Zp(e,Kt()),e.callbackNode!=null&&e.callbackNode===i?$p.bind(null,e):null)}function Wp(e,t){if(pc())return null;xp(e,t,!0)}function AT(){UT(function(){(Ge&6)!==0?Ha(Ko,ET):Xp()})}function dh(){if(va===0){var e=no;e===0&&(e=Ka,Ka<<=1,(Ka&261888)===0&&(Ka=256)),va=e}return va}function ey(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:yt(""+e)}function ty(e,t){var i=t.ownerDocument.createElement("input");return i.name=t.name,i.value=t.value,e.id&&i.setAttribute("form",e.id),t.parentNode.insertBefore(i,t),e=new FormData(e),i.parentNode.removeChild(i),e}function bT(e,t,i,s,c){if(t==="submit"&&i&&i.stateNode===c){var u=ey((c[wt]||null).action),g=s.submitter;g&&(t=(t=g[wt]||null)?ey(t.formAction):g.getAttribute("formAction"),t!==null&&(u=t,g=null));var C=new Fs("action","action",null,s,c);e.push({event:C,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(va!==0){var A=g?ty(c,g):new FormData(c);Nd(i,{pending:!0,data:A,method:c.method,action:u},null,A)}}else typeof u=="function"&&(C.preventDefault(),A=g?ty(c,g):new FormData(c),Nd(i,{pending:!0,data:A,method:c.method,action:u},u,A))},currentTarget:c}]})}}for(var hh=0;hh<qu.length;hh++){var fh=qu[hh],wT=fh.toLowerCase(),_T=fh[0].toUpperCase()+fh.slice(1);Vn(wT,"on"+_T)}Vn(Mg,"onAnimationEnd"),Vn(xg,"onAnimationIteration"),Vn(Dg,"onAnimationStart"),Vn("dblclick","onDoubleClick"),Vn("focusin","onFocus"),Vn("focusout","onBlur"),Vn(PS,"onTransitionRun"),Vn(GS,"onTransitionStart"),Vn(VS,"onTransitionCancel"),Vn(Ug,"onTransitionEnd"),bi("onMouseEnter",["mouseout","mouseover"]),bi("onMouseLeave",["mouseout","mouseover"]),bi("onPointerEnter",["pointerout","pointerover"]),bi("onPointerLeave",["pointerout","pointerover"]),mn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),mn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),mn("onBeforeInput",["compositionend","keypress","textInput","paste"]),mn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),mn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),mn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Br="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Br));function ny(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var s=e[i],c=s.event;s=s.listeners;e:{var u=void 0;if(t)for(var g=s.length-1;0<=g;g--){var C=s[g],A=C.instance,R=C.currentTarget;if(C=C.listener,A!==u&&c.isPropagationStopped())break e;u=C,c.currentTarget=R;try{u(c)}catch(B){xl(B)}c.currentTarget=null,u=A}else for(g=0;g<s.length;g++){if(C=s[g],A=C.instance,R=C.currentTarget,C=C.listener,A!==u&&c.isPropagationStopped())break e;u=C,c.currentTarget=R;try{u(c)}catch(B){xl(B)}c.currentTarget=null,u=A}}}}function Ne(e,t){var i=t[Fa];i===void 0&&(i=t[Fa]=new Set);var s=e+"__bubble";i.has(s)||(iy(t,e,2,!1),i.add(s))}function gh(e,t,i){var s=0;t&&(s|=4),iy(i,e,s,t)}var Cc="_reactListening"+Math.random().toString(36).slice(2);function mh(e){if(!e[Cc]){e[Cc]=!0,Qt.forEach(function(i){i!=="selectionchange"&&(kT.has(i)||gh(i,!1,e),gh(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Cc]||(t[Cc]=!0,gh("selectionchange",!1,t))}}function iy(e,t,i,s){switch(My(t)){case 2:var c=tE;break;case 8:c=nE;break;default:c=Rh}i=c.bind(null,t,i,e),c=void 0,!ar||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),s?c!==void 0?e.addEventListener(t,i,{capture:!0,passive:c}):e.addEventListener(t,i,!0):c!==void 0?e.addEventListener(t,i,{passive:c}):e.addEventListener(t,i,!1)}function ph(e,t,i,s,c){var u=s;if((t&1)===0&&(t&2)===0&&s!==null)e:for(;;){if(s===null)return;var g=s.tag;if(g===3||g===4){var C=s.stateNode.containerInfo;if(C===c)break;if(g===4)for(g=s.return;g!==null;){var A=g.tag;if((A===3||A===4)&&g.stateNode.containerInfo===c)return;g=g.return}for(;C!==null;){if(g=$i(C),g===null)return;if(A=g.tag,A===5||A===6||A===26||A===27){s=u=g;continue e}C=C.parentNode}}s=s.return}wl(function(){var R=u,B=nr(i),V=[];e:{var M=jg.get(e);if(M!==void 0){var U=Fs,ae=e;switch(e){case"keypress":if(Vs(i)===0)break e;case"keydown":case"keyup":U=ur;break;case"focusin":ae="focus",U=lr;break;case"focusout":ae="blur",U=lr;break;case"beforeblur":case"afterblur":U=lr;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":U=kl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":U=_u;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":U=zu;break;case Mg:case xg:case Dg:U=Ou;break;case Ug:U=Bu;break;case"scroll":case"scrollend":U=_l;break;case"wheel":U=Ml;break;case"copy":case"cut":case"paste":U=Nu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":U=Rl;break;case"toggle":case"beforetoggle":U=dr}var me=(t&4)!==0,We=!me&&(e==="scroll"||e==="scrollend"),_=me?M!==null?M+"Capture":null:M;me=[];for(var w=R,O;w!==null;){var G=w;if(O=G.stateNode,G=G.tag,G!==5&&G!==26&&G!==27||O===null||_===null||(G=ke(w,_),G!=null&&me.push(Kr(w,G,O))),We)break;w=w.return}0<me.length&&(M=new U(M,ae,null,i,B),V.push({event:M,listeners:me}))}}if((t&7)===0){e:{if(M=e==="mouseover"||e==="pointerover",U=e==="mouseout"||e==="pointerout",M&&i!==Ps&&(ae=i.relatedTarget||i.fromElement)&&($i(ae)||ae[Ei]))break e;if((U||M)&&(M=B.window===B?B:(M=B.ownerDocument)?M.defaultView||M.parentWindow:window,U?(ae=i.relatedTarget||i.toElement,U=R,ae=ae?$i(ae):null,ae!==null&&(We=d(ae),me=ae.tag,ae!==We||me!==5&&me!==27&&me!==6)&&(ae=null)):(U=null,ae=R),U!==ae)){if(me=kl,G="onMouseLeave",_="onMouseEnter",w="mouse",(e==="pointerout"||e==="pointerover")&&(me=Rl,G="onPointerLeave",_="onPointerEnter",w="pointer"),We=U==null?M:Pe(U),O=ae==null?M:Pe(ae),M=new me(G,w+"leave",U,i,B),M.target=We,M.relatedTarget=O,G=null,$i(B)===R&&(me=new me(_,w+"enter",ae,i,B),me.target=O,me.relatedTarget=We,G=me),We=G,U&&ae)t:{for(me=IT,_=U,w=ae,O=0,G=_;G;G=me(G))O++;G=0;for(var de=w;de;de=me(de))G++;for(;0<O-G;)_=me(_),O--;for(;0<G-O;)w=me(w),G--;for(;O--;){if(_===w||w!==null&&_===w.alternate){me=_;break t}_=me(_),w=me(w)}me=null}else me=null;U!==null&&ay(V,M,U,me,!1),ae!==null&&We!==null&&ay(V,We,ae,me,!0)}}e:{if(M=R?Pe(R):window,U=M.nodeName&&M.nodeName.toLowerCase(),U==="select"||U==="input"&&M.type==="file")var Le=fr;else if(je(M))if(gr)Le=LS;else{Le=HS;var le=jS}else U=M.nodeName,!U||U.toLowerCase()!=="input"||M.type!=="checkbox"&&M.type!=="radio"?R&&Kn(R.elementType)&&(Le=fr):Le=zS;if(Le&&(Le=Le(e,R))){_t(V,Le,i,B);break e}le&&le(e,M,R),e==="focusout"&&R&&M.type==="number"&&R.memoizedProps.value!=null&&wi(M,"number",M.value)}switch(le=R?Pe(R):window,e){case"focusin":(je(le)||le.contentEditable==="true")&&(qs=le,Fu=R,pr=null);break;case"focusout":pr=Fu=qs=null;break;case"mousedown":Yu=!0;break;case"contextmenu":case"mouseup":case"dragend":Yu=!1,Rg(V,i,B);break;case"selectionchange":if(KS)break;case"keydown":case"keyup":Rg(V,i,B)}var _e;if(hr)e:{switch(e){case"compositionstart":var xe="onCompositionStart";break e;case"compositionend":xe="onCompositionEnd";break e;case"compositionupdate":xe="onCompositionUpdate";break e}xe=void 0}else H?L(e,i)&&(xe="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(xe="onCompositionStart");xe&&(E&&i.locale!=="ko"&&(H||xe!=="onCompositionStart"?xe==="onCompositionEnd"&&H&&(_e=Ja()):(ui=B,sr="value"in ui?ui.value:ui.textContent,H=!0)),le=Sc(R,xe),0<le.length&&(xe=new Ol(xe,e,null,i,B),V.push({event:xe,listeners:le}),_e?xe.data=_e:(_e=X(i),_e!==null&&(xe.data=_e)))),(_e=m?ce(e,i):Se(e,i))&&(xe=Sc(R,"onBeforeInput"),0<xe.length&&(le=new Ol("onBeforeInput","beforeinput",null,i,B),V.push({event:le,listeners:xe}),le.data=_e)),bT(V,e,R,i,B)}ny(V,t)})}function Kr(e,t,i){return{instance:e,listener:t,currentTarget:i}}function Sc(e,t){for(var i=t+"Capture",s=[];e!==null;){var c=e,u=c.stateNode;if(c=c.tag,c!==5&&c!==26&&c!==27||u===null||(c=ke(e,i),c!=null&&s.unshift(Kr(e,c,u)),c=ke(e,t),c!=null&&s.push(Kr(e,c,u))),e.tag===3)return s;e=e.return}return[]}function IT(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function ay(e,t,i,s,c){for(var u=t._reactName,g=[];i!==null&&i!==s;){var C=i,A=C.alternate,R=C.stateNode;if(C=C.tag,A!==null&&A===s)break;C!==5&&C!==26&&C!==27||R===null||(A=R,c?(R=ke(i,u),R!=null&&g.unshift(Kr(i,R,A))):c||(R=ke(i,u),R!=null&&g.push(Kr(i,R,A)))),i=i.return}g.length!==0&&e.push({event:t,listeners:g})}var OT=/\r\n?/g,RT=/\u0000|\uFFFD/g;function sy(e){return(typeof e=="string"?e:""+e).replace(OT,`
`).replace(RT,"")}function oy(e,t){return t=sy(t),sy(e)===t}function $e(e,t,i,s,c,u){switch(i){case"children":typeof s=="string"?t==="body"||t==="textarea"&&s===""||pt(e,s):(typeof s=="number"||typeof s=="bigint")&&t!=="body"&&pt(e,""+s);break;case"className":Bs(e,"class",s);break;case"tabIndex":Bs(e,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":Bs(e,i,s);break;case"style":Pt(e,s,u);break;case"data":if(t!=="object"){Bs(e,"data",s);break}case"src":case"href":if(s===""&&(t!=="a"||i!=="href")){e.removeAttribute(i);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(i);break}s=yt(""+s),e.setAttribute(i,s);break;case"action":case"formAction":if(typeof s=="function"){e.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof u=="function"&&(i==="formAction"?(t!=="input"&&$e(e,t,"name",c.name,c,null),$e(e,t,"formEncType",c.formEncType,c,null),$e(e,t,"formMethod",c.formMethod,c,null),$e(e,t,"formTarget",c.formTarget,c,null)):($e(e,t,"encType",c.encType,c,null),$e(e,t,"method",c.method,c,null),$e(e,t,"target",c.target,c,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(i);break}s=yt(""+s),e.setAttribute(i,s);break;case"onClick":s!=null&&(e.onclick=kn);break;case"onScroll":s!=null&&Ne("scroll",e);break;case"onScrollEnd":s!=null&&Ne("scrollend",e);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(o(61));if(i=s.__html,i!=null){if(c.children!=null)throw Error(o(60));e.innerHTML=i}}break;case"multiple":e.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":e.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){e.removeAttribute("xlink:href");break}i=yt(""+s),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(i,""+s):e.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(i,""):e.removeAttribute(i);break;case"capture":case"download":s===!0?e.setAttribute(i,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(i,s):e.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?e.setAttribute(i,s):e.removeAttribute(i);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?e.removeAttribute(i):e.setAttribute(i,s);break;case"popover":Ne("beforetoggle",e),Ne("toggle",e),Ls(e,"popover",s);break;case"xlinkActuate":Bn(e,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":Bn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":Bn(e,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":Bn(e,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":Bn(e,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":Bn(e,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":Bn(e,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":Bn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":Bn(e,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":Ls(e,"is",s);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=bl.get(i)||i,Ls(e,i,s))}}function yh(e,t,i,s,c,u){switch(i){case"style":Pt(e,s,u);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(o(61));if(i=s.__html,i!=null){if(c.children!=null)throw Error(o(60));e.innerHTML=i}}break;case"children":typeof s=="string"?pt(e,s):(typeof s=="number"||typeof s=="bigint")&&pt(e,""+s);break;case"onScroll":s!=null&&Ne("scroll",e);break;case"onScrollEnd":s!=null&&Ne("scrollend",e);break;case"onClick":s!=null&&(e.onclick=kn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ya.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(c=i.endsWith("Capture"),t=i.slice(2,c?i.length-7:void 0),u=e[wt]||null,u=u!=null?u[i]:null,typeof u=="function"&&e.removeEventListener(t,u,c),typeof s=="function")){typeof u!="function"&&u!==null&&(i in e?e[i]=null:e.hasAttribute(i)&&e.removeAttribute(i)),e.addEventListener(t,s,c);break e}i in e?e[i]=s:s===!0?e.setAttribute(i,""):Ls(e,i,s)}}}function Ht(e,t,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ne("error",e),Ne("load",e);var s=!1,c=!1,u;for(u in i)if(i.hasOwnProperty(u)){var g=i[u];if(g!=null)switch(u){case"src":s=!0;break;case"srcSet":c=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:$e(e,t,u,g,i,null)}}c&&$e(e,t,"srcSet",i.srcSet,i,null),s&&$e(e,t,"src",i.src,i,null);return;case"input":Ne("invalid",e);var C=u=g=c=null,A=null,R=null;for(s in i)if(i.hasOwnProperty(s)){var B=i[s];if(B!=null)switch(s){case"name":c=B;break;case"type":g=B;break;case"checked":A=B;break;case"defaultChecked":R=B;break;case"value":u=B;break;case"defaultValue":C=B;break;case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(o(137,t));break;default:$e(e,t,s,B,i,null)}}Tl(e,u,C,A,R,g,c,!1);return;case"select":Ne("invalid",e),s=g=u=null;for(c in i)if(i.hasOwnProperty(c)&&(C=i[c],C!=null))switch(c){case"value":u=C;break;case"defaultValue":g=C;break;case"multiple":s=C;default:$e(e,t,c,C,i,null)}t=u,i=g,e.multiple=!!s,t!=null?_n(e,!!s,t,!1):i!=null&&_n(e,!!s,i,!0);return;case"textarea":Ne("invalid",e),u=c=s=null;for(g in i)if(i.hasOwnProperty(g)&&(C=i[g],C!=null))switch(g){case"value":s=C;break;case"defaultValue":c=C;break;case"children":u=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(o(91));break;default:$e(e,t,g,C,i,null)}Al(e,s,c,u);return;case"option":for(A in i)i.hasOwnProperty(A)&&(s=i[A],s!=null)&&(A==="selected"?e.selected=s&&typeof s!="function"&&typeof s!="symbol":$e(e,t,A,s,i,null));return;case"dialog":Ne("beforetoggle",e),Ne("toggle",e),Ne("cancel",e),Ne("close",e);break;case"iframe":case"object":Ne("load",e);break;case"video":case"audio":for(s=0;s<Br.length;s++)Ne(Br[s],e);break;case"image":Ne("error",e),Ne("load",e);break;case"details":Ne("toggle",e);break;case"embed":case"source":case"link":Ne("error",e),Ne("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(R in i)if(i.hasOwnProperty(R)&&(s=i[R],s!=null))switch(R){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:$e(e,t,R,s,i,null)}return;default:if(Kn(t)){for(B in i)i.hasOwnProperty(B)&&(s=i[B],s!==void 0&&yh(e,t,B,s,i,void 0));return}}for(C in i)i.hasOwnProperty(C)&&(s=i[C],s!=null&&$e(e,t,C,s,i,null))}function NT(e,t,i,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var c=null,u=null,g=null,C=null,A=null,R=null,B=null;for(U in i){var V=i[U];if(i.hasOwnProperty(U)&&V!=null)switch(U){case"checked":break;case"value":break;case"defaultValue":A=V;default:s.hasOwnProperty(U)||$e(e,t,U,null,s,V)}}for(var M in s){var U=s[M];if(V=i[M],s.hasOwnProperty(M)&&(U!=null||V!=null))switch(M){case"type":u=U;break;case"name":c=U;break;case"checked":R=U;break;case"defaultChecked":B=U;break;case"value":g=U;break;case"defaultValue":C=U;break;case"children":case"dangerouslySetInnerHTML":if(U!=null)throw Error(o(137,t));break;default:U!==V&&$e(e,t,M,U,s,V)}}Wo(e,g,C,A,R,B,u,c);return;case"select":U=g=C=M=null;for(u in i)if(A=i[u],i.hasOwnProperty(u)&&A!=null)switch(u){case"value":break;case"multiple":U=A;default:s.hasOwnProperty(u)||$e(e,t,u,null,s,A)}for(c in s)if(u=s[c],A=i[c],s.hasOwnProperty(c)&&(u!=null||A!=null))switch(c){case"value":M=u;break;case"defaultValue":C=u;break;case"multiple":g=u;default:u!==A&&$e(e,t,c,u,s,A)}t=C,i=g,s=U,M!=null?_n(e,!!i,M,!1):!!s!=!!i&&(t!=null?_n(e,!!i,t,!0):_n(e,!!i,i?[]:"",!1));return;case"textarea":U=M=null;for(C in i)if(c=i[C],i.hasOwnProperty(C)&&c!=null&&!s.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:$e(e,t,C,null,s,c)}for(g in s)if(c=s[g],u=i[g],s.hasOwnProperty(g)&&(c!=null||u!=null))switch(g){case"value":M=c;break;case"defaultValue":U=c;break;case"children":break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(o(91));break;default:c!==u&&$e(e,t,g,c,s,u)}El(e,M,U);return;case"option":for(var ae in i)M=i[ae],i.hasOwnProperty(ae)&&M!=null&&!s.hasOwnProperty(ae)&&(ae==="selected"?e.selected=!1:$e(e,t,ae,null,s,M));for(A in s)M=s[A],U=i[A],s.hasOwnProperty(A)&&M!==U&&(M!=null||U!=null)&&(A==="selected"?e.selected=M&&typeof M!="function"&&typeof M!="symbol":$e(e,t,A,M,s,U));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var me in i)M=i[me],i.hasOwnProperty(me)&&M!=null&&!s.hasOwnProperty(me)&&$e(e,t,me,null,s,M);for(R in s)if(M=s[R],U=i[R],s.hasOwnProperty(R)&&M!==U&&(M!=null||U!=null))switch(R){case"children":case"dangerouslySetInnerHTML":if(M!=null)throw Error(o(137,t));break;default:$e(e,t,R,M,s,U)}return;default:if(Kn(t)){for(var We in i)M=i[We],i.hasOwnProperty(We)&&M!==void 0&&!s.hasOwnProperty(We)&&yh(e,t,We,void 0,s,M);for(B in s)M=s[B],U=i[B],!s.hasOwnProperty(B)||M===U||M===void 0&&U===void 0||yh(e,t,B,M,s,U);return}}for(var _ in i)M=i[_],i.hasOwnProperty(_)&&M!=null&&!s.hasOwnProperty(_)&&$e(e,t,_,null,s,M);for(V in s)M=s[V],U=i[V],!s.hasOwnProperty(V)||M===U||M==null&&U==null||$e(e,t,V,M,s,U)}function ry(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function MT(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,i=performance.getEntriesByType("resource"),s=0;s<i.length;s++){var c=i[s],u=c.transferSize,g=c.initiatorType,C=c.duration;if(u&&C&&ry(g)){for(g=0,C=c.responseEnd,s+=1;s<i.length;s++){var A=i[s],R=A.startTime;if(R>C)break;var B=A.transferSize,V=A.initiatorType;B&&ry(V)&&(A=A.responseEnd,g+=B*(A<C?1:(C-R)/(A-R)))}if(--s,t+=8*(u+g)/(c.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var vh=null,Ch=null;function Tc(e){return e.nodeType===9?e:e.ownerDocument}function ly(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function cy(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Sh(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Th=null;function xT(){var e=window.event;return e&&e.type==="popstate"?e===Th?!1:(Th=e,!0):(Th=null,!1)}var uy=typeof setTimeout=="function"?setTimeout:void 0,DT=typeof clearTimeout=="function"?clearTimeout:void 0,dy=typeof Promise=="function"?Promise:void 0,UT=typeof queueMicrotask=="function"?queueMicrotask:typeof dy<"u"?function(e){return dy.resolve(null).then(e).catch(jT)}:uy;function jT(e){setTimeout(function(){throw e})}function Ca(e){return e==="head"}function hy(e,t){var i=t,s=0;do{var c=i.nextSibling;if(e.removeChild(i),c&&c.nodeType===8)if(i=c.data,i==="/$"||i==="/&"){if(s===0){e.removeChild(c),Eo(t);return}s--}else if(i==="$"||i==="$?"||i==="$~"||i==="$!"||i==="&")s++;else if(i==="html")Pr(e.ownerDocument.documentElement);else if(i==="head"){i=e.ownerDocument.head,Pr(i);for(var u=i.firstChild;u;){var g=u.nextSibling,C=u.nodeName;u[gn]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&u.rel.toLowerCase()==="stylesheet"||i.removeChild(u),u=g}}else i==="body"&&Pr(e.ownerDocument.body);i=c}while(i);Eo(t)}function fy(e,t){var i=e;e=0;do{var s=i.nextSibling;if(i.nodeType===1?t?(i._stashedDisplay=i.style.display,i.style.display="none"):(i.style.display=i._stashedDisplay||"",i.getAttribute("style")===""&&i.removeAttribute("style")):i.nodeType===3&&(t?(i._stashedText=i.nodeValue,i.nodeValue=""):i.nodeValue=i._stashedText||""),s&&s.nodeType===8)if(i=s.data,i==="/$"){if(e===0)break;e--}else i!=="$"&&i!=="$?"&&i!=="$~"&&i!=="$!"||e++;i=s}while(i)}function Eh(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var i=t;switch(t=t.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":Eh(i),Jo(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}e.removeChild(i)}}function HT(e,t,i,s){for(;e.nodeType===1;){var c=i;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!s&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(s){if(!e[gn])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(u=e.getAttribute("rel"),u==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(u!==c.rel||e.getAttribute("href")!==(c.href==null||c.href===""?null:c.href)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin)||e.getAttribute("title")!==(c.title==null?null:c.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(u=e.getAttribute("src"),(u!==(c.src==null?null:c.src)||e.getAttribute("type")!==(c.type==null?null:c.type)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin))&&u&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var u=c.name==null?null:""+c.name;if(c.type==="hidden"&&e.getAttribute("name")===u)return e}else return e;if(e=Dn(e.nextSibling),e===null)break}return null}function zT(e,t,i){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=Dn(e.nextSibling),e===null))return null;return e}function gy(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Dn(e.nextSibling),e===null))return null;return e}function Ah(e){return e.data==="$?"||e.data==="$~"}function bh(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function LT(e,t){var i=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||i.readyState!=="loading")t();else{var s=function(){t(),i.removeEventListener("DOMContentLoaded",s)};i.addEventListener("DOMContentLoaded",s),e._reactRetry=s}}function Dn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var wh=null;function my(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"||i==="/&"){if(t===0)return Dn(e.nextSibling);t--}else i!=="$"&&i!=="$!"&&i!=="$?"&&i!=="$~"&&i!=="&"||t++}e=e.nextSibling}return null}function py(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"){if(t===0)return e;t--}else i!=="/$"&&i!=="/&"||t++}e=e.previousSibling}return null}function yy(e,t,i){switch(t=Tc(i),e){case"html":if(e=t.documentElement,!e)throw Error(o(452));return e;case"head":if(e=t.head,!e)throw Error(o(453));return e;case"body":if(e=t.body,!e)throw Error(o(454));return e;default:throw Error(o(451))}}function Pr(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Jo(e)}var Un=new Map,vy=new Set;function Ec(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Gi=q.d;q.d={f:BT,r:KT,D:PT,C:GT,L:VT,m:FT,X:QT,S:YT,M:qT};function BT(){var e=Gi.f(),t=fc();return e||t}function KT(e){var t=oi(e);t!==null&&t.tag===5&&t.type==="form"?Um(t):Gi.r(e)}var Co=typeof document>"u"?null:document;function Cy(e,t,i){var s=Co;if(s&&typeof t=="string"&&t){var c=ct(t);c='link[rel="'+e+'"][href="'+c+'"]',typeof i=="string"&&(c+='[crossorigin="'+i+'"]'),vy.has(c)||(vy.add(c),e={rel:e,crossOrigin:i,href:t},s.querySelector(c)===null&&(t=s.createElement("link"),Ht(t,"link",e),ut(t),s.head.appendChild(t)))}}function PT(e){Gi.D(e),Cy("dns-prefetch",e,null)}function GT(e,t){Gi.C(e,t),Cy("preconnect",e,t)}function VT(e,t,i){Gi.L(e,t,i);var s=Co;if(s&&e&&t){var c='link[rel="preload"][as="'+ct(t)+'"]';t==="image"&&i&&i.imageSrcSet?(c+='[imagesrcset="'+ct(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(c+='[imagesizes="'+ct(i.imageSizes)+'"]')):c+='[href="'+ct(e)+'"]';var u=c;switch(t){case"style":u=So(e);break;case"script":u=To(e)}Un.has(u)||(e=T({rel:"preload",href:t==="image"&&i&&i.imageSrcSet?void 0:e,as:t},i),Un.set(u,e),s.querySelector(c)!==null||t==="style"&&s.querySelector(Gr(u))||t==="script"&&s.querySelector(Vr(u))||(t=s.createElement("link"),Ht(t,"link",e),ut(t),s.head.appendChild(t)))}}function FT(e,t){Gi.m(e,t);var i=Co;if(i&&e){var s=t&&typeof t.as=="string"?t.as:"script",c='link[rel="modulepreload"][as="'+ct(s)+'"][href="'+ct(e)+'"]',u=c;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":u=To(e)}if(!Un.has(u)&&(e=T({rel:"modulepreload",href:e},t),Un.set(u,e),i.querySelector(c)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(Vr(u)))return}s=i.createElement("link"),Ht(s,"link",e),ut(s),i.head.appendChild(s)}}}function YT(e,t,i){Gi.S(e,t,i);var s=Co;if(s&&e){var c=ri(s).hoistableStyles,u=So(e);t=t||"default";var g=c.get(u);if(!g){var C={loading:0,preload:null};if(g=s.querySelector(Gr(u)))C.loading=5;else{e=T({rel:"stylesheet",href:e,"data-precedence":t},i),(i=Un.get(u))&&_h(e,i);var A=g=s.createElement("link");ut(A),Ht(A,"link",e),A._p=new Promise(function(R,B){A.onload=R,A.onerror=B}),A.addEventListener("load",function(){C.loading|=1}),A.addEventListener("error",function(){C.loading|=2}),C.loading|=4,Ac(g,t,s)}g={type:"stylesheet",instance:g,count:1,state:C},c.set(u,g)}}}function QT(e,t){Gi.X(e,t);var i=Co;if(i&&e){var s=ri(i).hoistableScripts,c=To(e),u=s.get(c);u||(u=i.querySelector(Vr(c)),u||(e=T({src:e,async:!0},t),(t=Un.get(c))&&kh(e,t),u=i.createElement("script"),ut(u),Ht(u,"link",e),i.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},s.set(c,u))}}function qT(e,t){Gi.M(e,t);var i=Co;if(i&&e){var s=ri(i).hoistableScripts,c=To(e),u=s.get(c);u||(u=i.querySelector(Vr(c)),u||(e=T({src:e,async:!0,type:"module"},t),(t=Un.get(c))&&kh(e,t),u=i.createElement("script"),ut(u),Ht(u,"link",e),i.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},s.set(c,u))}}function Sy(e,t,i,s){var c=(c=re.current)?Ec(c):null;if(!c)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(t=So(i.href),i=ri(c).hoistableStyles,s=i.get(t),s||(s={type:"style",instance:null,count:0,state:null},i.set(t,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){e=So(i.href);var u=ri(c).hoistableStyles,g=u.get(e);if(g||(c=c.ownerDocument||c,g={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,g),(u=c.querySelector(Gr(e)))&&!u._p&&(g.instance=u,g.state.loading=5),Un.has(e)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},Un.set(e,i),u||JT(c,e,i,g.state))),t&&s===null)throw Error(o(528,""));return g}if(t&&s!==null)throw Error(o(529,""));return null;case"script":return t=i.async,i=i.src,typeof i=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=To(i),i=ri(c).hoistableScripts,s=i.get(t),s||(s={type:"script",instance:null,count:0,state:null},i.set(t,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function So(e){return'href="'+ct(e)+'"'}function Gr(e){return'link[rel="stylesheet"]['+e+"]"}function Ty(e){return T({},e,{"data-precedence":e.precedence,precedence:null})}function JT(e,t,i,s){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?s.loading=1:(t=e.createElement("link"),s.preload=t,t.addEventListener("load",function(){return s.loading|=1}),t.addEventListener("error",function(){return s.loading|=2}),Ht(t,"link",i),ut(t),e.head.appendChild(t))}function To(e){return'[src="'+ct(e)+'"]'}function Vr(e){return"script[async]"+e}function Ey(e,t,i){if(t.count++,t.instance===null)switch(t.type){case"style":var s=e.querySelector('style[data-href~="'+ct(i.href)+'"]');if(s)return t.instance=s,ut(s),s;var c=T({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return s=(e.ownerDocument||e).createElement("style"),ut(s),Ht(s,"style",c),Ac(s,i.precedence,e),t.instance=s;case"stylesheet":c=So(i.href);var u=e.querySelector(Gr(c));if(u)return t.state.loading|=4,t.instance=u,ut(u),u;s=Ty(i),(c=Un.get(c))&&_h(s,c),u=(e.ownerDocument||e).createElement("link"),ut(u);var g=u;return g._p=new Promise(function(C,A){g.onload=C,g.onerror=A}),Ht(u,"link",s),t.state.loading|=4,Ac(u,i.precedence,e),t.instance=u;case"script":return u=To(i.src),(c=e.querySelector(Vr(u)))?(t.instance=c,ut(c),c):(s=i,(c=Un.get(u))&&(s=T({},i),kh(s,c)),e=e.ownerDocument||e,c=e.createElement("script"),ut(c),Ht(c,"link",s),e.head.appendChild(c),t.instance=c);case"void":return null;default:throw Error(o(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(s=t.instance,t.state.loading|=4,Ac(s,i.precedence,e));return t.instance}function Ac(e,t,i){for(var s=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),c=s.length?s[s.length-1]:null,u=c,g=0;g<s.length;g++){var C=s[g];if(C.dataset.precedence===t)u=C;else if(u!==c)break}u?u.parentNode.insertBefore(e,u.nextSibling):(t=i.nodeType===9?i.head:i,t.insertBefore(e,t.firstChild))}function _h(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function kh(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var bc=null;function Ay(e,t,i){if(bc===null){var s=new Map,c=bc=new Map;c.set(i,s)}else c=bc,s=c.get(i),s||(s=new Map,c.set(i,s));if(s.has(e))return s;for(s.set(e,null),i=i.getElementsByTagName(e),c=0;c<i.length;c++){var u=i[c];if(!(u[gn]||u[lt]||e==="link"&&u.getAttribute("rel")==="stylesheet")&&u.namespaceURI!=="http://www.w3.org/2000/svg"){var g=u.getAttribute(t)||"";g=e+g;var C=s.get(g);C?C.push(u):s.set(g,[u])}}return s}function by(e,t,i){e=e.ownerDocument||e,e.head.insertBefore(i,t==="title"?e.querySelector("head > title"):null)}function XT(e,t,i){if(i===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;return t.rel==="stylesheet"?(e=t.disabled,typeof t.precedence=="string"&&e==null):!0;case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function wy(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function ZT(e,t,i,s){if(i.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var c=So(s.href),u=t.querySelector(Gr(c));if(u){t=u._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=wc.bind(e),t.then(e,e)),i.state.loading|=4,i.instance=u,ut(u);return}u=t.ownerDocument||t,s=Ty(s),(c=Un.get(c))&&_h(s,c),u=u.createElement("link"),ut(u);var g=u;g._p=new Promise(function(C,A){g.onload=C,g.onerror=A}),Ht(u,"link",s),i.instance=u}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(i,t),(t=i.state.preload)&&(i.state.loading&3)===0&&(e.count++,i=wc.bind(e),t.addEventListener("load",i),t.addEventListener("error",i))}}var Ih=0;function $T(e,t){return e.stylesheets&&e.count===0&&kc(e,e.stylesheets),0<e.count||0<e.imgCount?function(i){var s=setTimeout(function(){if(e.stylesheets&&kc(e,e.stylesheets),e.unsuspend){var u=e.unsuspend;e.unsuspend=null,u()}},6e4+t);0<e.imgBytes&&Ih===0&&(Ih=62500*MT());var c=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&kc(e,e.stylesheets),e.unsuspend)){var u=e.unsuspend;e.unsuspend=null,u()}},(e.imgBytes>Ih?50:800)+t);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(s),clearTimeout(c)}}:null}function wc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)kc(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var _c=null;function kc(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,_c=new Map,t.forEach(WT,e),_c=null,wc.call(e))}function WT(e,t){if(!(t.state.loading&4)){var i=_c.get(e);if(i)var s=i.get(null);else{i=new Map,_c.set(e,i);for(var c=e.querySelectorAll("link[data-precedence],style[data-precedence]"),u=0;u<c.length;u++){var g=c[u];(g.nodeName==="LINK"||g.getAttribute("media")!=="not all")&&(i.set(g.dataset.precedence,g),s=g)}s&&i.set(null,s)}c=t.instance,g=c.getAttribute("data-precedence"),u=i.get(g)||s,u===s&&i.set(null,c),i.set(g,c),this.count++,s=wc.bind(this),c.addEventListener("load",s),c.addEventListener("error",s),u?u.parentNode.insertBefore(c,u.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(c,e.firstChild)),t.state.loading|=4}}var Fr={$$typeof:ie,Provider:null,Consumer:null,_currentValue:oe,_currentValue2:oe,_threadCount:0};function eE(e,t,i,s,c,u,g,C,A){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Us(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Us(0),this.hiddenUpdates=Us(null),this.identifierPrefix=s,this.onUncaughtError=c,this.onCaughtError=u,this.onRecoverableError=g,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=A,this.incompleteTransitions=new Map}function _y(e,t,i,s,c,u,g,C,A,R,B,V){return e=new eE(e,t,i,g,A,R,B,V,C),t=1,u===!0&&(t|=24),u=yn(3,null,null,t),e.current=u,u.stateNode=e,t=rd(),t.refCount++,e.pooledCache=t,t.refCount++,u.memoizedState={element:s,isDehydrated:i,cache:t},dd(u),e}function ky(e){return e?(e=Zs,e):Zs}function Iy(e,t,i,s,c,u){c=ky(c),s.context===null?s.context=c:s.pendingContext=c,s=la(t),s.payload={element:i},u=u===void 0?null:u,u!==null&&(s.callback=u),i=ca(e,s,t),i!==null&&(sn(i,e,t),Ar(i,e,t))}function Oy(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function Oh(e,t){Oy(e,t),(e=e.alternate)&&Oy(e,t)}function Ry(e){if(e.tag===13||e.tag===31){var t=as(e,67108864);t!==null&&sn(t,e,67108864),Oh(e,67108864)}}function Ny(e){if(e.tag===13||e.tag===31){var t=En();t=Ji(t);var i=as(e,t);i!==null&&sn(i,e,t),Oh(e,t)}}var Ic=!0;function tE(e,t,i,s){var c=j.T;j.T=null;var u=q.p;try{q.p=2,Rh(e,t,i,s)}finally{q.p=u,j.T=c}}function nE(e,t,i,s){var c=j.T;j.T=null;var u=q.p;try{q.p=8,Rh(e,t,i,s)}finally{q.p=u,j.T=c}}function Rh(e,t,i,s){if(Ic){var c=Nh(s);if(c===null)ph(e,t,s,Oc,i),xy(e,s);else if(aE(c,e,t,i,s))s.stopPropagation();else if(xy(e,s),t&4&&-1<iE.indexOf(e)){for(;c!==null;){var u=oi(c);if(u!==null)switch(u.tag){case 3:if(u=u.stateNode,u.current.memoizedState.isDehydrated){var g=ai(u.pendingLanes);if(g!==0){var C=u;for(C.pendingLanes|=2,C.entangledLanes|=2;g;){var A=1<<31-Yt(g);C.entanglements[1]|=A,g&=~A}gi(u),(Ge&6)===0&&(dc=Kt()+500,Lr(0))}}break;case 31:case 13:C=as(u,2),C!==null&&sn(C,u,2),fc(),Oh(u,2)}if(u=Nh(s),u===null&&ph(e,t,s,Oc,i),u===c)break;c=u}c!==null&&s.stopPropagation()}else ph(e,t,s,null,i)}}function Nh(e){return e=nr(e),Mh(e)}var Oc=null;function Mh(e){if(Oc=null,e=$i(e),e!==null){var t=d(e);if(t===null)e=null;else{var i=t.tag;if(i===13){if(e=h(t),e!==null)return e;e=null}else if(i===31){if(e=f(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Oc=e,null}function My(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(vl()){case Ko:return 2;case xs:return 8;case fn:case Po:return 32;case La:return 268435456;default:return 32}default:return 32}}var xh=!1,Sa=null,Ta=null,Ea=null,Yr=new Map,Qr=new Map,Aa=[],iE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function xy(e,t){switch(e){case"focusin":case"focusout":Sa=null;break;case"dragenter":case"dragleave":Ta=null;break;case"mouseover":case"mouseout":Ea=null;break;case"pointerover":case"pointerout":Yr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qr.delete(t.pointerId)}}function qr(e,t,i,s,c,u){return e===null||e.nativeEvent!==u?(e={blockedOn:t,domEventName:i,eventSystemFlags:s,nativeEvent:u,targetContainers:[c]},t!==null&&(t=oi(t),t!==null&&Ry(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function aE(e,t,i,s,c){switch(t){case"focusin":return Sa=qr(Sa,e,t,i,s,c),!0;case"dragenter":return Ta=qr(Ta,e,t,i,s,c),!0;case"mouseover":return Ea=qr(Ea,e,t,i,s,c),!0;case"pointerover":var u=c.pointerId;return Yr.set(u,qr(Yr.get(u)||null,e,t,i,s,c)),!0;case"gotpointercapture":return u=c.pointerId,Qr.set(u,qr(Qr.get(u)||null,e,t,i,s,c)),!0}return!1}function Dy(e){var t=$i(e.target);if(t!==null){var i=d(t);if(i!==null){if(t=i.tag,t===13){if(t=h(i),t!==null){e.blockedOn=t,qo(e.priority,function(){Ny(i)});return}}else if(t===31){if(t=f(i),t!==null){e.blockedOn=t,qo(e.priority,function(){Ny(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Rc(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=Nh(e.nativeEvent);if(i===null){i=e.nativeEvent;var s=new i.constructor(i.type,i);Ps=s,i.target.dispatchEvent(s),Ps=null}else return t=oi(i),t!==null&&Ry(t),e.blockedOn=i,!1;t.shift()}return!0}function Uy(e,t,i){Rc(e)&&i.delete(t)}function sE(){xh=!1,Sa!==null&&Rc(Sa)&&(Sa=null),Ta!==null&&Rc(Ta)&&(Ta=null),Ea!==null&&Rc(Ea)&&(Ea=null),Yr.forEach(Uy),Qr.forEach(Uy)}function Nc(e,t){e.blockedOn===t&&(e.blockedOn=null,xh||(xh=!0,l.unstable_scheduleCallback(l.unstable_NormalPriority,sE)))}var Mc=null;function jy(e){Mc!==e&&(Mc=e,l.unstable_scheduleCallback(l.unstable_NormalPriority,function(){Mc===e&&(Mc=null);for(var t=0;t<e.length;t+=3){var i=e[t],s=e[t+1],c=e[t+2];if(typeof s!="function"){if(Mh(s||i)===null)continue;break}var u=oi(i);u!==null&&(e.splice(t,3),t-=3,Nd(u,{pending:!0,data:c,method:i.method,action:s},s,c))}}))}function Eo(e){function t(A){return Nc(A,e)}Sa!==null&&Nc(Sa,e),Ta!==null&&Nc(Ta,e),Ea!==null&&Nc(Ea,e),Yr.forEach(t),Qr.forEach(t);for(var i=0;i<Aa.length;i++){var s=Aa[i];s.blockedOn===e&&(s.blockedOn=null)}for(;0<Aa.length&&(i=Aa[0],i.blockedOn===null);)Dy(i),i.blockedOn===null&&Aa.shift();if(i=(e.ownerDocument||e).$$reactFormReplay,i!=null)for(s=0;s<i.length;s+=3){var c=i[s],u=i[s+1],g=c[wt]||null;if(typeof u=="function")g||jy(i);else if(g){var C=null;if(u&&u.hasAttribute("formAction")){if(c=u,g=u[wt]||null)C=g.formAction;else if(Mh(c)!==null)continue}else C=g.action;typeof C=="function"?i[s+1]=C:(i.splice(s,3),s-=3),jy(i)}}}function Hy(){function e(u){u.canIntercept&&u.info==="react-transition"&&u.intercept({handler:function(){return new Promise(function(g){return c=g})},focusReset:"manual",scroll:"manual"})}function t(){c!==null&&(c(),c=null),s||setTimeout(i,20)}function i(){if(!s&&!navigation.transition){var u=navigation.currentEntry;u&&u.url!=null&&navigation.navigate(u.url,{state:u.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var s=!1,c=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(i,100),function(){s=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),c!==null&&(c(),c=null)}}}function Dh(e){this._internalRoot=e}xc.prototype.render=Dh.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(o(409));var i=t.current,s=En();Iy(i,s,e,t,null,null)},xc.prototype.unmount=Dh.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Iy(e.current,2,null,e,null,null),fc(),t[Ei]=null}};function xc(e){this._internalRoot=e}xc.prototype.unstable_scheduleHydration=function(e){if(e){var t=js();e={blockedOn:null,target:e,priority:t};for(var i=0;i<Aa.length&&t!==0&&t<Aa[i].priority;i++);Aa.splice(i,0,e),i===0&&Dy(e)}};var zy=n.version;if(zy!=="19.2.4")throw Error(o(527,zy,"19.2.4"));q.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(o(188)):(e=Object.keys(e).join(","),Error(o(268,e)));return e=p(t),e=e!==null?S(e):null,e=e===null?null:e.stateNode,e};var oE={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:j,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Dc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Dc.isDisabled&&Dc.supportsFiber)try{ni=Dc.inject(oE),Nt=Dc}catch{}}return Xr.createRoot=function(e,t){if(!r(e))throw Error(o(299));var i=!1,s="",c=Fm,u=Ym,g=Qm;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onUncaughtError!==void 0&&(c=t.onUncaughtError),t.onCaughtError!==void 0&&(u=t.onCaughtError),t.onRecoverableError!==void 0&&(g=t.onRecoverableError)),t=_y(e,1,!1,null,null,i,s,null,c,u,g,Hy),e[Ei]=t.current,mh(e),new Dh(t)},Xr.hydrateRoot=function(e,t,i){if(!r(e))throw Error(o(299));var s=!1,c="",u=Fm,g=Ym,C=Qm,A=null;return i!=null&&(i.unstable_strictMode===!0&&(s=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onUncaughtError!==void 0&&(u=i.onUncaughtError),i.onCaughtError!==void 0&&(g=i.onCaughtError),i.onRecoverableError!==void 0&&(C=i.onRecoverableError),i.formState!==void 0&&(A=i.formState)),t=_y(e,1,!0,t,i??null,s,c,A,u,g,C,Hy),t.context=ky(null),i=t.current,s=En(),s=Ji(s),c=la(s),c.callback=null,ca(i,c,s),i=s,t.current.lanes=i,Ga(t,i),gi(t),e[Ei]=t.current,mh(e),new xc(t)},Xr.version="19.2.4",Xr}var qy;function pE(){if(qy)return Hh.exports;qy=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(n){console.error(n)}}return l(),Hh.exports=mE(),Hh.exports}var yE=pE();const sl="timekerper-sync.json",ol="https://api.github.com",Sf=["zoomLevel","fitMode","debugMode","debugTimeOffset","darkMode"];function rl(l){return{Authorization:`Bearer ${l}`,Accept:"application/vnd.github+json","Content-Type":"application/json"}}async function vE(l){let n=1;for(;n<=10;){const a=await fetch(`${ol}/gists?per_page=100&page=${n}`,{headers:rl(l)});if(!a.ok)throw new Error(a.status===401?"Invalid token":`GitHub API error: ${a.status}`);const o=await a.json();if(o.length===0)break;for(const r of o)if(r.files[sl]){const d=await fetch(`${ol}/gists/${r.id}`,{headers:rl(l)});if(!d.ok)throw new Error(`Failed to fetch gist: ${d.status}`);const f=(await d.json()).files[sl]?.content;return{gistId:r.id,data:f?JSON.parse(f):null}}n++}return null}async function CE(l,n){const a=await fetch(`${ol}/gists`,{method:"POST",headers:rl(l),body:JSON.stringify({description:"Timekerper sync data",public:!1,files:{[sl]:{content:JSON.stringify(n)}}})});if(!a.ok)throw new Error(`Failed to create gist: ${a.status}`);return(await a.json()).id}async function Jy(l,n,a){const o=await fetch(`${ol}/gists/${n}`,{method:"PATCH",headers:rl(l),body:JSON.stringify({files:{[sl]:{content:JSON.stringify(a)}}})});if(!o.ok)throw o.status===404?new Error("gist_not_found"):new Error(`Failed to push: ${o.status}`)}async function Xy(l,n){const a=await fetch(`${ol}/gists/${n}`,{headers:rl(l)});if(!a.ok)throw a.status===404?new Error("gist_not_found"):new Error(`Failed to pull: ${a.status}`);const r=(await a.json()).files[sl]?.content;if(!r)throw new Error("Sync file missing from gist");return JSON.parse(r)}function Uc(l,n,a,o,r){const d=Object.fromEntries(Object.entries(o).filter(([h])=>!Sf.includes(h)));return{version:1,tasks:l,events:n,tags:a,settings:d,activeTaskId:r,pushedAt:new Date().toISOString()}}function SE(l,n){const a=["tasks","events","tags","activeTaskId"];for(const r of a)if(JSON.stringify(l[r])!==JSON.stringify(n[r]))return!0;const o=r=>r&&Object.fromEntries(Object.entries(r).filter(([d])=>!Sf.includes(d)));return JSON.stringify(o(l.settings))!==JSON.stringify(o(n.settings))}function Ie(l){const[n,a]=l.split(":").map(Number);return n*60+a}function cn(l){const n=Math.floor(l/60),a=l%60;return`${n.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`}function Kh(l){const[n,a]=l.split(":").map(Number),o=n>=12?"PM":"AM";return`${n>12?n-12:n===0?12:n}:${a.toString().padStart(2,"0")} ${o}`}function Ao(l){if(l>=60){const n=Math.floor(l/60),a=l%60;return a>0?`${n}h ${a}m`:`${n}h`}return`${l}m`}function Ph(l,n,a){const[o,r]=l.split(":").map(Number),[d,h]=n.split(":").map(Number),f=o>=12?"pm":"am",y=d>=12?"pm":"am",p=o>12?o-12:o===0?12:o,S=d>12?d-12:d===0?12:d,T=`${p}:${r.toString().padStart(2,"0")}`,k=`${S}:${h.toString().padStart(2,"0")}${y}`,N=f===y?`${T}${k}`:`${T}${f}${k}`;return a?`(${N})`:N}function rn(){const l=new Date;return l.getHours()*60+l.getMinutes()}function Tf(l,n,a,o,r){const d=[];for(const p of l){if(p.date!==r)continue;const S=Math.max(Ie(p.start),a),T=Math.min(Ie(p.end),o);T>S&&d.push([S,T])}for(const p of n||[]){const S=Math.max(p.start,a),T=Math.min(p.end??o,o);T>S&&d.push([S,T])}if(d.length===0)return 0;d.sort((p,S)=>p[0]-S[0]);let h=0,[f,y]=d[0];for(let p=1;p<d.length;p++)d[p][0]<=y?y=Math.max(y,d[p][1]):(h+=y-f,[f,y]=d[p]);return h+=y-f,h}function ft(){const l=new Date;return l.getFullYear()+"-"+String(l.getMonth()+1).padStart(2,"0")+"-"+String(l.getDate()).padStart(2,"0")}function on(l,n){const a=new Date(l+"T12:00:00");return a.setDate(a.getDate()+n),a.getFullYear()+"-"+String(a.getMonth()+1).padStart(2,"0")+"-"+String(a.getDate()).padStart(2,"0")}function TE(l){return new Date(l+"T12:00:00").toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})}function EE(l){return new Date(l+"T12:00:00").toLocaleDateString("en-US",{weekday:"short",day:"numeric"})}function AE(l){return new Date(l+"T12:00:00").toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}function bE(l){const n=l["X-MICROSOFT-CDO-BUSYSTATUS"];if(n)return n.toUpperCase();const a=l.PARTSTAT;return a==="DECLINED"?"FREE":a==="TENTATIVE"?"TENTATIVE":l.TRANSP==="TRANSPARENT"?"FREE":null}const wE={"Eastern Standard Time":"America/New_York","Central Standard Time":"America/Chicago","Mountain Standard Time":"America/Denver","Pacific Standard Time":"America/Los_Angeles","US Mountain Standard Time":"America/Phoenix","US Eastern Standard Time":"America/Indianapolis","Alaska Standard Time":"America/Anchorage","Hawaiian Standard Time":"Pacific/Honolulu","Atlantic Standard Time":"America/Halifax","Newfoundland Standard Time":"America/St_Johns","GMT Standard Time":"Europe/London","Greenwich Standard Time":"Atlantic/Reykjavik","W. Europe Standard Time":"Europe/Berlin","Central European Standard Time":"Europe/Warsaw","Romance Standard Time":"Europe/Paris","Central Europe Standard Time":"Europe/Budapest","E. Europe Standard Time":"Europe/Chisinau","FLE Standard Time":"Europe/Kiev","GTB Standard Time":"Europe/Bucharest","Russian Standard Time":"Europe/Moscow","Israel Standard Time":"Asia/Jerusalem","South Africa Standard Time":"Africa/Johannesburg","India Standard Time":"Asia/Kolkata","China Standard Time":"Asia/Shanghai","Tokyo Standard Time":"Asia/Tokyo","Korea Standard Time":"Asia/Seoul","AUS Eastern Standard Time":"Australia/Sydney","New Zealand Standard Time":"Pacific/Auckland",UTC:"UTC"};function _E(l,n,a,o,r,d,h){const f=Date.UTC(l,n-1,a,o,r,d),y=new Intl.DateTimeFormat("en-US",{timeZone:h,year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!1}).formatToParts(new Date(f)),p=k=>{const N=y.find(F=>F.type===k);return N?+N.value:0},S=p("hour")===24?0:p("hour"),T=Date.UTC(p("year"),p("month")-1,p("day"),S,p("minute"),p("second"));return new Date(f-(T-f))}function Gh(l){if(!l)return null;let n=null,a=l;if(l.startsWith("TZID=")){const S=l.indexOf(":",5);S>0&&(n=l.slice(5,S).replace(/^"|"$/g,""),a=l.slice(S+1))}else l.includes(":")&&(a=l.split(":").pop());const o=a.match(/^(\d{4})(\d{2})(\d{2})(?:T(\d{2})(\d{2})(\d{2}))?/);if(!o)return null;const[,r,d,h,f,y,p]=o;if(a.endsWith("Z"))return new Date(Date.UTC(+r,+d-1,+h,+(f||0),+(y||0),+(p||0)));if(n){const S=wE[n]||n;try{return _E(+r,+d,+h,+(f||0),+(y||0),+(p||0),S)}catch{}}return new Date(+r,+d-1,+h,+(f||0),+(y||0),+(p||0))}function kE(l){const n=[],o=l.replace(/\r?\n[ \t]/g,"").replace(/\r/g,"").split(`
`);let r=!1,d={},h=0,f=[];for(const y of o){const p=y.trim();if(p==="BEGIN:VEVENT"){r=!0,d={},h=0,f=[];continue}if(p==="END:VEVENT"){r=!1;const S=d.SUMMARY||"Imported Event",T=Gh(d.DTSTART),k=Gh(d.DTEND);if(T&&k){const N=bE(d),F=T.getFullYear()+"-"+String(T.getMonth()+1).padStart(2,"0")+"-"+String(T.getDate()).padStart(2,"0"),Y=String(T.getHours()).padStart(2,"0")+":"+String(T.getMinutes()).padStart(2,"0"),pe=String(k.getHours()).padStart(2,"0")+":"+String(k.getMinutes()).padStart(2,"0"),Z=d.UID||null,ue=d["RECURRENCE-ID"]||null;let ie=null;if(ue&&Z){const fe=Gh(ue);fe&&(ie=fe.getFullYear()+"-"+String(fe.getMonth()+1).padStart(2,"0")+"-"+String(fe.getDate()).padStart(2,"0"))}n.push({name:S,date:F,start:Y,end:pe,status:N,isMeeting:h>0,categories:f,uid:Z,replacesDate:ie})}continue}if(r){const S=p.indexOf(":");if(S===-1)continue;const T=p.substring(0,S),k=p.substring(S+1),N=T.split(";")[0];if(d[N]=k,N==="ATTENDEE"&&h++,N==="CATEGORIES"&&f.push(...k.split(",").map(F=>F.trim()).filter(Boolean)),T.includes("PARTSTAT=")){const F=T.match(/PARTSTAT=([^;]+)/);F&&(d.PARTSTAT=F[1])}if(N==="DTSTART"||N==="DTEND"){const F=T.match(/TZID=([^;:]+)/);F&&(d[N]=`TZID=${F[1]}:${k}`)}}}return n}function nC(l,n,a,o){const r={BUSY:n.icsImportBusy,OOF:n.icsImportOof,TENTATIVE:n.icsImportTentative,FREE:n.icsImportFree,"WORKING-ELSEWHERE":n.icsImportWorkingElsewhere},d=n.icsCategoryRules||[],h=new Map;for(const p of l)!p.replacesDate&&p.uid&&h.set(p.uid,p);for(const p of l)if(p.replacesDate&&p.uid){const S=h.get(p.uid);S?(p.name==="Imported Event"&&(p.name=S.name),(!p.categories||p.categories.length===0)&&(p.categories=S.categories),p.isMeeting||(p.isMeeting=S.isMeeting),p.status||(p.status=S.status)):p.name==="Imported Event"&&(p._orphaned=!0)}const f=l.filter(p=>{if(p._orphaned)return!1;const S=r[p.status];if(S===void 0){if(!n.icsImportBusy)return!1}else if(!S)return!1;if(p.date<a||p.date>o||n.icsImportMeetingsOnly&&!p.isMeeting)return!1;if(p.categories&&p.categories.length>0){for(const T of p.categories)if(d.find(N=>N.include===!1&&N.category.toLowerCase()===T.toLowerCase()))return!1}return!0}),y=new Set;for(const p of f)p.replacesDate&&p.uid&&y.add(`${p.uid}|${p.replacesDate}`);return y.size===0?f:f.filter(p=>p.replacesDate?!0:!(p.uid&&y.has(`${p.uid}|${p.date}`)))}function Zy(l,n,a,o,r,d=0){const h=l.filter(T=>T.date===n).map(T=>({start:Math.max(Ie(T.start),a),end:Math.min(Ie(T.end),o)})).filter(T=>T.end>T.start),f=(r||[]).map(T=>({start:Math.max(T.start,a),end:Math.min(T.end,o)})).filter(T=>T.end>T.start),y=[...h,...f].sort((T,k)=>T.start-k.start);let p=0,S=a;for(const T of y){if(T.start>S){const k=T.start-S;k>=d&&(p+=k)}S=Math.max(S,T.end)}if(S<o){const T=o-S;T>=d&&(p+=T)}return p}function IE(l,n,a,o,r,d){const h=Ie(a.extendedStart),f=Ie(a.extendedEnd),y=Ie(a.workdayStart),p=Ie(a.workdayEnd),S=a.restrictTasksToWorkHours?y:h,T=a.restrictTasksToWorkHours?p:f,k=a.debugMode&&a.debugTimeOffset||0,N=rn()+k,F=ft(),Y=d===F,pe=d>F,Z=n.filter(W=>W.date===d).map(W=>({...W,startMin:Ie(W.start),endMin:Ie(W.end),type:"event",isPast:Y?Ie(W.end)<=N:!pe})).filter(W=>W.startMin<f&&W.endMin>h).sort((W,ee)=>W.startMin-ee.startMin),ue=[],ie=[];if(Y||pe){const W=l.filter(ne=>!ne.completed),ee=W[0],se=Y&&(ee?.pauseEvents?.some(ne=>ne.end==null)??!1),Ee=[];if(Y&&ee?.startedAtMin!=null&&ee.pauseEvents?.length>0)for(const ne of ee.pauseEvents){const he=ne.start,b=ne.end??N;if(b>he&&(Ee.push({startMin:he,endMin:b}),b>h&&he<f)){const x=Math.max(he,h),J=Math.min(b,f);ie.push({startMin:x,endMin:J,start:cn(x),end:cn(J),type:"pause",name:"Paused",isPast:b<=N})}}let ge;pe?ge=S:ee?.startedAtMin!=null?ge=Math.max(S,ee.startedAtMin):o?ge=Math.max(S,N-r):ge=Math.max(S,Math.min(N,T));let ze=0;if(pe){const ne=x=>{const J=[];for(const P of l)if(!(!P.completed||!P.workSegments?.length))for(const $ of P.workSegments)$.date===x&&J.push({start:$.start,end:$.end});if(x===F&&ee?.startedAtMin!=null&&ee.pauseEvents?.length>0)for(const P of ee.pauseEvents){const $=P.end??N;$>P.start&&J.push({start:P.start,end:$})}return J},he=a.minFragmentMinutes||5,b=Math.max(S,Math.min(N,T));b<T&&(ze+=Zy(n,F,b,T,ne(F),he));for(let x=on(F,1);x<d;x=on(x,1))ze+=Zy(n,x,S,T,ne(x),he)}const Fe=[];for(const ne of l)if(!(!ne.completed||!ne.workSegments?.length))for(const he of ne.workSegments){if(he.date!==d)continue;const b=Math.max(he.start,ge),x=Math.min(he.end,f);x>b&&Fe.push({startMin:b,endMin:x})}const Ae=[...Z.filter(ne=>ne.endMin>ge),...Ee.filter(ne=>ne.endMin>ge),...Fe.filter(ne=>ne.endMin>ge)].sort((ne,he)=>ne.startMin-he.startMin),we=[];for(const ne of Ae){const he=Math.max(ne.startMin,ge);we.length===0||he>we[we.length-1].end?we.push({start:he,end:ne.endMin}):we[we.length-1].end=Math.max(we[we.length-1].end,ne.endMin)}const Ke=[];let Qe=ge;for(const ne of we)ne.start>Qe&&Ke.push({start:Qe,end:ne.start}),Qe=Math.max(Qe,ne.end);Qe<T&&Ke.push({start:Qe,end:T});let j=0,q=0,oe=ze;for(const ne of W){const he=Y&&ne.id===o,b=ne.adjustedDuration??ne.duration;let x;if(pe&&oe>0){if(oe>=b){oe-=b;continue}x=b-oe,oe=0}else x=he?Math.max(r,b):b;let J=x,P=0;const $=pe&&x<b;for(;J>0&&j<Ke.length;){const re=Ke[j],ye=re.start+q,it=re.end-ye;if(it<=0){j++,q=0;continue}const De=Math.min(J,it),Ot=a.minFragmentMinutes||5;if(De<Ot&&J>it){j++,q=0;continue}const Ci=Y&&ye+De<=N;ue.push({taskId:ne.id,taskName:ne.name,tagId:ne.tagId,start:cn(ye),end:cn(ye+De),startMin:ye,endMin:ye+De,duration:De,isSplit:x>De||P>0||$,blockIndex:P,type:"task",isActive:he,isPast:Ci,isPausedRemaining:se&&ne.id===ee?.id&&!Ci,continuesBefore:P>0||$,continuesAfter:J-De>0}),J-=De,q+=De,P++,q>=re.end-re.start&&(j++,q=0)}}}const fe=l.filter(W=>W.completed&&W.startedAtMin!=null&&W.actualDuration>=2);for(const W of fe){const ee=W.workSegments||[];if(ee.length>0){const se=ee.filter(Ee=>Ee.date===d);for(let Ee=0;Ee<se.length;Ee++){const ge=se[Ee],ze=Math.max(ge.start,h),Fe=Math.min(ge.end,f);Fe>ze&&ue.push({taskId:W.id,taskName:W.name,tagId:W.tagId,start:cn(ze),end:cn(Fe),startMin:ze,endMin:Fe,duration:Fe-ze,isSplit:se.length>1,blockIndex:Ee,type:"task",isActive:!1,isPast:!0,isCompleted:!0,continuesBefore:Ee>0,continuesAfter:Ee<se.length-1})}}else if(Y){const se=Math.max(W.startedAtMin,h),Ee=Math.min(W.startedAtMin+W.actualDuration,f);Ee>se&&ue.push({taskId:W.id,taskName:W.name,tagId:W.tagId,start:cn(se),end:cn(Ee),startMin:se,endMin:Ee,duration:Ee-se,isSplit:!1,blockIndex:0,type:"task",isActive:!1,isPast:!0,isCompleted:!0,continuesBefore:!1,continuesAfter:!1})}}return[...Z,...ue,...ie].sort((W,ee)=>W.startMin-ee.startMin)}function $y(l){const n=Math.round((Date.now()-l.getTime())/1e3);if(n<10)return"just now";if(n<60)return`${n}s ago`;const a=Math.round(n/60);return a<60?`${a}m ago`:l.toLocaleTimeString([],{hour:"numeric",minute:"2-digit"})}function OE({tasks:l,setTasks:n,events:a,setEvents:o,tags:r,setTags:d,settings:h,setSettings:f,activeTaskId:y,setActiveTaskId:p,setTaskStartTime:S,setElapsedMinutes:T,tasksRef:k,eventsRef:N,timeOffset:F}){const[Y,pe]=z.useState(()=>localStorage.getItem("timekerper-sync-enabled")==="true"),[Z,ue]=z.useState(()=>localStorage.getItem("timekerper-sync-pat")||""),[ie,fe]=z.useState(()=>localStorage.getItem("timekerper-sync-gistId")||""),[W,ee]=z.useState("idle"),[se,Ee]=z.useState(null),[ge,ze]=z.useState(null),[Fe,Ae]=z.useState(null),we=z.useRef(!1),Ke=z.useRef(!1),Qe=z.useRef(!1);z.useEffect(()=>{localStorage.setItem("timekerper-sync-pat",Z)},[Z]),z.useEffect(()=>{localStorage.setItem("timekerper-sync-gistId",ie)},[ie]),z.useEffect(()=>{localStorage.setItem("timekerper-sync-enabled",Y)},[Y]);const j=z.useCallback(P=>{if(Ke.current=!0,P.tasks&&n(P.tasks),P.events&&o(P.events),P.tags&&d(P.tags),P.settings){const $=Object.fromEntries(Object.entries(P.settings).filter(([re])=>!Sf.includes(re)));f(re=>({...re,...$}))}if(P.activeTaskId!=null){const $=(P.tasks||[]).find(re=>re.id===P.activeTaskId&&!re.completed);if($&&$.startedAtMin!=null){const re=rn()+F,ye=$.startedAtDate||ft(),it=$.pauseEvents&&$.pauseEvents.length>0,De=Tf(P.events||[],$.pauseEvents||[],$.startedAtMin,re,ye)+(it?0:$.pauseGapMinutes||0),Ot=Math.max(0,re-$.startedAtMin-De);p(P.activeTaskId),S(Date.now()-Ot*6e4),T(Ot)}else p(null),S(null),T(0)}else P.activeTaskId===null&&(p(null),S(null),T(0));setTimeout(()=>{Ke.current=!1},0)},[F]),q=z.useCallback(async()=>{if(!(Ke.current||we.current||!Y||!ie||!Z)){we.current=!0,ee("syncing");try{const P=Uc(k.current,N.current,r,h,y);await Jy(Z,ie,P),Qe.current=!1,ze(new Date),ee("idle"),Ee(null)}catch(P){ee("error"),Ee(P.message)}finally{we.current=!1}}},[Y,ie,Z,r,h,y]),oe=z.useCallback(async()=>{if(!(Qe.current||we.current||!Y||!ie||!Z)){we.current=!0,ee("syncing");try{const P=await Xy(Z,ie),$=Uc(k.current,N.current,r,h,y);SE($,P)&&j(P),ze(new Date),ee("idle"),Ee(null)}catch(P){ee("error"),Ee(P.message)}finally{we.current=!1}}},[Y,ie,Z,r,h,y,j]),ne=async P=>{ee("syncing"),Ee(null);try{const $=await vE(P);if($)ee("idle"),Ae({pat:P,gistId:$.gistId});else{const re=Uc(k.current,N.current,r,h,y),ye=await CE(P,re);fe(ye),ue(P),pe(!0),ee("idle"),ze(new Date)}}catch($){ee("error"),Ee($.message)}},he=async P=>{const{pat:$,gistId:re}=Fe;Ae(null),ee("syncing");try{if(P==="pull"){const ye=await Xy($,re);j(ye)}else{const ye=Uc(k.current,N.current,r,h,y);await Jy($,re,ye)}fe(re),ue($),pe(!0),ee("idle"),ze(new Date)}catch(ye){ee("error"),Ee(ye.message)}},b=()=>{pe(!1),ue(""),fe(""),ee("idle"),Ee(null),ze(null),localStorage.removeItem("timekerper-sync-pat"),localStorage.removeItem("timekerper-sync-gistId"),localStorage.removeItem("timekerper-sync-enabled")};z.useEffect(()=>{if(!Y||Ke.current)return;Qe.current=!0;const P=setTimeout(()=>{Ke.current||q()},2e3);return()=>clearTimeout(P)},[l,a,r,h,y,Y,q]),z.useEffect(()=>{if(!Y)return;const P=setInterval(oe,6e4);return()=>clearInterval(P)},[Y,oe]),z.useEffect(()=>{Y&&ie&&Z&&oe()},[]);const x=Y?v.jsx("span",{className:`sync-indicator ${W}`,title:W==="error"?se:W==="syncing"?"Syncing...":ge?`Last synced ${$y(ge)}`:"Connected"}):null,J=v.jsxs("div",{className:"settings-section",children:[v.jsx("h4",{children:"Sync"}),v.jsx("p",{className:"settings-hint",children:"Sync your data across devices via a private GitHub Gist"}),Y?v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"sync-status-row",children:[v.jsx("span",{className:`sync-dot ${W}`}),v.jsxs("span",{children:[W==="syncing"&&"Syncing...",W==="idle"&&ge&&`Last synced ${$y(ge)}`,W==="idle"&&!ge&&"Connected",W==="error"&&"Sync error"]}),v.jsx("button",{className:"btn-secondary sync-now-btn",onClick:async()=>{await q(),await oe()},children:"Sync Now"})]}),W==="error"&&se&&v.jsx("p",{className:"sync-error",children:se}),v.jsx("button",{className:"btn-secondary",style:{marginTop:"0.5rem"},onClick:b,children:"Disconnect"})]}):v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"form-group",children:[v.jsxs("label",{children:["GitHub Personal Access Token ",v.jsx("span",{className:"label-hint",children:' needs "gist" scope only'})]}),v.jsxs("details",{className:"sync-help",children:[v.jsx("summary",{children:"How do I get one?"}),v.jsxs("ol",{children:[v.jsxs("li",{children:["Go to ",v.jsx("strong",{children:"github.com  Settings  Developer settings  Personal access tokens  Tokens (classic)"})]}),v.jsxs("li",{children:["Click ",v.jsx("strong",{children:"Generate new token (classic)"})]}),v.jsx("li",{children:'Give it a name (e.g. "Timekerper sync")'}),v.jsxs("li",{children:["Check only the ",v.jsx("strong",{children:"gist"})," scope"]}),v.jsxs("li",{children:["Click ",v.jsx("strong",{children:"Generate token"})," and copy it"]}),v.jsx("li",{children:"Paste the same token on each device you want to sync"})]})]}),v.jsx("input",{type:"password",className:"pat-input",value:Z,onChange:P=>ue(P.target.value),placeholder:"ghp_xxxxxxxxxxxxxxxxxxxx"})]}),Fe?v.jsxs("div",{className:"sync-conflict",children:[v.jsx("p",{className:"sync-conflict-msg",children:"Existing sync data found. Which do you want to keep?"}),v.jsxs("div",{className:"sync-conflict-btns",children:[v.jsx("button",{className:"btn-primary",onClick:()=>he("pull"),children:"Use cloud data"}),v.jsx("button",{className:"btn-secondary",onClick:()=>he("push"),children:"Use this device"}),v.jsx("button",{className:"btn-secondary",onClick:()=>{Ae(null),ue("")},children:"Cancel"})]})]}):v.jsx("button",{className:"btn-primary",onClick:()=>ne(Z),disabled:!Z.trim()||W==="syncing",children:W==="syncing"?"Connecting...":"Connect"})]})]});return{syncIndicator:x,syncSettingsUI:J}}const RE=Object.freeze(Object.defineProperty({__proto__:null,useSync:OE},Symbol.toStringTag,{value:"Module"})),NE="modulepreload",ME=function(l,n){return new URL(l,n).href},Wy={},xE=function(n,a,o){let r=Promise.resolve();if(a&&a.length>0){let p=function(S){return Promise.all(S.map(T=>Promise.resolve(T).then(k=>({status:"fulfilled",value:k}),k=>({status:"rejected",reason:k}))))};const h=document.getElementsByTagName("link"),f=document.querySelector("meta[property=csp-nonce]"),y=f?.nonce||f?.getAttribute("nonce");r=p(a.map(S=>{if(S=ME(S,o),S in Wy)return;Wy[S]=!0;const T=S.endsWith(".css"),k=T?'[rel="stylesheet"]':"";if(o)for(let F=h.length-1;F>=0;F--){const Y=h[F];if(Y.href===S&&(!T||Y.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${S}"]${k}`))return;const N=document.createElement("link");if(N.rel=T?"stylesheet":NE,T||(N.as="script"),N.crossOrigin="",N.href=S,y&&N.setAttribute("nonce",y),document.head.appendChild(N),T)return new Promise((F,Y)=>{N.addEventListener("load",F),N.addEventListener("error",()=>Y(new Error(`Unable to preload CSS for ${S}`)))})}))}function d(h){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=h,window.dispatchEvent(f),!f.defaultPrevented)throw h}return r.then(h=>{for(const f of h||[])f.status==="rejected"&&d(f.reason);return n().catch(d)})};const DE="msal.js.common",iC="https://login.microsoftonline.com/common/",UE="login.microsoftonline.com",aC="common",jE="adfs",HE="dstsv2",zE=`${iC}discovery/instance?api-version=1.1&authorization_endpoint=`,ev=".ciamlogin.com",LE=".onmicrosoft.com",tf="|",sC="openid",oC="profile",Ef="offline_access",BE="email",Af="S256",KE="application/x-www-form-urlencoded;charset=utf-8",Zr="Not Available",nf="/",tv="http://169.254.169.254/metadata/instance/compute/location",PE="2020-06-01",GE=2e3,VE="TryAutoDetect",FE="login.microsoft.com",YE=["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],nv=240,QE="invalid_instance",iv=200,qE=400,av=400,JE=499,XE=500,ZE=599,Io={GET:"GET",POST:"POST"},Ho=[sC,oC,Ef],sv=[...Ho,BE],$t={CONTENT_TYPE:"Content-Type",CONTENT_LENGTH:"Content-Length",RETRY_AFTER:"Retry-After",CCS_HEADER:"X-AnchorMailbox",WWWAuthenticate:"WWW-Authenticate",AuthenticationInfo:"Authentication-Info",X_MS_REQUEST_ID:"x-ms-request-id",X_MS_HTTP_VERSION:"x-ms-httpver"},ov={ACTIVE_ACCOUNT_FILTERS:"active-account-filters"},Ma={COMMON:"common",ORGANIZATIONS:"organizations",CONSUMERS:"consumers"},jc={ACCESS_TOKEN:"access_token",XMS_CC:"xms_cc"},un={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",NO_SESSION:"no_session"},bf={CODE:"code",IDTOKEN_TOKEN_REFRESHTOKEN:"id_token token refresh_token"},wf={QUERY:"query",FRAGMENT:"fragment"},rC={AUTHORIZATION_CODE_GRANT:"authorization_code",REFRESH_TOKEN_GRANT:"refresh_token"},$E="MSSTS",WE="ADFS",lC="Generic",cC="-",af=".",zt={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"},_f="appmetadata",eA="client_info",qc="1",sf="authority-metadata",tA=3600*24,Qn={CONFIG:"config",CACHE:"cache",NETWORK:"network",HARDCODED_VALUES:"hardcoded_values"},rv=5,nA=330,iA=50,uC="server-telemetry",lv="|",bo=",",aA="1",sA="0",oA="unknown_error",Xe={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},rA=60,lA=3600,dC="throttling",cA="retry-after, h429",uA="invalid_grant",dA="client_mismatch",wo={FAILED_AUTO_DETECTION:"1",INTERNAL_CACHE:"2",ENVIRONMENT_VARIABLE:"3",IMDS:"4"},Vh={CONFIGURED_NO_AUTO_DETECTION:"2",AUTO_DETECTION_REQUESTED_SUCCESSFUL:"4",AUTO_DETECTION_REQUESTED_FAILED:"5"},ys={NOT_APPLICABLE:"0",FORCE_REFRESH_OR_CLAIMS:"1",NO_CACHED_ACCESS_TOKEN:"2",CACHED_ACCESS_TOKEN_EXPIRED:"3",PROACTIVELY_REFRESHED:"4"},hA={Pop:"pop"},hC=300;const Es="client_id",fC="redirect_uri",fA="response_type",gA="response_mode",mA="grant_type",pA="claims",yA="scope",vA="refresh_token",CA="state",SA="nonce",TA="prompt",EA="code",AA="code_challenge",bA="code_challenge_method",wA="code_verifier",_A="client-request-id",kA="x-client-SKU",IA="x-client-VER",OA="x-client-OS",RA="x-client-CPU",NA="x-client-current-telemetry",MA="x-client-last-telemetry",xA="x-ms-lib-capability",DA="x-app-name",UA="x-app-ver",jA="post_logout_redirect_uri",HA="id_token_hint",zA="client_secret",LA="client_assertion",BA="client_assertion_type",gC="token_type",mC="req_cnf",cv="return_spa_code",KA="nativebroker",PA="logout_hint",GA="sid",VA="login_hint",FA="domain_hint",YA="x-client-xtra-sku",Jc="brk_client_id",Xc="brk_redirect_uri",of="instance_aware",QA="ear_jwk",qA="ear_jwe_crypto";function kf(l){return`See https://aka.ms/msal.js.errors#${l} for details`}class tt extends Error{constructor(n,a,o){const r=a||(n?kf(n):""),d=r?`${n}: ${r}`:n;super(d),Object.setPrototypeOf(this,tt.prototype),this.errorCode=n||"",this.errorMessage=r||"",this.subError=o||"",this.name="AuthError"}setCorrelationId(n){this.correlationId=n}}function rf(l,n){return new tt(l,n||kf(l))}class If extends tt{constructor(n){super(n),this.name="ClientConfigurationError",Object.setPrototypeOf(this,If.prototype)}}function nt(l){return new If(l)}class zn{static isEmptyObj(n){if(n)try{const a=JSON.parse(n);return Object.keys(a).length===0}catch{}return!0}static startsWith(n,a){return n.indexOf(a)===0}static endsWith(n,a){return n.length>=a.length&&n.lastIndexOf(a)===n.length-a.length}static queryStringToObject(n){const a={},o=n.split("&"),r=d=>decodeURIComponent(d.replace(/\+/g," "));return o.forEach(d=>{if(d.trim()){const[h,f]=d.split(/=(.+)/g,2);h&&f&&(a[r(h)]=r(f))}}),a}static trimArrayEntries(n){return n.map(a=>a.trim())}static removeEmptyStringsFromArray(n){return n.filter(a=>!!a)}static jsonParseHelper(n){try{return JSON.parse(n)}catch{return null}}}class Of extends tt{constructor(n,a){super(n,a),this.name="ClientAuthError",Object.setPrototypeOf(this,Of.prototype)}}function Q(l,n){return new Of(l,n)}const JA="redirect_uri_empty",XA="authority_uri_insecure",Hc="url_parse_error",ZA="empty_url_error",$A="empty_input_scopes_error",pC="invalid_claims",WA="token_request_empty",eb="logout_request_empty",yC="pkce_params_missing",vC="invalid_cloud_discovery_metadata",tb="invalid_authority_metadata",nb="untrusted_authority",Rf="missing_ssh_jwk",ib="missing_ssh_kid",ab="cannot_set_OIDCOptions",sb="cannot_allow_platform_broker",ob="authority_mismatch",rb="invalid_request_method_for_EAR";const CC="client_info_decoding_error",lb="client_info_empty_error",SC="token_parsing_error",cb="null_or_empty_token",ka="endpoints_resolution_error",ub="network_error",db="openid_config_error",hb="hash_not_deserialized",ll="invalid_state",fb="state_mismatch",uv="state_not_found",gb="nonce_mismatch",TC="auth_time_not_found",mb="max_age_transpired",pb="multiple_matching_appMetadata",yb="request_cannot_be_made",vb="cannot_remove_empty_scope",Cb="cannot_append_scopeset",dv="empty_input_scopeset",EC="no_account_in_silent_request",Sb="invalid_cache_record",AC="invalid_cache_environment",hv="no_account_found",bC="no_crypto_object",Cs="token_refresh_required",Tb="token_claims_cnf_required_for_signedjwt",Eb="authorization_code_missing_from_server_response",Ab="binding_key_not_removed",bb="end_session_endpoint_not_supported",wC="key_id_missing",Oe="method_not_implemented";class Ft{constructor(n){const a=n?zn.trimArrayEntries([...n]):[],o=a?zn.removeEmptyStringsFromArray(a):[];if(!o||!o.length)throw nt($A);this.scopes=new Set,o.forEach(r=>this.scopes.add(r))}static fromString(n){const o=(n||"").split(" ");return new Ft(o)}static createSearchScopes(n){const a=n&&n.length>0?n:[...Ho],o=new Ft(a);return o.containsOnlyOIDCScopes()?o.removeScope(Ef):o.removeOIDCScopes(),o}containsScope(n){const a=this.printScopesLowerCase().split(" "),o=new Ft(a);return n?o.scopes.has(n.toLowerCase()):!1}containsScopeSet(n){return!n||n.scopes.size<=0?!1:this.scopes.size>=n.scopes.size&&n.asArray().every(a=>this.containsScope(a))}containsOnlyOIDCScopes(){let n=0;return sv.forEach(a=>{this.containsScope(a)&&(n+=1)}),this.scopes.size===n}appendScope(n){n&&this.scopes.add(n.trim())}appendScopes(n){try{n.forEach(a=>this.appendScope(a))}catch{throw Q(Cb)}}removeScope(n){if(!n)throw Q(vb);this.scopes.delete(n.trim())}removeOIDCScopes(){sv.forEach(n=>{this.scopes.delete(n)})}unionScopeSets(n){if(!n)throw Q(dv);const a=new Set;return n.scopes.forEach(o=>a.add(o.toLowerCase())),this.scopes.forEach(o=>a.add(o.toLowerCase())),a}intersectingScopeSets(n){if(!n)throw Q(dv);n.containsOnlyOIDCScopes()||n.removeOIDCScopes();const a=this.unionScopeSets(n),o=n.getScopeCount(),r=this.getScopeCount();return a.size<r+o}getScopeCount(){return this.scopes.size}asArray(){const n=[];return this.scopes.forEach(a=>n.push(a)),n}printScopes(){return this.scopes?this.asArray().join(" "):""}printScopesLowerCase(){return this.printScopes().toLowerCase()}}function uu(l,n,a){if(!n)return;const o=l.get(Es);o&&l.has(Jc)&&a?.addFields({embeddedClientId:o,embeddedRedirectUri:l.get(fC)},n)}function Nf(l,n){l.set(fA,n)}function wb(l,n){l.set(gA,n||wf.QUERY)}function _b(l){l.set(KA,"1")}function Mf(l,n,a=!0,o=Ho){a&&!o.includes("openid")&&!n.includes("openid")&&o.push("openid");const r=a?[...n||[],...o]:n||[],d=new Ft(r);l.set(yA,d.printScopes())}function xf(l,n){l.set(Es,n)}function Df(l,n){l.set(fC,n)}function kb(l,n){l.set(jA,n)}function Ib(l,n){l.set(HA,n)}function Ob(l,n){l.set(FA,n)}function zc(l,n){l.set(VA,n)}function Zc(l,n){l.set($t.CCS_HEADER,`UPN:${n}`)}function nl(l,n){l.set($t.CCS_HEADER,`Oid:${n.uid}@${n.utid}`)}function fv(l,n){l.set(GA,n)}function Uf(l,n,a){const o=Ub(n,a);try{JSON.parse(o)}catch{throw nt(pC)}l.set(pA,o)}function fl(l,n){l.set(_A,n)}function jf(l,n){l.set(kA,n.sku),l.set(IA,n.version),n.os&&l.set(OA,n.os),n.cpu&&l.set(RA,n.cpu)}function Hf(l,n){n?.appName&&l.set(DA,n.appName),n?.appVersion&&l.set(UA,n.appVersion)}function Rb(l,n){l.set(TA,n)}function _C(l,n){n&&l.set(CA,n)}function Nb(l,n){l.set(SA,n)}function zf(l,n,a){if(n&&a)l.set(AA,n),l.set(bA,a);else throw nt(yC)}function Mb(l,n){l.set(EA,n)}function xb(l,n){l.set(vA,n)}function Db(l,n){l.set(wA,n)}function kC(l,n){l.set(zA,n)}function IC(l,n){n&&l.set(LA,n)}function OC(l,n){n&&l.set(BA,n)}function RC(l,n){l.set(mA,n)}function Lf(l){l.set(eA,"1")}function NC(l){l.has(of)||l.set(of,"true")}function yi(l,n){Object.entries(n).forEach(([a,o])=>{!l.has(a)&&o&&l.set(a,o)})}function Ub(l,n){let a;if(!l)a={};else try{a=JSON.parse(l)}catch{throw nt(pC)}return n&&n.length>0&&(a.hasOwnProperty(jc.ACCESS_TOKEN)||(a[jc.ACCESS_TOKEN]={}),a[jc.ACCESS_TOKEN][jc.XMS_CC]={values:n}),JSON.stringify(a)}function Bf(l,n){n&&(l.set(gC,Xe.POP),l.set(mC,n))}function MC(l,n){n&&(l.set(gC,Xe.SSH),l.set(mC,n))}function xC(l,n){l.set(NA,n.generateCurrentRequestHeaderValue()),l.set(MA,n.generateLastRequestHeaderValue())}function DC(l){l.set(xA,cA)}function jb(l,n){l.set(PA,n)}function du(l,n,a){l.has(Jc)||l.set(Jc,n),l.has(Xc)||l.set(Xc,a)}function Hb(l,n){l.set(QA,encodeURIComponent(n)),l.set(qA,"eyJhbGciOiJkaXIiLCJlbmMiOiJBMjU2R0NNIn0")}function gv(l){if(!l)return l;let n=l.toLowerCase();return zn.endsWith(n,"?")?n=n.slice(0,-1):zn.endsWith(n,"?/")&&(n=n.slice(0,-2)),zn.endsWith(n,"/")||(n+="/"),n}function UC(l){return l.startsWith("#/")?l.substring(2):l.startsWith("#")||l.startsWith("?")?l.substring(1):l}function $c(l){if(!l||l.indexOf("=")<0)return null;try{const n=UC(l),a=Object.fromEntries(new URLSearchParams(n));if(a.code||a.ear_jwe||a.error||a.error_description||a.state)return a}catch{throw Q(hb)}return null}function cl(l){const n=new Array;return l.forEach((a,o)=>{n.push(`${o}=${encodeURIComponent(a)}`)}),n.join("&")}function mv(l){if(!l)return l;const n=l.split("#")[0];try{const a=new URL(n),o=a.origin+a.pathname+a.search;return gv(o)}catch{return gv(n)}}const Wc={createNewGuid:()=>{throw Q(Oe)},base64Decode:()=>{throw Q(Oe)},base64Encode:()=>{throw Q(Oe)},base64UrlEncode:()=>{throw Q(Oe)},encodeKid:()=>{throw Q(Oe)},async getPublicKeyThumbprint(){throw Q(Oe)},async removeTokenBindingKey(){throw Q(Oe)},async clearKeystore(){throw Q(Oe)},async signJwt(){throw Q(Oe)},async hashString(){throw Q(Oe)}};var rt;(function(l){l[l.Error=0]="Error",l[l.Warning=1]="Warning",l[l.Info=2]="Info",l[l.Verbose=3]="Verbose",l[l.Trace=4]="Trace"})(rt||(rt={}));const zb=50,Lb=500,vs=new Map;function Bb(l,n){vs.delete(l),vs.set(l,n)}function Kb(l,n){const a=Date.now();let o=vs.get(l);if(o)Bb(l,o);else if(o={logs:[],firstEventTime:a},vs.set(l,o),vs.size>zb){const r=vs.keys().next().value;r&&vs.delete(r)}o.logs.push({...n,milliseconds:a-o.firstEventTime}),o.logs.length>Lb&&o.logs.shift()}function Pb(l){if(l.length!==6)return!1;for(let n=0;n<l.length;n++){const a=l[n];if(!(a>="a"&&a<="z"||a>="A"&&a<="Z"||a>="0"&&a<="9"))return!1}return!0}class vi{constructor(n,a,o){this.level=rt.Info;const r=()=>{},d=n||vi.createDefaultLoggerOptions();this.localCallback=d.loggerCallback||r,this.piiLoggingEnabled=d.piiLoggingEnabled||!1,this.level=typeof d.logLevel=="number"?d.logLevel:rt.Info,this.packageName=a||"",this.packageVersion=o||""}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:rt.Info}}clone(n,a){return new vi({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level},n,a)}logMessage(n,a){const o=a.correlationId;if(Pb(n)){const y={hash:n,level:a.logLevel,containsPii:a.containsPii||!1,milliseconds:0};Kb(o,y)}if(a.logLevel>this.level||!this.piiLoggingEnabled&&a.containsPii)return;const f=`${`[${new Date().toUTCString()}] : [${o}]`} : ${this.packageName}@${this.packageVersion} : ${rt[a.logLevel]} - ${n}`;this.executeCallback(a.logLevel,f,a.containsPii||!1)}executeCallback(n,a,o){this.localCallback&&this.localCallback(n,a,o)}error(n,a){this.logMessage(n,{logLevel:rt.Error,containsPii:!1,correlationId:a})}errorPii(n,a){this.logMessage(n,{logLevel:rt.Error,containsPii:!0,correlationId:a})}warning(n,a){this.logMessage(n,{logLevel:rt.Warning,containsPii:!1,correlationId:a})}warningPii(n,a){this.logMessage(n,{logLevel:rt.Warning,containsPii:!0,correlationId:a})}info(n,a){this.logMessage(n,{logLevel:rt.Info,containsPii:!1,correlationId:a})}infoPii(n,a){this.logMessage(n,{logLevel:rt.Info,containsPii:!0,correlationId:a})}verbose(n,a){this.logMessage(n,{logLevel:rt.Verbose,containsPii:!1,correlationId:a})}verbosePii(n,a){this.logMessage(n,{logLevel:rt.Verbose,containsPii:!0,correlationId:a})}trace(n,a){this.logMessage(n,{logLevel:rt.Trace,containsPii:!1,correlationId:a})}tracePii(n,a){this.logMessage(n,{logLevel:rt.Trace,containsPii:!0,correlationId:a})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}}const hu="@azure/msal-common",gl="16.1.0";const Kf={None:"none"};function pv(l,n){return!!l&&!!n&&l===n.split(".")[1]}function zo(l,n,a,o){if(o){const{oid:r,sub:d,tid:h,name:f,tfp:y,acr:p,preferred_username:S,upn:T,login_hint:k}=o,N=h||y||p||"";return{tenantId:N,localAccountId:r||d||"",name:f,username:S||T||"",loginHint:k,isHomeTenant:pv(N,l)}}else return{tenantId:a,localAccountId:n,username:"",isHomeTenant:pv(a,l)}}function Pf(l,n,a,o){let r=l;if(n){const{isHomeTenant:d,...h}=n;r={...l,...h}}if(a){const{isHomeTenant:d,...h}=zo(l.homeAccountId,l.localAccountId,l.tenantId,a);return r={...r,...h,idTokenClaims:a,idToken:o},r}return r}function Fi(l,n){const a=Gb(l);try{const o=n(a);return JSON.parse(o)}catch{throw Q(SC)}}function Ss(l){if(!l.signin_state)return!1;const n=["kmsi","dvc_dmjd"];return l.signin_state.some(a=>n.includes(a.trim().toLowerCase()))}function Gb(l){if(!l)throw Q(cb);const a=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(l);if(!a||a.length<4)throw Q(SC);return a[2]}function jC(l,n){if(n===0||Date.now()-3e5>l+n)throw Q(mb)}class Ve{get urlString(){return this._urlString}constructor(n){if(this._urlString=n,!this._urlString)throw nt(ZA);n.includes("#")||(this._urlString=Ve.canonicalizeUri(n))}static canonicalizeUri(n){if(n){let a=n.toLowerCase();return zn.endsWith(a,"?")?a=a.slice(0,-1):zn.endsWith(a,"?/")&&(a=a.slice(0,-2)),zn.endsWith(a,"/")||(a+="/"),a}return n}validateAsUri(){let n;try{n=this.getUrlComponents()}catch{throw nt(Hc)}if(!n.HostNameAndPort||!n.PathSegments)throw nt(Hc);if(!n.Protocol||n.Protocol.toLowerCase()!=="https:")throw nt(XA)}static appendQueryString(n,a){return a?n.indexOf("?")<0?`${n}?${a}`:`${n}&${a}`:n}static removeHashFromUrl(n){return Ve.canonicalizeUri(n.split("#")[0])}replaceTenantPath(n){const a=this.getUrlComponents(),o=a.PathSegments;return n&&o.length!==0&&(o[0]===Ma.COMMON||o[0]===Ma.ORGANIZATIONS)&&(o[0]=n),Ve.constructAuthorityUriFromObject(a)}getUrlComponents(){const n=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),a=this.urlString.match(n);if(!a)throw nt(Hc);const o={Protocol:a[1],HostNameAndPort:a[4],AbsolutePath:a[5],QueryString:a[7]};let r=o.AbsolutePath.split("/");return r=r.filter(d=>d&&d.length>0),o.PathSegments=r,o.QueryString&&o.QueryString.endsWith("/")&&(o.QueryString=o.QueryString.substring(0,o.QueryString.length-1)),o}static getDomainFromUrl(n){const a=RegExp("^([^:/?#]+://)?([^/?#]*)"),o=n.match(a);if(!o)throw nt(Hc);return o[2]}static getAbsoluteUrl(n,a){if(n[0]===nf){const r=new Ve(a).getUrlComponents();return r.Protocol+"//"+r.HostNameAndPort+n}return n}static constructAuthorityUriFromObject(n){return new Ve(n.Protocol+"//"+n.HostNameAndPort+"/"+n.PathSegments.join("/"))}}const Vb=[{host:"login.microsoftonline.com"},{host:"login.chinacloudapi.cn",issuerHost:"login.partner.microsoftonline.cn"},{host:"login.microsoftonline.us"},{host:"login.sovcloud-identity.fr"},{host:"login.sovcloud-identity.de"},{host:"login.sovcloud-identity.sg"}];function Fb(l,n){return{token_endpoint:`https://${l}/{tenantid}/oauth2/v2.0/token`,jwks_uri:`https://${l}/{tenantid}/discovery/v2.0/keys`,issuer:`https://${n}/{tenantid}/v2.0`,authorization_endpoint:`https://${l}/{tenantid}/oauth2/v2.0/authorize`,end_session_endpoint:`https://${l}/{tenantid}/oauth2/v2.0/logout`}}const Yb=Vb.reduce((l,{host:n,issuerHost:a})=>(l[n]=Fb(n,a||n),l),{}),HC={endpointMetadata:Yb,instanceDiscoveryMetadata:{metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]},{preferred_network:"login.sovcloud-identity.fr",preferred_cache:"login.sovcloud-identity.fr",aliases:["login.sovcloud-identity.fr"]},{preferred_network:"login.sovcloud-identity.de",preferred_cache:"login.sovcloud-identity.de",aliases:["login.sovcloud-identity.de"]},{preferred_network:"login.sovcloud-identity.sg",preferred_cache:"login.sovcloud-identity.sg",aliases:["login.sovcloud-identity.sg"]}]}},yv=HC.endpointMetadata,Gf=HC.instanceDiscoveryMetadata,zC=new Set;Gf.metadata.forEach(l=>{l.aliases.forEach(n=>{zC.add(n)})});function Qb(l,n,a){let o;const r=l.canonicalAuthority;if(r){const d=new Ve(r).getUrlComponents().HostNameAndPort;o=vv(n,a,d,l.cloudDiscoveryMetadata?.metadata)||vv(n,a,d,Gf.metadata)||l.knownAuthorities}return o||[]}function vv(l,n,a,o,r){if(l.trace("1bmquz",n),a&&o){const d=eu(o,a);if(d)return l.trace("1fotbt",n),d.aliases;l.trace("14avvj",n)}return null}function qb(l){return eu(Gf.metadata,l)}function eu(l,n){for(let a=0;a<l.length;a++){const o=l[a];if(o.aliases.includes(n))return o}return null}const lf="cache_quota_exceeded",Jb="cache_error_unknown";class Oo extends Error{constructor(n,a){const o=a||kf(n);super(o),Object.setPrototypeOf(this,Oo.prototype),this.name="CacheError",this.errorCode=n,this.errorMessage=o}}function cf(l){return l instanceof Error?l.name==="QuotaExceededError"||l.name==="NS_ERROR_DOM_QUOTA_REACHED"||l.message.includes("exceeded the quota")?new Oo(lf):new Oo(l.name,l.message):new Oo(Jb)}function tu(l,n){if(!l)throw Q(lb);try{const a=n(l);return JSON.parse(a)}catch{throw Q(CC)}}function Ro(l){if(!l)throw Q(CC);const n=l.split(af,2);return{uid:n[0],utid:n.length<2?"":n[1]}}const Jn={Default:0,Adfs:1,Dsts:2,Ciam:3};function Vf(l){return l&&(l.tid||l.tfp||l.acr)||null}const dn={AAD:"AAD",OIDC:"OIDC",EAR:"EAR"};function As(l){const n=l.tenantProfiles||[];return n.length===0&&l.realm&&l.localAccountId&&n.push(zo(l.homeAccountId,l.localAccountId,l.realm)),{homeAccountId:l.homeAccountId,environment:l.environment,tenantId:l.realm,username:l.username,localAccountId:l.localAccountId,loginHint:l.loginHint,name:l.name,nativeAccountId:l.nativeAccountId,authorityType:l.authorityType,tenantProfiles:new Map(n.map(a=>[a.tenantId,a])),dataBoundary:l.dataBoundary}}function Xb(l,n,a){let o;n.authorityType===Jn.Adfs?o=WE:n.protocolMode===dn.OIDC?o=lC:o=$E;let r,d;l.clientInfo&&a&&(r=tu(l.clientInfo,a),r.xms_tdbr&&(d=r.xms_tdbr==="EU"?"EU":"None"));const h=l.environment||n&&n.getPreferredCache();if(!h)throw Q(AC);const f=l.idTokenClaims?.preferred_username||l.idTokenClaims?.upn,y=l.idTokenClaims?.emails?l.idTokenClaims.emails[0]:null,p=f||y||"",S=l.idTokenClaims?.login_hint,T=r?.utid||Vf(l.idTokenClaims)||"",k=r?.uid||l.idTokenClaims?.oid||l.idTokenClaims?.sub||"";let N;return l.tenantProfiles?N=l.tenantProfiles:N=[zo(l.homeAccountId,k,T,l.idTokenClaims)],{homeAccountId:l.homeAccountId,environment:h,realm:T,localAccountId:k,username:p,authorityType:o,loginHint:S,clientInfo:l.clientInfo,name:l.idTokenClaims?.name||"",lastModificationTime:void 0,lastModificationApp:void 0,cloudGraphHostName:l.cloudGraphHostName,msGraphHost:l.msGraphHost,nativeAccountId:l.nativeAccountId,tenantProfiles:N,dataBoundary:d}}function Zb(l,n,a){const o=Array.from(l.tenantProfiles?.values()||[]);return o.length===0&&l.tenantId&&l.localAccountId&&o.push(zo(l.homeAccountId,l.localAccountId,l.tenantId,l.idTokenClaims)),{authorityType:l.authorityType||lC,homeAccountId:l.homeAccountId,localAccountId:l.localAccountId,nativeAccountId:l.nativeAccountId,realm:l.tenantId,environment:l.environment,username:l.username,loginHint:l.loginHint,name:l.name,cloudGraphHostName:n,msGraphHost:a,tenantProfiles:o,dataBoundary:l.dataBoundary}}function LC(l,n,a,o,r,d){if(!(n===Jn.Adfs||n===Jn.Dsts)){if(l)try{const h=tu(l,o.base64Decode);if(h.uid&&h.utid)return`${h.uid}.${h.utid}`}catch{}a.warning("1ub6wv",r)}return d?.sub||""}function $b(l){return l?l.hasOwnProperty("homeAccountId")&&l.hasOwnProperty("environment")&&l.hasOwnProperty("realm")&&l.hasOwnProperty("localAccountId")&&l.hasOwnProperty("username")&&l.hasOwnProperty("authorityType"):!1}class uf{constructor(n,a,o,r,d){this.clientId=n,this.cryptoImpl=a,this.commonLogger=o.clone(hu,gl),this.staticAuthorityOptions=d,this.performanceClient=r}getAllAccounts(n={},a){return this.buildTenantProfiles(this.getAccountsFilteredBy(n,a),a,n)}getAccountInfoFilteredBy(n,a){const o=this.getAllAccounts(n,a);return o.length>1?o.sort(d=>d.idTokenClaims?-1:1)[0]:o.length===1?o[0]:null}getBaseAccountInfo(n,a){const o=this.getAccountsFilteredBy(n,a);return o.length>0?As(o[0]):null}buildTenantProfiles(n,a,o){return n.flatMap(r=>this.getTenantProfilesFromAccountEntity(r,a,o?.tenantId,o))}getTenantedAccountInfoByFilter(n,a,o,r,d){let h=null,f;if(d&&!this.tenantProfileMatchesFilter(o,d))return null;const y=this.getIdToken(n,r,a,o.tenantId);return y&&(f=Fi(y.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(f,d))?null:(h=Pf(n,o,f,y?.secret),h)}getTenantProfilesFromAccountEntity(n,a,o,r){const d=As(n);let h=d.tenantProfiles||new Map;const f=this.getTokenKeys();if(o){const p=h.get(o);if(p)h=new Map([[o,p]]);else return[]}const y=[];return h.forEach(p=>{const S=this.getTenantedAccountInfoByFilter(d,f,p,a,r);S&&y.push(S)}),y}tenantProfileMatchesFilter(n,a){return!(a.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(n,a.localAccountId)||a.name&&n.name!==a.name||a.isHomeTenant!==void 0&&n.isHomeTenant!==a.isHomeTenant)}idTokenClaimsMatchTenantProfileFilter(n,a){return!(a&&(a.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(n,a.localAccountId)||a.loginHint&&!this.matchLoginHintFromTokenClaims(n,a.loginHint)||a.username&&!this.matchUsername(n.preferred_username,a.username)||a.name&&!this.matchName(n,a.name)||a.sid&&!this.matchSid(n,a.sid)))}async saveCacheRecord(n,a,o,r,d){if(!n)throw Q(Sb);try{n.account&&await this.setAccount(n.account,a,o,r),n.idToken&&d?.idToken!==!1&&await this.setIdTokenCredential(n.idToken,a,o),n.accessToken&&d?.accessToken!==!1&&await this.saveAccessToken(n.accessToken,a,o),n.refreshToken&&d?.refreshToken!==!1&&await this.setRefreshTokenCredential(n.refreshToken,a,o),n.appMetadata&&this.setAppMetadata(n.appMetadata,a)}catch(h){throw this.commonLogger?.error("0j476p",a),h instanceof tt?h:cf(h)}}async saveAccessToken(n,a,o){const r={clientId:n.clientId,credentialType:n.credentialType,environment:n.environment,homeAccountId:n.homeAccountId,realm:n.realm,tokenType:n.tokenType},d=this.getTokenKeys(),h=Ft.fromString(n.target);d.accessToken.forEach(f=>{if(!this.accessTokenKeyMatchesFilter(f,r,!1))return;const y=this.getAccessTokenCredential(f,a);y&&this.credentialMatchesFilter(y,r,a)&&Ft.fromString(y.target).intersectingScopeSets(h)&&this.removeAccessToken(f,a)}),await this.setAccessTokenCredential(n,a,o)}getAccountsFilteredBy(n,a){const o=this.getAccountKeys(),r=[];return o.forEach(d=>{const h=this.getAccount(d,a);if(!h||n.homeAccountId&&!this.matchHomeAccountId(h,n.homeAccountId)||n.username&&!this.matchUsername(h.username,n.username)||n.environment&&!this.matchEnvironment(h,n.environment,a)||n.realm&&!this.matchRealm(h,n.realm)||n.nativeAccountId&&!this.matchNativeAccountId(h,n.nativeAccountId)||n.authorityType&&!this.matchAuthorityType(h,n.authorityType))return;const f={localAccountId:n?.localAccountId,name:n?.name},y=h.tenantProfiles?.filter(p=>this.tenantProfileMatchesFilter(p,f));y&&y.length===0||r.push(h)}),r}credentialMatchesFilter(n,a,o){return!(a.clientId&&!this.matchClientId(n,a.clientId)||a.userAssertionHash&&!this.matchUserAssertionHash(n,a.userAssertionHash)||typeof a.homeAccountId=="string"&&!this.matchHomeAccountId(n,a.homeAccountId)||a.environment&&!this.matchEnvironment(n,a.environment,o)||a.realm&&!this.matchRealm(n,a.realm)||a.credentialType&&!this.matchCredentialType(n,a.credentialType)||a.familyId&&!this.matchFamilyId(n,a.familyId)||a.target&&!this.matchTarget(n,a.target)||n.credentialType===zt.ACCESS_TOKEN_WITH_AUTH_SCHEME&&(a.tokenType&&!this.matchTokenType(n,a.tokenType)||a.tokenType===Xe.SSH&&a.keyId&&!this.matchKeyId(n,a.keyId)))}getAppMetadataFilteredBy(n,a){const o=this.getKeys(),r={};return o.forEach(d=>{if(!this.isAppMetadata(d))return;const h=this.getAppMetadata(d,a);h&&(n.environment&&!this.matchEnvironment(h,n.environment,a)||n.clientId&&!this.matchClientId(h,n.clientId)||(r[d]=h))}),r}getAuthorityMetadataByAlias(n,a){const o=this.getAuthorityMetadataKeys();let r=null;return o.forEach(d=>{if(!this.isAuthorityMetadata(d)||d.indexOf(this.clientId)===-1)return;const h=this.getAuthorityMetadata(d,a);h&&h.aliases.indexOf(n)!==-1&&(r=h)}),r}removeAllAccounts(n){this.getAllAccounts({},n).forEach(o=>{this.removeAccount(o,n)})}removeAccount(n,a){this.removeAccountContext(n,a);const o=this.getAccountKeys(),r=d=>d.includes(n.homeAccountId)&&d.includes(n.environment);o.filter(r).forEach(d=>{this.removeItem(d,a),this.performanceClient.incrementFields({accountsRemoved:1},a)})}removeAccountContext(n,a){const o=this.getTokenKeys(),r=d=>d.includes(n.homeAccountId)&&d.includes(n.environment);o.idToken.filter(r).forEach(d=>{this.removeIdToken(d,a)}),o.accessToken.filter(r).forEach(d=>{this.removeAccessToken(d,a)}),o.refreshToken.filter(r).forEach(d=>{this.removeRefreshToken(d,a)})}removeAccessToken(n,a){const o=this.getAccessTokenCredential(n,a);if(o&&(this.removeItem(n,a),this.performanceClient.incrementFields({accessTokensRemoved:1},a),o.credentialType.toLowerCase()===zt.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()&&o.tokenType===Xe.POP)){const d=o.keyId;d&&this.cryptoImpl.removeTokenBindingKey(d,a).catch(()=>{this.commonLogger.error("0cx291",a),this.performanceClient?.incrementFields({removeTokenBindingKeyFailure:1},a)})}}removeAppMetadata(n){return this.getKeys().forEach(o=>{this.isAppMetadata(o)&&this.removeItem(o,n)}),!0}getIdToken(n,a,o,r){this.commonLogger.trace("1drz22",a);const d={homeAccountId:n.homeAccountId,environment:n.environment,credentialType:zt.ID_TOKEN,clientId:this.clientId,realm:r},h=this.getIdTokensByFilter(d,a,o),f=h.size;if(f<1)return this.commonLogger.info("1atvtd",a),null;if(f>1){let y=h;if(!r){const p=new Map;h.forEach((T,k)=>{T.realm===n.tenantId&&p.set(k,T)});const S=p.size;if(S<1)return this.commonLogger.info("0ooalx",a),h.values().next().value;if(S===1)return this.commonLogger.info("1eq2vc",a),p.values().next().value;y=p}return this.commonLogger.info("1ws328",a),y.forEach((p,S)=>{this.removeIdToken(S,a)}),this.performanceClient.addFields({multiMatchedID:h.size},a),null}return this.commonLogger.info("1sm769",a),h.values().next().value}getIdTokensByFilter(n,a,o){const r=o&&o.idToken||this.getTokenKeys().idToken,d=new Map;return r.forEach(h=>{if(!this.idTokenKeyMatchesFilter(h,{clientId:this.clientId,...n}))return;const f=this.getIdTokenCredential(h,a);f&&this.credentialMatchesFilter(f,n,a)&&d.set(h,f)}),d}idTokenKeyMatchesFilter(n,a){const o=n.toLowerCase();return!(a.clientId&&o.indexOf(a.clientId.toLowerCase())===-1||a.homeAccountId&&o.indexOf(a.homeAccountId.toLowerCase())===-1)}removeIdToken(n,a){this.removeItem(n,a)}removeRefreshToken(n,a){this.removeItem(n,a)}getAccessToken(n,a,o,r){const d=a.correlationId;this.commonLogger.trace("1t7hz1",d);const h=Ft.createSearchScopes(a.scopes),f=a.authenticationScheme||Xe.BEARER,y=f.toLowerCase()!==Xe.BEARER.toLowerCase()?zt.ACCESS_TOKEN_WITH_AUTH_SCHEME:zt.ACCESS_TOKEN,p={homeAccountId:n.homeAccountId,environment:n.environment,credentialType:y,clientId:this.clientId,realm:r||n.tenantId,target:h,tokenType:f,keyId:a.sshKid},S=o&&o.accessToken||this.getTokenKeys().accessToken,T=[];S.forEach(N=>{if(this.accessTokenKeyMatchesFilter(N,p,!0)){const F=this.getAccessTokenCredential(N,d);F&&this.credentialMatchesFilter(F,p,d)&&T.push(F)}});const k=T.length;return k<1?(this.commonLogger.info("1nckna",d),null):k>1?(this.commonLogger.info("1wkfwp",d),T.forEach(N=>{this.removeAccessToken(this.generateCredentialKey(N),d)}),this.performanceClient.addFields({multiMatchedAT:T.length},d),null):(this.commonLogger.info("06yt98",d),T[0])}accessTokenKeyMatchesFilter(n,a,o){const r=n.toLowerCase();if(a.clientId&&r.indexOf(a.clientId.toLowerCase())===-1||a.homeAccountId&&r.indexOf(a.homeAccountId.toLowerCase())===-1||a.realm&&r.indexOf(a.realm.toLowerCase())===-1)return!1;if(a.target){const d=a.target.asArray();for(let h=0;h<d.length;h++){if(o&&!r.includes(d[h].toLowerCase()))return!1;if(!o&&r.includes(d[h].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(n,a){const o=this.getTokenKeys(),r=[];return o.accessToken.forEach(d=>{if(!this.accessTokenKeyMatchesFilter(d,n,!0))return;const h=this.getAccessTokenCredential(d,a);h&&this.credentialMatchesFilter(h,n,a)&&r.push(h)}),r}getRefreshToken(n,a,o,r){this.commonLogger.trace("0x53vi",o);const d=a?qc:void 0,h={homeAccountId:n.homeAccountId,environment:n.environment,credentialType:zt.REFRESH_TOKEN,clientId:this.clientId,familyId:d},f=r&&r.refreshToken||this.getTokenKeys().refreshToken,y=[];f.forEach(S=>{if(this.refreshTokenKeyMatchesFilter(S,h)){const T=this.getRefreshTokenCredential(S,o);T&&this.credentialMatchesFilter(T,h,o)&&y.push(T)}});const p=y.length;return p<1?(this.commonLogger.info("0dlw11",o),null):(p>1&&this.performanceClient.addFields({multiMatchedRT:p},o),this.commonLogger.info("0wcnep",o),y[0])}refreshTokenKeyMatchesFilter(n,a){const o=n.toLowerCase();return!(a.familyId&&o.indexOf(a.familyId.toLowerCase())===-1||!a.familyId&&a.clientId&&o.indexOf(a.clientId.toLowerCase())===-1||a.homeAccountId&&o.indexOf(a.homeAccountId.toLowerCase())===-1)}readAppMetadataFromCache(n,a){const o={environment:n,clientId:this.clientId},r=this.getAppMetadataFilteredBy(o,a),d=Object.keys(r).map(f=>r[f]),h=d.length;if(h<1)return null;if(h>1)throw Q(pb);return d[0]}isAppMetadataFOCI(n,a){const o=this.readAppMetadataFromCache(n,a);return!!(o&&o.familyId===qc)}matchHomeAccountId(n,a){return typeof n.homeAccountId=="string"&&a===n.homeAccountId}matchLocalAccountIdFromTokenClaims(n,a){const o=n.oid||n.sub;return a===o}matchLocalAccountIdFromTenantProfile(n,a){return n.localAccountId===a}matchName(n,a){return a.toLowerCase()===n.name?.toLowerCase()}matchUsername(n,a){return!!(n&&typeof n=="string"&&a?.toLowerCase()===n.toLowerCase())}matchUserAssertionHash(n,a){return!!(n.userAssertionHash&&a===n.userAssertionHash)}matchEnvironment(n,a,o){if(this.staticAuthorityOptions){const d=Qb(this.staticAuthorityOptions,this.commonLogger,o);if(d.includes(a)&&d.includes(n.environment))return!0}const r=this.getAuthorityMetadataByAlias(a,o);return!!(r&&r.aliases.indexOf(n.environment)>-1)}matchCredentialType(n,a){return n.credentialType&&a.toLowerCase()===n.credentialType.toLowerCase()}matchClientId(n,a){return!!(n.clientId&&a===n.clientId)}matchFamilyId(n,a){return!!(n.familyId&&a===n.familyId)}matchRealm(n,a){return n.realm?.toLowerCase()===a.toLowerCase()}matchNativeAccountId(n,a){return!!(n.nativeAccountId&&a===n.nativeAccountId)}matchLoginHintFromTokenClaims(n,a){return n.login_hint===a||n.preferred_username===a||n.upn===a}matchSid(n,a){return n.sid===a}matchAuthorityType(n,a){return!!(n.authorityType&&a.toLowerCase()===n.authorityType.toLowerCase())}matchTarget(n,a){return n.credentialType!==zt.ACCESS_TOKEN&&n.credentialType!==zt.ACCESS_TOKEN_WITH_AUTH_SCHEME||!n.target?!1:Ft.fromString(n.target).containsScopeSet(a)}matchTokenType(n,a){return!!(n.tokenType&&n.tokenType===a)}matchKeyId(n,a){return!!(n.keyId&&n.keyId===a)}isAppMetadata(n){return n.indexOf(_f)!==-1}isAuthorityMetadata(n){return n.indexOf(sf)!==-1}generateAuthorityMetadataCacheKey(n){return`${sf}-${this.clientId}-${n}`}static toObject(n,a){for(const o in a)n[o]=a[o];return n}}class Wb extends uf{async setAccount(){throw Q(Oe)}getAccount(){throw Q(Oe)}async setIdTokenCredential(){throw Q(Oe)}getIdTokenCredential(){throw Q(Oe)}async setAccessTokenCredential(){throw Q(Oe)}getAccessTokenCredential(){throw Q(Oe)}async setRefreshTokenCredential(){throw Q(Oe)}getRefreshTokenCredential(){throw Q(Oe)}setAppMetadata(){throw Q(Oe)}getAppMetadata(){throw Q(Oe)}setServerTelemetry(){throw Q(Oe)}getServerTelemetry(){throw Q(Oe)}setAuthorityMetadata(){throw Q(Oe)}getAuthorityMetadata(){throw Q(Oe)}getAuthorityMetadataKeys(){throw Q(Oe)}setThrottlingCache(){throw Q(Oe)}getThrottlingCache(){throw Q(Oe)}removeItem(){throw Q(Oe)}getKeys(){throw Q(Oe)}getAccountKeys(){throw Q(Oe)}getTokenKeys(){throw Q(Oe)}generateCredentialKey(){throw Q(Oe)}generateAccountKey(){throw Q(Oe)}}const e0={InProgress:1};class BC{generateId(){return"callback-id"}startMeasurement(n,a){return{end:()=>null,discard:()=>{},add:()=>{},increment:()=>{},event:{eventId:this.generateId(),status:e0.InProgress,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:n,startTimeMs:Date.now(),correlationId:a||""}}}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}}const KC={tokenRenewalOffsetSeconds:hC,preventCorsPreflight:!1},t0={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:rt.Info,correlationId:""},n0={async sendGetRequestAsync(){throw Q(Oe)},async sendPostRequestAsync(){throw Q(Oe)}},i0={sku:DE,version:gl,cpu:"",os:""},a0={clientSecret:"",clientAssertion:void 0},s0={azureCloudInstance:Kf.None,tenant:`${aC}`},o0={application:{appName:"",appVersion:""}};function Ff({authOptions:l,systemOptions:n,loggerOptions:a,storageInterface:o,networkInterface:r,cryptoInterface:d,clientCredentials:h,libraryInfo:f,telemetry:y,serverTelemetryManager:p,persistencePlugin:S,serializableCache:T}){const k={...t0,...a};return{authOptions:r0(l),systemOptions:{...KC,...n},loggerOptions:k,storageInterface:o||new Wb(l.clientId,Wc,new vi(k),new BC),networkInterface:r||n0,cryptoInterface:d||Wc,clientCredentials:h||a0,libraryInfo:{...i0,...f},telemetry:{...o0,...y},serverTelemetryManager:p||null,persistencePlugin:S||null,serializableCache:T||null}}function r0(l){return{clientCapabilities:[],azureCloudOptions:s0,instanceAware:!1,...l}}function PC(l){return l.authOptions.authority.options.protocolMode===dn.OIDC}class Os extends tt{constructor(n,a,o,r,d){super(n,a,o),this.name="ServerError",this.errorNo=r,this.status=d,Object.setPrototypeOf(this,Os.prototype)}}const df="no_tokens_found",l0="native_account_unavailable",GC="refresh_token_expired",VC="ux_not_allowed",c0="interaction_required",u0="consent_required",d0="login_required",Yf="bad_token",h0="interrupted_user";const Cv=[c0,u0,d0,Yf,VC,h0],f0=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token","ux_not_allowed","interrupted_user"];class $n extends tt{constructor(n,a,o,r,d,h,f,y){super(n,a,o),Object.setPrototypeOf(this,$n.prototype),this.timestamp=r||"",this.traceId=d||"",this.correlationId=h||"",this.claims=f||"",this.name="InteractionRequiredAuthError",this.errorNo=y}}function FC(l,n,a){const o=!!l&&Cv.indexOf(l)>-1,r=!!a&&f0.indexOf(a)>-1,d=!!n&&Cv.some(h=>n.indexOf(h)>-1);return o||d||r}function nu(l,n){return new $n(l,n)}function g0(l,n,a){const o=m0(l,a);return n?`${o}${tf}${n}`:o}function m0(l,n){if(!l)throw Q(bC);const a={id:l.createNewGuid()};n&&(a.meta=n);const o=JSON.stringify(a);return l.base64Encode(o)}function ml(l,n){if(!l)throw Q(bC);if(!n)throw Q(ll);try{const a=n.split(tf),o=a[0],r=a.length>1?a.slice(1).join(tf):"",d=l(o),h=JSON.parse(d);return{userRequestState:r||"",libraryState:h}}catch{throw Q(ll)}}function Wn(){return Math.round(new Date().getTime()/1e3)}function Sv(l){return l.getTime()/1e3}function Gc(l){return l?new Date(Number(l)*1e3):new Date}function iu(l,n){const a=Number(l)||0;return Wn()+n>a}function Tv(l,n){const a=Number(l)+n*24*60*60*1e3;return Date.now()>a}function p0(l){return Number(l)>Wn()}const y0="networkClientSendPostRequestAsync",v0="refreshTokenClientExecutePostToTokenEndpoint",C0="authorizationCodeClientExecutePostToTokenEndpoint",S0="refreshTokenClientExecuteTokenRequest",T0="refreshTokenClientAcquireToken",Fh="refreshTokenClientAcquireTokenWithCachedRefreshToken",E0="refreshTokenClientCreateTokenRequestBody",A0="silentFlowClientGenerateResultFromCacheRecord",Qf="getAuthCodeUrl",YC="handleCodeResponseFromServer",b0="authClientExecuteTokenRequest",w0="authClientCreateTokenRequestBody",_0="updateTokenEndpointAuthority",pl="popTokenGenerateCnf",qf="handleServerTokenResponse",k0="authorityResolveEndpointsAsync",I0="authorityGetCloudDiscoveryMetadataFromNetwork",O0="authorityUpdateCloudDiscoveryMetadata",R0="authorityGetEndpointMetadataFromNetwork",N0="authorityUpdateEndpointMetadata",Ev="authorityUpdateMetadataWithRegionalInformation",M0="regionDiscoveryDetectRegion",Av="regionDiscoveryGetRegionFromIMDS",x0="regionDiscoveryGetCurrentVersion",D0="cacheManagerGetRefreshToken",U0="setUserData";const Zn=(l,n,a,o,r)=>(...d)=>{a.trace("1plfzx",r);const h=o.startMeasurement(n,r);if(r){const f=n+"CallCount";o.incrementFields({[f]:1},r)}try{const f=l(...d);return h.end({success:!0}),a.trace("1g8n6a",r),f}catch(f){a.trace("0cfd8i",r);try{a.trace(JSON.stringify(f),r)}catch{a.trace("00dty7",r)}throw h.end({success:!1},f),f}},K=(l,n,a,o,r)=>(...d)=>{a.trace("1plfzx",r);const h=o.startMeasurement(n,r);if(r){const f=n+"CallCount";o.incrementFields({[f]:1},r)}return l(...d).then(f=>(a.trace("1g8n6a",r),h.end({success:!0}),f)).catch(f=>{a.trace("0cfd8i",r);try{a.trace(JSON.stringify(f),r)}catch{a.trace("00dty7",r)}throw h.end({success:!1},f),f})};const j0={SW:"sw"};class Uo{constructor(n,a){this.cryptoUtils=n,this.performanceClient=a}async generateCnf(n,a){const o=await K(this.generateKid.bind(this),pl,a,this.performanceClient,n.correlationId)(n),r=this.cryptoUtils.base64UrlEncode(JSON.stringify(o));return{kid:o.kid,reqCnfString:r}}async generateKid(n){return{kid:await this.cryptoUtils.getPublicKeyThumbprint(n),xms_ksl:j0.SW}}async signPopToken(n,a,o){return this.signPayload(n,a,o)}async signPayload(n,a,o,r){const{resourceRequestMethod:d,resourceRequestUri:h,shrClaims:f,shrNonce:y,shrOptions:p}=o,T=(h?new Ve(h):void 0)?.getUrlComponents();return this.cryptoUtils.signJwt({at:n,ts:Wn(),m:d?.toUpperCase(),u:T?.HostNameAndPort,nonce:y||this.cryptoUtils.createNewGuid(),p:T?.AbsolutePath,q:T?.QueryString?[[],T.QueryString]:void 0,client_claims:f||void 0,...r},a,p,o.correlationId)}}class H0{constructor(n,a){this.cache=n,this.hasChanged=a}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}}function Jf(l,n,a,o,r){return{credentialType:zt.ID_TOKEN,homeAccountId:l,environment:n,clientId:o,secret:a,realm:r,lastUpdatedAt:Date.now().toString()}}function Xf(l,n,a,o,r,d,h,f,y,p,S,T,k){const N={homeAccountId:l,credentialType:zt.ACCESS_TOKEN,secret:a,cachedAt:Wn().toString(),expiresOn:h.toString(),extendedExpiresOn:f.toString(),environment:n,clientId:o,realm:r,target:d,tokenType:S||Xe.BEARER,lastUpdatedAt:Date.now().toString()};if(T&&(N.userAssertionHash=T),p&&(N.refreshOn=p.toString()),N.tokenType?.toLowerCase()!==Xe.BEARER.toLowerCase())switch(N.credentialType=zt.ACCESS_TOKEN_WITH_AUTH_SCHEME,N.tokenType){case Xe.POP:const F=Fi(a,y);if(!F?.cnf?.kid)throw Q(Tb);N.keyId=F.cnf.kid;break;case Xe.SSH:N.keyId=k}return N}function z0(l,n,a,o,r,d,h){const f={credentialType:zt.REFRESH_TOKEN,homeAccountId:l,environment:n,clientId:o,secret:a,lastUpdatedAt:Date.now().toString()};return d&&(f.userAssertionHash=d),r&&(f.familyId=r),h&&(f.expiresOn=h.toString()),f}function fu(l){return l.hasOwnProperty("homeAccountId")&&l.hasOwnProperty("environment")&&l.hasOwnProperty("credentialType")&&l.hasOwnProperty("clientId")&&l.hasOwnProperty("secret")}function bv(l){return l?fu(l)&&l.hasOwnProperty("realm")&&l.hasOwnProperty("target")&&(l.credentialType===zt.ACCESS_TOKEN||l.credentialType===zt.ACCESS_TOKEN_WITH_AUTH_SCHEME):!1}function L0(l){return l?fu(l)&&l.hasOwnProperty("realm")&&l.credentialType===zt.ID_TOKEN:!1}function wv(l){return l?fu(l)&&l.credentialType===zt.REFRESH_TOKEN:!1}function B0(l,n){const a=l.indexOf(uC)===0;let o=!0;return n&&(o=n.hasOwnProperty("failedRequests")&&n.hasOwnProperty("errors")&&n.hasOwnProperty("cacheHits")),a&&o}function K0(l,n){let a=!1;l&&(a=l.indexOf(dC)===0);let o=!0;return n&&(o=n.hasOwnProperty("throttleTime")),a&&o}function P0({environment:l,clientId:n}){return[_f,l,n].join(cC).toLowerCase()}function G0(l,n){return n?l.indexOf(_f)===0&&n.hasOwnProperty("clientId")&&n.hasOwnProperty("environment"):!1}function V0(l,n){return n?l.indexOf(sf)===0&&n.hasOwnProperty("aliases")&&n.hasOwnProperty("preferred_cache")&&n.hasOwnProperty("preferred_network")&&n.hasOwnProperty("canonical_authority")&&n.hasOwnProperty("authorization_endpoint")&&n.hasOwnProperty("token_endpoint")&&n.hasOwnProperty("issuer")&&n.hasOwnProperty("aliasesFromNetwork")&&n.hasOwnProperty("endpointsFromNetwork")&&n.hasOwnProperty("expiresAt")&&n.hasOwnProperty("jwks_uri"):!1}function _v(){return Wn()+tA}function Lc(l,n,a){l.authorization_endpoint=n.authorization_endpoint,l.token_endpoint=n.token_endpoint,l.end_session_endpoint=n.end_session_endpoint,l.issuer=n.issuer,l.endpointsFromNetwork=a,l.jwks_uri=n.jwks_uri}function Yh(l,n,a){l.aliases=n.aliases,l.preferred_cache=n.preferred_cache,l.preferred_network=n.preferred_network,l.aliasesFromNetwork=a}function kv(l){return l.expiresAt<=Wn()}class bs{constructor(n,a,o,r,d,h,f){this.clientId=n,this.cacheStorage=a,this.cryptoObj=o,this.logger=r,this.performanceClient=d,this.serializableCache=h,this.persistencePlugin=f}validateTokenResponse(n,a,o){if(n.error||n.error_description||n.suberror){const r=`Error(s): ${n.error_codes||Zr} - Timestamp: ${n.timestamp||Zr} - Description: ${n.error_description||Zr} - Correlation ID: ${n.correlation_id||Zr} - Trace ID: ${n.trace_id||Zr}`,d=n.error_codes?.length?n.error_codes[0]:void 0,h=new Os(n.error,r,n.suberror,d,n.status);if(o&&n.status&&n.status>=XE&&n.status<=ZE){this.logger.warning("16ks7j",a);return}else if(o&&n.status&&n.status>=qE&&n.status<=JE){this.logger.warning("0g61x3",a);return}throw FC(n.error,n.error_description,n.suberror)?new $n(n.error,n.error_description,n.suberror,n.timestamp||"",n.trace_id||"",n.correlation_id||"",n.claims||"",d):h}}async handleServerTokenResponse(n,a,o,r,d,h,f,y,p,S){let T;if(n.id_token){if(T=Fi(n.id_token||"",this.cryptoObj.base64Decode),h&&h.nonce&&T.nonce!==h.nonce)throw Q(gb);if(r.maxAge||r.maxAge===0){const Y=T.auth_time;if(!Y)throw Q(TC);jC(Y,r.maxAge)}}this.homeAccountIdentifier=LC(n.client_info||"",a.authorityType,this.logger,this.cryptoObj,r.correlationId,T);let k;h&&h.state&&(k=ml(this.cryptoObj.base64Decode,h.state)),n.key_id=n.key_id||r.sshKid||void 0;const N=this.generateCacheRecord(n,a,o,r,T,f,h);let F;try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("0jbz5k",r.correlationId),F=new H0(this.serializableCache,!0),await this.persistencePlugin.beforeCacheAccess(F)),y&&!p&&N.account&&this.cacheStorage.getAllAccounts({homeAccountId:N.account.homeAccountId,environment:N.account.environment},r.correlationId).length<1)return this.logger.warning("1gmt66",r.correlationId),this.performanceClient?.addFields({acntLoggedOut:!0},r.correlationId),await bs.generateAuthenticationResult(this.cryptoObj,a,N,!1,r,this.performanceClient,T,k,void 0,S);await this.cacheStorage.saveCacheRecord(N,r.correlationId,Ss(T||{}),d,r.storeInCache)}finally{this.persistencePlugin&&this.serializableCache&&F&&(this.logger.verbose("1bh17u",r.correlationId),await this.persistencePlugin.afterCacheAccess(F))}return bs.generateAuthenticationResult(this.cryptoObj,a,N,!1,r,this.performanceClient,T,k,n,S)}generateCacheRecord(n,a,o,r,d,h,f){const y=a.getPreferredCache();if(!y)throw Q(AC);const p=Vf(d);let S,T;n.id_token&&d&&(S=Jf(this.homeAccountIdentifier,y,n.id_token,this.clientId,p||""),T=QC(this.cacheStorage,a,this.homeAccountIdentifier,this.cryptoObj.base64Decode,r.correlationId,d,n.client_info,y,p,f,void 0,this.logger));let k=null;if(n.access_token){const Y=n.scope?Ft.fromString(n.scope):new Ft(r.scopes||[]),pe=(typeof n.expires_in=="string"?parseInt(n.expires_in,10):n.expires_in)||0,Z=(typeof n.ext_expires_in=="string"?parseInt(n.ext_expires_in,10):n.ext_expires_in)||0,ue=(typeof n.refresh_in=="string"?parseInt(n.refresh_in,10):n.refresh_in)||void 0,ie=o+pe,fe=ie+Z,W=ue&&ue>0?o+ue:void 0;k=Xf(this.homeAccountIdentifier,y,n.access_token,this.clientId,p||a.tenant||"",Y.printScopes(),ie,fe,this.cryptoObj.base64Decode,W,n.token_type,h,n.key_id)}let N=null;if(n.refresh_token){let Y;if(n.refresh_token_expires_in){const pe=typeof n.refresh_token_expires_in=="string"?parseInt(n.refresh_token_expires_in,10):n.refresh_token_expires_in;Y=o+pe,this.performanceClient?.addFields({ntwkRtExpiresOnSeconds:Y},r.correlationId)}N=z0(this.homeAccountIdentifier,y,n.refresh_token,this.clientId,n.foci,h,Y)}let F=null;return n.foci&&(F={clientId:this.clientId,environment:y,familyId:n.foci}),{account:T,idToken:S,accessToken:k,refreshToken:N,appMetadata:F}}static async generateAuthenticationResult(n,a,o,r,d,h,f,y,p,S){let T="",k=[],N=null,F,Y,pe="";if(o.accessToken){if(o.accessToken.tokenType===Xe.POP&&!d.popKid){const fe=new Uo(n,h),{secret:W,keyId:ee}=o.accessToken;if(!ee)throw Q(wC);T=await fe.signPopToken(W,ee,d)}else T=o.accessToken.secret;k=Ft.fromString(o.accessToken.target).asArray(),N=Gc(o.accessToken.expiresOn),F=Gc(o.accessToken.extendedExpiresOn),o.accessToken.refreshOn&&(Y=Gc(o.accessToken.refreshOn))}o.appMetadata&&(pe=o.appMetadata.familyId===qc?qc:"");const Z=f?.oid||f?.sub||"",ue=f?.tid||"";p?.spa_accountid&&o.account&&(o.account.nativeAccountId=p?.spa_accountid);const ie=o.account?Pf(As(o.account),void 0,f,o.idToken?.secret):null;return{authority:a.canonicalAuthority,uniqueId:Z,tenantId:ue,scopes:k,account:ie,idToken:o?.idToken?.secret||"",idTokenClaims:f||{},accessToken:T,fromCache:r,expiresOn:N,extExpiresOn:F,refreshOn:Y,correlationId:d.correlationId,requestId:S||"",familyId:pe,tokenType:o.accessToken?.tokenType||"",state:y?y.userRequestState:"",cloudGraphHostName:o.account?.cloudGraphHostName||"",msGraphHost:o.account?.msGraphHost||"",code:p?.spa_code,fromPlatformBroker:!1}}}function QC(l,n,a,o,r,d,h,f,y,p,S,T){T?.verbose("09jz0t",r);const N=l.getAccountKeys().find(ue=>ue.startsWith(a));let F=null;N&&(F=l.getAccount(N,r));const Y=F||Xb({homeAccountId:a,idTokenClaims:d,clientInfo:h,environment:f,cloudGraphHostName:p?.cloud_graph_host_name,msGraphHost:p?.msgraph_host,nativeAccountId:S},n,o),pe=Y.tenantProfiles||[],Z=y||Y.realm;if(Z&&!pe.find(ue=>ue.tenantId===Z)){const ue=zo(a,Y.localAccountId,Z,d);pe.push(ue)}return Y.tenantProfiles=pe,Y}const Xn={HOME_ACCOUNT_ID:"home_account_id",UPN:"UPN"};async function qC(l,n,a){return typeof l=="string"?l:l({clientId:n,tokenEndpoint:a})}function gu(l,n,a){return{clientId:l,authority:n.authority,scopes:n.scopes,homeAccountIdentifier:a,claims:n.claims,authenticationScheme:n.authenticationScheme,resourceRequestMethod:n.resourceRequestMethod,resourceRequestUri:n.resourceRequestUri,shrClaims:n.shrClaims,sshKid:n.sshKid,embeddedClientId:n.embeddedClientId||n.extraParameters?.clientId}}class mi{static generateThrottlingStorageKey(n){return`${dC}.${JSON.stringify(n)}`}static preProcess(n,a,o){const r=mi.generateThrottlingStorageKey(a),d=n.getThrottlingCache(r,o);if(d){if(d.throttleTime<Date.now()){n.removeItem(r,o);return}throw new Os(d.errorCodes?.join(" ")||"",d.errorMessage,d.subError)}}static postProcess(n,a,o,r){if(mi.checkResponseStatus(o)||mi.checkResponseForRetryAfter(o)){const d={throttleTime:mi.calculateThrottleTime(parseInt(o.headers[$t.RETRY_AFTER])),error:o.body.error,errorCodes:o.body.error_codes,errorMessage:o.body.error_description,subError:o.body.suberror};n.setThrottlingCache(mi.generateThrottlingStorageKey(a),d,r)}}static checkResponseStatus(n){return n.status===429||n.status>=500&&n.status<600}static checkResponseForRetryAfter(n){return n.headers?n.headers.hasOwnProperty($t.RETRY_AFTER)&&(n.status<200||n.status>=300):!1}static calculateThrottleTime(n){const a=n<=0?0:n,o=Date.now()/1e3;return Math.floor(Math.min(o+(a||rA),o+lA)*1e3)}static removeThrottle(n,a,o,r){const d=gu(a,o,r),h=this.generateThrottlingStorageKey(d);n.removeItem(h,o.correlationId)}}class mu extends tt{constructor(n,a,o){super(n.errorCode,n.errorMessage,n.subError),Object.setPrototypeOf(this,mu.prototype),this.name="NetworkError",this.error=n,this.httpStatus=a,this.responseHeaders=o}}function tl(l,n,a,o){return l.errorMessage=`${l.errorMessage}, additionalErrorInfo: error.name:${o?.name}, error.message:${o?.message}`,new mu(l,n,a)}function JC(l,n,a){const o={};if(o[$t.CONTENT_TYPE]=KE,!n&&a)switch(a.type){case Xn.HOME_ACCOUNT_ID:try{const r=Ro(a.credential);o[$t.CCS_HEADER]=`Oid:${r.uid}@${r.utid}`}catch{l.verbose("1qhtee","")}break;case Xn.UPN:o[$t.CCS_HEADER]=`UPN: ${a.credential}`;break}return o}function XC(l,n,a,o){const r=new Map;return l.embeddedClientId&&du(r,n,a),l.extraQueryParameters&&yi(r,l.extraQueryParameters),fl(r,l.correlationId),uu(r,l.correlationId,o),cl(r)}async function ZC(l,n,a,o,r,d,h,f,y,p){const S=await F0(o,l,{body:n,headers:a},r,d,h,f,y);return p&&S.status<500&&S.status!==429&&p.clearTelemetryCache(),S}async function F0(l,n,a,o,r,d,h,f){mi.preProcess(r,l,o);let y;try{y=await K(d.sendPostRequestAsync.bind(d),y0,h,f,o)(n,a);const p=y.headers||{};f?.addFields({refreshTokenSize:y.body.refresh_token?.length||0,httpVerToken:p[$t.X_MS_HTTP_VERSION]||"",requestId:p[$t.X_MS_REQUEST_ID]||""},o)}catch(p){if(p instanceof mu){const S=p.responseHeaders;throw S&&f?.addFields({httpVerToken:S[$t.X_MS_HTTP_VERSION]||"",requestId:S[$t.X_MS_REQUEST_ID]||"",contentTypeHeader:S[$t.CONTENT_TYPE]||void 0,contentLengthHeader:S[$t.CONTENT_LENGTH]||void 0,httpStatus:p.httpStatus},o),p.error}throw p instanceof tt?p:Q(ub)}return mi.postProcess(r,l,y,o),y}function Y0(l){return l.hasOwnProperty("authorization_endpoint")&&l.hasOwnProperty("token_endpoint")&&l.hasOwnProperty("issuer")&&l.hasOwnProperty("jwks_uri")}function Q0(l){return l.hasOwnProperty("tenant_discovery_endpoint")&&l.hasOwnProperty("metadata")}function q0(l){return l.hasOwnProperty("error")&&l.hasOwnProperty("error_description")}class pu{constructor(n,a,o,r){this.networkInterface=n,this.logger=a,this.performanceClient=o,this.correlationId=r}async detectRegion(n,a){let o=n;if(o)a.region_source=wo.ENVIRONMENT_VARIABLE;else{const r=pu.IMDS_OPTIONS;try{const d=await K(this.getRegionFromIMDS.bind(this),Av,this.logger,this.performanceClient,this.correlationId)(PE,r);if(d.status===iv&&(o=d.body,a.region_source=wo.IMDS),d.status===av){const h=await K(this.getCurrentVersion.bind(this),x0,this.logger,this.performanceClient,this.correlationId)(r);if(!h)return a.region_source=wo.FAILED_AUTO_DETECTION,null;const f=await K(this.getRegionFromIMDS.bind(this),Av,this.logger,this.performanceClient,this.correlationId)(h,r);f.status===iv&&(o=f.body,a.region_source=wo.IMDS)}}catch{return a.region_source=wo.FAILED_AUTO_DETECTION,null}}return o||(a.region_source=wo.FAILED_AUTO_DETECTION),o||null}async getRegionFromIMDS(n,a){return this.networkInterface.sendGetRequestAsync(`${tv}?api-version=${n}&format=text`,a,GE)}async getCurrentVersion(n){try{const a=await this.networkInterface.sendGetRequestAsync(`${tv}?format=json`,n);return a.status===av&&a.body&&a.body["newest-versions"]&&a.body["newest-versions"].length>0?a.body["newest-versions"][0]:null}catch{return null}}}pu.IMDS_OPTIONS={headers:{Metadata:"true"}};class ln{constructor(n,a,o,r,d,h,f,y){this.canonicalAuthority=n,this._canonicalAuthority.validateAsUri(),this.networkInterface=a,this.cacheManager=o,this.authorityOptions=r,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=d,this.performanceClient=f,this.correlationId=h,this.managedIdentity=y||!1,this.regionDiscovery=new pu(a,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(n){if(n.HostNameAndPort.endsWith(ev))return Jn.Ciam;const a=n.PathSegments;if(a.length)switch(a[0].toLowerCase()){case jE:return Jn.Adfs;case HE:return Jn.Dsts}return Jn.Default}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(n){this._canonicalAuthority=new Ve(n),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw Q(ka)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw Q(ka)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw Q(ka)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw Q(bb);return this.replacePath(this.metadata.end_session_endpoint)}else throw Q(ka)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw Q(ka)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw Q(ka)}canReplaceTenant(n){return n.PathSegments.length===1&&!ln.reservedTenantDomains.has(n.PathSegments[0])&&this.getAuthorityType(n)===Jn.Default&&this.protocolMode!==dn.OIDC}replaceTenant(n){return n.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(n){let a=n;const r=new Ve(this.metadata.canonical_authority).getUrlComponents(),d=r.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((f,y)=>{let p=d[y];if(y===0&&this.canReplaceTenant(r)){const S=new Ve(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];p!==S&&(this.logger.verbose("1q3g2x",this.correlationId),p=S)}f!==p&&(a=a.replace(`/${p}/`,`/${f}/`))}),this.replaceTenant(a)}get defaultOpenIdConfigurationEndpoint(){const n=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||this.authorityType===Jn.Adfs||this.protocolMode===dn.OIDC&&!this.isAliasOfKnownMicrosoftAuthority(n)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}async resolveEndpointsAsync(){const n=this.getCurrentMetadataEntity(),a=await K(this.updateCloudDiscoveryMetadata.bind(this),O0,this.logger,this.performanceClient,this.correlationId)(n);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,n.preferred_network);const o=await K(this.updateEndpointMetadata.bind(this),N0,this.logger,this.performanceClient,this.correlationId)(n);this.updateCachedMetadata(n,a,{source:o}),this.performanceClient?.addFields({cloudDiscoverySource:a,authorityEndpointSource:o},this.correlationId)}getCurrentMetadataEntity(){let n=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort,this.correlationId);return n||(n={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:_v(),jwks_uri:""}),n}updateCachedMetadata(n,a,o){a!==Qn.CACHE&&o?.source!==Qn.CACHE&&(n.expiresAt=_v(),n.canonical_authority=this.canonicalAuthority);const r=this.cacheManager.generateAuthorityMetadataCacheKey(n.preferred_cache,this.correlationId);this.cacheManager.setAuthorityMetadata(r,n,this.correlationId),this.metadata=n}async updateEndpointMetadata(n){const a=this.updateEndpointMetadataFromLocalSources(n);if(a){if(a.source===Qn.HARDCODED_VALUES&&this.authorityOptions.azureRegionConfiguration?.azureRegion&&a.metadata){const r=await K(this.updateMetadataWithRegionalInformation.bind(this),Ev,this.logger,this.performanceClient,this.correlationId)(a.metadata);Lc(n,r,!1),n.canonical_authority=this.canonicalAuthority}return a.source}let o=await K(this.getEndpointMetadataFromNetwork.bind(this),R0,this.logger,this.performanceClient,this.correlationId)();if(o)return this.authorityOptions.azureRegionConfiguration?.azureRegion&&(o=await K(this.updateMetadataWithRegionalInformation.bind(this),Ev,this.logger,this.performanceClient,this.correlationId)(o)),Lc(n,o,!0),Qn.NETWORK;throw Q(db,this.defaultOpenIdConfigurationEndpoint)}updateEndpointMetadataFromLocalSources(n){this.logger.verbose("1fi0kc",this.correlationId);const a=this.getEndpointMetadataFromConfig();if(a)return this.logger.verbose("06t0uj",this.correlationId),Lc(n,a,!1),{source:Qn.CONFIG};this.logger.verbose("151k0p",this.correlationId);const o=this.getEndpointMetadataFromHardcodedValues();if(o)return Lc(n,o,!1),{source:Qn.HARDCODED_VALUES,metadata:o};this.logger.verbose("1imop5",this.correlationId);const r=kv(n);return this.isAuthoritySameType(n)&&n.endpointsFromNetwork&&!r?(this.logger.verbose("16uq31",""),{source:Qn.CACHE}):(r&&this.logger.verbose("0uoibc",""),null)}isAuthoritySameType(n){return new Ve(n.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch{throw nt(tb)}return null}async getEndpointMetadataFromNetwork(){const n={},a=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose("1y65x6",this.correlationId);try{const o=await this.networkInterface.sendGetRequestAsync(a,n);return Y0(o.body)?o.body:(this.logger.verbose("1koyv8",this.correlationId),null)}catch{return this.logger.verbose("0a9wik",this.correlationId),null}}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in yv?yv[this.hostnameAndPort]:null}async updateMetadataWithRegionalInformation(n){const a=this.authorityOptions.azureRegionConfiguration?.azureRegion;if(a){if(a!==VE)return this.regionDiscoveryMetadata.region_outcome=Vh.CONFIGURED_NO_AUTO_DETECTION,this.regionDiscoveryMetadata.region_used=a,ln.replaceWithRegionalInformation(n,a);const o=await K(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),M0,this.logger,this.performanceClient,this.correlationId)(this.authorityOptions.azureRegionConfiguration?.environmentRegion,this.regionDiscoveryMetadata);if(o)return this.regionDiscoveryMetadata.region_outcome=Vh.AUTO_DETECTION_REQUESTED_SUCCESSFUL,this.regionDiscoveryMetadata.region_used=o,ln.replaceWithRegionalInformation(n,o);this.regionDiscoveryMetadata.region_outcome=Vh.AUTO_DETECTION_REQUESTED_FAILED}return n}async updateCloudDiscoveryMetadata(n){const a=this.updateCloudDiscoveryMetadataFromLocalSources(n);if(a)return a;const o=await K(this.getCloudDiscoveryMetadataFromNetwork.bind(this),I0,this.logger,this.performanceClient,this.correlationId)();if(o)return Yh(n,o,!0),Qn.NETWORK;throw nt(nb)}updateCloudDiscoveryMetadataFromLocalSources(n){this.logger.verbose("0jhlgt",this.correlationId),this.logger.verbosePii("1fy7uz",this.correlationId),this.logger.verbosePii("08zabj",this.correlationId),this.logger.verbosePii("1o1kv3",this.correlationId);const a=this.getCloudDiscoveryMetadataFromConfig();if(a)return this.logger.verbose("1nakio",this.correlationId),Yh(n,a,!1),Qn.CONFIG;this.logger.verbose("1x74aj",this.correlationId);const o=qb(this.hostnameAndPort);if(o)return this.logger.verbose("0by47c",this.correlationId),Yh(n,o,!1),Qn.HARDCODED_VALUES;this.logger.verbose("0r2fzy",this.correlationId);const r=kv(n);return this.isAuthoritySameType(n)&&n.aliasesFromNetwork&&!r?(this.logger.verbose("1uffgh",""),Qn.CACHE):(r&&this.logger.verbose("0uoibc",""),null)}getCloudDiscoveryMetadataFromConfig(){if(this.authorityType===Jn.Ciam)return this.logger.verbose("04y84h",this.correlationId),ln.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("0gszr3",this.correlationId);try{this.logger.verbose("1iifkx",this.correlationId);const n=JSON.parse(this.authorityOptions.cloudDiscoveryMetadata),a=eu(n.metadata,this.hostnameAndPort);if(this.logger.verbose("0q67e3",""),a)return this.logger.verbose("0hzfao",this.correlationId),a;this.logger.verbose("1ajz3u",this.correlationId)}catch{throw this.logger.verbose("1wq5tu",this.correlationId),nt(vC)}}return this.isInKnownAuthorities()?(this.logger.verbose("0mt9al",this.correlationId),ln.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}async getCloudDiscoveryMetadataFromNetwork(){const n=`${zE}${this.canonicalAuthority}oauth2/v2.0/authorize`,a={};let o=null;try{const r=await this.networkInterface.sendGetRequestAsync(n,a);let d,h;if(Q0(r.body))d=r.body,h=d.metadata,this.logger.verbosePii("1vglyt",this.correlationId);else if(q0(r.body)){if(this.logger.warning("062uto",this.correlationId),d=r.body,d.error===QE)return this.logger.error("1x90tm",this.correlationId),null;this.logger.warning("0wchdm",this.correlationId),this.logger.warning("1s5mpv",this.correlationId),this.logger.warning("1yhqpw",this.correlationId),h=[]}else return this.logger.error("0768g0",this.correlationId),null;this.logger.verbose("1lrobr",this.correlationId),o=eu(h,this.hostnameAndPort)}catch(r){return r instanceof tt?this.logger.error("0vwhc7",this.correlationId):this.logger.error("0s2z41",this.correlationId),null}return o||(this.logger.warning("0jp28q",this.correlationId),this.logger.verbose("130sd8",this.correlationId),o=ln.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),o}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(a=>a&&Ve.getDomainFromUrl(a).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(n,a){let o;if(a&&a.azureCloudInstance!==Kf.None){const r=a.tenant?a.tenant:aC;o=`${a.azureCloudInstance}/${r}/`}return o||n}static createCloudDiscoveryMetadataFromHost(n){return{preferred_network:n,preferred_cache:n,aliases:[n]}}getPreferredCache(){if(this.managedIdentity)return UE;if(this.discoveryComplete())return this.metadata.preferred_cache;throw Q(ka)}isAlias(n){return this.metadata.aliases.indexOf(n)>-1}isAliasOfKnownMicrosoftAuthority(n){return zC.has(n)}static isPublicCloudAuthority(n){return YE.indexOf(n)>=0}static buildRegionalAuthorityString(n,a,o){const r=new Ve(n);r.validateAsUri();const d=r.getUrlComponents();let h=`${a}.${d.HostNameAndPort}`;this.isPublicCloudAuthority(d.HostNameAndPort)&&(h=`${a}.${FE}`);const f=Ve.constructAuthorityUriFromObject({...r.getUrlComponents(),HostNameAndPort:h}).urlString;return o?`${f}?${o}`:f}static replaceWithRegionalInformation(n,a){const o={...n};return o.authorization_endpoint=ln.buildRegionalAuthorityString(o.authorization_endpoint,a),o.token_endpoint=ln.buildRegionalAuthorityString(o.token_endpoint,a),o.end_session_endpoint&&(o.end_session_endpoint=ln.buildRegionalAuthorityString(o.end_session_endpoint,a)),o}static transformCIAMAuthority(n){let a=n;const r=new Ve(n).getUrlComponents();if(r.PathSegments.length===0&&r.HostNameAndPort.endsWith(ev)){const d=r.HostNameAndPort.split(".")[0];a=`${a}${d}${LE}`}return a}}ln.reservedTenantDomains=new Set(["{tenant}","{tenantid}",Ma.COMMON,Ma.CONSUMERS,Ma.ORGANIZATIONS]);function J0(l){const o=new Ve(l).getUrlComponents().PathSegments.slice(-1)[0]?.toLowerCase();switch(o){case Ma.COMMON:case Ma.ORGANIZATIONS:case Ma.CONSUMERS:return;default:return o}}function $C(l){return l.endsWith(nf)?l:`${l}${nf}`}function X0(l){const n=l.cloudDiscoveryMetadata;let a;if(n)try{a=JSON.parse(n)}catch{throw nt(vC)}return{canonicalAuthority:l.authority?$C(l.authority):void 0,knownAuthorities:l.knownAuthorities,cloudDiscoveryMetadata:a}}async function WC(l,n,a,o,r,d,h){const f=ln.transformCIAMAuthority($C(l)),y=new ln(f,n,a,o,r,d,h);try{return await K(y.resolveEndpointsAsync.bind(y),k0,r,h,d)(),y}catch{throw Q(ka)}}class eS{constructor(n,a){this.includeRedirectUri=!0,this.config=Ff(n),this.logger=new vi(this.config.loggerOptions,hu,gl),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=a,this.oidcDefaultScopes=this.config.authOptions.authority.options.OIDCOptions?.defaultScopes}async acquireToken(n,a,o){if(!n.code)throw Q(yb);o&&o.cloud_instance_host_name&&await K(this.updateTokenEndpointAuthority.bind(this),_0,this.logger,this.performanceClient,n.correlationId)(o.cloud_instance_host_name,n.correlationId);const r=Wn(),d=await K(this.executeTokenRequest.bind(this),b0,this.logger,this.performanceClient,n.correlationId)(this.authority,n,this.serverTelemetryManager),h=d.headers?.[$t.X_MS_REQUEST_ID],f=new bs(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.performanceClient,this.config.serializableCache,this.config.persistencePlugin);return f.validateTokenResponse(d.body,n.correlationId),K(f.handleServerTokenResponse.bind(f),qf,this.logger,this.performanceClient,n.correlationId)(d.body,this.authority,r,n,a,o,void 0,void 0,void 0,h)}getLogoutUri(n){if(!n)throw nt(eb);const a=this.createLogoutUrlQueryString(n);return Ve.appendQueryString(this.authority.endSessionEndpoint,a)}async executeTokenRequest(n,a,o){const r=XC(a,this.config.authOptions.clientId,this.config.authOptions.redirectUri,this.performanceClient),d=Ve.appendQueryString(n.tokenEndpoint,r),h=await K(this.createTokenRequestBody.bind(this),w0,this.logger,this.performanceClient,a.correlationId)(a);let f;if(a.clientInfo)try{const S=tu(a.clientInfo,this.cryptoUtils.base64Decode);f={credential:`${S.uid}${af}${S.utid}`,type:Xn.HOME_ACCOUNT_ID}}catch{this.logger.verbose("0wznt3",a.correlationId)}const y=JC(this.logger,this.config.systemOptions.preventCorsPreflight,f||a.ccsCredential),p=gu(this.config.authOptions.clientId,a);return K(ZC,C0,this.logger,this.performanceClient,a.correlationId)(d,h,y,p,a.correlationId,this.cacheManager,this.networkClient,this.logger,this.performanceClient,o)}async createTokenRequestBody(n){const a=new Map;if(xf(a,n.embeddedClientId||n.extraParameters?.[Es]||this.config.authOptions.clientId),this.includeRedirectUri)Df(a,n.redirectUri);else if(!n.redirectUri)throw nt(JA);if(Mf(a,n.scopes,!0,this.oidcDefaultScopes),Mb(a,n.code),jf(a,this.config.libraryInfo),Hf(a,this.config.telemetry.application),DC(a),this.serverTelemetryManager&&!PC(this.config)&&xC(a,this.serverTelemetryManager),n.codeVerifier&&Db(a,n.codeVerifier),this.config.clientCredentials.clientSecret&&kC(a,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const r=this.config.clientCredentials.clientAssertion;IC(a,await qC(r.assertion,this.config.authOptions.clientId,n.resourceRequestUri)),OC(a,r.assertionType)}if(RC(a,rC.AUTHORIZATION_CODE_GRANT),Lf(a),n.authenticationScheme===Xe.POP){const r=new Uo(this.cryptoUtils,this.performanceClient);let d;n.popKid?d=this.cryptoUtils.encodeKid(n.popKid):d=(await K(r.generateCnf.bind(r),pl,this.logger,this.performanceClient,n.correlationId)(n,this.logger)).reqCnfString,Bf(a,d)}else if(n.authenticationScheme===Xe.SSH)if(n.sshJwk)MC(a,n.sshJwk);else throw nt(Rf);(!zn.isEmptyObj(n.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&Uf(a,n.claims,this.config.authOptions.clientCapabilities);let o;if(n.clientInfo)try{const r=tu(n.clientInfo,this.cryptoUtils.base64Decode);o={credential:`${r.uid}${af}${r.utid}`,type:Xn.HOME_ACCOUNT_ID}}catch{this.logger.verbose("0wznt3",n.correlationId)}else o=n.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&o)switch(o.type){case Xn.HOME_ACCOUNT_ID:try{const r=Ro(o.credential);nl(a,r)}catch{this.logger.verbose("1qhtee",n.correlationId)}break;case Xn.UPN:Zc(a,o.credential);break}return n.embeddedClientId&&du(a,this.config.authOptions.clientId,this.config.authOptions.redirectUri),n.extraParameters&&yi(a,n.extraParameters),n.enableSpaAuthorizationCode&&(!n.extraParameters||!n.extraParameters[cv])&&yi(a,{[cv]:"1"}),uu(a,n.correlationId,this.performanceClient),cl(a)}createLogoutUrlQueryString(n){const a=new Map;return n.postLogoutRedirectUri&&kb(a,n.postLogoutRedirectUri),n.correlationId&&fl(a,n.correlationId),n.idTokenHint&&Ib(a,n.idTokenHint),n.state&&_C(a,n.state),n.logoutHint&&jb(a,n.logoutHint),n.extraQueryParameters&&yi(a,n.extraQueryParameters),this.config.authOptions.instanceAware&&NC(a),cl(a)}async updateTokenEndpointAuthority(n,a){const o=`https://${n}/${this.authority.tenant}/`,r=await WC(o,this.networkClient,this.cacheManager,this.authority.options,this.logger,a,this.performanceClient);this.authority=r}}const Z0=300;class $0{constructor(n,a){this.config=Ff(n),this.logger=new vi(this.config.loggerOptions,hu,gl),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=a}async acquireToken(n,a){const o=Wn(),r=await K(this.executeTokenRequest.bind(this),S0,this.logger,this.performanceClient,n.correlationId)(n,this.authority),d=r.headers?.[$t.X_MS_REQUEST_ID],h=new bs(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.performanceClient,this.config.serializableCache,this.config.persistencePlugin);return h.validateTokenResponse(r.body,n.correlationId),K(h.handleServerTokenResponse.bind(h),qf,this.logger,this.performanceClient,n.correlationId)(r.body,this.authority,o,n,a,void 0,void 0,!0,n.forceCache,d)}async acquireTokenByRefreshToken(n,a){if(!n)throw nt(WA);if(!n.account)throw Q(EC);if(this.cacheManager.isAppMetadataFOCI(n.account.environment,n.correlationId))try{return await K(this.acquireTokenWithCachedRefreshToken.bind(this),Fh,this.logger,this.performanceClient,n.correlationId)(n,!0,a)}catch(r){const d=r instanceof $n&&r.errorCode===df,h=r instanceof Os&&r.errorCode===uA&&r.subError===dA;if(d||h)return K(this.acquireTokenWithCachedRefreshToken.bind(this),Fh,this.logger,this.performanceClient,n.correlationId)(n,!1,a);throw r}return K(this.acquireTokenWithCachedRefreshToken.bind(this),Fh,this.logger,this.performanceClient,n.correlationId)(n,!1,a)}async acquireTokenWithCachedRefreshToken(n,a,o){const r=Zn(this.cacheManager.getRefreshToken.bind(this.cacheManager),D0,this.logger,this.performanceClient,n.correlationId)(n.account,a,n.correlationId,void 0);if(!r)throw nu(df);if(r.expiresOn){const h=n.refreshTokenExpirationOffsetSeconds||Z0;if(this.performanceClient?.addFields({cacheRtExpiresOnSeconds:Number(r.expiresOn),rtOffsetSeconds:h},n.correlationId),iu(r.expiresOn,h))throw nu(GC)}const d={...n,refreshToken:r.secret,authenticationScheme:n.authenticationScheme||Xe.BEARER,ccsCredential:{credential:n.account.homeAccountId,type:Xn.HOME_ACCOUNT_ID}};try{return await K(this.acquireToken.bind(this),T0,this.logger,this.performanceClient,n.correlationId)(d,o)}catch(h){if(h instanceof $n&&h.subError===Yf){this.logger.verbose("1pg3ap",n.correlationId);const f=this.cacheManager.generateCredentialKey(r);this.cacheManager.removeRefreshToken(f,n.correlationId)}throw h}}async executeTokenRequest(n,a){const o=XC(n,this.config.authOptions.clientId,this.config.authOptions.redirectUri,this.performanceClient),r=Ve.appendQueryString(a.tokenEndpoint,o),d=await K(this.createTokenRequestBody.bind(this),E0,this.logger,this.performanceClient,n.correlationId)(n),h=JC(this.logger,this.config.systemOptions.preventCorsPreflight,n.ccsCredential),f=gu(this.config.authOptions.clientId,n);return K(ZC,v0,this.logger,this.performanceClient,n.correlationId)(r,d,h,f,n.correlationId,this.cacheManager,this.networkClient,this.logger,this.performanceClient,this.serverTelemetryManager)}async createTokenRequestBody(n){const a=new Map;if(xf(a,n.embeddedClientId||n.extraParameters?.[Es]||this.config.authOptions.clientId),n.redirectUri&&Df(a,n.redirectUri),Mf(a,n.scopes,!0,this.config.authOptions.authority.options.OIDCOptions?.defaultScopes),RC(a,rC.REFRESH_TOKEN_GRANT),Lf(a),jf(a,this.config.libraryInfo),Hf(a,this.config.telemetry.application),DC(a),this.serverTelemetryManager&&!PC(this.config)&&xC(a,this.serverTelemetryManager),xb(a,n.refreshToken),this.config.clientCredentials.clientSecret&&kC(a,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const o=this.config.clientCredentials.clientAssertion;IC(a,await qC(o.assertion,this.config.authOptions.clientId,n.resourceRequestUri)),OC(a,o.assertionType)}if(n.authenticationScheme===Xe.POP){const o=new Uo(this.cryptoUtils,this.performanceClient);let r;n.popKid?r=this.cryptoUtils.encodeKid(n.popKid):r=(await K(o.generateCnf.bind(o),pl,this.logger,this.performanceClient,n.correlationId)(n,this.logger)).reqCnfString,Bf(a,r)}else if(n.authenticationScheme===Xe.SSH)if(n.sshJwk)MC(a,n.sshJwk);else throw nt(Rf);if((!zn.isEmptyObj(n.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&Uf(a,n.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&n.ccsCredential)switch(n.ccsCredential.type){case Xn.HOME_ACCOUNT_ID:try{const o=Ro(n.ccsCredential.credential);nl(a,o)}catch{this.logger.verbose("1qhtee",n.correlationId)}break;case Xn.UPN:Zc(a,n.ccsCredential.credential);break}return n.embeddedClientId&&du(a,this.config.authOptions.clientId,this.config.authOptions.redirectUri),n.extraParameters&&yi(a,{...n.extraParameters}),uu(a,n.correlationId,this.performanceClient),cl(a)}}class W0{constructor(n,a){this.config=Ff(n),this.logger=new vi(this.config.loggerOptions,hu,gl),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=a}async acquireCachedToken(n){let a=ys.NOT_APPLICABLE;if(n.forceRefresh||!zn.isEmptyObj(n.claims))throw this.setCacheOutcome(ys.FORCE_REFRESH_OR_CLAIMS,n.correlationId),Q(Cs);if(!n.account)throw Q(EC);const o=n.account.tenantId||J0(n.authority),r=this.cacheManager.getTokenKeys(),d=this.cacheManager.getAccessToken(n.account,n,r,o);if(d){if(p0(d.cachedAt)||iu(d.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome(ys.CACHED_ACCESS_TOKEN_EXPIRED,n.correlationId),Q(Cs);d.refreshOn&&iu(d.refreshOn,0)&&(a=ys.PROACTIVELY_REFRESHED)}else throw this.setCacheOutcome(ys.NO_CACHED_ACCESS_TOKEN,n.correlationId),Q(Cs);const h=n.authority||this.authority.getPreferredCache(),f={account:this.cacheManager.getAccount(this.cacheManager.generateAccountKey(n.account),n.correlationId),accessToken:d,idToken:this.cacheManager.getIdToken(n.account,n.correlationId,r,o),refreshToken:null,appMetadata:this.cacheManager.readAppMetadataFromCache(h,n.correlationId)};return this.setCacheOutcome(a,n.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[await K(this.generateResultFromCacheRecord.bind(this),A0,this.logger,this.performanceClient,n.correlationId)(f,n),a]}setCacheOutcome(n,a){this.serverTelemetryManager?.setCacheOutcome(n),this.performanceClient?.addFields({cacheOutcome:n},a),n!==ys.NOT_APPLICABLE&&this.logger.info("09ingz",a)}async generateResultFromCacheRecord(n,a){let o;if(n.idToken&&(o=Fi(n.idToken.secret,this.config.cryptoInterface.base64Decode)),a.maxAge||a.maxAge===0){const r=o?.auth_time;if(!r)throw Q(TC);jC(r,a.maxAge)}return bs.generateAuthenticationResult(this.cryptoUtils,this.authority,n,!0,a,this.performanceClient,o)}}const ew={sendGetRequestAsync:()=>Promise.reject(Q(Oe)),sendPostRequestAsync:()=>Promise.reject(Q(Oe))};function tw(l,n,a,o){const r=n.correlationId,d=new Map;xf(d,n.embeddedClientId||n.extraQueryParameters?.[Es]||l.clientId);const h=[...n.scopes||[],...n.extraScopesToConsent||[]];if(Mf(d,h,!0,l.authority.options.OIDCOptions?.defaultScopes),Df(d,n.redirectUri),fl(d,r),wb(d,n.responseMode),Lf(d),n.prompt&&(Rb(d,n.prompt),o?.addFields({prompt:n.prompt},r)),n.domainHint&&(Ob(d,n.domainHint),o?.addFields({domainHintFromRequest:!0},r)),n.prompt!==un.SELECT_ACCOUNT)if(n.sid&&n.prompt===un.NONE)a.verbose("1tvqyx",n.correlationId),fv(d,n.sid),o?.addFields({sidFromRequest:!0},r);else if(n.account){const f=aw(n.account);let y=sw(n.account);if(y&&n.domainHint&&(a.warning("0wkg3v",n.correlationId),y=null),y){a.verbose("1eyfsw",n.correlationId),zc(d,y),o?.addFields({loginHintFromClaim:!0},r);try{const p=Ro(n.account.homeAccountId);nl(d,p)}catch{a.verbose("12ugck",n.correlationId)}}else if(f&&n.prompt===un.NONE){a.verbose("1rmd8s",n.correlationId),fv(d,f),o?.addFields({sidFromClaim:!0},r);try{const p=Ro(n.account.homeAccountId);nl(d,p)}catch{a.verbose("12ugck",n.correlationId)}}else if(n.loginHint)a.verbose("0y3007",n.correlationId),zc(d,n.loginHint),Zc(d,n.loginHint),o?.addFields({loginHintFromRequest:!0},r);else if(n.account.username){a.verbose("02f507",n.correlationId),zc(d,n.account.username),o?.addFields({loginHintFromUpn:!0},r);try{const p=Ro(n.account.homeAccountId);nl(d,p)}catch{a.verbose("12ugck",n.correlationId)}}}else n.loginHint&&(a.verbose("0g01ey",n.correlationId),zc(d,n.loginHint),Zc(d,n.loginHint),o?.addFields({loginHintFromRequest:!0},r));else a.verbose("169k9v",n.correlationId);return n.nonce&&Nb(d,n.nonce),n.state&&_C(d,n.state),(n.claims||l.clientCapabilities&&l.clientCapabilities.length>0)&&Uf(d,n.claims,l.clientCapabilities),n.embeddedClientId&&du(d,l.clientId,l.redirectUri),l.instanceAware&&(!n.extraQueryParameters||!Object.keys(n.extraQueryParameters).includes(of))&&NC(d),d}function Zf(l,n){const a=cl(n);return Ve.appendQueryString(l.authorizationEndpoint,a)}function nw(l,n){if(tS(l,n),!l.code)throw Q(Eb);return l}function tS(l,n){if(!l.state||!n)throw l.state?Q(uv,"Cached State"):Q(uv,"Server State");let a,o;try{a=decodeURIComponent(l.state)}catch{throw Q(ll,l.state)}try{o=decodeURIComponent(n)}catch{throw Q(ll,l.state)}if(a!==o)throw Q(fb);if(l.error||l.error_description||l.suberror){const r=iw(l);throw FC(l.error,l.error_description,l.suberror)?new $n(l.error||"",l.error_description,l.suberror,l.timestamp||"",l.trace_id||"",l.correlation_id||"",l.claims||"",r):new Os(l.error||"",l.error_description,l.suberror,r)}}function iw(l){const n="code=",a=l.error_uri?.lastIndexOf(n);return a&&a>=0?l.error_uri?.substring(a+n.length):void 0}function aw(l){return l.idTokenClaims?.sid||null}function sw(l){return l.loginHint||l.idTokenClaims?.login_hint||null}const hf="unexpected_error";const Iv=",",nS="|";function ow(l){const{skus:n,libraryName:a,libraryVersion:o,extensionName:r,extensionVersion:d}=l,h=new Map([[0,[a,o]],[2,[r,d]]]);let f=[];if(n?.length){if(f=n.split(Iv),f.length<4)return n}else f=Array.from({length:4},()=>nS);return h.forEach((y,p)=>{y.length===2&&y[0]?.length&&y[1]?.length&&rw({skuArr:f,index:p,skuName:y[0],skuVersion:y[1]})}),f.join(Iv)}function rw(l){const{skuArr:n,index:a,skuName:o,skuVersion:r}=l;a>=n.length||(n[a]=[o,r].join(nS))}class ul{constructor(n,a){this.cacheOutcome=ys.NOT_APPLICABLE,this.cacheManager=a,this.apiId=n.apiId,this.correlationId=n.correlationId,this.wrapperSKU=n.wrapperSKU||"",this.wrapperVer=n.wrapperVer||"",this.telemetryCacheKey=uC+cC+n.clientId}generateCurrentRequestHeaderValue(){const n=`${this.apiId}${bo}${this.cacheOutcome}`,a=[this.wrapperSKU,this.wrapperVer],o=this.getNativeBrokerErrorCode();o?.length&&a.push(`broker_error=${o}`);const r=a.join(bo),d=this.getRegionDiscoveryFields(),h=[n,d].join(bo);return[rv,h,r].join(lv)}generateLastRequestHeaderValue(){const n=this.getLastRequests(),a=ul.maxErrorsToSend(n),o=n.failedRequests.slice(0,2*a).join(bo),r=n.errors.slice(0,a).join(bo),d=n.errors.length,h=a<d?aA:sA,f=[d,h].join(bo);return[rv,n.cacheHits,o,r,f].join(lv)}cacheFailedRequest(n){const a=this.getLastRequests();a.errors.length>=iA&&(a.failedRequests.shift(),a.failedRequests.shift(),a.errors.shift()),a.failedRequests.push(this.apiId,this.correlationId),n instanceof Error&&n&&n.toString()?n instanceof tt?n.subError?a.errors.push(n.subError):n.errorCode?a.errors.push(n.errorCode):a.errors.push(n.toString()):a.errors.push(n.toString()):a.errors.push(oA),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,a,this.correlationId)}incrementCacheHits(){const n=this.getLastRequests();return n.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,n,this.correlationId),n.cacheHits}getLastRequests(){const n={failedRequests:[],errors:[],cacheHits:0};return this.cacheManager.getServerTelemetry(this.telemetryCacheKey,this.correlationId)||n}clearTelemetryCache(){const n=this.getLastRequests(),a=ul.maxErrorsToSend(n),o=n.errors.length;if(a===o)this.cacheManager.removeItem(this.telemetryCacheKey,this.correlationId);else{const r={failedRequests:n.failedRequests.slice(a*2),errors:n.errors.slice(a),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,r,this.correlationId)}}static maxErrorsToSend(n){let a,o=0,r=0;const d=n.errors.length;for(a=0;a<d;a++){const h=n.failedRequests[2*a]||"",f=n.failedRequests[2*a+1]||"",y=n.errors[a]||"";if(r+=h.toString().length+f.toString().length+y.length+3,r<nA)o+=1;else break}return o}getRegionDiscoveryFields(){const n=[];return n.push(this.regionUsed||""),n.push(this.regionSource||""),n.push(this.regionOutcome||""),n.join(",")}updateRegionDiscoveryMetadata(n){this.regionUsed=n.region_used,this.regionSource=n.region_source,this.regionOutcome=n.region_outcome}setCacheOutcome(n){this.cacheOutcome=n}setNativeBrokerErrorCode(n){const a=this.getLastRequests();a.nativeBrokerErrorCode=n,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,a,this.correlationId)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){const n=this.getLastRequests();delete n.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,n,this.correlationId)}static makeExtraSkuString(n){return ow(n)}}class $f extends tt{constructor(n,a){super(n,a),this.name="JoseHeaderError",Object.setPrototypeOf(this,$f.prototype)}}function Ov(l){return new $f(l)}const lw="missing_kid_error",cw="missing_alg_error";class Wf{constructor(n){this.typ=n.typ,this.alg=n.alg,this.kid=n.kid}static getShrHeaderString(n){if(!n.kid)throw Ov(lw);if(!n.alg)throw Ov(cw);const a=new Wf({typ:n.typ||hA.Pop,kid:n.kid,alg:n.alg});return JSON.stringify(a)}}function yu(l){return`See https://aka.ms/msal.js.errors#${l} for details`}class yl extends tt{constructor(n,a){super(n,yu(n),a),Object.setPrototypeOf(this,yl.prototype),this.name="BrowserAuthError"}}function te(l,n){return new yl(l,n)}const jn={INVALID_GRANT_ERROR:"invalid_grant",POPUP_WIDTH:483,POPUP_HEIGHT:600,POPUP_NAME_PREFIX:"msal",MSAL_SKU:"msal.js.browser"},Hn={CHANNEL_ID:"53ee284d-920a-4b59-9d30-a60315b26836",PREFERRED_EXTENSION_ID:"ppnbnpeolgkicgegkbkbjmhlideopiji",MATS_TELEMETRY:"MATS",MICROSOFT_ENTRA_BROKERID:"MicrosoftEntra",DOM_API_NAME:"DOM API",PLATFORM_DOM_APIS:"get-token-and-sign-out",PLATFORM_DOM_PROVIDER:"PlatformAuthDOMHandler",PLATFORM_EXTENSION_PROVIDER:"PlatformAuthExtensionHandler"},$r={HandshakeRequest:"Handshake",HandshakeResponse:"HandshakeResponse",GetToken:"GetToken",Response:"Response"},Ln={LocalStorage:"localStorage",SessionStorage:"sessionStorage",MemoryStorage:"memoryStorage"},Rv={GET:"GET",POST:"POST"},Oa={SIGNIN:"signin",SIGNOUT:"signout"},Et={ORIGIN_URI:"request.origin",URL_HASH:"urlHash",REQUEST_PARAMS:"request.params",VERIFIER:"code.verifier",INTERACTION_STATUS_KEY:"interaction.status",NATIVE_REQUEST:"request.native"},Bc={WRAPPER_SKU:"wrapper.sku",WRAPPER_VER:"wrapper.version"},He={acquireTokenRedirect:861,acquireTokenPopup:862,ssoSilent:863,acquireTokenSilent_authCode:864,handleRedirectPromise:865,acquireTokenByCode:866,acquireTokenSilent_silentFlow:61,logout:961,logoutPopup:962,hydrateCache:963,loadExternalTokens:964},Nv={861:"acquireTokenRedirect",862:"acquireTokenPopup",863:"ssoSilent",864:"acquireTokenSilent_authCode",865:"handleRedirectPromise",866:"acquireTokenByCode",61:"acquireTokenSilent_silentFlow",961:"logout",962:"logoutPopup",963:"hydrateCache",964:"loadExternalTokens"},uw=l=>typeof l=="number"&&l in Nv?Nv[l]:"unknown";var ve;(function(l){l.Redirect="redirect",l.Popup="popup",l.Silent="silent",l.None="none"})(ve||(ve={}));const Mv={scopes:Ho},iS="jwk",ff="msal.db",dw=1,hw=`${ff}.keys`,Zt={Default:0,AccessToken:1,AccessTokenAndRefreshToken:2,RefreshToken:3,RefreshTokenAndNetwork:4,Skip:5},fw=[Zt.Default,Zt.Skip,Zt.RefreshTokenAndNetwork];function Kc(l){return encodeURIComponent(dl(l).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"))}function Ua(l){return aS(l).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function dl(l){return aS(new TextEncoder().encode(l))}function aS(l){const n=Array.from(l,a=>String.fromCodePoint(a)).join("");return btoa(n)}const sS="pkce_not_created",oS="ear_jwk_empty",gw="ear_jwe_empty",xv="crypto_nonexistent",eg="empty_navigate_uri",mw="hash_empty_error",tg="no_state_in_hash",pw="hash_does_not_contain_known_properties",rS="unable_to_parse_state",yw="state_interaction_type_mismatch",vw="interaction_in_progress",Cw="interaction_in_progress_cancelled",Sw="popup_window_error",Tw="empty_window_error",gf="user_cancelled",Ew="redirect_bridge_empty_response",Aw="redirect_in_iframe",bw="block_iframe_reload",ww="block_nested_popups",ng="silent_logout_unsupported",_w="no_account_error",kw="no_token_request_cache_error",Iw="unable_to_parse_token_request_cache_error",lS="non_browser_environment",Wr="database_not_open",mf="no_network_connectivity",Ow="post_request_failed",Rw="get_request_failed",Dv="failed_to_parse_response",cS="crypto_key_not_found",Nw="auth_code_required",Mw="auth_code_or_nativeAccountId_required",xw="spa_code_and_nativeAccountId_present",uS="database_unavailable",Dw="unable_to_acquire_token_from_native_platform",Uw="native_handshake_timeout",jw="native_extension_not_installed",dS="native_connection_not_established",Vc="uninitialized_public_client_application",Hw="native_prompt_not_supported",zw="invalid_base64_string",Lw="invalid_pop_token_request",Bw="failed_to_build_headers",Kw="failed_to_parse_headers",Qh="failed_to_decrypt_ear_response",au="timed_out",Pw="empty_response";function An(l){return new TextDecoder().decode(xa(l))}function xa(l){let n=l.replace(/-/g,"+").replace(/_/g,"/");switch(n.length%4){case 0:break;case 2:n+="==";break;case 3:n+="=";break;default:throw te(zw)}const a=atob(n);return Uint8Array.from(a,o=>o.codePointAt(0)||0)}const Gw="RSASSA-PKCS1-v1_5",Lo="AES-GCM",hS="HKDF",ig="SHA-256",Vw=2048,Fw=new Uint8Array([1,0,1]),Uv="0123456789abcdef",jv=new Uint32Array(1),ag="raw",fS="encrypt",sg="decrypt",Yw="deriveKey",Qw="crypto_subtle_undefined",og={name:Gw,hash:ig,modulusLength:Vw,publicExponent:Fw};function qw(l){if(!window)throw te(lS);if(!window.crypto)throw te(xv);if(!l&&!window.crypto.subtle)throw te(xv,Qw)}async function gS(l){const a=new TextEncoder().encode(l);return window.crypto.subtle.digest(ig,a)}function Jw(l){return window.crypto.getRandomValues(l)}function qh(){return window.crypto.getRandomValues(jv),jv[0]}function ws(){const l=Date.now(),n=qh()*1024+(qh()&1023),a=new Uint8Array(16),o=Math.trunc(n/2**30),r=n&2**30-1,d=qh();a[0]=l/2**40,a[1]=l/2**32,a[2]=l/2**24,a[3]=l/2**16,a[4]=l/2**8,a[5]=l,a[6]=112|o>>>8,a[7]=o,a[8]=128|r>>>24,a[9]=r>>>16,a[10]=r>>>8,a[11]=r,a[12]=d>>>24,a[13]=d>>>16,a[14]=d>>>8,a[15]=d;let h="";for(let f=0;f<a.length;f++)h+=Uv.charAt(a[f]>>>4),h+=Uv.charAt(a[f]&15),(f===3||f===5||f===7||f===9)&&(h+="-");return h}async function Xw(l,n){return window.crypto.subtle.generateKey(og,l,n)}async function Jh(l){return window.crypto.subtle.exportKey(iS,l)}async function Zw(l,n,a){return window.crypto.subtle.importKey(iS,l,og,n,a)}async function $w(l,n){return window.crypto.subtle.sign(og,l,n)}async function rg(){const l=await mS(),a={alg:"dir",kty:"oct",k:Ua(new Uint8Array(l))};return dl(JSON.stringify(a))}async function Ww(l){const n=An(l),o=JSON.parse(n).k,r=xa(o);return window.crypto.subtle.importKey(ag,r,Lo,!1,[sg])}async function e_(l,n){const a=n.split(".");if(a.length!==5)throw te(Qh,"jwe_length");const o=await Ww(l).catch(()=>{throw te(Qh,"import_key")});try{const r=new TextEncoder().encode(a[0]),d=xa(a[2]),h=xa(a[3]),f=xa(a[4]),y=f.byteLength*8,p=new Uint8Array(h.length+f.length);p.set(h),p.set(f,h.length);const S=await window.crypto.subtle.decrypt({name:Lo,iv:d,tagLength:y,additionalData:r},o,p);return new TextDecoder().decode(S)}catch{throw te(Qh,"decrypt")}}async function mS(){const l=await window.crypto.subtle.generateKey({name:Lo,length:256},!0,[fS,sg]);return window.crypto.subtle.exportKey(ag,l)}async function Hv(l){return window.crypto.subtle.importKey(ag,l,hS,!1,[Yw])}async function pS(l,n,a){return window.crypto.subtle.deriveKey({name:hS,salt:n,hash:ig,info:new TextEncoder().encode(a)},l,{name:Lo,length:256},!1,[fS,sg])}async function t_(l,n,a){const o=new TextEncoder().encode(n),r=window.crypto.getRandomValues(new Uint8Array(16)),d=await pS(l,r,a),h=await window.crypto.subtle.encrypt({name:Lo,iv:new Uint8Array(12)},d,o);return{data:Ua(new Uint8Array(h)),nonce:Ua(r)}}async function zv(l,n,a,o){const r=xa(o),d=await pS(l,xa(n),a),h=await window.crypto.subtle.decrypt({name:Lo,iv:new Uint8Array(12)},d,r);return new TextDecoder().decode(h)}async function n_(l){const n=await gS(l),a=new Uint8Array(n);return Ua(a)}class lg extends tt{constructor(n,a){super(n,a),this.name="BrowserConfigurationAuthError",Object.setPrototypeOf(this,lg.prototype)}}function cg(l){return new lg(l,yu(l))}const yS="storage_not_supported",i_="in_mem_redirect_unavailable";function a_(){const l=window.location.hash,n=window.location.search;let a=!1,o=!1,r="",d;if(l&&l.length>1){const S=l.charAt(0)==="#"?l.substring(1):l,T=new URLSearchParams(S);T.has("state")&&(a=!0,r=S,d=T)}if(n&&n.length>1){const S=n.charAt(0)==="?"?n.substring(1):n,T=new URLSearchParams(S);T.has("state")&&(o=!0,r=S,d=T)}if(a&&o){const S=n.charAt(0)==="?"?n.substring(1):n,T=l.charAt(0)==="#"?l.substring(1):l;r=`${S}${T}`,d=new URLSearchParams(r)}if(!r||!d)throw te(Pw);const h=d.get("state");if(!h)throw te(tg);const{libraryState:f}=ml(An,h),{id:y,meta:p}=f;if(!y||!p)throw te(rS,"missing_library_state");return{params:d,payload:r,urlHash:l,urlQuery:n,hasResponseInHash:a,hasResponseInQuery:o,libraryState:{id:y,meta:p}}}function vS(l){l.location.hash="",typeof l.history.replaceState=="function"&&l.history.replaceState(null,"",`${l.location.origin}${l.location.pathname}${l.location.search}`)}function s_(l){const n=l.split("#");n.shift(),window.location.hash=n.length>0?n.join("#"):""}function vu(){return window.parent!==window}function o_(){if(vu())return!1;try{const{libraryState:l}=a_(),{meta:n}=l;return n.interactionType===ve.Popup}catch{return!1}}let Ra=null;function r_(l,n){Ra&&(l.verbose("18y01k",n),clearTimeout(Ra.timeoutId),Ra.channel.close(),Ra.reject(te(Cw)),Ra=null)}async function ko(l,n,a,o){return new Promise((r,d)=>{n.verbose("1rf6em",o.correlationId);const{libraryState:h}=ml(a.base64Decode,o.state||""),f=new BroadcastChannel(h.id);let y;const p=window.setTimeout(()=>{Ra=null,f.close(),d(te(au,"redirect_bridge_timeout"))},l);Ra={timeoutId:p,channel:f,reject:d},f.onmessage=S=>{y=S.data.payload,Ra=null,clearTimeout(p),f.close(),y?r(y):d(te(Ew))}})}function Na(){return typeof window<"u"&&window.location?window.location.href.split("?")[0].split("#")[0]:""}function l_(){const n=new Ve(window.location.href).getUrlComponents();return`${n.Protocol}//${n.HostNameAndPort}/`}function c_(){if($c(window.location.hash)&&vu())throw te(bw)}function u_(l){if(vu()&&!l)throw te(Aw)}function d_(){if(o_())throw te(ww)}function CS(){if(typeof window>"u")throw te(lS)}function SS(l){if(!l)throw te(Vc)}function ug(l){CS(),c_(),d_(),SS(l)}function Lv(l,n){if(ug(l),u_(n.system.allowRedirectInIframe),n.cache.cacheLocation===Ln.MemoryStorage)throw cg(i_)}function TS(l){const n=document.createElement("link");n.rel="preconnect",n.href=new URL(l).origin,n.crossOrigin="anonymous",document.head.appendChild(n),window.setTimeout(()=>{try{document.head.removeChild(n)}catch{}},1e4)}function pf(){return ws()}const h_="acquireTokenFromCache",f_="acquireTokenByRefreshToken",g_="acquireTokenSilentAsync",m_="cryptoOptsGetPublicKeyThumbprint",p_="cryptoOptsSignJwt",y_="silentCacheClientAcquireToken",v_="silentIframeClientAcquireToken",C_="awaitConcurrentIframe",S_="silentRefreshClientAcquireToken",Ts="standardInteractionClientGetDiscoveredAuthority",ES="nativeInteractionClientAcquireToken",T_="refreshTokenClientAcquireTokenByRefreshToken",Bv="acquireTokenBySilentIframe",dg="initializeBaseRequest",E_="initializeSilentRequest",A_="initializeCache",Kv="silentIframeClientTokenHelper",Xh="silentHandlerInitiateAuthRequest",su="silentHandlerMonitorIframeForHash",b_="silentHandlerLoadFrameSync",Da="standardInteractionClientCreateAuthCodeClient",Cu="standardInteractionClientGetClientConfiguration",Su="standardInteractionClientInitializeAuthorizationRequest",w_="silentFlowClientAcquireCachedToken",__="getStandardParams",k_="handleCodeResponse",hg="handleResponseEar",AS="handleResponsePlatformBroker",No="handleResponseCode",I_="authClientAcquireToken",il="deserializeResponse",O_="authorityFactoryCreateDiscoveredInstance",R_="acquireTokenByCodeAsync",N_="handleRedirectPromise",M_="handleNativeRedirectPromise",x_="nativeMessageHandlerHandshake",D_="importExistingCache",_s="generatePkceCodes",U_="generateCodeVerifier",j_="generateCodeChallengeFromVerifier",H_="sha256Digest",z_="getRandomValues",Pv="generateHKDF",L_="generateBaseKey",B_="base64Decode",K_="urlEncodeArr",P_="encrypt",Gv="decrypt",fg="generateEarKey",G_="decryptEarResponse";class V_{constructor(){this.dbName=ff,this.version=dw,this.tableName=hw,this.dbOpen=!1}async open(){return new Promise((n,a)=>{const o=window.indexedDB.open(this.dbName,this.version);o.addEventListener("upgradeneeded",r=>{r.target.result.createObjectStore(this.tableName)}),o.addEventListener("success",r=>{const d=r;this.db=d.target.result,this.dbOpen=!0,n()}),o.addEventListener("error",()=>a(te(uS)))})}closeConnection(){const n=this.db;n&&this.dbOpen&&(n.close(),this.dbOpen=!1)}async validateDbIsOpen(){if(!this.dbOpen)return this.open()}async getItem(n){return await this.validateDbIsOpen(),new Promise((a,o)=>{if(!this.db)return o(te(Wr));const h=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).get(n);h.addEventListener("success",f=>{const y=f;this.closeConnection(),a(y.target.result)}),h.addEventListener("error",f=>{this.closeConnection(),o(f)})})}async setItem(n,a){return await this.validateDbIsOpen(),new Promise((o,r)=>{if(!this.db)return r(te(Wr));const f=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).put(a,n);f.addEventListener("success",()=>{this.closeConnection(),o()}),f.addEventListener("error",y=>{this.closeConnection(),r(y)})})}async removeItem(n){return await this.validateDbIsOpen(),new Promise((a,o)=>{if(!this.db)return o(te(Wr));const h=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).delete(n);h.addEventListener("success",()=>{this.closeConnection(),a()}),h.addEventListener("error",f=>{this.closeConnection(),o(f)})})}async getKeys(){return await this.validateDbIsOpen(),new Promise((n,a)=>{if(!this.db)return a(te(Wr));const d=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).getAllKeys();d.addEventListener("success",h=>{const f=h;this.closeConnection(),n(f.target.result)}),d.addEventListener("error",h=>{this.closeConnection(),a(h)})})}async containsKey(n){return await this.validateDbIsOpen(),new Promise((a,o)=>{if(!this.db)return o(te(Wr));const h=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).count(n);h.addEventListener("success",f=>{const y=f;this.closeConnection(),a(y.target.result===1)}),h.addEventListener("error",f=>{this.closeConnection(),o(f)})})}async deleteDatabase(){return this.db&&this.dbOpen&&this.closeConnection(),new Promise((n,a)=>{const o=window.indexedDB.deleteDatabase(ff),r=setTimeout(()=>a(!1),200);o.addEventListener("success",()=>(clearTimeout(r),n(!0))),o.addEventListener("blocked",()=>(clearTimeout(r),n(!0))),o.addEventListener("error",()=>(clearTimeout(r),a(!1)))})}}class Tu{constructor(){this.cache=new Map}async initialize(){}getItem(n){return this.cache.get(n)||null}getUserData(n){return this.getItem(n)}setItem(n,a){this.cache.set(n,a)}async setUserData(n,a){this.setItem(n,a)}removeItem(n){this.cache.delete(n)}getKeys(){const n=[];return this.cache.forEach((a,o)=>{n.push(o)}),n}containsKey(n){return this.cache.has(n)}clear(){this.cache.clear()}decryptData(){return Promise.resolve(null)}}class F_{constructor(n){this.inMemoryCache=new Tu,this.indexedDBCache=new V_,this.logger=n}handleDatabaseAccessError(n,a){if(n instanceof yl&&n.errorCode===uS)this.logger.error("1wx7zz",a);else throw n}async getItem(n,a){const o=this.inMemoryCache.getItem(n);if(!o)try{return this.logger.verbose("0naxpl",a),await this.indexedDBCache.getItem(n)}catch(r){this.handleDatabaseAccessError(r,a)}return o}async setItem(n,a,o){this.inMemoryCache.setItem(n,a);try{await this.indexedDBCache.setItem(n,a)}catch(r){this.handleDatabaseAccessError(r,o)}}async removeItem(n,a){this.inMemoryCache.removeItem(n);try{await this.indexedDBCache.removeItem(n)}catch(o){this.handleDatabaseAccessError(o,a)}}async getKeys(n){const a=this.inMemoryCache.getKeys();if(a.length===0)try{return this.logger.verbose("1iqrbq",n),await this.indexedDBCache.getKeys()}catch(o){this.handleDatabaseAccessError(o,n)}return a}async containsKey(n,a){const o=this.inMemoryCache.containsKey(n);if(!o)try{return this.logger.verbose("03zl2j",a),await this.indexedDBCache.containsKey(n)}catch(r){this.handleDatabaseAccessError(r,a)}return o}clearInMemory(n){this.logger.verbose("03r21p",n),this.inMemoryCache.clear(),this.logger.verbose("0uksk1",n)}async clearPersistent(n){try{this.logger.verbose("0rdqut",n);const a=await this.indexedDBCache.deleteDatabase();return a&&this.logger.verbose("149ouc",n),a}catch(a){return this.handleDatabaseAccessError(a,n),!1}}}class Qi{constructor(n,a,o){this.logger=n,qw(o??!1),this.cache=new F_(this.logger),this.performanceClient=a}createNewGuid(){return ws()}base64Encode(n){return dl(n)}base64Decode(n){return An(n)}base64UrlEncode(n){return Kc(n)}encodeKid(n){return this.base64UrlEncode(JSON.stringify({kid:n}))}async getPublicKeyThumbprint(n){const a=this.performanceClient?.startMeasurement(m_,n.correlationId),o=await Xw(Qi.EXTRACTABLE,Qi.POP_KEY_USAGES),r=await Jh(o.publicKey),d={e:r.e,kty:r.kty,n:r.n},h=Vv(d),f=await this.hashString(h),y=await Jh(o.privateKey),p=await Zw(y,!1,["sign"]);return await this.cache.setItem(f,{privateKey:p,publicKey:o.publicKey,requestMethod:n.resourceRequestMethod,requestUri:n.resourceRequestUri},n.correlationId),a&&a.end({success:!0}),f}async removeTokenBindingKey(n,a){if(await this.cache.removeItem(n,a),await this.cache.containsKey(n,a))throw Q(Ab)}async clearKeystore(n){this.cache.clearInMemory(n);try{return await this.cache.clearPersistent(n),!0}catch(a){return a instanceof Error?this.logger.error("1owpn8",n):this.logger.error("0yrmwo",n),!1}}async signJwt(n,a,o,r){const d=this.performanceClient?.startMeasurement(p_,r),h=await this.cache.getItem(a,r||"");if(!h)throw te(cS);const f=await Jh(h.publicKey),y=Vv(f),p=Kc(JSON.stringify({kid:a})),S=Wf.getShrHeaderString({...o?.header,alg:f.alg,kid:p}),T=Kc(S);n.cnf={jwk:JSON.parse(y)};const k=Kc(JSON.stringify(n)),N=`${T}.${k}`,Y=new TextEncoder().encode(N),pe=await $w(h.privateKey,Y),Z=Ua(new Uint8Array(pe)),ue=`${N}.${Z}`;return d&&d.end({success:!0}),ue}async hashString(n){return n_(n)}}Qi.POP_KEY_USAGES=["sign","verify"];Qi.EXTRACTABLE=!0;function Vv(l){return JSON.stringify(l,Object.keys(l).sort())}const Y_="acquireTokenSilent",Q_="acquireTokenByCode",q_="acquireTokenPopup",J_="acquireTokenPreRedirect",Zh="acquireTokenRedirect",X_="ssoSilent",Z_="initializeClientApplication",$_="localStorageUpdated";const Lt="msal",gg="browser",Fv="|",Vt=2,Fc=2,W_=`${Lt}.${gg}.log.level`,ek=`${Lt}.${gg}.log.pii`,tk=`${Lt}.${gg}.platform.auth.dom`,Yv=`${Lt}.version`,Qv="account.keys",qv="token.keys";function Mo(l=Fc){return l<1?`${Lt}.${Qv}`:`${Lt}.${l}.${Qv}`}function xo(l,n=Vt){return n<1?`${Lt}.${qv}.${l}`:`${Lt}.${n}.${qv}.${l}`}const nk=1440*60*1e3,yf={Lax:"Lax",None:"None"};class bS{initialize(){return Promise.resolve()}getItem(n){const a=`${encodeURIComponent(n)}`,o=document.cookie.split(";");for(let r=0;r<o.length;r++){const d=o[r],[h,...f]=decodeURIComponent(d).trim().split("="),y=f.join("=");if(h===a)return y}return""}getUserData(){throw Q(Oe)}setItem(n,a,o,r=!0,d=yf.Lax){let h=`${encodeURIComponent(n)}=${encodeURIComponent(a)};path=/;SameSite=${d};`;if(o){const f=ik(o);h+=`expires=${f};`}(r||d===yf.None)&&(h+="Secure;"),document.cookie=h}async setUserData(){return Promise.reject(Q(Oe))}removeItem(n){this.setItem(n,"",-1)}getKeys(){const n=document.cookie.split(";"),a=[];return n.forEach(o=>{const r=decodeURIComponent(o).trim().split("=");a.push(r[0])}),a}containsKey(n){return this.getKeys().includes(n)}decryptData(){return Promise.resolve(null)}}function ik(l){const n=new Date;return new Date(n.getTime()+l*nk).toUTCString()}function Ia(l,n){const a=l.getItem(Mo(n));return a?JSON.parse(a):[]}function qn(l,n,a){const o=n.getItem(xo(l,a));if(o){const r=JSON.parse(o);if(r&&r.hasOwnProperty("idToken")&&r.hasOwnProperty("accessToken")&&r.hasOwnProperty("refreshToken"))return r}return{idToken:[],accessToken:[],refreshToken:[]}}function Yc(l){return l.hasOwnProperty("id")&&l.hasOwnProperty("nonce")&&l.hasOwnProperty("data")}const Jv="msal.cache.encryption",ak="msal.broadcast.cache";class sk{constructor(n,a,o){if(!window.localStorage)throw cg(yS);this.memoryStorage=new Tu,this.initialized=!1,this.clientId=n,this.logger=a,this.performanceClient=o,this.broadcast=new BroadcastChannel(ak)}async initialize(n){const a=new bS,o=a.getItem(Jv);let r={key:"",id:""};if(o)try{r=JSON.parse(o)}catch{}if(r.key&&r.id){const d=Zn(xa,B_,this.logger,this.performanceClient,n)(r.key);this.encryptionCookie={id:r.id,key:await K(Hv,Pv,this.logger,this.performanceClient,n)(d)}}else{const d=ws(),h=await K(mS,L_,this.logger,this.performanceClient,n)(),f=Zn(Ua,K_,this.logger,this.performanceClient,n)(new Uint8Array(h));this.encryptionCookie={id:d,key:await K(Hv,Pv,this.logger,this.performanceClient,n)(h)};const y={id:d,key:f};a.setItem(Jv,JSON.stringify(y),0,!0,yf.None)}await K(this.importExistingCache.bind(this),D_,this.logger,this.performanceClient,n)(n),this.broadcast.addEventListener("message",d=>{this.updateCache(d,n)}),this.initialized=!0}getItem(n){return window.localStorage.getItem(n)}getUserData(n){if(!this.initialized)throw te(Vc);return this.memoryStorage.getItem(n)}async decryptData(n,a,o){if(!this.initialized||!this.encryptionCookie)throw te(Vc);if(a.id!==this.encryptionCookie.id)return this.performanceClient.incrementFields({encryptedCacheExpiredCount:1},o),null;const r=await K(zv,Gv,this.logger,this.performanceClient,o)(this.encryptionCookie.key,a.nonce,this.getContext(n),a.data);if(!r)return null;try{return{...JSON.parse(r),lastUpdatedAt:a.lastUpdatedAt}}catch{return this.performanceClient.incrementFields({encryptedCacheCorruptionCount:1},o),null}}setItem(n,a){window.localStorage.setItem(n,a)}async setUserData(n,a,o,r,d){if(!this.initialized||!this.encryptionCookie)throw te(Vc);if(d)this.setItem(n,a);else{const{data:h,nonce:f}=await K(t_,P_,this.logger,this.performanceClient,o)(this.encryptionCookie.key,a,this.getContext(n)),y={id:this.encryptionCookie.id,nonce:f,data:h,lastUpdatedAt:r};this.setItem(n,JSON.stringify(y))}this.memoryStorage.setItem(n,a),this.broadcast.postMessage({key:n,value:a,context:this.getContext(n)})}removeItem(n){this.memoryStorage.containsKey(n)&&(this.memoryStorage.removeItem(n),this.broadcast.postMessage({key:n,value:null,context:this.getContext(n)})),window.localStorage.removeItem(n)}getKeys(){return Object.keys(window.localStorage)}containsKey(n){return window.localStorage.hasOwnProperty(n)}clear(){this.memoryStorage.clear(),Ia(this).forEach(o=>this.removeItem(o));const a=qn(this.clientId,this);a.idToken.forEach(o=>this.removeItem(o)),a.accessToken.forEach(o=>this.removeItem(o)),a.refreshToken.forEach(o=>this.removeItem(o)),this.getKeys().forEach(o=>{(o.startsWith(Lt)||o.indexOf(this.clientId)!==-1)&&this.removeItem(o)})}async importExistingCache(n){if(!this.encryptionCookie)return;let a=Ia(this);a=await this.importArray(a,n),a.length?this.setItem(Mo(),JSON.stringify(a)):this.removeItem(Mo());const o=qn(this.clientId,this);o.idToken=await this.importArray(o.idToken,n),o.accessToken=await this.importArray(o.accessToken,n),o.refreshToken=await this.importArray(o.refreshToken,n),o.idToken.length||o.accessToken.length||o.refreshToken.length?this.setItem(xo(this.clientId),JSON.stringify(o)):this.removeItem(xo(this.clientId))}async getItemFromEncryptedCache(n,a){if(!this.encryptionCookie)return null;const o=this.getItem(n);if(!o)return null;let r;try{r=JSON.parse(o)}catch{return null}return Yc(r)?r.id!==this.encryptionCookie.id?(this.performanceClient.incrementFields({encryptedCacheExpiredCount:1},a),null):(this.performanceClient.incrementFields({encryptedCacheCount:1},a),K(zv,Gv,this.logger,this.performanceClient,a)(this.encryptionCookie.key,r.nonce,this.getContext(n),r.data)):(this.performanceClient.incrementFields({unencryptedCacheCount:1},a),o)}async importArray(n,a){const o=[],r=[];return n.forEach(d=>{const h=this.getItemFromEncryptedCache(d,a).then(f=>{f?(this.memoryStorage.setItem(d,f),o.push(d)):this.removeItem(d)});r.push(h)}),await Promise.all(r),o}getContext(n){let a="";return n.includes(this.clientId)&&(a=this.clientId),a}updateCache(n,a){this.logger.trace("17cxcm",a);const o=this.performanceClient.startMeasurement($_);o.add({isBackground:!0});const{key:r,value:d,context:h}=n.data;if(!r){this.logger.error("0e10qr",a),o.end({success:!1,errorCode:"noKey"});return}if(h&&h!==this.clientId){this.logger.trace("04rtdy",a),o.end({success:!1,errorCode:"contextMismatch"});return}d?(this.memoryStorage.setItem(r,d),this.logger.verbose("1vzsgt",a)):(this.memoryStorage.removeItem(r),this.logger.verbose("04ypih",a)),o.end({success:!0})}}class ok{constructor(){if(!window.sessionStorage)throw cg(yS)}async initialize(){}getItem(n){return window.sessionStorage.getItem(n)}getUserData(n){return this.getItem(n)}setItem(n,a){window.sessionStorage.setItem(n,a)}async setUserData(n,a){this.setItem(n,a)}removeItem(n){window.sessionStorage.removeItem(n)}getKeys(){return Object.keys(window.sessionStorage)}containsKey(n){return window.sessionStorage.hasOwnProperty(n)}decryptData(){return Promise.resolve(null)}}const Ce={INITIALIZE_START:"msal:initializeStart",INITIALIZE_END:"msal:initializeEnd",ACTIVE_ACCOUNT_CHANGED:"msal:activeAccountChanged",LOGIN_SUCCESS:"msal:loginSuccess",ACQUIRE_TOKEN_START:"msal:acquireTokenStart",BROKERED_REQUEST_START:"msal:brokeredRequestStart",ACQUIRE_TOKEN_SUCCESS:"msal:acquireTokenSuccess",BROKERED_REQUEST_SUCCESS:"msal:brokeredRequestSuccess",ACQUIRE_TOKEN_FAILURE:"msal:acquireTokenFailure",BROKERED_REQUEST_FAILURE:"msal:brokeredRequestFailure",ACQUIRE_TOKEN_NETWORK_START:"msal:acquireTokenFromNetworkStart",HANDLE_REDIRECT_START:"msal:handleRedirectStart",HANDLE_REDIRECT_END:"msal:handleRedirectEnd",POPUP_OPENED:"msal:popupOpened",LOGOUT_START:"msal:logoutStart",LOGOUT_SUCCESS:"msal:logoutSuccess",LOGOUT_FAILURE:"msal:logoutFailure",LOGOUT_END:"msal:logoutEnd",RESTORE_FROM_BFCACHE:"msal:restoreFromBFCache",BROKER_CONNECTION_ESTABLISHED:"msal:brokerConnectionEstablished"};const rk="@azure/msal-browser",ks="5.3.0";function wa(l,n){const a=l.indexOf(n);a>-1&&l.splice(a,1)}class vf extends uf{constructor(n,a,o,r,d,h,f){super(n,o,r,d,f),this.cacheConfig=a,this.logger=r,this.internalStorage=new Tu,this.browserStorage=Xv(n,a.cacheLocation,r,d),this.temporaryCacheStorage=Xv(n,Ln.SessionStorage,r,d),this.cookieStorage=new bS,this.eventHandler=h}async initialize(n){this.performanceClient.addFields({cacheLocation:this.cacheConfig.cacheLocation,cacheRetentionDays:this.cacheConfig.cacheRetentionDays},n),await this.browserStorage.initialize(n),await this.migrateExistingCache(n),this.trackVersionChanges(n)}async migrateExistingCache(n){let a=Ia(this.browserStorage),o=qn(this.clientId,this.browserStorage);this.performanceClient.addFields({preMigrateAcntCount:a.length,preMigrateATCount:o.accessToken.length,preMigrateITCount:o.idToken.length,preMigrateRTCount:o.refreshToken.length},n);for(let d=0;d<Fc;d++){const h=d;await this.removeStaleAccounts(d,h,n)}for(let d=0;d<Vt;d++){const h=d;await this.migrateIdTokens(d,h,n)}const r=this.getKMSIValues();for(let d=0;d<Vt;d++)await this.migrateAccessTokens(d,r,n),await this.migrateRefreshTokens(d,r,n);a=Ia(this.browserStorage),o=qn(this.clientId,this.browserStorage),this.performanceClient.addFields({postMigrateAcntCount:a.length,postMigrateATCount:o.accessToken.length,postMigrateITCount:o.idToken.length,postMigrateRTCount:o.refreshToken.length},n)}async updateOldEntry(n,a){const o=this.browserStorage.getItem(n),r=this.validateAndParseJson(o||"");if(!r)return this.browserStorage.removeItem(n),null;if(!r.lastUpdatedAt)r.lastUpdatedAt=Date.now().toString(),this.setItem(n,JSON.stringify(r),a);else if(Tv(r.lastUpdatedAt,this.cacheConfig.cacheRetentionDays))return this.browserStorage.removeItem(n),this.performanceClient.incrementFields({expiredCacheRemovedCount:1},a),null;const d=Yc(r)?await this.browserStorage.decryptData(n,r,a):r;return!d||!fu(d)?(this.performanceClient.incrementFields({invalidCacheCount:1},a),null):(bv(d)||wv(d))&&d.expiresOn&&iu(d.expiresOn,hC)?(this.browserStorage.removeItem(n),this.performanceClient.incrementFields({expiredCacheRemovedCount:1},a),null):d}async removeStaleAccounts(n,a,o){const r=Ia(this.browserStorage,n);if(r.length!==0){for(const d of[...r]){this.performanceClient.incrementFields({oldAcntCount:1},o);const h=this.browserStorage.getItem(d),f=this.validateAndParseJson(h||"");if(!f){wa(r,d);continue}if(f.lastUpdatedAt)Tv(f.lastUpdatedAt,this.cacheConfig.cacheRetentionDays)&&(await this.removeAccountOldSchema(d,f,a,o),wa(r,d));else{f.lastUpdatedAt=Date.now().toString(),this.setItem(d,JSON.stringify(f),o);continue}}this.setAccountKeys(r,o,n)}}async removeAccountOldSchema(n,a,o,r){const h=(Yc(a)?await this.browserStorage.decryptData(n,a,r):a)?.homeAccountId;if(h){const f=this.getTokenKeys(o);[...f.idToken].filter(y=>y.includes(h)).forEach(y=>{this.browserStorage.removeItem(y),wa(f.idToken,y)}),[...f.accessToken].filter(y=>y.includes(h)).forEach(y=>{this.browserStorage.removeItem(y),wa(f.accessToken,y)}),[...f.refreshToken].filter(y=>y.includes(h)).forEach(y=>{this.browserStorage.removeItem(y),wa(f.refreshToken,y)}),this.setTokenKeys(f,r,o)}this.performanceClient.incrementFields({expiredAcntRemovedCount:1},r),this.browserStorage.removeItem(n)}getKMSIValues(){const n={},a=this.getTokenKeys().idToken;for(const o of a){const r=this.browserStorage.getUserData(o);if(r){const d=JSON.parse(r),h=Fi(d.secret,An);h&&(n[d.homeAccountId]=Ss(h))}}return n}async migrateIdTokens(n,a,o){const r=qn(this.clientId,this.browserStorage,n);if(r.idToken.length===0)return;const d=qn(this.clientId,this.browserStorage,Vt),h=Ia(this.browserStorage),f=Ia(this.browserStorage,a);for(const y of[...r.idToken]){this.performanceClient.incrementFields({oldITCount:1},o);const p=await this.updateOldEntry(y,o);if(!p){wa(r.idToken,y);continue}const S=h.find(ue=>ue.includes(p.homeAccountId)),T=f.find(ue=>ue.includes(p.homeAccountId));let k=null;if(S)k=this.getAccount(S,o);else if(T){const ue=this.browserStorage.getItem(T),ie=this.validateAndParseJson(ue||"");k=ie&&Yc(ie)?await this.browserStorage.decryptData(T,ie,o):ie}if(!k){this.performanceClient.incrementFields({skipITMigrateCount:1},o);continue}const N=Fi(p.secret,An),F=this.generateCredentialKey(p),Y=this.getIdTokenCredential(F,o),pe=Object.keys(N).includes("signin_state"),Z=Y&&Object.keys(Fi(Y.secret,An)||{}).includes("signin_state");if(!Y||p.lastUpdatedAt>Y.lastUpdatedAt&&(pe||!Z)){const ue=k.tenantProfiles||[],ie=Vf(N)||k.realm;if(ie&&!ue.find(ee=>ee.tenantId===ie)){const ee=zo(k.homeAccountId,k.localAccountId,ie,N);ue.push(ee)}k.tenantProfiles=ue;const fe=this.generateAccountKey(As(k)),W=Ss(N);await this.setUserData(fe,JSON.stringify(k),o,k.lastUpdatedAt,W),h.includes(fe)||h.push(fe),await this.setUserData(F,JSON.stringify(p),o,p.lastUpdatedAt,W),this.performanceClient.incrementFields({migratedITCount:1},o),d.idToken.push(F)}}this.setTokenKeys(r,o,n),this.setTokenKeys(d,o),this.setAccountKeys(h,o)}async migrateAccessTokens(n,a,o){const r=qn(this.clientId,this.browserStorage,n);if(r.accessToken.length===0)return;const d=qn(this.clientId,this.browserStorage,Vt);for(const h of[...r.accessToken]){this.performanceClient.incrementFields({oldATCount:1},o);const f=await this.updateOldEntry(h,o);if(!f){wa(r.accessToken,h);continue}if(!(f.homeAccountId in a)){this.performanceClient.incrementFields({skipATMigrateCount:1},o);continue}const y=this.generateCredentialKey(f),p=a[f.homeAccountId];if(!d.accessToken.includes(y))await this.setUserData(y,JSON.stringify(f),o,f.lastUpdatedAt,p),this.performanceClient.incrementFields({migratedATCount:1},o),d.accessToken.push(y);else{const S=this.getAccessTokenCredential(y,o);(!S||f.lastUpdatedAt>S.lastUpdatedAt)&&(await this.setUserData(y,JSON.stringify(f),o,f.lastUpdatedAt,p),this.performanceClient.incrementFields({migratedATCount:1},o))}}this.setTokenKeys(r,o,n),this.setTokenKeys(d,o)}async migrateRefreshTokens(n,a,o){const r=qn(this.clientId,this.browserStorage,n);if(r.refreshToken.length===0)return;const d=qn(this.clientId,this.browserStorage,Vt);for(const h of[...r.refreshToken]){this.performanceClient.incrementFields({oldRTCount:1},o);const f=await this.updateOldEntry(h,o);if(!f){wa(r.refreshToken,h);continue}if(!(f.homeAccountId in a)){this.performanceClient.incrementFields({skipRTMigrateCount:1},o);continue}const y=this.generateCredentialKey(f),p=a[f.homeAccountId];if(!d.refreshToken.includes(y))await this.setUserData(y,JSON.stringify(f),o,f.lastUpdatedAt,p),this.performanceClient.incrementFields({migratedRTCount:1},o),d.refreshToken.push(y);else{const S=this.getRefreshTokenCredential(y,o);(!S||f.lastUpdatedAt>S.lastUpdatedAt)&&(await this.setUserData(y,JSON.stringify(f),o,f.lastUpdatedAt,p),this.performanceClient.incrementFields({migratedRTCount:1},o))}}this.setTokenKeys(r,o,n),this.setTokenKeys(d,o)}trackVersionChanges(n){const a=this.browserStorage.getItem(Yv);a&&(this.logger.info("1wuc87",n),this.performanceClient.addFields({previousLibraryVersion:a},n)),a!==ks&&this.setItem(Yv,ks,n)}validateAndParseJson(n){if(!n)return null;try{const a=JSON.parse(n);return a&&typeof a=="object"?a:null}catch{return null}}setItem(n,a,o){const r=new Array(Vt+1).fill(0),d=[],h=20;for(let f=0;f<=h;f++)try{if(this.browserStorage.setItem(n,a),f>0)for(let y=0;y<=Vt;y++){const p=r.slice(0,y).reduce((T,k)=>T+k,0);if(p>=f)break;const S=f>p+r[y]?p+r[y]:f;f>p&&r[y]>0&&this.removeAccessTokenKeys(d.slice(p,S),o,y)}break}catch(y){const p=cf(y);if(p.errorCode===lf&&f<h){if(!d.length)for(let S=0;S<=Vt;S++)if(n===xo(this.clientId,S)){const T=JSON.parse(a).accessToken;d.push(...T),r[S]=T.length}else{const T=this.getTokenKeys(S).accessToken;d.push(...T),r[S]=T.length}if(d.length<=f)throw p;this.removeAccessToken(d[f],o,!1)}else throw p}}async setUserData(n,a,o,r,d){const h=new Array(Vt+1).fill(0),f=[],y=20;for(let p=0;p<=y;p++)try{if(await K(this.browserStorage.setUserData.bind(this.browserStorage),U0,this.logger,this.performanceClient,o)(n,a,o,r,d),p>0)for(let S=0;S<=Vt;S++){const T=h.slice(0,S).reduce((N,F)=>N+F,0);if(T>=p)break;const k=p>T+h[S]?T+h[S]:p;p>T&&h[S]>0&&this.removeAccessTokenKeys(f.slice(T,k),o,S)}break}catch(S){const T=cf(S);if(T.errorCode===lf&&p<y){if(!f.length)for(let k=0;k<=Vt;k++){const N=this.getTokenKeys(k).accessToken;f.push(...N),h[k]=N.length}if(f.length<=p)throw T;this.removeAccessToken(f[p],o,!1)}else throw T}}getAccount(n,a){this.logger.trace("1lfvm6",a);const o=this.browserStorage.getUserData(n);if(!o)return this.removeAccountKeyFromMap(n,a),null;const r=this.validateAndParseJson(o);if(!r||!$b(r))return null;const d=uf.toObject({},r);return this.performanceClient.addFields({accountCachedBy:uw(d.cachedByApiId)},a),d}async setAccount(n,a,o,r){this.logger.trace("1bz3wr",a);const d=this.generateAccountKey(As(n)),h=Date.now().toString();n.lastUpdatedAt=h,n.cachedByApiId=r,await this.setUserData(d,JSON.stringify(n),a,h,o),this.addAccountKeyToMap(d,a),this.performanceClient.addFields({kmsi:o},a)}setAccountKeys(n,a,o=Fc){n.length===0?this.removeItem(Mo(o)):this.setItem(Mo(o),JSON.stringify(n),a)}getAccountKeys(){return Ia(this.browserStorage)}addAccountKeyToMap(n,a){this.logger.trace("0rb85k",a),this.logger.tracePii("1l9bdo",a);const o=this.getAccountKeys();return o.indexOf(n)===-1?(o.push(n),this.setItem(Mo(),JSON.stringify(o),a),this.logger.verbose("0xia39",a),!0):(this.logger.verbose("0161kk",a),!1)}removeAccountKeyFromMap(n,a){this.logger.trace("1jpigu",a),this.logger.tracePii("1xzspl",a);const o=this.getAccountKeys(),r=o.indexOf(n);r>-1?(o.splice(r,1),this.setAccountKeys(o,a)):this.logger.trace("1dytu2",a)}removeAccount(n,a){const o=this.getActiveAccount(a);o?.homeAccountId===n.homeAccountId&&o?.environment===n.environment&&this.setActiveAccount(null,a),super.removeAccount(n,a),this.removeAccountKeyFromMap(this.generateAccountKey(n),a),this.browserStorage.getKeys().forEach(r=>{r.includes(n.homeAccountId)&&r.includes(n.environment)&&this.browserStorage.removeItem(r)})}removeIdToken(n,a){super.removeIdToken(n,a);const o=this.getTokenKeys(),r=o.idToken.indexOf(n);r>-1&&(this.logger.info("05udv9",a),o.idToken.splice(r,1),this.setTokenKeys(o,a))}removeAccessToken(n,a,o=!0){super.removeAccessToken(n,a),o&&this.removeAccessTokenKeys([n],a)}removeAccessTokenKeys(n,a,o=Vt){this.logger.trace("17o18n",a);const r=this.getTokenKeys(o);let d=0;if(n.forEach(h=>{const f=r.accessToken.indexOf(h);f>-1&&(r.accessToken.splice(f,1),d++)}),d>0){this.logger.info("15i5d5",a),this.setTokenKeys(r,a,o);return}}removeRefreshToken(n,a){super.removeRefreshToken(n,a);const o=this.getTokenKeys(),r=o.refreshToken.indexOf(n);r>-1&&(this.logger.info("1f4fq3",a),o.refreshToken.splice(r,1),this.setTokenKeys(o,a))}getTokenKeys(n=Vt){return qn(this.clientId,this.browserStorage,n)}setTokenKeys(n,a,o=Vt){if(n.idToken.length===0&&n.accessToken.length===0&&n.refreshToken.length===0){this.removeItem(xo(this.clientId,o));return}else this.setItem(xo(this.clientId,o),JSON.stringify(n),a)}getIdTokenCredential(n,a){const o=this.browserStorage.getUserData(n);if(!o)return this.logger.trace("1jukz6",a),this.removeIdToken(n,a),null;const r=this.validateAndParseJson(o);return!r||!L0(r)?(this.logger.trace("1jukz6",a),null):(this.logger.trace("01ju66",a),r)}async setIdTokenCredential(n,a,o){this.logger.trace("13hjll",a);const r=this.generateCredentialKey(n),d=Date.now().toString();n.lastUpdatedAt=d,await this.setUserData(r,JSON.stringify(n),a,d,o);const h=this.getTokenKeys();h.idToken.indexOf(r)===-1&&(this.logger.info("07jy92",a),h.idToken.push(r),this.setTokenKeys(h,a))}getAccessTokenCredential(n,a){const o=this.browserStorage.getUserData(n);if(!o)return this.logger.trace("0bqvx8",a),this.removeAccessTokenKeys([n],a),null;const r=this.validateAndParseJson(o);return!r||!bv(r)?(this.logger.trace("0bqvx8",a),null):(this.logger.trace("1o81rl",a),r)}async setAccessTokenCredential(n,a,o){this.logger.trace("1pondb",a);const r=this.generateCredentialKey(n),d=Date.now().toString();n.lastUpdatedAt=d,await this.setUserData(r,JSON.stringify(n),a,d,o);const h=this.getTokenKeys(),f=h.accessToken.indexOf(r);f!==-1&&h.accessToken.splice(f,1),this.logger.trace("1onhey",a),h.accessToken.push(r),this.setTokenKeys(h,a)}getRefreshTokenCredential(n,a){const o=this.browserStorage.getUserData(n);if(!o)return this.logger.trace("0jlizt",a),this.removeRefreshToken(n,a),null;const r=this.validateAndParseJson(o);return!r||!wv(r)?(this.logger.trace("0jlizt",a),null):(this.logger.trace("0nokxi",a),r)}async setRefreshTokenCredential(n,a,o){this.logger.trace("0tcg8d",a);const r=this.generateCredentialKey(n),d=Date.now().toString();n.lastUpdatedAt=d,await this.setUserData(r,JSON.stringify(n),a,d,o);const h=this.getTokenKeys();h.refreshToken.indexOf(r)===-1&&(this.logger.info("0eckjs",a),h.refreshToken.push(r),this.setTokenKeys(h,a))}getAppMetadata(n,a){const o=this.browserStorage.getItem(n);if(!o)return this.logger.trace("1q101h",a),null;const r=this.validateAndParseJson(o);return!r||!G0(n,r)?(this.logger.trace("1q101h",a),null):(this.logger.trace("19pvg2",a),r)}setAppMetadata(n,a){this.logger.trace("0cyma6",a);const o=P0(n);this.setItem(o,JSON.stringify(n),a)}getServerTelemetry(n,a){const o=this.browserStorage.getItem(n);if(!o)return this.logger.trace("0jk19c",a),null;const r=this.validateAndParseJson(o);return!r||!B0(n,r)?(this.logger.trace("0jk19c",a),null):(this.logger.trace("12jguk",a),r)}setServerTelemetry(n,a,o){this.logger.trace("1poh61",o),this.setItem(n,JSON.stringify(a),o)}getAuthorityMetadata(n,a){const o=this.internalStorage.getItem(n);if(!o)return this.logger.trace("1r39oe",a),null;const r=this.validateAndParseJson(o);return r&&V0(n,r)?(this.logger.trace("1ohvk3",a),r):null}getAuthorityMetadataKeys(){return this.internalStorage.getKeys().filter(a=>this.isAuthorityMetadata(a))}setWrapperMetadata(n,a){this.internalStorage.setItem(Bc.WRAPPER_SKU,n),this.internalStorage.setItem(Bc.WRAPPER_VER,a)}getWrapperMetadata(){const n=this.internalStorage.getItem(Bc.WRAPPER_SKU)||"",a=this.internalStorage.getItem(Bc.WRAPPER_VER)||"";return[n,a]}setAuthorityMetadata(n,a,o){this.logger.trace("07w8n2",o),this.internalStorage.setItem(n,JSON.stringify(a))}getActiveAccount(n){const a=this.generateCacheKey(ov.ACTIVE_ACCOUNT_FILTERS),o=this.browserStorage.getItem(a);if(!o)return this.logger.trace("08gw0e",n),null;const r=this.validateAndParseJson(o);return r?(this.logger.trace("1t3ch7",n),this.getAccountInfoFilteredBy({homeAccountId:r.homeAccountId,localAccountId:r.localAccountId,tenantId:r.tenantId},n)):(this.logger.trace("0me1up",n),null)}setActiveAccount(n,a){const o=this.generateCacheKey(ov.ACTIVE_ACCOUNT_FILTERS);if(n){this.logger.verbose("0rsj80",a);const r={homeAccountId:n.homeAccountId,localAccountId:n.localAccountId,tenantId:n.tenantId};this.setItem(o,JSON.stringify(r),a)}else this.logger.verbose("1bp5z5",a),this.browserStorage.removeItem(o);this.eventHandler.emitEvent(Ce.ACTIVE_ACCOUNT_CHANGED,a)}getThrottlingCache(n,a){const o=this.browserStorage.getItem(n);if(!o)return this.logger.trace("1h4wa6",a),null;const r=this.validateAndParseJson(o);return!r||!K0(n,r)?(this.logger.trace("1h4wa6",a),null):(this.logger.trace("0of6n8",a),r)}setThrottlingCache(n,a,o){this.logger.trace("0wfgh6",o),this.setItem(n,JSON.stringify(a),o)}getTemporaryCache(n,a,o){const r=o?this.generateCacheKey(n):n,d=this.temporaryCacheStorage.getItem(r);if(!d){if(this.cacheConfig.cacheLocation===Ln.LocalStorage){const h=this.browserStorage.getItem(r);if(h)return this.logger.trace("1yt61y",a),h}return this.logger.trace("1qhy81",a),null}return d}setTemporaryCache(n,a,o){const r=o?this.generateCacheKey(n):n;this.temporaryCacheStorage.setItem(r,a)}removeItem(n){this.browserStorage.removeItem(n)}removeTemporaryItem(n){this.temporaryCacheStorage.removeItem(n)}getKeys(){return this.browserStorage.getKeys()}clear(n){this.removeAllAccounts(n),this.removeAppMetadata(n),this.temporaryCacheStorage.getKeys().forEach(a=>{(a.indexOf(Lt)!==-1||a.indexOf(this.clientId)!==-1)&&this.removeTemporaryItem(a)}),this.browserStorage.getKeys().forEach(a=>{(a.indexOf(Lt)!==-1||a.indexOf(this.clientId)!==-1)&&this.browserStorage.removeItem(a)}),this.internalStorage.clear()}generateCacheKey(n){return zn.startsWith(n,Lt)?n:`${Lt}.${this.clientId}.${n}`}generateCredentialKey(n){const a=n.credentialType===zt.REFRESH_TOKEN&&n.familyId||n.clientId,o=n.tokenType&&n.tokenType.toLowerCase()!==Xe.BEARER.toLowerCase()?n.tokenType.toLowerCase():"";return[`${Lt}.${Vt}`,n.homeAccountId,n.environment,n.credentialType,a,n.realm||"",n.target||"",o].join(Fv).toLowerCase()}generateAccountKey(n){const a=n.homeAccountId.split(".")[1];return[`${Lt}.${Fc}`,n.homeAccountId,n.environment,a||n.tenantId||""].join(Fv).toLowerCase()}resetRequestCache(n){this.logger.trace("0h0ynu",n),this.removeTemporaryItem(this.generateCacheKey(Et.REQUEST_PARAMS)),this.removeTemporaryItem(this.generateCacheKey(Et.VERIFIER)),this.removeTemporaryItem(this.generateCacheKey(Et.ORIGIN_URI)),this.removeTemporaryItem(this.generateCacheKey(Et.URL_HASH)),this.removeTemporaryItem(this.generateCacheKey(Et.NATIVE_REQUEST)),this.setInteractionInProgress(!1,void 0)}cacheAuthorizeRequest(n,a,o){this.logger.trace("1tzef5",a);const r=dl(JSON.stringify(n));if(this.setTemporaryCache(Et.REQUEST_PARAMS,r,!0),o){const d=dl(o);this.setTemporaryCache(Et.VERIFIER,d,!0)}}getCachedRequest(n){this.logger.trace("0uen20",n);const a=this.getTemporaryCache(Et.REQUEST_PARAMS,n,!0);if(!a)throw te(kw);const o=this.getTemporaryCache(Et.VERIFIER,n,!0);let r,d="";try{r=JSON.parse(An(a)),o&&(d=An(o))}catch{throw this.logger.errorPii("0ewsey",n),this.logger.error("0tvdic",n),te(Iw)}return[r,d]}getCachedNativeRequest(){this.logger.trace("1yxcdm","");const n=this.getTemporaryCache(Et.NATIVE_REQUEST,"",!0);if(!n)return this.logger.trace("0mnxd4",""),null;const a=this.validateAndParseJson(n);return a||(this.logger.error("0rrkip",""),null)}isInteractionInProgress(n){const a=this.getInteractionInProgress()?.clientId;return n?a===this.clientId:!!a}getInteractionInProgress(){const n=`${Lt}.${Et.INTERACTION_STATUS_KEY}`,a=this.getTemporaryCache(n,"",!1);try{return a?JSON.parse(a):null}catch{return this.logger.error("0jjyys",""),this.removeTemporaryItem(n),this.resetRequestCache(""),vS(window),null}}setInteractionInProgress(n,a=Oa.SIGNIN,o=!1,r=""){const d=`${Lt}.${Et.INTERACTION_STATUS_KEY}`;if(n){if(this.getInteractionInProgress())if(o)this.logger.warning("1pmscr",r),r_(this.logger,r),this.removeTemporaryItem(d);else throw te(vw);this.setTemporaryCache(d,JSON.stringify({clientId:this.clientId,type:a}),!1)}else!n&&this.getInteractionInProgress()?.clientId===this.clientId&&this.removeTemporaryItem(d)}async hydrateCache(n,a){const o=Jf(n.account.homeAccountId,n.account.environment,n.idToken,this.clientId,n.tenantId),r=Xf(n.account.homeAccountId,n.account.environment,n.accessToken,this.clientId,n.tenantId,n.scopes.join(" "),n.expiresOn?Sv(n.expiresOn):0,n.extExpiresOn?Sv(n.extExpiresOn):0,An,void 0,n.tokenType,void 0,a.sshKid),d={idToken:o,accessToken:r};return this.saveCacheRecord(d,n.correlationId,Ss(Fi(n.idToken,An)),He.hydrateCache)}async saveCacheRecord(n,a,o,r,d){try{await super.saveCacheRecord(n,a,o,r,d)}catch(h){if(h instanceof Oo&&this.performanceClient&&a)try{const f=this.getTokenKeys();this.performanceClient.addFields({cacheRtCount:f.refreshToken.length,cacheIdCount:f.idToken.length,cacheAtCount:f.accessToken.length},a)}catch{}throw h}}}function Xv(l,n,a,o){try{switch(n){case Ln.LocalStorage:return new sk(l,a,o);case Ln.SessionStorage:return new ok;case Ln.MemoryStorage:default:break}}catch(r){a.error(r,"")}return new Tu}const lk=(l,n,a,o)=>{const r={cacheLocation:Ln.MemoryStorage,cacheRetentionDays:5};return new vf(l,r,Wc,n,a,o)};function ck(l,n,a,o,r){return l.verbose("1yd030",o),a?n.getAllAccounts(r,o):[]}function uk(l,n,a,o){if(n.trace("0u7b90",o),Object.keys(l).length===0)return n.warning("1kz0cu",o),null;const r=a.getAccountInfoFilteredBy(l,o);return r?(n.verbose("0btgll",o),r):(n.verbose("0ltaj5",o),null)}function dk(l,n,a){n.setActiveAccount(l,a)}function hk(l,n){return l.getActiveAccount(n)}const fk="msal.broadcast.event";class gk{constructor(n){this.eventCallbacks=new Map,this.logger=n||new vi({}),typeof BroadcastChannel<"u"&&(this.broadcastChannel=new BroadcastChannel(fk)),this.invokeCrossTabCallbacks=this.invokeCrossTabCallbacks.bind(this)}addEventCallback(n,a,o){if(typeof window<"u"){const r=o||pf();return this.eventCallbacks.has(r)?(this.logger.error("1578i0",""),null):(this.eventCallbacks.set(r,[n,a||[]]),this.logger.verbose("1cnec4",""),r)}return null}removeEventCallback(n){this.eventCallbacks.delete(n),this.logger.verbose("12zotd","")}emitEvent(n,a,o,r,d){const h={eventType:n,interactionType:o||null,payload:r||null,error:d||null,correlationId:a,timestamp:Date.now()};switch(n){case Ce.LOGIN_SUCCESS:case Ce.LOGOUT_SUCCESS:case Ce.ACTIVE_ACCOUNT_CHANGED:this.broadcastChannel?.postMessage(h)}this.invokeCallbacks(h)}invokeCallbacks(n){this.eventCallbacks.forEach(([a,o],r)=>{(o.length===0||o.includes(n.eventType))&&(this.logger.verbose("15jpwk",""),a.apply(null,[n]))})}invokeCrossTabCallbacks(n){const a=n.data;this.invokeCallbacks(a)}subscribeCrossTab(){this.broadcastChannel?.addEventListener("message",this.invokeCrossTabCallbacks)}unsubscribeCrossTab(){this.broadcastChannel?.removeEventListener("message",this.invokeCrossTabCallbacks)}}class wS{constructor(n,a,o,r,d,h,f,y,p){this.config=n,this.browserStorage=a,this.browserCrypto=o,this.networkClient=this.config.system.networkClient,this.eventHandler=d,this.navigationClient=h,this.platformAuthProvider=p,this.correlationId=y,this.logger=r.clone(jn.MSAL_SKU,ks),this.performanceClient=f}}function ou(l,n,a,o){a.verbose("0bd1la",o);const r=l||n||"";return Ve.getAbsoluteUrl(r,Na())}function hn(l,n,a,o,r,d){r.verbose("1p12tq",a);const h={clientId:n,correlationId:a,apiId:l,forceRefresh:!1,wrapperSKU:o.getWrapperMetadata()[0],wrapperVer:o.getWrapperMetadata()[1]};return new ul(h,o)}async function Yi(l,n,a,o,r,d,h,f,y){const p=f&&f.hasOwnProperty("instance_aware")?f.instance_aware:void 0,S={protocolMode:l.system.protocolMode,OIDCOptions:l.auth.OIDCOptions,knownAuthorities:l.auth.knownAuthorities,cloudDiscoveryMetadata:l.auth.cloudDiscoveryMetadata,authorityMetadata:l.auth.authorityMetadata},T=d||l.auth.authority,k=p?.length?p==="true":l.auth.instanceAware,N=y&&k?l.auth.authority.replace(Ve.getDomainFromUrl(T),y.environment):T,F=ln.generateAuthority(N,h||l.auth.azureCloudOptions),Y=await K(WC,O_,r,a,n)(F,l.system.networkClient,o,S,r,n,a);if(y&&!Y.isAlias(y.environment))throw nt(ob);return Y}async function mg(l,n,a,o,r){if(r)try{l.removeAccount(r,o),a.verbose("0s4z6h",o)}catch{a.error("0mgg1d",o)}else try{a.verbose("0zj631",o),l.clear(o),await n.clearKeystore(o)}catch{a.error("12ih0c",o)}}async function pg(l,n,a,o,r){const d=l.authority||n.auth.authority,h=[...l&&l.scopes||[]],f={...l,correlationId:l.correlationId,authority:d,scopes:h};if(!f.authenticationScheme)f.authenticationScheme=Xe.BEARER,o.verbose("1l4fwv",r);else{if(f.authenticationScheme===Xe.SSH){if(!l.sshJwk)throw nt(Rf);if(!l.sshKid)throw nt(ib)}o.verbose("1ecmns",r)}return f}async function mk(l,n,a,o,r){const d=await K(pg,dg,r,o,l.correlationId)(l,a,o,r,l.correlationId);return{...l,...d,account:n,forceRefresh:l.forceRefresh||!1}}function _S(l,n){let a;const o=l.httpMethod;if(n===dn.EAR){if(o&&o!==Io.POST)throw nt(rb);a=Io.POST}else a=o||Io.GET;return a}class Bo extends wS{initializeLogoutRequest(n){this.logger.verbose("0546u4",this.correlationId);const a={correlationId:this.correlationId,...n};if(n)if(n.logoutHint)this.logger.verbose("12k4l4",this.correlationId);else if(n.account){const o=this.getLogoutHintFromIdTokenClaims(n.account);o&&(this.logger.verbose("0st5di",this.correlationId),a.logoutHint=o)}else this.logger.verbose("0pdtc3",this.correlationId);else this.logger.verbose("07ndze",this.correlationId);return!n||n.postLogoutRedirectUri!==null?n&&n.postLogoutRedirectUri?(this.logger.verbose("1vamm6",a.correlationId),a.postLogoutRedirectUri=Ve.getAbsoluteUrl(n.postLogoutRedirectUri,Na())):this.config.auth.postLogoutRedirectUri===null?this.logger.verbose("15m5g7",a.correlationId):this.config.auth.postLogoutRedirectUri?(this.logger.verbose("1f4xlz",a.correlationId),a.postLogoutRedirectUri=Ve.getAbsoluteUrl(this.config.auth.postLogoutRedirectUri,Na())):(this.logger.verbose("17s5rf",a.correlationId),a.postLogoutRedirectUri=Ve.getAbsoluteUrl(Na(),Na())):this.logger.verbose("0ljv63",a.correlationId),a}getLogoutHintFromIdTokenClaims(n){const a=n.idTokenClaims;if(a){if(a.login_hint)return a.login_hint;this.logger.verbose("0mvp54",this.correlationId)}else this.logger.verbose("1e7bdp",this.correlationId);return null}async createAuthCodeClient(n){const a=await K(this.getClientConfiguration.bind(this),Cu,this.logger,this.performanceClient,this.correlationId)(n);return new eS(a,this.performanceClient)}async getClientConfiguration(n){const{serverTelemetryManager:a,requestAuthority:o,requestAzureCloudOptions:r,requestExtraQueryParameters:d,account:h}=n,f=n.authority||await K(Yi,Ts,this.logger,this.performanceClient,this.correlationId)(this.config,this.correlationId,this.performanceClient,this.browserStorage,this.logger,o,r,d,h),y=this.config.system.loggerOptions;return{authOptions:{clientId:this.config.auth.clientId,authority:f,clientCapabilities:this.config.auth.clientCapabilities,redirectUri:this.config.auth.redirectUri},systemOptions:{tokenRenewalOffsetSeconds:this.config.system.tokenRenewalOffsetSeconds,preventCorsPreflight:!0},loggerOptions:{loggerCallback:y.loggerCallback,piiLoggingEnabled:y.piiLoggingEnabled,logLevel:y.logLevel,correlationId:this.correlationId},cryptoInterface:this.browserCrypto,networkInterface:this.networkClient,storageInterface:this.browserStorage,serverTelemetryManager:a,libraryInfo:{sku:jn.MSAL_SKU,version:ks,cpu:"",os:""},telemetry:this.config.telemetry}}}async function Eu(l,n,a,o,r,d,h,f){const y=ou(l.redirectUri,a.auth.redirectUri,d,f),p={interactionType:n},S=g0(o,l&&l.state||"",p),k={...await K(pg,dg,d,h,f)({...l,correlationId:f},a,h,d,f),redirectUri:y,state:S,nonce:l.nonce||ws(),responseMode:a.auth.OIDCOptions.responseMode},N={...k,httpMethod:_S(k,a.system.protocolMode)};if(l.loginHint||l.sid)return N;const F=l.account||r.getActiveAccount(f);return F&&(d.verbose("1eqlb3",f),d.verbosePii("0tf99t",f),N.account=F),N}function pk(l,n){if(!n)return null;try{return ml(l.base64Decode,n).libraryState.meta}catch{throw Q(ll)}}function al(l,n,a,o){const r=$c(l);if(!r)throw UC(l)?(a.error("13pl0s",o),a.errorPii("1097vx",o),te(pw)):(a.error("18h0l1",o),te(mw));return r}function yk(l,n,a){if(!l.state)throw te(tg);const o=pk(n,l.state);if(!o)throw te(rS);if(o.interactionType!==a)throw te(yw)}class kS{constructor(n,a,o,r,d){this.authModule=n,this.browserStorage=a,this.authCodeRequest=o,this.logger=r,this.performanceClient=d}async handleCodeResponse(n,a,o){let r;try{r=nw(n,a.state)}catch(d){throw d instanceof Os&&d.subError===gf?te(gf):d}return K(this.handleCodeResponseFromServer.bind(this),YC,this.logger,this.performanceClient,a.correlationId)(r,a,o)}async handleCodeResponseFromServer(n,a,o,r=!0){if(this.logger.trace("0mf2hb",a.correlationId),this.authCodeRequest.code=n.code,r&&(n.nonce=a.nonce||void 0),n.state=a.state,n.client_info)this.authCodeRequest.clientInfo=n.client_info;else{const h=this.createCcsCredentials(a);h&&(this.authCodeRequest.ccsCredential=h)}return await K(this.authModule.acquireToken.bind(this.authModule),I_,this.logger,this.performanceClient,a.correlationId)(this.authCodeRequest,o,n)}createCcsCredentials(n){return n.account?{credential:n.account.homeAccountId,type:Xn.HOME_ACCOUNT_ID}:n.loginHint?{credential:n.loginHint,type:Xn.UPN}:null}}const vk="ContentError",Ck="PageException",Sk="user_switch";const Tk="USER_INTERACTION_REQUIRED",Ek="USER_CANCEL",Ak="NO_NETWORK",bk="PERSISTENT_ERROR",wk="DISABLED",_k="ACCOUNT_UNAVAILABLE",kk="UX_NOT_ALLOWED";const Ik=-2147186943;class pi extends tt{constructor(n,a,o){super(n,a||yu(n)),Object.setPrototypeOf(this,pi.prototype),this.name="NativeAuthError",this.ext=o}}function _o(l){if(l.ext&&l.ext.status&&(l.ext.status===bk||l.ext.status===wk)||l.ext&&l.ext.error&&l.ext.error===Ik)return!0;switch(l.errorCode){case vk:case Ck:return!0;default:return!1}}function ru(l,n,a){if(a&&a.status)switch(a.status){case _k:return nu(l0,yu(l));case Tk:return new $n(l,n);case Ek:return te(gf);case Ak:return te(mf);case kk:return nu(VC)}return new pi(l,n,a)}class IS extends Bo{async acquireToken(n){const a=hn(He.acquireTokenSilent_silentFlow,this.config.auth.clientId,this.correlationId,this.browserStorage,this.logger),o=await K(this.getClientConfiguration.bind(this),Cu,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:a,requestAuthority:n.authority,requestAzureCloudOptions:n.azureCloudOptions,account:n.account}),r=new W0(o,this.performanceClient);this.logger.verbose("0wa871",this.correlationId);try{const h=(await K(r.acquireCachedToken.bind(r),w_,this.logger,this.performanceClient,n.correlationId)(n))[0];return this.performanceClient.addFields({fromCache:!0},n.correlationId),h}catch(d){throw d instanceof yl&&d.errorCode===cS&&this.logger.verbose("06wena",this.correlationId),d}}logout(n){this.logger.verbose("1rkurh",this.correlationId);const a=this.initializeLogoutRequest(n);return mg(this.browserStorage,this.browserCrypto,this.logger,this.correlationId,a.account)}}class Qc extends wS{constructor(n,a,o,r,d,h,f,y,p,S,T,k){super(n,a,o,r,d,h,y,k,p),this.apiId=f,this.accountId=S,this.platformAuthProvider=p,this.nativeStorageManager=T,this.silentCacheClient=new IS(n,this.nativeStorageManager,o,r,d,h,y,k,p);const N=this.platformAuthProvider.getExtensionName();this.skus=ul.makeExtraSkuString({libraryName:jn.MSAL_SKU,libraryVersion:ks,extensionName:N,extensionVersion:this.platformAuthProvider.getExtensionVersion()})}addRequestSKUs(n){n.extraParameters={...n.extraParameters,[YA]:this.skus}}async acquireToken(n,a){this.logger.trace("03qeos",this.correlationId);const o=this.performanceClient.startMeasurement(ES,n.correlationId),r=Wn(),d=hn(this.apiId,this.config.auth.clientId,this.correlationId,this.browserStorage,this.logger);try{const h=await this.initializeNativeRequest(n);try{const y=await this.acquireTokensFromCache(this.accountId,h);return o.end({success:!0,isNativeBroker:!1,fromCache:!0}),y}catch(y){if(a===Zt.AccessToken)throw this.logger.info("0eitbc",this.correlationId),y;this.logger.info("0957j1",this.correlationId)}const f=await this.platformAuthProvider.sendMessage(h);return await this.handleNativeResponse(f,h,r).then(y=>(o.end({success:!0,isNativeBroker:!0,requestId:y.requestId}),d.clearNativeBrokerErrorCode(),y)).catch(y=>{throw o.end({success:!1,errorCode:y.errorCode,subErrorCode:y.subError,isNativeBroker:!0}),y})}catch(h){throw h instanceof pi&&d.setNativeBrokerErrorCode(h.errorCode),h}}createSilentCacheRequest(n,a){return{authority:n.authority,correlationId:this.correlationId,scopes:Ft.fromString(n.scope).asArray(),account:a,forceRefresh:!1}}async acquireTokensFromCache(n,a){if(!n)throw this.logger.warning("1ndf3e",this.correlationId),Q(hv);const o=this.browserStorage.getBaseAccountInfo({nativeAccountId:n},a.correlationId);if(!o)throw Q(hv);try{const r=this.createSilentCacheRequest(a,o),d=await this.silentCacheClient.acquireToken(r),h={...o,idTokenClaims:d?.idTokenClaims,idToken:d?.idToken};return{...d,account:h}}catch(r){throw r}}async acquireTokenRedirect(n,a,o){this.logger.trace("0luikq",this.correlationId);const r=await this.initializeNativeRequest(n),d=o?.navigateToLoginRequestUrl??!0;try{await this.platformAuthProvider.sendMessage(r)}catch(y){if(y instanceof pi&&(hn(this.apiId,this.config.auth.clientId,this.correlationId,this.browserStorage,this.logger).setNativeBrokerErrorCode(y.errorCode),_o(y)))throw y}this.browserStorage.setTemporaryCache(Et.NATIVE_REQUEST,JSON.stringify(r),!0);const h={apiId:He.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},f=d?window.location.href:ou(n.redirectUri,this.config.auth.redirectUri,this.logger,this.correlationId);a.end({success:!0}),await this.navigationClient.navigateExternal(f,h)}async handleRedirectPromise(n,a){if(this.logger.trace("1c5lhw",this.correlationId),!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("0le6uv",this.correlationId),null;const o=this.browserStorage.getCachedNativeRequest();if(!o)return this.logger.verbose("0a6zjb",this.correlationId),n&&a&&n?.addFields({errorCode:"no_cached_request"},a),null;const{prompt:r,...d}=o;r&&this.logger.verbose("0ac34v",this.correlationId),this.browserStorage.removeItem(this.browserStorage.generateCacheKey(Et.NATIVE_REQUEST));const h=Wn();try{this.logger.verbose("003x5a",this.correlationId);const f=await this.platformAuthProvider.sendMessage(d),y=await this.handleNativeResponse(f,d,h);return hn(this.apiId,this.config.auth.clientId,this.correlationId,this.browserStorage,this.logger).clearNativeBrokerErrorCode(),y}catch(f){throw f}}logout(){return this.logger.trace("0u2sjm",this.correlationId),Promise.reject("Logout not implemented yet")}async handleNativeResponse(n,a,o){this.logger.trace("1bojln",this.correlationId);const r=Fi(n.id_token,An),d=this.createHomeAccountIdentifier(n,r),h=this.browserStorage.getAccountInfoFilteredBy({nativeAccountId:a.accountId},this.correlationId)?.homeAccountId;if(a.extraParameters?.child_client_id&&n.account.id!==a.accountId)this.logger.info("1ub1in",this.correlationId);else if(d!==h&&n.account.id!==a.accountId)throw ru(Sk);const f=await Yi(this.config,this.correlationId,this.performanceClient,this.browserStorage,this.logger,a.authority),y=QC(this.browserStorage,f,d,An,this.correlationId,r,n.client_info,void 0,r.tid,void 0,n.account.id);n.expires_in=Number(n.expires_in);const p=await this.generateAuthenticationResult(n,a,r,y,f.canonicalAuthority,o);return await this.cacheAccount(y,Ss(r)),await this.cacheNativeTokens(n,a,d,r,n.access_token,p.tenantId,o),p}createHomeAccountIdentifier(n,a){return LC(n.client_info||"",Jn.Default,this.logger,this.browserCrypto,this.correlationId,a)}generateScopes(n,a){return a?Ft.fromString(a):Ft.fromString(n)}async generatePopAccessToken(n,a){if(a.tokenType===Xe.POP&&a.signPopToken){if(n.shr)return this.logger.trace("0coqhu",this.correlationId),n.shr;const o=new Uo(this.browserCrypto,this.performanceClient),r={resourceRequestMethod:a.resourceRequestMethod,resourceRequestUri:a.resourceRequestUri,shrClaims:a.shrClaims,shrNonce:a.shrNonce,correlationId:this.correlationId};if(!a.keyId)throw Q(wC);return o.signPopToken(n.access_token,a.keyId,r)}else return n.access_token}async generateAuthenticationResult(n,a,o,r,d,h){const f=this.addTelemetryFromNativeResponse(n.properties.MATS),y=this.generateScopes(a.scope,n.scope),p=n.account.properties||{},S=p.UID||o.oid||o.sub||"",T=p.TenantId||o.tid||"",k=Pf(As(r),void 0,o,n.id_token);k.nativeAccountId!==n.account.id&&(k.nativeAccountId=n.account.id);const N=await this.generatePopAccessToken(n,a),F=a.tokenType===Xe.POP?Xe.POP:Xe.BEARER;return{authority:d,uniqueId:S,tenantId:T,scopes:y.asArray(),account:k,idToken:n.id_token,idTokenClaims:o,accessToken:N,fromCache:f?this.isResponseFromCache(f):!1,expiresOn:Gc(h+n.expires_in),tokenType:F,correlationId:this.correlationId,state:n.state,fromPlatformBroker:!0}}async cacheAccount(n,a){await this.browserStorage.setAccount(n,this.correlationId,a,this.apiId),this.browserStorage.removeAccountContext(As(n),this.correlationId)}cacheNativeTokens(n,a,o,r,d,h,f){const y=Jf(o,a.authority,n.id_token||"",a.clientId,r.tid||""),p=a.tokenType===Xe.POP?nv:(typeof n.expires_in=="string"?parseInt(n.expires_in,10):n.expires_in)||0,S=f+p,T=this.generateScopes(n.scope,a.scope),k=Xf(o,a.authority,d,a.clientId,r.tid||h,T.printScopes(),S,0,An,void 0,a.tokenType,void 0,a.keyId),N={idToken:y,accessToken:k};return this.nativeStorageManager.saveCacheRecord(N,this.correlationId,Ss(r),this.apiId,a.storeInCache)}getExpiresInValue(n,a){return n===Xe.POP?nv:(typeof a=="string"?parseInt(a,10):a)||0}addTelemetryFromNativeResponse(n){const a=this.getMATSFromResponse(n);return a?(this.performanceClient.addFields({extensionId:this.platformAuthProvider.getExtensionId(),extensionVersion:this.platformAuthProvider.getExtensionVersion(),matsBrokerVersion:a.broker_version,matsAccountJoinOnStart:a.account_join_on_start,matsAccountJoinOnEnd:a.account_join_on_end,matsDeviceJoin:a.device_join,matsPromptBehavior:a.prompt_behavior,matsApiErrorCode:a.api_error_code,matsUiVisible:a.ui_visible,matsSilentCode:a.silent_code,matsSilentBiSubCode:a.silent_bi_sub_code,matsSilentMessage:a.silent_message,matsSilentStatus:a.silent_status,matsHttpStatus:a.http_status,matsHttpEventCount:a.http_event_count},this.correlationId),a):null}getMATSFromResponse(n){if(n)try{return JSON.parse(n)}catch{this.logger.error("0b3l57",this.correlationId)}return null}isResponseFromCache(n){return typeof n.is_cached>"u"?(this.logger.verbose("1okqev",this.correlationId),!1):!!n.is_cached}async initializeNativeRequest(n){this.logger.trace("04j6wj",this.correlationId);const a=await this.getCanonicalAuthority(n),{scopes:o,...r}=n,d=new Ft(o||[]);d.appendScopes(Ho);const h={...r,accountId:this.accountId,clientId:this.config.auth.clientId,authority:a.urlString,scope:d.printScopes(),redirectUri:ou(n.redirectUri,this.config.auth.redirectUri,this.logger,this.correlationId),prompt:this.getPrompt(n.prompt),correlationId:this.correlationId,tokenType:n.authenticationScheme,windowTitleSubstring:document.title,extraParameters:{...n.extraParameters},extendedExpiryToken:!1,keyId:n.popKid};if(h.signPopToken&&n.popKid)throw te(Lw);if(this.handleExtraBrokerParams(h),h.extraParameters=h.extraParameters||{},h.extraParameters.telemetry=Hn.MATS_TELEMETRY,n.authenticationScheme===Xe.POP){const f={resourceRequestUri:n.resourceRequestUri,resourceRequestMethod:n.resourceRequestMethod,shrClaims:n.shrClaims,shrNonce:n.shrNonce,correlationId:this.correlationId},y=new Uo(this.browserCrypto,this.performanceClient);let p;if(h.keyId)p=this.browserCrypto.base64UrlEncode(JSON.stringify({kid:h.keyId})),h.signPopToken=!1;else{const S=await K(y.generateCnf.bind(y),pl,this.logger,this.performanceClient,this.correlationId)(f,this.logger);p=S.reqCnfString,h.keyId=S.kid,h.signPopToken=!0}h.reqCnf=p}return this.addRequestSKUs(h),h}async getCanonicalAuthority(n){const a=n.authority||this.config.auth.authority,{azureCloudOptions:o,account:r}=n;r&&await Yi(this.config,this.correlationId,this.performanceClient,this.browserStorage,this.logger,a,o,void 0,r);const d=new Ve(a);return d.validateAsUri(),d}getPrompt(n){switch(this.apiId){case He.ssoSilent:case He.acquireTokenSilent_silentFlow:return this.logger.trace("1hiwaz",this.correlationId),un.NONE}if(!n){this.logger.trace("1qlu04",this.correlationId);return}switch(n){case un.NONE:case un.CONSENT:case un.LOGIN:return this.logger.trace("1ynje4",this.correlationId),n;default:throw this.logger.trace("0nkr6q",this.correlationId),te(Hw)}}handleExtraBrokerParams(n){const a=n.extraParameters&&n.extraParameters.hasOwnProperty(Jc)&&n.extraParameters.hasOwnProperty(Xc)&&n.extraParameters.hasOwnProperty(Es);if(!n.embeddedClientId&&!a)return;let o="";const r=n.redirectUri;n.embeddedClientId?(n.redirectUri=this.config.auth.redirectUri,o=n.embeddedClientId):n.extraParameters&&(n.redirectUri=n.extraParameters[Xc],o=n.extraParameters[Es]),n.extraParameters={child_client_id:o,child_redirect_uri:r},this.performanceClient?.addFields({embeddedClientId:o,embeddedRedirectUri:r},n.correlationId)}}async function yg(l,n,a,o,r){const d=tw({...l.auth,authority:n},a,o,r);if(jf(d,{sku:jn.MSAL_SKU,version:ks,os:"",cpu:""}),l.system.protocolMode!==dn.OIDC&&Hf(d,l.telemetry.application),a.platformBroker&&(_b(d),a.authenticationScheme===Xe.POP)){const h=new Qi(o,r),f=new Uo(h,r);let y;a.popKid?y=h.encodeKid(a.popKid):y=(await K(f.generateCnf.bind(f),pl,o,r,a.correlationId)(a,o)).reqCnfString,Bf(d,y)}return uu(d,a.correlationId,r),d}async function vg(l,n,a,o,r){if(!a.codeChallenge)throw nt(yC);const d=await K(yg,__,o,r,a.correlationId)(l,n,a,o,r);return Nf(d,bf.CODE),zf(d,a.codeChallenge,Af),yi(d,{...a.extraQueryParameters,...a.extraParameters}),Zf(n,d)}async function Cg(l,n,a,o,r,d){if(!o.earJwk)throw te(oS);const h=await yg(n,a,o,r,d);Nf(h,bf.IDTOKEN_TOKEN_REFRESHTOKEN),Hb(h,o.earJwk),zf(h,o.codeChallenge,Af),yi(h,{...o.extraParameters});const f=new Map;yi(f,o.extraQueryParameters||{}),fl(f,o.correlationId);const y=Zf(a,f);return OS(l,y,h)}async function Sg(l,n,a,o,r,d){const h=await yg(n,a,o,r,d);Nf(h,bf.CODE),zf(h,o.codeChallenge,o.codeChallengeMethod||Af),yi(h,{...o.extraParameters});const f=new Map;yi(f,o.extraQueryParameters||{}),fl(f,o.correlationId);const y=Zf(a,f);return OS(l,y,h)}function OS(l,n,a){const o=l.createElement("form");return o.method="post",o.action=n,a.forEach((r,d)=>{const h=l.createElement("input");h.hidden=!0,h.name=d,h.value=r,o.appendChild(h)}),l.body.appendChild(o),o}async function RS(l,n,a,o,r,d,h,f,y,p){if(f.verbose("11qcow",l.correlationId),!p)throw te(dS);const S=new Qi(f,y),T=new Qc(o,r,S,f,h,o.system.navigationClient,a,y,p,n,d,l.correlationId),{userRequestState:k}=ml(S.base64Decode,l.state);return K(T.acquireToken.bind(T),ES,f,y,l.correlationId)({...l,state:k,prompt:void 0})}async function Do(l,n,a,o,r,d,h,f,y,p,S,T){if(mi.removeThrottle(h,r.auth.clientId,l),n.accountId)return K(RS,AS,p,S,l.correlationId)(l,n.accountId,o,r,h,f,y,p,S,T);const k={...l,code:n.code||"",codeVerifier:a},N=new kS(d,h,k,p,S);return await K(N.handleCodeResponse.bind(N),k_,p,S,l.correlationId)(n,l,o)}async function Tg(l,n,a,o,r,d,h,f,y,p,S){if(mi.removeThrottle(d,o.auth.clientId,l),tS(n,l.state),!n.ear_jwe)throw te(gw);if(!l.earJwk)throw te(oS);const T=JSON.parse(await K(e_,G_,y,p,l.correlationId)(l.earJwk,n.ear_jwe));if(T.accountId)return K(RS,AS,y,p,l.correlationId)(l,T.accountId,a,o,d,h,f,y,p,S);const k=new bs(o.auth.clientId,d,new Qi(y,p),y,p,null,null);k.validateTokenResponse(T,l.correlationId);const N={code:"",state:l.state,nonce:l.nonce,client_info:T.client_info,cloud_graph_host_name:T.cloud_graph_host_name,cloud_instance_host_name:T.cloud_instance_host_name,cloud_instance_name:T.cloud_instance_name,msgraph_host:T.msgraph_host};return await K(k.handleServerTokenResponse.bind(k),qf,y,p,l.correlationId)(T,r,Wn(),l,a,N,void 0,void 0,void 0,void 0)}const Ok=32;async function Is(l,n,a){const o=Zn(Rk,U_,n,l,a)(l,n,a),r=await K(Nk,j_,n,l,a)(o,l,n,a);return{verifier:o,challenge:r}}function Rk(l,n,a){try{const o=new Uint8Array(Ok);return Zn(Jw,z_,n,l,a)(o),Ua(o)}catch{throw te(sS)}}async function Nk(l,n,a,o){try{const r=await K(gS,H_,a,n,o)(l);return Ua(new Uint8Array(r))}catch{throw te(sS)}}class lu{navigateInternal(n,a){return lu.defaultNavigateWindow(n,a)}navigateExternal(n,a){return lu.defaultNavigateWindow(n,a)}static defaultNavigateWindow(n,a){return a.noHistory?window.location.replace(n):window.location.assign(n),new Promise((o,r)=>{setTimeout(()=>{r(te(au,"failed_to_redirect"))},a.timeout)})}}class Mk{async sendGetRequestAsync(n,a){let o,r={},d=0;const h=Zv(a);try{o=await fetch(n,{method:Rv.GET,headers:h})}catch(f){throw tl(te(window.navigator.onLine?Rw:mf),void 0,void 0,f)}r=$v(o.headers);try{return d=o.status,{headers:r,body:await o.json(),status:d}}catch(f){throw tl(te(Dv),d,r,f)}}async sendPostRequestAsync(n,a){const o=a&&a.body||"",r=Zv(a);let d,h=0,f={};try{d=await fetch(n,{method:Rv.POST,headers:r,body:o})}catch(y){throw tl(te(window.navigator.onLine?Ow:mf),void 0,void 0,y)}f=$v(d.headers);try{return h=d.status,{headers:f,body:await d.json(),status:h}}catch(y){throw tl(te(Dv),h,f,y)}}}function Zv(l){try{const n=new Headers;if(!(l&&l.headers))return n;const a=l.headers;return Object.entries(a).forEach(([o,r])=>{n.append(o,r)}),n}catch(n){throw tl(te(Bw),void 0,void 0,n)}}function $v(l){try{const n={};return l.forEach((a,o)=>{n[o]=a}),n}catch{throw te(Kw)}}const xk=6e4,Dk=1e4,Uk=3e4,NS=2e3;function jk({auth:l,cache:n,system:a,telemetry:o},r){const d={clientId:"",authority:`${iC}`,knownAuthorities:[],cloudDiscoveryMetadata:"",authorityMetadata:"",redirectUri:typeof window<"u"&&window.location?window.location.href.split("?")[0].split("#")[0]:"",postLogoutRedirectUri:"",clientCapabilities:[],OIDCOptions:{responseMode:wf.FRAGMENT,defaultScopes:[sC,oC,Ef]},azureCloudOptions:{azureCloudInstance:Kf.None,tenant:""},instanceAware:!1},h={cacheLocation:Ln.SessionStorage,cacheRetentionDays:5},f={loggerCallback:()=>{},logLevel:rt.Info,piiLoggingEnabled:!1},p={...{...KC,loggerOptions:f,networkClient:r?new Mk:ew,navigationClient:new lu,popupBridgeTimeout:a?.popupBridgeTimeout||xk,iframeBridgeTimeout:a?.iframeBridgeTimeout||Dk,redirectNavigationTimeout:Uk,allowRedirectInIframe:!1,navigatePopups:!0,allowPlatformBroker:!1,nativeBrokerHandshakeTimeout:a?.nativeBrokerHandshakeTimeout||NS,protocolMode:dn.AAD},...a,loggerOptions:a?.loggerOptions||f},S={application:{appName:"",appVersion:""},client:new BC};if(a?.protocolMode!==dn.OIDC&&l?.OIDCOptions&&new vi(p.loggerOptions).warning(JSON.stringify(nt(ab)),""),a?.protocolMode&&a.protocolMode===dn.OIDC&&p?.allowPlatformBroker)throw nt(sb);return{auth:{...d,...l,OIDCOptions:{...d.OIDCOptions,...l?.OIDCOptions}},cache:{...h,...n},system:p,telemetry:{...S,...o}}}class cu{constructor(n,a,o,r){this.logger=n,this.handshakeTimeoutMs=a,this.extensionId=r,this.resolvers=new Map,this.handshakeResolvers=new Map,this.messageChannel=new MessageChannel,this.windowListener=this.onWindowMessage.bind(this),this.performanceClient=o,this.handshakeEvent=o.startMeasurement(x_),this.platformAuthType=Hn.PLATFORM_EXTENSION_PROVIDER}async sendMessage(n){this.logger.trace("0on4p2",n.correlationId);const a={method:$r.GetToken,request:n},o={channel:Hn.CHANNEL_ID,extensionId:this.extensionId,responseId:ws(),body:a};this.logger.trace("1qadfi",n.correlationId),this.logger.tracePii("1xm533",n.correlationId),this.messageChannel.port1.postMessage(o);const r=await new Promise((h,f)=>{this.resolvers.set(o.responseId,{resolve:h,reject:f})});return this.validatePlatformBrokerResponse(r)}static async createProvider(n,a,o,r){n.trace("15zfnw",r);try{const d=new cu(n,a,o,Hn.PREFERRED_EXTENSION_ID);return await d.sendHandshakeRequest(r),d}catch{const h=new cu(n,a,o);return await h.sendHandshakeRequest(r),h}}async sendHandshakeRequest(n){this.logger.trace("1dpg9o",n),window.addEventListener("message",this.windowListener,!1);const a={channel:Hn.CHANNEL_ID,extensionId:this.extensionId,responseId:ws(),body:{method:$r.HandshakeRequest}};return this.handshakeEvent.add({extensionId:this.extensionId,extensionHandshakeTimeoutMs:this.handshakeTimeoutMs}),this.messageChannel.port1.onmessage=o=>{this.onChannelMessage(o)},window.postMessage(a,window.origin,[this.messageChannel.port2]),new Promise((o,r)=>{this.handshakeResolvers.set(a.responseId,{resolve:o,reject:r}),this.timeoutId=window.setTimeout(()=>{window.removeEventListener("message",this.windowListener,!1),this.messageChannel.port1.close(),this.messageChannel.port2.close(),this.handshakeEvent.end({extensionHandshakeTimedOut:!0,success:!1}),r(te(Uw)),this.handshakeResolvers.delete(a.responseId)},this.handshakeTimeoutMs)})}onWindowMessage(n){const a=pf();if(this.logger.trace("0jpn5u",a),n.source!==window)return;const o=n.data;if(!(!o.channel||o.channel!==Hn.CHANNEL_ID)&&!(o.extensionId&&o.extensionId!==this.extensionId)&&o.body.method===$r.HandshakeRequest){const r=this.handshakeResolvers.get(o.responseId);if(!r){this.logger.trace("07buhm",a);return}this.logger.verbose(o.extensionId?"0xrkug":"No extension installed",a),clearTimeout(this.timeoutId),this.messageChannel.port1.close(),this.messageChannel.port2.close(),window.removeEventListener("message",this.windowListener,!1),this.handshakeEvent.end({success:!1,extensionInstalled:!1}),r.reject(te(jw))}}onChannelMessage(n){const a=pf();this.logger.trace("1py8yf",a);const o=n.data,r=this.resolvers.get(o.responseId),d=this.handshakeResolvers.get(o.responseId);try{const h=o.body.method;if(h===$r.Response){if(!r)return;const f=o.body.response;if(this.logger.trace("19hpgm",a),this.logger.tracePii("179a24",a),f.status!=="Success")r.reject(ru(f.code,f.description,f.ext));else if(f.result)f.result.code&&f.result.description?r.reject(ru(f.result.code,f.result.description,f.result.ext)):r.resolve(f.result);else throw rf(hf,"Event does not contain result.");this.resolvers.delete(o.responseId)}else if(h===$r.HandshakeResponse){if(!d){this.logger.trace("082qnt",a);return}clearTimeout(this.timeoutId),window.removeEventListener("message",this.windowListener,!1),this.extensionId=o.extensionId,this.extensionVersion=o.body.version,this.logger.verbose("0yf5ib",a),this.handshakeEvent.end({extensionInstalled:!0,success:!0}),d.resolve(),this.handshakeResolvers.delete(o.responseId)}}catch(h){this.logger.error("0xf978",a),this.logger.errorPii("04i99o",a),this.logger.errorPii("0xdvsy",a),r?r.reject(h):d&&d.reject(h)}}validatePlatformBrokerResponse(n){if(n.hasOwnProperty("access_token")&&n.hasOwnProperty("id_token")&&n.hasOwnProperty("client_info")&&n.hasOwnProperty("account")&&n.hasOwnProperty("scope")&&n.hasOwnProperty("expires_in"))return n;throw rf(hf,"Response missing expected properties.")}getExtensionId(){return this.extensionId}getExtensionVersion(){return this.extensionVersion}getExtensionName(){return this.getExtensionId()===Hn.PREFERRED_EXTENSION_ID?"chrome":this.getExtensionId()?.length?"unknown":void 0}}class Eg{constructor(n,a,o){this.logger=n,this.performanceClient=a,this.correlationId=o,this.platformAuthType=Hn.PLATFORM_DOM_PROVIDER}static async createProvider(n,a,o){if(n.trace("12mj4a",o),window.navigator?.platformAuthentication&&(await window.navigator.platformAuthentication.getSupportedContracts(Hn.MICROSOFT_ENTRA_BROKERID))?.includes(Hn.PLATFORM_DOM_APIS))return n.trace("1h5q1r",o),new Eg(n,a,o)}getExtensionId(){return Hn.MICROSOFT_ENTRA_BROKERID}getExtensionVersion(){return""}getExtensionName(){return Hn.DOM_API_NAME}async sendMessage(n){this.logger.trace("02bcil",n.correlationId);try{const a=this.initializePlatformDOMRequest(n),o=await window.navigator.platformAuthentication.executeGetToken(a);return this.validatePlatformBrokerResponse(o,n.correlationId)}catch(a){throw this.logger.error("11im7g",n.correlationId),a}}initializePlatformDOMRequest(n){this.logger.trace("15d6yv",n.correlationId);const{accountId:a,clientId:o,authority:r,scope:d,redirectUri:h,correlationId:f,state:y,storeInCache:p,embeddedClientId:S,extraParameters:T,...k}=n,N=this.getDOMExtraParams(k);return{accountId:a,brokerId:this.getExtensionId(),authority:r,clientId:o,correlationId:f||this.correlationId,extraParameters:{...T,...N},isSecurityTokenService:!1,redirectUri:h,scope:d,state:y,storeInCache:p,embeddedClientId:S}}validatePlatformBrokerResponse(n,a){if(n.hasOwnProperty("isSuccess")){if(n.hasOwnProperty("accessToken")&&n.hasOwnProperty("idToken")&&n.hasOwnProperty("clientInfo")&&n.hasOwnProperty("account")&&n.hasOwnProperty("scopes")&&n.hasOwnProperty("expiresIn"))return this.logger.trace("0h4vei",a),this.convertToPlatformBrokerResponse(n,a);if(n.hasOwnProperty("error")){const o=n;if(o.isSuccess===!1&&o.error&&o.error.code)throw this.logger.trace("0g92vm",a),ru(o.error.code,o.error.description,{error:parseInt(o.error.errorCode),protocol_error:o.error.protocolError,status:o.error.status,properties:o.error.properties})}}throw rf(hf,"Response missing expected properties.")}convertToPlatformBrokerResponse(n,a){return this.logger.trace("14913t",a),{access_token:n.accessToken,id_token:n.idToken,client_info:n.clientInfo,account:n.account,expires_in:n.expiresIn,scope:n.scopes,state:n.state||"",properties:n.properties||{},extendedLifetimeToken:n.extendedLifetimeToken??!1,shr:n.proofOfPossessionPayload}}getDOMExtraParams(n){return{...Object.entries(n).reduce((r,[d,h])=>(r[d]=String(h),r),{})}}}async function Hk(l,n,a,o){l.trace("134j0v",a);const r=zk();l.trace("04c81g",a);let d;try{r&&(d=await Eg.createProvider(l,n,a)),d||(l.trace("0l3na8",a),d=await cu.createProvider(l,o||NS,n,a))}catch(h){l.trace("0icbd7",h)}return d}function zk(){let l;try{return l=window[Ln.SessionStorage],l?.getItem(tk)==="true"}catch{return!1}}function hl(l,n,a,o,r){if(n.trace("0uko3r",a),!l.system.allowPlatformBroker)return n.trace("04hozs",a),!1;if(!o)return n.trace("0kvv1r",a),!1;if(r)switch(r){case Xe.BEARER:case Xe.POP:return n.trace("18tev1",a),!0;default:return n.trace("1dd2nh",a),!1}return!0}class Lk extends Bo{constructor(n,a,o,r,d,h,f,y,p,S){super(n,a,o,r,d,h,f,p,S),this.nativeStorage=y,this.eventHandler=d}acquireToken(n,a){let o;try{if(o={popupName:this.generatePopupName(n.scopes||Ho,n.authority||this.config.auth.authority),popupWindowAttributes:n.popupWindowAttributes||{},popupWindowParent:n.popupWindowParent??window},this.performanceClient.addFields({isAsyncPopup:!this.config.system.navigatePopups},this.correlationId),this.config.system.navigatePopups){const d={...n,httpMethod:_S(n,this.config.system.protocolMode)};return this.logger.verbose("1f9ok3",this.correlationId),o.popup=this.openSizedPopup("about:blank",o),this.acquireTokenPopupAsync(d,o,a)}else return this.logger.verbose("162h4u",this.correlationId),this.acquireTokenPopupAsync(n,o,a)}catch(r){return Promise.reject(r)}}logout(n){try{this.logger.verbose("068rup",this.correlationId);const a=this.initializeLogoutRequest(n),o={popupName:this.generateLogoutPopupName(a),popupWindowAttributes:n?.popupWindowAttributes||{},popupWindowParent:n?.popupWindowParent??window},r=n&&n.authority,d=n&&n.mainWindowRedirectUri;return this.config.system.navigatePopups?(this.logger.verbose("1a28da",this.correlationId),o.popup=this.openSizedPopup("about:blank",o),this.logoutPopupAsync(a,o,r,d)):(this.logger.verbose("1phd8u",this.correlationId),this.logoutPopupAsync(a,o,r,d))}catch(a){return Promise.reject(a)}}async acquireTokenPopupAsync(n,a,o){this.logger.verbose("1g77pg",this.correlationId);const r=await K(Eu,Su,this.logger,this.performanceClient,this.correlationId)(n,ve.Popup,this.config,this.browserCrypto,this.browserStorage,this.logger,this.performanceClient,this.correlationId);a.popup&&TS(r.authority);const d=hl(this.config,this.logger,this.correlationId,this.platformAuthProvider,n.authenticationScheme);return r.platformBroker=d,this.config.system.protocolMode===dn.EAR?this.executeEarFlow(r,a,o):this.executeCodeFlow(r,a,o)}async executeCodeFlow(n,a,o){const r=n.correlationId,d=hn(He.acquireTokenPopup,this.config.auth.clientId,this.correlationId,this.browserStorage,this.logger),h=o||await K(Is,_s,this.logger,this.performanceClient,r)(this.performanceClient,this.logger,r),f={...n,codeChallenge:h.challenge};try{const y=await K(this.createAuthCodeClient.bind(this),Da,this.logger,this.performanceClient,r)({serverTelemetryManager:d,requestAuthority:f.authority,requestAzureCloudOptions:f.azureCloudOptions,requestExtraQueryParameters:f.extraQueryParameters,account:f.account});if(f.httpMethod===Io.POST)return await this.executeCodeFlowWithPost(f,a,y,h.verifier);{const p=await K(vg,Qf,this.logger,this.performanceClient,r)(this.config,y.authority,f,this.logger,this.performanceClient),S=this.initiateAuthRequest(p,a);this.eventHandler.emitEvent(Ce.POPUP_OPENED,r,ve.Popup,{popupWindow:S},null);const T=await ko(this.config.system.popupBridgeTimeout,this.logger,this.browserCrypto,n),k=Zn(al,il,this.logger,this.performanceClient,this.correlationId)(T,this.config.auth.OIDCOptions.responseMode,this.logger,this.correlationId);return await K(Do,No,this.logger,this.performanceClient,r)(n,k,h.verifier,He.acquireTokenPopup,this.config,y,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}}catch(y){throw a.popup?.close(),y instanceof tt&&(y.setCorrelationId(this.correlationId),d.cacheFailedRequest(y)),y}}async executeEarFlow(n,a,o){const{correlationId:r,authority:d,azureCloudOptions:h,extraQueryParameters:f,account:y}=n,p=await K(Yi,Ts,this.logger,this.performanceClient,r)(this.config,this.correlationId,this.performanceClient,this.browserStorage,this.logger,d,h,f,y),S=await K(rg,fg,this.logger,this.performanceClient,r)(),T=o||await K(Is,_s,this.logger,this.performanceClient,r)(this.performanceClient,this.logger,r),k={...n,earJwk:S,codeChallenge:T.challenge},N=a.popup||this.openPopup("about:blank",a);(await Cg(N.document,this.config,p,k,this.logger,this.performanceClient)).submit();const Y=await K(ko,su,this.logger,this.performanceClient,r)(this.config.system.popupBridgeTimeout,this.logger,this.browserCrypto,k),pe=Zn(al,il,this.logger,this.performanceClient,this.correlationId)(Y,this.config.auth.OIDCOptions.responseMode,this.logger,this.correlationId);if(!pe.ear_jwe&&pe.code){const Z=await K(this.createAuthCodeClient.bind(this),Da,this.logger,this.performanceClient,r)({serverTelemetryManager:hn(He.acquireTokenPopup,this.config.auth.clientId,r,this.browserStorage,this.logger),requestAuthority:n.authority,requestAzureCloudOptions:n.azureCloudOptions,requestExtraQueryParameters:n.extraQueryParameters,account:n.account,authority:p});return K(Do,No,this.logger,this.performanceClient,r)(k,pe,T.verifier,He.acquireTokenPopup,this.config,Z,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}else return K(Tg,hg,this.logger,this.performanceClient,r)(k,pe,He.acquireTokenPopup,this.config,p,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async executeCodeFlowWithPost(n,a,o,r){const d=n.correlationId,h=await K(Yi,Ts,this.logger,this.performanceClient,d)(this.config,this.correlationId,this.performanceClient,this.browserStorage,this.logger),f=a.popup||this.openPopup("about:blank",a);(await Sg(f.document,this.config,h,n,this.logger,this.performanceClient)).submit();const p=await K(ko,su,this.logger,this.performanceClient,d)(this.config.system.popupBridgeTimeout,this.logger,this.browserCrypto,n),S=Zn(al,il,this.logger,this.performanceClient,this.correlationId)(p,this.config.auth.OIDCOptions.responseMode,this.logger,this.correlationId);return K(Do,No,this.logger,this.performanceClient,d)(n,S,r,He.acquireTokenPopup,this.config,o,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async logoutPopupAsync(n,a,o,r){this.logger.verbose("0b7yrk",this.correlationId),this.eventHandler.emitEvent(Ce.LOGOUT_START,this.correlationId,ve.Popup,n);const d=hn(He.logoutPopup,this.config.auth.clientId,this.correlationId,this.browserStorage,this.logger);try{await mg(this.browserStorage,this.browserCrypto,this.logger,this.correlationId,n.account);const h=await K(this.createAuthCodeClient.bind(this),Da,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:d,requestAuthority:o,account:n.account||void 0});try{h.authority.endSessionEndpoint}catch{if(n.account?.homeAccountId&&n.postLogoutRedirectUri&&h.authority.protocolMode===dn.OIDC){if(this.eventHandler.emitEvent(Ce.LOGOUT_SUCCESS,n.correlationId,ve.Popup,n),r){const p={apiId:He.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},S=Ve.getAbsoluteUrl(r,Na());await this.navigationClient.navigateInternal(S,p)}a.popup?.close();return}}const f=h.getLogoutUri(n);this.eventHandler.emitEvent(Ce.LOGOUT_SUCCESS,n.correlationId,ve.Popup,n);const y=this.openPopup(f,a);if(this.eventHandler.emitEvent(Ce.POPUP_OPENED,n.correlationId,ve.Popup,{popupWindow:y},null),await ko(this.config.system.popupBridgeTimeout,this.logger,this.browserCrypto,n).catch(()=>{}),r){const p={apiId:He.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},S=Ve.getAbsoluteUrl(r,Na());this.logger.verbose("0qcur2",this.correlationId),this.logger.verbosePii("0oj7lk",this.correlationId),await this.navigationClient.navigateInternal(S,p)}else this.logger.verbose("03zgcf",this.correlationId)}catch(h){throw a.popup?.close(),h instanceof tt&&(h.setCorrelationId(this.correlationId),d.cacheFailedRequest(h)),this.eventHandler.emitEvent(Ce.LOGOUT_FAILURE,this.correlationId,ve.Popup,null,h),this.eventHandler.emitEvent(Ce.LOGOUT_END,this.correlationId,ve.Popup),h}this.eventHandler.emitEvent(Ce.LOGOUT_END,this.correlationId,ve.Popup)}initiateAuthRequest(n,a){if(n)return this.logger.infoPii("1kcr9k",this.correlationId),this.openPopup(n,a);throw this.logger.error("1l7hyp",this.correlationId),te(eg)}openPopup(n,a){try{let o;if(a.popup?(o=a.popup,this.logger.verbosePii("0cgeo7",this.correlationId),o.location.assign(n)):typeof a.popup>"u"&&(this.logger.verbosePii("0c2awd",this.correlationId),o=this.openSizedPopup(n,a)),!o)throw te(Tw);return o.focus&&o.focus(),this.currentWindow=o,o}catch{throw this.logger.error("0dxfb9",this.correlationId),te(Sw)}}openSizedPopup(n,{popupName:a,popupWindowAttributes:o,popupWindowParent:r}){const d=r.screenLeft?r.screenLeft:r.screenX,h=r.screenTop?r.screenTop:r.screenY,f=r.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,y=r.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;let p=o.popupSize?.width,S=o.popupSize?.height,T=o.popupPosition?.top,k=o.popupPosition?.left;return(!p||p<0||p>f)&&(this.logger.verbose("08vfmo",this.correlationId),p=jn.POPUP_WIDTH),(!S||S<0||S>y)&&(this.logger.verbose("09cxa0",this.correlationId),S=jn.POPUP_HEIGHT),(!T||T<0||T>y)&&(this.logger.verbose("1qh4wo",this.correlationId),T=Math.max(0,y/2-jn.POPUP_HEIGHT/2+h)),(!k||k<0||k>f)&&(this.logger.verbose("1sz3en",this.correlationId),k=Math.max(0,f/2-jn.POPUP_WIDTH/2+d)),r.open(n,a,`width=${p}, height=${S}, top=${T}, left=${k}, scrollbars=yes`)}generatePopupName(n,a){return`${jn.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${n.join("-")}.${a}.${this.correlationId}`}generateLogoutPopupName(n){const a=n.account&&n.account.homeAccountId;return`${jn.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${a}.${this.correlationId}`}}function Bk(){if(typeof window>"u"||typeof window.performance>"u"||typeof window.performance.getEntriesByType!="function")return;const l=window.performance.getEntriesByType("navigation");return(l.length?l[0]:void 0)?.type}class Kk extends Bo{constructor(n,a,o,r,d,h,f,y,p,S){super(n,a,o,r,d,h,f,p,S),this.nativeStorage=y}async acquireToken(n){const a=await K(Eu,Su,this.logger,this.performanceClient,this.correlationId)(n,ve.Redirect,this.config,this.browserCrypto,this.browserStorage,this.logger,this.performanceClient,this.correlationId);a.platformBroker=hl(this.config,this.logger,this.correlationId,this.platformAuthProvider,n.authenticationScheme);const o=d=>{d.persisted&&(this.logger.verbose("0udvtt",this.correlationId),this.browserStorage.resetRequestCache(this.correlationId),this.eventHandler.emitEvent(Ce.RESTORE_FROM_BFCACHE,this.correlationId,ve.Redirect))},r=this.getRedirectStartPage(n.redirectStartPage);this.logger.verbosePii("0zao0a",this.correlationId),this.browserStorage.setTemporaryCache(Et.ORIGIN_URI,r,!0),window.addEventListener("pageshow",o);try{this.config.system.protocolMode===dn.EAR?await this.executeEarFlow(a):await this.executeCodeFlow(a)}catch(d){throw d instanceof tt&&d.setCorrelationId(this.correlationId),window.removeEventListener("pageshow",o),d}}async executeCodeFlow(n){const a=n.correlationId,o=hn(He.acquireTokenRedirect,this.config.auth.clientId,this.correlationId,this.browserStorage,this.logger),r=await K(Is,_s,this.logger,this.performanceClient,a)(this.performanceClient,this.logger,a),d={...n,codeChallenge:r.challenge};this.browserStorage.cacheAuthorizeRequest(d,this.correlationId,r.verifier);try{if(d.httpMethod===Io.POST)return await this.executeCodeFlowWithPost(d);{const h=await K(this.createAuthCodeClient.bind(this),Da,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:o,requestAuthority:d.authority,requestAzureCloudOptions:d.azureCloudOptions,requestExtraQueryParameters:d.extraQueryParameters,account:d.account}),f=await K(vg,Qf,this.logger,this.performanceClient,n.correlationId)(this.config,h.authority,d,this.logger,this.performanceClient);return await this.initiateAuthRequest(f)}}catch(h){throw h instanceof tt&&(h.setCorrelationId(this.correlationId),o.cacheFailedRequest(h)),h}}async executeEarFlow(n){const{correlationId:a,authority:o,azureCloudOptions:r,extraQueryParameters:d,account:h}=n,f=await K(Yi,Ts,this.logger,this.performanceClient,a)(this.config,this.correlationId,this.performanceClient,this.browserStorage,this.logger,o,r,d,h),y=await K(rg,fg,this.logger,this.performanceClient,a)(),p=await K(Is,_s,this.logger,this.performanceClient,a)(this.performanceClient,this.logger,a),S={...n,earJwk:y,codeChallenge:p.challenge};return this.browserStorage.cacheAuthorizeRequest(S,this.correlationId,p.verifier),(await Cg(document,this.config,f,S,this.logger,this.performanceClient)).submit(),new Promise((k,N)=>{setTimeout(()=>{N(te(au,"failed_to_redirect"))},this.config.system.redirectNavigationTimeout)})}async executeCodeFlowWithPost(n){const a=n.correlationId,o=await K(Yi,Ts,this.logger,this.performanceClient,a)(this.config,this.correlationId,this.performanceClient,this.browserStorage,this.logger);return this.browserStorage.cacheAuthorizeRequest(n,this.correlationId),(await Sg(document,this.config,o,n,this.logger,this.performanceClient)).submit(),new Promise((d,h)=>{setTimeout(()=>{h(te(au,"failed_to_redirect"))},this.config.system.redirectNavigationTimeout)})}async handleRedirectPromise(n,a,o,r){const d=hn(He.handleRedirectPromise,this.config.auth.clientId,this.correlationId,this.browserStorage,this.logger),h=r?.navigateToLoginRequestUrl??!0;try{const[f,y]=this.getRedirectResponse(r?.hash||"");if(!f)return this.logger.info("1qmv0q",this.correlationId),this.browserStorage.resetRequestCache(this.correlationId),Bk()!=="back_forward"?o.event.errorCode="no_server_response":this.logger.verbose("1eqegq",this.correlationId),null;const p=this.browserStorage.getTemporaryCache(Et.ORIGIN_URI,this.correlationId,!0)||"",S=mv(p),T=mv(window.location.href);if(S===T&&h)return this.logger.verbose("11yred",this.correlationId),p.indexOf("#")>-1&&s_(p),await this.handleResponse(f,n,a,d);if(h){if(!vu()||this.config.system.allowRedirectInIframe){this.browserStorage.setTemporaryCache(Et.URL_HASH,y,!0);const k={apiId:He.handleRedirectPromise,timeout:this.config.system.redirectNavigationTimeout,noHistory:!0};let N=!0;if(!p||p==="null"){const F=l_();this.browserStorage.setTemporaryCache(Et.ORIGIN_URI,F,!0),this.logger.warning("1dutq1",this.correlationId),N=await this.navigationClient.navigateInternal(F,k)}else this.logger.verbose("08jpy1",this.correlationId),N=await this.navigationClient.navigateInternal(p,k);if(!N)return await this.handleResponse(f,n,a,d)}}else return this.logger.verbose("0v4sdv",this.correlationId),await this.handleResponse(f,n,a,d);return null}catch(f){throw f instanceof tt&&(f.setCorrelationId(this.correlationId),d.cacheFailedRequest(f)),f}}getRedirectResponse(n){this.logger.verbose("1c5i8m",this.correlationId);let a=n;a||(this.config.auth.OIDCOptions.responseMode===wf.QUERY?a=window.location.search:a=window.location.hash);let o=$c(a);if(o){try{yk(o,this.browserCrypto,ve.Redirect)}catch(d){return d instanceof tt&&this.logger.error("0bkq6p",this.correlationId),[null,""]}return vS(window),this.logger.verbose("00uvho",this.correlationId),[o,a]}const r=this.browserStorage.getTemporaryCache(Et.URL_HASH,this.correlationId,!0);return this.browserStorage.removeItem(this.browserStorage.generateCacheKey(Et.URL_HASH)),r&&(o=$c(r),o)?(this.logger.verbose("001671",this.correlationId),[o,r]):[null,""]}async handleResponse(n,a,o,r){if(!n.state)throw te(tg);const{authority:h,azureCloudOptions:f,extraQueryParameters:y,account:p}=a;if(n.ear_jwe){const T=await K(Yi,Ts,this.logger,this.performanceClient,a.correlationId)(this.config,this.correlationId,this.performanceClient,this.browserStorage,this.logger,h,f,y,p);return K(Tg,hg,this.logger,this.performanceClient,a.correlationId)(a,n,He.acquireTokenRedirect,this.config,T,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}const S=await K(this.createAuthCodeClient.bind(this),Da,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:r,requestAuthority:a.authority});return K(Do,No,this.logger,this.performanceClient,a.correlationId)(a,n,o,He.acquireTokenRedirect,this.config,S,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async initiateAuthRequest(n){if(this.logger.verbose("0yaw2e",this.correlationId),n){this.logger.infoPii("1luf83",this.correlationId);const a={apiId:He.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},o=this.config.auth.onRedirectNavigate;if(typeof o=="function")if(this.logger.verbose("1nehvl",this.correlationId),o(n)!==!1){this.logger.verbose("1a0jxh",this.correlationId),await this.navigationClient.navigateExternal(n,a);return}else{this.logger.verbose("09k5h5",this.correlationId);return}else{this.logger.verbose("0klwf7",this.correlationId),await this.navigationClient.navigateExternal(n,a);return}}else throw this.logger.info("0rlh4e",this.correlationId),te(eg)}async logout(n){this.logger.verbose("1rkurh",this.correlationId);const a=this.initializeLogoutRequest(n),o=hn(He.logout,this.config.auth.clientId,this.correlationId,this.browserStorage,this.logger);try{this.eventHandler.emitEvent(Ce.LOGOUT_START,this.correlationId,ve.Redirect,n),await mg(this.browserStorage,this.browserCrypto,this.logger,this.correlationId,a.account);const r={apiId:He.logout,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},d=await K(this.createAuthCodeClient.bind(this),Da,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:o,requestAuthority:n&&n.authority,requestExtraQueryParameters:n?.extraQueryParameters,account:n&&n.account||void 0});if(d.authority.protocolMode===dn.OIDC)try{d.authority.endSessionEndpoint}catch{if(a.account?.homeAccountId){this.eventHandler.emitEvent(Ce.LOGOUT_SUCCESS,this.correlationId,ve.Redirect,a);return}}const h=d.getLogoutUri(a);a.account?.homeAccountId&&this.eventHandler.emitEvent(Ce.LOGOUT_SUCCESS,this.correlationId,ve.Redirect,a);const f=this.config.auth.onRedirectNavigate;if(typeof f=="function")if(f(h)!==!1){this.logger.verbose("06v57e",this.correlationId),this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0,Oa.SIGNOUT),await this.navigationClient.navigateExternal(h,r);return}else this.browserStorage.setInteractionInProgress(!1),this.logger.verbose("0xqes1",this.correlationId);else{this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0,Oa.SIGNOUT),await this.navigationClient.navigateExternal(h,r);return}}catch(r){throw r instanceof tt&&(r.setCorrelationId(this.correlationId),o.cacheFailedRequest(r)),this.eventHandler.emitEvent(Ce.LOGOUT_FAILURE,this.correlationId,ve.Redirect,null,r),this.eventHandler.emitEvent(Ce.LOGOUT_END,this.correlationId,ve.Redirect),r}this.eventHandler.emitEvent(Ce.LOGOUT_END,this.correlationId,ve.Redirect)}getRedirectStartPage(n){const a=n||window.location.href;return Ve.getAbsoluteUrl(a,Na())}}async function Pk(l,n,a,o){if(!l)throw a.info("1l7hyp",o),te(eg);return Zn(Fk,b_,a,n,o)(l)}async function Gk(l,n,a,o,r){const d=Ag();if(!d.contentDocument)throw"No document associated with iframe!";return(await Sg(d.contentDocument,l,n,a,o,r)).submit(),d}async function Vk(l,n,a,o,r){const d=Ag();if(!d.contentDocument)throw"No document associated with iframe!";return(await Cg(d.contentDocument,l,n,a,o,r)).submit(),d}function Fk(l){const n=Ag();return n.src=l,n}function Ag(){const l=document.createElement("iframe");return l.className="msalSilentIframe",l.style.visibility="hidden",l.style.position="absolute",l.style.width=l.style.height="0",l.style.border="0",l.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),l.setAttribute("allow","local-network-access *"),document.body.appendChild(l),l}class Yk extends Bo{constructor(n,a,o,r,d,h,f,y,p,S,T){super(n,a,o,r,d,h,y,S,T),this.apiId=f,this.nativeStorage=p}async acquireToken(n){!n.loginHint&&!n.sid&&(!n.account||!n.account.username)&&this.logger.warning("1kl318",this.correlationId);const a={...n};a.prompt?a.prompt!==un.NONE&&a.prompt!==un.NO_SESSION&&(this.logger.warning("0bmctg",this.correlationId),a.prompt=un.NONE):a.prompt=un.NONE;const o=await K(Eu,Su,this.logger,this.performanceClient,this.correlationId)(a,ve.Silent,this.config,this.browserCrypto,this.browserStorage,this.logger,this.performanceClient,this.correlationId);return o.platformBroker=hl(this.config,this.logger,this.correlationId,this.platformAuthProvider,o.authenticationScheme),TS(o.authority),this.config.system.protocolMode===dn.EAR?this.executeEarFlow(o):this.executeCodeFlow(o)}async executeCodeFlow(n){let a;const o=hn(this.apiId,this.config.auth.clientId,this.correlationId,this.browserStorage,this.logger);try{return a=await K(this.createAuthCodeClient.bind(this),Da,this.logger,this.performanceClient,n.correlationId)({serverTelemetryManager:o,requestAuthority:n.authority,requestAzureCloudOptions:n.azureCloudOptions,requestExtraQueryParameters:n.extraQueryParameters,account:n.account}),await K(this.silentTokenHelper.bind(this),Kv,this.logger,this.performanceClient,n.correlationId)(a,n)}catch(r){if(r instanceof tt&&(r.setCorrelationId(this.correlationId),o.cacheFailedRequest(r)),!a||!(r instanceof tt)||r.errorCode!==jn.INVALID_GRANT_ERROR)throw r;return this.performanceClient.addFields({retryError:r.errorCode},this.correlationId),await K(this.silentTokenHelper.bind(this),Kv,this.logger,this.performanceClient,this.correlationId)(a,n)}}async executeEarFlow(n){const{correlationId:a,authority:o,azureCloudOptions:r,extraQueryParameters:d,account:h}=n,f=await K(Yi,Ts,this.logger,this.performanceClient,a)(this.config,this.correlationId,this.performanceClient,this.browserStorage,this.logger,o,r,d,h),y=await K(rg,fg,this.logger,this.performanceClient,a)(),p=await K(Is,_s,this.logger,this.performanceClient,a)(this.performanceClient,this.logger,a),S={...n,earJwk:y,codeChallenge:p.challenge};await K(Vk,Xh,this.logger,this.performanceClient,a)(this.config,f,S,this.logger,this.performanceClient);const T=this.config.auth.OIDCOptions.responseMode,k=await K(ko,su,this.logger,this.performanceClient,a)(this.config.system.iframeBridgeTimeout,this.logger,this.browserCrypto,n),N=Zn(al,il,this.logger,this.performanceClient,a)(k,T,this.logger,this.correlationId);if(!N.ear_jwe&&N.code){const F=await K(this.createAuthCodeClient.bind(this),Da,this.logger,this.performanceClient,a)({serverTelemetryManager:hn(this.apiId,this.config.auth.clientId,a,this.browserStorage,this.logger),requestAuthority:n.authority,requestAzureCloudOptions:n.azureCloudOptions,requestExtraQueryParameters:n.extraQueryParameters,account:n.account,authority:f});return K(Do,No,this.logger,this.performanceClient,a)(S,N,p.verifier,this.apiId,this.config,F,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}else return K(Tg,hg,this.logger,this.performanceClient,a)(S,N,this.apiId,this.config,f,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}logout(){return Promise.reject(te(ng))}async silentTokenHelper(n,a){const o=a.correlationId,r=await K(Is,_s,this.logger,this.performanceClient,o)(this.performanceClient,this.logger,o),d={...a,codeChallenge:r.challenge};if(a.httpMethod===Io.POST)await K(Gk,Xh,this.logger,this.performanceClient,o)(this.config,n.authority,d,this.logger,this.performanceClient);else{const p=await K(vg,Qf,this.logger,this.performanceClient,o)(this.config,n.authority,d,this.logger,this.performanceClient);await K(Pk,Xh,this.logger,this.performanceClient,o)(p,this.performanceClient,this.logger,o)}const h=this.config.auth.OIDCOptions.responseMode,f=await K(ko,su,this.logger,this.performanceClient,o)(this.config.system.iframeBridgeTimeout,this.logger,this.browserCrypto,a),y=Zn(al,il,this.logger,this.performanceClient,o)(f,h,this.logger,this.correlationId);return K(Do,No,this.logger,this.performanceClient,o)(a,y,r.verifier,this.apiId,this.config,n,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}}class Qk extends Bo{async acquireToken(n){const a=await K(pg,dg,this.logger,this.performanceClient,n.correlationId)(n,this.config,this.performanceClient,this.logger,this.correlationId),o={...n,...a};n.redirectUri&&(o.redirectUri=ou(n.redirectUri,this.config.auth.redirectUri,this.logger,this.correlationId));const r=hn(He.acquireTokenSilent_silentFlow,this.config.auth.clientId,this.correlationId,this.browserStorage,this.logger),d=await this.createRefreshTokenClient({serverTelemetryManager:r,authorityUrl:o.authority,azureCloudOptions:o.azureCloudOptions,account:o.account});return K(d.acquireTokenByRefreshToken.bind(d),T_,this.logger,this.performanceClient,n.correlationId)(o,He.acquireTokenSilent_silentFlow).catch(h=>{throw h.setCorrelationId(this.correlationId),r.cacheFailedRequest(h),h})}logout(){return Promise.reject(te(ng))}async createRefreshTokenClient(n){const a=await K(this.getClientConfiguration.bind(this),Cu,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:n.serverTelemetryManager,requestAuthority:n.authorityUrl,requestAzureCloudOptions:n.azureCloudOptions,requestExtraQueryParameters:n.extraQueryParameters,account:n.account});return new $0(a,this.performanceClient)}}class qk extends eS{constructor(n,a){super(n,a),this.includeRedirectUri=!1}}class Jk extends Bo{constructor(n,a,o,r,d,h,f,y,p,S){super(n,a,o,r,d,h,y,p,S),this.apiId=f}async acquireToken(n){if(!n.code)throw te(Nw);const a=await K(Eu,Su,this.logger,this.performanceClient,this.correlationId)(n,ve.Silent,this.config,this.browserCrypto,this.browserStorage,this.logger,this.performanceClient,this.correlationId),o=hn(this.apiId,this.config.auth.clientId,this.correlationId,this.browserStorage,this.logger);try{const r={...a,code:n.code},d=await K(this.getClientConfiguration.bind(this),Cu,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:o,requestAuthority:a.authority,requestAzureCloudOptions:a.azureCloudOptions,requestExtraQueryParameters:a.extraQueryParameters,account:a.account}),h=new qk(d,this.performanceClient);this.logger.verbose("1uic5e",this.correlationId);const f=new kS(h,this.browserStorage,r,this.logger,this.performanceClient);return await K(f.handleCodeResponseFromServer.bind(f),YC,this.logger,this.performanceClient,this.correlationId)({code:n.code,msgraph_host:n.msGraphHost,cloud_graph_host_name:n.cloudGraphHostName,cloud_instance_host_name:n.cloudInstanceHostName},a,this.apiId,!1)}catch(r){throw r instanceof tt&&(r.setCorrelationId(this.correlationId),o.cacheFailedRequest(r)),r}}logout(){return Promise.reject(te(ng))}}function Xk(l,n,a,o){const r=window.msal?.clientIds||[],d=r.length,h=r.filter(f=>f===l).length;h>1&&a.warning("1e88vg",o),n.add({msalInstanceCount:d,sameClientIdInstanceCount:h})}function Pc(l,n,a){try{ug(l)}catch(o){throw n.end({success:!1},o,a),o}}class bg{constructor(n){this.operatingContext=n,this.isBrowserEnvironment=this.operatingContext.isBrowserEnvironment(),this.config=n.getConfig(),this.initialized=!1,this.logger=this.operatingContext.getLogger(),this.networkClient=this.config.system.networkClient,this.navigationClient=this.config.system.navigationClient,this.redirectResponse=new Map,this.hybridAuthCodeResponses=new Map,this.performanceClient=this.config.telemetry.client,this.browserCrypto=this.isBrowserEnvironment?new Qi(this.logger,this.performanceClient):Wc,this.eventHandler=new gk(this.logger),this.browserStorage=this.isBrowserEnvironment?new vf(this.config.auth.clientId,this.config.cache,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler,X0(this.config.auth)):lk(this.config.auth.clientId,this.logger,this.performanceClient,this.eventHandler);const a={cacheLocation:Ln.MemoryStorage,cacheRetentionDays:5};this.nativeInternalStorage=new vf(this.config.auth.clientId,a,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler),this.activeSilentTokenRequests=new Map,this.trackPageVisibility=this.trackPageVisibility.bind(this),this.trackPageVisibilityWithMeasurement=this.trackPageVisibilityWithMeasurement.bind(this)}static async createController(n,a){const o=new bg(n);return await o.initialize(a),o}trackPageVisibility(n){n&&(this.logger.info("16v6hv",n),this.performanceClient.incrementFields({visibilityChangeCount:1},n))}async initialize(n){const a=this.getRequestCorrelationId(n);if(this.logger.trace("1f7joy",a),this.initialized){this.logger.info("061m5x",a);return}if(!this.isBrowserEnvironment){this.logger.info("19fvpi",a),this.initialized=!0,this.eventHandler.emitEvent(Ce.INITIALIZE_END,a);return}const o=this.config.system.allowPlatformBroker,r=this.performanceClient.startMeasurement(Z_,a);if(this.eventHandler.emitEvent(Ce.INITIALIZE_START,a),this.logMultipleInstances(r,a),await K(this.browserStorage.initialize.bind(this.browserStorage),A_,this.logger,this.performanceClient,a)(a),o)try{this.platformAuthProvider=await Hk(this.logger,this.performanceClient,a,this.config.system.nativeBrokerHandshakeTimeout)}catch(d){this.logger.verbose(d,a)}this.config.cache.cacheLocation===Ln.LocalStorage&&this.eventHandler.subscribeCrossTab(),!this.config.system.navigatePopups&&await this.preGeneratePkceCodes(a),this.initialized=!0,this.eventHandler.emitEvent(Ce.INITIALIZE_END,a),r.end({allowPlatformBroker:o,success:!0})}async handleRedirectPromise(n){if(this.logger.verbose("02l8bm",""),SS(this.initialized),this.isBrowserEnvironment){const a=n?.hash||"";let o=this.redirectResponse.get(a);return typeof o>"u"?(o=this.handleRedirectPromiseInternal(n),this.redirectResponse.set(a,o),this.logger.verbose("1wn9kp","")):this.logger.verbose("0w0gm3",""),o}return this.logger.verbose("12xi63",""),null}async handleRedirectPromiseInternal(n){if(!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("0le6uv",""),null;if(this.browserStorage.getInteractionInProgress()?.type===Oa.SIGNOUT)return this.logger.verbose("1ywcv2",""),this.browserStorage.setInteractionInProgress(!1),Promise.resolve(null);const o=this.getAllAccounts(),r=this.browserStorage.getCachedNativeRequest(),d=r&&this.platformAuthProvider&&!n?.hash;let h,f;try{if(d&&this.platformAuthProvider){const y=r?.correlationId||"";this.eventHandler.emitEvent(Ce.HANDLE_REDIRECT_START,y,ve.Redirect),h=this.performanceClient.startMeasurement(Zh,y),this.logger.trace("12v7is",y);const p=new Qc(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,He.handleRedirectPromise,this.performanceClient,this.platformAuthProvider,r.accountId,this.nativeInternalStorage,r.correlationId);f=K(p.handleRedirectPromise.bind(p),M_,this.logger,this.performanceClient,h.event.correlationId)(this.performanceClient,h.event.correlationId)}else{const[y,p]=this.browserStorage.getCachedRequest(""),S=y.correlationId;this.eventHandler.emitEvent(Ce.HANDLE_REDIRECT_START,S,ve.Redirect),h=this.performanceClient.startMeasurement(Zh,S),this.logger.trace("0znzs5",S);const T=this.createRedirectClient(S);f=K(T.handleRedirectPromise.bind(T),N_,this.logger,this.performanceClient,h.event.correlationId)(y,p,h,n)}}catch(y){throw this.browserStorage.resetRequestCache(""),y}return f.then(y=>(y?(this.browserStorage.resetRequestCache(y.correlationId),this.eventHandler.emitEvent(Ce.ACQUIRE_TOKEN_SUCCESS,y.correlationId,ve.Redirect,y),this.logger.verbose("0ui8f5",y.correlationId),o.length<this.getAllAccounts().length&&(this.eventHandler.emitEvent(Ce.LOGIN_SUCCESS,y.correlationId,ve.Redirect,y.account),this.logger.verbose("16im3l",y.correlationId)),h.end({success:!0},void 0,y.account)):h.event.errorCode?h.end({success:!1},void 0):h.discard(),this.eventHandler.emitEvent(Ce.HANDLE_REDIRECT_END,h.event.correlationId,ve.Redirect),y)).catch(y=>{this.browserStorage.resetRequestCache(h.event.correlationId);const p=y;throw this.eventHandler.emitEvent(Ce.ACQUIRE_TOKEN_FAILURE,h.event.correlationId,ve.Redirect,null,p),this.eventHandler.emitEvent(Ce.HANDLE_REDIRECT_END,h.event.correlationId,ve.Redirect),h.end({success:!1},p),y})}async acquireTokenRedirect(n){const a=this.getRequestCorrelationId(n);this.logger.verbose("0os66p",a);const o=this.performanceClient.startMeasurement(J_,a);o.add({scenarioId:n.scenarioId});const r=this.config.auth.onRedirectNavigate;this.config.auth.onRedirectNavigate=d=>{const h=typeof r=="function"?r(d):void 0;return o.add({navigateCallbackResult:h!==!1}),o.event=o.end({success:!0},void 0,n.account)||o.event,h};try{Lv(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0,Oa.SIGNIN),this.eventHandler.emitEvent(Ce.ACQUIRE_TOKEN_START,a,ve.Redirect,n);let d;return this.platformAuthProvider&&this.canUsePlatformBroker(n)?d=new Qc(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,He.acquireTokenRedirect,this.performanceClient,this.platformAuthProvider,this.getNativeAccountId(n),this.nativeInternalStorage,a).acquireTokenRedirect(n,o).catch(f=>{if(f instanceof pi&&_o(f))return this.platformAuthProvider=void 0,this.createRedirectClient(a).acquireToken(n);if(f instanceof $n)return this.logger.verbose("1ipyz4",a),this.createRedirectClient(a).acquireToken(n);throw f}):d=this.createRedirectClient(a).acquireToken(n),await d}catch(d){throw this.browserStorage.resetRequestCache(a),o.event.status===2?this.performanceClient.startMeasurement(Zh,a).end({success:!1},d,n.account):o.end({success:!1},d,n.account),this.eventHandler.emitEvent(Ce.ACQUIRE_TOKEN_FAILURE,a,ve.Redirect,null,d),d}}acquireTokenPopup(n){const a=this.getRequestCorrelationId(n),o=this.performanceClient.startMeasurement(q_,a);o.add({scenarioId:n.scenarioId});try{this.logger.verbose("0ch87b",a),Pc(this.initialized,o,n.account),this.browserStorage.setInteractionInProgress(!0,Oa.SIGNIN,n.overrideInteractionInProgress,a)}catch(f){return Promise.reject(f)}const r=this.getAllAccounts();this.eventHandler.emitEvent(Ce.ACQUIRE_TOKEN_START,a,ve.Popup,n);let d;const h=this.getPreGeneratedPkceCodes(a);return this.canUsePlatformBroker(n)?d=this.acquireTokenNative({...n,correlationId:a},He.acquireTokenPopup).then(f=>(o.end({success:!0,isNativeBroker:!0},void 0,f.account),f)).catch(f=>{if(f instanceof pi&&_o(f))return this.platformAuthProvider=void 0,this.createPopupClient(a).acquireToken(n,h);if(f instanceof $n)return this.logger.verbose("0yy5fw",a),this.createPopupClient(a).acquireToken(n,h);throw f}):d=this.createPopupClient(a).acquireToken(n,h),d.then(f=>{const y=r.length<this.getAllAccounts().length;return this.eventHandler.emitEvent(Ce.ACQUIRE_TOKEN_SUCCESS,a,ve.Popup,f),y&&this.eventHandler.emitEvent(Ce.LOGIN_SUCCESS,a,ve.Popup,f.account),o.end({success:!0,accessTokenSize:f.accessToken.length,idTokenSize:f.idToken.length},void 0,f.account),f}).catch(f=>(this.eventHandler.emitEvent(Ce.ACQUIRE_TOKEN_FAILURE,a,ve.Popup,null,f),o.end({success:!1},f,n.account),Promise.reject(f))).finally(async()=>{this.browserStorage.setInteractionInProgress(!1),this.config.system.navigatePopups||await this.preGeneratePkceCodes(a)})}trackPageVisibilityWithMeasurement(){const n=this.ssoSilentMeasurement||this.acquireTokenByCodeAsyncMeasurement;n&&n.increment({visibilityChangeCount:1})}async ssoSilent(n){const a=this.getRequestCorrelationId(n),o={...n,prompt:n.prompt,correlationId:a};this.ssoSilentMeasurement=this.performanceClient.startMeasurement(X_,a),this.ssoSilentMeasurement?.add({scenarioId:n.scenarioId}),Pc(this.initialized,this.ssoSilentMeasurement,n.account),this.ssoSilentMeasurement?.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement);const r=this.getAllAccounts();this.logger.verbose("0w1b45",a),this.eventHandler.emitEvent(Ce.ACQUIRE_TOKEN_START,a,ve.Silent,o);let d;return this.canUsePlatformBroker(o)?d=this.acquireTokenNative(o,He.ssoSilent).catch(h=>{if(h instanceof pi&&_o(h))return this.platformAuthProvider=void 0,this.createSilentIframeClient(o.correlationId).acquireToken(o);throw h}):d=this.createSilentIframeClient(o.correlationId).acquireToken(o),d.then(h=>{const f=r.length<this.getAllAccounts().length;return this.eventHandler.emitEvent(Ce.ACQUIRE_TOKEN_SUCCESS,a,ve.Silent,h),f&&this.eventHandler.emitEvent(Ce.LOGIN_SUCCESS,a,ve.Silent,h.account),this.ssoSilentMeasurement?.end({success:!0,isNativeBroker:h.fromPlatformBroker,accessTokenSize:h.accessToken.length,idTokenSize:h.idToken.length},void 0,h.account),h}).catch(h=>{throw this.eventHandler.emitEvent(Ce.ACQUIRE_TOKEN_FAILURE,a,ve.Silent,null,h),this.ssoSilentMeasurement?.end({success:!1},h,n.account),h}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenByCode(n){const a=this.getRequestCorrelationId(n);this.logger.trace("0ch6ga",a);const o=this.performanceClient.startMeasurement(Q_,a);Pc(this.initialized,o),this.eventHandler.emitEvent(Ce.ACQUIRE_TOKEN_START,a,ve.Silent,n),o.add({scenarioId:n.scenarioId});try{if(n.code&&n.nativeAccountId)throw te(xw);if(n.code){const r=n.code;let d=this.hybridAuthCodeResponses.get(r);return d?(this.logger.verbose("0qgp28",a),o.discard()):(this.logger.verbose("06eh73",a),d=this.acquireTokenByCodeAsync({...n,correlationId:a}).then(h=>(this.eventHandler.emitEvent(Ce.ACQUIRE_TOKEN_SUCCESS,a,ve.Silent,h),this.hybridAuthCodeResponses.delete(r),o.end({success:!0,isNativeBroker:h.fromPlatformBroker,accessTokenSize:h.accessToken.length,idTokenSize:h.idToken.length},void 0,h.account),h)).catch(h=>{throw this.hybridAuthCodeResponses.delete(r),this.eventHandler.emitEvent(Ce.ACQUIRE_TOKEN_FAILURE,a,ve.Silent,null,h),o.end({success:!1},h),h}),this.hybridAuthCodeResponses.set(r,d)),await d}else if(n.nativeAccountId)if(this.canUsePlatformBroker(n,n.nativeAccountId)){const r=await this.acquireTokenNative({...n,correlationId:a},He.acquireTokenByCode,n.nativeAccountId).catch(d=>{throw d instanceof pi&&_o(d)&&(this.platformAuthProvider=void 0),d});return o.end({success:!0},void 0,r.account),r}else throw te(Dw);else throw te(Mw)}catch(r){throw this.eventHandler.emitEvent(Ce.ACQUIRE_TOKEN_FAILURE,a,ve.Silent,null,r),o.end({success:!1},r),r}}async acquireTokenByCodeAsync(n){const a=this.getRequestCorrelationId(n);return this.logger.trace("10d9hy",a),this.acquireTokenByCodeAsyncMeasurement=this.performanceClient.startMeasurement(R_,a),this.acquireTokenByCodeAsyncMeasurement?.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),await this.createSilentAuthCodeClient(a).acquireToken(n).then(d=>(this.acquireTokenByCodeAsyncMeasurement?.end({success:!0,fromCache:d.fromCache,isNativeBroker:d.fromPlatformBroker}),d)).catch(d=>{throw this.acquireTokenByCodeAsyncMeasurement?.end({success:!1},d),d}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenFromCache(n,a){switch(a){case Zt.Default:case Zt.AccessToken:case Zt.AccessTokenAndRefreshToken:const o=this.createSilentCacheClient(n.correlationId);return K(o.acquireToken.bind(o),y_,this.logger,this.performanceClient,n.correlationId)(n);default:throw Q(Cs)}}async acquireTokenByRefreshToken(n,a){switch(a){case Zt.Default:case Zt.AccessTokenAndRefreshToken:case Zt.RefreshToken:case Zt.RefreshTokenAndNetwork:const o=this.createSilentRefreshClient(n.correlationId);return K(o.acquireToken.bind(o),S_,this.logger,this.performanceClient,n.correlationId)(n);default:throw Q(Cs)}}async acquireTokenBySilentIframe(n){const a=this.createSilentIframeClient(n.correlationId);return K(a.acquireToken.bind(a),v_,this.logger,this.performanceClient,n.correlationId)(n)}async logoutRedirect(n){const a=this.getRequestCorrelationId(n);return Lv(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0,Oa.SIGNOUT),this.createRedirectClient(a).logout(n)}logoutPopup(n){try{const a=this.getRequestCorrelationId(n);return ug(this.initialized),this.browserStorage.setInteractionInProgress(!0,Oa.SIGNOUT),this.createPopupClient(a).logout(n).finally(()=>{this.browserStorage.setInteractionInProgress(!1)})}catch(a){return Promise.reject(a)}}async clearCache(n){if(!this.isBrowserEnvironment)return;const a=this.getRequestCorrelationId(n);return this.createSilentCacheClient(a).logout(n)}getAllAccounts(n){return ck(this.logger,this.browserStorage,this.isBrowserEnvironment,this.getRequestCorrelationId(),n)}getAccount(n){return uk(n,this.logger,this.browserStorage,this.getRequestCorrelationId())}setActiveAccount(n){dk(n,this.browserStorage,this.getRequestCorrelationId())}getActiveAccount(){return hk(this.browserStorage,this.getRequestCorrelationId())}async hydrateCache(n,a){this.logger.verbose("16jycr",n.correlationId);const o=Zb(n.account,n.cloudGraphHostName,n.msGraphHost);return await this.browserStorage.setAccount(o,n.correlationId,Ss(n.idTokenClaims),He.hydrateCache),n.fromPlatformBroker?(this.logger.verbose("1fxyu8",n.correlationId),this.nativeInternalStorage.hydrateCache(n,a)):this.browserStorage.hydrateCache(n,a)}async acquireTokenNative(n,a,o,r){const d=this.getRequestCorrelationId(n);if(this.logger.trace("0b9y3p",d),!this.platformAuthProvider)throw te(dS);return new Qc(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,a,this.performanceClient,this.platformAuthProvider,o||this.getNativeAccountId(n),this.nativeInternalStorage,d).acquireToken(n,r)}canUsePlatformBroker(n,a){const o=this.getRequestCorrelationId(n);if(this.logger.trace("1n9lbl",o),!this.platformAuthProvider)return this.logger.trace("0vnu11",o),!1;if(!hl(this.config,this.logger,o,this.platformAuthProvider,n.authenticationScheme))return this.logger.trace("1m4bzf",o),!1;if(n.prompt)switch(n.prompt){case un.NONE:case un.CONSENT:case un.LOGIN:this.logger.trace("0vdv8e",o);break;default:return this.logger.trace("0pdzw6",o),!1}return!a&&!this.getNativeAccountId(n)?(this.logger.trace("16lbtk",o),!1):!0}getNativeAccountId(n){const a=n.account||this.getAccount({loginHint:n.loginHint,sid:n.sid})||this.getActiveAccount();return a&&a.nativeAccountId||""}createPopupClient(n){return new Lk(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,n,this.platformAuthProvider)}createRedirectClient(n){return new Kk(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,n,this.platformAuthProvider)}createSilentIframeClient(n){return new Yk(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,He.ssoSilent,this.performanceClient,this.nativeInternalStorage,n,this.platformAuthProvider)}createSilentCacheClient(n){return new IS(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,n,this.platformAuthProvider)}createSilentRefreshClient(n){return new Qk(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,n,this.platformAuthProvider)}createSilentAuthCodeClient(n){return new Jk(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,He.acquireTokenByCode,this.performanceClient,n,this.platformAuthProvider)}addEventCallback(n,a){return this.eventHandler.addEventCallback(n,a)}removeEventCallback(n){this.eventHandler.removeEventCallback(n)}addPerformanceCallback(n){return CS(),this.performanceClient.addPerformanceCallback(n)}removePerformanceCallback(n){return this.performanceClient.removePerformanceCallback(n)}getLogger(){return this.logger}setLogger(n){this.logger=n}initializeWrapperLibrary(n,a){this.browserStorage.setWrapperMetadata(n,a)}setNavigationClient(n){this.navigationClient=n}getConfiguration(){return this.config}getPerformanceClient(){return this.performanceClient}isBrowserEnv(){return this.isBrowserEnvironment}getRequestCorrelationId(n){return n?.correlationId?n.correlationId:this.isBrowserEnvironment?ws():""}async loginRedirect(n){const a=this.getRequestCorrelationId(n);return this.logger.verbose("0lz9hf",a),this.acquireTokenRedirect({correlationId:a,...n||Mv})}loginPopup(n){const a=this.getRequestCorrelationId(n);return this.logger.verbose("0qw7v5",a),this.acquireTokenPopup({correlationId:a,...n||Mv})}async acquireTokenSilent(n){const a=this.getRequestCorrelationId(n),o=this.performanceClient.startMeasurement(Y_,a);o.add({cacheLookupPolicy:n.cacheLookupPolicy,scenarioId:n.scenarioId}),Pc(this.initialized,o,n.account),this.logger.verbose("0x1c4s",a);const r=n.account||this.getActiveAccount();if(!r)throw te(_w);return this.acquireTokenSilentDeduped(n,r,a).then(d=>(o.end({success:!0,fromCache:d.fromCache,isNativeBroker:d.fromPlatformBroker,accessTokenSize:d.accessToken.length,idTokenSize:d.idToken.length},void 0,d.account),{...d,state:n.state,correlationId:a})).catch(d=>{throw d instanceof tt&&d.setCorrelationId(a),o.end({success:!1},d,r),d})}async acquireTokenSilentDeduped(n,a,o){const r=gu(this.config.auth.clientId,{...n,authority:n.authority||this.config.auth.authority},a.homeAccountId),d=JSON.stringify(r),h=this.activeSilentTokenRequests.get(d);if(typeof h>"u"){this.logger.verbose("0fcjbk",o),this.performanceClient.addFields({deduped:!1},o);const f=K(this.acquireTokenSilentAsync.bind(this),g_,this.logger,this.performanceClient,o)({...n,correlationId:o},a);return this.activeSilentTokenRequests.set(d,f),f.finally(()=>{this.activeSilentTokenRequests.delete(d)})}else return this.logger.verbose("1yq7nb",o),this.performanceClient.addFields({deduped:!0},o),h}async acquireTokenSilentAsync(n,a){const o=()=>this.trackPageVisibility(n.correlationId);this.eventHandler.emitEvent(Ce.ACQUIRE_TOKEN_START,n.correlationId,ve.Silent,n),n.correlationId&&this.performanceClient.incrementFields({visibilityChangeCount:0},n.correlationId),document.addEventListener("visibilitychange",o);const r=await K(mk,E_,this.logger,this.performanceClient,n.correlationId)(n,a,this.config,this.performanceClient,this.logger),d=n.cacheLookupPolicy||Zt.Default;return this.acquireTokenSilentNoIframe(r,d).catch(async f=>{if(Zk(f,d)){const p=`${f.errorCode}${f.subError?`|${f.subError}`:""}`;if(this.performanceClient.addFields({silentRefreshReason:p},n.correlationId),this.activeIframeRequest)if(d!==Zt.Skip){const[S,T]=this.activeIframeRequest;this.logger.verbose("1w8fso",r.correlationId);const k=this.performanceClient.startMeasurement(C_,r.correlationId);k.add({awaitIframeCorrelationId:T});const N=await S;if(k.end({success:N}),N)return this.logger.verbose("0ywzzi",r.correlationId),this.acquireTokenSilentNoIframe(r,d);throw this.logger.info("17y14q",r.correlationId),f}else return this.logger.warning("1bd4p8",r.correlationId),K(this.acquireTokenBySilentIframe.bind(this),Bv,this.logger,this.performanceClient,r.correlationId)(r);else{let S;return this.activeIframeRequest=[new Promise(T=>{S=T}),r.correlationId],this.logger.verbose("0rh08z",r.correlationId),K(this.acquireTokenBySilentIframe.bind(this),Bv,this.logger,this.performanceClient,r.correlationId)(r).then(T=>(S(!0),T)).catch(T=>{throw S(!1),T}).finally(()=>{this.activeIframeRequest=void 0})}}else throw f}).then(f=>(this.eventHandler.emitEvent(Ce.ACQUIRE_TOKEN_SUCCESS,n.correlationId,ve.Silent,f),n.correlationId&&this.performanceClient.addFields({fromCache:f.fromCache,isNativeBroker:f.fromPlatformBroker},n.correlationId),f)).catch(f=>{throw this.eventHandler.emitEvent(Ce.ACQUIRE_TOKEN_FAILURE,n.correlationId,ve.Silent,null,f),f}).finally(()=>{document.removeEventListener("visibilitychange",o)})}async acquireTokenSilentNoIframe(n,a){return hl(this.config,this.logger,n.correlationId,this.platformAuthProvider,n.authenticationScheme)&&n.account.nativeAccountId?(this.logger.verbose("0sczo4",n.correlationId),this.acquireTokenNative(n,He.acquireTokenSilent_silentFlow,n.account.nativeAccountId,a).catch(async o=>{throw o instanceof pi&&_o(o)?(this.logger.verbose("07rkmb",n.correlationId),this.platformAuthProvider=void 0,Q(Cs)):o})):(this.logger.verbose("0ox81t",n.correlationId),a===Zt.AccessToken&&this.logger.verbose("0fvwxe",n.correlationId),K(this.acquireTokenFromCache.bind(this),h_,this.logger,this.performanceClient,n.correlationId)(n,a).catch(o=>{if(a===Zt.AccessToken)throw o;return this.eventHandler.emitEvent(Ce.ACQUIRE_TOKEN_NETWORK_START,n.correlationId,ve.Silent,n),K(this.acquireTokenByRefreshToken.bind(this),f_,this.logger,this.performanceClient,n.correlationId)(n,a)}))}async preGeneratePkceCodes(n){return this.logger.verbose("1x6uj6",n),this.pkceCode=await K(Is,_s,this.logger,this.performanceClient,n)(this.performanceClient,this.logger,n),Promise.resolve()}getPreGeneratedPkceCodes(n){const a=this.pkceCode?{...this.pkceCode}:void 0;return this.pkceCode=void 0,a?this.logger.verbose("12js1o",n):this.logger.verbose("1oe9ci",n),this.performanceClient.addFields({usePreGeneratedPkce:!!a},n),a}logMultipleInstances(n,a){const o=this.config.auth.clientId;if(!window)return;window.msal=window.msal||{},window.msal.clientIds=window.msal.clientIds||[],window.msal.clientIds.length>0&&this.logger.verbose("1qtz3l",a),window.msal.clientIds.push(o),Xk(o,n,this.logger,a)}}function Zk(l,n){const a=!(l instanceof $n&&l.subError!==Yf),o=l.errorCode===jn.INVALID_GRANT_ERROR||l.errorCode===Cs,r=a&&o||l.errorCode===df||l.errorCode===GC,d=fw.includes(n);return r&&d}class wg{static loggerCallback(n,a){switch(n){case rt.Error:console.error(a);return;case rt.Info:console.info(a);return;case rt.Verbose:console.debug(a);return;case rt.Warning:console.warn(a);return;default:console.log(a);return}}constructor(n){this.browserEnvironment=typeof window<"u",this.config=jk(n,this.browserEnvironment);let a;try{a=window[Ln.SessionStorage]}catch{}const o=a?.getItem(W_),r=a?.getItem(ek)?.toLowerCase(),d=r==="true"?!0:r==="false"?!1:void 0,h={...this.config.system.loggerOptions},f=o&&Object.keys(rt).includes(o)?rt[o]:void 0;f&&(h.loggerCallback=wg.loggerCallback,h.logLevel=f),d!==void 0&&(h.piiLoggingEnabled=d),this.logger=new vi(h,rk,ks),this.available=!1}getConfig(){return this.config}getLogger(){return this.logger}isAvailable(){return this.available}isBrowserEnvironment(){return this.browserEnvironment}}class jo extends wg{getModuleName(){return jo.MODULE_NAME}getId(){return jo.ID}async initialize(n){return this.available=typeof window<"u",this.available}}jo.MODULE_NAME="";jo.ID="StandardOperatingContext";class $k{constructor(n,a){this.controller=a||new bg(new jo(n))}async initialize(n){return this.controller.initialize(n)}async acquireTokenPopup(n){return this.controller.acquireTokenPopup(n)}acquireTokenRedirect(n){return this.controller.acquireTokenRedirect(n)}acquireTokenSilent(n){return this.controller.acquireTokenSilent(n)}acquireTokenByCode(n){return this.controller.acquireTokenByCode(n)}addEventCallback(n,a){return this.controller.addEventCallback(n,a)}removeEventCallback(n){return this.controller.removeEventCallback(n)}addPerformanceCallback(n){return this.controller.addPerformanceCallback(n)}removePerformanceCallback(n){return this.controller.removePerformanceCallback(n)}getAccount(n){return this.controller.getAccount(n)}getAllAccounts(n){return this.controller.getAllAccounts(n)}handleRedirectPromise(n){return this.controller.handleRedirectPromise(n)}loginPopup(n){return this.controller.loginPopup(n)}loginRedirect(n){return this.controller.loginRedirect(n)}logoutRedirect(n){return this.controller.logoutRedirect(n)}logoutPopup(n){return this.controller.logoutPopup(n)}ssoSilent(n){return this.controller.ssoSilent(n)}getLogger(){return this.controller.getLogger()}setLogger(n){this.controller.setLogger(n)}setActiveAccount(n){this.controller.setActiveAccount(n)}getActiveAccount(){return this.controller.getActiveAccount()}initializeWrapperLibrary(n,a){return this.controller.initializeWrapperLibrary(n,a)}setNavigationClient(n){this.controller.setNavigationClient(n)}getConfiguration(){return this.controller.getConfiguration()}async hydrateCache(n,a){return this.controller.hydrateCache(n,a)}clearCache(n){return this.controller.clearCache(n)}}const Wk={auth:{clientId:"893adac7-4ea6-44e3-b2fe-e7bd49f64814",authority:"https://login.microsoftonline.com/d8d598e0-2fb2-4605-8514-1967b50e2bd6",redirectUri:window.location.origin+window.location.pathname},cache:{cacheLocation:"localStorage",storeAuthStateInCookie:!1}},MS=["Calendars.ReadWrite.Shared"],eI="https://graph.microsoft.com/v1.0";let xS=null;const $h=new $k(Wk),tI=$h.initialize().then(()=>$h.handleRedirectPromise()).then(l=>(l&&console.log("MSAL redirect login succeeded:",l.account?.username),$h)).catch(l=>(console.error("MSAL init failed:",l),xS=l?.message||String(l),null));function nI(){return xS}async function iI(){return tI}async function aI(l){const n=l.getAllAccounts();if(n.length===0)return null;try{return(await l.acquireTokenSilent({scopes:MS,account:n[0]})).accessToken}catch{return null}}function sI(l){l.loginRedirect({scopes:MS})}async function oI(l){l.getAllAccounts().length>0&&l.clearCache()}async function rI(l,n,a){const o=new URLSearchParams({startDateTime:`${n}T00:00:00`,endDateTime:`${a}T23:59:59`,$top:"100",$select:"subject,start,end,showAs,isAllDay,isCancelled,attendees,categories",$orderby:"start/dateTime"}),r=[];let d=`${eI}/me/calendarView?${o}`;for(;d;){const h=await fetch(d,{headers:{Authorization:`Bearer ${l}`}});if(!h.ok)throw h.status===401?new Error("outlook_token_expired"):new Error(`Graph API error: ${h.status}`);const f=await h.json();r.push(...f.value||[]),d=f["@odata.nextLink"]||null}return r}const lI={busy:"BUSY",oof:"OOF",tentative:"TENTATIVE",free:"FREE",workingElsewhere:"WORKING-ELSEWHERE",unknown:"BUSY"};function DS(l){const n=new Date(l.start.dateTime),a=new Date(l.end.dateTime),o=n.getFullYear()+"-"+String(n.getMonth()+1).padStart(2,"0")+"-"+String(n.getDate()).padStart(2,"0"),r=String(n.getHours()).padStart(2,"0")+":"+String(n.getMinutes()).padStart(2,"0"),d=String(a.getHours()).padStart(2,"0")+":"+String(a.getMinutes()).padStart(2,"0");return{name:l.subject||"Outlook Event",date:o,start:r,end:d,status:lI[l.showAs]||"BUSY",isMeeting:(l.attendees?.length||0)>0,categories:l.categories||[],isAllDay:l.isAllDay||!1,isCancelled:l.isCancelled||!1,graphId:l.id}}const cI=Object.freeze(Object.defineProperty({__proto__:null,acquireTokenSilent:aI,fetchCalendarEvents:rI,getInitializedMsal:iI,getMsalInitError:nI,graphEventToParsedFormat:DS,loginRedirect:sI,logout:oI},Symbol.toStringTag,{value:"Module"})),Vi=typeof window<"u"&&window.electronOutlook,el=Vi?Promise.resolve(null):xE(()=>Promise.resolve().then(()=>cI),void 0,import.meta.url).catch(()=>null);function uI({events:l,setEvents:n,settings:a,pushUndo:o,minDate:r,maxDate:d,tags:h}){const[f,y]=z.useState(!1),[p,S]=z.useState("idle"),[T,k]=z.useState(null),[N,F]=z.useState(null),Y=z.useRef(null),pe=z.useRef(!1);z.useEffect(()=>{let fe=!1;return Vi?Vi.checkAccount().then(W=>{!fe&&W&&y(!0)}):el.then(W=>{if(!(fe||!W))return W.getInitializedMsal().then(ee=>{if(!fe){if(!ee){S("error"),k(W.getMsalInitError?.()||"MSAL failed to initialize");return}Y.current=ee,ee.getAllAccounts().length>0&&y(!0)}})}),()=>{fe=!0}},[]);const Z=z.useCallback(async()=>{if(Vi){S("fetching"),k(null);try{await Vi.connect(),y(!0),S("idle")}catch(fe){S("error"),k(fe.message||"Connection failed")}}else{if(!Y.current){const W=await el;S("error"),k(W?.getMsalInitError?.()||"MSAL not ready  try refreshing the page");return}(await el)?.loginRedirect(Y.current)}},[]),ue=z.useCallback(async()=>{if(o(),n(fe=>fe.filter(W=>!W.outlookSynced)),Vi)await Vi.disconnect();else if(Y.current){const fe=await el;try{await fe?.logout(Y.current)}catch{}}y(!1),S("idle"),k(null),F(null)},[o,n]),ie=z.useCallback(async()=>{if(!pe.current){pe.current=!0,S("fetching"),k(null);try{let fe;if(Vi)fe=await Vi.fetchEvents(r,d);else{if(!Y.current)throw new Error("Not connected");const ge=await el;let ze=await ge.acquireTokenSilent(Y.current);if(!ze){ge.loginRedirect(Y.current);return}fe=await ge.fetchCalendarEvents(ze,r,d)}const W=fe.filter(ge=>!ge.isCancelled).map(DS).filter(ge=>!ge.isAllDay).filter(ge=>ge.start!==ge.end),ee=nC(W,a,r,d),se=a.icsCategoryRules||[],Ee=ee.map((ge,ze)=>{let Fe=null;if(ge.categories?.length>0)for(const Ae of ge.categories){const we=se.find(Ke=>Ke.include!==!1&&Ke.tagId&&Ke.category.toLowerCase()===Ae.toLowerCase());if(we){Fe=we.tagId;break}}return{id:Date.now()+ze,name:ge.name,start:ge.start,end:ge.end,date:ge.date,tagId:Fe,outlookSynced:!0}});o(),n(ge=>{const ze=ge.filter(Ae=>!Ae.outlookSynced),Fe=[];for(const Ae of Ee)ze.some(Ke=>Ke.name===Ae.name&&Ke.start===Ae.start&&Ke.end===Ae.end&&Ke.date===Ae.date)||Fe.push(Ae);return[...ze,...Fe]}),F(new Date),S("idle")}catch(fe){S("error"),k(fe.message)}finally{pe.current=!1}}},[r,d,a,o,n]);return z.useEffect(()=>{f&&ie()},[f,r,d]),z.useEffect(()=>{if(!f)return;const fe=setInterval(ie,300*1e3);return()=>clearInterval(fe)},[f,ie]),{outlookAvailable:!0,outlookConnected:f,outlookStatus:p,outlookError:T,lastFetched:N,connectOutlook:Z,disconnectOutlook:ue,refreshOutlookEvents:ie}}const dI=Object.freeze(Object.defineProperty({__proto__:null,useOutlook:uI},Symbol.toStringTag,{value:"Module"}));function hI(){return{syncIndicator:null,syncSettingsUI:null}}function fI(){return{outlookAvailable:!1,outlookConnected:!1,outlookStatus:"idle",outlookError:null,lastFetched:null,connectOutlook:()=>{},disconnectOutlook:()=>{},refreshOutlookEvents:()=>{}}}const gI=Object.assign({"./useSync.jsx":RE}),mI=gI["./useSync.jsx"]?.useSync??hI,pI=Object.assign({"./useOutlook.jsx":dI}),yI=pI["./useOutlook.jsx"]?.useOutlook??fI,vI="2026-02-26 10:44 PM CT";function US(l){const n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(l);return n?{r:parseInt(n[1],16),g:parseInt(n[2],16),b:parseInt(n[3],16)}:{r:148,g:163,b:184}}function CI(l,n,a){const{r:o,g:r,b:d}=US(l),h=a?{r:30,g:41,b:59}:{r:255,g:255,b:255},f=(y,p)=>Math.round(y*n+p*(1-n));return`rgb(${f(o,h.r)}, ${f(r,h.g)}, ${f(d,h.b)})`}function SI(l,n,a){const{r:o,g:r,b:d}=US(l),h=a?{r:30,g:41,b:59}:{r:255,g:255,b:255},f={r:o*n+h.r*(1-n),g:r*n+h.g*(1-n),b:d*n+h.b*(1-n)};return(f.r*299+f.g*587+f.b*114)/1e3>150?"#1a1a1a":"#ffffff"}function TI(l,n){const[a]=l.split(":").map(Number),[o]=n.split(":").map(Number),r=l.split(":")[1];return a>=19&&a<=23&&o!==a-12?`${(a-12).toString().padStart(2,"0")}:${r}`:a>=1&&a<=6&&o!==a+12?`${(a+12).toString().padStart(2,"0")}:${r}`:l}const _a=[.5,.75,1,1.5,2,3],Wh={small:{title:"0.7rem",time:"0.55rem",label:"Small"},medium:{title:"0.8rem",time:"0.65rem",label:"Medium"},large:{title:"0.95rem",time:"0.75rem",label:"Large"},xlarge:{title:"1.1rem",time:"0.85rem",label:"Extra Large"}},Wv={workdayStart:"09:00",workdayEnd:"17:00",useExtendedHours:!0,extendedStart:"06:00",extendedEnd:"23:59",autoStartNext:!1,darkMode:!1,zoomLevel:1.5,fitMode:!0,smartDuration:!0,defaultTaskDuration:30,defaultEventDuration:60,defaultTaskColor:"#94a3b8",defaultEventColor:"#94a3b8",minFragmentMinutes:5,calendarFontSize:"medium",wrapListNames:!0,restrictTasksToWorkHours:!0,debugMode:!1,debugTimeOffset:0,icsImportBusy:!0,icsImportOof:!0,icsImportTentative:!1,icsImportFree:!1,icsImportWorkingElsewhere:!1,icsImportMeetingsOnly:!1,icsReplaceOnImport:"no",icsCategoryRules:[]},eC=["zoomLevel","fitMode","debugMode","debugTimeOffset","darkMode"],EI=[{id:1,name:"Epic Medical Center",color:"#ef4444"},{id:2,name:"Verona Hospital",color:"#667eea"},{id:3,name:"Fitchburg Health",color:"#10b981"},{id:4,name:"Internal",color:"#f59e0b"}],AI=[{id:1,name:"Tech note review",duration:30,adjustedDuration:null,completed:!1,tagId:null,pausedElapsed:0},{id:2,name:"Sherlock #12345678",duration:75,adjustedDuration:null,completed:!1,tagId:3,pausedElapsed:0},{id:3,name:"Firewatch investigation",duration:60,adjustedDuration:null,completed:!1,tagId:1,pausedElapsed:0}],bI=[{id:1,name:"EMC check-in",start:"11:00",end:"11:30",tagId:1},{id:2,name:"Workgroup meeting",start:"13:30",end:"14:30",tagId:4},{id:3,name:"Verona Hospital office hours",start:"15:00",end:"16:00",tagId:2}];function ef(){const l=localStorage.getItem("timekerper-activeTaskId");if(!l||l==="null")return null;const n=JSON.parse(l),a=localStorage.getItem("timekerper-tasks");if(!a)return null;const r=JSON.parse(a).find(Y=>Y.id===n&&!Y.completed);if(!r||r.startedAtMin==null)return null;const d=localStorage.getItem("timekerper-settings"),h=d?JSON.parse(d):{},f=h.debugMode&&h.debugTimeOffset||0,y=rn()+f,p=localStorage.getItem("timekerper-events"),S=p?JSON.parse(p):[],T=r.startedAtDate||ft(),k=r.pauseEvents&&r.pauseEvents.length>0,N=Tf(S,r.pauseEvents||[],r.startedAtMin,y,T)+(k?0:r.pauseGapMinutes||0),F=Math.max(0,y-r.startedAtMin-N);return{id:n,taskStartTime:Date.now()-F*6e4,elapsedMinutes:F}}function wI(l,n){const a=ft(),o=l.map(d=>{let h=d;return d.startedAtMin!=null&&!d.startedAtDate&&(h={...h,startedAtDate:a}),d.workSegments?.some(f=>!f.date)&&(h={...h,workSegments:h.workSegments.map(f=>f.date?f:{...f,date:a})}),d.pauseEvents?.some(f=>!f.date)&&(h={...h,pauseEvents:h.pauseEvents.map(f=>f.date?f:{...f,date:a})}),h}),r=n.map(d=>d.date?d:{...d,date:a});return{tasks:o,events:r}}function _I(){const l=localStorage.getItem("timekerper-tasks"),n=localStorage.getItem("timekerper-events"),a=l?JSON.parse(l):AI,o=n?JSON.parse(n):bI;if(parseInt(localStorage.getItem("timekerper-migrationVersion")||"0")<1){const d=wI(a,o);return localStorage.setItem("timekerper-tasks",JSON.stringify(d.tasks)),localStorage.setItem("timekerper-events",JSON.stringify(d.events)),localStorage.setItem("timekerper-migrationVersion","1"),d}return{tasks:a,events:o}}const tC=_I();function kI(){const[l,n]=z.useState(tC.tasks),[a,o]=z.useState(tC.events),[r,d]=z.useState(()=>{const m=localStorage.getItem("timekerper-settings"),E=m?{...Wv,...JSON.parse(m)}:Wv;return typeof E.darkMode!="boolean"&&(E.darkMode=E.darkMode==="on"||E.darkMode===!0),E}),[h,f]=z.useState(()=>{const m=localStorage.getItem("timekerper-tags");return m?JSON.parse(m):EI}),[y,p]=z.useState(()=>ef()?.id??null),[S,T]=z.useState(()=>ef()?.taskStartTime??null),[k,N]=z.useState(()=>ef()?.elapsedMinutes??0),F=r.debugMode&&r.debugTimeOffset||0,[Y,pe]=z.useState(rn()+F),[Z,ue]=z.useState(ft()),[ie,fe]=z.useState(()=>localStorage.getItem("tk_calendarView")||"1day"),W=z.useRef(ft()),ee=ft(),se=Z===ee,ge=(new Date(ee+"T12:00:00").getDay()+6)%7,ze=on(ee,-ge),Fe=on(ee,-1),Ae=ze<Fe?ze:Fe,we=on(ee,7),[Ke,Qe]=z.useState(!1),[j,q]=z.useState(!1),[oe,ne]=z.useState(!1),[he,b]=z.useState(!1),[x,J]=z.useState(null),[P,$]=z.useState(null),[re,ye]=z.useState(!0),[it,De]=z.useState(!1),[Ot,Ci]=z.useState("all"),[bt,ei]=z.useState(null),[Bt,Rt]=z.useState([]),[ja,Rs]=z.useState(null),[ti,qi]=z.useState(""),[Ha,za]=z.useState(30),[Ns,Ms]=z.useState(null),[Kt,vl]=z.useState(!1),[Ko,xs]=z.useState(""),[fn,Po]=z.useState("09:00"),[La,Ba]=z.useState("10:00"),[Ds,ni]=z.useState(null),[Nt,bn]=z.useState(ft()),[Yt,Go]=z.useState(!1),[Vo,Fo]=z.useState(""),[Ka,Si]=z.useState(null),ii=z.useRef(!1),ai=z.useRef(null),Pa=z.useRef(null),Ti=z.useRef(null),Yo=z.useRef(null),Qo=z.useRef(null),Us=z.useRef(null),[Ga,Au]=z.useState(320),[Cl,Sl]=z.useState(300),Va=z.useRef(!1),Ji=z.useRef(!1),[Xi,js]=z.useState(null),[qo,wn]=z.useState(null),[lt,wt]=z.useState(null),[Ei,Fa]=z.useState(null),Ai=z.useRef([]),Zi=z.useRef([]),si=z.useRef(l),gn=z.useRef(a),{syncIndicator:Jo,syncSettingsUI:$i}=mI({tasks:l,setTasks:n,events:a,setEvents:o,tags:h,setTags:f,settings:r,setSettings:d,activeTaskId:y,setActiveTaskId:p,setTaskStartTime:T,setElapsedMinutes:N,tasksRef:si,eventsRef:gn,timeOffset:F}),[,oi]=z.useState(0);z.useEffect(()=>{si.current=l},[l]),z.useEffect(()=>{gn.current=a},[a]);const Pe=z.useCallback(()=>{Ai.current=[...Ai.current.slice(-49),{tasks:si.current,events:gn.current}],Zi.current=[],oi(m=>m+1)},[]),{outlookAvailable:ri,outlookConnected:ut,outlookStatus:Qt,outlookError:Ya,lastFetched:mn,connectOutlook:bi,disconnectOutlook:bu,refreshOutlookEvents:Xo}=yI({events:a,setEvents:o,settings:r,pushUndo:Pe,minDate:Ae,maxDate:we,tags:h}),Hs=z.useCallback(()=>{const m=Ai.current;if(m.length===0)return;const E=m[m.length-1];Zi.current=[...Zi.current,{tasks:si.current,events:gn.current}],Ai.current=m.slice(0,-1),n(E.tasks),o(E.events),si.current=E.tasks,gn.current=E.events,oi(I=>I+1)},[]),zs=z.useCallback(()=>{const m=Zi.current;if(m.length===0)return;const E=m[m.length-1];Ai.current=[...Ai.current,{tasks:si.current,events:gn.current}],Zi.current=m.slice(0,-1),n(E.tasks),o(E.events),si.current=E.tasks,gn.current=E.events,oi(I=>I+1)},[]),Ls=Ai.current.length>0,Bs=Zi.current.length>0,Bn=Z>Ae,Wt=Z<we,Qa=ie==="1day"?1:parseInt(ie)||1,li=z.useMemo(()=>{if(Qa===1)return W.current=Z,[Z];const m=Qa-1;let E=W.current;return Z>on(E,m)?E=on(Z,-m):Z<E&&(E=Z),on(E,m)>we&&(E=on(we,-m)),E<Ae&&(E=Ae),W.current=E,Array.from({length:Qa},(I,D)=>on(E,D))},[Z,Qa,Ae,we]),Zo=li.includes(ee),Ks=z.useCallback(()=>{ue(m=>{const E=on(m,-1);return E>=Ae?E:m})},[Ae]),Wi=z.useCallback(()=>{ue(m=>{const E=on(m,1);return E<=we?E:m})},[we]),$o=z.useCallback(()=>{ue(ft())},[]),ct=z.useCallback(m=>{fe(m);const E=m==="1day"?1:parseInt(m)||1;E>1&&ue(I=>on(I,E-1)>we?on(we,-(E-1)):I<Ae?Ae:I)},[we,Ae]);z.useEffect(()=>{const m=E=>{const I=document.activeElement?.tagName?.toLowerCase();I==="input"||I==="textarea"||((E.ctrlKey||E.metaKey)&&E.key==="z"&&(E.preventDefault(),E.shiftKey?zs():Hs()),(E.ctrlKey||E.metaKey)&&E.key==="y"&&(E.preventDefault(),zs()),E.key==="ArrowLeft"&&!E.ctrlKey&&!E.metaKey&&!E.shiftKey&&Ks(),E.key==="ArrowRight"&&!E.ctrlKey&&!E.metaKey&&!E.shiftKey&&Wi(),(E.key==="t"||E.key==="T")&&$o())};return window.addEventListener("keydown",m),()=>window.removeEventListener("keydown",m)},[Hs,zs,Ks,Wi,$o]),z.useEffect(()=>{localStorage.setItem("timekerper-tasks",JSON.stringify(l))},[l]),z.useEffect(()=>{localStorage.setItem("timekerper-events",JSON.stringify(a))},[a]),z.useEffect(()=>{localStorage.setItem("timekerper-settings",JSON.stringify(r))},[r]),z.useEffect(()=>{localStorage.setItem("timekerper-tags",JSON.stringify(h))},[h]),z.useEffect(()=>{localStorage.setItem("timekerper-activeTaskId",JSON.stringify(y))},[y]),z.useEffect(()=>{localStorage.setItem("tk_calendarView",ie)},[ie]),z.useEffect(()=>{if(!y||!S)return;const m=setInterval(()=>{const E=rn()+F;pe(E);const I=l.find(D=>D.id===y);if(I&&I.startedAtMin!=null){const D=I.startedAtDate||ft(),L=Tf(a,I.pauseEvents||[],I.startedAtMin,E,D);N(Math.max(0,E-I.startedAtMin-L))}},1e3);return()=>clearInterval(m)},[y,S,F,l,a]),z.useEffect(()=>{if(y)return;const m=()=>pe(rn()+F);m();const E=setInterval(m,15e3);return()=>clearInterval(E)},[y,F]),z.useEffect(()=>{document.documentElement.setAttribute("data-theme",r.darkMode===!0?"dark":"light")},[r.darkMode]),z.useEffect(()=>{if(!he)return;const m=E=>{Yo.current&&!Yo.current.contains(E.target)&&b(!1)};return document.addEventListener("mousedown",m),()=>document.removeEventListener("mousedown",m)},[he]),z.useEffect(()=>{const m=I=>{if(Va.current){const D=Math.max(260,Math.min(I.clientX,window.innerWidth-300));Au(D)}else if(Ji.current){const D=document.querySelector(".header")?.offsetHeight||0,L=I.clientY-D,X=window.innerHeight-D,H=Math.max(120,Math.min(L,X-200));Sl(H)}},E=()=>{Va.current&&(Va.current=!1,document.body.style.cursor="",document.body.style.userSelect=""),Ji.current&&(Ji.current=!1,document.body.style.cursor="",document.body.style.userSelect="")};return window.addEventListener("mousemove",m),window.addEventListener("mouseup",E),()=>{window.removeEventListener("mousemove",m),window.removeEventListener("mouseup",E)}},[]);const Wo=z.useCallback(()=>{Va.current=!0,document.body.style.cursor="col-resize",document.body.style.userSelect="none"},[]),Tl=z.useCallback(()=>{Ji.current=!0,document.body.style.cursor="row-resize",document.body.style.userSelect="none"},[]),wi=z.useMemo(()=>r.useExtendedHours?r:{...r,extendedStart:r.workdayStart,extendedEnd:r.workdayEnd},[r]),_n=z.useMemo(()=>li.map(m=>IE(l,a,wi,y,k,m)),[li,l,a,wi,y,k,Y]),El=z.useMemo(()=>_n.map(m=>{const E={};for(const I of m)I.type==="task"&&(E[I.taskId]=Math.max(E[I.taskId]||0,I.blockIndex+1));return E}),[_n]),Al=z.useMemo(()=>_n.map(m=>{const E=m.map((L,X)=>({...L,_idx:X})).filter(L=>L.type==="event");if(E.length===0)return{};const I={},D=[];for(const L of E){const X=D.filter(Se=>Se.endMin>L.startMin);D.length=0,D.push(...X);const H=new Set(D.map(Se=>Se.col));let ce=0;for(;H.has(ce);)ce++;D.push({endMin:L.endMin,col:ce}),I[L._idx]={col:ce,total:0}}for(const L of E){let X=1;for(const H of E)H.startMin<L.endMin&&H.endMin>L.startMin&&(X=Math.max(X,I[H._idx].col+1));I[L._idx].total=X}return I}),[_n]),pt=l.find(m=>!m.completed),qt=l.find(m=>m.id===y),er=qt&&k>(qt.adjustedDuration??qt.duration),Pt=Ie(wi.extendedStart),Kn=Ie(wi.extendedEnd),bl=Ie(r.workdayStart),tr=Ie(r.workdayEnd),yt=r.zoomLevel,kn=(Kn-Pt)*yt,Ps=Math.floor(Pt/60),nr=Math.ceil(Kn/60),_i=Array.from({length:nr-Ps},(m,E)=>Ps+E),ci=z.useCallback(m=>m&&h.find(E=>E.id===m)?.color||null,[h]),Gs=z.useCallback(m=>m&&h.find(E=>E.id===m)?.name||null,[h]),ir=z.useCallback((m,E,I)=>{const D=(m.startMin-Pt)*yt,L=(m.endMin-m.startMin)*yt,X={top:`${D}px`,height:`${Math.max(L,4)}px`},H=I[E];if(H&&H.total>1){const je=`(100% - ${8+2*(H.total-1)}px) / ${H.total}`;X.left=`calc(4px + ${H.col} * (${je} + 2px))`,X.width=`calc(${je})`,X.right="auto"}return X},[Pt,yt]),wl=z.useCallback(m=>(m.endMin-m.startMin)*yt,[yt]),ke=z.useCallback((m,E)=>{(m==="extendedEnd"||m==="workdayEnd")&&E==="00:00"&&(E="23:59"),d(I=>({...I,[m]:E}))},[]),Pn=z.useCallback((m,E)=>{const I=m.match(/^(.+?)\s+\[(.+?)\]$/);let D=null,L=m;if(I){L=I[1];const X=I[2];D=h.find(H=>H.name===X)?.id??null}if(r.smartDuration){const X=L.match(/^(.+?)\s+(\d+)$/);if(X)return{name:X[1],duration:parseInt(X[2],10),tagId:D}}return{name:L,duration:E,tagId:D}},[r.smartDuration,h]),ar=z.useCallback(()=>{if(!pt)return;const m=(pt.pausedElapsed||0)*6e4,E=rn()+F;n(I=>I.map(D=>{if(D.id!==pt.id)return D;const L={};if(D.startedAtMin==null&&(L.startedAtMin=E,L.startedAtDate=ft()),D.pausedAtMin!=null){L.pauseGapMinutes=(D.pauseGapMinutes||0)+Math.max(0,E-D.pausedAtMin),L.pausedAtMin=null;const X=[...D.pauseEvents||[]];X.length>0&&X[X.length-1].end==null&&(X[X.length-1]={...X[X.length-1],end:E}),L.pauseEvents=X}return Object.keys(L).length>0?{...D,...L}:D})),p(pt.id),T(Date.now()-m),N(pt.pausedElapsed||0)},[pt,F]),ea=()=>{const m=rn()+F,E=r.restrictTasksToWorkHours?Ie(r.workdayStart):Ie(r.extendedStart),I=r.restrictTasksToWorkHours?Ie(r.workdayEnd):Ie(r.extendedEnd);if(m<E||m>=I)return!0;const D=ft(),L=r.minFragmentMinutes||5;return a.filter(X=>X.date===D).some(X=>{const H=Ie(X.start),ce=Ie(X.end);return m>=H&&m<ce||H>m&&H-m<=L})},ui=z.useCallback(()=>{if(!y)return;Pe();const m=k,E=rn()+F;n(I=>{const D=I.map(L=>{if(L.id!==y)return L;const X=L.startedAtMin+(L.pausedElapsed||0)+(L.pauseGapMinutes||0);return{...L,completed:!0,actualDuration:m,workSegments:[...L.workSegments||[],{start:X,end:E,date:ft()}],pausedElapsed:0,pausedAtMin:null,pauseEvents:[]}});if(r.autoStartNext&&!ea()){const L=D.find(X=>!X.completed);if(L){const X=(L.pausedElapsed||0)*6e4,H=rn()+F;setTimeout(()=>{n(ce=>ce.map(Se=>{if(Se.id!==L.id)return Se;const Ye={};if(Se.startedAtMin==null&&(Ye.startedAtMin=H,Ye.startedAtDate=ft()),Se.pausedAtMin!=null){Ye.pauseGapMinutes=(Se.pauseGapMinutes||0)+Math.max(0,H-Se.pausedAtMin),Ye.pausedAtMin=null;const je=[...Se.pauseEvents||[]];je.length>0&&je[je.length-1].end==null&&(je[je.length-1]={...je[je.length-1],end:H}),Ye.pauseEvents=je}return Object.keys(Ye).length>0?{...Se,...Ye}:Se})),p(L.id),T(Date.now()-X),N(L.pausedElapsed||0)},0)}else p(null),T(null),N(0)}else p(null),T(null),N(0);return D})},[y,Pe,r.autoStartNext,a,F]),sr=z.useCallback(()=>{if(!y)return;Pe();const m=rn()+F;n(E=>E.map(I=>{if(I.id!==y)return I;const D=I.startedAtMin+(I.pausedElapsed||0)+(I.pauseGapMinutes||0);return{...I,pausedElapsed:k,pausedAtMin:m,workSegments:[...I.workSegments||[],{start:D,end:m,date:ft()}],pauseEvents:[...I.pauseEvents||[],{start:m,end:null,date:ft()}]}})),p(null),T(null),N(0)},[y,k,Pe,F]),qa=z.useCallback(()=>{y&&n(m=>m.map(E=>E.id===y?{...E,startedAtMin:null,startedAtDate:null,pausedAtMin:null,pauseGapMinutes:0,pausedElapsed:0,workSegments:[],pauseEvents:[]}:E)),p(null),T(null),N(0)},[y]),Ja=z.useCallback(m=>{y&&(Pe(),n(E=>E.map(I=>{if(I.id!==y)return I;const D=I.adjustedDuration??I.duration;return{...I,adjustedDuration:Math.max(5,D+m)}})))},[y,Pe]),Vs=()=>{J(null),qi(""),za(r.defaultTaskDuration),Ms(null),vl(!1),Qe(!0)},ta=m=>{J(m),qi(m.name),za(m.adjustedDuration??m.duration),Ms(m.tagId),Qe(!0)},Xa=()=>{if(ti.trim()){if(Pe(),x)n(m=>m.map(E=>E.id===x.id?{...E,name:ti,adjustedDuration:Ha,tagId:Ns}:E));else{const E=ti.split(`
`).map(I=>I.trim()).filter(I=>I.length>0).map((I,D)=>{const L=Pn(I,Ha);return{id:Date.now()+D,name:L.name,duration:L.duration,adjustedDuration:null,completed:!1,tagId:L.tagId!==null?L.tagId:Ns,pausedElapsed:0}});n(I=>Kt?[...E,...I]:[...I,...E])}Qe(!1)}},Mt=m=>{Pe(),m===y&&qa(),n(E=>E.filter(I=>I.id!==m))},ki=m=>{Pe();const E=m===y,I=E?k:0,D=rn()+F;E&&!r.autoStartNext&&(p(null),T(null),N(0)),n(L=>{const X=L.map(H=>{if(H.id!==m)return H;if(H.completed)return{...H,completed:!1,actualDuration:void 0,startedAtMin:null,startedAtDate:null,pausedAtMin:null,pauseGapMinutes:0,pausedElapsed:0,workSegments:[],pauseEvents:[]};{const ce={...H,completed:!0,pausedElapsed:0,pausedAtMin:null,pauseEvents:[]};if(E){const Se=H.startedAtMin+(H.pausedElapsed||0)+(H.pauseGapMinutes||0);ce.workSegments=[...H.workSegments||[],{start:Se,end:D,date:ft()}],ce.actualDuration=I}else H.workSegments?.length>0?ce.actualDuration=H.workSegments.reduce((Se,Ye)=>Se+(Ye.end-Ye.start),0):ce.actualDuration=0;return ce}});if(E&&r.autoStartNext&&!ea()){const H=X.find(ce=>!ce.completed);if(H){const ce=(H.pausedElapsed||0)*6e4,Se=rn()+F;setTimeout(()=>{n(Ye=>Ye.map(je=>{if(je.id!==H.id)return je;const _t={};if(je.startedAtMin==null&&(_t.startedAtMin=Se,_t.startedAtDate=ft()),je.pausedAtMin!=null){_t.pauseGapMinutes=(je.pauseGapMinutes||0)+Math.max(0,Se-je.pausedAtMin),_t.pausedAtMin=null;const kt=[...je.pauseEvents||[]];kt.length>0&&kt[kt.length-1].end==null&&(kt[kt.length-1]={...kt[kt.length-1],end:Se}),_t.pauseEvents=kt}return Object.keys(_t).length>0?{...je,..._t}:je})),p(H.id),T(Date.now()-ce),N(H.pausedElapsed||0)},0)}else p(null),T(null),N(0)}return X})},Fs=m=>{Pe();const E=l.findIndex(L=>L.id===m.id),I={...m,id:Date.now(),completed:!1,pausedElapsed:0,adjustedDuration:null,startedAtMin:null,startedAtDate:null,pausedAtMin:null,pauseGapMinutes:0,workSegments:[],pauseEvents:[]},D=[...l];D.splice(E+1,0,I),n(D)},Za=()=>{$(null),xs("");const m=new Date,E=m.getHours()*60+m.getMinutes(),I=Math.ceil((E+1)/30)*30,D=Math.min(I,Ie(wi.extendedEnd)-r.defaultEventDuration);Po(cn(D));const L=D+r.defaultEventDuration;Ba(cn(L)),ni(null),bn(Z),ii.current=!1,q(!0)},_l=m=>{$(m),xs(m.name),Po(m.start),Ba(m.end),ni(m.tagId),bn(m.date||ft()),ii.current=!0,q(!0)},or=m=>{const E=TI(m,fn);if(!ii.current){const I=Ie(fn),L=Ie(La)-I,X=Ie(E);Ba(cn(X+L))}Po(E)},rr=m=>{ii.current=!0,Ba(m)},Ii=()=>{const m=Ko.trim()||"Event";let E=La;Ie(La)<=Ie(fn)&&(E=cn(Ie(fn)+r.defaultEventDuration)),Pe(),o(P?I=>I.map(D=>D.id===P.id?{...D,name:m,start:fn,end:E,tagId:Ds,date:Nt}:D):I=>[...I,{id:Date.now(),name:m,start:fn,end:E,tagId:Ds,date:Nt}]),q(!1)},$a=m=>{Pe(),o(E=>E.filter(I=>I.id!==m))},kl=z.useCallback(()=>{Pe(),y&&(p(null),T(null),N(0)),n([])},[Pe,y]),wu=z.useCallback(()=>{Pe(),o(m=>m.filter(E=>E.date!==Z))},[Pe,Z]),_u=z.useCallback(()=>{Pe(),n(m=>m.filter(E=>!E.completed))},[Pe]),ku=z.useCallback(()=>{Pe(),o(m=>m.filter(E=>{if(E.date<Z)return!1;if(E.date===Z){if(Z<ee)return!1;if(Z===ee)return Ie(E.end)>Y}return!0}))},[Pe,Z,Y,ee]),lr=(m,E)=>{js(E),m.dataTransfer.effectAllowed="move",m.dataTransfer.setData("text/plain",E)},Iu=(m,E)=>{m.preventDefault(),m.dataTransfer.dropEffect="move",E!==qo&&wn(E)},Ou=(m,E)=>{m.preventDefault(),!(Xi===null||Xi===E)&&(Pe(),n(I=>{const D=[...I],L=D.findIndex(ce=>ce.id===Xi),X=D.findIndex(ce=>ce.id===E),[H]=D.splice(L,1);return D.splice(X,0,H),D}),js(null),wn(null))},Ru=()=>{js(null),wn(null)},Nu=()=>{f(m=>[...m,{id:Date.now(),name:"New Tag",color:"#94a3b8"}])},Il=(m,E)=>{f(I=>I.map(D=>D.id===m?{...D,...E}:D))},Ol=m=>{Pe(),f(E=>E.filter(I=>I.id!==m)),n(E=>E.map(I=>I.tagId===m?{...I,tagId:null}:I)),o(E=>E.map(I=>I.tagId===m?{...I,tagId:null}:I))},Mu=()=>{const m=Object.fromEntries(Object.entries(r).filter(([X])=>!eC.includes(X))),E=JSON.stringify({settings:m,tags:h,version:1},null,2),I=new Blob([E],{type:"application/json"}),D=URL.createObjectURL(I),L=document.createElement("a");L.href=D,L.download="timekerper-settings.json",L.click(),URL.revokeObjectURL(D)},xu=()=>{const E=l.filter(I=>!I.completed).map(I=>{const D=I.adjustedDuration??I.duration;return`${I.name} ${D}`}).join(`
`);navigator.clipboard.writeText(E),Si("tasks"),setTimeout(()=>Si(I=>I==="tasks"?null:I),1500)},Du=()=>{const m=ft(),I=a.filter(D=>D.date>=m).sort((D,L)=>D.date<L.date?-1:D.date>L.date?1:Ie(D.start)-Ie(L.start)).map(D=>{const L=Gs(D.tagId),X=L?` [${L}]`:"";return`${D.name} ${D.start}-${D.end} ${D.date}${X}`}).join(`
`);navigator.clipboard.writeText(I),Si("events"),setTimeout(()=>Si(D=>D==="events"?null:D),1500)},Uu=()=>{const m=Vo.split(`
`).map(X=>X.trim()).filter(X=>X.length>0);if(m.length===0)return;Pe();const E=[];for(const X of m){const H=X.match(/^(.+?)\s+(\d{1,2}:\d{2})\s*-\s*(\d{1,2}:\d{2})\s+(\d{4}-\d{2}-\d{2})(?:\s+\[(.+?)\])?$/);if(H){const ce=H[5],Se=ce?h.find(Ye=>Ye.name===ce)?.id??null:null;E.push({id:Date.now()+E.length,name:H[1],start:H[2].padStart(5,"0"),end:H[3].padStart(5,"0"),date:H[4],tagId:Se})}}let I=[...a];const D=[];let L=0;for(const X of E){const H=I.findIndex(ce=>ce.name===X.name&&ce.start===X.start&&ce.end===X.end&&ce.date===X.date);H>=0?(X.tagId!=null&&I[H].tagId==null&&(I[H]={...I[H],tagId:X.tagId}),L++):D.push(X)}(D.length>0||I!==a)&&o([...I,...D]),L>0&&D.length===0?alert(`All ${L} event${L!==1?"s":""} already exist. Nothing imported.`):L>0&&alert(`Added ${D.length} event${D.length!==1?"s":""}. Skipped ${L} duplicate${L!==1?"s":""}.`),Fo(""),Go(!1)},cr=m=>{const E=m.target.files?.[0];if(!E)return;const I=new FileReader;I.onload=D=>{try{const L=JSON.parse(D.target.result);if(L.settings){const X=Object.fromEntries(Object.entries(L.settings).filter(([H])=>!eC.includes(H)));d(H=>({...H,...X}))}L.tags&&Array.isArray(L.tags)&&f(L.tags)}catch{}},I.readAsText(E),m.target.value=""},Ys=(m,E)=>{const I=m.filter(H=>!H.categories||H.categories.length===0?!0:!H.categories.some(ce=>E.some(Se=>Se.include===!1&&Se.category.toLowerCase()===ce.toLowerCase())));if(I.length===0){alert("No events to import after applying category filters.");return}Pe();const D=I.map((H,ce)=>{let Se=null;if(H.categories&&H.categories.length>0)for(const Ye of H.categories){const je=E.find(_t=>_t.include!==!1&&_t.tagId&&_t.category.toLowerCase()===Ye.toLowerCase());if(je){Se=je.tagId;break}}return{id:Date.now()+ce,name:H.name,start:H.start,end:H.end,date:H.date,tagId:Se,icsImported:!0}}),L=r.icsReplaceOnImport;if(L==="ask"){Rs({newEvents:D});return}ur(D,L==="yes"||L===!0)},ur=(m,E)=>{const I=E?a.filter(H=>!H.icsImported):a;let D=[...I];const L=[];let X=0;for(const H of m){const ce=D.findIndex(Se=>Se.name===H.name&&Se.start===H.start&&Se.end===H.end&&Se.date===H.date);ce>=0?(H.tagId!=null&&D[ce].tagId==null&&(D[ce]={...D[ce],tagId:H.tagId}),X++):L.push(H)}if(L.length===0&&D===I){alert(`All ${X} event${X!==1?"s":""} already exist. Nothing imported.`),E&&o(I);return}o([...D,...L]),X>0&&alert(`Imported ${L.length} event${L.length!==1?"s":""}. Skipped ${X} duplicate${X!==1?"s":""}.`)},ju=m=>{const E=m.target.files?.[0];if(!E)return;const I=new FileReader;I.onload=D=>{try{const L=kE(D.target.result),X={...r,icsCategoryRules:[]},H=nC(L,X,Ae,we);if(H.length===0){alert("No events to import. Check your status filter settings or date range.");return}const ce={};let Se=0;for(const xt of H)if(xt.categories&&xt.categories.length>0)for(const Jt of xt.categories)ce[Jt]=(ce[Jt]||0)+1;else Se++;const Ye=Object.keys(ce).sort();if(Ye.length===0){Ys(H,[]);return}const je=r.icsCategoryRules||[];if(Ye.every(xt=>je.some(Jt=>Jt.category.toLowerCase()===xt.toLowerCase()))){Ys(H,je);return}const kt=Ye.map(xt=>{const Jt=je.find(es=>es.category.toLowerCase()===xt.toLowerCase());return Jt?{category:xt,include:Jt.include,tagId:Jt.tagId}:{category:xt,include:!0,tagId:null}});Rt(kt),ei({mode:"import",filteredEvents:H,catCounts:ce,uncategorized:Se})}catch{alert("Could not parse the .ics file. Make sure it is a valid iCalendar file.")}},I.readAsText(E),m.target.value=""},Rl=()=>{Rt([...r.icsCategoryRules||[]]),ei({mode:"settings"})},Hu=(m,E)=>{wt(E),m.dataTransfer.effectAllowed="move",m.dataTransfer.setData("text/plain",E)},zu=(m,E)=>{m.preventDefault(),m.dataTransfer.dropEffect="move",E!==Ei&&Fa(E)},Lu=(m,E)=>{m.preventDefault(),!(lt===null||lt===E)&&(f(I=>{const D=[...I],L=D.findIndex(ce=>ce.id===lt),X=D.findIndex(ce=>ce.id===E),[H]=D.splice(L,1);return D.splice(X,0,H),D}),wt(null),Fa(null))},Bu=()=>{wt(null),Fa(null)},Nl=()=>{const m=_a.find(E=>E>r.zoomLevel);m!=null&&(ke("zoomLevel",m),ke("fitMode",!1))},Ml=()=>{const m=[..._a].reverse().find(E=>E<r.zoomLevel);m!=null&&(ke("zoomLevel",m),ke("fitMode",!1))},Qs=z.useCallback(()=>{if(!Ti.current)return;const m=Ti.current.clientHeight,E=Kn-Pt;if(E<=0)return;const I=Math.max(.1,Math.min(5,m/E));ke("zoomLevel",Math.floor(I*100)/100),ke("fitMode",!0)},[Kn,Pt,ke]);z.useEffect(()=>{if(!r.fitMode)return;const m=()=>{Qs()};return window.addEventListener("resize",m),()=>window.removeEventListener("resize",m)},[r.fitMode,Qs]);const dr=m=>{m.key==="Enter"&&(m.ctrlKey||!x&&!ti.includes(`
`)&&m.target.tagName!=="TEXTAREA")&&Xa(),m.key==="Enter"&&x&&Xa()},Ku=m=>{m.key==="Enter"&&(m.preventDefault(),ai.current?.focus())},hr=m=>{m.key==="Enter"&&(m.preventDefault(),Pa.current?.focus())},Wa=m=>{m.key==="Enter"&&(m.preventDefault(),Ii())};return v.jsxs("div",{className:"app",children:[v.jsxs("header",{className:"header",children:[v.jsxs("h1",{children:["Timekerper",Jo,ut&&v.jsx("span",{className:`outlook-indicator ${Qt}`,title:Qt==="error"?Ya||"Error":Qt==="fetching"?"Fetching...":mn?`Outlook: ${mn.toLocaleTimeString([],{hour:"numeric",minute:"2-digit"})}`:"Outlook connected"})]}),v.jsxs("div",{className:"header-right",children:[v.jsxs("div",{className:"undo-redo",children:[v.jsx("button",{onClick:Hs,disabled:!Ls,title:"Undo (Ctrl+Z)",children:""}),v.jsx("button",{onClick:zs,disabled:!Bs,title:"Redo (Ctrl+Shift+Z)",children:""})]}),v.jsxs("div",{className:"zoom-controls",children:[v.jsx("button",{onClick:Ml,disabled:r.zoomLevel<=_a[0],children:""}),v.jsxs("span",{className:"zoom-label",children:[Math.round(yt*100),"%"]}),v.jsx("button",{onClick:Nl,disabled:r.zoomLevel>=_a[_a.length-1],children:"+"}),v.jsx("button",{onClick:Qs,className:"fit-btn",title:"Fit calendar to window height",children:"Fit"})]}),v.jsxs("div",{className:"view-toggle",children:[v.jsx("button",{className:ie==="1day"?"active":"",onClick:()=>ct("1day"),children:"Day"}),v.jsx("button",{className:ie==="2day"?"active":"",onClick:()=>ct("2day"),children:"2"}),v.jsx("button",{className:ie==="3day"?"active":"",onClick:()=>ct("3day"),children:"3"}),v.jsx("button",{className:ie==="4day"?"active":"",onClick:()=>ct("4day"),children:"4"}),v.jsx("button",{className:ie==="5day"?"active":"",onClick:()=>ct("5day"),children:"5"})]}),v.jsxs("div",{className:"view-menu-wrapper",ref:Yo,children:[v.jsx("button",{className:"view-menu-btn",onClick:()=>b(m=>!m),title:"View options",children:"View "}),he&&v.jsxs("div",{className:"view-menu-dropdown",children:[v.jsxs("div",{className:"view-menu-section",children:[v.jsx("span",{className:"view-menu-label",children:"Zoom"}),v.jsxs("div",{className:"view-menu-row",children:[v.jsx("button",{onClick:Ml,disabled:r.zoomLevel<=_a[0],children:""}),v.jsxs("span",{className:"view-menu-zoom-level",children:[Math.round(yt*100),"%"]}),v.jsx("button",{onClick:Nl,disabled:r.zoomLevel>=_a[_a.length-1],children:"+"}),v.jsx("button",{onClick:Qs,className:"fit-btn",children:"Fit"})]})]}),v.jsxs("div",{className:"view-menu-section",children:[v.jsx("span",{className:"view-menu-label",children:"Layout"}),v.jsxs("div",{className:"view-menu-row",children:[v.jsx("button",{className:ie==="1day"?"active":"",onClick:()=>{ct("1day"),b(!1)},children:"Day"}),v.jsx("button",{className:ie==="2day"?"active":"",onClick:()=>{ct("2day"),b(!1)},children:"2"}),v.jsx("button",{className:ie==="3day"?"active":"",onClick:()=>{ct("3day"),b(!1)},children:"3"}),v.jsx("button",{className:ie==="4day"?"active":"",onClick:()=>{ct("4day"),b(!1)},children:"4"}),v.jsx("button",{className:ie==="5day"?"active":"",onClick:()=>{ct("5day"),b(!1)},children:"5"})]})]})]})]}),v.jsxs("div",{className:"date-nav",children:[v.jsx("button",{className:"date-nav-btn",onClick:Ks,disabled:!Bn,title:"Previous day ()",children:""}),v.jsxs("span",{className:"date-nav-label",children:[v.jsx("span",{className:"date-long",children:TE(Z)}),v.jsx("span",{className:"date-short",children:AE(Z)})]}),v.jsx("button",{className:"date-nav-btn",onClick:Wi,disabled:!Wt,title:"Next day ()",children:""}),v.jsx("button",{className:"today-btn",onClick:$o,disabled:se,title:"Go to today (T)",children:"Today"})]}),v.jsxs("button",{className:"settings-btn",onClick:()=>ne(!0),title:"Settings",children:[v.jsx("span",{className:"settings-label-long",children:"Settings"}),v.jsx("span",{className:"settings-label-short",children:""})]})]})]}),v.jsxs("main",{className:"main-content",children:[v.jsxs("aside",{className:"task-panel",style:{width:`${Ga}px`,"--panel-height":`${Cl}px`},children:[Zo?y&&qt?v.jsxs("div",{className:"active-task-panel compact",children:[v.jsxs("div",{className:"active-task-header",children:[v.jsx("h2",{children:"Working On"}),v.jsxs("div",{className:"active-task-actions",children:[v.jsx("button",{className:"btn-done",onClick:ui,children:"Done"}),v.jsx("button",{className:"btn-pause",onClick:sr,children:"Pause"}),v.jsx("button",{className:"btn-cancel",onClick:qa,children:"Cancel"})]})]}),v.jsx("span",{className:"active-task-name",children:qt.name}),v.jsxs("div",{className:"active-task-row",children:[v.jsxs("div",{className:`timer ${er?"over":""}`,children:[v.jsx("span",{className:"elapsed",children:Ao(k)}),v.jsxs("span",{className:"estimate",children:["/ ",Ao(qt.adjustedDuration??qt.duration)]}),qt.adjustedDuration&&qt.adjustedDuration!==qt.duration&&v.jsxs("span",{className:"original-estimate",children:["(orig ",Ao(qt.duration),")"]}),er&&v.jsxs("span",{className:"over-notice",children:["+",Ao(k-(qt.adjustedDuration??qt.duration))," over"]})]}),v.jsxs("div",{className:"time-adjust-btns",children:[v.jsx("button",{onClick:()=>Ja(-15),children:"-15"}),v.jsx("button",{onClick:()=>Ja(-5),children:"-5"}),v.jsx("button",{onClick:()=>Ja(5),children:"+5"}),v.jsx("button",{onClick:()=>Ja(15),children:"+15"})]})]})]}):v.jsx("div",{className:"start-task-panel compact",children:pt?v.jsxs("div",{className:"start-task-row",children:[v.jsxs("div",{className:"start-task-info",children:[v.jsx("span",{className:"next-task-label",children:"Next:"}),v.jsx("span",{className:"next-task-name",children:pt.name}),v.jsxs("span",{className:"next-task-duration",children:[Ao(pt.adjustedDuration??pt.duration),pt.pausedElapsed>0&&v.jsxs("span",{className:"paused-time",children:[" (",Ao(pt.pausedElapsed)," done)"]})]})]}),v.jsx("button",{className:"btn-start",onClick:ar,children:pt.pausedElapsed>0?"Resume":"Start"})]}):v.jsx("p",{className:"no-tasks",children:"All tasks completed!"})}):v.jsx("div",{className:"date-view-banner",children:v.jsx("span",{className:"date-view-label",children:Z<ee?"Viewing past days":"Viewing future days"})}),v.jsxs("div",{className:"panel-scroll",children:[v.jsxs("div",{className:"panel-section",children:[v.jsxs("div",{className:"panel-section-header",children:[v.jsx("h2",{children:"Tasks"}),v.jsxs("span",{className:"task-summary",children:[l.filter(m=>!m.completed).length," tasks,"," ",l.filter(m=>!m.completed).reduce((m,E)=>m+(E.adjustedDuration??E.duration),0)," min"]}),l.some(m=>m.completed)&&v.jsx("button",{className:"section-toggle",onClick:()=>ye(m=>!m),children:re?`Show completed (${l.filter(m=>m.completed).length})`:"Hide completed"})]}),v.jsx("ul",{className:"task-list",children:l.map((m,E)=>{if(re&&m.completed)return null;const I=se&&!m.completed&&E===l.findIndex(L=>!L.completed),D=ci(m.tagId);return v.jsxs("li",{draggable:!m.completed,onDragStart:L=>lr(L,m.id),onDragOver:L=>Iu(L,m.id),onDrop:L=>Ou(L,m.id),onDragEnd:Ru,className:["task-item",m.completed&&"completed",m.id===y&&"active",I&&!m.completed&&"next-up",qo===m.id&&"drag-over",Xi===m.id&&"dragging"].filter(Boolean).join(" "),title:m.name,children:[v.jsx("span",{className:"drag-handle",title:"Drag to reorder",children:""}),v.jsx("input",{type:"checkbox",checked:m.completed,onChange:()=>ki(m.id),className:"task-checkbox"}),D&&v.jsx("span",{className:"tag-dot",style:{backgroundColor:D},title:Gs(m.tagId)}),v.jsx("span",{className:`task-name${r.wrapListNames?" wrap":""}`,onClick:()=>ta(m),children:m.name}),v.jsxs("span",{className:"list-end",children:[v.jsx("span",{className:"task-duration",onClick:()=>ta(m),style:{cursor:"pointer"},children:m.adjustedDuration&&m.adjustedDuration!==m.duration?`${m.adjustedDuration}m`:`${m.duration}m`}),m.pausedElapsed>0&&!m.completed&&v.jsx("span",{className:"paused-badge",title:"Paused",children:"||"}),v.jsx("button",{className:"action-btn",onClick:()=>Fs(m),title:"Duplicate",children:""}),v.jsx("button",{className:"action-btn delete",onClick:()=>Mt(m.id),title:"Delete",children:""})]})]},m.id)})}),v.jsxs("div",{className:"panel-section-actions",children:[v.jsx("button",{className:"add-btn",onClick:Vs,children:"+ Add Task"}),l.some(m=>!m.completed)&&v.jsx("button",{className:"clear-btn",onClick:xu,children:Ka==="tasks"?"Copied!":"Export Tasks"}),l.some(m=>m.completed)&&v.jsx("button",{className:"clear-btn",onClick:_u,children:"Clear Completed"}),l.length>0&&v.jsx("button",{className:"clear-btn",onClick:kl,children:"Clear All"})]})]}),v.jsxs("div",{className:"panel-section",children:[v.jsxs("div",{className:"panel-section-header",children:[v.jsx("h2",{children:se?"Events":`Events (${new Date(Z+"T12:00:00").toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})})`}),a.some(m=>m.icsImported||m.outlookSynced)&&(()=>{const E=a.filter(L=>L.date===Z).filter(L=>!(it&&se&&Ie(L.end)<=Y)),I=L=>L.icsImported||L.outlookSynced,D=Ot==="manual"?E.filter(I).length:Ot==="outlook"?E.filter(L=>!I(L)).length:0;return v.jsx("button",{className:"source-filter-toggle",onClick:()=>Ci(L=>L==="all"?"manual":L==="manual"?"outlook":"all"),children:Ot==="all"?"All sources":Ot==="manual"?`Manual only${D?` (${D} hidden)`:""}`:`Outlook only${D?` (${D} hidden)`:""}`})})(),se&&a.filter(m=>m.date===Z).some(m=>Ie(m.end)<=Y)&&v.jsx("button",{className:"section-toggle",onClick:()=>De(m=>!m),children:it?`Show past (${a.filter(m=>m.date===Z&&Ie(m.end)<=Y).length})`:"Hide past"})]}),v.jsx("ul",{className:"event-list",children:a.filter(m=>m.date===Z).sort((m,E)=>Ie(m.start)-Ie(E.start)).map(m=>{const E=m.icsImported||m.outlookSynced;if(Ot==="manual"&&E||Ot==="outlook"&&!E)return null;const I=se?Ie(m.end)<=Y:Z<ee;if(it&&I)return null;const D=ci(m.tagId);return v.jsxs("li",{className:`event-item${I?" past-event":""}`,onClick:()=>_l(m),title:`${m.name} (${Ph(m.start,m.end,!1)})`,children:[D&&v.jsx("span",{className:"tag-dot",style:{backgroundColor:D},title:Gs(m.tagId)}),m.outlookSynced&&v.jsx("span",{className:"outlook-icon",title:"From Outlook (live)",children:""}),m.icsImported&&!m.outlookSynced&&v.jsx("span",{className:"ics-icon",title:"Imported from .ics file",children:""}),v.jsx("span",{className:`event-name${r.wrapListNames?" wrap":""}`,children:m.name}),v.jsxs("span",{className:"list-end",children:[v.jsx("span",{className:"event-time",children:Ph(m.start,m.end,!1)}),v.jsx("button",{className:"action-btn delete",onClick:L=>{L.stopPropagation(),$a(m.id)},title:"Delete",children:""})]})]},m.id)})}),Yt&&v.jsxs("div",{className:"bulk-event-entry",children:[v.jsx("textarea",{value:Vo,onChange:m=>Fo(m.target.value),placeholder:`Paste events (one per line):
Staff Meeting 10:00-12:15 ${ft()} [Internal]
Team meeting 14:00-14:30 ${ft()}`,rows:4,autoFocus:!0}),v.jsxs("div",{className:"bulk-event-actions",children:[v.jsx("button",{className:"btn-primary",onClick:Uu,disabled:!Vo.trim(),children:"Add Events"}),v.jsx("button",{className:"btn-secondary",onClick:()=>{Go(!1),Fo("")},children:"Cancel"})]})]}),v.jsxs("div",{className:"panel-section-actions",children:[v.jsx("button",{className:"add-btn secondary",onClick:Za,children:"+ Add Event"}),v.jsx("button",{className:"clear-btn",onClick:()=>Go(m=>!m),children:"Bulk Add"}),v.jsx("button",{className:"clear-btn ics-import-btn",onClick:()=>Us.current?.click(),children:"Import .ics"}),v.jsx("input",{ref:Us,type:"file",accept:".ics,.ical,.ifb,.icalendar",onChange:ju,style:{display:"none"}}),ri&&(ut?v.jsx("button",{className:"clear-btn outlook-btn",onClick:Xo,disabled:Qt==="fetching",children:Qt==="fetching"?"Fetching...":" Outlook"}):v.jsx("button",{className:"clear-btn outlook-btn",onClick:bi,children:"Connect Outlook"})),ri&&Qt==="error"&&Ya&&v.jsx("div",{className:"outlook-error",children:Ya}),a.length>0&&v.jsx("button",{className:"clear-btn",onClick:Du,children:Ka==="events"?"Copied!":"Export Events"}),a.filter(m=>m.date===Z).some(m=>se?Ie(m.end)<=Y:Z<ee)&&v.jsx("button",{className:"clear-btn",onClick:ku,children:"Clear Past"}),a.some(m=>m.date===Z)&&v.jsx("button",{className:"clear-btn",onClick:wu,children:"Clear All"})]})]})]})]}),v.jsx("div",{className:"resize-handle resize-handle-h",onMouseDown:Wo}),v.jsx("div",{className:"resize-handle resize-handle-v",onMouseDown:Tl}),v.jsxs("section",{className:"calendar-panel",children:[li.length>1&&v.jsxs("div",{className:"day-headers",children:[v.jsx("div",{className:"day-header-spacer"}),li.map(m=>v.jsx("div",{className:`day-header${m===ee?" today":""}${m===Z?" focused":""}${m<ee?" past":""}`,onClick:()=>ue(m),children:EE(m)},m))]}),v.jsxs("div",{className:"calendar-container",ref:Ti,children:[v.jsx("div",{className:"time-labels",style:{height:`${kn}px`},children:_i.map(m=>v.jsxs("div",{className:"time-label",style:{position:"absolute",top:`${(m*60-Pt)*yt}px`,height:`${60*yt}px`},children:[m>12?m-12:m===0?12:m,":00 ",m>=12?"PM":"AM"]},m))}),li.map((m,E)=>{const I=_n[E],D=Al[E],L=El[E],X=m===ee;return v.jsxs("div",{className:`calendar-grid day-column${X?" today":""}${m===Z&&li.length>1?" focused":""}${m<ee?" past":""}`,style:{height:`${kn}px`,"--block-title-size":Wh[r.calendarFontSize]?.title||"0.8rem","--block-time-size":Wh[r.calendarFontSize]?.time||"0.65rem"},onClick:()=>li.length>1&&ue(m),children:[_i.map((H,ce)=>v.jsx("div",{className:"hour-line",style:{top:`${(H*60-Pt)*yt}px`}},ce)),bl>Pt&&v.jsx("div",{className:"dim-zone",style:{top:0,height:`${(bl-Pt)*yt}px`}}),tr<Kn&&v.jsx("div",{className:"dim-zone",style:{top:`${(tr-Pt)*yt}px`,height:`${(Kn-tr)*yt}px`}}),X&&Y>=Pt&&Y<=Kn&&v.jsx("div",{className:"current-time-line",style:{top:`${(Y-Pt)*yt}px`},children:v.jsx("span",{className:"current-time-label",children:"Now"})}),I.map((H,ce)=>{const Se=H.type==="pause",Ye=H.type==="task",je=ci(H.tagId),_t=wl(H),kt=_t<40,xt=_t<25,Jt=Se?"#f59e0b":je||(Ye?r.defaultTaskColor:r.defaultEventColor),fr=Se?r.darkMode?"#fbbf24":"#92400e":SI(Jt,Se?.25:Ye?.1:1,r.darkMode),gr=Se?H.name:Ye?H.taskName:H.name;return v.jsx("div",{className:["calendar-block",`${H.type}-block`,H.isActive&&"active",H.isPast&&"past",H.isCompleted&&"completed-block",H.isPausedRemaining&&"paused-remaining",kt&&"compact",xt&&"tiny"].filter(Boolean).join(" "),style:{...ir(H,ce,D),...Se?{color:fr}:{backgroundColor:Ye?CI(Jt,.1,r.darkMode):Jt,color:fr,...Ye?{borderLeft:`10px solid ${Jt}`,borderRadius:(()=>{const ts=L[H.taskId]||1,Gn=H.blockIndex===0,na=H.blockIndex===ts-1;return`${Gn?"5px":"0"} 5px 5px ${na?"5px":"0"}`})()}:{}}},title:`${gr}
${Kh(H.start)} - ${Kh(H.end)}`,onClick:ts=>{if(ts.stopPropagation(),H.type==="task"){const Gn=l.find(na=>na.id===H.taskId);Gn&&ta(Gn)}else if(H.type==="event"){const Gn=a.find(na=>na.id===H.id);Gn&&_l(Gn)}},children:v.jsxs("div",{className:"block-content",children:[v.jsxs("span",{className:"block-name",children:[H.outlookSynced&&v.jsx("span",{className:"outlook-icon",children:""}),H.icsImported&&!H.outlookSynced&&v.jsx("span",{className:"ics-icon",children:""}),H.continuesBefore&&" ",gr,H.continuesAfter&&" ",H.isActive&&" "]}),v.jsx("span",{className:"block-time",children:Ph(H.start,H.end,Ye)})]})},`${H.type}-${H.taskId||H.id}-${ce}`)})]},m)})]})]})]}),Ke&&v.jsx("div",{className:"modal-overlay",onMouseDown:()=>{ti.trim()?Xa():Qe(!1)},children:v.jsxs("div",{className:"modal",onMouseDown:m=>m.stopPropagation(),children:[v.jsx("h3",{children:x?"Edit Task":"Add Tasks"}),v.jsxs("div",{className:"form-group",children:[v.jsxs("label",{children:[x?"Task Name":"Task Name(s)",!x&&v.jsx("span",{className:"label-hint",children:"  one per line for bulk add"})]}),x?v.jsx("input",{type:"text",value:ti,onChange:m=>qi(m.target.value),onKeyDown:dr,placeholder:"What do you need to do?",autoFocus:!0}):v.jsx("textarea",{value:ti,onChange:m=>qi(m.target.value),onKeyDown:dr,placeholder:r.smartDuration?`Enter tasks (one per line):
Tech note review
Sherlock #12345678 75
Firewatch investigation 60`:"Enter tasks (one per line)",rows:4,autoFocus:!0}),!x&&r.smartDuration&&v.jsx("p",{className:"form-hint",children:'Numbers at the end of a line set the duration (e.g., "task name 30" = 30 min)'})]}),v.jsxs("div",{className:"form-group",children:[v.jsxs("label",{children:[x?"Duration (minutes)":"Default Duration (minutes)",!x&&r.smartDuration&&v.jsx("span",{className:"label-hint",children:"  used when no number is specified"})]}),v.jsx("input",{type:"number",value:Ha,onChange:m=>za(Number(m.target.value)),onKeyDown:x?dr:void 0,min:"5",max:"480"})]}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{children:"Tag"}),v.jsxs("div",{className:"tag-selector",children:[v.jsx("button",{className:`tag-option no-tag ${Ns===null?"selected":""}`,onClick:()=>Ms(null),title:"No tag",children:""}),h.map(m=>v.jsx("button",{className:`tag-option ${Ns===m.id?"selected":""}`,onClick:()=>Ms(m.id),style:{backgroundColor:m.color},title:m.name},m.id))]})]}),!x&&v.jsxs("label",{className:"toggle-row",children:[v.jsx("input",{type:"checkbox",checked:Kt,onChange:m=>vl(m.target.checked)}),v.jsx("span",{children:"Add to top of list"})]}),v.jsxs("div",{className:"modal-actions",children:[x&&v.jsx("button",{className:"btn-delete",onClick:()=>{Mt(x.id),Qe(!1)},children:"Delete"}),v.jsx("button",{className:"btn-secondary",onClick:()=>Qe(!1),children:"Cancel"}),v.jsx("button",{className:"btn-primary",onClick:Xa,children:x?"Save Changes":"Add Task(s)"})]})]})}),j&&v.jsx("div",{className:"modal-overlay",onMouseDown:()=>Ii(),children:v.jsxs("div",{className:"modal",onMouseDown:m=>m.stopPropagation(),children:[v.jsx("h3",{children:P?"Edit Event":"Add Event"}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{children:"Event Name"}),v.jsx("input",{type:"text",value:Ko,onChange:m=>xs(m.target.value),onKeyDown:Ku,placeholder:"Meeting name",autoFocus:!0})]}),v.jsxs("div",{className:"form-row",children:[v.jsxs("div",{className:"form-group",children:[v.jsx("label",{children:"Start"}),v.jsx("input",{type:"time",value:fn,onChange:m=>or(m.target.value),ref:ai,onKeyDown:hr})]}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{children:"End"}),v.jsx("input",{type:"time",value:La,onChange:m=>rr(m.target.value),ref:Pa,onKeyDown:Wa})]})]}),v.jsxs("div",{className:"form-row",children:[v.jsxs("div",{className:"form-group",children:[v.jsx("label",{children:"Date"}),v.jsx("input",{type:"date",value:Nt,onChange:m=>bn(m.target.value),min:Ae,max:we})]}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{children:"Duration"}),v.jsx("div",{className:"quick-duration-btns",children:[30,60,90].map(m=>v.jsxs("button",{className:"quick-dur-btn",onClick:()=>{ii.current=!0,Ba(cn(Ie(fn)+m))},children:[m,"m"]},m))})]})]}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{children:"Tag"}),v.jsxs("div",{className:"tag-selector",children:[v.jsx("button",{className:`tag-option no-tag ${Ds===null?"selected":""}`,onClick:()=>ni(null),title:"No tag",children:""}),h.map(m=>v.jsx("button",{className:`tag-option ${Ds===m.id?"selected":""}`,onClick:()=>ni(m.id),style:{backgroundColor:m.color},title:m.name},m.id))]})]}),v.jsxs("div",{className:"modal-actions",children:[P&&v.jsx("button",{className:"btn-delete",onClick:()=>{$a(P.id),q(!1)},children:"Delete"}),v.jsx("button",{className:"btn-secondary",onClick:()=>q(!1),children:"Cancel"}),v.jsx("button",{className:"btn-primary",onClick:Ii,children:P?"Save Changes":"Add Event"})]})]})}),oe&&v.jsx("div",{className:"modal-overlay",onMouseDown:()=>ne(!1),children:v.jsxs("div",{className:"modal modal-wide",onMouseDown:m=>m.stopPropagation(),children:[v.jsx("h3",{children:"Settings"}),v.jsxs("div",{className:"settings-section",children:[v.jsx("h4",{children:"Working Hours"}),v.jsxs("div",{className:"form-row",children:[v.jsxs("div",{className:"form-group",children:[v.jsx("label",{children:"Start"}),v.jsx("input",{type:"time",value:r.workdayStart,onChange:m=>ke("workdayStart",m.target.value)})]}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{children:"End"}),v.jsx("input",{type:"time",value:r.workdayEnd,onChange:m=>ke("workdayEnd",m.target.value)})]})]})]}),v.jsxs("div",{className:"settings-section",children:[v.jsx("h4",{children:"Extended View Hours"}),v.jsxs("label",{className:"toggle-row",children:[v.jsx("input",{type:"checkbox",checked:r.useExtendedHours,onChange:m=>ke("useExtendedHours",m.target.checked)}),v.jsx("span",{children:"Show hours outside working hours"})]}),r.useExtendedHours&&v.jsxs(v.Fragment,{children:[v.jsx("p",{className:"settings-hint",children:"Calendar range  dimmed outside working hours"}),v.jsxs("div",{className:"form-row",children:[v.jsxs("div",{className:"form-group",children:[v.jsx("label",{children:"Start"}),v.jsx("input",{type:"time",value:r.extendedStart,onChange:m=>ke("extendedStart",m.target.value)})]}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{children:"End"}),v.jsx("input",{type:"time",value:r.extendedEnd,onChange:m=>ke("extendedEnd",m.target.value)})]})]})]})]}),v.jsxs("div",{className:"settings-section",children:[v.jsx("h4",{children:"Defaults"}),v.jsxs("div",{className:"form-row",children:[v.jsxs("div",{className:"form-group",children:[v.jsx("label",{children:"Task Duration (min)"}),v.jsx("input",{type:"number",value:r.defaultTaskDuration,onChange:m=>ke("defaultTaskDuration",Number(m.target.value)),min:"5",max:"480"})]}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{children:"Event Duration (min)"}),v.jsx("input",{type:"number",value:r.defaultEventDuration,onChange:m=>ke("defaultEventDuration",Number(m.target.value)),min:"5",max:"480"})]})]}),v.jsxs("div",{className:"form-row",children:[v.jsxs("div",{className:"form-group",children:[v.jsx("label",{children:"Task Color"}),v.jsx("input",{type:"color",value:r.defaultTaskColor,onChange:m=>ke("defaultTaskColor",m.target.value),className:"color-input"})]}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{children:"Event Color"}),v.jsx("input",{type:"color",value:r.defaultEventColor,onChange:m=>ke("defaultEventColor",m.target.value),className:"color-input"})]})]})]}),v.jsxs("div",{className:"settings-section",children:[v.jsx("h4",{children:"Calendar"}),v.jsxs("div",{className:"form-row",children:[v.jsxs("div",{className:"form-group",children:[v.jsx("label",{children:"Min Fragment (min)"}),v.jsx("input",{type:"number",value:r.minFragmentMinutes,onChange:m=>ke("minFragmentMinutes",Math.max(1,Math.min(10,Number(m.target.value)))),min:"1",max:"10"}),v.jsx("p",{className:"form-hint",children:"Smallest task fragment to show (110 min)"})]}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{children:"Font Size"}),v.jsx("select",{value:r.calendarFontSize,onChange:m=>ke("calendarFontSize",m.target.value),className:"select-input",children:Object.entries(Wh).map(([m,E])=>v.jsx("option",{value:m,children:E.label},m))})]})]})]}),v.jsxs("div",{className:"settings-section",children:[v.jsx("h4",{children:"Behavior"}),v.jsxs("label",{className:"toggle-row",children:[v.jsx("input",{type:"checkbox",checked:r.autoStartNext,onChange:m=>ke("autoStartNext",m.target.checked)}),v.jsx("span",{children:"Auto-start next task on completion"})]}),v.jsxs("label",{className:"toggle-row",children:[v.jsx("input",{type:"checkbox",checked:r.smartDuration,onChange:m=>ke("smartDuration",m.target.checked)}),v.jsx("span",{children:"Smart duration  numbers at end of task name set duration"})]}),v.jsxs("label",{className:"toggle-row",children:[v.jsx("input",{type:"checkbox",checked:r.wrapListNames,onChange:m=>ke("wrapListNames",m.target.checked)}),v.jsx("span",{children:"Wrap names in list view"})]}),v.jsxs("label",{className:"toggle-row",children:[v.jsx("input",{type:"checkbox",checked:r.restrictTasksToWorkHours,onChange:m=>ke("restrictTasksToWorkHours",m.target.checked)}),v.jsx("span",{children:"Restrict tasks to work hours only"})]}),v.jsxs("label",{className:"toggle-row",children:[v.jsx("input",{type:"checkbox",checked:r.darkMode,onChange:m=>ke("darkMode",m.target.checked)}),v.jsx("span",{children:"Dark mode"})]})]}),v.jsxs("div",{className:"settings-section",children:[v.jsx("h4",{children:"Tags"}),v.jsx("div",{className:"tag-edit-list",children:h.map(m=>v.jsxs("div",{className:`tag-edit-row${lt===m.id?" dragging":""}${Ei===m.id&&lt!==m.id?" drag-over":""}`,draggable:!0,onDragStart:E=>Hu(E,m.id),onDragOver:E=>zu(E,m.id),onDrop:E=>Lu(E,m.id),onDragEnd:Bu,children:[v.jsx("span",{className:"drag-handle",title:"Drag to reorder",children:""}),v.jsx("input",{type:"color",value:m.color,onChange:E=>Il(m.id,{color:E.target.value}),className:"color-input"}),v.jsx("input",{type:"text",value:m.name,onChange:E=>Il(m.id,{name:E.target.value}),className:"tag-name-input"}),v.jsx("button",{className:"action-btn delete",onClick:()=>Ol(m.id),children:""})]},m.id))}),v.jsx("button",{className:"add-btn small",onClick:Nu,children:"+ Add Tag"})]}),v.jsxs("div",{className:"settings-section",children:[v.jsx("h4",{children:"Calendar Import Filters"}),v.jsx("p",{className:"settings-hint",children:"Which event statuses to include when importing from .ics files or Outlook live sync"}),v.jsxs("label",{className:"toggle-row",children:[v.jsx("input",{type:"checkbox",checked:r.icsImportBusy,onChange:m=>ke("icsImportBusy",m.target.checked)}),v.jsx("span",{children:"Busy"})]}),v.jsxs("label",{className:"toggle-row",children:[v.jsx("input",{type:"checkbox",checked:r.icsImportOof,onChange:m=>ke("icsImportOof",m.target.checked)}),v.jsx("span",{children:"Out of Office"})]}),v.jsxs("label",{className:"toggle-row",children:[v.jsx("input",{type:"checkbox",checked:r.icsImportTentative,onChange:m=>ke("icsImportTentative",m.target.checked)}),v.jsx("span",{children:"Tentative"})]}),v.jsxs("label",{className:"toggle-row",children:[v.jsx("input",{type:"checkbox",checked:r.icsImportWorkingElsewhere,onChange:m=>ke("icsImportWorkingElsewhere",m.target.checked)}),v.jsx("span",{children:"Working Elsewhere"})]}),v.jsxs("label",{className:"toggle-row",children:[v.jsx("input",{type:"checkbox",checked:r.icsImportFree,onChange:m=>ke("icsImportFree",m.target.checked)}),v.jsx("span",{children:"Free"})]}),v.jsxs("div",{style:{marginTop:"0.75rem"},children:[v.jsxs("label",{className:"toggle-row",children:[v.jsx("input",{type:"checkbox",checked:r.icsImportMeetingsOnly,onChange:m=>ke("icsImportMeetingsOnly",m.target.checked)}),v.jsx("span",{children:"Meetings only (skip appointments with no attendees)"})]}),v.jsxs("label",{className:"toggle-row",children:[v.jsx("span",{children:"Previous imports:"}),v.jsxs("select",{value:r.icsReplaceOnImport===!0?"yes":r.icsReplaceOnImport===!1?"no":r.icsReplaceOnImport,onChange:m=>ke("icsReplaceOnImport",m.target.value),children:[v.jsx("option",{value:"no",children:"Keep (deduplicate)"}),v.jsx("option",{value:"yes",children:"Clear before importing"}),v.jsx("option",{value:"ask",children:"Ask each time"})]})]})]}),v.jsxs("div",{style:{marginTop:"0.5rem"},children:[v.jsxs("button",{className:"btn-secondary",onClick:Rl,children:["Category Mapping",(r.icsCategoryRules||[]).length>0?` (${r.icsCategoryRules.length} saved)`:""]}),v.jsx("p",{className:"form-hint",children:"Map Outlook categories to tags or exclude them during import"})]})]}),ri&&v.jsxs("div",{className:"settings-section",children:[v.jsx("h4",{children:"Outlook Calendar (Live)"}),v.jsx("p",{className:"settings-hint",children:"Connect to your Outlook calendar to automatically sync events"}),ut?v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"outlook-status-row",children:[v.jsx("span",{className:`outlook-indicator ${Qt}`}),v.jsxs("span",{children:[Qt==="fetching"&&"Fetching events...",Qt==="idle"&&mn&&`Last fetched ${mn.toLocaleTimeString([],{hour:"numeric",minute:"2-digit"})}`,Qt==="idle"&&!mn&&"Connected",Qt==="error"&&(Ya||"Error fetching events")]}),v.jsx("button",{className:"btn-secondary",onClick:Xo,disabled:Qt==="fetching",style:{marginLeft:"auto"},children:"Refresh Now"})]}),v.jsx("p",{className:"settings-hint",style:{marginTop:"0.5rem"},children:"Uses the same status filters as calendar import (above). Events refresh automatically every 5 minutes."}),v.jsx("button",{className:"btn-secondary",style:{marginTop:"0.5rem"},onClick:bu,children:"Disconnect"})]}):v.jsx("button",{className:"btn-primary",onClick:bi,children:"Sign in with Microsoft"})]}),v.jsxs("div",{className:"settings-section",children:[v.jsx("h4",{children:"Debug"}),v.jsxs("label",{className:"toggle-row",children:[v.jsx("input",{type:"checkbox",checked:r.debugMode,onChange:m=>ke("debugMode",m.target.checked)}),v.jsx("span",{children:"Debug mode"})]}),r.debugMode&&v.jsxs("div",{className:"form-group",style:{marginTop:"0.5rem"},children:[v.jsx("label",{children:"Time offset (minutes)"}),v.jsx("input",{type:"number",value:r.debugTimeOffset,onChange:m=>ke("debugTimeOffset",Number(m.target.value))}),v.jsxs("p",{className:"form-hint",children:["Effective time: ",Kh(cn(rn()+(r.debugTimeOffset||0)))," ","(",r.debugTimeOffset>0?"+":"",r.debugTimeOffset||0,"m from real time)"]}),v.jsxs("p",{className:"settings-hint",style:{marginTop:"1rem",fontSize:"0.85em",opacity:.7},children:["Last updated: ",vI]})]})]}),$i,v.jsxs("div",{className:"settings-section",children:[v.jsx("h4",{children:"Transfer Settings"}),v.jsx("p",{className:"settings-hint",children:"Export or import your settings and tags for use on another device"}),v.jsxs("div",{className:"transfer-btns",children:[v.jsx("button",{className:"btn-secondary",onClick:Mu,children:"Export Settings"}),v.jsx("button",{className:"btn-secondary",onClick:()=>Qo.current?.click(),children:"Import Settings"}),v.jsx("input",{ref:Qo,type:"file",accept:".json",onChange:cr,style:{display:"none"}})]})]}),v.jsx("div",{className:"modal-actions",children:v.jsx("button",{className:"btn-primary",onClick:()=>ne(!1),children:"Done"})})]})}),ja&&v.jsx("div",{className:"modal-overlay",style:{zIndex:200},onMouseDown:()=>Rs(null),children:v.jsxs("div",{className:"modal",onMouseDown:m=>m.stopPropagation(),children:[v.jsx("h3",{children:"Clear previously imported events before importing?"}),v.jsxs("div",{className:"modal-actions",children:[v.jsx("button",{onClick:()=>{const{newEvents:m}=ja;Rs(null),ur(m,!1)},children:"Keep (deduplicate)"}),v.jsx("button",{className:"primary",onClick:()=>{const{newEvents:m}=ja;Rs(null),ur(m,!0)},children:"Clear before importing"})]})]})}),bt&&v.jsx("div",{className:"modal-overlay",style:{zIndex:200},onMouseDown:()=>{ei(null),Rt([])},children:v.jsxs("div",{className:"modal modal-wide",onMouseDown:m=>m.stopPropagation(),children:[v.jsx("h3",{children:bt.mode==="import"?"Map Categories":"Category Mapping"}),bt.mode==="import"&&bt.uncategorized>0&&v.jsxs("p",{className:"form-hint",style:{marginBottom:"0.75rem"},children:[bt.uncategorized," event",bt.uncategorized!==1?"s":""," without a category will always be imported."]}),v.jsx("div",{className:"category-mapping-list",children:Bt.map((m,E)=>v.jsxs("div",{className:`category-mapping-row${m.include===!1?" excluded":""}`,children:[bt.mode==="settings"?v.jsx("input",{type:"text",className:"category-rule-name",value:m.category,onChange:I=>{const D=[...Bt];D[E]={...D[E],category:I.target.value},Rt(D)},placeholder:"Category name"}):v.jsxs("span",{className:"category-mapping-name",children:[m.category,bt.catCounts?.[m.category]!=null&&v.jsxs("span",{className:"category-mapping-count",children:["(",bt.catCounts[m.category],")"]})]}),v.jsxs("label",{className:"category-mapping-toggle",children:[v.jsx("input",{type:"checkbox",checked:m.include!==!1,onChange:I=>{const D=[...Bt];D[E]={...D[E],include:I.target.checked},I.target.checked||(D[E].tagId=null),Rt(D)}}),"Include"]}),m.include!==!1&&v.jsxs("div",{className:"tag-selector compact",children:[v.jsx("button",{className:`tag-option no-tag ${m.tagId===null?"selected":""}`,onClick:()=>{const I=[...Bt];I[E]={...I[E],tagId:null},Rt(I)},title:"No tag",children:""}),h.map(I=>v.jsx("button",{className:`tag-option ${m.tagId===I.id?"selected":""}`,onClick:()=>{const D=[...Bt];D[E]={...D[E],tagId:I.id},Rt(D)},style:{backgroundColor:I.color},title:I.name},I.id))]}),bt.mode==="settings"&&v.jsx("button",{className:"action-btn delete",onClick:()=>Rt(I=>I.filter((D,L)=>L!==E)),title:"Remove rule",children:""})]},E))}),bt.mode==="settings"&&v.jsx("button",{className:"btn-secondary",style:{marginTop:"0.5rem"},onClick:()=>Rt(m=>[...m,{category:"",include:!0,tagId:null}]),children:"+ Add Category"}),v.jsxs("div",{className:"modal-actions",style:{marginTop:"1rem"},children:[v.jsx("button",{className:"btn-secondary",onClick:()=>{ei(null),Rt([])},children:"Cancel"}),bt.mode==="import"?v.jsxs(v.Fragment,{children:[v.jsx("button",{className:"btn-primary",onClick:()=>{const m=Bt.filter(E=>E.category.trim());Ys(bt.filteredEvents,m),ei(null),Rt([])},children:"Import"}),v.jsx("button",{className:"btn-primary",onClick:()=>{const m=Bt.filter(E=>E.category.trim());ke("icsCategoryRules",m),Ys(bt.filteredEvents,m),ei(null),Rt([])},children:"Remember & Import"})]}):v.jsx("button",{className:"btn-primary",onClick:()=>{const m=Bt.filter(E=>E.category.trim());ke("icsCategoryRules",m),ei(null),Rt([])},children:"Save"})]})]})})]})}yE.createRoot(document.getElementById("root")).render(v.jsx(z.StrictMode,{children:v.jsx(kI,{})}));
