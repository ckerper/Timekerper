(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const d of r)if(d.type==="childList")for(const h of d.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&o(h)}).observe(document,{childList:!0,subtree:!0});function a(r){const d={};return r.integrity&&(d.integrity=r.integrity),r.referrerPolicy&&(d.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?d.credentials="include":r.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function o(r){if(r.ep)return;r.ep=!0;const d=a(r);fetch(r.href,d)}})();var zh={exports:{}},Fr={};var Vy;function uE(){if(Vy)return Fr;Vy=1;var l=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function a(o,r,d){var h=null;if(d!==void 0&&(h=""+d),r.key!==void 0&&(h=""+r.key),"key"in r){d={};for(var f in r)f!=="key"&&(d[f]=r[f])}else d=r;return r=d.ref,{$$typeof:l,type:o,key:h,ref:r!==void 0?r:null,props:d}}return Fr.Fragment=n,Fr.jsx=a,Fr.jsxs=a,Fr}var Fy;function dE(){return Fy||(Fy=1,zh.exports=uE()),zh.exports}var y=dE(),Lh={exports:{}},Ee={};var Yy;function hE(){if(Yy)return Ee;Yy=1;var l=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),h=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),k=Symbol.iterator;function M(A){return A===null||typeof A!="object"?null:(A=k&&A[k]||A["@@iterator"],typeof A=="function"?A:null)}var F={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},J=Object.assign,ve={};function W(A,R,Q){this.props=A,this.context=R,this.refs=ve,this.updater=Q||F}W.prototype.isReactComponent={},W.prototype.setState=function(A,R){if(typeof A!="object"&&typeof A!="function"&&A!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,A,R,"setState")},W.prototype.forceUpdate=function(A){this.updater.enqueueForceUpdate(this,A,"forceUpdate")};function de(){}de.prototype=W.prototype;function ae(A,R,Q){this.props=A,this.context=R,this.refs=ve,this.updater=Q||F}var Ie=ae.prototype=new de;Ie.constructor=ae,J(Ie,W.prototype),Ie.isPureReactComponent=!0;var se=Array.isArray;function ee(){}var re={H:null,A:null,T:null,S:null},Ae=Object.prototype.hasOwnProperty;function Re(A,R,Q){var H=Q.ref;return{$$typeof:l,type:A,key:R,ref:H!==void 0?H:null,props:Q}}function Ye(A,R){return Re(A.type,R,A.props)}function tt(A){return typeof A=="object"&&A!==null&&A.$$typeof===l}function Ue(A){var R={"=":"=0",":":"=2"};return"$"+A.replace(/[=:]/g,function(Q){return R[Q]})}var be=/\/+/g;function me(A,R){return typeof A=="object"&&A!==null&&A.key!=null?Ue(""+A.key):R.toString(36)}function fe(A){switch(A.status){case"fulfilled":return A.value;case"rejected":throw A.reason;default:switch(typeof A.status=="string"?A.then(ee,ee):(A.status="pending",A.then(function(R){A.status==="pending"&&(A.status="fulfilled",A.value=R)},function(R){A.status==="pending"&&(A.status="rejected",A.reason=R)})),A.status){case"fulfilled":return A.value;case"rejected":throw A.reason}}throw A}function D(A,R,Q,H,X){var le=typeof A;(le==="undefined"||le==="boolean")&&(A=null);var ye=!1;if(A===null)ye=!0;else switch(le){case"bigint":case"string":case"number":ye=!0;break;case"object":switch(A.$$typeof){case l:case n:ye=!0;break;case S:return ye=A._init,D(ye(A._payload),R,Q,H,X)}}if(ye)return X=X(A),ye=H===""?"."+me(A,0):H,se(X)?(Q="",ye!=null&&(Q=ye.replace(be,"$&/")+"/"),D(X,R,Q,"",function(Rt){return Rt})):X!=null&&(tt(X)&&(X=Ye(X,Q+(X.key==null||A&&A.key===X.key?"":(""+X.key).replace(be,"$&/")+"/")+ye)),R.push(X)),1;ye=0;var it=H===""?".":H+":";if(se(A))for(var je=0;je<A.length;je++)H=A[je],le=it+me(H,je),ye+=D(H,R,Q,le,X);else if(je=M(A),typeof je=="function")for(A=je.call(A),je=0;!(H=A.next()).done;)H=H.value,le=it+me(H,je++),ye+=D(H,R,Q,le,X);else if(le==="object"){if(typeof A.then=="function")return D(fe(A),R,Q,H,X);throw R=String(A),Error("Objects are not valid as a React child (found: "+(R==="[object Object]"?"object with keys {"+Object.keys(A).join(", ")+"}":R)+"). If you meant to render a collection of children, use an array instead.")}return ye}function Y(A,R,Q){if(A==null)return A;var H=[],X=0;return D(A,H,"","",function(le){return R.call(Q,le,X++)}),H}function te(A){if(A._status===-1){var R=A._result;R=R(),R.then(function(Q){(A._status===0||A._status===-1)&&(A._status=1,A._result=Q)},function(Q){(A._status===0||A._status===-1)&&(A._status=2,A._result=Q)}),A._status===-1&&(A._status=0,A._result=R)}if(A._status===1)return A._result.default;throw A._result}var $=typeof reportError=="function"?reportError:function(A){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var R=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof A=="object"&&A!==null&&typeof A.message=="string"?String(A.message):String(A),error:A});if(!window.dispatchEvent(R))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",A);return}console.error(A)},ie={map:Y,forEach:function(A,R,Q){Y(A,function(){R.apply(this,arguments)},Q)},count:function(A){var R=0;return Y(A,function(){R++}),R},toArray:function(A){return Y(A,function(R){return R})||[]},only:function(A){if(!tt(A))throw Error("React.Children.only expected to receive a single React element child.");return A}};return Ee.Activity=T,Ee.Children=ie,Ee.Component=W,Ee.Fragment=a,Ee.Profiler=r,Ee.PureComponent=ae,Ee.StrictMode=o,Ee.Suspense=v,Ee.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=re,Ee.__COMPILER_RUNTIME={__proto__:null,c:function(A){return re.H.useMemoCache(A)}},Ee.cache=function(A){return function(){return A.apply(null,arguments)}},Ee.cacheSignal=function(){return null},Ee.cloneElement=function(A,R,Q){if(A==null)throw Error("The argument must be a React element, but you passed "+A+".");var H=J({},A.props),X=A.key;if(R!=null)for(le in R.key!==void 0&&(X=""+R.key),R)!Ae.call(R,le)||le==="key"||le==="__self"||le==="__source"||le==="ref"&&R.ref===void 0||(H[le]=R[le]);var le=arguments.length-2;if(le===1)H.children=Q;else if(1<le){for(var ye=Array(le),it=0;it<le;it++)ye[it]=arguments[it+2];H.children=ye}return Re(A.type,X,H)},Ee.createContext=function(A){return A={$$typeof:h,_currentValue:A,_currentValue2:A,_threadCount:0,Provider:null,Consumer:null},A.Provider=A,A.Consumer={$$typeof:d,_context:A},A},Ee.createElement=function(A,R,Q){var H,X={},le=null;if(R!=null)for(H in R.key!==void 0&&(le=""+R.key),R)Ae.call(R,H)&&H!=="key"&&H!=="__self"&&H!=="__source"&&(X[H]=R[H]);var ye=arguments.length-2;if(ye===1)X.children=Q;else if(1<ye){for(var it=Array(ye),je=0;je<ye;je++)it[je]=arguments[je+2];X.children=it}if(A&&A.defaultProps)for(H in ye=A.defaultProps,ye)X[H]===void 0&&(X[H]=ye[H]);return Re(A,le,X)},Ee.createRef=function(){return{current:null}},Ee.forwardRef=function(A){return{$$typeof:f,render:A}},Ee.isValidElement=tt,Ee.lazy=function(A){return{$$typeof:S,_payload:{_status:-1,_result:A},_init:te}},Ee.memo=function(A,R){return{$$typeof:p,type:A,compare:R===void 0?null:R}},Ee.startTransition=function(A){var R=re.T,Q={};re.T=Q;try{var H=A(),X=re.S;X!==null&&X(Q,H),typeof H=="object"&&H!==null&&typeof H.then=="function"&&H.then(ee,$)}catch(le){$(le)}finally{R!==null&&Q.types!==null&&(R.types=Q.types),re.T=R}},Ee.unstable_useCacheRefresh=function(){return re.H.useCacheRefresh()},Ee.use=function(A){return re.H.use(A)},Ee.useActionState=function(A,R,Q){return re.H.useActionState(A,R,Q)},Ee.useCallback=function(A,R){return re.H.useCallback(A,R)},Ee.useContext=function(A){return re.H.useContext(A)},Ee.useDebugValue=function(){},Ee.useDeferredValue=function(A,R){return re.H.useDeferredValue(A,R)},Ee.useEffect=function(A,R){return re.H.useEffect(A,R)},Ee.useEffectEvent=function(A){return re.H.useEffectEvent(A)},Ee.useId=function(){return re.H.useId()},Ee.useImperativeHandle=function(A,R,Q){return re.H.useImperativeHandle(A,R,Q)},Ee.useInsertionEffect=function(A,R){return re.H.useInsertionEffect(A,R)},Ee.useLayoutEffect=function(A,R){return re.H.useLayoutEffect(A,R)},Ee.useMemo=function(A,R){return re.H.useMemo(A,R)},Ee.useOptimistic=function(A,R){return re.H.useOptimistic(A,R)},Ee.useReducer=function(A,R,Q){return re.H.useReducer(A,R,Q)},Ee.useRef=function(A){return re.H.useRef(A)},Ee.useState=function(A){return re.H.useState(A)},Ee.useSyncExternalStore=function(A,R,Q){return re.H.useSyncExternalStore(A,R,Q)},Ee.useTransition=function(){return re.H.useTransition()},Ee.version="19.2.4",Ee}var Qy;function Tf(){return Qy||(Qy=1,Lh.exports=hE()),Lh.exports}var j=Tf(),Bh={exports:{}},Yr={},Kh={exports:{}},Ph={};var qy;function fE(){return qy||(qy=1,(function(l){function n(D,Y){var te=D.length;D.push(Y);e:for(;0<te;){var $=te-1>>>1,ie=D[$];if(0<r(ie,Y))D[$]=Y,D[te]=ie,te=$;else break e}}function a(D){return D.length===0?null:D[0]}function o(D){if(D.length===0)return null;var Y=D[0],te=D.pop();if(te!==Y){D[0]=te;e:for(var $=0,ie=D.length,A=ie>>>1;$<A;){var R=2*($+1)-1,Q=D[R],H=R+1,X=D[H];if(0>r(Q,te))H<ie&&0>r(X,Q)?(D[$]=X,D[H]=te,$=H):(D[$]=Q,D[R]=te,$=R);else if(H<ie&&0>r(X,te))D[$]=X,D[H]=te,$=H;else break e}}return Y}function r(D,Y){var te=D.sortIndex-Y.sortIndex;return te!==0?te:D.id-Y.id}if(l.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;l.unstable_now=function(){return d.now()}}else{var h=Date,f=h.now();l.unstable_now=function(){return h.now()-f}}var v=[],p=[],S=1,T=null,k=3,M=!1,F=!1,J=!1,ve=!1,W=typeof setTimeout=="function"?setTimeout:null,de=typeof clearTimeout=="function"?clearTimeout:null,ae=typeof setImmediate<"u"?setImmediate:null;function Ie(D){for(var Y=a(p);Y!==null;){if(Y.callback===null)o(p);else if(Y.startTime<=D)o(p),Y.sortIndex=Y.expirationTime,n(v,Y);else break;Y=a(p)}}function se(D){if(J=!1,Ie(D),!F)if(a(v)!==null)F=!0,ee||(ee=!0,Ue());else{var Y=a(p);Y!==null&&fe(se,Y.startTime-D)}}var ee=!1,re=-1,Ae=5,Re=-1;function Ye(){return ve?!0:!(l.unstable_now()-Re<Ae)}function tt(){if(ve=!1,ee){var D=l.unstable_now();Re=D;var Y=!0;try{e:{F=!1,J&&(J=!1,de(re),re=-1),M=!0;var te=k;try{t:{for(Ie(D),T=a(v);T!==null&&!(T.expirationTime>D&&Ye());){var $=T.callback;if(typeof $=="function"){T.callback=null,k=T.priorityLevel;var ie=$(T.expirationTime<=D);if(D=l.unstable_now(),typeof ie=="function"){T.callback=ie,Ie(D),Y=!0;break t}T===a(v)&&o(v),Ie(D)}else o(v);T=a(v)}if(T!==null)Y=!0;else{var A=a(p);A!==null&&fe(se,A.startTime-D),Y=!1}}break e}finally{T=null,k=te,M=!1}Y=void 0}}finally{Y?Ue():ee=!1}}}var Ue;if(typeof ae=="function")Ue=function(){ae(tt)};else if(typeof MessageChannel<"u"){var be=new MessageChannel,me=be.port2;be.port1.onmessage=tt,Ue=function(){me.postMessage(null)}}else Ue=function(){W(tt,0)};function fe(D,Y){re=W(function(){D(l.unstable_now())},Y)}l.unstable_IdlePriority=5,l.unstable_ImmediatePriority=1,l.unstable_LowPriority=4,l.unstable_NormalPriority=3,l.unstable_Profiling=null,l.unstable_UserBlockingPriority=2,l.unstable_cancelCallback=function(D){D.callback=null},l.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ae=0<D?Math.floor(1e3/D):5},l.unstable_getCurrentPriorityLevel=function(){return k},l.unstable_next=function(D){switch(k){case 1:case 2:case 3:var Y=3;break;default:Y=k}var te=k;k=Y;try{return D()}finally{k=te}},l.unstable_requestPaint=function(){ve=!0},l.unstable_runWithPriority=function(D,Y){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var te=k;k=D;try{return Y()}finally{k=te}},l.unstable_scheduleCallback=function(D,Y,te){var $=l.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?$+te:$):te=$,D){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=te+ie,D={id:S++,callback:Y,priorityLevel:D,startTime:te,expirationTime:ie,sortIndex:-1},te>$?(D.sortIndex=te,n(p,D),a(v)===null&&D===a(p)&&(J?(de(re),re=-1):J=!0,fe(se,te-$))):(D.sortIndex=ie,n(v,D),F||M||(F=!0,ee||(ee=!0,Ue()))),D},l.unstable_shouldYield=Ye,l.unstable_wrapCallback=function(D){var Y=k;return function(){var te=k;k=Y;try{return D.apply(this,arguments)}finally{k=te}}}})(Ph)),Ph}var Jy;function gE(){return Jy||(Jy=1,Kh.exports=fE()),Kh.exports}var Gh={exports:{}},Vt={};var Xy;function mE(){if(Xy)return Vt;Xy=1;var l=Tf();function n(v){var p="https://react.dev/errors/"+v;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var S=2;S<arguments.length;S++)p+="&args[]="+encodeURIComponent(arguments[S])}return"Minified React error #"+v+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var o={d:{f:a,r:function(){throw Error(n(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},r=Symbol.for("react.portal");function d(v,p,S){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:T==null?null:""+T,children:v,containerInfo:p,implementation:S}}var h=l.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(v,p){if(v==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Vt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,Vt.createPortal=function(v,p){var S=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(n(299));return d(v,p,null,S)},Vt.flushSync=function(v){var p=h.T,S=o.p;try{if(h.T=null,o.p=2,v)return v()}finally{h.T=p,o.p=S,o.d.f()}},Vt.preconnect=function(v,p){typeof v=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,o.d.C(v,p))},Vt.prefetchDNS=function(v){typeof v=="string"&&o.d.D(v)},Vt.preinit=function(v,p){if(typeof v=="string"&&p&&typeof p.as=="string"){var S=p.as,T=f(S,p.crossOrigin),k=typeof p.integrity=="string"?p.integrity:void 0,M=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;S==="style"?o.d.S(v,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:T,integrity:k,fetchPriority:M}):S==="script"&&o.d.X(v,{crossOrigin:T,integrity:k,fetchPriority:M,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Vt.preinitModule=function(v,p){if(typeof v=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var S=f(p.as,p.crossOrigin);o.d.M(v,{crossOrigin:S,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&o.d.M(v)},Vt.preload=function(v,p){if(typeof v=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var S=p.as,T=f(S,p.crossOrigin);o.d.L(v,S,{crossOrigin:T,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Vt.preloadModule=function(v,p){if(typeof v=="string")if(p){var S=f(p.as,p.crossOrigin);o.d.m(v,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:S,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else o.d.m(v)},Vt.requestFormReset=function(v){o.d.r(v)},Vt.unstable_batchedUpdates=function(v,p){return v(p)},Vt.useFormState=function(v,p,S){return h.H.useFormState(v,p,S)},Vt.useFormStatus=function(){return h.H.useHostTransitionStatus()},Vt.version="19.2.4",Vt}var Zy;function pE(){if(Zy)return Gh.exports;Zy=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(n){console.error(n)}}return l(),Gh.exports=mE(),Gh.exports}var $y;function yE(){if($y)return Yr;$y=1;var l=gE(),n=Tf(),a=pE();function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function d(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function h(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function f(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function v(e){if(d(e)!==e)throw Error(o(188))}function p(e){var t=e.alternate;if(!t){if(t=d(e),t===null)throw Error(o(188));return t!==e?null:e}for(var i=e,s=t;;){var c=i.return;if(c===null)break;var u=c.alternate;if(u===null){if(s=c.return,s!==null){i=s;continue}break}if(c.child===u.child){for(u=c.child;u;){if(u===i)return v(c),e;if(u===s)return v(c),t;u=u.sibling}throw Error(o(188))}if(i.return!==s.return)i=c,s=u;else{for(var g=!1,C=c.child;C;){if(C===i){g=!0,i=c,s=u;break}if(C===s){g=!0,s=c,i=u;break}C=C.sibling}if(!g){for(C=u.child;C;){if(C===i){g=!0,i=u,s=c;break}if(C===s){g=!0,s=u,i=c;break}C=C.sibling}if(!g)throw Error(o(189))}}if(i.alternate!==s)throw Error(o(190))}if(i.tag!==3)throw Error(o(188));return i.stateNode.current===i?e:t}function S(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=S(e),t!==null)return t;e=e.sibling}return null}var T=Object.assign,k=Symbol.for("react.element"),M=Symbol.for("react.transitional.element"),F=Symbol.for("react.portal"),J=Symbol.for("react.fragment"),ve=Symbol.for("react.strict_mode"),W=Symbol.for("react.profiler"),de=Symbol.for("react.consumer"),ae=Symbol.for("react.context"),Ie=Symbol.for("react.forward_ref"),se=Symbol.for("react.suspense"),ee=Symbol.for("react.suspense_list"),re=Symbol.for("react.memo"),Ae=Symbol.for("react.lazy"),Re=Symbol.for("react.activity"),Ye=Symbol.for("react.memo_cache_sentinel"),tt=Symbol.iterator;function Ue(e){return e===null||typeof e!="object"?null:(e=tt&&e[tt]||e["@@iterator"],typeof e=="function"?e:null)}var be=Symbol.for("react.client.reference");function me(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===be?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case J:return"Fragment";case W:return"Profiler";case ve:return"StrictMode";case se:return"Suspense";case ee:return"SuspenseList";case Re:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case F:return"Portal";case ae:return e.displayName||"Context";case de:return(e._context.displayName||"Context")+".Consumer";case Ie:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case re:return t=e.displayName||null,t!==null?t:me(e.type)||"Memo";case Ae:t=e._payload,e=e._init;try{return me(e(t))}catch{}}return null}var fe=Array.isArray,D=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te={pending:!1,data:null,method:null,action:null},$=[],ie=-1;function A(e){return{current:e}}function R(e){0>ie||(e.current=$[ie],$[ie]=null,ie--)}function Q(e,t){ie++,$[ie]=e.current,e.current=t}var H=A(null),X=A(null),le=A(null),ye=A(null);function it(e,t){switch(Q(le,t),Q(X,e),Q(H,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?fy(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=fy(t),e=gy(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}R(H),Q(H,e)}function je(){R(H),R(X),R(le)}function Rt(e){e.memoizedState!==null&&Q(ye,e);var t=H.current,i=gy(t,e.type);t!==i&&(Q(X,e),Q(H,i))}function vi(e){X.current===e&&(R(H),R(X)),ye.current===e&&(R(ye),Kr._currentValue=te)}var pt,mn;function _t(e){if(pt===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);pt=t&&t[1]||"",mn=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+pt+e+mn}var yt=!1;function Da(e,t){if(!e||yt)return"";yt=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(t){var V=function(){throw Error()};if(Object.defineProperty(V.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(V,[])}catch(z){var x=z}Reflect.construct(e,[],V)}else{try{V.call()}catch(z){x=z}e.call(V.prototype)}}else{try{throw Error()}catch(z){x=z}(V=e())&&typeof V.catch=="function"&&V.catch(function(){})}}catch(z){if(z&&x&&typeof z.stack=="string")return[z.stack,x.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var u=s.DetermineComponentFrameRoot(),g=u[0],C=u[1];if(g&&C){var b=g.split(`
`),N=C.split(`
`);for(c=s=0;s<b.length&&!b[s].includes("DetermineComponentFrameRoot");)s++;for(;c<N.length&&!N[c].includes("DetermineComponentFrameRoot");)c++;if(s===b.length||c===N.length)for(s=b.length-1,c=N.length-1;1<=s&&0<=c&&b[s]!==N[c];)c--;for(;1<=s&&0<=c;s--,c--)if(b[s]!==N[c]){if(s!==1||c!==1)do if(s--,c--,0>c||b[s]!==N[c]){var K=`
`+b[s].replace(" at new "," at ");return e.displayName&&K.includes("<anonymous>")&&(K=K.replace("<anonymous>",e.displayName)),K}while(1<=s&&0<=c);break}}}finally{yt=!1,Error.prepareStackTrace=i}return(i=e?e.displayName||e.name:"")?_t(i):""}function ks(e,t){switch(e.tag){case 26:case 27:case 5:return _t(e.type);case 16:return _t("Lazy");case 13:return e.child!==t&&t!==null?_t("Suspense Fallback"):_t("Suspense");case 19:return _t("SuspenseList");case 0:case 15:return Da(e.type,!1);case 11:return Da(e.type.render,!1);case 1:return Da(e.type,!0);case 31:return _t("Activity");default:return""}}function ei(e){try{var t="",i=null;do t+=ks(e,i),i=e,e=e.return;while(e);return t}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}var qi=Object.prototype.hasOwnProperty,Ua=l.unstable_scheduleCallback,ja=l.unstable_cancelCallback,Os=l.unstable_shouldYield,Is=l.unstable_requestPaint,Gt=l.unstable_now,gl=l.unstable_getCurrentPriorityLevel,zo=l.unstable_ImmediatePriority,Rs=l.unstable_UserBlockingPriority,pn=l.unstable_NormalPriority,Lo=l.unstable_LowPriority,Ha=l.unstable_IdlePriority,za=l.log,Ns=l.unstable_setDisableYieldValue,ti=null,Nt=null;function In(e){if(typeof za=="function"&&Ns(e),Nt&&typeof Nt.setStrictMode=="function")try{Nt.setStrictMode(ti,e)}catch{}}var Qt=Math.clz32?Math.clz32:Po,Bo=Math.log,Ko=Math.LN2;function Po(e){return e>>>=0,e===0?32:31-(Bo(e)/Ko|0)|0}var La=256,Ci=262144,ni=4194304;function ii(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ba(e,t,i){var s=e.pendingLanes;if(s===0)return 0;var c=0,u=e.suspendedLanes,g=e.pingedLanes;e=e.warmLanes;var C=s&134217727;return C!==0?(s=C&~u,s!==0?c=ii(s):(g&=C,g!==0?c=ii(g):i||(i=C&~e,i!==0&&(c=ii(i))))):(C=s&~u,C!==0?c=ii(C):g!==0?c=ii(g):i||(i=s&~e,i!==0&&(c=ii(i)))),c===0?0:t!==0&&t!==c&&(t&u)===0&&(u=c&-c,i=t&-t,u>=i||u===32&&(i&4194048)!==0)?t:c}function Si(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Go(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Vo(){var e=ni;return ni<<=1,(ni&62914560)===0&&(ni=4194304),e}function Ms(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function Ka(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function _u(e,t,i,s,c,u){var g=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var C=e.entanglements,b=e.expirationTimes,N=e.hiddenUpdates;for(i=g&~i;0<i;){var K=31-Qt(i),V=1<<K;C[K]=0,b[K]=-1;var x=N[K];if(x!==null)for(N[K]=null,K=0;K<x.length;K++){var z=x[K];z!==null&&(z.lane&=-536870913)}i&=~V}s!==0&&ml(e,s,0),u!==0&&c===0&&e.tag!==0&&(e.suspendedLanes|=u&~(g&~t))}function ml(e,t,i){e.pendingLanes|=t,e.suspendedLanes&=~t;var s=31-Qt(t);e.entangledLanes|=t,e.entanglements[s]=e.entanglements[s]|1073741824|i&261930}function pl(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var s=31-Qt(i),c=1<<s;c&t|e[s]&t&&(e[s]|=t),i&=~c}}function Pa(e,t){var i=t&-t;return i=(i&42)!==0?1:Ji(i),(i&(e.suspendedLanes|t))!==0?0:i}function Ji(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Xi(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function xs(){var e=Y.p;return e!==0?e:(e=window.event,e===void 0?32:Hy(e.type))}function Fo(e,t){var i=Y.p;try{return Y.p=e,t()}finally{Y.p=i}}var Rn=Math.random().toString(36).slice(2),lt="__reactFiber$"+Rn,kt="__reactProps$"+Rn,Ti="__reactContainer$"+Rn,Ga="__reactEvents$"+Rn,Ei="__reactListeners$"+Rn,Zi="__reactHandles$"+Rn,ai="__reactResources$"+Rn,yn="__reactMarker$"+Rn;function Yo(e){delete e[lt],delete e[kt],delete e[Ga],delete e[Ei],delete e[Zi]}function $i(e){var t=e[lt];if(t)return t;for(var i=e.parentNode;i;){if(t=i[Ti]||i[lt]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=Ty(e);e!==null;){if(i=e[lt])return i;e=Ty(e)}return t}e=i,i=e.parentNode}return null}function si(e){if(e=e[lt]||e[Ti]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Ge(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(o(33))}function oi(e){var t=e[ai];return t||(t=e[ai]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function ct(e){e[yn]=!0}var qt=new Set,Va={};function vn(e,t){Ai(e,t),Ai(e+"Capture",t)}function Ai(e,t){for(Va[e]=t,e=0;e<t.length;e++)qt.add(t[e])}var ku=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Qo={},Ds={};function yl(e){return qi.call(Ds,e)?!0:qi.call(Qo,e)?!1:ku.test(e)?Ds[e]=!0:(Qo[e]=!0,!1)}function Us(e,t,i){if(yl(t))if(i===null)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var s=t.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+i)}}function Wi(e,t,i){if(i===null)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+i)}}function Cn(e,t,i,s){if(s===null)e.removeAttribute(i);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttributeNS(t,i,""+s)}}function Mt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function vl(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Ou(e,t,i){var s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var c=s.get,u=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(g){i=""+g,u.call(this,g)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return i},setValue:function(g){i=""+g},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function qo(e){if(!e._valueTracker){var t=vl(e)?"checked":"value";e._valueTracker=Ou(e,t,""+e[t])}}function Cl(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),s="";return e&&(s=vl(e)?e.checked?"true":"false":e.value),e=s,e!==i?(t.setValue(e),!0):!1}function bi(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var ri=/[\n"\\]/g;function en(e){return e.replace(ri,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Fa(e,t,i,s,c,u,g,C){e.name="",g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"?e.type=g:e.removeAttribute("type"),t!=null?g==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Mt(t)):e.value!==""+Mt(t)&&(e.value=""+Mt(t)):g!=="submit"&&g!=="reset"||e.removeAttribute("value"),t!=null?Ya(e,g,Mt(t)):i!=null?Ya(e,g,Mt(i)):s!=null&&e.removeAttribute("value"),c==null&&u!=null&&(e.defaultChecked=!!u),c!=null&&(e.checked=c&&typeof c!="function"&&typeof c!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?e.name=""+Mt(C):e.removeAttribute("name")}function js(e,t,i,s,c,u,g,C){if(u!=null&&typeof u!="function"&&typeof u!="symbol"&&typeof u!="boolean"&&(e.type=u),t!=null||i!=null){if(!(u!=="submit"&&u!=="reset"||t!=null)){qo(e);return}i=i!=null?""+Mt(i):"",t=t!=null?""+Mt(t):i,C||t===e.value||(e.value=t),e.defaultValue=t}s=s??c,s=typeof s!="function"&&typeof s!="symbol"&&!!s,e.checked=C?e.checked:!!s,e.defaultChecked=!!s,g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(e.name=g),qo(e)}function Ya(e,t,i){t==="number"&&bi(e.ownerDocument)===e||e.defaultValue===""+i||(e.defaultValue=""+i)}function xt(e,t,i,s){if(e=e.options,t){t={};for(var c=0;c<i.length;c++)t["$"+i[c]]=!0;for(i=0;i<e.length;i++)c=t.hasOwnProperty("$"+e[i].value),e[i].selected!==c&&(e[i].selected=c),c&&s&&(e[i].defaultSelected=!0)}else{for(i=""+Mt(i),t=null,c=0;c<e.length;c++){if(e[c].value===i){e[c].selected=!0,s&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function Sl(e,t,i){if(t!=null&&(t=""+Mt(t),t!==e.value&&(e.value=t),i==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=i!=null?""+Mt(i):""}function Tl(e,t,i,s){if(t==null){if(s!=null){if(i!=null)throw Error(o(92));if(fe(s)){if(1<s.length)throw Error(o(93));s=s[0]}i=s}i==null&&(i=""),t=i}i=Mt(t),e.defaultValue=i,s=e.textContent,s===i&&s!==""&&s!==null&&(e.value=s),qo(e)}function Nn(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var Qa=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function El(e,t,i){var s=t.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?s?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":s?e.setProperty(t,i):typeof i!="number"||i===0||Qa.has(t)?t==="float"?e.cssFloat=i:e[t]=(""+i).trim():e[t]=i+"px"}function Al(e,t,i){if(t!=null&&typeof t!="object")throw Error(o(62));if(e=e.style,i!=null){for(var s in i)!i.hasOwnProperty(s)||t!=null&&t.hasOwnProperty(s)||(s.indexOf("--")===0?e.setProperty(s,""):s==="float"?e.cssFloat="":e[s]="");for(var c in t)s=t[c],t.hasOwnProperty(c)&&i[c]!==s&&El(e,c,s)}else for(var u in t)t.hasOwnProperty(u)&&El(e,u,t[u])}function Dt(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jt=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),bl=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ot(e){return bl.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Ut(){}var Hs=null;function qa(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ut=null,wi=null;function Jo(e){var t=si(e);if(t&&(e=t.stateNode)){var i=e[kt]||null;e:switch(e=t.stateNode,t.type){case"input":if(Fa(e,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+en(""+t)+'"][type="radio"]'),t=0;t<i.length;t++){var s=i[t];if(s!==e&&s.form===e.form){var c=s[kt]||null;if(!c)throw Error(o(90));Fa(s,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name)}}for(t=0;t<i.length;t++)s=i[t],s.form===e.form&&Cl(s)}break e;case"textarea":Sl(e,i.value,i.defaultValue);break e;case"select":t=i.value,t!=null&&xt(e,!!i.multiple,t,!1)}}}var Xo=!1;function Zo(e,t,i){if(Xo)return e(t,i);Xo=!0;try{var s=e(t);return s}finally{if(Xo=!1,(ut!==null||wi!==null)&&(mc(),ut&&(t=ut,e=wi,wi=ut=null,Jo(t),e)))for(t=0;t<e.length;t++)Jo(e[t])}}function _i(e,t){var i=e.stateNode;if(i===null)return null;var s=i[kt]||null;if(s===null)return null;i=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(o(231,t,typeof i));return i}var Sn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$o=!1;if(Sn)try{var Ja={};Object.defineProperty(Ja,"passive",{get:function(){$o=!0}}),window.addEventListener("test",Ja,Ja),window.removeEventListener("test",Ja,Ja)}catch{$o=!1}var Te=null,Wo=null,zs=null;function er(){if(zs)return zs;var e,t=Wo,i=t.length,s,c="value"in Te?Te.value:Te.textContent,u=c.length;for(e=0;e<i&&t[e]===c[e];e++);var g=i-e;for(s=1;s<=g&&t[i-s]===c[u-s];s++);return zs=c.slice(e,1<s?1-s:void 0)}function Ls(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Bs(){return!0}function tr(){return!1}function bt(e){function t(i,s,c,u,g){this._reactName=i,this._targetInst=c,this.type=s,this.nativeEvent=u,this.target=g,this.currentTarget=null;for(var C in e)e.hasOwnProperty(C)&&(i=e[C],this[C]=i?i(u):u[C]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?Bs:tr,this.isPropagationStopped=tr,this}return T(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Bs)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Bs)},persist:function(){},isPersistent:Bs}),t}var ki={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ea=bt(ki),li=T({},ki,{view:0,detail:0}),wl=bt(li),nr,ir,Xa,Za=T({},li,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:or,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Xa&&(Xa&&e.type==="mousemove"?(nr=e.screenX-Xa.screenX,ir=e.screenY-Xa.screenY):ir=nr=0,Xa=e),nr)},movementY:function(e){return"movementY"in e?e.movementY:ir}}),_l=bt(Za),Iu=T({},Za,{dataTransfer:0}),ar=bt(Iu),kl=T({},li,{relatedTarget:0}),sr=bt(kl),Ru=T({},ki,{animationName:0,elapsedTime:0,pseudoElement:0}),Nu=bt(Ru),Mu=T({},ki,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xu=bt(Mu),Du=T({},ki,{data:0}),Ol=bt(Du),Uu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ju={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Il={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Hu(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Il[e])?!!t[e]:!1}function or(){return Hu}var zu=T({},li,{key:function(e){if(e.key){var t=Uu[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ls(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?ju[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:or,charCode:function(e){return e.type==="keypress"?Ls(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ls(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Lu=bt(zu),Bu=T({},Za,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Rl=bt(Bu),Ks=T({},li,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:or}),rr=bt(Ks),Ku=T({},ki,{propertyName:0,elapsedTime:0,pseudoElement:0}),Pu=bt(Ku),Gu=T({},Za,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Vu=bt(Gu),Fu=T({},ki,{newState:0,oldState:0}),Yu=bt(Fu),Nl=[9,13,27,32],Ps=Sn&&"CompositionEvent"in window,ci=null;Sn&&"documentMode"in document&&(ci=document.documentMode);var lr=Sn&&"TextEvent"in window&&!ci,Ml=Sn&&(!Ps||ci&&8<ci&&11>=ci),xl=" ",Dl=!1;function m(e,t){switch(e){case"keyup":return Nl.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function E(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var O=!1;function U(e,t){switch(e){case"compositionend":return E(t);case"keypress":return t.which!==32?null:(Dl=!0,xl);case"textInput":return e=t.data,e===xl&&Dl?null:e;default:return null}}function B(e,t){if(O)return e==="compositionend"||!Ps&&m(e,t)?(e=er(),zs=Wo=Te=null,O=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ml&&t.locale!=="ko"?null:t.data;default:return null}}var Z={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function L(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Z[e.type]:t==="textarea"}function ue(e,t,i,s){ut?wi?wi.push(s):wi=[s]:ut=s,t=Ec(t,"onChange"),0<t.length&&(i=new ea("onChange","change",null,i,s),e.push({event:i,listeners:t}))}var pe=null,ze=null;function Be(e){ry(e,0)}function vt(e){var t=Ge(e);if(Cl(t))return e}function Xt(e,t){if(e==="change")return t}var tn=!1;if(Sn){var jt;if(Sn){var Gs="oninput"in document;if(!Gs){var cr=document.createElement("div");cr.setAttribute("oninput","return;"),Gs=typeof cr.oninput=="function"}jt=Gs}else jt=!1;tn=jt&&(!document.documentMode||9<document.documentMode)}function ur(){pe&&(pe.detachEvent("onpropertychange",Vs),ze=pe=null)}function Vs(e){if(e.propertyName==="value"&&vt(ze)){var t=[];ue(t,ze,e,qa(e)),Zo(Be,t)}}function Oi(e,t,i){e==="focusin"?(ur(),pe=t,ze=i,pe.attachEvent("onpropertychange",Vs)):e==="focusout"&&ur()}function $a(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return vt(ze)}function Ig(e,t){if(e==="click")return vt(t)}function Rg(e,t){if(e==="input"||e==="change")return vt(t)}function PS(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Tn=typeof Object.is=="function"?Object.is:PS;function dr(e,t){if(Tn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),s=Object.keys(t);if(i.length!==s.length)return!1;for(s=0;s<i.length;s++){var c=i[s];if(!qi.call(t,c)||!Tn(e[c],t[c]))return!1}return!0}function Ng(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Mg(e,t){var i=Ng(e);e=0;for(var s;i;){if(i.nodeType===3){if(s=e+i.textContent.length,e<=t&&s>=t)return{node:i,offset:t-e};e=s}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Ng(i)}}function xg(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?xg(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Dg(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=bi(e.document);t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=bi(e.document)}return t}function Qu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var GS=Sn&&"documentMode"in document&&11>=document.documentMode,Fs=null,qu=null,hr=null,Ju=!1;function Ug(e,t,i){var s=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Ju||Fs==null||Fs!==bi(s)||(s=Fs,"selectionStart"in s&&Qu(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),hr&&dr(hr,s)||(hr=s,s=Ec(qu,"onSelect"),0<s.length&&(t=new ea("onSelect","select",null,t,i),e.push({event:t,listeners:s}),t.target=Fs)))}function Wa(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var Ys={animationend:Wa("Animation","AnimationEnd"),animationiteration:Wa("Animation","AnimationIteration"),animationstart:Wa("Animation","AnimationStart"),transitionrun:Wa("Transition","TransitionRun"),transitionstart:Wa("Transition","TransitionStart"),transitioncancel:Wa("Transition","TransitionCancel"),transitionend:Wa("Transition","TransitionEnd")},Xu={},jg={};Sn&&(jg=document.createElement("div").style,"AnimationEvent"in window||(delete Ys.animationend.animation,delete Ys.animationiteration.animation,delete Ys.animationstart.animation),"TransitionEvent"in window||delete Ys.transitionend.transition);function es(e){if(Xu[e])return Xu[e];if(!Ys[e])return e;var t=Ys[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in jg)return Xu[e]=t[i];return e}var Hg=es("animationend"),zg=es("animationiteration"),Lg=es("animationstart"),VS=es("transitionrun"),FS=es("transitionstart"),YS=es("transitioncancel"),Bg=es("transitionend"),Kg=new Map,Zu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Zu.push("scrollEnd");function Vn(e,t){Kg.set(e,t),vn(t,[e])}var Ul=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Mn=[],Qs=0,$u=0;function jl(){for(var e=Qs,t=$u=Qs=0;t<e;){var i=Mn[t];Mn[t++]=null;var s=Mn[t];Mn[t++]=null;var c=Mn[t];Mn[t++]=null;var u=Mn[t];if(Mn[t++]=null,s!==null&&c!==null){var g=s.pending;g===null?c.next=c:(c.next=g.next,g.next=c),s.pending=c}u!==0&&Pg(i,c,u)}}function Hl(e,t,i,s){Mn[Qs++]=e,Mn[Qs++]=t,Mn[Qs++]=i,Mn[Qs++]=s,$u|=s,e.lanes|=s,e=e.alternate,e!==null&&(e.lanes|=s)}function Wu(e,t,i,s){return Hl(e,t,i,s),zl(e)}function ts(e,t){return Hl(e,null,null,t),zl(e)}function Pg(e,t,i){e.lanes|=i;var s=e.alternate;s!==null&&(s.lanes|=i);for(var c=!1,u=e.return;u!==null;)u.childLanes|=i,s=u.alternate,s!==null&&(s.childLanes|=i),u.tag===22&&(e=u.stateNode,e===null||e._visibility&1||(c=!0)),e=u,u=u.return;return e.tag===3?(u=e.stateNode,c&&t!==null&&(c=31-Qt(i),e=u.hiddenUpdates,s=e[c],s===null?e[c]=[t]:s.push(t),t.lane=i|536870912),u):null}function zl(e){if(50<Dr)throw Dr=0,lh=null,Error(o(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var qs={};function QS(e,t,i,s){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function En(e,t,i,s){return new QS(e,t,i,s)}function ed(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ii(e,t){var i=e.alternate;return i===null?(i=En(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&65011712,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function Gg(e,t){e.flags&=65011714;var i=e.alternate;return i===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,t=i.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Ll(e,t,i,s,c,u){var g=0;if(s=e,typeof e=="function")ed(e)&&(g=1);else if(typeof e=="string")g=$T(e,i,H.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case Re:return e=En(31,i,t,c),e.elementType=Re,e.lanes=u,e;case J:return ns(i.children,c,u,t);case ve:g=8,c|=24;break;case W:return e=En(12,i,t,c|2),e.elementType=W,e.lanes=u,e;case se:return e=En(13,i,t,c),e.elementType=se,e.lanes=u,e;case ee:return e=En(19,i,t,c),e.elementType=ee,e.lanes=u,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ae:g=10;break e;case de:g=9;break e;case Ie:g=11;break e;case re:g=14;break e;case Ae:g=16,s=null;break e}g=29,i=Error(o(130,e===null?"null":typeof e,"")),s=null}return t=En(g,i,t,c),t.elementType=e,t.type=s,t.lanes=u,t}function ns(e,t,i,s){return e=En(7,e,s,t),e.lanes=i,e}function td(e,t,i){return e=En(6,e,null,t),e.lanes=i,e}function Vg(e){var t=En(18,null,null,0);return t.stateNode=e,t}function nd(e,t,i){return t=En(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Fg=new WeakMap;function xn(e,t){if(typeof e=="object"&&e!==null){var i=Fg.get(e);return i!==void 0?i:(t={value:e,source:t,stack:ei(t)},Fg.set(e,t),t)}return{value:e,source:t,stack:ei(t)}}var Js=[],Xs=0,Bl=null,fr=0,Dn=[],Un=0,ta=null,ui=1,di="";function Ri(e,t){Js[Xs++]=fr,Js[Xs++]=Bl,Bl=e,fr=t}function Yg(e,t,i){Dn[Un++]=ui,Dn[Un++]=di,Dn[Un++]=ta,ta=e;var s=ui;e=di;var c=32-Qt(s)-1;s&=~(1<<c),i+=1;var u=32-Qt(t)+c;if(30<u){var g=c-c%5;u=(s&(1<<g)-1).toString(32),s>>=g,c-=g,ui=1<<32-Qt(t)+c|i<<c|s,di=u+e}else ui=1<<u|i<<c|s,di=e}function id(e){e.return!==null&&(Ri(e,1),Yg(e,1,0))}function ad(e){for(;e===Bl;)Bl=Js[--Xs],Js[Xs]=null,fr=Js[--Xs],Js[Xs]=null;for(;e===ta;)ta=Dn[--Un],Dn[Un]=null,di=Dn[--Un],Dn[Un]=null,ui=Dn[--Un],Dn[Un]=null}function Qg(e,t){Dn[Un++]=ui,Dn[Un++]=di,Dn[Un++]=ta,ui=t.id,di=t.overflow,ta=e}var Ht=null,at=null,He=!1,na=null,jn=!1,sd=Error(o(519));function ia(e){var t=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw gr(xn(t,e)),sd}function qg(e){var t=e.stateNode,i=e.type,s=e.memoizedProps;switch(t[lt]=e,t[kt]=s,i){case"dialog":Me("cancel",t),Me("close",t);break;case"iframe":case"object":case"embed":Me("load",t);break;case"video":case"audio":for(i=0;i<jr.length;i++)Me(jr[i],t);break;case"source":Me("error",t);break;case"img":case"image":case"link":Me("error",t),Me("load",t);break;case"details":Me("toggle",t);break;case"input":Me("invalid",t),js(t,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0);break;case"select":Me("invalid",t);break;case"textarea":Me("invalid",t),Tl(t,s.value,s.defaultValue,s.children)}i=s.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||t.textContent===""+i||s.suppressHydrationWarning===!0||dy(t.textContent,i)?(s.popover!=null&&(Me("beforetoggle",t),Me("toggle",t)),s.onScroll!=null&&Me("scroll",t),s.onScrollEnd!=null&&Me("scrollend",t),s.onClick!=null&&(t.onclick=Ut),t=!0):t=!1,t||ia(e,!0)}function Jg(e){for(Ht=e.return;Ht;)switch(Ht.tag){case 5:case 31:case 13:jn=!1;return;case 27:case 3:jn=!0;return;default:Ht=Ht.return}}function Zs(e){if(e!==Ht)return!1;if(!He)return Jg(e),He=!0,!1;var t=e.tag,i;if((i=t!==3&&t!==27)&&((i=t===5)&&(i=e.type,i=!(i!=="form"&&i!=="button")||Ah(e.type,e.memoizedProps)),i=!i),i&&at&&ia(e),Jg(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));at=Sy(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));at=Sy(e)}else t===27?(t=at,ya(e.type)?(e=Oh,Oh=null,at=e):at=t):at=Ht?zn(e.stateNode.nextSibling):null;return!0}function is(){at=Ht=null,He=!1}function od(){var e=na;return e!==null&&(on===null?on=e:on.push.apply(on,e),na=null),e}function gr(e){na===null?na=[e]:na.push(e)}var rd=A(null),as=null,Ni=null;function aa(e,t,i){Q(rd,t._currentValue),t._currentValue=i}function Mi(e){e._currentValue=rd.current,R(rd)}function ld(e,t,i){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===i)break;e=e.return}}function cd(e,t,i,s){var c=e.child;for(c!==null&&(c.return=e);c!==null;){var u=c.dependencies;if(u!==null){var g=c.child;u=u.firstContext;e:for(;u!==null;){var C=u;u=c;for(var b=0;b<t.length;b++)if(C.context===t[b]){u.lanes|=i,C=u.alternate,C!==null&&(C.lanes|=i),ld(u.return,i,e),s||(g=null);break e}u=C.next}}else if(c.tag===18){if(g=c.return,g===null)throw Error(o(341));g.lanes|=i,u=g.alternate,u!==null&&(u.lanes|=i),ld(g,i,e),g=null}else g=c.child;if(g!==null)g.return=c;else for(g=c;g!==null;){if(g===e){g=null;break}if(c=g.sibling,c!==null){c.return=g.return,g=c;break}g=g.return}c=g}}function $s(e,t,i,s){e=null;for(var c=t,u=!1;c!==null;){if(!u){if((c.flags&524288)!==0)u=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var g=c.alternate;if(g===null)throw Error(o(387));if(g=g.memoizedProps,g!==null){var C=c.type;Tn(c.pendingProps.value,g.value)||(e!==null?e.push(C):e=[C])}}else if(c===ye.current){if(g=c.alternate,g===null)throw Error(o(387));g.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(e!==null?e.push(Kr):e=[Kr])}c=c.return}e!==null&&cd(t,e,i,s),t.flags|=262144}function Kl(e){for(e=e.firstContext;e!==null;){if(!Tn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ss(e){as=e,Ni=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function zt(e){return Xg(as,e)}function Pl(e,t){return as===null&&ss(e),Xg(e,t)}function Xg(e,t){var i=t._currentValue;if(t={context:t,memoizedValue:i,next:null},Ni===null){if(e===null)throw Error(o(308));Ni=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Ni=Ni.next=t;return i}var qS=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(i,s){e.push(s)}};this.abort=function(){t.aborted=!0,e.forEach(function(i){return i()})}},JS=l.unstable_scheduleCallback,XS=l.unstable_NormalPriority,Ct={$$typeof:ae,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ud(){return{controller:new qS,data:new Map,refCount:0}}function mr(e){e.refCount--,e.refCount===0&&JS(XS,function(){e.controller.abort()})}var pr=null,dd=0,Ws=0,eo=null;function ZS(e,t){if(pr===null){var i=pr=[];dd=0,Ws=gh(),eo={status:"pending",value:void 0,then:function(s){i.push(s)}}}return dd++,t.then(Zg,Zg),t}function Zg(){if(--dd===0&&pr!==null){eo!==null&&(eo.status="fulfilled");var e=pr;pr=null,Ws=0,eo=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function $S(e,t){var i=[],s={status:"pending",value:null,reason:null,then:function(c){i.push(c)}};return e.then(function(){s.status="fulfilled",s.value=t;for(var c=0;c<i.length;c++)(0,i[c])(t)},function(c){for(s.status="rejected",s.reason=c,c=0;c<i.length;c++)(0,i[c])(void 0)}),s}var $g=D.S;D.S=function(e,t){Up=Gt(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&ZS(e,t),$g!==null&&$g(e,t)};var os=A(null);function hd(){var e=os.current;return e!==null?e:We.pooledCache}function Gl(e,t){t===null?Q(os,os.current):Q(os,t.pool)}function Wg(){var e=hd();return e===null?null:{parent:Ct._currentValue,pool:e}}var to=Error(o(460)),fd=Error(o(474)),Vl=Error(o(542)),Fl={then:function(){}};function em(e){return e=e.status,e==="fulfilled"||e==="rejected"}function tm(e,t,i){switch(i=e[i],i===void 0?e.push(t):i!==t&&(t.then(Ut,Ut),t=i),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,im(e),e;default:if(typeof t.status=="string")t.then(Ut,Ut);else{if(e=We,e!==null&&100<e.shellSuspendCounter)throw Error(o(482));e=t,e.status="pending",e.then(function(s){if(t.status==="pending"){var c=t;c.status="fulfilled",c.value=s}},function(s){if(t.status==="pending"){var c=t;c.status="rejected",c.reason=s}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,im(e),e}throw ls=t,to}}function rs(e){try{var t=e._init;return t(e._payload)}catch(i){throw i!==null&&typeof i=="object"&&typeof i.then=="function"?(ls=i,to):i}}var ls=null;function nm(){if(ls===null)throw Error(o(459));var e=ls;return ls=null,e}function im(e){if(e===to||e===Vl)throw Error(o(483))}var no=null,yr=0;function Yl(e){var t=yr;return yr+=1,no===null&&(no=[]),tm(no,e,t)}function vr(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Ql(e,t){throw t.$$typeof===k?Error(o(525)):(e=Object.prototype.toString.call(t),Error(o(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function am(e){function t(_,w){if(e){var I=_.deletions;I===null?(_.deletions=[w],_.flags|=16):I.push(w)}}function i(_,w){if(!e)return null;for(;w!==null;)t(_,w),w=w.sibling;return null}function s(_){for(var w=new Map;_!==null;)_.key!==null?w.set(_.key,_):w.set(_.index,_),_=_.sibling;return w}function c(_,w){return _=Ii(_,w),_.index=0,_.sibling=null,_}function u(_,w,I){return _.index=I,e?(I=_.alternate,I!==null?(I=I.index,I<w?(_.flags|=67108866,w):I):(_.flags|=67108866,w)):(_.flags|=1048576,w)}function g(_){return e&&_.alternate===null&&(_.flags|=67108866),_}function C(_,w,I,G){return w===null||w.tag!==6?(w=td(I,_.mode,G),w.return=_,w):(w=c(w,I),w.return=_,w)}function b(_,w,I,G){var he=I.type;return he===J?K(_,w,I.props.children,G,I.key):w!==null&&(w.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===Ae&&rs(he)===w.type)?(w=c(w,I.props),vr(w,I),w.return=_,w):(w=Ll(I.type,I.key,I.props,null,_.mode,G),vr(w,I),w.return=_,w)}function N(_,w,I,G){return w===null||w.tag!==4||w.stateNode.containerInfo!==I.containerInfo||w.stateNode.implementation!==I.implementation?(w=nd(I,_.mode,G),w.return=_,w):(w=c(w,I.children||[]),w.return=_,w)}function K(_,w,I,G,he){return w===null||w.tag!==7?(w=ns(I,_.mode,G,he),w.return=_,w):(w=c(w,I),w.return=_,w)}function V(_,w,I){if(typeof w=="string"&&w!==""||typeof w=="number"||typeof w=="bigint")return w=td(""+w,_.mode,I),w.return=_,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case M:return I=Ll(w.type,w.key,w.props,null,_.mode,I),vr(I,w),I.return=_,I;case F:return w=nd(w,_.mode,I),w.return=_,w;case Ae:return w=rs(w),V(_,w,I)}if(fe(w)||Ue(w))return w=ns(w,_.mode,I,null),w.return=_,w;if(typeof w.then=="function")return V(_,Yl(w),I);if(w.$$typeof===ae)return V(_,Pl(_,w),I);Ql(_,w)}return null}function x(_,w,I,G){var he=w!==null?w.key:null;if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return he!==null?null:C(_,w,""+I,G);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case M:return I.key===he?b(_,w,I,G):null;case F:return I.key===he?N(_,w,I,G):null;case Ae:return I=rs(I),x(_,w,I,G)}if(fe(I)||Ue(I))return he!==null?null:K(_,w,I,G,null);if(typeof I.then=="function")return x(_,w,Yl(I),G);if(I.$$typeof===ae)return x(_,w,Pl(_,I),G);Ql(_,I)}return null}function z(_,w,I,G,he){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return _=_.get(I)||null,C(w,_,""+G,he);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case M:return _=_.get(G.key===null?I:G.key)||null,b(w,_,G,he);case F:return _=_.get(G.key===null?I:G.key)||null,N(w,_,G,he);case Ae:return G=rs(G),z(_,w,I,G,he)}if(fe(G)||Ue(G))return _=_.get(I)||null,K(w,_,G,he,null);if(typeof G.then=="function")return z(_,w,I,Yl(G),he);if(G.$$typeof===ae)return z(_,w,I,Pl(w,G),he);Ql(w,G)}return null}function oe(_,w,I,G){for(var he=null,Ke=null,ce=w,_e=w=0,De=null;ce!==null&&_e<I.length;_e++){ce.index>_e?(De=ce,ce=null):De=ce.sibling;var Pe=x(_,ce,I[_e],G);if(Pe===null){ce===null&&(ce=De);break}e&&ce&&Pe.alternate===null&&t(_,ce),w=u(Pe,w,_e),Ke===null?he=Pe:Ke.sibling=Pe,Ke=Pe,ce=De}if(_e===I.length)return i(_,ce),He&&Ri(_,_e),he;if(ce===null){for(;_e<I.length;_e++)ce=V(_,I[_e],G),ce!==null&&(w=u(ce,w,_e),Ke===null?he=ce:Ke.sibling=ce,Ke=ce);return He&&Ri(_,_e),he}for(ce=s(ce);_e<I.length;_e++)De=z(ce,_,_e,I[_e],G),De!==null&&(e&&De.alternate!==null&&ce.delete(De.key===null?_e:De.key),w=u(De,w,_e),Ke===null?he=De:Ke.sibling=De,Ke=De);return e&&ce.forEach(function(Ea){return t(_,Ea)}),He&&Ri(_,_e),he}function ge(_,w,I,G){if(I==null)throw Error(o(151));for(var he=null,Ke=null,ce=w,_e=w=0,De=null,Pe=I.next();ce!==null&&!Pe.done;_e++,Pe=I.next()){ce.index>_e?(De=ce,ce=null):De=ce.sibling;var Ea=x(_,ce,Pe.value,G);if(Ea===null){ce===null&&(ce=De);break}e&&ce&&Ea.alternate===null&&t(_,ce),w=u(Ea,w,_e),Ke===null?he=Ea:Ke.sibling=Ea,Ke=Ea,ce=De}if(Pe.done)return i(_,ce),He&&Ri(_,_e),he;if(ce===null){for(;!Pe.done;_e++,Pe=I.next())Pe=V(_,Pe.value,G),Pe!==null&&(w=u(Pe,w,_e),Ke===null?he=Pe:Ke.sibling=Pe,Ke=Pe);return He&&Ri(_,_e),he}for(ce=s(ce);!Pe.done;_e++,Pe=I.next())Pe=z(ce,_,_e,Pe.value,G),Pe!==null&&(e&&Pe.alternate!==null&&ce.delete(Pe.key===null?_e:Pe.key),w=u(Pe,w,_e),Ke===null?he=Pe:Ke.sibling=Pe,Ke=Pe);return e&&ce.forEach(function(cE){return t(_,cE)}),He&&Ri(_,_e),he}function $e(_,w,I,G){if(typeof I=="object"&&I!==null&&I.type===J&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case M:e:{for(var he=I.key;w!==null;){if(w.key===he){if(he=I.type,he===J){if(w.tag===7){i(_,w.sibling),G=c(w,I.props.children),G.return=_,_=G;break e}}else if(w.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===Ae&&rs(he)===w.type){i(_,w.sibling),G=c(w,I.props),vr(G,I),G.return=_,_=G;break e}i(_,w);break}else t(_,w);w=w.sibling}I.type===J?(G=ns(I.props.children,_.mode,G,I.key),G.return=_,_=G):(G=Ll(I.type,I.key,I.props,null,_.mode,G),vr(G,I),G.return=_,_=G)}return g(_);case F:e:{for(he=I.key;w!==null;){if(w.key===he)if(w.tag===4&&w.stateNode.containerInfo===I.containerInfo&&w.stateNode.implementation===I.implementation){i(_,w.sibling),G=c(w,I.children||[]),G.return=_,_=G;break e}else{i(_,w);break}else t(_,w);w=w.sibling}G=nd(I,_.mode,G),G.return=_,_=G}return g(_);case Ae:return I=rs(I),$e(_,w,I,G)}if(fe(I))return oe(_,w,I,G);if(Ue(I)){if(he=Ue(I),typeof he!="function")throw Error(o(150));return I=he.call(I),ge(_,w,I,G)}if(typeof I.then=="function")return $e(_,w,Yl(I),G);if(I.$$typeof===ae)return $e(_,w,Pl(_,I),G);Ql(_,I)}return typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint"?(I=""+I,w!==null&&w.tag===6?(i(_,w.sibling),G=c(w,I),G.return=_,_=G):(i(_,w),G=td(I,_.mode,G),G.return=_,_=G),g(_)):i(_,w)}return function(_,w,I,G){try{yr=0;var he=$e(_,w,I,G);return no=null,he}catch(ce){if(ce===to||ce===Vl)throw ce;var Ke=En(29,ce,null,_.mode);return Ke.lanes=G,Ke.return=_,Ke}}}var cs=am(!0),sm=am(!1),sa=!1;function gd(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function md(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function oa(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ra(e,t,i){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,(Ve&2)!==0){var c=s.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),s.pending=t,t=zl(e),Pg(e,null,i),t}return Hl(e,s,t,i),zl(e)}function Cr(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194048)!==0)){var s=t.lanes;s&=e.pendingLanes,i|=s,t.lanes=i,pl(e,i)}}function pd(e,t){var i=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,i===s)){var c=null,u=null;if(i=i.firstBaseUpdate,i!==null){do{var g={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};u===null?c=u=g:u=u.next=g,i=i.next}while(i!==null);u===null?c=u=t:u=u.next=t}else c=u=t;i={baseState:s.baseState,firstBaseUpdate:c,lastBaseUpdate:u,shared:s.shared,callbacks:s.callbacks},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}var yd=!1;function Sr(){if(yd){var e=eo;if(e!==null)throw e}}function Tr(e,t,i,s){yd=!1;var c=e.updateQueue;sa=!1;var u=c.firstBaseUpdate,g=c.lastBaseUpdate,C=c.shared.pending;if(C!==null){c.shared.pending=null;var b=C,N=b.next;b.next=null,g===null?u=N:g.next=N,g=b;var K=e.alternate;K!==null&&(K=K.updateQueue,C=K.lastBaseUpdate,C!==g&&(C===null?K.firstBaseUpdate=N:C.next=N,K.lastBaseUpdate=b))}if(u!==null){var V=c.baseState;g=0,K=N=b=null,C=u;do{var x=C.lane&-536870913,z=x!==C.lane;if(z?(xe&x)===x:(s&x)===x){x!==0&&x===Ws&&(yd=!0),K!==null&&(K=K.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});e:{var oe=e,ge=C;x=t;var $e=i;switch(ge.tag){case 1:if(oe=ge.payload,typeof oe=="function"){V=oe.call($e,V,x);break e}V=oe;break e;case 3:oe.flags=oe.flags&-65537|128;case 0:if(oe=ge.payload,x=typeof oe=="function"?oe.call($e,V,x):oe,x==null)break e;V=T({},V,x);break e;case 2:sa=!0}}x=C.callback,x!==null&&(e.flags|=64,z&&(e.flags|=8192),z=c.callbacks,z===null?c.callbacks=[x]:z.push(x))}else z={lane:x,tag:C.tag,payload:C.payload,callback:C.callback,next:null},K===null?(N=K=z,b=V):K=K.next=z,g|=x;if(C=C.next,C===null){if(C=c.shared.pending,C===null)break;z=C,C=z.next,z.next=null,c.lastBaseUpdate=z,c.shared.pending=null}}while(!0);K===null&&(b=V),c.baseState=b,c.firstBaseUpdate=N,c.lastBaseUpdate=K,u===null&&(c.shared.lanes=0),ha|=g,e.lanes=g,e.memoizedState=V}}function om(e,t){if(typeof e!="function")throw Error(o(191,e));e.call(t)}function rm(e,t){var i=e.callbacks;if(i!==null)for(e.callbacks=null,e=0;e<i.length;e++)om(i[e],t)}var io=A(null),ql=A(0);function lm(e,t){e=Ki,Q(ql,e),Q(io,t),Ki=e|t.baseLanes}function vd(){Q(ql,Ki),Q(io,io.current)}function Cd(){Ki=ql.current,R(io),R(ql)}var An=A(null),Hn=null;function la(e){var t=e.alternate;Q(gt,gt.current&1),Q(An,e),Hn===null&&(t===null||io.current!==null||t.memoizedState!==null)&&(Hn=e)}function Sd(e){Q(gt,gt.current),Q(An,e),Hn===null&&(Hn=e)}function cm(e){e.tag===22?(Q(gt,gt.current),Q(An,e),Hn===null&&(Hn=e)):ca()}function ca(){Q(gt,gt.current),Q(An,An.current)}function bn(e){R(An),Hn===e&&(Hn=null),R(gt)}var gt=A(0);function Jl(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||_h(i)||kh(i)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var xi=0,we=null,Xe=null,St=null,Xl=!1,ao=!1,us=!1,Zl=0,Er=0,so=null,WS=0;function dt(){throw Error(o(321))}function Td(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!Tn(e[i],t[i]))return!1;return!0}function Ed(e,t,i,s,c,u){return xi=u,we=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,D.H=e===null||e.memoizedState===null?Ym:Hd,us=!1,u=i(s,c),us=!1,ao&&(u=dm(t,i,s,c)),um(e),u}function um(e){D.H=wr;var t=Xe!==null&&Xe.next!==null;if(xi=0,St=Xe=we=null,Xl=!1,Er=0,so=null,t)throw Error(o(300));e===null||Tt||(e=e.dependencies,e!==null&&Kl(e)&&(Tt=!0))}function dm(e,t,i,s){we=e;var c=0;do{if(ao&&(so=null),Er=0,ao=!1,25<=c)throw Error(o(301));if(c+=1,St=Xe=null,e.updateQueue!=null){var u=e.updateQueue;u.lastEffect=null,u.events=null,u.stores=null,u.memoCache!=null&&(u.memoCache.index=0)}D.H=Qm,u=t(i,s)}while(ao);return u}function eT(){var e=D.H,t=e.useState()[0];return t=typeof t.then=="function"?Ar(t):t,e=e.useState()[0],(Xe!==null?Xe.memoizedState:null)!==e&&(we.flags|=1024),t}function Ad(){var e=Zl!==0;return Zl=0,e}function bd(e,t,i){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i}function wd(e){if(Xl){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Xl=!1}xi=0,St=Xe=we=null,ao=!1,Er=Zl=0,so=null}function Zt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return St===null?we.memoizedState=St=e:St=St.next=e,St}function mt(){if(Xe===null){var e=we.alternate;e=e!==null?e.memoizedState:null}else e=Xe.next;var t=St===null?we.memoizedState:St.next;if(t!==null)St=t,Xe=e;else{if(e===null)throw we.alternate===null?Error(o(467)):Error(o(310));Xe=e,e={memoizedState:Xe.memoizedState,baseState:Xe.baseState,baseQueue:Xe.baseQueue,queue:Xe.queue,next:null},St===null?we.memoizedState=St=e:St=St.next=e}return St}function $l(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ar(e){var t=Er;return Er+=1,so===null&&(so=[]),e=tm(so,e,t),t=we,(St===null?t.memoizedState:St.next)===null&&(t=t.alternate,D.H=t===null||t.memoizedState===null?Ym:Hd),e}function Wl(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Ar(e);if(e.$$typeof===ae)return zt(e)}throw Error(o(438,String(e)))}function _d(e){var t=null,i=we.updateQueue;if(i!==null&&(t=i.memoCache),t==null){var s=we.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(t={data:s.data.map(function(c){return c.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),i===null&&(i=$l(),we.updateQueue=i),i.memoCache=t,i=t.data[t.index],i===void 0)for(i=t.data[t.index]=Array(e),s=0;s<e;s++)i[s]=Ye;return t.index++,i}function Di(e,t){return typeof t=="function"?t(e):t}function ec(e){var t=mt();return kd(t,Xe,e)}function kd(e,t,i){var s=e.queue;if(s===null)throw Error(o(311));s.lastRenderedReducer=i;var c=e.baseQueue,u=s.pending;if(u!==null){if(c!==null){var g=c.next;c.next=u.next,u.next=g}t.baseQueue=c=u,s.pending=null}if(u=e.baseState,c===null)e.memoizedState=u;else{t=c.next;var C=g=null,b=null,N=t,K=!1;do{var V=N.lane&-536870913;if(V!==N.lane?(xe&V)===V:(xi&V)===V){var x=N.revertLane;if(x===0)b!==null&&(b=b.next={lane:0,revertLane:0,gesture:null,action:N.action,hasEagerState:N.hasEagerState,eagerState:N.eagerState,next:null}),V===Ws&&(K=!0);else if((xi&x)===x){N=N.next,x===Ws&&(K=!0);continue}else V={lane:0,revertLane:N.revertLane,gesture:null,action:N.action,hasEagerState:N.hasEagerState,eagerState:N.eagerState,next:null},b===null?(C=b=V,g=u):b=b.next=V,we.lanes|=x,ha|=x;V=N.action,us&&i(u,V),u=N.hasEagerState?N.eagerState:i(u,V)}else x={lane:V,revertLane:N.revertLane,gesture:N.gesture,action:N.action,hasEagerState:N.hasEagerState,eagerState:N.eagerState,next:null},b===null?(C=b=x,g=u):b=b.next=x,we.lanes|=V,ha|=V;N=N.next}while(N!==null&&N!==t);if(b===null?g=u:b.next=C,!Tn(u,e.memoizedState)&&(Tt=!0,K&&(i=eo,i!==null)))throw i;e.memoizedState=u,e.baseState=g,e.baseQueue=b,s.lastRenderedState=u}return c===null&&(s.lanes=0),[e.memoizedState,s.dispatch]}function Od(e){var t=mt(),i=t.queue;if(i===null)throw Error(o(311));i.lastRenderedReducer=e;var s=i.dispatch,c=i.pending,u=t.memoizedState;if(c!==null){i.pending=null;var g=c=c.next;do u=e(u,g.action),g=g.next;while(g!==c);Tn(u,t.memoizedState)||(Tt=!0),t.memoizedState=u,t.baseQueue===null&&(t.baseState=u),i.lastRenderedState=u}return[u,s]}function hm(e,t,i){var s=we,c=mt(),u=He;if(u){if(i===void 0)throw Error(o(407));i=i()}else i=t();var g=!Tn((Xe||c).memoizedState,i);if(g&&(c.memoizedState=i,Tt=!0),c=c.queue,Nd(mm.bind(null,s,c,e),[e]),c.getSnapshot!==t||g||St!==null&&St.memoizedState.tag&1){if(s.flags|=2048,oo(9,{destroy:void 0},gm.bind(null,s,c,i,t),null),We===null)throw Error(o(349));u||(xi&127)!==0||fm(s,t,i)}return i}function fm(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=we.updateQueue,t===null?(t=$l(),we.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function gm(e,t,i,s){t.value=i,t.getSnapshot=s,pm(t)&&ym(e)}function mm(e,t,i){return i(function(){pm(t)&&ym(e)})}function pm(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!Tn(e,i)}catch{return!0}}function ym(e){var t=ts(e,2);t!==null&&rn(t,e,2)}function Id(e){var t=Zt();if(typeof e=="function"){var i=e;if(e=i(),us){In(!0);try{i()}finally{In(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Di,lastRenderedState:e},t}function vm(e,t,i,s){return e.baseState=i,kd(e,Xe,typeof s=="function"?s:Di)}function tT(e,t,i,s,c){if(ic(e))throw Error(o(485));if(e=t.action,e!==null){var u={payload:c,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(g){u.listeners.push(g)}};D.T!==null?i(!0):u.isTransition=!1,s(u),i=t.pending,i===null?(u.next=t.pending=u,Cm(t,u)):(u.next=i.next,t.pending=i.next=u)}}function Cm(e,t){var i=t.action,s=t.payload,c=e.state;if(t.isTransition){var u=D.T,g={};D.T=g;try{var C=i(c,s),b=D.S;b!==null&&b(g,C),Sm(e,t,C)}catch(N){Rd(e,t,N)}finally{u!==null&&g.types!==null&&(u.types=g.types),D.T=u}}else try{u=i(c,s),Sm(e,t,u)}catch(N){Rd(e,t,N)}}function Sm(e,t,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(s){Tm(e,t,s)},function(s){return Rd(e,t,s)}):Tm(e,t,i)}function Tm(e,t,i){t.status="fulfilled",t.value=i,Em(t),e.state=i,t=e.pending,t!==null&&(i=t.next,i===t?e.pending=null:(i=i.next,t.next=i,Cm(e,i)))}function Rd(e,t,i){var s=e.pending;if(e.pending=null,s!==null){s=s.next;do t.status="rejected",t.reason=i,Em(t),t=t.next;while(t!==s)}e.action=null}function Em(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Am(e,t){return t}function bm(e,t){if(He){var i=We.formState;if(i!==null){e:{var s=we;if(He){if(at){t:{for(var c=at,u=jn;c.nodeType!==8;){if(!u){c=null;break t}if(c=zn(c.nextSibling),c===null){c=null;break t}}u=c.data,c=u==="F!"||u==="F"?c:null}if(c){at=zn(c.nextSibling),s=c.data==="F!";break e}}ia(s)}s=!1}s&&(t=i[0])}}return i=Zt(),i.memoizedState=i.baseState=t,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Am,lastRenderedState:t},i.queue=s,i=Gm.bind(null,we,s),s.dispatch=i,s=Id(!1),u=jd.bind(null,we,!1,s.queue),s=Zt(),c={state:t,dispatch:null,action:e,pending:null},s.queue=c,i=tT.bind(null,we,c,u,i),c.dispatch=i,s.memoizedState=e,[t,i,!1]}function wm(e){var t=mt();return _m(t,Xe,e)}function _m(e,t,i){if(t=kd(e,t,Am)[0],e=ec(Di)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var s=Ar(t)}catch(g){throw g===to?Vl:g}else s=t;t=mt();var c=t.queue,u=c.dispatch;return i!==t.memoizedState&&(we.flags|=2048,oo(9,{destroy:void 0},nT.bind(null,c,i),null)),[s,u,e]}function nT(e,t){e.action=t}function km(e){var t=mt(),i=Xe;if(i!==null)return _m(t,i,e);mt(),t=t.memoizedState,i=mt();var s=i.queue.dispatch;return i.memoizedState=e,[t,s,!1]}function oo(e,t,i,s){return e={tag:e,create:i,deps:s,inst:t,next:null},t=we.updateQueue,t===null&&(t=$l(),we.updateQueue=t),i=t.lastEffect,i===null?t.lastEffect=e.next=e:(s=i.next,i.next=e,e.next=s,t.lastEffect=e),e}function Om(){return mt().memoizedState}function tc(e,t,i,s){var c=Zt();we.flags|=e,c.memoizedState=oo(1|t,{destroy:void 0},i,s===void 0?null:s)}function nc(e,t,i,s){var c=mt();s=s===void 0?null:s;var u=c.memoizedState.inst;Xe!==null&&s!==null&&Td(s,Xe.memoizedState.deps)?c.memoizedState=oo(t,u,i,s):(we.flags|=e,c.memoizedState=oo(1|t,u,i,s))}function Im(e,t){tc(8390656,8,e,t)}function Nd(e,t){nc(2048,8,e,t)}function iT(e){we.flags|=4;var t=we.updateQueue;if(t===null)t=$l(),we.updateQueue=t,t.events=[e];else{var i=t.events;i===null?t.events=[e]:i.push(e)}}function Rm(e){var t=mt().memoizedState;return iT({ref:t,nextImpl:e}),function(){if((Ve&2)!==0)throw Error(o(440));return t.impl.apply(void 0,arguments)}}function Nm(e,t){return nc(4,2,e,t)}function Mm(e,t){return nc(4,4,e,t)}function xm(e,t){if(typeof t=="function"){e=e();var i=t(e);return function(){typeof i=="function"?i():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Dm(e,t,i){i=i!=null?i.concat([e]):null,nc(4,4,xm.bind(null,t,e),i)}function Md(){}function Um(e,t){var i=mt();t=t===void 0?null:t;var s=i.memoizedState;return t!==null&&Td(t,s[1])?s[0]:(i.memoizedState=[e,t],e)}function jm(e,t){var i=mt();t=t===void 0?null:t;var s=i.memoizedState;if(t!==null&&Td(t,s[1]))return s[0];if(s=e(),us){In(!0);try{e()}finally{In(!1)}}return i.memoizedState=[s,t],s}function xd(e,t,i){return i===void 0||(xi&1073741824)!==0&&(xe&261930)===0?e.memoizedState=t:(e.memoizedState=i,e=Hp(),we.lanes|=e,ha|=e,i)}function Hm(e,t,i,s){return Tn(i,t)?i:io.current!==null?(e=xd(e,i,s),Tn(e,t)||(Tt=!0),e):(xi&42)===0||(xi&1073741824)!==0&&(xe&261930)===0?(Tt=!0,e.memoizedState=i):(e=Hp(),we.lanes|=e,ha|=e,t)}function zm(e,t,i,s,c){var u=Y.p;Y.p=u!==0&&8>u?u:8;var g=D.T,C={};D.T=C,jd(e,!1,t,i);try{var b=c(),N=D.S;if(N!==null&&N(C,b),b!==null&&typeof b=="object"&&typeof b.then=="function"){var K=$S(b,s);br(e,t,K,kn(e))}else br(e,t,s,kn(e))}catch(V){br(e,t,{then:function(){},status:"rejected",reason:V},kn())}finally{Y.p=u,g!==null&&C.types!==null&&(g.types=C.types),D.T=g}}function aT(){}function Dd(e,t,i,s){if(e.tag!==5)throw Error(o(476));var c=Lm(e).queue;zm(e,c,t,te,i===null?aT:function(){return Bm(e),i(s)})}function Lm(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:te,baseState:te,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Di,lastRenderedState:te},next:null};var i={};return t.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Di,lastRenderedState:i},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Bm(e){var t=Lm(e);t.next===null&&(t=e.alternate.memoizedState),br(e,t.next.queue,{},kn())}function Ud(){return zt(Kr)}function Km(){return mt().memoizedState}function Pm(){return mt().memoizedState}function sT(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var i=kn();e=oa(i);var s=ra(t,e,i);s!==null&&(rn(s,t,i),Cr(s,t,i)),t={cache:ud()},e.payload=t;return}t=t.return}}function oT(e,t,i){var s=kn();i={lane:s,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},ic(e)?Vm(t,i):(i=Wu(e,t,i,s),i!==null&&(rn(i,e,s),Fm(i,t,s)))}function Gm(e,t,i){var s=kn();br(e,t,i,s)}function br(e,t,i,s){var c={lane:s,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null};if(ic(e))Vm(t,c);else{var u=e.alternate;if(e.lanes===0&&(u===null||u.lanes===0)&&(u=t.lastRenderedReducer,u!==null))try{var g=t.lastRenderedState,C=u(g,i);if(c.hasEagerState=!0,c.eagerState=C,Tn(C,g))return Hl(e,t,c,0),We===null&&jl(),!1}catch{}if(i=Wu(e,t,c,s),i!==null)return rn(i,e,s),Fm(i,t,s),!0}return!1}function jd(e,t,i,s){if(s={lane:2,revertLane:gh(),gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},ic(e)){if(t)throw Error(o(479))}else t=Wu(e,i,s,2),t!==null&&rn(t,e,2)}function ic(e){var t=e.alternate;return e===we||t!==null&&t===we}function Vm(e,t){ao=Xl=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function Fm(e,t,i){if((i&4194048)!==0){var s=t.lanes;s&=e.pendingLanes,i|=s,t.lanes=i,pl(e,i)}}var wr={readContext:zt,use:Wl,useCallback:dt,useContext:dt,useEffect:dt,useImperativeHandle:dt,useLayoutEffect:dt,useInsertionEffect:dt,useMemo:dt,useReducer:dt,useRef:dt,useState:dt,useDebugValue:dt,useDeferredValue:dt,useTransition:dt,useSyncExternalStore:dt,useId:dt,useHostTransitionStatus:dt,useFormState:dt,useActionState:dt,useOptimistic:dt,useMemoCache:dt,useCacheRefresh:dt};wr.useEffectEvent=dt;var Ym={readContext:zt,use:Wl,useCallback:function(e,t){return Zt().memoizedState=[e,t===void 0?null:t],e},useContext:zt,useEffect:Im,useImperativeHandle:function(e,t,i){i=i!=null?i.concat([e]):null,tc(4194308,4,xm.bind(null,t,e),i)},useLayoutEffect:function(e,t){return tc(4194308,4,e,t)},useInsertionEffect:function(e,t){tc(4,2,e,t)},useMemo:function(e,t){var i=Zt();t=t===void 0?null:t;var s=e();if(us){In(!0);try{e()}finally{In(!1)}}return i.memoizedState=[s,t],s},useReducer:function(e,t,i){var s=Zt();if(i!==void 0){var c=i(t);if(us){In(!0);try{i(t)}finally{In(!1)}}}else c=t;return s.memoizedState=s.baseState=c,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:c},s.queue=e,e=e.dispatch=oT.bind(null,we,e),[s.memoizedState,e]},useRef:function(e){var t=Zt();return e={current:e},t.memoizedState=e},useState:function(e){e=Id(e);var t=e.queue,i=Gm.bind(null,we,t);return t.dispatch=i,[e.memoizedState,i]},useDebugValue:Md,useDeferredValue:function(e,t){var i=Zt();return xd(i,e,t)},useTransition:function(){var e=Id(!1);return e=zm.bind(null,we,e.queue,!0,!1),Zt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,i){var s=we,c=Zt();if(He){if(i===void 0)throw Error(o(407));i=i()}else{if(i=t(),We===null)throw Error(o(349));(xe&127)!==0||fm(s,t,i)}c.memoizedState=i;var u={value:i,getSnapshot:t};return c.queue=u,Im(mm.bind(null,s,u,e),[e]),s.flags|=2048,oo(9,{destroy:void 0},gm.bind(null,s,u,i,t),null),i},useId:function(){var e=Zt(),t=We.identifierPrefix;if(He){var i=di,s=ui;i=(s&~(1<<32-Qt(s)-1)).toString(32)+i,t="_"+t+"R_"+i,i=Zl++,0<i&&(t+="H"+i.toString(32)),t+="_"}else i=WS++,t="_"+t+"r_"+i.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Ud,useFormState:bm,useActionState:bm,useOptimistic:function(e){var t=Zt();t.memoizedState=t.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=i,t=jd.bind(null,we,!0,i),i.dispatch=t,[e,t]},useMemoCache:_d,useCacheRefresh:function(){return Zt().memoizedState=sT.bind(null,we)},useEffectEvent:function(e){var t=Zt(),i={impl:e};return t.memoizedState=i,function(){if((Ve&2)!==0)throw Error(o(440));return i.impl.apply(void 0,arguments)}}},Hd={readContext:zt,use:Wl,useCallback:Um,useContext:zt,useEffect:Nd,useImperativeHandle:Dm,useInsertionEffect:Nm,useLayoutEffect:Mm,useMemo:jm,useReducer:ec,useRef:Om,useState:function(){return ec(Di)},useDebugValue:Md,useDeferredValue:function(e,t){var i=mt();return Hm(i,Xe.memoizedState,e,t)},useTransition:function(){var e=ec(Di)[0],t=mt().memoizedState;return[typeof e=="boolean"?e:Ar(e),t]},useSyncExternalStore:hm,useId:Km,useHostTransitionStatus:Ud,useFormState:wm,useActionState:wm,useOptimistic:function(e,t){var i=mt();return vm(i,Xe,e,t)},useMemoCache:_d,useCacheRefresh:Pm};Hd.useEffectEvent=Rm;var Qm={readContext:zt,use:Wl,useCallback:Um,useContext:zt,useEffect:Nd,useImperativeHandle:Dm,useInsertionEffect:Nm,useLayoutEffect:Mm,useMemo:jm,useReducer:Od,useRef:Om,useState:function(){return Od(Di)},useDebugValue:Md,useDeferredValue:function(e,t){var i=mt();return Xe===null?xd(i,e,t):Hm(i,Xe.memoizedState,e,t)},useTransition:function(){var e=Od(Di)[0],t=mt().memoizedState;return[typeof e=="boolean"?e:Ar(e),t]},useSyncExternalStore:hm,useId:Km,useHostTransitionStatus:Ud,useFormState:km,useActionState:km,useOptimistic:function(e,t){var i=mt();return Xe!==null?vm(i,Xe,e,t):(i.baseState=e,[e,i.queue.dispatch])},useMemoCache:_d,useCacheRefresh:Pm};Qm.useEffectEvent=Rm;function zd(e,t,i,s){t=e.memoizedState,i=i(s,t),i=i==null?t:T({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var Ld={enqueueSetState:function(e,t,i){e=e._reactInternals;var s=kn(),c=oa(s);c.payload=t,i!=null&&(c.callback=i),t=ra(e,c,s),t!==null&&(rn(t,e,s),Cr(t,e,s))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var s=kn(),c=oa(s);c.tag=1,c.payload=t,i!=null&&(c.callback=i),t=ra(e,c,s),t!==null&&(rn(t,e,s),Cr(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=kn(),s=oa(i);s.tag=2,t!=null&&(s.callback=t),t=ra(e,s,i),t!==null&&(rn(t,e,i),Cr(t,e,i))}};function qm(e,t,i,s,c,u,g){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,u,g):t.prototype&&t.prototype.isPureReactComponent?!dr(i,s)||!dr(c,u):!0}function Jm(e,t,i,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,s),t.state!==e&&Ld.enqueueReplaceState(t,t.state,null)}function ds(e,t){var i=t;if("ref"in t){i={};for(var s in t)s!=="ref"&&(i[s]=t[s])}if(e=e.defaultProps){i===t&&(i=T({},i));for(var c in e)i[c]===void 0&&(i[c]=e[c])}return i}function Xm(e){Ul(e)}function Zm(e){console.error(e)}function $m(e){Ul(e)}function ac(e,t){try{var i=e.onUncaughtError;i(t.value,{componentStack:t.stack})}catch(s){setTimeout(function(){throw s})}}function Wm(e,t,i){try{var s=e.onCaughtError;s(i.value,{componentStack:i.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function Bd(e,t,i){return i=oa(i),i.tag=3,i.payload={element:null},i.callback=function(){ac(e,t)},i}function ep(e){return e=oa(e),e.tag=3,e}function tp(e,t,i,s){var c=i.type.getDerivedStateFromError;if(typeof c=="function"){var u=s.value;e.payload=function(){return c(u)},e.callback=function(){Wm(t,i,s)}}var g=i.stateNode;g!==null&&typeof g.componentDidCatch=="function"&&(e.callback=function(){Wm(t,i,s),typeof c!="function"&&(fa===null?fa=new Set([this]):fa.add(this));var C=s.stack;this.componentDidCatch(s.value,{componentStack:C!==null?C:""})})}function rT(e,t,i,s,c){if(i.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(t=i.alternate,t!==null&&$s(t,i,c,!0),i=An.current,i!==null){switch(i.tag){case 31:case 13:return Hn===null?pc():i.alternate===null&&ht===0&&(ht=3),i.flags&=-257,i.flags|=65536,i.lanes=c,s===Fl?i.flags|=16384:(t=i.updateQueue,t===null?i.updateQueue=new Set([s]):t.add(s),dh(e,s,c)),!1;case 22:return i.flags|=65536,s===Fl?i.flags|=16384:(t=i.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([s])},i.updateQueue=t):(i=t.retryQueue,i===null?t.retryQueue=new Set([s]):i.add(s)),dh(e,s,c)),!1}throw Error(o(435,i.tag))}return dh(e,s,c),pc(),!1}if(He)return t=An.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=c,s!==sd&&(e=Error(o(422),{cause:s}),gr(xn(e,i)))):(s!==sd&&(t=Error(o(423),{cause:s}),gr(xn(t,i))),e=e.current.alternate,e.flags|=65536,c&=-c,e.lanes|=c,s=xn(s,i),c=Bd(e.stateNode,s,c),pd(e,c),ht!==4&&(ht=2)),!1;var u=Error(o(520),{cause:s});if(u=xn(u,i),xr===null?xr=[u]:xr.push(u),ht!==4&&(ht=2),t===null)return!0;s=xn(s,i),i=t;do{switch(i.tag){case 3:return i.flags|=65536,e=c&-c,i.lanes|=e,e=Bd(i.stateNode,s,e),pd(i,e),!1;case 1:if(t=i.type,u=i.stateNode,(i.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||u!==null&&typeof u.componentDidCatch=="function"&&(fa===null||!fa.has(u))))return i.flags|=65536,c&=-c,i.lanes|=c,c=ep(c),tp(c,e,i,s),pd(i,c),!1}i=i.return}while(i!==null);return!1}var Kd=Error(o(461)),Tt=!1;function Lt(e,t,i,s){t.child=e===null?sm(t,null,i,s):cs(t,e.child,i,s)}function np(e,t,i,s,c){i=i.render;var u=t.ref;if("ref"in s){var g={};for(var C in s)C!=="ref"&&(g[C]=s[C])}else g=s;return ss(t),s=Ed(e,t,i,g,u,c),C=Ad(),e!==null&&!Tt?(bd(e,t,c),Ui(e,t,c)):(He&&C&&id(t),t.flags|=1,Lt(e,t,s,c),t.child)}function ip(e,t,i,s,c){if(e===null){var u=i.type;return typeof u=="function"&&!ed(u)&&u.defaultProps===void 0&&i.compare===null?(t.tag=15,t.type=u,ap(e,t,u,s,c)):(e=Ll(i.type,null,s,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(u=e.child,!Jd(e,c)){var g=u.memoizedProps;if(i=i.compare,i=i!==null?i:dr,i(g,s)&&e.ref===t.ref)return Ui(e,t,c)}return t.flags|=1,e=Ii(u,s),e.ref=t.ref,e.return=t,t.child=e}function ap(e,t,i,s,c){if(e!==null){var u=e.memoizedProps;if(dr(u,s)&&e.ref===t.ref)if(Tt=!1,t.pendingProps=s=u,Jd(e,c))(e.flags&131072)!==0&&(Tt=!0);else return t.lanes=e.lanes,Ui(e,t,c)}return Pd(e,t,i,s,c)}function sp(e,t,i,s){var c=s.children,u=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.mode==="hidden"){if((t.flags&128)!==0){if(u=u!==null?u.baseLanes|i:i,e!==null){for(s=t.child=e.child,c=0;s!==null;)c=c|s.lanes|s.childLanes,s=s.sibling;s=c&~u}else s=0,t.child=null;return op(e,t,u,i,s)}if((i&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Gl(t,u!==null?u.cachePool:null),u!==null?lm(t,u):vd(),cm(t);else return s=t.lanes=536870912,op(e,t,u!==null?u.baseLanes|i:i,i,s)}else u!==null?(Gl(t,u.cachePool),lm(t,u),ca(),t.memoizedState=null):(e!==null&&Gl(t,null),vd(),ca());return Lt(e,t,c,i),t.child}function _r(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function op(e,t,i,s,c){var u=hd();return u=u===null?null:{parent:Ct._currentValue,pool:u},t.memoizedState={baseLanes:i,cachePool:u},e!==null&&Gl(t,null),vd(),cm(t),e!==null&&$s(e,t,s,!0),t.childLanes=c,null}function sc(e,t){return t=rc({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function rp(e,t,i){return cs(t,e.child,null,i),e=sc(t,t.pendingProps),e.flags|=2,bn(t),t.memoizedState=null,e}function lT(e,t,i){var s=t.pendingProps,c=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(He){if(s.mode==="hidden")return e=sc(t,s),t.lanes=536870912,_r(null,e);if(Sd(t),(e=at)?(e=Cy(e,jn),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:ta!==null?{id:ui,overflow:di}:null,retryLane:536870912,hydrationErrors:null},i=Vg(e),i.return=t,t.child=i,Ht=t,at=null)):e=null,e===null)throw ia(t);return t.lanes=536870912,null}return sc(t,s)}var u=e.memoizedState;if(u!==null){var g=u.dehydrated;if(Sd(t),c)if(t.flags&256)t.flags&=-257,t=rp(e,t,i);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(o(558));else if(Tt||$s(e,t,i,!1),c=(i&e.childLanes)!==0,Tt||c){if(s=We,s!==null&&(g=Pa(s,i),g!==0&&g!==u.retryLane))throw u.retryLane=g,ts(e,g),rn(s,e,g),Kd;pc(),t=rp(e,t,i)}else e=u.treeContext,at=zn(g.nextSibling),Ht=t,He=!0,na=null,jn=!1,e!==null&&Qg(t,e),t=sc(t,s),t.flags|=4096;return t}return e=Ii(e.child,{mode:s.mode,children:s.children}),e.ref=t.ref,t.child=e,e.return=t,e}function oc(e,t){var i=t.ref;if(i===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(o(284));(e===null||e.ref!==i)&&(t.flags|=4194816)}}function Pd(e,t,i,s,c){return ss(t),i=Ed(e,t,i,s,void 0,c),s=Ad(),e!==null&&!Tt?(bd(e,t,c),Ui(e,t,c)):(He&&s&&id(t),t.flags|=1,Lt(e,t,i,c),t.child)}function lp(e,t,i,s,c,u){return ss(t),t.updateQueue=null,i=dm(t,s,i,c),um(e),s=Ad(),e!==null&&!Tt?(bd(e,t,u),Ui(e,t,u)):(He&&s&&id(t),t.flags|=1,Lt(e,t,i,u),t.child)}function cp(e,t,i,s,c){if(ss(t),t.stateNode===null){var u=qs,g=i.contextType;typeof g=="object"&&g!==null&&(u=zt(g)),u=new i(s,u),t.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=Ld,t.stateNode=u,u._reactInternals=t,u=t.stateNode,u.props=s,u.state=t.memoizedState,u.refs={},gd(t),g=i.contextType,u.context=typeof g=="object"&&g!==null?zt(g):qs,u.state=t.memoizedState,g=i.getDerivedStateFromProps,typeof g=="function"&&(zd(t,i,g,s),u.state=t.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(g=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),g!==u.state&&Ld.enqueueReplaceState(u,u.state,null),Tr(t,s,u,c),Sr(),u.state=t.memoizedState),typeof u.componentDidMount=="function"&&(t.flags|=4194308),s=!0}else if(e===null){u=t.stateNode;var C=t.memoizedProps,b=ds(i,C);u.props=b;var N=u.context,K=i.contextType;g=qs,typeof K=="object"&&K!==null&&(g=zt(K));var V=i.getDerivedStateFromProps;K=typeof V=="function"||typeof u.getSnapshotBeforeUpdate=="function",C=t.pendingProps!==C,K||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(C||N!==g)&&Jm(t,u,s,g),sa=!1;var x=t.memoizedState;u.state=x,Tr(t,s,u,c),Sr(),N=t.memoizedState,C||x!==N||sa?(typeof V=="function"&&(zd(t,i,V,s),N=t.memoizedState),(b=sa||qm(t,i,b,s,x,N,g))?(K||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(t.flags|=4194308)):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=N),u.props=s,u.state=N,u.context=g,s=b):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{u=t.stateNode,md(e,t),g=t.memoizedProps,K=ds(i,g),u.props=K,V=t.pendingProps,x=u.context,N=i.contextType,b=qs,typeof N=="object"&&N!==null&&(b=zt(N)),C=i.getDerivedStateFromProps,(N=typeof C=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(g!==V||x!==b)&&Jm(t,u,s,b),sa=!1,x=t.memoizedState,u.state=x,Tr(t,s,u,c),Sr();var z=t.memoizedState;g!==V||x!==z||sa||e!==null&&e.dependencies!==null&&Kl(e.dependencies)?(typeof C=="function"&&(zd(t,i,C,s),z=t.memoizedState),(K=sa||qm(t,i,K,s,x,z,b)||e!==null&&e.dependencies!==null&&Kl(e.dependencies))?(N||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(s,z,b),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(s,z,b)),typeof u.componentDidUpdate=="function"&&(t.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof u.componentDidUpdate!="function"||g===e.memoizedProps&&x===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&x===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=z),u.props=s,u.state=z,u.context=b,s=K):(typeof u.componentDidUpdate!="function"||g===e.memoizedProps&&x===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&x===e.memoizedState||(t.flags|=1024),s=!1)}return u=s,oc(e,t),s=(t.flags&128)!==0,u||s?(u=t.stateNode,i=s&&typeof i.getDerivedStateFromError!="function"?null:u.render(),t.flags|=1,e!==null&&s?(t.child=cs(t,e.child,null,c),t.child=cs(t,null,i,c)):Lt(e,t,i,c),t.memoizedState=u.state,e=t.child):e=Ui(e,t,c),e}function up(e,t,i,s){return is(),t.flags|=256,Lt(e,t,i,s),t.child}var Gd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Vd(e){return{baseLanes:e,cachePool:Wg()}}function Fd(e,t,i){return e=e!==null?e.childLanes&~i:0,t&&(e|=_n),e}function dp(e,t,i){var s=t.pendingProps,c=!1,u=(t.flags&128)!==0,g;if((g=u)||(g=e!==null&&e.memoizedState===null?!1:(gt.current&2)!==0),g&&(c=!0,t.flags&=-129),g=(t.flags&32)!==0,t.flags&=-33,e===null){if(He){if(c?la(t):ca(),(e=at)?(e=Cy(e,jn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:ta!==null?{id:ui,overflow:di}:null,retryLane:536870912,hydrationErrors:null},i=Vg(e),i.return=t,t.child=i,Ht=t,at=null)):e=null,e===null)throw ia(t);return kh(e)?t.lanes=32:t.lanes=536870912,null}var C=s.children;return s=s.fallback,c?(ca(),c=t.mode,C=rc({mode:"hidden",children:C},c),s=ns(s,c,i,null),C.return=t,s.return=t,C.sibling=s,t.child=C,s=t.child,s.memoizedState=Vd(i),s.childLanes=Fd(e,g,i),t.memoizedState=Gd,_r(null,s)):(la(t),Yd(t,C))}var b=e.memoizedState;if(b!==null&&(C=b.dehydrated,C!==null)){if(u)t.flags&256?(la(t),t.flags&=-257,t=Qd(e,t,i)):t.memoizedState!==null?(ca(),t.child=e.child,t.flags|=128,t=null):(ca(),C=s.fallback,c=t.mode,s=rc({mode:"visible",children:s.children},c),C=ns(C,c,i,null),C.flags|=2,s.return=t,C.return=t,s.sibling=C,t.child=s,cs(t,e.child,null,i),s=t.child,s.memoizedState=Vd(i),s.childLanes=Fd(e,g,i),t.memoizedState=Gd,t=_r(null,s));else if(la(t),kh(C)){if(g=C.nextSibling&&C.nextSibling.dataset,g)var N=g.dgst;g=N,s=Error(o(419)),s.stack="",s.digest=g,gr({value:s,source:null,stack:null}),t=Qd(e,t,i)}else if(Tt||$s(e,t,i,!1),g=(i&e.childLanes)!==0,Tt||g){if(g=We,g!==null&&(s=Pa(g,i),s!==0&&s!==b.retryLane))throw b.retryLane=s,ts(e,s),rn(g,e,s),Kd;_h(C)||pc(),t=Qd(e,t,i)}else _h(C)?(t.flags|=192,t.child=e.child,t=null):(e=b.treeContext,at=zn(C.nextSibling),Ht=t,He=!0,na=null,jn=!1,e!==null&&Qg(t,e),t=Yd(t,s.children),t.flags|=4096);return t}return c?(ca(),C=s.fallback,c=t.mode,b=e.child,N=b.sibling,s=Ii(b,{mode:"hidden",children:s.children}),s.subtreeFlags=b.subtreeFlags&65011712,N!==null?C=Ii(N,C):(C=ns(C,c,i,null),C.flags|=2),C.return=t,s.return=t,s.sibling=C,t.child=s,_r(null,s),s=t.child,C=e.child.memoizedState,C===null?C=Vd(i):(c=C.cachePool,c!==null?(b=Ct._currentValue,c=c.parent!==b?{parent:b,pool:b}:c):c=Wg(),C={baseLanes:C.baseLanes|i,cachePool:c}),s.memoizedState=C,s.childLanes=Fd(e,g,i),t.memoizedState=Gd,_r(e.child,s)):(la(t),i=e.child,e=i.sibling,i=Ii(i,{mode:"visible",children:s.children}),i.return=t,i.sibling=null,e!==null&&(g=t.deletions,g===null?(t.deletions=[e],t.flags|=16):g.push(e)),t.child=i,t.memoizedState=null,i)}function Yd(e,t){return t=rc({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function rc(e,t){return e=En(22,e,null,t),e.lanes=0,e}function Qd(e,t,i){return cs(t,e.child,null,i),e=Yd(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function hp(e,t,i){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),ld(e.return,t,i)}function qd(e,t,i,s,c,u){var g=e.memoizedState;g===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:i,tailMode:c,treeForkCount:u}:(g.isBackwards=t,g.rendering=null,g.renderingStartTime=0,g.last=s,g.tail=i,g.tailMode=c,g.treeForkCount=u)}function fp(e,t,i){var s=t.pendingProps,c=s.revealOrder,u=s.tail;s=s.children;var g=gt.current,C=(g&2)!==0;if(C?(g=g&1|2,t.flags|=128):g&=1,Q(gt,g),Lt(e,t,s,i),s=He?fr:0,!C&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&hp(e,i,t);else if(e.tag===19)hp(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(c){case"forwards":for(i=t.child,c=null;i!==null;)e=i.alternate,e!==null&&Jl(e)===null&&(c=i),i=i.sibling;i=c,i===null?(c=t.child,t.child=null):(c=i.sibling,i.sibling=null),qd(t,!1,c,i,u,s);break;case"backwards":case"unstable_legacy-backwards":for(i=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&Jl(e)===null){t.child=c;break}e=c.sibling,c.sibling=i,i=c,c=e}qd(t,!0,i,null,u,s);break;case"together":qd(t,!1,null,null,void 0,s);break;default:t.memoizedState=null}return t.child}function Ui(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),ha|=t.lanes,(i&t.childLanes)===0)if(e!==null){if($s(e,t,i,!1),(i&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(o(153));if(t.child!==null){for(e=t.child,i=Ii(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=Ii(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function Jd(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Kl(e)))}function cT(e,t,i){switch(t.tag){case 3:it(t,t.stateNode.containerInfo),aa(t,Ct,e.memoizedState.cache),is();break;case 27:case 5:Rt(t);break;case 4:it(t,t.stateNode.containerInfo);break;case 10:aa(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,Sd(t),null;break;case 13:var s=t.memoizedState;if(s!==null)return s.dehydrated!==null?(la(t),t.flags|=128,null):(i&t.child.childLanes)!==0?dp(e,t,i):(la(t),e=Ui(e,t,i),e!==null?e.sibling:null);la(t);break;case 19:var c=(e.flags&128)!==0;if(s=(i&t.childLanes)!==0,s||($s(e,t,i,!1),s=(i&t.childLanes)!==0),c){if(s)return fp(e,t,i);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),Q(gt,gt.current),s)break;return null;case 22:return t.lanes=0,sp(e,t,i,t.pendingProps);case 24:aa(t,Ct,e.memoizedState.cache)}return Ui(e,t,i)}function gp(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps)Tt=!0;else{if(!Jd(e,i)&&(t.flags&128)===0)return Tt=!1,cT(e,t,i);Tt=(e.flags&131072)!==0}else Tt=!1,He&&(t.flags&1048576)!==0&&Yg(t,fr,t.index);switch(t.lanes=0,t.tag){case 16:e:{var s=t.pendingProps;if(e=rs(t.elementType),t.type=e,typeof e=="function")ed(e)?(s=ds(e,s),t.tag=1,t=cp(null,t,e,s,i)):(t.tag=0,t=Pd(null,t,e,s,i));else{if(e!=null){var c=e.$$typeof;if(c===Ie){t.tag=11,t=np(null,t,e,s,i);break e}else if(c===re){t.tag=14,t=ip(null,t,e,s,i);break e}}throw t=me(e)||e,Error(o(306,t,""))}}return t;case 0:return Pd(e,t,t.type,t.pendingProps,i);case 1:return s=t.type,c=ds(s,t.pendingProps),cp(e,t,s,c,i);case 3:e:{if(it(t,t.stateNode.containerInfo),e===null)throw Error(o(387));s=t.pendingProps;var u=t.memoizedState;c=u.element,md(e,t),Tr(t,s,null,i);var g=t.memoizedState;if(s=g.cache,aa(t,Ct,s),s!==u.cache&&cd(t,[Ct],i,!0),Sr(),s=g.element,u.isDehydrated)if(u={element:s,isDehydrated:!1,cache:g.cache},t.updateQueue.baseState=u,t.memoizedState=u,t.flags&256){t=up(e,t,s,i);break e}else if(s!==c){c=xn(Error(o(424)),t),gr(c),t=up(e,t,s,i);break e}else for(e=t.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,at=zn(e.firstChild),Ht=t,He=!0,na=null,jn=!0,i=sm(t,null,s,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(is(),s===c){t=Ui(e,t,i);break e}Lt(e,t,s,i)}t=t.child}return t;case 26:return oc(e,t),e===null?(i=wy(t.type,null,t.pendingProps,null))?t.memoizedState=i:He||(i=t.type,e=t.pendingProps,s=Ac(le.current).createElement(i),s[lt]=t,s[kt]=e,Bt(s,i,e),ct(s),t.stateNode=s):t.memoizedState=wy(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Rt(t),e===null&&He&&(s=t.stateNode=Ey(t.type,t.pendingProps,le.current),Ht=t,jn=!0,c=at,ya(t.type)?(Oh=c,at=zn(s.firstChild)):at=c),Lt(e,t,t.pendingProps.children,i),oc(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&He&&((c=s=at)&&(s=LT(s,t.type,t.pendingProps,jn),s!==null?(t.stateNode=s,Ht=t,at=zn(s.firstChild),jn=!1,c=!0):c=!1),c||ia(t)),Rt(t),c=t.type,u=t.pendingProps,g=e!==null?e.memoizedProps:null,s=u.children,Ah(c,u)?s=null:g!==null&&Ah(c,g)&&(t.flags|=32),t.memoizedState!==null&&(c=Ed(e,t,eT,null,null,i),Kr._currentValue=c),oc(e,t),Lt(e,t,s,i),t.child;case 6:return e===null&&He&&((e=i=at)&&(i=BT(i,t.pendingProps,jn),i!==null?(t.stateNode=i,Ht=t,at=null,e=!0):e=!1),e||ia(t)),null;case 13:return dp(e,t,i);case 4:return it(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=cs(t,null,s,i):Lt(e,t,s,i),t.child;case 11:return np(e,t,t.type,t.pendingProps,i);case 7:return Lt(e,t,t.pendingProps,i),t.child;case 8:return Lt(e,t,t.pendingProps.children,i),t.child;case 12:return Lt(e,t,t.pendingProps.children,i),t.child;case 10:return s=t.pendingProps,aa(t,t.type,s.value),Lt(e,t,s.children,i),t.child;case 9:return c=t.type._context,s=t.pendingProps.children,ss(t),c=zt(c),s=s(c),t.flags|=1,Lt(e,t,s,i),t.child;case 14:return ip(e,t,t.type,t.pendingProps,i);case 15:return ap(e,t,t.type,t.pendingProps,i);case 19:return fp(e,t,i);case 31:return lT(e,t,i);case 22:return sp(e,t,i,t.pendingProps);case 24:return ss(t),s=zt(Ct),e===null?(c=hd(),c===null&&(c=We,u=ud(),c.pooledCache=u,u.refCount++,u!==null&&(c.pooledCacheLanes|=i),c=u),t.memoizedState={parent:s,cache:c},gd(t),aa(t,Ct,c)):((e.lanes&i)!==0&&(md(e,t),Tr(t,null,null,i),Sr()),c=e.memoizedState,u=t.memoizedState,c.parent!==s?(c={parent:s,cache:s},t.memoizedState=c,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=c),aa(t,Ct,s)):(s=u.cache,aa(t,Ct,s),s!==c.cache&&cd(t,[Ct],i,!0))),Lt(e,t,t.pendingProps.children,i),t.child;case 29:throw t.pendingProps}throw Error(o(156,t.tag))}function ji(e){e.flags|=4}function Xd(e,t,i,s,c){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(c&335544128)===c)if(e.stateNode.complete)e.flags|=8192;else if(Kp())e.flags|=8192;else throw ls=Fl,fd}else e.flags&=-16777217}function mp(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Ry(t))if(Kp())e.flags|=8192;else throw ls=Fl,fd}function lc(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Vo():536870912,e.lanes|=t,uo|=t)}function kr(e,t){if(!He)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var s=null;i!==null;)i.alternate!==null&&(s=i),i=i.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function st(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,s=0;if(t)for(var c=e.child;c!==null;)i|=c.lanes|c.childLanes,s|=c.subtreeFlags&65011712,s|=c.flags&65011712,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)i|=c.lanes|c.childLanes,s|=c.subtreeFlags,s|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=s,e.childLanes=i,t}function uT(e,t,i){var s=t.pendingProps;switch(ad(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return st(t),null;case 1:return st(t),null;case 3:return i=t.stateNode,s=null,e!==null&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),Mi(Ct),je(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(Zs(t)?ji(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,od())),st(t),null;case 26:var c=t.type,u=t.memoizedState;return e===null?(ji(t),u!==null?(st(t),mp(t,u)):(st(t),Xd(t,c,null,s,i))):u?u!==e.memoizedState?(ji(t),st(t),mp(t,u)):(st(t),t.flags&=-16777217):(e=e.memoizedProps,e!==s&&ji(t),st(t),Xd(t,c,e,s,i)),null;case 27:if(vi(t),i=le.current,c=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==s&&ji(t);else{if(!s){if(t.stateNode===null)throw Error(o(166));return st(t),null}e=H.current,Zs(t)?qg(t):(e=Ey(c,s,i),t.stateNode=e,ji(t))}return st(t),null;case 5:if(vi(t),c=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==s&&ji(t);else{if(!s){if(t.stateNode===null)throw Error(o(166));return st(t),null}if(u=H.current,Zs(t))qg(t);else{var g=Ac(le.current);switch(u){case 1:u=g.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:u=g.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":u=g.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":u=g.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":u=g.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild);break;case"select":u=typeof s.is=="string"?g.createElement("select",{is:s.is}):g.createElement("select"),s.multiple?u.multiple=!0:s.size&&(u.size=s.size);break;default:u=typeof s.is=="string"?g.createElement(c,{is:s.is}):g.createElement(c)}}u[lt]=t,u[kt]=s;e:for(g=t.child;g!==null;){if(g.tag===5||g.tag===6)u.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}t.stateNode=u;e:switch(Bt(u,c,s),c){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&ji(t)}}return st(t),Xd(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,i),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==s&&ji(t);else{if(typeof s!="string"&&t.stateNode===null)throw Error(o(166));if(e=le.current,Zs(t)){if(e=t.stateNode,i=t.memoizedProps,s=null,c=Ht,c!==null)switch(c.tag){case 27:case 5:s=c.memoizedProps}e[lt]=t,e=!!(e.nodeValue===i||s!==null&&s.suppressHydrationWarning===!0||dy(e.nodeValue,i)),e||ia(t,!0)}else e=Ac(e).createTextNode(s),e[lt]=t,t.stateNode=e}return st(t),null;case 31:if(i=t.memoizedState,e===null||e.memoizedState!==null){if(s=Zs(t),i!==null){if(e===null){if(!s)throw Error(o(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(557));e[lt]=t}else is(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;st(t),e=!1}else i=od(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=i),e=!0;if(!e)return t.flags&256?(bn(t),t):(bn(t),null);if((t.flags&128)!==0)throw Error(o(558))}return st(t),null;case 13:if(s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(c=Zs(t),s!==null&&s.dehydrated!==null){if(e===null){if(!c)throw Error(o(318));if(c=t.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(o(317));c[lt]=t}else is(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;st(t),c=!1}else c=od(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=c),c=!0;if(!c)return t.flags&256?(bn(t),t):(bn(t),null)}return bn(t),(t.flags&128)!==0?(t.lanes=i,t):(i=s!==null,e=e!==null&&e.memoizedState!==null,i&&(s=t.child,c=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(c=s.alternate.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==c&&(s.flags|=2048)),i!==e&&i&&(t.child.flags|=8192),lc(t,t.updateQueue),st(t),null);case 4:return je(),e===null&&vh(t.stateNode.containerInfo),st(t),null;case 10:return Mi(t.type),st(t),null;case 19:if(R(gt),s=t.memoizedState,s===null)return st(t),null;if(c=(t.flags&128)!==0,u=s.rendering,u===null)if(c)kr(s,!1);else{if(ht!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(u=Jl(e),u!==null){for(t.flags|=128,kr(s,!1),e=u.updateQueue,t.updateQueue=e,lc(t,e),t.subtreeFlags=0,e=i,i=t.child;i!==null;)Gg(i,e),i=i.sibling;return Q(gt,gt.current&1|2),He&&Ri(t,s.treeForkCount),t.child}e=e.sibling}s.tail!==null&&Gt()>fc&&(t.flags|=128,c=!0,kr(s,!1),t.lanes=4194304)}else{if(!c)if(e=Jl(u),e!==null){if(t.flags|=128,c=!0,e=e.updateQueue,t.updateQueue=e,lc(t,e),kr(s,!0),s.tail===null&&s.tailMode==="hidden"&&!u.alternate&&!He)return st(t),null}else 2*Gt()-s.renderingStartTime>fc&&i!==536870912&&(t.flags|=128,c=!0,kr(s,!1),t.lanes=4194304);s.isBackwards?(u.sibling=t.child,t.child=u):(e=s.last,e!==null?e.sibling=u:t.child=u,s.last=u)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Gt(),e.sibling=null,i=gt.current,Q(gt,c?i&1|2:i&1),He&&Ri(t,s.treeForkCount),e):(st(t),null);case 22:case 23:return bn(t),Cd(),s=t.memoizedState!==null,e!==null?e.memoizedState!==null!==s&&(t.flags|=8192):s&&(t.flags|=8192),s?(i&536870912)!==0&&(t.flags&128)===0&&(st(t),t.subtreeFlags&6&&(t.flags|=8192)):st(t),i=t.updateQueue,i!==null&&lc(t,i.retryQueue),i=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),s=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),s!==i&&(t.flags|=2048),e!==null&&R(os),null;case 24:return i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),Mi(Ct),st(t),null;case 25:return null;case 30:return null}throw Error(o(156,t.tag))}function dT(e,t){switch(ad(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Mi(Ct),je(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return vi(t),null;case 31:if(t.memoizedState!==null){if(bn(t),t.alternate===null)throw Error(o(340));is()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(bn(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(o(340));is()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return R(gt),null;case 4:return je(),null;case 10:return Mi(t.type),null;case 22:case 23:return bn(t),Cd(),e!==null&&R(os),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Mi(Ct),null;case 25:return null;default:return null}}function pp(e,t){switch(ad(t),t.tag){case 3:Mi(Ct),je();break;case 26:case 27:case 5:vi(t);break;case 4:je();break;case 31:t.memoizedState!==null&&bn(t);break;case 13:bn(t);break;case 19:R(gt);break;case 10:Mi(t.type);break;case 22:case 23:bn(t),Cd(),e!==null&&R(os);break;case 24:Mi(Ct)}}function Or(e,t){try{var i=t.updateQueue,s=i!==null?i.lastEffect:null;if(s!==null){var c=s.next;i=c;do{if((i.tag&e)===e){s=void 0;var u=i.create,g=i.inst;s=u(),g.destroy=s}i=i.next}while(i!==c)}}catch(C){qe(t,t.return,C)}}function ua(e,t,i){try{var s=t.updateQueue,c=s!==null?s.lastEffect:null;if(c!==null){var u=c.next;s=u;do{if((s.tag&e)===e){var g=s.inst,C=g.destroy;if(C!==void 0){g.destroy=void 0,c=t;var b=i,N=C;try{N()}catch(K){qe(c,b,K)}}}s=s.next}while(s!==u)}}catch(K){qe(t,t.return,K)}}function yp(e){var t=e.updateQueue;if(t!==null){var i=e.stateNode;try{rm(t,i)}catch(s){qe(e,e.return,s)}}}function vp(e,t,i){i.props=ds(e.type,e.memoizedProps),i.state=e.memoizedState;try{i.componentWillUnmount()}catch(s){qe(e,t,s)}}function Ir(e,t){try{var i=e.ref;if(i!==null){switch(e.tag){case 26:case 27:case 5:var s=e.stateNode;break;case 30:s=e.stateNode;break;default:s=e.stateNode}typeof i=="function"?e.refCleanup=i(s):i.current=s}}catch(c){qe(e,t,c)}}function hi(e,t){var i=e.ref,s=e.refCleanup;if(i!==null)if(typeof s=="function")try{s()}catch(c){qe(e,t,c)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(c){qe(e,t,c)}else i.current=null}function Cp(e){var t=e.type,i=e.memoizedProps,s=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":i.autoFocus&&s.focus();break e;case"img":i.src?s.src=i.src:i.srcSet&&(s.srcset=i.srcSet)}}catch(c){qe(e,e.return,c)}}function Zd(e,t,i){try{var s=e.stateNode;xT(s,e.type,i,t),s[kt]=t}catch(c){qe(e,e.return,c)}}function Sp(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&ya(e.type)||e.tag===4}function $d(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Sp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&ya(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Wd(e,t,i){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(e,t):(t=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,t.appendChild(e),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=Ut));else if(s!==4&&(s===27&&ya(e.type)&&(i=e.stateNode,t=null),e=e.child,e!==null))for(Wd(e,t,i),e=e.sibling;e!==null;)Wd(e,t,i),e=e.sibling}function cc(e,t,i){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(s!==4&&(s===27&&ya(e.type)&&(i=e.stateNode),e=e.child,e!==null))for(cc(e,t,i),e=e.sibling;e!==null;)cc(e,t,i),e=e.sibling}function Tp(e){var t=e.stateNode,i=e.memoizedProps;try{for(var s=e.type,c=t.attributes;c.length;)t.removeAttributeNode(c[0]);Bt(t,s,i),t[lt]=e,t[kt]=i}catch(u){qe(e,e.return,u)}}var Hi=!1,Et=!1,eh=!1,Ep=typeof WeakSet=="function"?WeakSet:Set,It=null;function hT(e,t){if(e=e.containerInfo,Th=Rc,e=Dg(e),Qu(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var s=i.getSelection&&i.getSelection();if(s&&s.rangeCount!==0){i=s.anchorNode;var c=s.anchorOffset,u=s.focusNode;s=s.focusOffset;try{i.nodeType,u.nodeType}catch{i=null;break e}var g=0,C=-1,b=-1,N=0,K=0,V=e,x=null;t:for(;;){for(var z;V!==i||c!==0&&V.nodeType!==3||(C=g+c),V!==u||s!==0&&V.nodeType!==3||(b=g+s),V.nodeType===3&&(g+=V.nodeValue.length),(z=V.firstChild)!==null;)x=V,V=z;for(;;){if(V===e)break t;if(x===i&&++N===c&&(C=g),x===u&&++K===s&&(b=g),(z=V.nextSibling)!==null)break;V=x,x=V.parentNode}V=z}i=C===-1||b===-1?null:{start:C,end:b}}else i=null}i=i||{start:0,end:0}}else i=null;for(Eh={focusedElem:e,selectionRange:i},Rc=!1,It=t;It!==null;)if(t=It,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,It=e;else for(;It!==null;){switch(t=It,u=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(i=0;i<e.length;i++)c=e[i],c.ref.impl=c.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&u!==null){e=void 0,i=t,c=u.memoizedProps,u=u.memoizedState,s=i.stateNode;try{var oe=ds(i.type,c);e=s.getSnapshotBeforeUpdate(oe,u),s.__reactInternalSnapshotBeforeUpdate=e}catch(ge){qe(i,i.return,ge)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,i=e.nodeType,i===9)wh(e);else if(i===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":wh(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(o(163))}if(e=t.sibling,e!==null){e.return=t.return,It=e;break}It=t.return}}function Ap(e,t,i){var s=i.flags;switch(i.tag){case 0:case 11:case 15:Li(e,i),s&4&&Or(5,i);break;case 1:if(Li(e,i),s&4)if(e=i.stateNode,t===null)try{e.componentDidMount()}catch(g){qe(i,i.return,g)}else{var c=ds(i.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(c,t,e.__reactInternalSnapshotBeforeUpdate)}catch(g){qe(i,i.return,g)}}s&64&&yp(i),s&512&&Ir(i,i.return);break;case 3:if(Li(e,i),s&64&&(e=i.updateQueue,e!==null)){if(t=null,i.child!==null)switch(i.child.tag){case 27:case 5:t=i.child.stateNode;break;case 1:t=i.child.stateNode}try{rm(e,t)}catch(g){qe(i,i.return,g)}}break;case 27:t===null&&s&4&&Tp(i);case 26:case 5:Li(e,i),t===null&&s&4&&Cp(i),s&512&&Ir(i,i.return);break;case 12:Li(e,i);break;case 31:Li(e,i),s&4&&_p(e,i);break;case 13:Li(e,i),s&4&&kp(e,i),s&64&&(e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(i=TT.bind(null,i),KT(e,i))));break;case 22:if(s=i.memoizedState!==null||Hi,!s){t=t!==null&&t.memoizedState!==null||Et,c=Hi;var u=Et;Hi=s,(Et=t)&&!u?Bi(e,i,(i.subtreeFlags&8772)!==0):Li(e,i),Hi=c,Et=u}break;case 30:break;default:Li(e,i)}}function bp(e){var t=e.alternate;t!==null&&(e.alternate=null,bp(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Yo(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var ot=null,nn=!1;function zi(e,t,i){for(i=i.child;i!==null;)wp(e,t,i),i=i.sibling}function wp(e,t,i){if(Nt&&typeof Nt.onCommitFiberUnmount=="function")try{Nt.onCommitFiberUnmount(ti,i)}catch{}switch(i.tag){case 26:Et||hi(i,t),zi(e,t,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:Et||hi(i,t);var s=ot,c=nn;ya(i.type)&&(ot=i.stateNode,nn=!1),zi(e,t,i),zr(i.stateNode),ot=s,nn=c;break;case 5:Et||hi(i,t);case 6:if(s=ot,c=nn,ot=null,zi(e,t,i),ot=s,nn=c,ot!==null)if(nn)try{(ot.nodeType===9?ot.body:ot.nodeName==="HTML"?ot.ownerDocument.body:ot).removeChild(i.stateNode)}catch(u){qe(i,t,u)}else try{ot.removeChild(i.stateNode)}catch(u){qe(i,t,u)}break;case 18:ot!==null&&(nn?(e=ot,yy(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,i.stateNode),Co(e)):yy(ot,i.stateNode));break;case 4:s=ot,c=nn,ot=i.stateNode.containerInfo,nn=!0,zi(e,t,i),ot=s,nn=c;break;case 0:case 11:case 14:case 15:ua(2,i,t),Et||ua(4,i,t),zi(e,t,i);break;case 1:Et||(hi(i,t),s=i.stateNode,typeof s.componentWillUnmount=="function"&&vp(i,t,s)),zi(e,t,i);break;case 21:zi(e,t,i);break;case 22:Et=(s=Et)||i.memoizedState!==null,zi(e,t,i),Et=s;break;default:zi(e,t,i)}}function _p(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Co(e)}catch(i){qe(t,t.return,i)}}}function kp(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Co(e)}catch(i){qe(t,t.return,i)}}function fT(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Ep),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Ep),t;default:throw Error(o(435,e.tag))}}function uc(e,t){var i=fT(e);t.forEach(function(s){if(!i.has(s)){i.add(s);var c=ET.bind(null,e,s);s.then(c,c)}})}function an(e,t){var i=t.deletions;if(i!==null)for(var s=0;s<i.length;s++){var c=i[s],u=e,g=t,C=g;e:for(;C!==null;){switch(C.tag){case 27:if(ya(C.type)){ot=C.stateNode,nn=!1;break e}break;case 5:ot=C.stateNode,nn=!1;break e;case 3:case 4:ot=C.stateNode.containerInfo,nn=!0;break e}C=C.return}if(ot===null)throw Error(o(160));wp(u,g,c),ot=null,nn=!1,u=c.alternate,u!==null&&(u.return=null),c.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Op(t,e),t=t.sibling}var Fn=null;function Op(e,t){var i=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:an(t,e),sn(e),s&4&&(ua(3,e,e.return),Or(3,e),ua(5,e,e.return));break;case 1:an(t,e),sn(e),s&512&&(Et||i===null||hi(i,i.return)),s&64&&Hi&&(e=e.updateQueue,e!==null&&(s=e.callbacks,s!==null&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=i===null?s:i.concat(s))));break;case 26:var c=Fn;if(an(t,e),sn(e),s&512&&(Et||i===null||hi(i,i.return)),s&4){var u=i!==null?i.memoizedState:null;if(s=e.memoizedState,i===null)if(s===null)if(e.stateNode===null){e:{s=e.type,i=e.memoizedProps,c=c.ownerDocument||c;t:switch(s){case"title":u=c.getElementsByTagName("title")[0],(!u||u[yn]||u[lt]||u.namespaceURI==="http://www.w3.org/2000/svg"||u.hasAttribute("itemprop"))&&(u=c.createElement(s),c.head.insertBefore(u,c.querySelector("head > title"))),Bt(u,s,i),u[lt]=e,ct(u),s=u;break e;case"link":var g=Oy("link","href",c).get(s+(i.href||""));if(g){for(var C=0;C<g.length;C++)if(u=g[C],u.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&u.getAttribute("rel")===(i.rel==null?null:i.rel)&&u.getAttribute("title")===(i.title==null?null:i.title)&&u.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){g.splice(C,1);break t}}u=c.createElement(s),Bt(u,s,i),c.head.appendChild(u);break;case"meta":if(g=Oy("meta","content",c).get(s+(i.content||""))){for(C=0;C<g.length;C++)if(u=g[C],u.getAttribute("content")===(i.content==null?null:""+i.content)&&u.getAttribute("name")===(i.name==null?null:i.name)&&u.getAttribute("property")===(i.property==null?null:i.property)&&u.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&u.getAttribute("charset")===(i.charSet==null?null:i.charSet)){g.splice(C,1);break t}}u=c.createElement(s),Bt(u,s,i),c.head.appendChild(u);break;default:throw Error(o(468,s))}u[lt]=e,ct(u),s=u}e.stateNode=s}else Iy(c,e.type,e.stateNode);else e.stateNode=ky(c,s,e.memoizedProps);else u!==s?(u===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):u.count--,s===null?Iy(c,e.type,e.stateNode):ky(c,s,e.memoizedProps)):s===null&&e.stateNode!==null&&Zd(e,e.memoizedProps,i.memoizedProps)}break;case 27:an(t,e),sn(e),s&512&&(Et||i===null||hi(i,i.return)),i!==null&&s&4&&Zd(e,e.memoizedProps,i.memoizedProps);break;case 5:if(an(t,e),sn(e),s&512&&(Et||i===null||hi(i,i.return)),e.flags&32){c=e.stateNode;try{Nn(c,"")}catch(oe){qe(e,e.return,oe)}}s&4&&e.stateNode!=null&&(c=e.memoizedProps,Zd(e,c,i!==null?i.memoizedProps:c)),s&1024&&(eh=!0);break;case 6:if(an(t,e),sn(e),s&4){if(e.stateNode===null)throw Error(o(162));s=e.memoizedProps,i=e.stateNode;try{i.nodeValue=s}catch(oe){qe(e,e.return,oe)}}break;case 3:if(_c=null,c=Fn,Fn=bc(t.containerInfo),an(t,e),Fn=c,sn(e),s&4&&i!==null&&i.memoizedState.isDehydrated)try{Co(t.containerInfo)}catch(oe){qe(e,e.return,oe)}eh&&(eh=!1,Ip(e));break;case 4:s=Fn,Fn=bc(e.stateNode.containerInfo),an(t,e),sn(e),Fn=s;break;case 12:an(t,e),sn(e);break;case 31:an(t,e),sn(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,uc(e,s)));break;case 13:an(t,e),sn(e),e.child.flags&8192&&e.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(hc=Gt()),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,uc(e,s)));break;case 22:c=e.memoizedState!==null;var b=i!==null&&i.memoizedState!==null,N=Hi,K=Et;if(Hi=N||c,Et=K||b,an(t,e),Et=K,Hi=N,sn(e),s&8192)e:for(t=e.stateNode,t._visibility=c?t._visibility&-2:t._visibility|1,c&&(i===null||b||Hi||Et||hs(e)),i=null,t=e;;){if(t.tag===5||t.tag===26){if(i===null){b=i=t;try{if(u=b.stateNode,c)g=u.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none";else{C=b.stateNode;var V=b.memoizedProps.style,x=V!=null&&V.hasOwnProperty("display")?V.display:null;C.style.display=x==null||typeof x=="boolean"?"":(""+x).trim()}}catch(oe){qe(b,b.return,oe)}}}else if(t.tag===6){if(i===null){b=t;try{b.stateNode.nodeValue=c?"":b.memoizedProps}catch(oe){qe(b,b.return,oe)}}}else if(t.tag===18){if(i===null){b=t;try{var z=b.stateNode;c?vy(z,!0):vy(b.stateNode,!1)}catch(oe){qe(b,b.return,oe)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;i===t&&(i=null),t=t.return}i===t&&(i=null),t.sibling.return=t.return,t=t.sibling}s&4&&(s=e.updateQueue,s!==null&&(i=s.retryQueue,i!==null&&(s.retryQueue=null,uc(e,i))));break;case 19:an(t,e),sn(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,uc(e,s)));break;case 30:break;case 21:break;default:an(t,e),sn(e)}}function sn(e){var t=e.flags;if(t&2){try{for(var i,s=e.return;s!==null;){if(Sp(s)){i=s;break}s=s.return}if(i==null)throw Error(o(160));switch(i.tag){case 27:var c=i.stateNode,u=$d(e);cc(e,u,c);break;case 5:var g=i.stateNode;i.flags&32&&(Nn(g,""),i.flags&=-33);var C=$d(e);cc(e,C,g);break;case 3:case 4:var b=i.stateNode.containerInfo,N=$d(e);Wd(e,N,b);break;default:throw Error(o(161))}}catch(K){qe(e,e.return,K)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Ip(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Ip(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Li(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Ap(e,t.alternate,t),t=t.sibling}function hs(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ua(4,t,t.return),hs(t);break;case 1:hi(t,t.return);var i=t.stateNode;typeof i.componentWillUnmount=="function"&&vp(t,t.return,i),hs(t);break;case 27:zr(t.stateNode);case 26:case 5:hi(t,t.return),hs(t);break;case 22:t.memoizedState===null&&hs(t);break;case 30:hs(t);break;default:hs(t)}e=e.sibling}}function Bi(e,t,i){for(i=i&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var s=t.alternate,c=e,u=t,g=u.flags;switch(u.tag){case 0:case 11:case 15:Bi(c,u,i),Or(4,u);break;case 1:if(Bi(c,u,i),s=u,c=s.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch(N){qe(s,s.return,N)}if(s=u,c=s.updateQueue,c!==null){var C=s.stateNode;try{var b=c.shared.hiddenCallbacks;if(b!==null)for(c.shared.hiddenCallbacks=null,c=0;c<b.length;c++)om(b[c],C)}catch(N){qe(s,s.return,N)}}i&&g&64&&yp(u),Ir(u,u.return);break;case 27:Tp(u);case 26:case 5:Bi(c,u,i),i&&s===null&&g&4&&Cp(u),Ir(u,u.return);break;case 12:Bi(c,u,i);break;case 31:Bi(c,u,i),i&&g&4&&_p(c,u);break;case 13:Bi(c,u,i),i&&g&4&&kp(c,u);break;case 22:u.memoizedState===null&&Bi(c,u,i),Ir(u,u.return);break;case 30:break;default:Bi(c,u,i)}t=t.sibling}}function th(e,t){var i=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==i&&(e!=null&&e.refCount++,i!=null&&mr(i))}function nh(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&mr(e))}function Yn(e,t,i,s){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Rp(e,t,i,s),t=t.sibling}function Rp(e,t,i,s){var c=t.flags;switch(t.tag){case 0:case 11:case 15:Yn(e,t,i,s),c&2048&&Or(9,t);break;case 1:Yn(e,t,i,s);break;case 3:Yn(e,t,i,s),c&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&mr(e)));break;case 12:if(c&2048){Yn(e,t,i,s),e=t.stateNode;try{var u=t.memoizedProps,g=u.id,C=u.onPostCommit;typeof C=="function"&&C(g,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(b){qe(t,t.return,b)}}else Yn(e,t,i,s);break;case 31:Yn(e,t,i,s);break;case 13:Yn(e,t,i,s);break;case 23:break;case 22:u=t.stateNode,g=t.alternate,t.memoizedState!==null?u._visibility&2?Yn(e,t,i,s):Rr(e,t):u._visibility&2?Yn(e,t,i,s):(u._visibility|=2,ro(e,t,i,s,(t.subtreeFlags&10256)!==0||!1)),c&2048&&th(g,t);break;case 24:Yn(e,t,i,s),c&2048&&nh(t.alternate,t);break;default:Yn(e,t,i,s)}}function ro(e,t,i,s,c){for(c=c&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var u=e,g=t,C=i,b=s,N=g.flags;switch(g.tag){case 0:case 11:case 15:ro(u,g,C,b,c),Or(8,g);break;case 23:break;case 22:var K=g.stateNode;g.memoizedState!==null?K._visibility&2?ro(u,g,C,b,c):Rr(u,g):(K._visibility|=2,ro(u,g,C,b,c)),c&&N&2048&&th(g.alternate,g);break;case 24:ro(u,g,C,b,c),c&&N&2048&&nh(g.alternate,g);break;default:ro(u,g,C,b,c)}t=t.sibling}}function Rr(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var i=e,s=t,c=s.flags;switch(s.tag){case 22:Rr(i,s),c&2048&&th(s.alternate,s);break;case 24:Rr(i,s),c&2048&&nh(s.alternate,s);break;default:Rr(i,s)}t=t.sibling}}var Nr=8192;function lo(e,t,i){if(e.subtreeFlags&Nr)for(e=e.child;e!==null;)Np(e,t,i),e=e.sibling}function Np(e,t,i){switch(e.tag){case 26:lo(e,t,i),e.flags&Nr&&e.memoizedState!==null&&WT(i,Fn,e.memoizedState,e.memoizedProps);break;case 5:lo(e,t,i);break;case 3:case 4:var s=Fn;Fn=bc(e.stateNode.containerInfo),lo(e,t,i),Fn=s;break;case 22:e.memoizedState===null&&(s=e.alternate,s!==null&&s.memoizedState!==null?(s=Nr,Nr=16777216,lo(e,t,i),Nr=s):lo(e,t,i));break;default:lo(e,t,i)}}function Mp(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Mr(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var i=0;i<t.length;i++){var s=t[i];It=s,Dp(s,e)}Mp(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)xp(e),e=e.sibling}function xp(e){switch(e.tag){case 0:case 11:case 15:Mr(e),e.flags&2048&&ua(9,e,e.return);break;case 3:Mr(e);break;case 12:Mr(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,dc(e)):Mr(e);break;default:Mr(e)}}function dc(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var i=0;i<t.length;i++){var s=t[i];It=s,Dp(s,e)}Mp(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:ua(8,t,t.return),dc(t);break;case 22:i=t.stateNode,i._visibility&2&&(i._visibility&=-3,dc(t));break;default:dc(t)}e=e.sibling}}function Dp(e,t){for(;It!==null;){var i=It;switch(i.tag){case 0:case 11:case 15:ua(8,i,t);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var s=i.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:mr(i.memoizedState.cache)}if(s=i.child,s!==null)s.return=i,It=s;else e:for(i=e;It!==null;){s=It;var c=s.sibling,u=s.return;if(bp(s),s===i){It=null;break e}if(c!==null){c.return=u,It=c;break e}It=u}}}var gT={getCacheForType:function(e){var t=zt(Ct),i=t.data.get(e);return i===void 0&&(i=e(),t.data.set(e,i)),i},cacheSignal:function(){return zt(Ct).controller.signal}},mT=typeof WeakMap=="function"?WeakMap:Map,Ve=0,We=null,Ne=null,xe=0,Qe=0,wn=null,da=!1,co=!1,ih=!1,Ki=0,ht=0,ha=0,fs=0,ah=0,_n=0,uo=0,xr=null,on=null,sh=!1,hc=0,Up=0,fc=1/0,gc=null,fa=null,wt=0,ga=null,ho=null,Pi=0,oh=0,rh=null,jp=null,Dr=0,lh=null;function kn(){return(Ve&2)!==0&&xe!==0?xe&-xe:D.T!==null?gh():xs()}function Hp(){if(_n===0)if((xe&536870912)===0||He){var e=Ci;Ci<<=1,(Ci&3932160)===0&&(Ci=262144),_n=e}else _n=536870912;return e=An.current,e!==null&&(e.flags|=32),_n}function rn(e,t,i){(e===We&&(Qe===2||Qe===9)||e.cancelPendingCommit!==null)&&(fo(e,0),ma(e,xe,_n,!1)),Ka(e,i),((Ve&2)===0||e!==We)&&(e===We&&((Ve&2)===0&&(fs|=i),ht===4&&ma(e,xe,_n,!1)),fi(e))}function zp(e,t,i){if((Ve&6)!==0)throw Error(o(327));var s=!i&&(t&127)===0&&(t&e.expiredLanes)===0||Si(e,t),c=s?vT(e,t):uh(e,t,!0),u=s;do{if(c===0){co&&!s&&ma(e,t,0,!1);break}else{if(i=e.current.alternate,u&&!pT(i)){c=uh(e,t,!1),u=!1;continue}if(c===2){if(u=t,e.errorRecoveryDisabledLanes&u)var g=0;else g=e.pendingLanes&-536870913,g=g!==0?g:g&536870912?536870912:0;if(g!==0){t=g;e:{var C=e;c=xr;var b=C.current.memoizedState.isDehydrated;if(b&&(fo(C,g).flags|=256),g=uh(C,g,!1),g!==2){if(ih&&!b){C.errorRecoveryDisabledLanes|=u,fs|=u,c=4;break e}u=on,on=c,u!==null&&(on===null?on=u:on.push.apply(on,u))}c=g}if(u=!1,c!==2)continue}}if(c===1){fo(e,0),ma(e,t,0,!0);break}e:{switch(s=e,u=c,u){case 0:case 1:throw Error(o(345));case 4:if((t&4194048)!==t)break;case 6:ma(s,t,_n,!da);break e;case 2:on=null;break;case 3:case 5:break;default:throw Error(o(329))}if((t&62914560)===t&&(c=hc+300-Gt(),10<c)){if(ma(s,t,_n,!da),Ba(s,0,!0)!==0)break e;Pi=t,s.timeoutHandle=my(Lp.bind(null,s,i,on,gc,sh,t,_n,fs,uo,da,u,"Throttled",-0,0),c);break e}Lp(s,i,on,gc,sh,t,_n,fs,uo,da,u,null,-0,0)}}break}while(!0);fi(e)}function Lp(e,t,i,s,c,u,g,C,b,N,K,V,x,z){if(e.timeoutHandle=-1,V=t.subtreeFlags,V&8192||(V&16785408)===16785408){V={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ut},Np(t,u,V);var oe=(u&62914560)===u?hc-Gt():(u&4194048)===u?Up-Gt():0;if(oe=eE(V,oe),oe!==null){Pi=u,e.cancelPendingCommit=oe(Qp.bind(null,e,t,u,i,s,c,g,C,b,K,V,null,x,z)),ma(e,u,g,!N);return}}Qp(e,t,u,i,s,c,g,C,b)}function pT(e){for(var t=e;;){var i=t.tag;if((i===0||i===11||i===15)&&t.flags&16384&&(i=t.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var s=0;s<i.length;s++){var c=i[s],u=c.getSnapshot;c=c.value;try{if(!Tn(u(),c))return!1}catch{return!1}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ma(e,t,i,s){t&=~ah,t&=~fs,e.suspendedLanes|=t,e.pingedLanes&=~t,s&&(e.warmLanes|=t),s=e.expirationTimes;for(var c=t;0<c;){var u=31-Qt(c),g=1<<u;s[u]=-1,c&=~g}i!==0&&ml(e,i,t)}function mc(){return(Ve&6)===0?(Ur(0),!1):!0}function ch(){if(Ne!==null){if(Qe===0)var e=Ne.return;else e=Ne,Ni=as=null,wd(e),no=null,yr=0,e=Ne;for(;e!==null;)pp(e.alternate,e),e=e.return;Ne=null}}function fo(e,t){var i=e.timeoutHandle;i!==-1&&(e.timeoutHandle=-1,jT(i)),i=e.cancelPendingCommit,i!==null&&(e.cancelPendingCommit=null,i()),Pi=0,ch(),We=e,Ne=i=Ii(e.current,null),xe=t,Qe=0,wn=null,da=!1,co=Si(e,t),ih=!1,uo=_n=ah=fs=ha=ht=0,on=xr=null,sh=!1,(t&8)!==0&&(t|=t&32);var s=e.entangledLanes;if(s!==0)for(e=e.entanglements,s&=t;0<s;){var c=31-Qt(s),u=1<<c;t|=e[c],s&=~u}return Ki=t,jl(),i}function Bp(e,t){we=null,D.H=wr,t===to||t===Vl?(t=nm(),Qe=3):t===fd?(t=nm(),Qe=4):Qe=t===Kd?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,wn=t,Ne===null&&(ht=1,ac(e,xn(t,e.current)))}function Kp(){var e=An.current;return e===null?!0:(xe&4194048)===xe?Hn===null:(xe&62914560)===xe||(xe&536870912)!==0?e===Hn:!1}function Pp(){var e=D.H;return D.H=wr,e===null?wr:e}function Gp(){var e=D.A;return D.A=gT,e}function pc(){ht=4,da||(xe&4194048)!==xe&&An.current!==null||(co=!0),(ha&134217727)===0&&(fs&134217727)===0||We===null||ma(We,xe,_n,!1)}function uh(e,t,i){var s=Ve;Ve|=2;var c=Pp(),u=Gp();(We!==e||xe!==t)&&(gc=null,fo(e,t)),t=!1;var g=ht;e:do try{if(Qe!==0&&Ne!==null){var C=Ne,b=wn;switch(Qe){case 8:ch(),g=6;break e;case 3:case 2:case 9:case 6:An.current===null&&(t=!0);var N=Qe;if(Qe=0,wn=null,go(e,C,b,N),i&&co){g=0;break e}break;default:N=Qe,Qe=0,wn=null,go(e,C,b,N)}}yT(),g=ht;break}catch(K){Bp(e,K)}while(!0);return t&&e.shellSuspendCounter++,Ni=as=null,Ve=s,D.H=c,D.A=u,Ne===null&&(We=null,xe=0,jl()),g}function yT(){for(;Ne!==null;)Vp(Ne)}function vT(e,t){var i=Ve;Ve|=2;var s=Pp(),c=Gp();We!==e||xe!==t?(gc=null,fc=Gt()+500,fo(e,t)):co=Si(e,t);e:do try{if(Qe!==0&&Ne!==null){t=Ne;var u=wn;t:switch(Qe){case 1:Qe=0,wn=null,go(e,t,u,1);break;case 2:case 9:if(em(u)){Qe=0,wn=null,Fp(t);break}t=function(){Qe!==2&&Qe!==9||We!==e||(Qe=7),fi(e)},u.then(t,t);break e;case 3:Qe=7;break e;case 4:Qe=5;break e;case 7:em(u)?(Qe=0,wn=null,Fp(t)):(Qe=0,wn=null,go(e,t,u,7));break;case 5:var g=null;switch(Ne.tag){case 26:g=Ne.memoizedState;case 5:case 27:var C=Ne;if(g?Ry(g):C.stateNode.complete){Qe=0,wn=null;var b=C.sibling;if(b!==null)Ne=b;else{var N=C.return;N!==null?(Ne=N,yc(N)):Ne=null}break t}}Qe=0,wn=null,go(e,t,u,5);break;case 6:Qe=0,wn=null,go(e,t,u,6);break;case 8:ch(),ht=6;break e;default:throw Error(o(462))}}CT();break}catch(K){Bp(e,K)}while(!0);return Ni=as=null,D.H=s,D.A=c,Ve=i,Ne!==null?0:(We=null,xe=0,jl(),ht)}function CT(){for(;Ne!==null&&!Os();)Vp(Ne)}function Vp(e){var t=gp(e.alternate,e,Ki);e.memoizedProps=e.pendingProps,t===null?yc(e):Ne=t}function Fp(e){var t=e,i=t.alternate;switch(t.tag){case 15:case 0:t=lp(i,t,t.pendingProps,t.type,void 0,xe);break;case 11:t=lp(i,t,t.pendingProps,t.type.render,t.ref,xe);break;case 5:wd(t);default:pp(i,t),t=Ne=Gg(t,Ki),t=gp(i,t,Ki)}e.memoizedProps=e.pendingProps,t===null?yc(e):Ne=t}function go(e,t,i,s){Ni=as=null,wd(t),no=null,yr=0;var c=t.return;try{if(rT(e,c,t,i,xe)){ht=1,ac(e,xn(i,e.current)),Ne=null;return}}catch(u){if(c!==null)throw Ne=c,u;ht=1,ac(e,xn(i,e.current)),Ne=null;return}t.flags&32768?(He||s===1?e=!0:co||(xe&536870912)!==0?e=!1:(da=e=!0,(s===2||s===9||s===3||s===6)&&(s=An.current,s!==null&&s.tag===13&&(s.flags|=16384))),Yp(t,e)):yc(t)}function yc(e){var t=e;do{if((t.flags&32768)!==0){Yp(t,da);return}e=t.return;var i=uT(t.alternate,t,Ki);if(i!==null){Ne=i;return}if(t=t.sibling,t!==null){Ne=t;return}Ne=t=e}while(t!==null);ht===0&&(ht=5)}function Yp(e,t){do{var i=dT(e.alternate,e);if(i!==null){i.flags&=32767,Ne=i;return}if(i=e.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!t&&(e=e.sibling,e!==null)){Ne=e;return}Ne=e=i}while(e!==null);ht=6,Ne=null}function Qp(e,t,i,s,c,u,g,C,b){e.cancelPendingCommit=null;do vc();while(wt!==0);if((Ve&6)!==0)throw Error(o(327));if(t!==null){if(t===e.current)throw Error(o(177));if(u=t.lanes|t.childLanes,u|=$u,_u(e,i,u,g,C,b),e===We&&(Ne=We=null,xe=0),ho=t,ga=e,Pi=i,oh=u,rh=c,jp=s,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,AT(pn,function(){return $p(),null})):(e.callbackNode=null,e.callbackPriority=0),s=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||s){s=D.T,D.T=null,c=Y.p,Y.p=2,g=Ve,Ve|=4;try{hT(e,t,i)}finally{Ve=g,Y.p=c,D.T=s}}wt=1,qp(),Jp(),Xp()}}function qp(){if(wt===1){wt=0;var e=ga,t=ho,i=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||i){i=D.T,D.T=null;var s=Y.p;Y.p=2;var c=Ve;Ve|=4;try{Op(t,e);var u=Eh,g=Dg(e.containerInfo),C=u.focusedElem,b=u.selectionRange;if(g!==C&&C&&C.ownerDocument&&xg(C.ownerDocument.documentElement,C)){if(b!==null&&Qu(C)){var N=b.start,K=b.end;if(K===void 0&&(K=N),"selectionStart"in C)C.selectionStart=N,C.selectionEnd=Math.min(K,C.value.length);else{var V=C.ownerDocument||document,x=V&&V.defaultView||window;if(x.getSelection){var z=x.getSelection(),oe=C.textContent.length,ge=Math.min(b.start,oe),$e=b.end===void 0?ge:Math.min(b.end,oe);!z.extend&&ge>$e&&(g=$e,$e=ge,ge=g);var _=Mg(C,ge),w=Mg(C,$e);if(_&&w&&(z.rangeCount!==1||z.anchorNode!==_.node||z.anchorOffset!==_.offset||z.focusNode!==w.node||z.focusOffset!==w.offset)){var I=V.createRange();I.setStart(_.node,_.offset),z.removeAllRanges(),ge>$e?(z.addRange(I),z.extend(w.node,w.offset)):(I.setEnd(w.node,w.offset),z.addRange(I))}}}}for(V=[],z=C;z=z.parentNode;)z.nodeType===1&&V.push({element:z,left:z.scrollLeft,top:z.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<V.length;C++){var G=V[C];G.element.scrollLeft=G.left,G.element.scrollTop=G.top}}Rc=!!Th,Eh=Th=null}finally{Ve=c,Y.p=s,D.T=i}}e.current=t,wt=2}}function Jp(){if(wt===2){wt=0;var e=ga,t=ho,i=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||i){i=D.T,D.T=null;var s=Y.p;Y.p=2;var c=Ve;Ve|=4;try{Ap(e,t.alternate,t)}finally{Ve=c,Y.p=s,D.T=i}}wt=3}}function Xp(){if(wt===4||wt===3){wt=0,Is();var e=ga,t=ho,i=Pi,s=jp;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?wt=5:(wt=0,ho=ga=null,Zp(e,e.pendingLanes));var c=e.pendingLanes;if(c===0&&(fa=null),Xi(i),t=t.stateNode,Nt&&typeof Nt.onCommitFiberRoot=="function")try{Nt.onCommitFiberRoot(ti,t,void 0,(t.current.flags&128)===128)}catch{}if(s!==null){t=D.T,c=Y.p,Y.p=2,D.T=null;try{for(var u=e.onRecoverableError,g=0;g<s.length;g++){var C=s[g];u(C.value,{componentStack:C.stack})}}finally{D.T=t,Y.p=c}}(Pi&3)!==0&&vc(),fi(e),c=e.pendingLanes,(i&261930)!==0&&(c&42)!==0?e===lh?Dr++:(Dr=0,lh=e):Dr=0,Ur(0)}}function Zp(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,mr(t)))}function vc(){return qp(),Jp(),Xp(),$p()}function $p(){if(wt!==5)return!1;var e=ga,t=oh;oh=0;var i=Xi(Pi),s=D.T,c=Y.p;try{Y.p=32>i?32:i,D.T=null,i=rh,rh=null;var u=ga,g=Pi;if(wt=0,ho=ga=null,Pi=0,(Ve&6)!==0)throw Error(o(331));var C=Ve;if(Ve|=4,xp(u.current),Rp(u,u.current,g,i),Ve=C,Ur(0,!1),Nt&&typeof Nt.onPostCommitFiberRoot=="function")try{Nt.onPostCommitFiberRoot(ti,u)}catch{}return!0}finally{Y.p=c,D.T=s,Zp(e,t)}}function Wp(e,t,i){t=xn(i,t),t=Bd(e.stateNode,t,2),e=ra(e,t,2),e!==null&&(Ka(e,2),fi(e))}function qe(e,t,i){if(e.tag===3)Wp(e,e,i);else for(;t!==null;){if(t.tag===3){Wp(t,e,i);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(fa===null||!fa.has(s))){e=xn(i,e),i=ep(2),s=ra(t,i,2),s!==null&&(tp(i,s,t,e),Ka(s,2),fi(s));break}}t=t.return}}function dh(e,t,i){var s=e.pingCache;if(s===null){s=e.pingCache=new mT;var c=new Set;s.set(t,c)}else c=s.get(t),c===void 0&&(c=new Set,s.set(t,c));c.has(i)||(ih=!0,c.add(i),e=ST.bind(null,e,t,i),t.then(e,e))}function ST(e,t,i){var s=e.pingCache;s!==null&&s.delete(t),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,We===e&&(xe&i)===i&&(ht===4||ht===3&&(xe&62914560)===xe&&300>Gt()-hc?(Ve&2)===0&&fo(e,0):ah|=i,uo===xe&&(uo=0)),fi(e)}function ey(e,t){t===0&&(t=Vo()),e=ts(e,t),e!==null&&(Ka(e,t),fi(e))}function TT(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),ey(e,i)}function ET(e,t){var i=0;switch(e.tag){case 31:case 13:var s=e.stateNode,c=e.memoizedState;c!==null&&(i=c.retryLane);break;case 19:s=e.stateNode;break;case 22:s=e.stateNode._retryCache;break;default:throw Error(o(314))}s!==null&&s.delete(t),ey(e,i)}function AT(e,t){return Ua(e,t)}var Cc=null,mo=null,hh=!1,Sc=!1,fh=!1,pa=0;function fi(e){e!==mo&&e.next===null&&(mo===null?Cc=mo=e:mo=mo.next=e),Sc=!0,hh||(hh=!0,wT())}function Ur(e,t){if(!fh&&Sc){fh=!0;do for(var i=!1,s=Cc;s!==null;){if(e!==0){var c=s.pendingLanes;if(c===0)var u=0;else{var g=s.suspendedLanes,C=s.pingedLanes;u=(1<<31-Qt(42|e)+1)-1,u&=c&~(g&~C),u=u&201326741?u&201326741|1:u?u|2:0}u!==0&&(i=!0,ay(s,u))}else u=xe,u=Ba(s,s===We?u:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),(u&3)===0||Si(s,u)||(i=!0,ay(s,u));s=s.next}while(i);fh=!1}}function bT(){ty()}function ty(){Sc=hh=!1;var e=0;pa!==0&&UT()&&(e=pa);for(var t=Gt(),i=null,s=Cc;s!==null;){var c=s.next,u=ny(s,t);u===0?(s.next=null,i===null?Cc=c:i.next=c,c===null&&(mo=i)):(i=s,(e!==0||(u&3)!==0)&&(Sc=!0)),s=c}wt!==0&&wt!==5||Ur(e),pa!==0&&(pa=0)}function ny(e,t){for(var i=e.suspendedLanes,s=e.pingedLanes,c=e.expirationTimes,u=e.pendingLanes&-62914561;0<u;){var g=31-Qt(u),C=1<<g,b=c[g];b===-1?((C&i)===0||(C&s)!==0)&&(c[g]=Go(C,t)):b<=t&&(e.expiredLanes|=C),u&=~C}if(t=We,i=xe,i=Ba(e,e===t?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s=e.callbackNode,i===0||e===t&&(Qe===2||Qe===9)||e.cancelPendingCommit!==null)return s!==null&&s!==null&&ja(s),e.callbackNode=null,e.callbackPriority=0;if((i&3)===0||Si(e,i)){if(t=i&-i,t===e.callbackPriority)return t;switch(s!==null&&ja(s),Xi(i)){case 2:case 8:i=Rs;break;case 32:i=pn;break;case 268435456:i=Ha;break;default:i=pn}return s=iy.bind(null,e),i=Ua(i,s),e.callbackPriority=t,e.callbackNode=i,t}return s!==null&&s!==null&&ja(s),e.callbackPriority=2,e.callbackNode=null,2}function iy(e,t){if(wt!==0&&wt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var i=e.callbackNode;if(vc()&&e.callbackNode!==i)return null;var s=xe;return s=Ba(e,e===We?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s===0?null:(zp(e,s,t),ny(e,Gt()),e.callbackNode!=null&&e.callbackNode===i?iy.bind(null,e):null)}function ay(e,t){if(vc())return null;zp(e,t,!0)}function wT(){HT(function(){(Ve&6)!==0?Ua(zo,bT):ty()})}function gh(){if(pa===0){var e=Ws;e===0&&(e=La,La<<=1,(La&261888)===0&&(La=256)),pa=e}return pa}function sy(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Ot(""+e)}function oy(e,t){var i=t.ownerDocument.createElement("input");return i.name=t.name,i.value=t.value,e.id&&i.setAttribute("form",e.id),t.parentNode.insertBefore(i,t),e=new FormData(e),i.parentNode.removeChild(i),e}function _T(e,t,i,s,c){if(t==="submit"&&i&&i.stateNode===c){var u=sy((c[kt]||null).action),g=s.submitter;g&&(t=(t=g[kt]||null)?sy(t.formAction):g.getAttribute("formAction"),t!==null&&(u=t,g=null));var C=new ea("action","action",null,s,c);e.push({event:C,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(pa!==0){var b=g?oy(c,g):new FormData(c);Dd(i,{pending:!0,data:b,method:c.method,action:u},null,b)}}else typeof u=="function"&&(C.preventDefault(),b=g?oy(c,g):new FormData(c),Dd(i,{pending:!0,data:b,method:c.method,action:u},u,b))},currentTarget:c}]})}}for(var mh=0;mh<Zu.length;mh++){var ph=Zu[mh],kT=ph.toLowerCase(),OT=ph[0].toUpperCase()+ph.slice(1);Vn(kT,"on"+OT)}Vn(Hg,"onAnimationEnd"),Vn(zg,"onAnimationIteration"),Vn(Lg,"onAnimationStart"),Vn("dblclick","onDoubleClick"),Vn("focusin","onFocus"),Vn("focusout","onBlur"),Vn(VS,"onTransitionRun"),Vn(FS,"onTransitionStart"),Vn(YS,"onTransitionCancel"),Vn(Bg,"onTransitionEnd"),Ai("onMouseEnter",["mouseout","mouseover"]),Ai("onMouseLeave",["mouseout","mouseover"]),Ai("onPointerEnter",["pointerout","pointerover"]),Ai("onPointerLeave",["pointerout","pointerover"]),vn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),vn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),vn("onBeforeInput",["compositionend","keypress","textInput","paste"]),vn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),vn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),vn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),IT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(jr));function ry(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var s=e[i],c=s.event;s=s.listeners;e:{var u=void 0;if(t)for(var g=s.length-1;0<=g;g--){var C=s[g],b=C.instance,N=C.currentTarget;if(C=C.listener,b!==u&&c.isPropagationStopped())break e;u=C,c.currentTarget=N;try{u(c)}catch(K){Ul(K)}c.currentTarget=null,u=b}else for(g=0;g<s.length;g++){if(C=s[g],b=C.instance,N=C.currentTarget,C=C.listener,b!==u&&c.isPropagationStopped())break e;u=C,c.currentTarget=N;try{u(c)}catch(K){Ul(K)}c.currentTarget=null,u=b}}}}function Me(e,t){var i=t[Ga];i===void 0&&(i=t[Ga]=new Set);var s=e+"__bubble";i.has(s)||(ly(t,e,2,!1),i.add(s))}function yh(e,t,i){var s=0;t&&(s|=4),ly(i,e,s,t)}var Tc="_reactListening"+Math.random().toString(36).slice(2);function vh(e){if(!e[Tc]){e[Tc]=!0,qt.forEach(function(i){i!=="selectionchange"&&(IT.has(i)||yh(i,!1,e),yh(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Tc]||(t[Tc]=!0,yh("selectionchange",!1,t))}}function ly(e,t,i,s){switch(Hy(t)){case 2:var c=iE;break;case 8:c=aE;break;default:c=xh}i=c.bind(null,t,i,e),c=void 0,!$o||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),s?c!==void 0?e.addEventListener(t,i,{capture:!0,passive:c}):e.addEventListener(t,i,!0):c!==void 0?e.addEventListener(t,i,{passive:c}):e.addEventListener(t,i,!1)}function Ch(e,t,i,s,c){var u=s;if((t&1)===0&&(t&2)===0&&s!==null)e:for(;;){if(s===null)return;var g=s.tag;if(g===3||g===4){var C=s.stateNode.containerInfo;if(C===c)break;if(g===4)for(g=s.return;g!==null;){var b=g.tag;if((b===3||b===4)&&g.stateNode.containerInfo===c)return;g=g.return}for(;C!==null;){if(g=$i(C),g===null)return;if(b=g.tag,b===5||b===6||b===26||b===27){s=u=g;continue e}C=C.parentNode}}s=s.return}Zo(function(){var N=u,K=qa(i),V=[];e:{var x=Kg.get(e);if(x!==void 0){var z=ea,oe=e;switch(e){case"keypress":if(Ls(i)===0)break e;case"keydown":case"keyup":z=Lu;break;case"focusin":oe="focus",z=sr;break;case"focusout":oe="blur",z=sr;break;case"beforeblur":case"afterblur":z=sr;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":z=_l;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":z=ar;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":z=rr;break;case Hg:case zg:case Lg:z=Nu;break;case Bg:z=Pu;break;case"scroll":case"scrollend":z=wl;break;case"wheel":z=Vu;break;case"copy":case"cut":case"paste":z=xu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":z=Rl;break;case"toggle":case"beforetoggle":z=Yu}var ge=(t&4)!==0,$e=!ge&&(e==="scroll"||e==="scrollend"),_=ge?x!==null?x+"Capture":null:x;ge=[];for(var w=N,I;w!==null;){var G=w;if(I=G.stateNode,G=G.tag,G!==5&&G!==26&&G!==27||I===null||_===null||(G=_i(w,_),G!=null&&ge.push(Hr(w,G,I))),$e)break;w=w.return}0<ge.length&&(x=new z(x,oe,null,i,K),V.push({event:x,listeners:ge}))}}if((t&7)===0){e:{if(x=e==="mouseover"||e==="pointerover",z=e==="mouseout"||e==="pointerout",x&&i!==Hs&&(oe=i.relatedTarget||i.fromElement)&&($i(oe)||oe[Ti]))break e;if((z||x)&&(x=K.window===K?K:(x=K.ownerDocument)?x.defaultView||x.parentWindow:window,z?(oe=i.relatedTarget||i.toElement,z=N,oe=oe?$i(oe):null,oe!==null&&($e=d(oe),ge=oe.tag,oe!==$e||ge!==5&&ge!==27&&ge!==6)&&(oe=null)):(z=null,oe=N),z!==oe)){if(ge=_l,G="onMouseLeave",_="onMouseEnter",w="mouse",(e==="pointerout"||e==="pointerover")&&(ge=Rl,G="onPointerLeave",_="onPointerEnter",w="pointer"),$e=z==null?x:Ge(z),I=oe==null?x:Ge(oe),x=new ge(G,w+"leave",z,i,K),x.target=$e,x.relatedTarget=I,G=null,$i(K)===N&&(ge=new ge(_,w+"enter",oe,i,K),ge.target=I,ge.relatedTarget=$e,G=ge),$e=G,z&&oe)t:{for(ge=RT,_=z,w=oe,I=0,G=_;G;G=ge(G))I++;G=0;for(var he=w;he;he=ge(he))G++;for(;0<I-G;)_=ge(_),I--;for(;0<G-I;)w=ge(w),G--;for(;I--;){if(_===w||w!==null&&_===w.alternate){ge=_;break t}_=ge(_),w=ge(w)}ge=null}else ge=null;z!==null&&cy(V,x,z,ge,!1),oe!==null&&$e!==null&&cy(V,$e,oe,ge,!0)}}e:{if(x=N?Ge(N):window,z=x.nodeName&&x.nodeName.toLowerCase(),z==="select"||z==="input"&&x.type==="file")var Ke=Xt;else if(L(x))if(tn)Ke=Rg;else{Ke=$a;var ce=Oi}else z=x.nodeName,!z||z.toLowerCase()!=="input"||x.type!=="checkbox"&&x.type!=="radio"?N&&Dt(N.elementType)&&(Ke=Xt):Ke=Ig;if(Ke&&(Ke=Ke(e,N))){ue(V,Ke,i,K);break e}ce&&ce(e,x,N),e==="focusout"&&N&&x.type==="number"&&N.memoizedProps.value!=null&&Ya(x,"number",x.value)}switch(ce=N?Ge(N):window,e){case"focusin":(L(ce)||ce.contentEditable==="true")&&(Fs=ce,qu=N,hr=null);break;case"focusout":hr=qu=Fs=null;break;case"mousedown":Ju=!0;break;case"contextmenu":case"mouseup":case"dragend":Ju=!1,Ug(V,i,K);break;case"selectionchange":if(GS)break;case"keydown":case"keyup":Ug(V,i,K)}var _e;if(Ps)e:{switch(e){case"compositionstart":var De="onCompositionStart";break e;case"compositionend":De="onCompositionEnd";break e;case"compositionupdate":De="onCompositionUpdate";break e}De=void 0}else O?m(e,i)&&(De="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(De="onCompositionStart");De&&(Ml&&i.locale!=="ko"&&(O||De!=="onCompositionStart"?De==="onCompositionEnd"&&O&&(_e=er()):(Te=K,Wo="value"in Te?Te.value:Te.textContent,O=!0)),ce=Ec(N,De),0<ce.length&&(De=new Ol(De,e,null,i,K),V.push({event:De,listeners:ce}),_e?De.data=_e:(_e=E(i),_e!==null&&(De.data=_e)))),(_e=lr?U(e,i):B(e,i))&&(De=Ec(N,"onBeforeInput"),0<De.length&&(ce=new Ol("onBeforeInput","beforeinput",null,i,K),V.push({event:ce,listeners:De}),ce.data=_e)),_T(V,e,N,i,K)}ry(V,t)})}function Hr(e,t,i){return{instance:e,listener:t,currentTarget:i}}function Ec(e,t){for(var i=t+"Capture",s=[];e!==null;){var c=e,u=c.stateNode;if(c=c.tag,c!==5&&c!==26&&c!==27||u===null||(c=_i(e,i),c!=null&&s.unshift(Hr(e,c,u)),c=_i(e,t),c!=null&&s.push(Hr(e,c,u))),e.tag===3)return s;e=e.return}return[]}function RT(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function cy(e,t,i,s,c){for(var u=t._reactName,g=[];i!==null&&i!==s;){var C=i,b=C.alternate,N=C.stateNode;if(C=C.tag,b!==null&&b===s)break;C!==5&&C!==26&&C!==27||N===null||(b=N,c?(N=_i(i,u),N!=null&&g.unshift(Hr(i,N,b))):c||(N=_i(i,u),N!=null&&g.push(Hr(i,N,b)))),i=i.return}g.length!==0&&e.push({event:t,listeners:g})}var NT=/\r\n?/g,MT=/\u0000|\uFFFD/g;function uy(e){return(typeof e=="string"?e:""+e).replace(NT,`
`).replace(MT,"")}function dy(e,t){return t=uy(t),uy(e)===t}function Ze(e,t,i,s,c,u){switch(i){case"children":typeof s=="string"?t==="body"||t==="textarea"&&s===""||Nn(e,s):(typeof s=="number"||typeof s=="bigint")&&t!=="body"&&Nn(e,""+s);break;case"className":Wi(e,"class",s);break;case"tabIndex":Wi(e,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":Wi(e,i,s);break;case"style":Al(e,s,u);break;case"data":if(t!=="object"){Wi(e,"data",s);break}case"src":case"href":if(s===""&&(t!=="a"||i!=="href")){e.removeAttribute(i);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(i);break}s=Ot(""+s),e.setAttribute(i,s);break;case"action":case"formAction":if(typeof s=="function"){e.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof u=="function"&&(i==="formAction"?(t!=="input"&&Ze(e,t,"name",c.name,c,null),Ze(e,t,"formEncType",c.formEncType,c,null),Ze(e,t,"formMethod",c.formMethod,c,null),Ze(e,t,"formTarget",c.formTarget,c,null)):(Ze(e,t,"encType",c.encType,c,null),Ze(e,t,"method",c.method,c,null),Ze(e,t,"target",c.target,c,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(i);break}s=Ot(""+s),e.setAttribute(i,s);break;case"onClick":s!=null&&(e.onclick=Ut);break;case"onScroll":s!=null&&Me("scroll",e);break;case"onScrollEnd":s!=null&&Me("scrollend",e);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(o(61));if(i=s.__html,i!=null){if(c.children!=null)throw Error(o(60));e.innerHTML=i}}break;case"multiple":e.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":e.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){e.removeAttribute("xlink:href");break}i=Ot(""+s),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(i,""+s):e.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(i,""):e.removeAttribute(i);break;case"capture":case"download":s===!0?e.setAttribute(i,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(i,s):e.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?e.setAttribute(i,s):e.removeAttribute(i);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?e.removeAttribute(i):e.setAttribute(i,s);break;case"popover":Me("beforetoggle",e),Me("toggle",e),Us(e,"popover",s);break;case"xlinkActuate":Cn(e,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":Cn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":Cn(e,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":Cn(e,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":Cn(e,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":Cn(e,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":Cn(e,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":Cn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":Cn(e,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":Us(e,"is",s);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=Jt.get(i)||i,Us(e,i,s))}}function Sh(e,t,i,s,c,u){switch(i){case"style":Al(e,s,u);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(o(61));if(i=s.__html,i!=null){if(c.children!=null)throw Error(o(60));e.innerHTML=i}}break;case"children":typeof s=="string"?Nn(e,s):(typeof s=="number"||typeof s=="bigint")&&Nn(e,""+s);break;case"onScroll":s!=null&&Me("scroll",e);break;case"onScrollEnd":s!=null&&Me("scrollend",e);break;case"onClick":s!=null&&(e.onclick=Ut);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Va.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(c=i.endsWith("Capture"),t=i.slice(2,c?i.length-7:void 0),u=e[kt]||null,u=u!=null?u[i]:null,typeof u=="function"&&e.removeEventListener(t,u,c),typeof s=="function")){typeof u!="function"&&u!==null&&(i in e?e[i]=null:e.hasAttribute(i)&&e.removeAttribute(i)),e.addEventListener(t,s,c);break e}i in e?e[i]=s:s===!0?e.setAttribute(i,""):Us(e,i,s)}}}function Bt(e,t,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Me("error",e),Me("load",e);var s=!1,c=!1,u;for(u in i)if(i.hasOwnProperty(u)){var g=i[u];if(g!=null)switch(u){case"src":s=!0;break;case"srcSet":c=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:Ze(e,t,u,g,i,null)}}c&&Ze(e,t,"srcSet",i.srcSet,i,null),s&&Ze(e,t,"src",i.src,i,null);return;case"input":Me("invalid",e);var C=u=g=c=null,b=null,N=null;for(s in i)if(i.hasOwnProperty(s)){var K=i[s];if(K!=null)switch(s){case"name":c=K;break;case"type":g=K;break;case"checked":b=K;break;case"defaultChecked":N=K;break;case"value":u=K;break;case"defaultValue":C=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(o(137,t));break;default:Ze(e,t,s,K,i,null)}}js(e,u,C,b,N,g,c,!1);return;case"select":Me("invalid",e),s=g=u=null;for(c in i)if(i.hasOwnProperty(c)&&(C=i[c],C!=null))switch(c){case"value":u=C;break;case"defaultValue":g=C;break;case"multiple":s=C;default:Ze(e,t,c,C,i,null)}t=u,i=g,e.multiple=!!s,t!=null?xt(e,!!s,t,!1):i!=null&&xt(e,!!s,i,!0);return;case"textarea":Me("invalid",e),u=c=s=null;for(g in i)if(i.hasOwnProperty(g)&&(C=i[g],C!=null))switch(g){case"value":s=C;break;case"defaultValue":c=C;break;case"children":u=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(o(91));break;default:Ze(e,t,g,C,i,null)}Tl(e,s,c,u);return;case"option":for(b in i)i.hasOwnProperty(b)&&(s=i[b],s!=null)&&(b==="selected"?e.selected=s&&typeof s!="function"&&typeof s!="symbol":Ze(e,t,b,s,i,null));return;case"dialog":Me("beforetoggle",e),Me("toggle",e),Me("cancel",e),Me("close",e);break;case"iframe":case"object":Me("load",e);break;case"video":case"audio":for(s=0;s<jr.length;s++)Me(jr[s],e);break;case"image":Me("error",e),Me("load",e);break;case"details":Me("toggle",e);break;case"embed":case"source":case"link":Me("error",e),Me("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(N in i)if(i.hasOwnProperty(N)&&(s=i[N],s!=null))switch(N){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:Ze(e,t,N,s,i,null)}return;default:if(Dt(t)){for(K in i)i.hasOwnProperty(K)&&(s=i[K],s!==void 0&&Sh(e,t,K,s,i,void 0));return}}for(C in i)i.hasOwnProperty(C)&&(s=i[C],s!=null&&Ze(e,t,C,s,i,null))}function xT(e,t,i,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var c=null,u=null,g=null,C=null,b=null,N=null,K=null;for(z in i){var V=i[z];if(i.hasOwnProperty(z)&&V!=null)switch(z){case"checked":break;case"value":break;case"defaultValue":b=V;default:s.hasOwnProperty(z)||Ze(e,t,z,null,s,V)}}for(var x in s){var z=s[x];if(V=i[x],s.hasOwnProperty(x)&&(z!=null||V!=null))switch(x){case"type":u=z;break;case"name":c=z;break;case"checked":N=z;break;case"defaultChecked":K=z;break;case"value":g=z;break;case"defaultValue":C=z;break;case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(o(137,t));break;default:z!==V&&Ze(e,t,x,z,s,V)}}Fa(e,g,C,b,N,K,u,c);return;case"select":z=g=C=x=null;for(u in i)if(b=i[u],i.hasOwnProperty(u)&&b!=null)switch(u){case"value":break;case"multiple":z=b;default:s.hasOwnProperty(u)||Ze(e,t,u,null,s,b)}for(c in s)if(u=s[c],b=i[c],s.hasOwnProperty(c)&&(u!=null||b!=null))switch(c){case"value":x=u;break;case"defaultValue":C=u;break;case"multiple":g=u;default:u!==b&&Ze(e,t,c,u,s,b)}t=C,i=g,s=z,x!=null?xt(e,!!i,x,!1):!!s!=!!i&&(t!=null?xt(e,!!i,t,!0):xt(e,!!i,i?[]:"",!1));return;case"textarea":z=x=null;for(C in i)if(c=i[C],i.hasOwnProperty(C)&&c!=null&&!s.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:Ze(e,t,C,null,s,c)}for(g in s)if(c=s[g],u=i[g],s.hasOwnProperty(g)&&(c!=null||u!=null))switch(g){case"value":x=c;break;case"defaultValue":z=c;break;case"children":break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(o(91));break;default:c!==u&&Ze(e,t,g,c,s,u)}Sl(e,x,z);return;case"option":for(var oe in i)x=i[oe],i.hasOwnProperty(oe)&&x!=null&&!s.hasOwnProperty(oe)&&(oe==="selected"?e.selected=!1:Ze(e,t,oe,null,s,x));for(b in s)x=s[b],z=i[b],s.hasOwnProperty(b)&&x!==z&&(x!=null||z!=null)&&(b==="selected"?e.selected=x&&typeof x!="function"&&typeof x!="symbol":Ze(e,t,b,x,s,z));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ge in i)x=i[ge],i.hasOwnProperty(ge)&&x!=null&&!s.hasOwnProperty(ge)&&Ze(e,t,ge,null,s,x);for(N in s)if(x=s[N],z=i[N],s.hasOwnProperty(N)&&x!==z&&(x!=null||z!=null))switch(N){case"children":case"dangerouslySetInnerHTML":if(x!=null)throw Error(o(137,t));break;default:Ze(e,t,N,x,s,z)}return;default:if(Dt(t)){for(var $e in i)x=i[$e],i.hasOwnProperty($e)&&x!==void 0&&!s.hasOwnProperty($e)&&Sh(e,t,$e,void 0,s,x);for(K in s)x=s[K],z=i[K],!s.hasOwnProperty(K)||x===z||x===void 0&&z===void 0||Sh(e,t,K,x,s,z);return}}for(var _ in i)x=i[_],i.hasOwnProperty(_)&&x!=null&&!s.hasOwnProperty(_)&&Ze(e,t,_,null,s,x);for(V in s)x=s[V],z=i[V],!s.hasOwnProperty(V)||x===z||x==null&&z==null||Ze(e,t,V,x,s,z)}function hy(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function DT(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,i=performance.getEntriesByType("resource"),s=0;s<i.length;s++){var c=i[s],u=c.transferSize,g=c.initiatorType,C=c.duration;if(u&&C&&hy(g)){for(g=0,C=c.responseEnd,s+=1;s<i.length;s++){var b=i[s],N=b.startTime;if(N>C)break;var K=b.transferSize,V=b.initiatorType;K&&hy(V)&&(b=b.responseEnd,g+=K*(b<C?1:(C-N)/(b-N)))}if(--s,t+=8*(u+g)/(c.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Th=null,Eh=null;function Ac(e){return e.nodeType===9?e:e.ownerDocument}function fy(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function gy(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Ah(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var bh=null;function UT(){var e=window.event;return e&&e.type==="popstate"?e===bh?!1:(bh=e,!0):(bh=null,!1)}var my=typeof setTimeout=="function"?setTimeout:void 0,jT=typeof clearTimeout=="function"?clearTimeout:void 0,py=typeof Promise=="function"?Promise:void 0,HT=typeof queueMicrotask=="function"?queueMicrotask:typeof py<"u"?function(e){return py.resolve(null).then(e).catch(zT)}:my;function zT(e){setTimeout(function(){throw e})}function ya(e){return e==="head"}function yy(e,t){var i=t,s=0;do{var c=i.nextSibling;if(e.removeChild(i),c&&c.nodeType===8)if(i=c.data,i==="/$"||i==="/&"){if(s===0){e.removeChild(c),Co(t);return}s--}else if(i==="$"||i==="$?"||i==="$~"||i==="$!"||i==="&")s++;else if(i==="html")zr(e.ownerDocument.documentElement);else if(i==="head"){i=e.ownerDocument.head,zr(i);for(var u=i.firstChild;u;){var g=u.nextSibling,C=u.nodeName;u[yn]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&u.rel.toLowerCase()==="stylesheet"||i.removeChild(u),u=g}}else i==="body"&&zr(e.ownerDocument.body);i=c}while(i);Co(t)}function vy(e,t){var i=e;e=0;do{var s=i.nextSibling;if(i.nodeType===1?t?(i._stashedDisplay=i.style.display,i.style.display="none"):(i.style.display=i._stashedDisplay||"",i.getAttribute("style")===""&&i.removeAttribute("style")):i.nodeType===3&&(t?(i._stashedText=i.nodeValue,i.nodeValue=""):i.nodeValue=i._stashedText||""),s&&s.nodeType===8)if(i=s.data,i==="/$"){if(e===0)break;e--}else i!=="$"&&i!=="$?"&&i!=="$~"&&i!=="$!"||e++;i=s}while(i)}function wh(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var i=t;switch(t=t.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":wh(i),Yo(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}e.removeChild(i)}}function LT(e,t,i,s){for(;e.nodeType===1;){var c=i;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!s&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(s){if(!e[yn])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(u=e.getAttribute("rel"),u==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(u!==c.rel||e.getAttribute("href")!==(c.href==null||c.href===""?null:c.href)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin)||e.getAttribute("title")!==(c.title==null?null:c.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(u=e.getAttribute("src"),(u!==(c.src==null?null:c.src)||e.getAttribute("type")!==(c.type==null?null:c.type)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin))&&u&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var u=c.name==null?null:""+c.name;if(c.type==="hidden"&&e.getAttribute("name")===u)return e}else return e;if(e=zn(e.nextSibling),e===null)break}return null}function BT(e,t,i){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=zn(e.nextSibling),e===null))return null;return e}function Cy(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=zn(e.nextSibling),e===null))return null;return e}function _h(e){return e.data==="$?"||e.data==="$~"}function kh(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function KT(e,t){var i=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||i.readyState!=="loading")t();else{var s=function(){t(),i.removeEventListener("DOMContentLoaded",s)};i.addEventListener("DOMContentLoaded",s),e._reactRetry=s}}function zn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Oh=null;function Sy(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"||i==="/&"){if(t===0)return zn(e.nextSibling);t--}else i!=="$"&&i!=="$!"&&i!=="$?"&&i!=="$~"&&i!=="&"||t++}e=e.nextSibling}return null}function Ty(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"){if(t===0)return e;t--}else i!=="/$"&&i!=="/&"||t++}e=e.previousSibling}return null}function Ey(e,t,i){switch(t=Ac(i),e){case"html":if(e=t.documentElement,!e)throw Error(o(452));return e;case"head":if(e=t.head,!e)throw Error(o(453));return e;case"body":if(e=t.body,!e)throw Error(o(454));return e;default:throw Error(o(451))}}function zr(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Yo(e)}var Ln=new Map,Ay=new Set;function bc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Gi=Y.d;Y.d={f:PT,r:GT,D:VT,C:FT,L:YT,m:QT,X:JT,S:qT,M:XT};function PT(){var e=Gi.f(),t=mc();return e||t}function GT(e){var t=si(e);t!==null&&t.tag===5&&t.type==="form"?Bm(t):Gi.r(e)}var po=typeof document>"u"?null:document;function by(e,t,i){var s=po;if(s&&typeof t=="string"&&t){var c=en(t);c='link[rel="'+e+'"][href="'+c+'"]',typeof i=="string"&&(c+='[crossorigin="'+i+'"]'),Ay.has(c)||(Ay.add(c),e={rel:e,crossOrigin:i,href:t},s.querySelector(c)===null&&(t=s.createElement("link"),Bt(t,"link",e),ct(t),s.head.appendChild(t)))}}function VT(e){Gi.D(e),by("dns-prefetch",e,null)}function FT(e,t){Gi.C(e,t),by("preconnect",e,t)}function YT(e,t,i){Gi.L(e,t,i);var s=po;if(s&&e&&t){var c='link[rel="preload"][as="'+en(t)+'"]';t==="image"&&i&&i.imageSrcSet?(c+='[imagesrcset="'+en(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(c+='[imagesizes="'+en(i.imageSizes)+'"]')):c+='[href="'+en(e)+'"]';var u=c;switch(t){case"style":u=yo(e);break;case"script":u=vo(e)}Ln.has(u)||(e=T({rel:"preload",href:t==="image"&&i&&i.imageSrcSet?void 0:e,as:t},i),Ln.set(u,e),s.querySelector(c)!==null||t==="style"&&s.querySelector(Lr(u))||t==="script"&&s.querySelector(Br(u))||(t=s.createElement("link"),Bt(t,"link",e),ct(t),s.head.appendChild(t)))}}function QT(e,t){Gi.m(e,t);var i=po;if(i&&e){var s=t&&typeof t.as=="string"?t.as:"script",c='link[rel="modulepreload"][as="'+en(s)+'"][href="'+en(e)+'"]',u=c;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":u=vo(e)}if(!Ln.has(u)&&(e=T({rel:"modulepreload",href:e},t),Ln.set(u,e),i.querySelector(c)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(Br(u)))return}s=i.createElement("link"),Bt(s,"link",e),ct(s),i.head.appendChild(s)}}}function qT(e,t,i){Gi.S(e,t,i);var s=po;if(s&&e){var c=oi(s).hoistableStyles,u=yo(e);t=t||"default";var g=c.get(u);if(!g){var C={loading:0,preload:null};if(g=s.querySelector(Lr(u)))C.loading=5;else{e=T({rel:"stylesheet",href:e,"data-precedence":t},i),(i=Ln.get(u))&&Ih(e,i);var b=g=s.createElement("link");ct(b),Bt(b,"link",e),b._p=new Promise(function(N,K){b.onload=N,b.onerror=K}),b.addEventListener("load",function(){C.loading|=1}),b.addEventListener("error",function(){C.loading|=2}),C.loading|=4,wc(g,t,s)}g={type:"stylesheet",instance:g,count:1,state:C},c.set(u,g)}}}function JT(e,t){Gi.X(e,t);var i=po;if(i&&e){var s=oi(i).hoistableScripts,c=vo(e),u=s.get(c);u||(u=i.querySelector(Br(c)),u||(e=T({src:e,async:!0},t),(t=Ln.get(c))&&Rh(e,t),u=i.createElement("script"),ct(u),Bt(u,"link",e),i.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},s.set(c,u))}}function XT(e,t){Gi.M(e,t);var i=po;if(i&&e){var s=oi(i).hoistableScripts,c=vo(e),u=s.get(c);u||(u=i.querySelector(Br(c)),u||(e=T({src:e,async:!0,type:"module"},t),(t=Ln.get(c))&&Rh(e,t),u=i.createElement("script"),ct(u),Bt(u,"link",e),i.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},s.set(c,u))}}function wy(e,t,i,s){var c=(c=le.current)?bc(c):null;if(!c)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(t=yo(i.href),i=oi(c).hoistableStyles,s=i.get(t),s||(s={type:"style",instance:null,count:0,state:null},i.set(t,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){e=yo(i.href);var u=oi(c).hoistableStyles,g=u.get(e);if(g||(c=c.ownerDocument||c,g={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,g),(u=c.querySelector(Lr(e)))&&!u._p&&(g.instance=u,g.state.loading=5),Ln.has(e)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},Ln.set(e,i),u||ZT(c,e,i,g.state))),t&&s===null)throw Error(o(528,""));return g}if(t&&s!==null)throw Error(o(529,""));return null;case"script":return t=i.async,i=i.src,typeof i=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=vo(i),i=oi(c).hoistableScripts,s=i.get(t),s||(s={type:"script",instance:null,count:0,state:null},i.set(t,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function yo(e){return'href="'+en(e)+'"'}function Lr(e){return'link[rel="stylesheet"]['+e+"]"}function _y(e){return T({},e,{"data-precedence":e.precedence,precedence:null})}function ZT(e,t,i,s){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?s.loading=1:(t=e.createElement("link"),s.preload=t,t.addEventListener("load",function(){return s.loading|=1}),t.addEventListener("error",function(){return s.loading|=2}),Bt(t,"link",i),ct(t),e.head.appendChild(t))}function vo(e){return'[src="'+en(e)+'"]'}function Br(e){return"script[async]"+e}function ky(e,t,i){if(t.count++,t.instance===null)switch(t.type){case"style":var s=e.querySelector('style[data-href~="'+en(i.href)+'"]');if(s)return t.instance=s,ct(s),s;var c=T({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return s=(e.ownerDocument||e).createElement("style"),ct(s),Bt(s,"style",c),wc(s,i.precedence,e),t.instance=s;case"stylesheet":c=yo(i.href);var u=e.querySelector(Lr(c));if(u)return t.state.loading|=4,t.instance=u,ct(u),u;s=_y(i),(c=Ln.get(c))&&Ih(s,c),u=(e.ownerDocument||e).createElement("link"),ct(u);var g=u;return g._p=new Promise(function(C,b){g.onload=C,g.onerror=b}),Bt(u,"link",s),t.state.loading|=4,wc(u,i.precedence,e),t.instance=u;case"script":return u=vo(i.src),(c=e.querySelector(Br(u)))?(t.instance=c,ct(c),c):(s=i,(c=Ln.get(u))&&(s=T({},i),Rh(s,c)),e=e.ownerDocument||e,c=e.createElement("script"),ct(c),Bt(c,"link",s),e.head.appendChild(c),t.instance=c);case"void":return null;default:throw Error(o(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(s=t.instance,t.state.loading|=4,wc(s,i.precedence,e));return t.instance}function wc(e,t,i){for(var s=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),c=s.length?s[s.length-1]:null,u=c,g=0;g<s.length;g++){var C=s[g];if(C.dataset.precedence===t)u=C;else if(u!==c)break}u?u.parentNode.insertBefore(e,u.nextSibling):(t=i.nodeType===9?i.head:i,t.insertBefore(e,t.firstChild))}function Ih(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Rh(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var _c=null;function Oy(e,t,i){if(_c===null){var s=new Map,c=_c=new Map;c.set(i,s)}else c=_c,s=c.get(i),s||(s=new Map,c.set(i,s));if(s.has(e))return s;for(s.set(e,null),i=i.getElementsByTagName(e),c=0;c<i.length;c++){var u=i[c];if(!(u[yn]||u[lt]||e==="link"&&u.getAttribute("rel")==="stylesheet")&&u.namespaceURI!=="http://www.w3.org/2000/svg"){var g=u.getAttribute(t)||"";g=e+g;var C=s.get(g);C?C.push(u):s.set(g,[u])}}return s}function Iy(e,t,i){e=e.ownerDocument||e,e.head.insertBefore(i,t==="title"?e.querySelector("head > title"):null)}function $T(e,t,i){if(i===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;return t.rel==="stylesheet"?(e=t.disabled,typeof t.precedence=="string"&&e==null):!0;case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Ry(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function WT(e,t,i,s){if(i.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var c=yo(s.href),u=t.querySelector(Lr(c));if(u){t=u._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=kc.bind(e),t.then(e,e)),i.state.loading|=4,i.instance=u,ct(u);return}u=t.ownerDocument||t,s=_y(s),(c=Ln.get(c))&&Ih(s,c),u=u.createElement("link"),ct(u);var g=u;g._p=new Promise(function(C,b){g.onload=C,g.onerror=b}),Bt(u,"link",s),i.instance=u}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(i,t),(t=i.state.preload)&&(i.state.loading&3)===0&&(e.count++,i=kc.bind(e),t.addEventListener("load",i),t.addEventListener("error",i))}}var Nh=0;function eE(e,t){return e.stylesheets&&e.count===0&&Ic(e,e.stylesheets),0<e.count||0<e.imgCount?function(i){var s=setTimeout(function(){if(e.stylesheets&&Ic(e,e.stylesheets),e.unsuspend){var u=e.unsuspend;e.unsuspend=null,u()}},6e4+t);0<e.imgBytes&&Nh===0&&(Nh=62500*DT());var c=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Ic(e,e.stylesheets),e.unsuspend)){var u=e.unsuspend;e.unsuspend=null,u()}},(e.imgBytes>Nh?50:800)+t);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(s),clearTimeout(c)}}:null}function kc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ic(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Oc=null;function Ic(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Oc=new Map,t.forEach(tE,e),Oc=null,kc.call(e))}function tE(e,t){if(!(t.state.loading&4)){var i=Oc.get(e);if(i)var s=i.get(null);else{i=new Map,Oc.set(e,i);for(var c=e.querySelectorAll("link[data-precedence],style[data-precedence]"),u=0;u<c.length;u++){var g=c[u];(g.nodeName==="LINK"||g.getAttribute("media")!=="not all")&&(i.set(g.dataset.precedence,g),s=g)}s&&i.set(null,s)}c=t.instance,g=c.getAttribute("data-precedence"),u=i.get(g)||s,u===s&&i.set(null,c),i.set(g,c),this.count++,s=kc.bind(this),c.addEventListener("load",s),c.addEventListener("error",s),u?u.parentNode.insertBefore(c,u.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(c,e.firstChild)),t.state.loading|=4}}var Kr={$$typeof:ae,Provider:null,Consumer:null,_currentValue:te,_currentValue2:te,_threadCount:0};function nE(e,t,i,s,c,u,g,C,b){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ms(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ms(0),this.hiddenUpdates=Ms(null),this.identifierPrefix=s,this.onUncaughtError=c,this.onCaughtError=u,this.onRecoverableError=g,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=b,this.incompleteTransitions=new Map}function Ny(e,t,i,s,c,u,g,C,b,N,K,V){return e=new nE(e,t,i,g,b,N,K,V,C),t=1,u===!0&&(t|=24),u=En(3,null,null,t),e.current=u,u.stateNode=e,t=ud(),t.refCount++,e.pooledCache=t,t.refCount++,u.memoizedState={element:s,isDehydrated:i,cache:t},gd(u),e}function My(e){return e?(e=qs,e):qs}function xy(e,t,i,s,c,u){c=My(c),s.context===null?s.context=c:s.pendingContext=c,s=oa(t),s.payload={element:i},u=u===void 0?null:u,u!==null&&(s.callback=u),i=ra(e,s,t),i!==null&&(rn(i,e,t),Cr(i,e,t))}function Dy(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function Mh(e,t){Dy(e,t),(e=e.alternate)&&Dy(e,t)}function Uy(e){if(e.tag===13||e.tag===31){var t=ts(e,67108864);t!==null&&rn(t,e,67108864),Mh(e,67108864)}}function jy(e){if(e.tag===13||e.tag===31){var t=kn();t=Ji(t);var i=ts(e,t);i!==null&&rn(i,e,t),Mh(e,t)}}var Rc=!0;function iE(e,t,i,s){var c=D.T;D.T=null;var u=Y.p;try{Y.p=2,xh(e,t,i,s)}finally{Y.p=u,D.T=c}}function aE(e,t,i,s){var c=D.T;D.T=null;var u=Y.p;try{Y.p=8,xh(e,t,i,s)}finally{Y.p=u,D.T=c}}function xh(e,t,i,s){if(Rc){var c=Dh(s);if(c===null)Ch(e,t,s,Nc,i),zy(e,s);else if(oE(c,e,t,i,s))s.stopPropagation();else if(zy(e,s),t&4&&-1<sE.indexOf(e)){for(;c!==null;){var u=si(c);if(u!==null)switch(u.tag){case 3:if(u=u.stateNode,u.current.memoizedState.isDehydrated){var g=ii(u.pendingLanes);if(g!==0){var C=u;for(C.pendingLanes|=2,C.entangledLanes|=2;g;){var b=1<<31-Qt(g);C.entanglements[1]|=b,g&=~b}fi(u),(Ve&6)===0&&(fc=Gt()+500,Ur(0))}}break;case 31:case 13:C=ts(u,2),C!==null&&rn(C,u,2),mc(),Mh(u,2)}if(u=Dh(s),u===null&&Ch(e,t,s,Nc,i),u===c)break;c=u}c!==null&&s.stopPropagation()}else Ch(e,t,s,null,i)}}function Dh(e){return e=qa(e),Uh(e)}var Nc=null;function Uh(e){if(Nc=null,e=$i(e),e!==null){var t=d(e);if(t===null)e=null;else{var i=t.tag;if(i===13){if(e=h(t),e!==null)return e;e=null}else if(i===31){if(e=f(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Nc=e,null}function Hy(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(gl()){case zo:return 2;case Rs:return 8;case pn:case Lo:return 32;case Ha:return 268435456;default:return 32}default:return 32}}var jh=!1,va=null,Ca=null,Sa=null,Pr=new Map,Gr=new Map,Ta=[],sE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function zy(e,t){switch(e){case"focusin":case"focusout":va=null;break;case"dragenter":case"dragleave":Ca=null;break;case"mouseover":case"mouseout":Sa=null;break;case"pointerover":case"pointerout":Pr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gr.delete(t.pointerId)}}function Vr(e,t,i,s,c,u){return e===null||e.nativeEvent!==u?(e={blockedOn:t,domEventName:i,eventSystemFlags:s,nativeEvent:u,targetContainers:[c]},t!==null&&(t=si(t),t!==null&&Uy(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function oE(e,t,i,s,c){switch(t){case"focusin":return va=Vr(va,e,t,i,s,c),!0;case"dragenter":return Ca=Vr(Ca,e,t,i,s,c),!0;case"mouseover":return Sa=Vr(Sa,e,t,i,s,c),!0;case"pointerover":var u=c.pointerId;return Pr.set(u,Vr(Pr.get(u)||null,e,t,i,s,c)),!0;case"gotpointercapture":return u=c.pointerId,Gr.set(u,Vr(Gr.get(u)||null,e,t,i,s,c)),!0}return!1}function Ly(e){var t=$i(e.target);if(t!==null){var i=d(t);if(i!==null){if(t=i.tag,t===13){if(t=h(i),t!==null){e.blockedOn=t,Fo(e.priority,function(){jy(i)});return}}else if(t===31){if(t=f(i),t!==null){e.blockedOn=t,Fo(e.priority,function(){jy(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Mc(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=Dh(e.nativeEvent);if(i===null){i=e.nativeEvent;var s=new i.constructor(i.type,i);Hs=s,i.target.dispatchEvent(s),Hs=null}else return t=si(i),t!==null&&Uy(t),e.blockedOn=i,!1;t.shift()}return!0}function By(e,t,i){Mc(e)&&i.delete(t)}function rE(){jh=!1,va!==null&&Mc(va)&&(va=null),Ca!==null&&Mc(Ca)&&(Ca=null),Sa!==null&&Mc(Sa)&&(Sa=null),Pr.forEach(By),Gr.forEach(By)}function xc(e,t){e.blockedOn===t&&(e.blockedOn=null,jh||(jh=!0,l.unstable_scheduleCallback(l.unstable_NormalPriority,rE)))}var Dc=null;function Ky(e){Dc!==e&&(Dc=e,l.unstable_scheduleCallback(l.unstable_NormalPriority,function(){Dc===e&&(Dc=null);for(var t=0;t<e.length;t+=3){var i=e[t],s=e[t+1],c=e[t+2];if(typeof s!="function"){if(Uh(s||i)===null)continue;break}var u=si(i);u!==null&&(e.splice(t,3),t-=3,Dd(u,{pending:!0,data:c,method:i.method,action:s},s,c))}}))}function Co(e){function t(b){return xc(b,e)}va!==null&&xc(va,e),Ca!==null&&xc(Ca,e),Sa!==null&&xc(Sa,e),Pr.forEach(t),Gr.forEach(t);for(var i=0;i<Ta.length;i++){var s=Ta[i];s.blockedOn===e&&(s.blockedOn=null)}for(;0<Ta.length&&(i=Ta[0],i.blockedOn===null);)Ly(i),i.blockedOn===null&&Ta.shift();if(i=(e.ownerDocument||e).$$reactFormReplay,i!=null)for(s=0;s<i.length;s+=3){var c=i[s],u=i[s+1],g=c[kt]||null;if(typeof u=="function")g||Ky(i);else if(g){var C=null;if(u&&u.hasAttribute("formAction")){if(c=u,g=u[kt]||null)C=g.formAction;else if(Uh(c)!==null)continue}else C=g.action;typeof C=="function"?i[s+1]=C:(i.splice(s,3),s-=3),Ky(i)}}}function Py(){function e(u){u.canIntercept&&u.info==="react-transition"&&u.intercept({handler:function(){return new Promise(function(g){return c=g})},focusReset:"manual",scroll:"manual"})}function t(){c!==null&&(c(),c=null),s||setTimeout(i,20)}function i(){if(!s&&!navigation.transition){var u=navigation.currentEntry;u&&u.url!=null&&navigation.navigate(u.url,{state:u.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var s=!1,c=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(i,100),function(){s=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),c!==null&&(c(),c=null)}}}function Hh(e){this._internalRoot=e}Uc.prototype.render=Hh.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(o(409));var i=t.current,s=kn();xy(i,s,e,t,null,null)},Uc.prototype.unmount=Hh.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;xy(e.current,2,null,e,null,null),mc(),t[Ti]=null}};function Uc(e){this._internalRoot=e}Uc.prototype.unstable_scheduleHydration=function(e){if(e){var t=xs();e={blockedOn:null,target:e,priority:t};for(var i=0;i<Ta.length&&t!==0&&t<Ta[i].priority;i++);Ta.splice(i,0,e),i===0&&Ly(e)}};var Gy=n.version;if(Gy!=="19.2.4")throw Error(o(527,Gy,"19.2.4"));Y.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(o(188)):(e=Object.keys(e).join(","),Error(o(268,e)));return e=p(t),e=e!==null?S(e):null,e=e===null?null:e.stateNode,e};var lE={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:D,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jc.isDisabled&&jc.supportsFiber)try{ti=jc.inject(lE),Nt=jc}catch{}}return Yr.createRoot=function(e,t){if(!r(e))throw Error(o(299));var i=!1,s="",c=Xm,u=Zm,g=$m;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onUncaughtError!==void 0&&(c=t.onUncaughtError),t.onCaughtError!==void 0&&(u=t.onCaughtError),t.onRecoverableError!==void 0&&(g=t.onRecoverableError)),t=Ny(e,1,!1,null,null,i,s,null,c,u,g,Py),e[Ti]=t.current,vh(e),new Hh(t)},Yr.hydrateRoot=function(e,t,i){if(!r(e))throw Error(o(299));var s=!1,c="",u=Xm,g=Zm,C=$m,b=null;return i!=null&&(i.unstable_strictMode===!0&&(s=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onUncaughtError!==void 0&&(u=i.onUncaughtError),i.onCaughtError!==void 0&&(g=i.onCaughtError),i.onRecoverableError!==void 0&&(C=i.onRecoverableError),i.formState!==void 0&&(b=i.formState)),t=Ny(e,1,!0,t,i??null,s,c,b,u,g,C,Py),t.context=My(null),i=t.current,s=kn(),s=Ji(s),c=oa(s),c.callback=null,ra(i,c,s),i=s,t.current.lanes=i,Ka(t,i),fi(t),e[Ti]=t.current,vh(e),new Uc(t)},Yr.version="19.2.4",Yr}var Wy;function vE(){if(Wy)return Bh.exports;Wy=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(n){console.error(n)}}return l(),Bh.exports=yE(),Bh.exports}var CE=vE();const tl="timekerper-sync.json",nl="https://api.github.com",Ef=["zoomLevel","fitMode","debugMode","debugTimeOffset","darkMode"];function il(l){return{Authorization:`Bearer ${l}`,Accept:"application/vnd.github+json","Content-Type":"application/json"}}async function SE(l){let n=1;for(;n<=10;){const a=await fetch(`${nl}/gists?per_page=100&page=${n}`,{headers:il(l)});if(!a.ok)throw new Error(a.status===401?"Invalid token":`GitHub API error: ${a.status}`);const o=await a.json();if(o.length===0)break;for(const r of o)if(r.files[tl]){const d=await fetch(`${nl}/gists/${r.id}`,{headers:il(l)});if(!d.ok)throw new Error(`Failed to fetch gist: ${d.status}`);const f=(await d.json()).files[tl]?.content;return{gistId:r.id,data:f?JSON.parse(f):null}}n++}return null}async function TE(l,n){const a=await fetch(`${nl}/gists`,{method:"POST",headers:il(l),body:JSON.stringify({description:"Timekerper sync data",public:!1,files:{[tl]:{content:JSON.stringify(n)}}})});if(!a.ok)throw new Error(`Failed to create gist: ${a.status}`);return(await a.json()).id}async function ev(l,n,a){const o=await fetch(`${nl}/gists/${n}`,{method:"PATCH",headers:il(l),body:JSON.stringify({files:{[tl]:{content:JSON.stringify(a)}}})});if(!o.ok)throw o.status===404?new Error("gist_not_found"):new Error(`Failed to push: ${o.status}`)}async function tv(l,n){const a=await fetch(`${nl}/gists/${n}`,{headers:il(l)});if(!a.ok)throw a.status===404?new Error("gist_not_found"):new Error(`Failed to pull: ${a.status}`);const r=(await a.json()).files[tl]?.content;if(!r)throw new Error("Sync file missing from gist");return JSON.parse(r)}function Hc(l,n,a,o,r){const d=Object.fromEntries(Object.entries(o).filter(([h])=>!Ef.includes(h)));return{version:1,tasks:l,events:n,tags:a,settings:d,activeTaskId:r,pushedAt:new Date().toISOString()}}function EE(l,n){const a=["tasks","events","tags","activeTaskId"];for(const r of a)if(JSON.stringify(l[r])!==JSON.stringify(n[r]))return!0;const o=r=>r&&Object.fromEntries(Object.entries(r).filter(([d])=>!Ef.includes(d)));return JSON.stringify(o(l.settings))!==JSON.stringify(o(n.settings))}function ke(l){const[n,a]=l.split(":").map(Number);return n*60+a}function dn(l){const n=Math.floor(l/60),a=l%60;return`${n.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`}function Vh(l){const[n,a]=l.split(":").map(Number),o=n>=12?"PM":"AM";return`${n>12?n-12:n===0?12:n}:${a.toString().padStart(2,"0")} ${o}`}function So(l){if(l>=60){const n=Math.floor(l/60),a=l%60;return a>0?`${n}h ${a}m`:`${n}h`}return`${l}m`}function Fh(l,n,a){const[o,r]=l.split(":").map(Number),[d,h]=n.split(":").map(Number),f=o>=12?"pm":"am",v=d>=12?"pm":"am",p=o>12?o-12:o===0?12:o,S=d>12?d-12:d===0?12:d,T=`${p}:${r.toString().padStart(2,"0")}`,k=`${S}:${h.toString().padStart(2,"0")}${v}`,M=f===v?`${T}${k}`:`${T}${f}${k}`;return a?`(${M})`:M}function cn(){const l=new Date;return l.getHours()*60+l.getMinutes()}function Af(l,n,a,o,r){const d=[];for(const p of l){if(p.date!==r)continue;const S=Math.max(ke(p.start),a),T=Math.min(ke(p.end),o);T>S&&d.push([S,T])}for(const p of n||[]){const S=Math.max(p.start,a),T=Math.min(p.end??o,o);T>S&&d.push([S,T])}if(d.length===0)return 0;d.sort((p,S)=>p[0]-S[0]);let h=0,[f,v]=d[0];for(let p=1;p<d.length;p++)d[p][0]<=v?v=Math.max(v,d[p][1]):(h+=v-f,[f,v]=d[p]);return h+=v-f,h}function ft(){const l=new Date;return l.getFullYear()+"-"+String(l.getMonth()+1).padStart(2,"0")+"-"+String(l.getDate()).padStart(2,"0")}function ln(l,n){const a=new Date(l+"T12:00:00");return a.setDate(a.getDate()+n),a.getFullYear()+"-"+String(a.getMonth()+1).padStart(2,"0")+"-"+String(a.getDate()).padStart(2,"0")}function AE(l){return new Date(l+"T12:00:00").toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})}function bE(l){return new Date(l+"T12:00:00").toLocaleDateString("en-US",{weekday:"short",day:"numeric"})}function wE(l){return new Date(l+"T12:00:00").toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}function _E(l){const n=l["X-MICROSOFT-CDO-BUSYSTATUS"];if(n)return n.toUpperCase();const a=l.PARTSTAT;return a==="DECLINED"?"FREE":a==="TENTATIVE"?"TENTATIVE":l.TRANSP==="TRANSPARENT"?"FREE":null}const kE={"Eastern Standard Time":"America/New_York","Central Standard Time":"America/Chicago","Mountain Standard Time":"America/Denver","Pacific Standard Time":"America/Los_Angeles","US Mountain Standard Time":"America/Phoenix","US Eastern Standard Time":"America/Indianapolis","Alaska Standard Time":"America/Anchorage","Hawaiian Standard Time":"Pacific/Honolulu","Atlantic Standard Time":"America/Halifax","Newfoundland Standard Time":"America/St_Johns","GMT Standard Time":"Europe/London","Greenwich Standard Time":"Atlantic/Reykjavik","W. Europe Standard Time":"Europe/Berlin","Central European Standard Time":"Europe/Warsaw","Romance Standard Time":"Europe/Paris","Central Europe Standard Time":"Europe/Budapest","E. Europe Standard Time":"Europe/Chisinau","FLE Standard Time":"Europe/Kiev","GTB Standard Time":"Europe/Bucharest","Russian Standard Time":"Europe/Moscow","Israel Standard Time":"Asia/Jerusalem","South Africa Standard Time":"Africa/Johannesburg","India Standard Time":"Asia/Kolkata","China Standard Time":"Asia/Shanghai","Tokyo Standard Time":"Asia/Tokyo","Korea Standard Time":"Asia/Seoul","AUS Eastern Standard Time":"Australia/Sydney","New Zealand Standard Time":"Pacific/Auckland",UTC:"UTC"};function OE(l,n,a,o,r,d,h){const f=Date.UTC(l,n-1,a,o,r,d),v=new Intl.DateTimeFormat("en-US",{timeZone:h,year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!1}).formatToParts(new Date(f)),p=k=>{const M=v.find(F=>F.type===k);return M?+M.value:0},S=p("hour")===24?0:p("hour"),T=Date.UTC(p("year"),p("month")-1,p("day"),S,p("minute"),p("second"));return new Date(f-(T-f))}function Yh(l){if(!l)return null;let n=null,a=l;if(l.startsWith("TZID=")){const S=l.indexOf(":",5);S>0&&(n=l.slice(5,S).replace(/^"|"$/g,""),a=l.slice(S+1))}else l.includes(":")&&(a=l.split(":").pop());const o=a.match(/^(\d{4})(\d{2})(\d{2})(?:T(\d{2})(\d{2})(\d{2}))?/);if(!o)return null;const[,r,d,h,f,v,p]=o;if(a.endsWith("Z"))return new Date(Date.UTC(+r,+d-1,+h,+(f||0),+(v||0),+(p||0)));if(n){const S=kE[n]||n;try{return OE(+r,+d,+h,+(f||0),+(v||0),+(p||0),S)}catch{}}return new Date(+r,+d-1,+h,+(f||0),+(v||0),+(p||0))}function IE(l){const n=[],o=l.replace(/\r?\n[ \t]/g,"").replace(/\r/g,"").split(`
`);let r=!1,d={},h=0,f=[];for(const v of o){const p=v.trim();if(p==="BEGIN:VEVENT"){r=!0,d={},h=0,f=[];continue}if(p==="END:VEVENT"){r=!1;const S=d.SUMMARY||"Imported Event",T=Yh(d.DTSTART),k=Yh(d.DTEND);if(T&&k){const M=_E(d),F=T.getFullYear()+"-"+String(T.getMonth()+1).padStart(2,"0")+"-"+String(T.getDate()).padStart(2,"0"),J=String(T.getHours()).padStart(2,"0")+":"+String(T.getMinutes()).padStart(2,"0"),ve=String(k.getHours()).padStart(2,"0")+":"+String(k.getMinutes()).padStart(2,"0"),W=d.UID||null,de=d["RECURRENCE-ID"]||null;let ae=null;if(de&&W){const Ie=Yh(de);Ie&&(ae=Ie.getFullYear()+"-"+String(Ie.getMonth()+1).padStart(2,"0")+"-"+String(Ie.getDate()).padStart(2,"0"))}n.push({name:S,date:F,start:J,end:ve,status:M,isMeeting:h>0,categories:f,uid:W,replacesDate:ae})}continue}if(r){const S=p.indexOf(":");if(S===-1)continue;const T=p.substring(0,S),k=p.substring(S+1),M=T.split(";")[0];if(d[M]=k,M==="ATTENDEE"&&h++,M==="CATEGORIES"&&f.push(...k.split(",").map(F=>F.trim()).filter(Boolean)),T.includes("PARTSTAT=")){const F=T.match(/PARTSTAT=([^;]+)/);F&&(d.PARTSTAT=F[1])}if(M==="DTSTART"||M==="DTEND"){const F=T.match(/TZID=([^;:]+)/);F&&(d[M]=`TZID=${F[1]}:${k}`)}}}return n}function lC(l,n,a,o){const r={BUSY:n.icsImportBusy,OOF:n.icsImportOof,TENTATIVE:n.icsImportTentative,FREE:n.icsImportFree,"WORKING-ELSEWHERE":n.icsImportWorkingElsewhere},d=n.icsCategoryRules||[],h=new Map;for(const p of l)!p.replacesDate&&p.uid&&h.set(p.uid,p);for(const p of l)if(p.replacesDate&&p.uid){const S=h.get(p.uid);S?(p.name==="Imported Event"&&(p.name=S.name),(!p.categories||p.categories.length===0)&&(p.categories=S.categories),p.isMeeting||(p.isMeeting=S.isMeeting),p.status||(p.status=S.status)):p.name==="Imported Event"&&(p._orphaned=!0)}const f=l.filter(p=>{if(p._orphaned)return!1;const S=r[p.status];if(S===void 0){if(!n.icsImportBusy)return!1}else if(!S)return!1;if(p.date<a||p.date>o||n.icsImportMeetingsOnly&&!p.isMeeting)return!1;if(p.categories&&p.categories.length>0){for(const T of p.categories)if(d.find(M=>M.include===!1&&M.category.toLowerCase()===T.toLowerCase()))return!1}return!0}),v=new Set;for(const p of f)p.replacesDate&&p.uid&&v.add(`${p.uid}|${p.replacesDate}`);return v.size===0?f:f.filter(p=>p.replacesDate?!0:!(p.uid&&v.has(`${p.uid}|${p.date}`)))}function nv(l,n,a,o,r,d=0){const h=l.filter(T=>T.date===n).map(T=>({start:Math.max(ke(T.start),a),end:Math.min(ke(T.end),o)})).filter(T=>T.end>T.start),f=(r||[]).map(T=>({start:Math.max(T.start,a),end:Math.min(T.end,o)})).filter(T=>T.end>T.start),v=[...h,...f].sort((T,k)=>T.start-k.start);let p=0,S=a;for(const T of v){if(T.start>S){const k=T.start-S;k>=d&&(p+=k)}S=Math.max(S,T.end)}if(S<o){const T=o-S;T>=d&&(p+=T)}return p}function RE(l,n,a,o,r,d){const h=ke(a.extendedStart),f=ke(a.extendedEnd),v=ke(a.workdayStart),p=ke(a.workdayEnd),S=a.restrictTasksToWorkHours?v:h,T=a.restrictTasksToWorkHours?p:f,k=a.debugMode&&a.debugTimeOffset||0,M=cn()+k,F=ft(),J=d===F,ve=d>F,W=n.filter(se=>se.date===d).map(se=>({...se,startMin:ke(se.start),endMin:ke(se.end),type:"event",isPast:J?ke(se.end)<=M:!ve})).filter(se=>se.startMin<f&&se.endMin>h).sort((se,ee)=>se.startMin-ee.startMin),de=[],ae=[];if(J||ve){const se=l.filter($=>!$.completed),ee=se[0],re=J&&(ee?.pauseEvents?.some($=>$.end==null)??!1),Ae=[];if(J&&ee?.startedAtMin!=null&&ee.pauseEvents?.length>0)for(const $ of ee.pauseEvents){const ie=$.start,A=$.end??M;if(A>ie&&(Ae.push({startMin:ie,endMin:A}),A>h&&ie<f)){const R=Math.max(ie,h),Q=Math.min(A,f);ae.push({startMin:R,endMin:Q,start:dn(R),end:dn(Q),type:"pause",name:"Paused",isPast:A<=M})}}let Re;ve?Re=S:ee?.startedAtMin!=null?Re=Math.max(S,ee.startedAtMin):o?Re=Math.max(S,M-r):Re=Math.max(S,Math.min(M,T));let Ye=0;if(ve){const $=R=>{const Q=[];for(const H of l)if(!(!H.completed||!H.workSegments?.length))for(const X of H.workSegments)X.date===R&&Q.push({start:X.start,end:X.end});if(R===F&&ee?.startedAtMin!=null&&ee.pauseEvents?.length>0)for(const H of ee.pauseEvents){const X=H.end??M;X>H.start&&Q.push({start:H.start,end:X})}return Q},ie=a.minFragmentMinutes||5,A=Math.max(S,Math.min(M,T));A<T&&(Ye+=nv(n,F,A,T,$(F),ie));for(let R=ln(F,1);R<d;R=ln(R,1))Ye+=nv(n,R,S,T,$(R),ie)}const tt=[];for(const $ of l)if(!(!$.completed||!$.workSegments?.length))for(const ie of $.workSegments){if(ie.date!==d)continue;const A=Math.max(ie.start,Re),R=Math.min(ie.end,f);R>A&&tt.push({startMin:A,endMin:R})}const Ue=[...W.filter($=>$.endMin>Re),...Ae.filter($=>$.endMin>Re),...tt.filter($=>$.endMin>Re)].sort(($,ie)=>$.startMin-ie.startMin),be=[];for(const $ of Ue){const ie=Math.max($.startMin,Re);be.length===0||ie>be[be.length-1].end?be.push({start:ie,end:$.endMin}):be[be.length-1].end=Math.max(be[be.length-1].end,$.endMin)}const me=[];let fe=Re;for(const $ of be)$.start>fe&&me.push({start:fe,end:$.start}),fe=Math.max(fe,$.end);fe<T&&me.push({start:fe,end:T});let D=0,Y=0,te=Ye;for(const $ of se){const ie=J&&$.id===o,A=$.adjustedDuration??$.duration;let R;if(ve&&te>0){if(te>=A){te-=A;continue}R=A-te,te=0}else R=ie?Math.max(r,A):A;let Q=R,H=0;const X=ve&&R<A;for(;Q>0&&D<me.length;){const le=me[D],ye=le.start+Y,it=le.end-ye;if(it<=0){D++,Y=0;continue}const je=Math.min(Q,it),Rt=a.minFragmentMinutes||5;if(je<Rt&&Q>it){D++,Y=0;continue}const vi=J&&ye+je<=M;de.push({taskId:$.id,taskName:$.name,tagId:$.tagId,start:dn(ye),end:dn(ye+je),startMin:ye,endMin:ye+je,duration:je,isSplit:R>je||H>0||X,blockIndex:H,type:"task",isActive:ie,isPast:vi,isPausedRemaining:re&&$.id===ee?.id&&!vi,continuesBefore:H>0||X,continuesAfter:Q-je>0}),Q-=je,Y+=je,H++,Y>=le.end-le.start&&(D++,Y=0)}}}const Ie=l.filter(se=>se.completed&&se.startedAtMin!=null&&se.actualDuration>=2);for(const se of Ie){const ee=se.workSegments||[];if(ee.length>0){const re=ee.filter(Ae=>Ae.date===d);for(let Ae=0;Ae<re.length;Ae++){const Re=re[Ae],Ye=Math.max(Re.start,h),tt=Math.min(Re.end,f);tt>Ye&&de.push({taskId:se.id,taskName:se.name,tagId:se.tagId,start:dn(Ye),end:dn(tt),startMin:Ye,endMin:tt,duration:tt-Ye,isSplit:re.length>1,blockIndex:Ae,type:"task",isActive:!1,isPast:!0,isCompleted:!0,continuesBefore:Ae>0,continuesAfter:Ae<re.length-1})}}else if(J){const re=Math.max(se.startedAtMin,h),Ae=Math.min(se.startedAtMin+se.actualDuration,f);Ae>re&&de.push({taskId:se.id,taskName:se.name,tagId:se.tagId,start:dn(re),end:dn(Ae),startMin:re,endMin:Ae,duration:Ae-re,isSplit:!1,blockIndex:0,type:"task",isActive:!1,isPast:!0,isCompleted:!0,continuesBefore:!1,continuesAfter:!1})}}return[...W,...de,...ae].sort((se,ee)=>se.startMin-ee.startMin)}function iv(l){const n=Math.round((Date.now()-l.getTime())/1e3);if(n<10)return"just now";if(n<60)return`${n}s ago`;const a=Math.round(n/60);return a<60?`${a}m ago`:l.toLocaleTimeString([],{hour:"numeric",minute:"2-digit"})}function NE({tasks:l,setTasks:n,events:a,setEvents:o,tags:r,setTags:d,settings:h,setSettings:f,activeTaskId:v,setActiveTaskId:p,setTaskStartTime:S,setElapsedMinutes:T,tasksRef:k,eventsRef:M,timeOffset:F}){const[J,ve]=j.useState(()=>localStorage.getItem("timekerper-sync-enabled")==="true"),[W,de]=j.useState(()=>localStorage.getItem("timekerper-sync-pat")||""),[ae,Ie]=j.useState(()=>localStorage.getItem("timekerper-sync-gistId")||""),[se,ee]=j.useState("idle"),[re,Ae]=j.useState(null),[Re,Ye]=j.useState(null),[tt,Ue]=j.useState(null),be=j.useRef(!1),me=j.useRef(!1),fe=j.useRef(!1);j.useEffect(()=>{localStorage.setItem("timekerper-sync-pat",W)},[W]),j.useEffect(()=>{localStorage.setItem("timekerper-sync-gistId",ae)},[ae]),j.useEffect(()=>{localStorage.setItem("timekerper-sync-enabled",J)},[J]);const D=j.useCallback(H=>{if(me.current=!0,H.tasks&&n(H.tasks),H.events&&o(H.events),H.tags&&d(H.tags),H.settings){const X=Object.fromEntries(Object.entries(H.settings).filter(([le])=>!Ef.includes(le)));f(le=>({...le,...X}))}if(H.activeTaskId!=null){const X=(H.tasks||[]).find(le=>le.id===H.activeTaskId&&!le.completed);if(X&&X.startedAtMin!=null){const le=cn()+F,ye=X.startedAtDate||ft(),it=X.pauseEvents&&X.pauseEvents.length>0,je=Af(H.events||[],X.pauseEvents||[],X.startedAtMin,le,ye)+(it?0:X.pauseGapMinutes||0),Rt=Math.max(0,le-X.startedAtMin-je);p(H.activeTaskId),S(Date.now()-Rt*6e4),T(Rt)}else p(null),S(null),T(0)}else H.activeTaskId===null&&(p(null),S(null),T(0));setTimeout(()=>{me.current=!1},0)},[F]),Y=j.useCallback(async()=>{if(!(me.current||be.current||!J||!ae||!W)){be.current=!0,ee("syncing");try{const H=Hc(k.current,M.current,r,h,v);await ev(W,ae,H),fe.current=!1,Ye(new Date),ee("idle"),Ae(null)}catch(H){ee("error"),Ae(H.message)}finally{be.current=!1}}},[J,ae,W,r,h,v]),te=j.useCallback(async()=>{if(!(fe.current||be.current||!J||!ae||!W)){be.current=!0,ee("syncing");try{const H=await tv(W,ae),X=Hc(k.current,M.current,r,h,v);EE(X,H)&&D(H),Ye(new Date),ee("idle"),Ae(null)}catch(H){ee("error"),Ae(H.message)}finally{be.current=!1}}},[J,ae,W,r,h,v,D]),$=async H=>{ee("syncing"),Ae(null);try{const X=await SE(H);if(X)ee("idle"),Ue({pat:H,gistId:X.gistId});else{const le=Hc(k.current,M.current,r,h,v),ye=await TE(H,le);Ie(ye),de(H),ve(!0),ee("idle"),Ye(new Date)}}catch(X){ee("error"),Ae(X.message)}},ie=async H=>{const{pat:X,gistId:le}=tt;Ue(null),ee("syncing");try{if(H==="pull"){const ye=await tv(X,le);D(ye)}else{const ye=Hc(k.current,M.current,r,h,v);await ev(X,le,ye)}Ie(le),de(X),ve(!0),ee("idle"),Ye(new Date)}catch(ye){ee("error"),Ae(ye.message)}},A=()=>{ve(!1),de(""),Ie(""),ee("idle"),Ae(null),Ye(null),localStorage.removeItem("timekerper-sync-pat"),localStorage.removeItem("timekerper-sync-gistId"),localStorage.removeItem("timekerper-sync-enabled")};j.useEffect(()=>{if(!J||me.current)return;fe.current=!0;const H=setTimeout(()=>{me.current||Y()},2e3);return()=>clearTimeout(H)},[l,a,r,h,v,J,Y]),j.useEffect(()=>{if(!J)return;const H=setInterval(te,6e4);return()=>clearInterval(H)},[J,te]),j.useEffect(()=>{J&&ae&&W&&te()},[]);const R=J?y.jsx("span",{className:`sync-indicator ${se}`,title:se==="error"?re:se==="syncing"?"Syncing...":Re?`Last synced ${iv(Re)}`:"Connected"}):null,Q=y.jsxs("div",{className:"settings-section",children:[y.jsx("h4",{children:"Sync"}),y.jsx("p",{className:"settings-hint",children:"Sync your data across devices via a private GitHub Gist"}),J?y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"sync-status-row",children:[y.jsx("span",{className:`sync-dot ${se}`}),y.jsxs("span",{children:[se==="syncing"&&"Syncing...",se==="idle"&&Re&&`Last synced ${iv(Re)}`,se==="idle"&&!Re&&"Connected",se==="error"&&"Sync error"]}),y.jsx("button",{className:"btn-secondary sync-now-btn",onClick:async()=>{await Y(),await te()},children:"Sync Now"})]}),se==="error"&&re&&y.jsx("p",{className:"sync-error",children:re}),y.jsx("button",{className:"btn-secondary",style:{marginTop:"0.5rem"},onClick:A,children:"Disconnect"})]}):y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"form-group",children:[y.jsxs("label",{children:["GitHub Personal Access Token ",y.jsx("span",{className:"label-hint",children:' needs "gist" scope only'})]}),y.jsxs("details",{className:"sync-help",children:[y.jsx("summary",{children:"How do I get one?"}),y.jsxs("ol",{children:[y.jsxs("li",{children:["Go to ",y.jsx("strong",{children:"github.com  Settings  Developer settings  Personal access tokens  Tokens (classic)"})]}),y.jsxs("li",{children:["Click ",y.jsx("strong",{children:"Generate new token (classic)"})]}),y.jsx("li",{children:'Give it a name (e.g. "Timekerper sync")'}),y.jsxs("li",{children:["Check only the ",y.jsx("strong",{children:"gist"})," scope"]}),y.jsxs("li",{children:["Click ",y.jsx("strong",{children:"Generate token"})," and copy it"]}),y.jsx("li",{children:"Paste the same token on each device you want to sync"})]})]}),y.jsx("input",{type:"password",className:"pat-input",value:W,onChange:H=>de(H.target.value),placeholder:"ghp_xxxxxxxxxxxxxxxxxxxx"})]}),tt?y.jsxs("div",{className:"sync-conflict",children:[y.jsx("p",{className:"sync-conflict-msg",children:"Existing sync data found. Which do you want to keep?"}),y.jsxs("div",{className:"sync-conflict-btns",children:[y.jsx("button",{className:"btn-primary",onClick:()=>ie("pull"),children:"Use cloud data"}),y.jsx("button",{className:"btn-secondary",onClick:()=>ie("push"),children:"Use this device"}),y.jsx("button",{className:"btn-secondary",onClick:()=>{Ue(null),de("")},children:"Cancel"})]})]}):y.jsx("button",{className:"btn-primary",onClick:()=>$(W),disabled:!W.trim()||se==="syncing",children:se==="syncing"?"Connecting...":"Connect"})]})]});return{syncIndicator:R,syncSettingsUI:Q}}const ME=Object.freeze(Object.defineProperty({__proto__:null,useSync:NE},Symbol.toStringTag,{value:"Module"})),xE="modulepreload",DE=function(l,n){return new URL(l,n).href},av={},UE=function(n,a,o){let r=Promise.resolve();if(a&&a.length>0){let p=function(S){return Promise.all(S.map(T=>Promise.resolve(T).then(k=>({status:"fulfilled",value:k}),k=>({status:"rejected",reason:k}))))};const h=document.getElementsByTagName("link"),f=document.querySelector("meta[property=csp-nonce]"),v=f?.nonce||f?.getAttribute("nonce");r=p(a.map(S=>{if(S=DE(S,o),S in av)return;av[S]=!0;const T=S.endsWith(".css"),k=T?'[rel="stylesheet"]':"";if(o)for(let F=h.length-1;F>=0;F--){const J=h[F];if(J.href===S&&(!T||J.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${S}"]${k}`))return;const M=document.createElement("link");if(M.rel=T?"stylesheet":xE,T||(M.as="script"),M.crossOrigin="",M.href=S,v&&M.setAttribute("nonce",v),document.head.appendChild(M),T)return new Promise((F,J)=>{M.addEventListener("load",F),M.addEventListener("error",()=>J(new Error(`Unable to preload CSS for ${S}`)))})}))}function d(h){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=h,window.dispatchEvent(f),!f.defaultPrevented)throw h}return r.then(h=>{for(const f of h||[])f.status==="rejected"&&d(f.reason);return n().catch(d)})};const jE="msal.js.common",cC="https://login.microsoftonline.com/common/",HE="login.microsoftonline.com",uC="common",zE="adfs",LE="dstsv2",BE=`${cC}discovery/instance?api-version=1.1&authorization_endpoint=`,sv=".ciamlogin.com",KE=".onmicrosoft.com",af="|",dC="openid",hC="profile",bf="offline_access",PE="email",wf="S256",GE="application/x-www-form-urlencoded;charset=utf-8",Qr="Not Available",sf="/",ov="http://169.254.169.254/metadata/instance/compute/location",VE="2020-06-01",FE=2e3,YE="TryAutoDetect",QE="login.microsoft.com",qE=["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],rv=240,JE="invalid_instance",lv=200,XE=400,cv=400,ZE=499,$E=500,WE=599,wo={GET:"GET",POST:"POST"},Do=[dC,hC,bf],uv=[...Do,PE],Wt={CONTENT_TYPE:"Content-Type",CONTENT_LENGTH:"Content-Length",RETRY_AFTER:"Retry-After",CCS_HEADER:"X-AnchorMailbox",WWWAuthenticate:"WWW-Authenticate",AuthenticationInfo:"Authentication-Info",X_MS_REQUEST_ID:"x-ms-request-id",X_MS_HTTP_VERSION:"x-ms-httpver"},dv={ACTIVE_ACCOUNT_FILTERS:"active-account-filters"},Ra={COMMON:"common",ORGANIZATIONS:"organizations",CONSUMERS:"consumers"},zc={ACCESS_TOKEN:"access_token",XMS_CC:"xms_cc"},hn={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",NO_SESSION:"no_session"},_f={CODE:"code",IDTOKEN_TOKEN_REFRESHTOKEN:"id_token token refresh_token"},kf={QUERY:"query",FRAGMENT:"fragment"},fC={AUTHORIZATION_CODE_GRANT:"authorization_code",REFRESH_TOKEN_GRANT:"refresh_token"},eA="MSSTS",tA="ADFS",gC="Generic",mC="-",of=".",Kt={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"},Of="appmetadata",nA="client_info",Zc="1",rf="authority-metadata",iA=3600*24,Qn={CONFIG:"config",CACHE:"cache",NETWORK:"network",HARDCODED_VALUES:"hardcoded_values"},hv=5,aA=330,sA=50,pC="server-telemetry",fv="|",To=",",oA="1",rA="0",lA="unknown_error",Je={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},cA=60,uA=3600,yC="throttling",dA="retry-after, h429",hA="invalid_grant",fA="client_mismatch",Eo={FAILED_AUTO_DETECTION:"1",INTERNAL_CACHE:"2",ENVIRONMENT_VARIABLE:"3",IMDS:"4"},Qh={CONFIGURED_NO_AUTO_DETECTION:"2",AUTO_DETECTION_REQUESTED_SUCCESSFUL:"4",AUTO_DETECTION_REQUESTED_FAILED:"5"},gs={NOT_APPLICABLE:"0",FORCE_REFRESH_OR_CLAIMS:"1",NO_CACHED_ACCESS_TOKEN:"2",CACHED_ACCESS_TOKEN_EXPIRED:"3",PROACTIVELY_REFRESHED:"4"},gA={Pop:"pop"},vC=300;const Cs="client_id",CC="redirect_uri",mA="response_type",pA="response_mode",yA="grant_type",vA="claims",CA="scope",SA="refresh_token",TA="state",EA="nonce",AA="prompt",bA="code",wA="code_challenge",_A="code_challenge_method",kA="code_verifier",OA="client-request-id",IA="x-client-SKU",RA="x-client-VER",NA="x-client-OS",MA="x-client-CPU",xA="x-client-current-telemetry",DA="x-client-last-telemetry",UA="x-ms-lib-capability",jA="x-app-name",HA="x-app-ver",zA="post_logout_redirect_uri",LA="id_token_hint",BA="client_secret",KA="client_assertion",PA="client_assertion_type",SC="token_type",TC="req_cnf",gv="return_spa_code",GA="nativebroker",VA="logout_hint",FA="sid",YA="login_hint",QA="domain_hint",qA="x-client-xtra-sku",$c="brk_client_id",Wc="brk_redirect_uri",lf="instance_aware",JA="ear_jwk",XA="ear_jwe_crypto";function If(l){return`See https://aka.ms/msal.js.errors#${l} for details`}class et extends Error{constructor(n,a,o){const r=a||(n?If(n):""),d=r?`${n}: ${r}`:n;super(d),Object.setPrototypeOf(this,et.prototype),this.errorCode=n||"",this.errorMessage=r||"",this.subError=o||"",this.name="AuthError"}setCorrelationId(n){this.correlationId=n}}function cf(l,n){return new et(l,n||If(l))}class Rf extends et{constructor(n){super(n),this.name="ClientConfigurationError",Object.setPrototypeOf(this,Rf.prototype)}}function nt(l){return new Rf(l)}class Pn{static isEmptyObj(n){if(n)try{const a=JSON.parse(n);return Object.keys(a).length===0}catch{}return!0}static startsWith(n,a){return n.indexOf(a)===0}static endsWith(n,a){return n.length>=a.length&&n.lastIndexOf(a)===n.length-a.length}static queryStringToObject(n){const a={},o=n.split("&"),r=d=>decodeURIComponent(d.replace(/\+/g," "));return o.forEach(d=>{if(d.trim()){const[h,f]=d.split(/=(.+)/g,2);h&&f&&(a[r(h)]=r(f))}}),a}static trimArrayEntries(n){return n.map(a=>a.trim())}static removeEmptyStringsFromArray(n){return n.filter(a=>!!a)}static jsonParseHelper(n){try{return JSON.parse(n)}catch{return null}}}class Nf extends et{constructor(n,a){super(n,a),this.name="ClientAuthError",Object.setPrototypeOf(this,Nf.prototype)}}function q(l,n){return new Nf(l,n)}const ZA="redirect_uri_empty",$A="authority_uri_insecure",Lc="url_parse_error",WA="empty_url_error",eb="empty_input_scopes_error",EC="invalid_claims",tb="token_request_empty",nb="logout_request_empty",AC="pkce_params_missing",bC="invalid_cloud_discovery_metadata",ib="invalid_authority_metadata",ab="untrusted_authority",Mf="missing_ssh_jwk",sb="missing_ssh_kid",ob="cannot_set_OIDCOptions",rb="cannot_allow_platform_broker",lb="authority_mismatch",cb="invalid_request_method_for_EAR";const wC="client_info_decoding_error",ub="client_info_empty_error",_C="token_parsing_error",db="null_or_empty_token",wa="endpoints_resolution_error",hb="network_error",fb="openid_config_error",gb="hash_not_deserialized",al="invalid_state",mb="state_mismatch",mv="state_not_found",pb="nonce_mismatch",kC="auth_time_not_found",yb="max_age_transpired",vb="multiple_matching_appMetadata",Cb="request_cannot_be_made",Sb="cannot_remove_empty_scope",Tb="cannot_append_scopeset",pv="empty_input_scopeset",OC="no_account_in_silent_request",Eb="invalid_cache_record",IC="invalid_cache_environment",yv="no_account_found",RC="no_crypto_object",ps="token_refresh_required",Ab="token_claims_cnf_required_for_signedjwt",bb="authorization_code_missing_from_server_response",wb="binding_key_not_removed",_b="end_session_endpoint_not_supported",NC="key_id_missing",Oe="method_not_implemented";class Yt{constructor(n){const a=n?Pn.trimArrayEntries([...n]):[],o=a?Pn.removeEmptyStringsFromArray(a):[];if(!o||!o.length)throw nt(eb);this.scopes=new Set,o.forEach(r=>this.scopes.add(r))}static fromString(n){const o=(n||"").split(" ");return new Yt(o)}static createSearchScopes(n){const a=n&&n.length>0?n:[...Do],o=new Yt(a);return o.containsOnlyOIDCScopes()?o.removeScope(bf):o.removeOIDCScopes(),o}containsScope(n){const a=this.printScopesLowerCase().split(" "),o=new Yt(a);return n?o.scopes.has(n.toLowerCase()):!1}containsScopeSet(n){return!n||n.scopes.size<=0?!1:this.scopes.size>=n.scopes.size&&n.asArray().every(a=>this.containsScope(a))}containsOnlyOIDCScopes(){let n=0;return uv.forEach(a=>{this.containsScope(a)&&(n+=1)}),this.scopes.size===n}appendScope(n){n&&this.scopes.add(n.trim())}appendScopes(n){try{n.forEach(a=>this.appendScope(a))}catch{throw q(Tb)}}removeScope(n){if(!n)throw q(Sb);this.scopes.delete(n.trim())}removeOIDCScopes(){uv.forEach(n=>{this.scopes.delete(n)})}unionScopeSets(n){if(!n)throw q(pv);const a=new Set;return n.scopes.forEach(o=>a.add(o.toLowerCase())),this.scopes.forEach(o=>a.add(o.toLowerCase())),a}intersectingScopeSets(n){if(!n)throw q(pv);n.containsOnlyOIDCScopes()||n.removeOIDCScopes();const a=this.unionScopeSets(n),o=n.getScopeCount(),r=this.getScopeCount();return a.size<r+o}getScopeCount(){return this.scopes.size}asArray(){const n=[];return this.scopes.forEach(a=>n.push(a)),n}printScopes(){return this.scopes?this.asArray().join(" "):""}printScopesLowerCase(){return this.printScopes().toLowerCase()}}function fu(l,n,a){if(!n)return;const o=l.get(Cs);o&&l.has($c)&&a?.addFields({embeddedClientId:o,embeddedRedirectUri:l.get(CC)},n)}function xf(l,n){l.set(mA,n)}function kb(l,n){l.set(pA,n||kf.QUERY)}function Ob(l){l.set(GA,"1")}function Df(l,n,a=!0,o=Do){a&&!o.includes("openid")&&!n.includes("openid")&&o.push("openid");const r=a?[...n||[],...o]:n||[],d=new Yt(r);l.set(CA,d.printScopes())}function Uf(l,n){l.set(Cs,n)}function jf(l,n){l.set(CC,n)}function Ib(l,n){l.set(zA,n)}function Rb(l,n){l.set(LA,n)}function Nb(l,n){l.set(QA,n)}function Bc(l,n){l.set(YA,n)}function eu(l,n){l.set(Wt.CCS_HEADER,`UPN:${n}`)}function $r(l,n){l.set(Wt.CCS_HEADER,`Oid:${n.uid}@${n.utid}`)}function vv(l,n){l.set(FA,n)}function Hf(l,n,a){const o=Hb(n,a);try{JSON.parse(o)}catch{throw nt(EC)}l.set(vA,o)}function cl(l,n){l.set(OA,n)}function zf(l,n){l.set(IA,n.sku),l.set(RA,n.version),n.os&&l.set(NA,n.os),n.cpu&&l.set(MA,n.cpu)}function Lf(l,n){n?.appName&&l.set(jA,n.appName),n?.appVersion&&l.set(HA,n.appVersion)}function Mb(l,n){l.set(AA,n)}function MC(l,n){n&&l.set(TA,n)}function xb(l,n){l.set(EA,n)}function Bf(l,n,a){if(n&&a)l.set(wA,n),l.set(_A,a);else throw nt(AC)}function Db(l,n){l.set(bA,n)}function Ub(l,n){l.set(SA,n)}function jb(l,n){l.set(kA,n)}function xC(l,n){l.set(BA,n)}function DC(l,n){n&&l.set(KA,n)}function UC(l,n){n&&l.set(PA,n)}function jC(l,n){l.set(yA,n)}function Kf(l){l.set(nA,"1")}function HC(l){l.has(lf)||l.set(lf,"true")}function pi(l,n){Object.entries(n).forEach(([a,o])=>{!l.has(a)&&o&&l.set(a,o)})}function Hb(l,n){let a;if(!l)a={};else try{a=JSON.parse(l)}catch{throw nt(EC)}return n&&n.length>0&&(a.hasOwnProperty(zc.ACCESS_TOKEN)||(a[zc.ACCESS_TOKEN]={}),a[zc.ACCESS_TOKEN][zc.XMS_CC]={values:n}),JSON.stringify(a)}function Pf(l,n){n&&(l.set(SC,Je.POP),l.set(TC,n))}function zC(l,n){n&&(l.set(SC,Je.SSH),l.set(TC,n))}function LC(l,n){l.set(xA,n.generateCurrentRequestHeaderValue()),l.set(DA,n.generateLastRequestHeaderValue())}function BC(l){l.set(UA,dA)}function zb(l,n){l.set(VA,n)}function gu(l,n,a){l.has($c)||l.set($c,n),l.has(Wc)||l.set(Wc,a)}function Lb(l,n){l.set(JA,encodeURIComponent(n)),l.set(XA,"eyJhbGciOiJkaXIiLCJlbmMiOiJBMjU2R0NNIn0")}function Cv(l){if(!l)return l;let n=l.toLowerCase();return Pn.endsWith(n,"?")?n=n.slice(0,-1):Pn.endsWith(n,"?/")&&(n=n.slice(0,-2)),Pn.endsWith(n,"/")||(n+="/"),n}function KC(l){return l.startsWith("#/")?l.substring(2):l.startsWith("#")||l.startsWith("?")?l.substring(1):l}function tu(l){if(!l||l.indexOf("=")<0)return null;try{const n=KC(l),a=Object.fromEntries(new URLSearchParams(n));if(a.code||a.ear_jwe||a.error||a.error_description||a.state)return a}catch{throw q(gb)}return null}function sl(l){const n=new Array;return l.forEach((a,o)=>{n.push(`${o}=${encodeURIComponent(a)}`)}),n.join("&")}function Sv(l){if(!l)return l;const n=l.split("#")[0];try{const a=new URL(n),o=a.origin+a.pathname+a.search;return Cv(o)}catch{return Cv(n)}}const nu={createNewGuid:()=>{throw q(Oe)},base64Decode:()=>{throw q(Oe)},base64Encode:()=>{throw q(Oe)},base64UrlEncode:()=>{throw q(Oe)},encodeKid:()=>{throw q(Oe)},async getPublicKeyThumbprint(){throw q(Oe)},async removeTokenBindingKey(){throw q(Oe)},async clearKeystore(){throw q(Oe)},async signJwt(){throw q(Oe)},async hashString(){throw q(Oe)}};var rt;(function(l){l[l.Error=0]="Error",l[l.Warning=1]="Warning",l[l.Info=2]="Info",l[l.Verbose=3]="Verbose",l[l.Trace=4]="Trace"})(rt||(rt={}));const Bb=50,Kb=500,ms=new Map;function Pb(l,n){ms.delete(l),ms.set(l,n)}function Gb(l,n){const a=Date.now();let o=ms.get(l);if(o)Pb(l,o);else if(o={logs:[],firstEventTime:a},ms.set(l,o),ms.size>Bb){const r=ms.keys().next().value;r&&ms.delete(r)}o.logs.push({...n,milliseconds:a-o.firstEventTime}),o.logs.length>Kb&&o.logs.shift()}function Vb(l){if(l.length!==6)return!1;for(let n=0;n<l.length;n++){const a=l[n];if(!(a>="a"&&a<="z"||a>="A"&&a<="Z"||a>="0"&&a<="9"))return!1}return!0}class yi{constructor(n,a,o){this.level=rt.Info;const r=()=>{},d=n||yi.createDefaultLoggerOptions();this.localCallback=d.loggerCallback||r,this.piiLoggingEnabled=d.piiLoggingEnabled||!1,this.level=typeof d.logLevel=="number"?d.logLevel:rt.Info,this.packageName=a||"",this.packageVersion=o||""}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:rt.Info}}clone(n,a){return new yi({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level},n,a)}logMessage(n,a){const o=a.correlationId;if(Vb(n)){const v={hash:n,level:a.logLevel,containsPii:a.containsPii||!1,milliseconds:0};Gb(o,v)}if(a.logLevel>this.level||!this.piiLoggingEnabled&&a.containsPii)return;const f=`${`[${new Date().toUTCString()}] : [${o}]`} : ${this.packageName}@${this.packageVersion} : ${rt[a.logLevel]} - ${n}`;this.executeCallback(a.logLevel,f,a.containsPii||!1)}executeCallback(n,a,o){this.localCallback&&this.localCallback(n,a,o)}error(n,a){this.logMessage(n,{logLevel:rt.Error,containsPii:!1,correlationId:a})}errorPii(n,a){this.logMessage(n,{logLevel:rt.Error,containsPii:!0,correlationId:a})}warning(n,a){this.logMessage(n,{logLevel:rt.Warning,containsPii:!1,correlationId:a})}warningPii(n,a){this.logMessage(n,{logLevel:rt.Warning,containsPii:!0,correlationId:a})}info(n,a){this.logMessage(n,{logLevel:rt.Info,containsPii:!1,correlationId:a})}infoPii(n,a){this.logMessage(n,{logLevel:rt.Info,containsPii:!0,correlationId:a})}verbose(n,a){this.logMessage(n,{logLevel:rt.Verbose,containsPii:!1,correlationId:a})}verbosePii(n,a){this.logMessage(n,{logLevel:rt.Verbose,containsPii:!0,correlationId:a})}trace(n,a){this.logMessage(n,{logLevel:rt.Trace,containsPii:!1,correlationId:a})}tracePii(n,a){this.logMessage(n,{logLevel:rt.Trace,containsPii:!0,correlationId:a})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}}const mu="@azure/msal-common",ul="16.1.0";const Gf={None:"none"};function Tv(l,n){return!!l&&!!n&&l===n.split(".")[1]}function Uo(l,n,a,o){if(o){const{oid:r,sub:d,tid:h,name:f,tfp:v,acr:p,preferred_username:S,upn:T,login_hint:k}=o,M=h||v||p||"";return{tenantId:M,localAccountId:r||d||"",name:f,username:S||T||"",loginHint:k,isHomeTenant:Tv(M,l)}}else return{tenantId:a,localAccountId:n,username:"",isHomeTenant:Tv(a,l)}}function Vf(l,n,a,o){let r=l;if(n){const{isHomeTenant:d,...h}=n;r={...l,...h}}if(a){const{isHomeTenant:d,...h}=Uo(l.homeAccountId,l.localAccountId,l.tenantId,a);return r={...r,...h,idTokenClaims:a,idToken:o},r}return r}function Fi(l,n){const a=Fb(l);try{const o=n(a);return JSON.parse(o)}catch{throw q(_C)}}function ys(l){if(!l.signin_state)return!1;const n=["kmsi","dvc_dmjd"];return l.signin_state.some(a=>n.includes(a.trim().toLowerCase()))}function Fb(l){if(!l)throw q(db);const a=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(l);if(!a||a.length<4)throw q(_C);return a[2]}function PC(l,n){if(n===0||Date.now()-3e5>l+n)throw q(yb)}class Fe{get urlString(){return this._urlString}constructor(n){if(this._urlString=n,!this._urlString)throw nt(WA);n.includes("#")||(this._urlString=Fe.canonicalizeUri(n))}static canonicalizeUri(n){if(n){let a=n.toLowerCase();return Pn.endsWith(a,"?")?a=a.slice(0,-1):Pn.endsWith(a,"?/")&&(a=a.slice(0,-2)),Pn.endsWith(a,"/")||(a+="/"),a}return n}validateAsUri(){let n;try{n=this.getUrlComponents()}catch{throw nt(Lc)}if(!n.HostNameAndPort||!n.PathSegments)throw nt(Lc);if(!n.Protocol||n.Protocol.toLowerCase()!=="https:")throw nt($A)}static appendQueryString(n,a){return a?n.indexOf("?")<0?`${n}?${a}`:`${n}&${a}`:n}static removeHashFromUrl(n){return Fe.canonicalizeUri(n.split("#")[0])}replaceTenantPath(n){const a=this.getUrlComponents(),o=a.PathSegments;return n&&o.length!==0&&(o[0]===Ra.COMMON||o[0]===Ra.ORGANIZATIONS)&&(o[0]=n),Fe.constructAuthorityUriFromObject(a)}getUrlComponents(){const n=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),a=this.urlString.match(n);if(!a)throw nt(Lc);const o={Protocol:a[1],HostNameAndPort:a[4],AbsolutePath:a[5],QueryString:a[7]};let r=o.AbsolutePath.split("/");return r=r.filter(d=>d&&d.length>0),o.PathSegments=r,o.QueryString&&o.QueryString.endsWith("/")&&(o.QueryString=o.QueryString.substring(0,o.QueryString.length-1)),o}static getDomainFromUrl(n){const a=RegExp("^([^:/?#]+://)?([^/?#]*)"),o=n.match(a);if(!o)throw nt(Lc);return o[2]}static getAbsoluteUrl(n,a){if(n[0]===sf){const r=new Fe(a).getUrlComponents();return r.Protocol+"//"+r.HostNameAndPort+n}return n}static constructAuthorityUriFromObject(n){return new Fe(n.Protocol+"//"+n.HostNameAndPort+"/"+n.PathSegments.join("/"))}}const Yb=[{host:"login.microsoftonline.com"},{host:"login.chinacloudapi.cn",issuerHost:"login.partner.microsoftonline.cn"},{host:"login.microsoftonline.us"},{host:"login.sovcloud-identity.fr"},{host:"login.sovcloud-identity.de"},{host:"login.sovcloud-identity.sg"}];function Qb(l,n){return{token_endpoint:`https://${l}/{tenantid}/oauth2/v2.0/token`,jwks_uri:`https://${l}/{tenantid}/discovery/v2.0/keys`,issuer:`https://${n}/{tenantid}/v2.0`,authorization_endpoint:`https://${l}/{tenantid}/oauth2/v2.0/authorize`,end_session_endpoint:`https://${l}/{tenantid}/oauth2/v2.0/logout`}}const qb=Yb.reduce((l,{host:n,issuerHost:a})=>(l[n]=Qb(n,a||n),l),{}),GC={endpointMetadata:qb,instanceDiscoveryMetadata:{metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]},{preferred_network:"login.sovcloud-identity.fr",preferred_cache:"login.sovcloud-identity.fr",aliases:["login.sovcloud-identity.fr"]},{preferred_network:"login.sovcloud-identity.de",preferred_cache:"login.sovcloud-identity.de",aliases:["login.sovcloud-identity.de"]},{preferred_network:"login.sovcloud-identity.sg",preferred_cache:"login.sovcloud-identity.sg",aliases:["login.sovcloud-identity.sg"]}]}},Ev=GC.endpointMetadata,Ff=GC.instanceDiscoveryMetadata,VC=new Set;Ff.metadata.forEach(l=>{l.aliases.forEach(n=>{VC.add(n)})});function Jb(l,n,a){let o;const r=l.canonicalAuthority;if(r){const d=new Fe(r).getUrlComponents().HostNameAndPort;o=Av(n,a,d,l.cloudDiscoveryMetadata?.metadata)||Av(n,a,d,Ff.metadata)||l.knownAuthorities}return o||[]}function Av(l,n,a,o,r){if(l.trace("1bmquz",n),a&&o){const d=iu(o,a);if(d)return l.trace("1fotbt",n),d.aliases;l.trace("14avvj",n)}return null}function Xb(l){return iu(Ff.metadata,l)}function iu(l,n){for(let a=0;a<l.length;a++){const o=l[a];if(o.aliases.includes(n))return o}return null}const uf="cache_quota_exceeded",Zb="cache_error_unknown";class _o extends Error{constructor(n,a){const o=a||If(n);super(o),Object.setPrototypeOf(this,_o.prototype),this.name="CacheError",this.errorCode=n,this.errorMessage=o}}function df(l){return l instanceof Error?l.name==="QuotaExceededError"||l.name==="NS_ERROR_DOM_QUOTA_REACHED"||l.message.includes("exceeded the quota")?new _o(uf):new _o(l.name,l.message):new _o(Zb)}function au(l,n){if(!l)throw q(ub);try{const a=n(l);return JSON.parse(a)}catch{throw q(wC)}}function ko(l){if(!l)throw q(wC);const n=l.split(of,2);return{uid:n[0],utid:n.length<2?"":n[1]}}const Jn={Default:0,Adfs:1,Dsts:2,Ciam:3};function Yf(l){return l&&(l.tid||l.tfp||l.acr)||null}const fn={AAD:"AAD",OIDC:"OIDC",EAR:"EAR"};function Ss(l){const n=l.tenantProfiles||[];return n.length===0&&l.realm&&l.localAccountId&&n.push(Uo(l.homeAccountId,l.localAccountId,l.realm)),{homeAccountId:l.homeAccountId,environment:l.environment,tenantId:l.realm,username:l.username,localAccountId:l.localAccountId,loginHint:l.loginHint,name:l.name,nativeAccountId:l.nativeAccountId,authorityType:l.authorityType,tenantProfiles:new Map(n.map(a=>[a.tenantId,a])),dataBoundary:l.dataBoundary}}function $b(l,n,a){let o;n.authorityType===Jn.Adfs?o=tA:n.protocolMode===fn.OIDC?o=gC:o=eA;let r,d;l.clientInfo&&a&&(r=au(l.clientInfo,a),r.xms_tdbr&&(d=r.xms_tdbr==="EU"?"EU":"None"));const h=l.environment||n&&n.getPreferredCache();if(!h)throw q(IC);const f=l.idTokenClaims?.preferred_username||l.idTokenClaims?.upn,v=l.idTokenClaims?.emails?l.idTokenClaims.emails[0]:null,p=f||v||"",S=l.idTokenClaims?.login_hint,T=r?.utid||Yf(l.idTokenClaims)||"",k=r?.uid||l.idTokenClaims?.oid||l.idTokenClaims?.sub||"";let M;return l.tenantProfiles?M=l.tenantProfiles:M=[Uo(l.homeAccountId,k,T,l.idTokenClaims)],{homeAccountId:l.homeAccountId,environment:h,realm:T,localAccountId:k,username:p,authorityType:o,loginHint:S,clientInfo:l.clientInfo,name:l.idTokenClaims?.name||"",lastModificationTime:void 0,lastModificationApp:void 0,cloudGraphHostName:l.cloudGraphHostName,msGraphHost:l.msGraphHost,nativeAccountId:l.nativeAccountId,tenantProfiles:M,dataBoundary:d}}function Wb(l,n,a){const o=Array.from(l.tenantProfiles?.values()||[]);return o.length===0&&l.tenantId&&l.localAccountId&&o.push(Uo(l.homeAccountId,l.localAccountId,l.tenantId,l.idTokenClaims)),{authorityType:l.authorityType||gC,homeAccountId:l.homeAccountId,localAccountId:l.localAccountId,nativeAccountId:l.nativeAccountId,realm:l.tenantId,environment:l.environment,username:l.username,loginHint:l.loginHint,name:l.name,cloudGraphHostName:n,msGraphHost:a,tenantProfiles:o,dataBoundary:l.dataBoundary}}function FC(l,n,a,o,r,d){if(!(n===Jn.Adfs||n===Jn.Dsts)){if(l)try{const h=au(l,o.base64Decode);if(h.uid&&h.utid)return`${h.uid}.${h.utid}`}catch{}a.warning("1ub6wv",r)}return d?.sub||""}function e0(l){return l?l.hasOwnProperty("homeAccountId")&&l.hasOwnProperty("environment")&&l.hasOwnProperty("realm")&&l.hasOwnProperty("localAccountId")&&l.hasOwnProperty("username")&&l.hasOwnProperty("authorityType"):!1}class hf{constructor(n,a,o,r,d){this.clientId=n,this.cryptoImpl=a,this.commonLogger=o.clone(mu,ul),this.staticAuthorityOptions=d,this.performanceClient=r}getAllAccounts(n={},a){return this.buildTenantProfiles(this.getAccountsFilteredBy(n,a),a,n)}getAccountInfoFilteredBy(n,a){const o=this.getAllAccounts(n,a);return o.length>1?o.sort(d=>d.idTokenClaims?-1:1)[0]:o.length===1?o[0]:null}getBaseAccountInfo(n,a){const o=this.getAccountsFilteredBy(n,a);return o.length>0?Ss(o[0]):null}buildTenantProfiles(n,a,o){return n.flatMap(r=>this.getTenantProfilesFromAccountEntity(r,a,o?.tenantId,o))}getTenantedAccountInfoByFilter(n,a,o,r,d){let h=null,f;if(d&&!this.tenantProfileMatchesFilter(o,d))return null;const v=this.getIdToken(n,r,a,o.tenantId);return v&&(f=Fi(v.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(f,d))?null:(h=Vf(n,o,f,v?.secret),h)}getTenantProfilesFromAccountEntity(n,a,o,r){const d=Ss(n);let h=d.tenantProfiles||new Map;const f=this.getTokenKeys();if(o){const p=h.get(o);if(p)h=new Map([[o,p]]);else return[]}const v=[];return h.forEach(p=>{const S=this.getTenantedAccountInfoByFilter(d,f,p,a,r);S&&v.push(S)}),v}tenantProfileMatchesFilter(n,a){return!(a.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(n,a.localAccountId)||a.name&&n.name!==a.name||a.isHomeTenant!==void 0&&n.isHomeTenant!==a.isHomeTenant)}idTokenClaimsMatchTenantProfileFilter(n,a){return!(a&&(a.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(n,a.localAccountId)||a.loginHint&&!this.matchLoginHintFromTokenClaims(n,a.loginHint)||a.username&&!this.matchUsername(n.preferred_username,a.username)||a.name&&!this.matchName(n,a.name)||a.sid&&!this.matchSid(n,a.sid)))}async saveCacheRecord(n,a,o,r,d){if(!n)throw q(Eb);try{n.account&&await this.setAccount(n.account,a,o,r),n.idToken&&d?.idToken!==!1&&await this.setIdTokenCredential(n.idToken,a,o),n.accessToken&&d?.accessToken!==!1&&await this.saveAccessToken(n.accessToken,a,o),n.refreshToken&&d?.refreshToken!==!1&&await this.setRefreshTokenCredential(n.refreshToken,a,o),n.appMetadata&&this.setAppMetadata(n.appMetadata,a)}catch(h){throw this.commonLogger?.error("0j476p",a),h instanceof et?h:df(h)}}async saveAccessToken(n,a,o){const r={clientId:n.clientId,credentialType:n.credentialType,environment:n.environment,homeAccountId:n.homeAccountId,realm:n.realm,tokenType:n.tokenType},d=this.getTokenKeys(),h=Yt.fromString(n.target);d.accessToken.forEach(f=>{if(!this.accessTokenKeyMatchesFilter(f,r,!1))return;const v=this.getAccessTokenCredential(f,a);v&&this.credentialMatchesFilter(v,r,a)&&Yt.fromString(v.target).intersectingScopeSets(h)&&this.removeAccessToken(f,a)}),await this.setAccessTokenCredential(n,a,o)}getAccountsFilteredBy(n,a){const o=this.getAccountKeys(),r=[];return o.forEach(d=>{const h=this.getAccount(d,a);if(!h||n.homeAccountId&&!this.matchHomeAccountId(h,n.homeAccountId)||n.username&&!this.matchUsername(h.username,n.username)||n.environment&&!this.matchEnvironment(h,n.environment,a)||n.realm&&!this.matchRealm(h,n.realm)||n.nativeAccountId&&!this.matchNativeAccountId(h,n.nativeAccountId)||n.authorityType&&!this.matchAuthorityType(h,n.authorityType))return;const f={localAccountId:n?.localAccountId,name:n?.name},v=h.tenantProfiles?.filter(p=>this.tenantProfileMatchesFilter(p,f));v&&v.length===0||r.push(h)}),r}credentialMatchesFilter(n,a,o){return!(a.clientId&&!this.matchClientId(n,a.clientId)||a.userAssertionHash&&!this.matchUserAssertionHash(n,a.userAssertionHash)||typeof a.homeAccountId=="string"&&!this.matchHomeAccountId(n,a.homeAccountId)||a.environment&&!this.matchEnvironment(n,a.environment,o)||a.realm&&!this.matchRealm(n,a.realm)||a.credentialType&&!this.matchCredentialType(n,a.credentialType)||a.familyId&&!this.matchFamilyId(n,a.familyId)||a.target&&!this.matchTarget(n,a.target)||n.credentialType===Kt.ACCESS_TOKEN_WITH_AUTH_SCHEME&&(a.tokenType&&!this.matchTokenType(n,a.tokenType)||a.tokenType===Je.SSH&&a.keyId&&!this.matchKeyId(n,a.keyId)))}getAppMetadataFilteredBy(n,a){const o=this.getKeys(),r={};return o.forEach(d=>{if(!this.isAppMetadata(d))return;const h=this.getAppMetadata(d,a);h&&(n.environment&&!this.matchEnvironment(h,n.environment,a)||n.clientId&&!this.matchClientId(h,n.clientId)||(r[d]=h))}),r}getAuthorityMetadataByAlias(n,a){const o=this.getAuthorityMetadataKeys();let r=null;return o.forEach(d=>{if(!this.isAuthorityMetadata(d)||d.indexOf(this.clientId)===-1)return;const h=this.getAuthorityMetadata(d,a);h&&h.aliases.indexOf(n)!==-1&&(r=h)}),r}removeAllAccounts(n){this.getAllAccounts({},n).forEach(o=>{this.removeAccount(o,n)})}removeAccount(n,a){this.removeAccountContext(n,a);const o=this.getAccountKeys(),r=d=>d.includes(n.homeAccountId)&&d.includes(n.environment);o.filter(r).forEach(d=>{this.removeItem(d,a),this.performanceClient.incrementFields({accountsRemoved:1},a)})}removeAccountContext(n,a){const o=this.getTokenKeys(),r=d=>d.includes(n.homeAccountId)&&d.includes(n.environment);o.idToken.filter(r).forEach(d=>{this.removeIdToken(d,a)}),o.accessToken.filter(r).forEach(d=>{this.removeAccessToken(d,a)}),o.refreshToken.filter(r).forEach(d=>{this.removeRefreshToken(d,a)})}removeAccessToken(n,a){const o=this.getAccessTokenCredential(n,a);if(o&&(this.removeItem(n,a),this.performanceClient.incrementFields({accessTokensRemoved:1},a),o.credentialType.toLowerCase()===Kt.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()&&o.tokenType===Je.POP)){const d=o.keyId;d&&this.cryptoImpl.removeTokenBindingKey(d,a).catch(()=>{this.commonLogger.error("0cx291",a),this.performanceClient?.incrementFields({removeTokenBindingKeyFailure:1},a)})}}removeAppMetadata(n){return this.getKeys().forEach(o=>{this.isAppMetadata(o)&&this.removeItem(o,n)}),!0}getIdToken(n,a,o,r){this.commonLogger.trace("1drz22",a);const d={homeAccountId:n.homeAccountId,environment:n.environment,credentialType:Kt.ID_TOKEN,clientId:this.clientId,realm:r},h=this.getIdTokensByFilter(d,a,o),f=h.size;if(f<1)return this.commonLogger.info("1atvtd",a),null;if(f>1){let v=h;if(!r){const p=new Map;h.forEach((T,k)=>{T.realm===n.tenantId&&p.set(k,T)});const S=p.size;if(S<1)return this.commonLogger.info("0ooalx",a),h.values().next().value;if(S===1)return this.commonLogger.info("1eq2vc",a),p.values().next().value;v=p}return this.commonLogger.info("1ws328",a),v.forEach((p,S)=>{this.removeIdToken(S,a)}),this.performanceClient.addFields({multiMatchedID:h.size},a),null}return this.commonLogger.info("1sm769",a),h.values().next().value}getIdTokensByFilter(n,a,o){const r=o&&o.idToken||this.getTokenKeys().idToken,d=new Map;return r.forEach(h=>{if(!this.idTokenKeyMatchesFilter(h,{clientId:this.clientId,...n}))return;const f=this.getIdTokenCredential(h,a);f&&this.credentialMatchesFilter(f,n,a)&&d.set(h,f)}),d}idTokenKeyMatchesFilter(n,a){const o=n.toLowerCase();return!(a.clientId&&o.indexOf(a.clientId.toLowerCase())===-1||a.homeAccountId&&o.indexOf(a.homeAccountId.toLowerCase())===-1)}removeIdToken(n,a){this.removeItem(n,a)}removeRefreshToken(n,a){this.removeItem(n,a)}getAccessToken(n,a,o,r){const d=a.correlationId;this.commonLogger.trace("1t7hz1",d);const h=Yt.createSearchScopes(a.scopes),f=a.authenticationScheme||Je.BEARER,v=f.toLowerCase()!==Je.BEARER.toLowerCase()?Kt.ACCESS_TOKEN_WITH_AUTH_SCHEME:Kt.ACCESS_TOKEN,p={homeAccountId:n.homeAccountId,environment:n.environment,credentialType:v,clientId:this.clientId,realm:r||n.tenantId,target:h,tokenType:f,keyId:a.sshKid},S=o&&o.accessToken||this.getTokenKeys().accessToken,T=[];S.forEach(M=>{if(this.accessTokenKeyMatchesFilter(M,p,!0)){const F=this.getAccessTokenCredential(M,d);F&&this.credentialMatchesFilter(F,p,d)&&T.push(F)}});const k=T.length;return k<1?(this.commonLogger.info("1nckna",d),null):k>1?(this.commonLogger.info("1wkfwp",d),T.forEach(M=>{this.removeAccessToken(this.generateCredentialKey(M),d)}),this.performanceClient.addFields({multiMatchedAT:T.length},d),null):(this.commonLogger.info("06yt98",d),T[0])}accessTokenKeyMatchesFilter(n,a,o){const r=n.toLowerCase();if(a.clientId&&r.indexOf(a.clientId.toLowerCase())===-1||a.homeAccountId&&r.indexOf(a.homeAccountId.toLowerCase())===-1||a.realm&&r.indexOf(a.realm.toLowerCase())===-1)return!1;if(a.target){const d=a.target.asArray();for(let h=0;h<d.length;h++){if(o&&!r.includes(d[h].toLowerCase()))return!1;if(!o&&r.includes(d[h].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(n,a){const o=this.getTokenKeys(),r=[];return o.accessToken.forEach(d=>{if(!this.accessTokenKeyMatchesFilter(d,n,!0))return;const h=this.getAccessTokenCredential(d,a);h&&this.credentialMatchesFilter(h,n,a)&&r.push(h)}),r}getRefreshToken(n,a,o,r){this.commonLogger.trace("0x53vi",o);const d=a?Zc:void 0,h={homeAccountId:n.homeAccountId,environment:n.environment,credentialType:Kt.REFRESH_TOKEN,clientId:this.clientId,familyId:d},f=r&&r.refreshToken||this.getTokenKeys().refreshToken,v=[];f.forEach(S=>{if(this.refreshTokenKeyMatchesFilter(S,h)){const T=this.getRefreshTokenCredential(S,o);T&&this.credentialMatchesFilter(T,h,o)&&v.push(T)}});const p=v.length;return p<1?(this.commonLogger.info("0dlw11",o),null):(p>1&&this.performanceClient.addFields({multiMatchedRT:p},o),this.commonLogger.info("0wcnep",o),v[0])}refreshTokenKeyMatchesFilter(n,a){const o=n.toLowerCase();return!(a.familyId&&o.indexOf(a.familyId.toLowerCase())===-1||!a.familyId&&a.clientId&&o.indexOf(a.clientId.toLowerCase())===-1||a.homeAccountId&&o.indexOf(a.homeAccountId.toLowerCase())===-1)}readAppMetadataFromCache(n,a){const o={environment:n,clientId:this.clientId},r=this.getAppMetadataFilteredBy(o,a),d=Object.keys(r).map(f=>r[f]),h=d.length;if(h<1)return null;if(h>1)throw q(vb);return d[0]}isAppMetadataFOCI(n,a){const o=this.readAppMetadataFromCache(n,a);return!!(o&&o.familyId===Zc)}matchHomeAccountId(n,a){return typeof n.homeAccountId=="string"&&a===n.homeAccountId}matchLocalAccountIdFromTokenClaims(n,a){const o=n.oid||n.sub;return a===o}matchLocalAccountIdFromTenantProfile(n,a){return n.localAccountId===a}matchName(n,a){return a.toLowerCase()===n.name?.toLowerCase()}matchUsername(n,a){return!!(n&&typeof n=="string"&&a?.toLowerCase()===n.toLowerCase())}matchUserAssertionHash(n,a){return!!(n.userAssertionHash&&a===n.userAssertionHash)}matchEnvironment(n,a,o){if(this.staticAuthorityOptions){const d=Jb(this.staticAuthorityOptions,this.commonLogger,o);if(d.includes(a)&&d.includes(n.environment))return!0}const r=this.getAuthorityMetadataByAlias(a,o);return!!(r&&r.aliases.indexOf(n.environment)>-1)}matchCredentialType(n,a){return n.credentialType&&a.toLowerCase()===n.credentialType.toLowerCase()}matchClientId(n,a){return!!(n.clientId&&a===n.clientId)}matchFamilyId(n,a){return!!(n.familyId&&a===n.familyId)}matchRealm(n,a){return n.realm?.toLowerCase()===a.toLowerCase()}matchNativeAccountId(n,a){return!!(n.nativeAccountId&&a===n.nativeAccountId)}matchLoginHintFromTokenClaims(n,a){return n.login_hint===a||n.preferred_username===a||n.upn===a}matchSid(n,a){return n.sid===a}matchAuthorityType(n,a){return!!(n.authorityType&&a.toLowerCase()===n.authorityType.toLowerCase())}matchTarget(n,a){return n.credentialType!==Kt.ACCESS_TOKEN&&n.credentialType!==Kt.ACCESS_TOKEN_WITH_AUTH_SCHEME||!n.target?!1:Yt.fromString(n.target).containsScopeSet(a)}matchTokenType(n,a){return!!(n.tokenType&&n.tokenType===a)}matchKeyId(n,a){return!!(n.keyId&&n.keyId===a)}isAppMetadata(n){return n.indexOf(Of)!==-1}isAuthorityMetadata(n){return n.indexOf(rf)!==-1}generateAuthorityMetadataCacheKey(n){return`${rf}-${this.clientId}-${n}`}static toObject(n,a){for(const o in a)n[o]=a[o];return n}}class t0 extends hf{async setAccount(){throw q(Oe)}getAccount(){throw q(Oe)}async setIdTokenCredential(){throw q(Oe)}getIdTokenCredential(){throw q(Oe)}async setAccessTokenCredential(){throw q(Oe)}getAccessTokenCredential(){throw q(Oe)}async setRefreshTokenCredential(){throw q(Oe)}getRefreshTokenCredential(){throw q(Oe)}setAppMetadata(){throw q(Oe)}getAppMetadata(){throw q(Oe)}setServerTelemetry(){throw q(Oe)}getServerTelemetry(){throw q(Oe)}setAuthorityMetadata(){throw q(Oe)}getAuthorityMetadata(){throw q(Oe)}getAuthorityMetadataKeys(){throw q(Oe)}setThrottlingCache(){throw q(Oe)}getThrottlingCache(){throw q(Oe)}removeItem(){throw q(Oe)}getKeys(){throw q(Oe)}getAccountKeys(){throw q(Oe)}getTokenKeys(){throw q(Oe)}generateCredentialKey(){throw q(Oe)}generateAccountKey(){throw q(Oe)}}const n0={InProgress:1};class YC{generateId(){return"callback-id"}startMeasurement(n,a){return{end:()=>null,discard:()=>{},add:()=>{},increment:()=>{},event:{eventId:this.generateId(),status:n0.InProgress,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:n,startTimeMs:Date.now(),correlationId:a||""}}}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}}const QC={tokenRenewalOffsetSeconds:vC,preventCorsPreflight:!1},i0={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:rt.Info,correlationId:""},a0={async sendGetRequestAsync(){throw q(Oe)},async sendPostRequestAsync(){throw q(Oe)}},s0={sku:jE,version:ul,cpu:"",os:""},o0={clientSecret:"",clientAssertion:void 0},r0={azureCloudInstance:Gf.None,tenant:`${uC}`},l0={application:{appName:"",appVersion:""}};function Qf({authOptions:l,systemOptions:n,loggerOptions:a,storageInterface:o,networkInterface:r,cryptoInterface:d,clientCredentials:h,libraryInfo:f,telemetry:v,serverTelemetryManager:p,persistencePlugin:S,serializableCache:T}){const k={...i0,...a};return{authOptions:c0(l),systemOptions:{...QC,...n},loggerOptions:k,storageInterface:o||new t0(l.clientId,nu,new yi(k),new YC),networkInterface:r||a0,cryptoInterface:d||nu,clientCredentials:h||o0,libraryInfo:{...s0,...f},telemetry:{...l0,...v},serverTelemetryManager:p||null,persistencePlugin:S||null,serializableCache:T||null}}function c0(l){return{clientCapabilities:[],azureCloudOptions:r0,instanceAware:!1,...l}}function qC(l){return l.authOptions.authority.options.protocolMode===fn.OIDC}class _s extends et{constructor(n,a,o,r,d){super(n,a,o),this.name="ServerError",this.errorNo=r,this.status=d,Object.setPrototypeOf(this,_s.prototype)}}const ff="no_tokens_found",u0="native_account_unavailable",JC="refresh_token_expired",XC="ux_not_allowed",d0="interaction_required",h0="consent_required",f0="login_required",qf="bad_token",g0="interrupted_user";const bv=[d0,h0,f0,qf,XC,g0],m0=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token","ux_not_allowed","interrupted_user"];class $n extends et{constructor(n,a,o,r,d,h,f,v){super(n,a,o),Object.setPrototypeOf(this,$n.prototype),this.timestamp=r||"",this.traceId=d||"",this.correlationId=h||"",this.claims=f||"",this.name="InteractionRequiredAuthError",this.errorNo=v}}function ZC(l,n,a){const o=!!l&&bv.indexOf(l)>-1,r=!!a&&m0.indexOf(a)>-1,d=!!n&&bv.some(h=>n.indexOf(h)>-1);return o||d||r}function su(l,n){return new $n(l,n)}function p0(l,n,a){const o=y0(l,a);return n?`${o}${af}${n}`:o}function y0(l,n){if(!l)throw q(RC);const a={id:l.createNewGuid()};n&&(a.meta=n);const o=JSON.stringify(a);return l.base64Encode(o)}function dl(l,n){if(!l)throw q(RC);if(!n)throw q(al);try{const a=n.split(af),o=a[0],r=a.length>1?a.slice(1).join(af):"",d=l(o),h=JSON.parse(d);return{userRequestState:r||"",libraryState:h}}catch{throw q(al)}}function Wn(){return Math.round(new Date().getTime()/1e3)}function wv(l){return l.getTime()/1e3}function Yc(l){return l?new Date(Number(l)*1e3):new Date}function ou(l,n){const a=Number(l)||0;return Wn()+n>a}function _v(l,n){const a=Number(l)+n*24*60*60*1e3;return Date.now()>a}function v0(l){return Number(l)>Wn()}const C0="networkClientSendPostRequestAsync",S0="refreshTokenClientExecutePostToTokenEndpoint",T0="authorizationCodeClientExecutePostToTokenEndpoint",E0="refreshTokenClientExecuteTokenRequest",A0="refreshTokenClientAcquireToken",qh="refreshTokenClientAcquireTokenWithCachedRefreshToken",b0="refreshTokenClientCreateTokenRequestBody",w0="silentFlowClientGenerateResultFromCacheRecord",Jf="getAuthCodeUrl",$C="handleCodeResponseFromServer",_0="authClientExecuteTokenRequest",k0="authClientCreateTokenRequestBody",O0="updateTokenEndpointAuthority",hl="popTokenGenerateCnf",Xf="handleServerTokenResponse",I0="authorityResolveEndpointsAsync",R0="authorityGetCloudDiscoveryMetadataFromNetwork",N0="authorityUpdateCloudDiscoveryMetadata",M0="authorityGetEndpointMetadataFromNetwork",x0="authorityUpdateEndpointMetadata",kv="authorityUpdateMetadataWithRegionalInformation",D0="regionDiscoveryDetectRegion",Ov="regionDiscoveryGetRegionFromIMDS",U0="regionDiscoveryGetCurrentVersion",j0="cacheManagerGetRefreshToken",H0="setUserData";const Zn=(l,n,a,o,r)=>(...d)=>{a.trace("1plfzx",r);const h=o.startMeasurement(n,r);if(r){const f=n+"CallCount";o.incrementFields({[f]:1},r)}try{const f=l(...d);return h.end({success:!0}),a.trace("1g8n6a",r),f}catch(f){a.trace("0cfd8i",r);try{a.trace(JSON.stringify(f),r)}catch{a.trace("00dty7",r)}throw h.end({success:!1},f),f}},P=(l,n,a,o,r)=>(...d)=>{a.trace("1plfzx",r);const h=o.startMeasurement(n,r);if(r){const f=n+"CallCount";o.incrementFields({[f]:1},r)}return l(...d).then(f=>(a.trace("1g8n6a",r),h.end({success:!0}),f)).catch(f=>{a.trace("0cfd8i",r);try{a.trace(JSON.stringify(f),r)}catch{a.trace("00dty7",r)}throw h.end({success:!1},f),f})};const z0={SW:"sw"};class Mo{constructor(n,a){this.cryptoUtils=n,this.performanceClient=a}async generateCnf(n,a){const o=await P(this.generateKid.bind(this),hl,a,this.performanceClient,n.correlationId)(n),r=this.cryptoUtils.base64UrlEncode(JSON.stringify(o));return{kid:o.kid,reqCnfString:r}}async generateKid(n){return{kid:await this.cryptoUtils.getPublicKeyThumbprint(n),xms_ksl:z0.SW}}async signPopToken(n,a,o){return this.signPayload(n,a,o)}async signPayload(n,a,o,r){const{resourceRequestMethod:d,resourceRequestUri:h,shrClaims:f,shrNonce:v,shrOptions:p}=o,T=(h?new Fe(h):void 0)?.getUrlComponents();return this.cryptoUtils.signJwt({at:n,ts:Wn(),m:d?.toUpperCase(),u:T?.HostNameAndPort,nonce:v||this.cryptoUtils.createNewGuid(),p:T?.AbsolutePath,q:T?.QueryString?[[],T.QueryString]:void 0,client_claims:f||void 0,...r},a,p,o.correlationId)}}class L0{constructor(n,a){this.cache=n,this.hasChanged=a}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}}function Zf(l,n,a,o,r){return{credentialType:Kt.ID_TOKEN,homeAccountId:l,environment:n,clientId:o,secret:a,realm:r,lastUpdatedAt:Date.now().toString()}}function $f(l,n,a,o,r,d,h,f,v,p,S,T,k){const M={homeAccountId:l,credentialType:Kt.ACCESS_TOKEN,secret:a,cachedAt:Wn().toString(),expiresOn:h.toString(),extendedExpiresOn:f.toString(),environment:n,clientId:o,realm:r,target:d,tokenType:S||Je.BEARER,lastUpdatedAt:Date.now().toString()};if(T&&(M.userAssertionHash=T),p&&(M.refreshOn=p.toString()),M.tokenType?.toLowerCase()!==Je.BEARER.toLowerCase())switch(M.credentialType=Kt.ACCESS_TOKEN_WITH_AUTH_SCHEME,M.tokenType){case Je.POP:const F=Fi(a,v);if(!F?.cnf?.kid)throw q(Ab);M.keyId=F.cnf.kid;break;case Je.SSH:M.keyId=k}return M}function B0(l,n,a,o,r,d,h){const f={credentialType:Kt.REFRESH_TOKEN,homeAccountId:l,environment:n,clientId:o,secret:a,lastUpdatedAt:Date.now().toString()};return d&&(f.userAssertionHash=d),r&&(f.familyId=r),h&&(f.expiresOn=h.toString()),f}function pu(l){return l.hasOwnProperty("homeAccountId")&&l.hasOwnProperty("environment")&&l.hasOwnProperty("credentialType")&&l.hasOwnProperty("clientId")&&l.hasOwnProperty("secret")}function Iv(l){return l?pu(l)&&l.hasOwnProperty("realm")&&l.hasOwnProperty("target")&&(l.credentialType===Kt.ACCESS_TOKEN||l.credentialType===Kt.ACCESS_TOKEN_WITH_AUTH_SCHEME):!1}function K0(l){return l?pu(l)&&l.hasOwnProperty("realm")&&l.credentialType===Kt.ID_TOKEN:!1}function Rv(l){return l?pu(l)&&l.credentialType===Kt.REFRESH_TOKEN:!1}function P0(l,n){const a=l.indexOf(pC)===0;let o=!0;return n&&(o=n.hasOwnProperty("failedRequests")&&n.hasOwnProperty("errors")&&n.hasOwnProperty("cacheHits")),a&&o}function G0(l,n){let a=!1;l&&(a=l.indexOf(yC)===0);let o=!0;return n&&(o=n.hasOwnProperty("throttleTime")),a&&o}function V0({environment:l,clientId:n}){return[Of,l,n].join(mC).toLowerCase()}function F0(l,n){return n?l.indexOf(Of)===0&&n.hasOwnProperty("clientId")&&n.hasOwnProperty("environment"):!1}function Y0(l,n){return n?l.indexOf(rf)===0&&n.hasOwnProperty("aliases")&&n.hasOwnProperty("preferred_cache")&&n.hasOwnProperty("preferred_network")&&n.hasOwnProperty("canonical_authority")&&n.hasOwnProperty("authorization_endpoint")&&n.hasOwnProperty("token_endpoint")&&n.hasOwnProperty("issuer")&&n.hasOwnProperty("aliasesFromNetwork")&&n.hasOwnProperty("endpointsFromNetwork")&&n.hasOwnProperty("expiresAt")&&n.hasOwnProperty("jwks_uri"):!1}function Nv(){return Wn()+iA}function Kc(l,n,a){l.authorization_endpoint=n.authorization_endpoint,l.token_endpoint=n.token_endpoint,l.end_session_endpoint=n.end_session_endpoint,l.issuer=n.issuer,l.endpointsFromNetwork=a,l.jwks_uri=n.jwks_uri}function Jh(l,n,a){l.aliases=n.aliases,l.preferred_cache=n.preferred_cache,l.preferred_network=n.preferred_network,l.aliasesFromNetwork=a}function Mv(l){return l.expiresAt<=Wn()}class Ts{constructor(n,a,o,r,d,h,f){this.clientId=n,this.cacheStorage=a,this.cryptoObj=o,this.logger=r,this.performanceClient=d,this.serializableCache=h,this.persistencePlugin=f}validateTokenResponse(n,a,o){if(n.error||n.error_description||n.suberror){const r=`Error(s): ${n.error_codes||Qr} - Timestamp: ${n.timestamp||Qr} - Description: ${n.error_description||Qr} - Correlation ID: ${n.correlation_id||Qr} - Trace ID: ${n.trace_id||Qr}`,d=n.error_codes?.length?n.error_codes[0]:void 0,h=new _s(n.error,r,n.suberror,d,n.status);if(o&&n.status&&n.status>=$E&&n.status<=WE){this.logger.warning("16ks7j",a);return}else if(o&&n.status&&n.status>=XE&&n.status<=ZE){this.logger.warning("0g61x3",a);return}throw ZC(n.error,n.error_description,n.suberror)?new $n(n.error,n.error_description,n.suberror,n.timestamp||"",n.trace_id||"",n.correlation_id||"",n.claims||"",d):h}}async handleServerTokenResponse(n,a,o,r,d,h,f,v,p,S){let T;if(n.id_token){if(T=Fi(n.id_token||"",this.cryptoObj.base64Decode),h&&h.nonce&&T.nonce!==h.nonce)throw q(pb);if(r.maxAge||r.maxAge===0){const J=T.auth_time;if(!J)throw q(kC);PC(J,r.maxAge)}}this.homeAccountIdentifier=FC(n.client_info||"",a.authorityType,this.logger,this.cryptoObj,r.correlationId,T);let k;h&&h.state&&(k=dl(this.cryptoObj.base64Decode,h.state)),n.key_id=n.key_id||r.sshKid||void 0;const M=this.generateCacheRecord(n,a,o,r,T,f,h);let F;try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("0jbz5k",r.correlationId),F=new L0(this.serializableCache,!0),await this.persistencePlugin.beforeCacheAccess(F)),v&&!p&&M.account&&this.cacheStorage.getAllAccounts({homeAccountId:M.account.homeAccountId,environment:M.account.environment},r.correlationId).length<1)return this.logger.warning("1gmt66",r.correlationId),this.performanceClient?.addFields({acntLoggedOut:!0},r.correlationId),await Ts.generateAuthenticationResult(this.cryptoObj,a,M,!1,r,this.performanceClient,T,k,void 0,S);await this.cacheStorage.saveCacheRecord(M,r.correlationId,ys(T||{}),d,r.storeInCache)}finally{this.persistencePlugin&&this.serializableCache&&F&&(this.logger.verbose("1bh17u",r.correlationId),await this.persistencePlugin.afterCacheAccess(F))}return Ts.generateAuthenticationResult(this.cryptoObj,a,M,!1,r,this.performanceClient,T,k,n,S)}generateCacheRecord(n,a,o,r,d,h,f){const v=a.getPreferredCache();if(!v)throw q(IC);const p=Yf(d);let S,T;n.id_token&&d&&(S=Zf(this.homeAccountIdentifier,v,n.id_token,this.clientId,p||""),T=WC(this.cacheStorage,a,this.homeAccountIdentifier,this.cryptoObj.base64Decode,r.correlationId,d,n.client_info,v,p,f,void 0,this.logger));let k=null;if(n.access_token){const J=n.scope?Yt.fromString(n.scope):new Yt(r.scopes||[]),ve=(typeof n.expires_in=="string"?parseInt(n.expires_in,10):n.expires_in)||0,W=(typeof n.ext_expires_in=="string"?parseInt(n.ext_expires_in,10):n.ext_expires_in)||0,de=(typeof n.refresh_in=="string"?parseInt(n.refresh_in,10):n.refresh_in)||void 0,ae=o+ve,Ie=ae+W,se=de&&de>0?o+de:void 0;k=$f(this.homeAccountIdentifier,v,n.access_token,this.clientId,p||a.tenant||"",J.printScopes(),ae,Ie,this.cryptoObj.base64Decode,se,n.token_type,h,n.key_id)}let M=null;if(n.refresh_token){let J;if(n.refresh_token_expires_in){const ve=typeof n.refresh_token_expires_in=="string"?parseInt(n.refresh_token_expires_in,10):n.refresh_token_expires_in;J=o+ve,this.performanceClient?.addFields({ntwkRtExpiresOnSeconds:J},r.correlationId)}M=B0(this.homeAccountIdentifier,v,n.refresh_token,this.clientId,n.foci,h,J)}let F=null;return n.foci&&(F={clientId:this.clientId,environment:v,familyId:n.foci}),{account:T,idToken:S,accessToken:k,refreshToken:M,appMetadata:F}}static async generateAuthenticationResult(n,a,o,r,d,h,f,v,p,S){let T="",k=[],M=null,F,J,ve="";if(o.accessToken){if(o.accessToken.tokenType===Je.POP&&!d.popKid){const Ie=new Mo(n,h),{secret:se,keyId:ee}=o.accessToken;if(!ee)throw q(NC);T=await Ie.signPopToken(se,ee,d)}else T=o.accessToken.secret;k=Yt.fromString(o.accessToken.target).asArray(),M=Yc(o.accessToken.expiresOn),F=Yc(o.accessToken.extendedExpiresOn),o.accessToken.refreshOn&&(J=Yc(o.accessToken.refreshOn))}o.appMetadata&&(ve=o.appMetadata.familyId===Zc?Zc:"");const W=f?.oid||f?.sub||"",de=f?.tid||"";p?.spa_accountid&&o.account&&(o.account.nativeAccountId=p?.spa_accountid);const ae=o.account?Vf(Ss(o.account),void 0,f,o.idToken?.secret):null;return{authority:a.canonicalAuthority,uniqueId:W,tenantId:de,scopes:k,account:ae,idToken:o?.idToken?.secret||"",idTokenClaims:f||{},accessToken:T,fromCache:r,expiresOn:M,extExpiresOn:F,refreshOn:J,correlationId:d.correlationId,requestId:S||"",familyId:ve,tokenType:o.accessToken?.tokenType||"",state:v?v.userRequestState:"",cloudGraphHostName:o.account?.cloudGraphHostName||"",msGraphHost:o.account?.msGraphHost||"",code:p?.spa_code,fromPlatformBroker:!1}}}function WC(l,n,a,o,r,d,h,f,v,p,S,T){T?.verbose("09jz0t",r);const M=l.getAccountKeys().find(de=>de.startsWith(a));let F=null;M&&(F=l.getAccount(M,r));const J=F||$b({homeAccountId:a,idTokenClaims:d,clientInfo:h,environment:f,cloudGraphHostName:p?.cloud_graph_host_name,msGraphHost:p?.msgraph_host,nativeAccountId:S},n,o),ve=J.tenantProfiles||[],W=v||J.realm;if(W&&!ve.find(de=>de.tenantId===W)){const de=Uo(a,J.localAccountId,W,d);ve.push(de)}return J.tenantProfiles=ve,J}const Xn={HOME_ACCOUNT_ID:"home_account_id",UPN:"UPN"};async function eS(l,n,a){return typeof l=="string"?l:l({clientId:n,tokenEndpoint:a})}function yu(l,n,a){return{clientId:l,authority:n.authority,scopes:n.scopes,homeAccountIdentifier:a,claims:n.claims,authenticationScheme:n.authenticationScheme,resourceRequestMethod:n.resourceRequestMethod,resourceRequestUri:n.resourceRequestUri,shrClaims:n.shrClaims,sshKid:n.sshKid,embeddedClientId:n.embeddedClientId||n.extraParameters?.clientId}}class gi{static generateThrottlingStorageKey(n){return`${yC}.${JSON.stringify(n)}`}static preProcess(n,a,o){const r=gi.generateThrottlingStorageKey(a),d=n.getThrottlingCache(r,o);if(d){if(d.throttleTime<Date.now()){n.removeItem(r,o);return}throw new _s(d.errorCodes?.join(" ")||"",d.errorMessage,d.subError)}}static postProcess(n,a,o,r){if(gi.checkResponseStatus(o)||gi.checkResponseForRetryAfter(o)){const d={throttleTime:gi.calculateThrottleTime(parseInt(o.headers[Wt.RETRY_AFTER])),error:o.body.error,errorCodes:o.body.error_codes,errorMessage:o.body.error_description,subError:o.body.suberror};n.setThrottlingCache(gi.generateThrottlingStorageKey(a),d,r)}}static checkResponseStatus(n){return n.status===429||n.status>=500&&n.status<600}static checkResponseForRetryAfter(n){return n.headers?n.headers.hasOwnProperty(Wt.RETRY_AFTER)&&(n.status<200||n.status>=300):!1}static calculateThrottleTime(n){const a=n<=0?0:n,o=Date.now()/1e3;return Math.floor(Math.min(o+(a||cA),o+uA)*1e3)}static removeThrottle(n,a,o,r){const d=yu(a,o,r),h=this.generateThrottlingStorageKey(d);n.removeItem(h,o.correlationId)}}class vu extends et{constructor(n,a,o){super(n.errorCode,n.errorMessage,n.subError),Object.setPrototypeOf(this,vu.prototype),this.name="NetworkError",this.error=n,this.httpStatus=a,this.responseHeaders=o}}function Zr(l,n,a,o){return l.errorMessage=`${l.errorMessage}, additionalErrorInfo: error.name:${o?.name}, error.message:${o?.message}`,new vu(l,n,a)}function tS(l,n,a){const o={};if(o[Wt.CONTENT_TYPE]=GE,!n&&a)switch(a.type){case Xn.HOME_ACCOUNT_ID:try{const r=ko(a.credential);o[Wt.CCS_HEADER]=`Oid:${r.uid}@${r.utid}`}catch{l.verbose("1qhtee","")}break;case Xn.UPN:o[Wt.CCS_HEADER]=`UPN: ${a.credential}`;break}return o}function nS(l,n,a,o){const r=new Map;return l.embeddedClientId&&gu(r,n,a),l.extraQueryParameters&&pi(r,l.extraQueryParameters),cl(r,l.correlationId),fu(r,l.correlationId,o),sl(r)}async function iS(l,n,a,o,r,d,h,f,v,p){const S=await Q0(o,l,{body:n,headers:a},r,d,h,f,v);return p&&S.status<500&&S.status!==429&&p.clearTelemetryCache(),S}async function Q0(l,n,a,o,r,d,h,f){gi.preProcess(r,l,o);let v;try{v=await P(d.sendPostRequestAsync.bind(d),C0,h,f,o)(n,a);const p=v.headers||{};f?.addFields({refreshTokenSize:v.body.refresh_token?.length||0,httpVerToken:p[Wt.X_MS_HTTP_VERSION]||"",requestId:p[Wt.X_MS_REQUEST_ID]||""},o)}catch(p){if(p instanceof vu){const S=p.responseHeaders;throw S&&f?.addFields({httpVerToken:S[Wt.X_MS_HTTP_VERSION]||"",requestId:S[Wt.X_MS_REQUEST_ID]||"",contentTypeHeader:S[Wt.CONTENT_TYPE]||void 0,contentLengthHeader:S[Wt.CONTENT_LENGTH]||void 0,httpStatus:p.httpStatus},o),p.error}throw p instanceof et?p:q(hb)}return gi.postProcess(r,l,v,o),v}function q0(l){return l.hasOwnProperty("authorization_endpoint")&&l.hasOwnProperty("token_endpoint")&&l.hasOwnProperty("issuer")&&l.hasOwnProperty("jwks_uri")}function J0(l){return l.hasOwnProperty("tenant_discovery_endpoint")&&l.hasOwnProperty("metadata")}function X0(l){return l.hasOwnProperty("error")&&l.hasOwnProperty("error_description")}class Cu{constructor(n,a,o,r){this.networkInterface=n,this.logger=a,this.performanceClient=o,this.correlationId=r}async detectRegion(n,a){let o=n;if(o)a.region_source=Eo.ENVIRONMENT_VARIABLE;else{const r=Cu.IMDS_OPTIONS;try{const d=await P(this.getRegionFromIMDS.bind(this),Ov,this.logger,this.performanceClient,this.correlationId)(VE,r);if(d.status===lv&&(o=d.body,a.region_source=Eo.IMDS),d.status===cv){const h=await P(this.getCurrentVersion.bind(this),U0,this.logger,this.performanceClient,this.correlationId)(r);if(!h)return a.region_source=Eo.FAILED_AUTO_DETECTION,null;const f=await P(this.getRegionFromIMDS.bind(this),Ov,this.logger,this.performanceClient,this.correlationId)(h,r);f.status===lv&&(o=f.body,a.region_source=Eo.IMDS)}}catch{return a.region_source=Eo.FAILED_AUTO_DETECTION,null}}return o||(a.region_source=Eo.FAILED_AUTO_DETECTION),o||null}async getRegionFromIMDS(n,a){return this.networkInterface.sendGetRequestAsync(`${ov}?api-version=${n}&format=text`,a,FE)}async getCurrentVersion(n){try{const a=await this.networkInterface.sendGetRequestAsync(`${ov}?format=json`,n);return a.status===cv&&a.body&&a.body["newest-versions"]&&a.body["newest-versions"].length>0?a.body["newest-versions"][0]:null}catch{return null}}}Cu.IMDS_OPTIONS={headers:{Metadata:"true"}};class un{constructor(n,a,o,r,d,h,f,v){this.canonicalAuthority=n,this._canonicalAuthority.validateAsUri(),this.networkInterface=a,this.cacheManager=o,this.authorityOptions=r,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=d,this.performanceClient=f,this.correlationId=h,this.managedIdentity=v||!1,this.regionDiscovery=new Cu(a,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(n){if(n.HostNameAndPort.endsWith(sv))return Jn.Ciam;const a=n.PathSegments;if(a.length)switch(a[0].toLowerCase()){case zE:return Jn.Adfs;case LE:return Jn.Dsts}return Jn.Default}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(n){this._canonicalAuthority=new Fe(n),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw q(wa)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw q(wa)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw q(wa)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw q(_b);return this.replacePath(this.metadata.end_session_endpoint)}else throw q(wa)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw q(wa)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw q(wa)}canReplaceTenant(n){return n.PathSegments.length===1&&!un.reservedTenantDomains.has(n.PathSegments[0])&&this.getAuthorityType(n)===Jn.Default&&this.protocolMode!==fn.OIDC}replaceTenant(n){return n.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(n){let a=n;const r=new Fe(this.metadata.canonical_authority).getUrlComponents(),d=r.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((f,v)=>{let p=d[v];if(v===0&&this.canReplaceTenant(r)){const S=new Fe(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];p!==S&&(this.logger.verbose("1q3g2x",this.correlationId),p=S)}f!==p&&(a=a.replace(`/${p}/`,`/${f}/`))}),this.replaceTenant(a)}get defaultOpenIdConfigurationEndpoint(){const n=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||this.authorityType===Jn.Adfs||this.protocolMode===fn.OIDC&&!this.isAliasOfKnownMicrosoftAuthority(n)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}async resolveEndpointsAsync(){const n=this.getCurrentMetadataEntity(),a=await P(this.updateCloudDiscoveryMetadata.bind(this),N0,this.logger,this.performanceClient,this.correlationId)(n);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,n.preferred_network);const o=await P(this.updateEndpointMetadata.bind(this),x0,this.logger,this.performanceClient,this.correlationId)(n);this.updateCachedMetadata(n,a,{source:o}),this.performanceClient?.addFields({cloudDiscoverySource:a,authorityEndpointSource:o},this.correlationId)}getCurrentMetadataEntity(){let n=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort,this.correlationId);return n||(n={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:Nv(),jwks_uri:""}),n}updateCachedMetadata(n,a,o){a!==Qn.CACHE&&o?.source!==Qn.CACHE&&(n.expiresAt=Nv(),n.canonical_authority=this.canonicalAuthority);const r=this.cacheManager.generateAuthorityMetadataCacheKey(n.preferred_cache,this.correlationId);this.cacheManager.setAuthorityMetadata(r,n,this.correlationId),this.metadata=n}async updateEndpointMetadata(n){const a=this.updateEndpointMetadataFromLocalSources(n);if(a){if(a.source===Qn.HARDCODED_VALUES&&this.authorityOptions.azureRegionConfiguration?.azureRegion&&a.metadata){const r=await P(this.updateMetadataWithRegionalInformation.bind(this),kv,this.logger,this.performanceClient,this.correlationId)(a.metadata);Kc(n,r,!1),n.canonical_authority=this.canonicalAuthority}return a.source}let o=await P(this.getEndpointMetadataFromNetwork.bind(this),M0,this.logger,this.performanceClient,this.correlationId)();if(o)return this.authorityOptions.azureRegionConfiguration?.azureRegion&&(o=await P(this.updateMetadataWithRegionalInformation.bind(this),kv,this.logger,this.performanceClient,this.correlationId)(o)),Kc(n,o,!0),Qn.NETWORK;throw q(fb,this.defaultOpenIdConfigurationEndpoint)}updateEndpointMetadataFromLocalSources(n){this.logger.verbose("1fi0kc",this.correlationId);const a=this.getEndpointMetadataFromConfig();if(a)return this.logger.verbose("06t0uj",this.correlationId),Kc(n,a,!1),{source:Qn.CONFIG};this.logger.verbose("151k0p",this.correlationId);const o=this.getEndpointMetadataFromHardcodedValues();if(o)return Kc(n,o,!1),{source:Qn.HARDCODED_VALUES,metadata:o};this.logger.verbose("1imop5",this.correlationId);const r=Mv(n);return this.isAuthoritySameType(n)&&n.endpointsFromNetwork&&!r?(this.logger.verbose("16uq31",""),{source:Qn.CACHE}):(r&&this.logger.verbose("0uoibc",""),null)}isAuthoritySameType(n){return new Fe(n.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch{throw nt(ib)}return null}async getEndpointMetadataFromNetwork(){const n={},a=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose("1y65x6",this.correlationId);try{const o=await this.networkInterface.sendGetRequestAsync(a,n);return q0(o.body)?o.body:(this.logger.verbose("1koyv8",this.correlationId),null)}catch{return this.logger.verbose("0a9wik",this.correlationId),null}}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in Ev?Ev[this.hostnameAndPort]:null}async updateMetadataWithRegionalInformation(n){const a=this.authorityOptions.azureRegionConfiguration?.azureRegion;if(a){if(a!==YE)return this.regionDiscoveryMetadata.region_outcome=Qh.CONFIGURED_NO_AUTO_DETECTION,this.regionDiscoveryMetadata.region_used=a,un.replaceWithRegionalInformation(n,a);const o=await P(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),D0,this.logger,this.performanceClient,this.correlationId)(this.authorityOptions.azureRegionConfiguration?.environmentRegion,this.regionDiscoveryMetadata);if(o)return this.regionDiscoveryMetadata.region_outcome=Qh.AUTO_DETECTION_REQUESTED_SUCCESSFUL,this.regionDiscoveryMetadata.region_used=o,un.replaceWithRegionalInformation(n,o);this.regionDiscoveryMetadata.region_outcome=Qh.AUTO_DETECTION_REQUESTED_FAILED}return n}async updateCloudDiscoveryMetadata(n){const a=this.updateCloudDiscoveryMetadataFromLocalSources(n);if(a)return a;const o=await P(this.getCloudDiscoveryMetadataFromNetwork.bind(this),R0,this.logger,this.performanceClient,this.correlationId)();if(o)return Jh(n,o,!0),Qn.NETWORK;throw nt(ab)}updateCloudDiscoveryMetadataFromLocalSources(n){this.logger.verbose("0jhlgt",this.correlationId),this.logger.verbosePii("1fy7uz",this.correlationId),this.logger.verbosePii("08zabj",this.correlationId),this.logger.verbosePii("1o1kv3",this.correlationId);const a=this.getCloudDiscoveryMetadataFromConfig();if(a)return this.logger.verbose("1nakio",this.correlationId),Jh(n,a,!1),Qn.CONFIG;this.logger.verbose("1x74aj",this.correlationId);const o=Xb(this.hostnameAndPort);if(o)return this.logger.verbose("0by47c",this.correlationId),Jh(n,o,!1),Qn.HARDCODED_VALUES;this.logger.verbose("0r2fzy",this.correlationId);const r=Mv(n);return this.isAuthoritySameType(n)&&n.aliasesFromNetwork&&!r?(this.logger.verbose("1uffgh",""),Qn.CACHE):(r&&this.logger.verbose("0uoibc",""),null)}getCloudDiscoveryMetadataFromConfig(){if(this.authorityType===Jn.Ciam)return this.logger.verbose("04y84h",this.correlationId),un.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("0gszr3",this.correlationId);try{this.logger.verbose("1iifkx",this.correlationId);const n=JSON.parse(this.authorityOptions.cloudDiscoveryMetadata),a=iu(n.metadata,this.hostnameAndPort);if(this.logger.verbose("0q67e3",""),a)return this.logger.verbose("0hzfao",this.correlationId),a;this.logger.verbose("1ajz3u",this.correlationId)}catch{throw this.logger.verbose("1wq5tu",this.correlationId),nt(bC)}}return this.isInKnownAuthorities()?(this.logger.verbose("0mt9al",this.correlationId),un.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}async getCloudDiscoveryMetadataFromNetwork(){const n=`${BE}${this.canonicalAuthority}oauth2/v2.0/authorize`,a={};let o=null;try{const r=await this.networkInterface.sendGetRequestAsync(n,a);let d,h;if(J0(r.body))d=r.body,h=d.metadata,this.logger.verbosePii("1vglyt",this.correlationId);else if(X0(r.body)){if(this.logger.warning("062uto",this.correlationId),d=r.body,d.error===JE)return this.logger.error("1x90tm",this.correlationId),null;this.logger.warning("0wchdm",this.correlationId),this.logger.warning("1s5mpv",this.correlationId),this.logger.warning("1yhqpw",this.correlationId),h=[]}else return this.logger.error("0768g0",this.correlationId),null;this.logger.verbose("1lrobr",this.correlationId),o=iu(h,this.hostnameAndPort)}catch(r){return r instanceof et?this.logger.error("0vwhc7",this.correlationId):this.logger.error("0s2z41",this.correlationId),null}return o||(this.logger.warning("0jp28q",this.correlationId),this.logger.verbose("130sd8",this.correlationId),o=un.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),o}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(a=>a&&Fe.getDomainFromUrl(a).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(n,a){let o;if(a&&a.azureCloudInstance!==Gf.None){const r=a.tenant?a.tenant:uC;o=`${a.azureCloudInstance}/${r}/`}return o||n}static createCloudDiscoveryMetadataFromHost(n){return{preferred_network:n,preferred_cache:n,aliases:[n]}}getPreferredCache(){if(this.managedIdentity)return HE;if(this.discoveryComplete())return this.metadata.preferred_cache;throw q(wa)}isAlias(n){return this.metadata.aliases.indexOf(n)>-1}isAliasOfKnownMicrosoftAuthority(n){return VC.has(n)}static isPublicCloudAuthority(n){return qE.indexOf(n)>=0}static buildRegionalAuthorityString(n,a,o){const r=new Fe(n);r.validateAsUri();const d=r.getUrlComponents();let h=`${a}.${d.HostNameAndPort}`;this.isPublicCloudAuthority(d.HostNameAndPort)&&(h=`${a}.${QE}`);const f=Fe.constructAuthorityUriFromObject({...r.getUrlComponents(),HostNameAndPort:h}).urlString;return o?`${f}?${o}`:f}static replaceWithRegionalInformation(n,a){const o={...n};return o.authorization_endpoint=un.buildRegionalAuthorityString(o.authorization_endpoint,a),o.token_endpoint=un.buildRegionalAuthorityString(o.token_endpoint,a),o.end_session_endpoint&&(o.end_session_endpoint=un.buildRegionalAuthorityString(o.end_session_endpoint,a)),o}static transformCIAMAuthority(n){let a=n;const r=new Fe(n).getUrlComponents();if(r.PathSegments.length===0&&r.HostNameAndPort.endsWith(sv)){const d=r.HostNameAndPort.split(".")[0];a=`${a}${d}${KE}`}return a}}un.reservedTenantDomains=new Set(["{tenant}","{tenantid}",Ra.COMMON,Ra.CONSUMERS,Ra.ORGANIZATIONS]);function Z0(l){const o=new Fe(l).getUrlComponents().PathSegments.slice(-1)[0]?.toLowerCase();switch(o){case Ra.COMMON:case Ra.ORGANIZATIONS:case Ra.CONSUMERS:return;default:return o}}function aS(l){return l.endsWith(sf)?l:`${l}${sf}`}function $0(l){const n=l.cloudDiscoveryMetadata;let a;if(n)try{a=JSON.parse(n)}catch{throw nt(bC)}return{canonicalAuthority:l.authority?aS(l.authority):void 0,knownAuthorities:l.knownAuthorities,cloudDiscoveryMetadata:a}}async function sS(l,n,a,o,r,d,h){const f=un.transformCIAMAuthority(aS(l)),v=new un(f,n,a,o,r,d,h);try{return await P(v.resolveEndpointsAsync.bind(v),I0,r,h,d)(),v}catch{throw q(wa)}}class oS{constructor(n,a){this.includeRedirectUri=!0,this.config=Qf(n),this.logger=new yi(this.config.loggerOptions,mu,ul),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=a,this.oidcDefaultScopes=this.config.authOptions.authority.options.OIDCOptions?.defaultScopes}async acquireToken(n,a,o){if(!n.code)throw q(Cb);o&&o.cloud_instance_host_name&&await P(this.updateTokenEndpointAuthority.bind(this),O0,this.logger,this.performanceClient,n.correlationId)(o.cloud_instance_host_name,n.correlationId);const r=Wn(),d=await P(this.executeTokenRequest.bind(this),_0,this.logger,this.performanceClient,n.correlationId)(this.authority,n,this.serverTelemetryManager),h=d.headers?.[Wt.X_MS_REQUEST_ID],f=new Ts(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.performanceClient,this.config.serializableCache,this.config.persistencePlugin);return f.validateTokenResponse(d.body,n.correlationId),P(f.handleServerTokenResponse.bind(f),Xf,this.logger,this.performanceClient,n.correlationId)(d.body,this.authority,r,n,a,o,void 0,void 0,void 0,h)}getLogoutUri(n){if(!n)throw nt(nb);const a=this.createLogoutUrlQueryString(n);return Fe.appendQueryString(this.authority.endSessionEndpoint,a)}async executeTokenRequest(n,a,o){const r=nS(a,this.config.authOptions.clientId,this.config.authOptions.redirectUri,this.performanceClient),d=Fe.appendQueryString(n.tokenEndpoint,r),h=await P(this.createTokenRequestBody.bind(this),k0,this.logger,this.performanceClient,a.correlationId)(a);let f;if(a.clientInfo)try{const S=au(a.clientInfo,this.cryptoUtils.base64Decode);f={credential:`${S.uid}${of}${S.utid}`,type:Xn.HOME_ACCOUNT_ID}}catch{this.logger.verbose("0wznt3",a.correlationId)}const v=tS(this.logger,this.config.systemOptions.preventCorsPreflight,f||a.ccsCredential),p=yu(this.config.authOptions.clientId,a);return P(iS,T0,this.logger,this.performanceClient,a.correlationId)(d,h,v,p,a.correlationId,this.cacheManager,this.networkClient,this.logger,this.performanceClient,o)}async createTokenRequestBody(n){const a=new Map;if(Uf(a,n.embeddedClientId||n.extraParameters?.[Cs]||this.config.authOptions.clientId),this.includeRedirectUri)jf(a,n.redirectUri);else if(!n.redirectUri)throw nt(ZA);if(Df(a,n.scopes,!0,this.oidcDefaultScopes),Db(a,n.code),zf(a,this.config.libraryInfo),Lf(a,this.config.telemetry.application),BC(a),this.serverTelemetryManager&&!qC(this.config)&&LC(a,this.serverTelemetryManager),n.codeVerifier&&jb(a,n.codeVerifier),this.config.clientCredentials.clientSecret&&xC(a,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const r=this.config.clientCredentials.clientAssertion;DC(a,await eS(r.assertion,this.config.authOptions.clientId,n.resourceRequestUri)),UC(a,r.assertionType)}if(jC(a,fC.AUTHORIZATION_CODE_GRANT),Kf(a),n.authenticationScheme===Je.POP){const r=new Mo(this.cryptoUtils,this.performanceClient);let d;n.popKid?d=this.cryptoUtils.encodeKid(n.popKid):d=(await P(r.generateCnf.bind(r),hl,this.logger,this.performanceClient,n.correlationId)(n,this.logger)).reqCnfString,Pf(a,d)}else if(n.authenticationScheme===Je.SSH)if(n.sshJwk)zC(a,n.sshJwk);else throw nt(Mf);(!Pn.isEmptyObj(n.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&Hf(a,n.claims,this.config.authOptions.clientCapabilities);let o;if(n.clientInfo)try{const r=au(n.clientInfo,this.cryptoUtils.base64Decode);o={credential:`${r.uid}${of}${r.utid}`,type:Xn.HOME_ACCOUNT_ID}}catch{this.logger.verbose("0wznt3",n.correlationId)}else o=n.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&o)switch(o.type){case Xn.HOME_ACCOUNT_ID:try{const r=ko(o.credential);$r(a,r)}catch{this.logger.verbose("1qhtee",n.correlationId)}break;case Xn.UPN:eu(a,o.credential);break}return n.embeddedClientId&&gu(a,this.config.authOptions.clientId,this.config.authOptions.redirectUri),n.extraParameters&&pi(a,n.extraParameters),n.enableSpaAuthorizationCode&&(!n.extraParameters||!n.extraParameters[gv])&&pi(a,{[gv]:"1"}),fu(a,n.correlationId,this.performanceClient),sl(a)}createLogoutUrlQueryString(n){const a=new Map;return n.postLogoutRedirectUri&&Ib(a,n.postLogoutRedirectUri),n.correlationId&&cl(a,n.correlationId),n.idTokenHint&&Rb(a,n.idTokenHint),n.state&&MC(a,n.state),n.logoutHint&&zb(a,n.logoutHint),n.extraQueryParameters&&pi(a,n.extraQueryParameters),this.config.authOptions.instanceAware&&HC(a),sl(a)}async updateTokenEndpointAuthority(n,a){const o=`https://${n}/${this.authority.tenant}/`,r=await sS(o,this.networkClient,this.cacheManager,this.authority.options,this.logger,a,this.performanceClient);this.authority=r}}const W0=300;class ew{constructor(n,a){this.config=Qf(n),this.logger=new yi(this.config.loggerOptions,mu,ul),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=a}async acquireToken(n,a){const o=Wn(),r=await P(this.executeTokenRequest.bind(this),E0,this.logger,this.performanceClient,n.correlationId)(n,this.authority),d=r.headers?.[Wt.X_MS_REQUEST_ID],h=new Ts(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.performanceClient,this.config.serializableCache,this.config.persistencePlugin);return h.validateTokenResponse(r.body,n.correlationId),P(h.handleServerTokenResponse.bind(h),Xf,this.logger,this.performanceClient,n.correlationId)(r.body,this.authority,o,n,a,void 0,void 0,!0,n.forceCache,d)}async acquireTokenByRefreshToken(n,a){if(!n)throw nt(tb);if(!n.account)throw q(OC);if(this.cacheManager.isAppMetadataFOCI(n.account.environment,n.correlationId))try{return await P(this.acquireTokenWithCachedRefreshToken.bind(this),qh,this.logger,this.performanceClient,n.correlationId)(n,!0,a)}catch(r){const d=r instanceof $n&&r.errorCode===ff,h=r instanceof _s&&r.errorCode===hA&&r.subError===fA;if(d||h)return P(this.acquireTokenWithCachedRefreshToken.bind(this),qh,this.logger,this.performanceClient,n.correlationId)(n,!1,a);throw r}return P(this.acquireTokenWithCachedRefreshToken.bind(this),qh,this.logger,this.performanceClient,n.correlationId)(n,!1,a)}async acquireTokenWithCachedRefreshToken(n,a,o){const r=Zn(this.cacheManager.getRefreshToken.bind(this.cacheManager),j0,this.logger,this.performanceClient,n.correlationId)(n.account,a,n.correlationId,void 0);if(!r)throw su(ff);if(r.expiresOn){const h=n.refreshTokenExpirationOffsetSeconds||W0;if(this.performanceClient?.addFields({cacheRtExpiresOnSeconds:Number(r.expiresOn),rtOffsetSeconds:h},n.correlationId),ou(r.expiresOn,h))throw su(JC)}const d={...n,refreshToken:r.secret,authenticationScheme:n.authenticationScheme||Je.BEARER,ccsCredential:{credential:n.account.homeAccountId,type:Xn.HOME_ACCOUNT_ID}};try{return await P(this.acquireToken.bind(this),A0,this.logger,this.performanceClient,n.correlationId)(d,o)}catch(h){if(h instanceof $n&&h.subError===qf){this.logger.verbose("1pg3ap",n.correlationId);const f=this.cacheManager.generateCredentialKey(r);this.cacheManager.removeRefreshToken(f,n.correlationId)}throw h}}async executeTokenRequest(n,a){const o=nS(n,this.config.authOptions.clientId,this.config.authOptions.redirectUri,this.performanceClient),r=Fe.appendQueryString(a.tokenEndpoint,o),d=await P(this.createTokenRequestBody.bind(this),b0,this.logger,this.performanceClient,n.correlationId)(n),h=tS(this.logger,this.config.systemOptions.preventCorsPreflight,n.ccsCredential),f=yu(this.config.authOptions.clientId,n);return P(iS,S0,this.logger,this.performanceClient,n.correlationId)(r,d,h,f,n.correlationId,this.cacheManager,this.networkClient,this.logger,this.performanceClient,this.serverTelemetryManager)}async createTokenRequestBody(n){const a=new Map;if(Uf(a,n.embeddedClientId||n.extraParameters?.[Cs]||this.config.authOptions.clientId),n.redirectUri&&jf(a,n.redirectUri),Df(a,n.scopes,!0,this.config.authOptions.authority.options.OIDCOptions?.defaultScopes),jC(a,fC.REFRESH_TOKEN_GRANT),Kf(a),zf(a,this.config.libraryInfo),Lf(a,this.config.telemetry.application),BC(a),this.serverTelemetryManager&&!qC(this.config)&&LC(a,this.serverTelemetryManager),Ub(a,n.refreshToken),this.config.clientCredentials.clientSecret&&xC(a,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const o=this.config.clientCredentials.clientAssertion;DC(a,await eS(o.assertion,this.config.authOptions.clientId,n.resourceRequestUri)),UC(a,o.assertionType)}if(n.authenticationScheme===Je.POP){const o=new Mo(this.cryptoUtils,this.performanceClient);let r;n.popKid?r=this.cryptoUtils.encodeKid(n.popKid):r=(await P(o.generateCnf.bind(o),hl,this.logger,this.performanceClient,n.correlationId)(n,this.logger)).reqCnfString,Pf(a,r)}else if(n.authenticationScheme===Je.SSH)if(n.sshJwk)zC(a,n.sshJwk);else throw nt(Mf);if((!Pn.isEmptyObj(n.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&Hf(a,n.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&n.ccsCredential)switch(n.ccsCredential.type){case Xn.HOME_ACCOUNT_ID:try{const o=ko(n.ccsCredential.credential);$r(a,o)}catch{this.logger.verbose("1qhtee",n.correlationId)}break;case Xn.UPN:eu(a,n.ccsCredential.credential);break}return n.embeddedClientId&&gu(a,this.config.authOptions.clientId,this.config.authOptions.redirectUri),n.extraParameters&&pi(a,{...n.extraParameters}),fu(a,n.correlationId,this.performanceClient),sl(a)}}class tw{constructor(n,a){this.config=Qf(n),this.logger=new yi(this.config.loggerOptions,mu,ul),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=a}async acquireCachedToken(n){let a=gs.NOT_APPLICABLE;if(n.forceRefresh||!Pn.isEmptyObj(n.claims))throw this.setCacheOutcome(gs.FORCE_REFRESH_OR_CLAIMS,n.correlationId),q(ps);if(!n.account)throw q(OC);const o=n.account.tenantId||Z0(n.authority),r=this.cacheManager.getTokenKeys(),d=this.cacheManager.getAccessToken(n.account,n,r,o);if(d){if(v0(d.cachedAt)||ou(d.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome(gs.CACHED_ACCESS_TOKEN_EXPIRED,n.correlationId),q(ps);d.refreshOn&&ou(d.refreshOn,0)&&(a=gs.PROACTIVELY_REFRESHED)}else throw this.setCacheOutcome(gs.NO_CACHED_ACCESS_TOKEN,n.correlationId),q(ps);const h=n.authority||this.authority.getPreferredCache(),f={account:this.cacheManager.getAccount(this.cacheManager.generateAccountKey(n.account),n.correlationId),accessToken:d,idToken:this.cacheManager.getIdToken(n.account,n.correlationId,r,o),refreshToken:null,appMetadata:this.cacheManager.readAppMetadataFromCache(h,n.correlationId)};return this.setCacheOutcome(a,n.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[await P(this.generateResultFromCacheRecord.bind(this),w0,this.logger,this.performanceClient,n.correlationId)(f,n),a]}setCacheOutcome(n,a){this.serverTelemetryManager?.setCacheOutcome(n),this.performanceClient?.addFields({cacheOutcome:n},a),n!==gs.NOT_APPLICABLE&&this.logger.info("09ingz",a)}async generateResultFromCacheRecord(n,a){let o;if(n.idToken&&(o=Fi(n.idToken.secret,this.config.cryptoInterface.base64Decode)),a.maxAge||a.maxAge===0){const r=o?.auth_time;if(!r)throw q(kC);PC(r,a.maxAge)}return Ts.generateAuthenticationResult(this.cryptoUtils,this.authority,n,!0,a,this.performanceClient,o)}}const nw={sendGetRequestAsync:()=>Promise.reject(q(Oe)),sendPostRequestAsync:()=>Promise.reject(q(Oe))};function iw(l,n,a,o){const r=n.correlationId,d=new Map;Uf(d,n.embeddedClientId||n.extraQueryParameters?.[Cs]||l.clientId);const h=[...n.scopes||[],...n.extraScopesToConsent||[]];if(Df(d,h,!0,l.authority.options.OIDCOptions?.defaultScopes),jf(d,n.redirectUri),cl(d,r),kb(d,n.responseMode),Kf(d),n.prompt&&(Mb(d,n.prompt),o?.addFields({prompt:n.prompt},r)),n.domainHint&&(Nb(d,n.domainHint),o?.addFields({domainHintFromRequest:!0},r)),n.prompt!==hn.SELECT_ACCOUNT)if(n.sid&&n.prompt===hn.NONE)a.verbose("1tvqyx",n.correlationId),vv(d,n.sid),o?.addFields({sidFromRequest:!0},r);else if(n.account){const f=ow(n.account);let v=rw(n.account);if(v&&n.domainHint&&(a.warning("0wkg3v",n.correlationId),v=null),v){a.verbose("1eyfsw",n.correlationId),Bc(d,v),o?.addFields({loginHintFromClaim:!0},r);try{const p=ko(n.account.homeAccountId);$r(d,p)}catch{a.verbose("12ugck",n.correlationId)}}else if(f&&n.prompt===hn.NONE){a.verbose("1rmd8s",n.correlationId),vv(d,f),o?.addFields({sidFromClaim:!0},r);try{const p=ko(n.account.homeAccountId);$r(d,p)}catch{a.verbose("12ugck",n.correlationId)}}else if(n.loginHint)a.verbose("0y3007",n.correlationId),Bc(d,n.loginHint),eu(d,n.loginHint),o?.addFields({loginHintFromRequest:!0},r);else if(n.account.username){a.verbose("02f507",n.correlationId),Bc(d,n.account.username),o?.addFields({loginHintFromUpn:!0},r);try{const p=ko(n.account.homeAccountId);$r(d,p)}catch{a.verbose("12ugck",n.correlationId)}}}else n.loginHint&&(a.verbose("0g01ey",n.correlationId),Bc(d,n.loginHint),eu(d,n.loginHint),o?.addFields({loginHintFromRequest:!0},r));else a.verbose("169k9v",n.correlationId);return n.nonce&&xb(d,n.nonce),n.state&&MC(d,n.state),(n.claims||l.clientCapabilities&&l.clientCapabilities.length>0)&&Hf(d,n.claims,l.clientCapabilities),n.embeddedClientId&&gu(d,l.clientId,l.redirectUri),l.instanceAware&&(!n.extraQueryParameters||!Object.keys(n.extraQueryParameters).includes(lf))&&HC(d),d}function Wf(l,n){const a=sl(n);return Fe.appendQueryString(l.authorizationEndpoint,a)}function aw(l,n){if(rS(l,n),!l.code)throw q(bb);return l}function rS(l,n){if(!l.state||!n)throw l.state?q(mv,"Cached State"):q(mv,"Server State");let a,o;try{a=decodeURIComponent(l.state)}catch{throw q(al,l.state)}try{o=decodeURIComponent(n)}catch{throw q(al,l.state)}if(a!==o)throw q(mb);if(l.error||l.error_description||l.suberror){const r=sw(l);throw ZC(l.error,l.error_description,l.suberror)?new $n(l.error||"",l.error_description,l.suberror,l.timestamp||"",l.trace_id||"",l.correlation_id||"",l.claims||"",r):new _s(l.error||"",l.error_description,l.suberror,r)}}function sw(l){const n="code=",a=l.error_uri?.lastIndexOf(n);return a&&a>=0?l.error_uri?.substring(a+n.length):void 0}function ow(l){return l.idTokenClaims?.sid||null}function rw(l){return l.loginHint||l.idTokenClaims?.login_hint||null}const gf="unexpected_error";const xv=",",lS="|";function lw(l){const{skus:n,libraryName:a,libraryVersion:o,extensionName:r,extensionVersion:d}=l,h=new Map([[0,[a,o]],[2,[r,d]]]);let f=[];if(n?.length){if(f=n.split(xv),f.length<4)return n}else f=Array.from({length:4},()=>lS);return h.forEach((v,p)=>{v.length===2&&v[0]?.length&&v[1]?.length&&cw({skuArr:f,index:p,skuName:v[0],skuVersion:v[1]})}),f.join(xv)}function cw(l){const{skuArr:n,index:a,skuName:o,skuVersion:r}=l;a>=n.length||(n[a]=[o,r].join(lS))}class ol{constructor(n,a){this.cacheOutcome=gs.NOT_APPLICABLE,this.cacheManager=a,this.apiId=n.apiId,this.correlationId=n.correlationId,this.wrapperSKU=n.wrapperSKU||"",this.wrapperVer=n.wrapperVer||"",this.telemetryCacheKey=pC+mC+n.clientId}generateCurrentRequestHeaderValue(){const n=`${this.apiId}${To}${this.cacheOutcome}`,a=[this.wrapperSKU,this.wrapperVer],o=this.getNativeBrokerErrorCode();o?.length&&a.push(`broker_error=${o}`);const r=a.join(To),d=this.getRegionDiscoveryFields(),h=[n,d].join(To);return[hv,h,r].join(fv)}generateLastRequestHeaderValue(){const n=this.getLastRequests(),a=ol.maxErrorsToSend(n),o=n.failedRequests.slice(0,2*a).join(To),r=n.errors.slice(0,a).join(To),d=n.errors.length,h=a<d?oA:rA,f=[d,h].join(To);return[hv,n.cacheHits,o,r,f].join(fv)}cacheFailedRequest(n){const a=this.getLastRequests();a.errors.length>=sA&&(a.failedRequests.shift(),a.failedRequests.shift(),a.errors.shift()),a.failedRequests.push(this.apiId,this.correlationId),n instanceof Error&&n&&n.toString()?n instanceof et?n.subError?a.errors.push(n.subError):n.errorCode?a.errors.push(n.errorCode):a.errors.push(n.toString()):a.errors.push(n.toString()):a.errors.push(lA),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,a,this.correlationId)}incrementCacheHits(){const n=this.getLastRequests();return n.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,n,this.correlationId),n.cacheHits}getLastRequests(){const n={failedRequests:[],errors:[],cacheHits:0};return this.cacheManager.getServerTelemetry(this.telemetryCacheKey,this.correlationId)||n}clearTelemetryCache(){const n=this.getLastRequests(),a=ol.maxErrorsToSend(n),o=n.errors.length;if(a===o)this.cacheManager.removeItem(this.telemetryCacheKey,this.correlationId);else{const r={failedRequests:n.failedRequests.slice(a*2),errors:n.errors.slice(a),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,r,this.correlationId)}}static maxErrorsToSend(n){let a,o=0,r=0;const d=n.errors.length;for(a=0;a<d;a++){const h=n.failedRequests[2*a]||"",f=n.failedRequests[2*a+1]||"",v=n.errors[a]||"";if(r+=h.toString().length+f.toString().length+v.length+3,r<aA)o+=1;else break}return o}getRegionDiscoveryFields(){const n=[];return n.push(this.regionUsed||""),n.push(this.regionSource||""),n.push(this.regionOutcome||""),n.join(",")}updateRegionDiscoveryMetadata(n){this.regionUsed=n.region_used,this.regionSource=n.region_source,this.regionOutcome=n.region_outcome}setCacheOutcome(n){this.cacheOutcome=n}setNativeBrokerErrorCode(n){const a=this.getLastRequests();a.nativeBrokerErrorCode=n,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,a,this.correlationId)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){const n=this.getLastRequests();delete n.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,n,this.correlationId)}static makeExtraSkuString(n){return lw(n)}}class eg extends et{constructor(n,a){super(n,a),this.name="JoseHeaderError",Object.setPrototypeOf(this,eg.prototype)}}function Dv(l){return new eg(l)}const uw="missing_kid_error",dw="missing_alg_error";class tg{constructor(n){this.typ=n.typ,this.alg=n.alg,this.kid=n.kid}static getShrHeaderString(n){if(!n.kid)throw Dv(uw);if(!n.alg)throw Dv(dw);const a=new tg({typ:n.typ||gA.Pop,kid:n.kid,alg:n.alg});return JSON.stringify(a)}}function Su(l){return`See https://aka.ms/msal.js.errors#${l} for details`}class fl extends et{constructor(n,a){super(n,Su(n),a),Object.setPrototypeOf(this,fl.prototype),this.name="BrowserAuthError"}}function ne(l,n){return new fl(l,n)}const Bn={INVALID_GRANT_ERROR:"invalid_grant",POPUP_WIDTH:483,POPUP_HEIGHT:600,POPUP_NAME_PREFIX:"msal",MSAL_SKU:"msal.js.browser"},Kn={CHANNEL_ID:"53ee284d-920a-4b59-9d30-a60315b26836",PREFERRED_EXTENSION_ID:"ppnbnpeolgkicgegkbkbjmhlideopiji",MATS_TELEMETRY:"MATS",MICROSOFT_ENTRA_BROKERID:"MicrosoftEntra",DOM_API_NAME:"DOM API",PLATFORM_DOM_APIS:"get-token-and-sign-out",PLATFORM_DOM_PROVIDER:"PlatformAuthDOMHandler",PLATFORM_EXTENSION_PROVIDER:"PlatformAuthExtensionHandler"},qr={HandshakeRequest:"Handshake",HandshakeResponse:"HandshakeResponse",GetToken:"GetToken",Response:"Response"},Gn={LocalStorage:"localStorage",SessionStorage:"sessionStorage",MemoryStorage:"memoryStorage"},Uv={GET:"GET",POST:"POST"},ka={SIGNIN:"signin",SIGNOUT:"signout"},At={ORIGIN_URI:"request.origin",URL_HASH:"urlHash",REQUEST_PARAMS:"request.params",VERIFIER:"code.verifier",INTERACTION_STATUS_KEY:"interaction.status",NATIVE_REQUEST:"request.native"},Pc={WRAPPER_SKU:"wrapper.sku",WRAPPER_VER:"wrapper.version"},Le={acquireTokenRedirect:861,acquireTokenPopup:862,ssoSilent:863,acquireTokenSilent_authCode:864,handleRedirectPromise:865,acquireTokenByCode:866,acquireTokenSilent_silentFlow:61,logout:961,logoutPopup:962,hydrateCache:963,loadExternalTokens:964},jv={861:"acquireTokenRedirect",862:"acquireTokenPopup",863:"ssoSilent",864:"acquireTokenSilent_authCode",865:"handleRedirectPromise",866:"acquireTokenByCode",61:"acquireTokenSilent_silentFlow",961:"logout",962:"logoutPopup",963:"hydrateCache",964:"loadExternalTokens"},hw=l=>typeof l=="number"&&l in jv?jv[l]:"unknown";var Ce;(function(l){l.Redirect="redirect",l.Popup="popup",l.Silent="silent",l.None="none"})(Ce||(Ce={}));const Hv={scopes:Do},cS="jwk",mf="msal.db",fw=1,gw=`${mf}.keys`,$t={Default:0,AccessToken:1,AccessTokenAndRefreshToken:2,RefreshToken:3,RefreshTokenAndNetwork:4,Skip:5},mw=[$t.Default,$t.Skip,$t.RefreshTokenAndNetwork];function Gc(l){return encodeURIComponent(rl(l).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"))}function xa(l){return uS(l).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function rl(l){return uS(new TextEncoder().encode(l))}function uS(l){const n=Array.from(l,a=>String.fromCodePoint(a)).join("");return btoa(n)}const dS="pkce_not_created",hS="ear_jwk_empty",pw="ear_jwe_empty",zv="crypto_nonexistent",ng="empty_navigate_uri",yw="hash_empty_error",ig="no_state_in_hash",vw="hash_does_not_contain_known_properties",fS="unable_to_parse_state",Cw="state_interaction_type_mismatch",Sw="interaction_in_progress",Tw="interaction_in_progress_cancelled",Ew="popup_window_error",Aw="empty_window_error",pf="user_cancelled",bw="redirect_bridge_empty_response",ww="redirect_in_iframe",_w="block_iframe_reload",kw="block_nested_popups",ag="silent_logout_unsupported",Ow="no_account_error",Iw="no_token_request_cache_error",Rw="unable_to_parse_token_request_cache_error",gS="non_browser_environment",Jr="database_not_open",yf="no_network_connectivity",Nw="post_request_failed",Mw="get_request_failed",Lv="failed_to_parse_response",mS="crypto_key_not_found",xw="auth_code_required",Dw="auth_code_or_nativeAccountId_required",Uw="spa_code_and_nativeAccountId_present",pS="database_unavailable",jw="unable_to_acquire_token_from_native_platform",Hw="native_handshake_timeout",zw="native_extension_not_installed",yS="native_connection_not_established",Qc="uninitialized_public_client_application",Lw="native_prompt_not_supported",Bw="invalid_base64_string",Kw="invalid_pop_token_request",Pw="failed_to_build_headers",Gw="failed_to_parse_headers",Xh="failed_to_decrypt_ear_response",ru="timed_out",Vw="empty_response";function On(l){return new TextDecoder().decode(Na(l))}function Na(l){let n=l.replace(/-/g,"+").replace(/_/g,"/");switch(n.length%4){case 0:break;case 2:n+="==";break;case 3:n+="=";break;default:throw ne(Bw)}const a=atob(n);return Uint8Array.from(a,o=>o.codePointAt(0)||0)}const Fw="RSASSA-PKCS1-v1_5",jo="AES-GCM",vS="HKDF",sg="SHA-256",Yw=2048,Qw=new Uint8Array([1,0,1]),Bv="0123456789abcdef",Kv=new Uint32Array(1),og="raw",CS="encrypt",rg="decrypt",qw="deriveKey",Jw="crypto_subtle_undefined",lg={name:Fw,hash:sg,modulusLength:Yw,publicExponent:Qw};function Xw(l){if(!window)throw ne(gS);if(!window.crypto)throw ne(zv);if(!l&&!window.crypto.subtle)throw ne(zv,Jw)}async function SS(l){const a=new TextEncoder().encode(l);return window.crypto.subtle.digest(sg,a)}function Zw(l){return window.crypto.getRandomValues(l)}function Zh(){return window.crypto.getRandomValues(Kv),Kv[0]}function Es(){const l=Date.now(),n=Zh()*1024+(Zh()&1023),a=new Uint8Array(16),o=Math.trunc(n/2**30),r=n&2**30-1,d=Zh();a[0]=l/2**40,a[1]=l/2**32,a[2]=l/2**24,a[3]=l/2**16,a[4]=l/2**8,a[5]=l,a[6]=112|o>>>8,a[7]=o,a[8]=128|r>>>24,a[9]=r>>>16,a[10]=r>>>8,a[11]=r,a[12]=d>>>24,a[13]=d>>>16,a[14]=d>>>8,a[15]=d;let h="";for(let f=0;f<a.length;f++)h+=Bv.charAt(a[f]>>>4),h+=Bv.charAt(a[f]&15),(f===3||f===5||f===7||f===9)&&(h+="-");return h}async function $w(l,n){return window.crypto.subtle.generateKey(lg,l,n)}async function $h(l){return window.crypto.subtle.exportKey(cS,l)}async function Ww(l,n,a){return window.crypto.subtle.importKey(cS,l,lg,n,a)}async function e_(l,n){return window.crypto.subtle.sign(lg,l,n)}async function cg(){const l=await TS(),a={alg:"dir",kty:"oct",k:xa(new Uint8Array(l))};return rl(JSON.stringify(a))}async function t_(l){const n=On(l),o=JSON.parse(n).k,r=Na(o);return window.crypto.subtle.importKey(og,r,jo,!1,[rg])}async function n_(l,n){const a=n.split(".");if(a.length!==5)throw ne(Xh,"jwe_length");const o=await t_(l).catch(()=>{throw ne(Xh,"import_key")});try{const r=new TextEncoder().encode(a[0]),d=Na(a[2]),h=Na(a[3]),f=Na(a[4]),v=f.byteLength*8,p=new Uint8Array(h.length+f.length);p.set(h),p.set(f,h.length);const S=await window.crypto.subtle.decrypt({name:jo,iv:d,tagLength:v,additionalData:r},o,p);return new TextDecoder().decode(S)}catch{throw ne(Xh,"decrypt")}}async function TS(){const l=await window.crypto.subtle.generateKey({name:jo,length:256},!0,[CS,rg]);return window.crypto.subtle.exportKey(og,l)}async function Pv(l){return window.crypto.subtle.importKey(og,l,vS,!1,[qw])}async function ES(l,n,a){return window.crypto.subtle.deriveKey({name:vS,salt:n,hash:sg,info:new TextEncoder().encode(a)},l,{name:jo,length:256},!1,[CS,rg])}async function i_(l,n,a){const o=new TextEncoder().encode(n),r=window.crypto.getRandomValues(new Uint8Array(16)),d=await ES(l,r,a),h=await window.crypto.subtle.encrypt({name:jo,iv:new Uint8Array(12)},d,o);return{data:xa(new Uint8Array(h)),nonce:xa(r)}}async function Gv(l,n,a,o){const r=Na(o),d=await ES(l,Na(n),a),h=await window.crypto.subtle.decrypt({name:jo,iv:new Uint8Array(12)},d,r);return new TextDecoder().decode(h)}async function a_(l){const n=await SS(l),a=new Uint8Array(n);return xa(a)}class ug extends et{constructor(n,a){super(n,a),this.name="BrowserConfigurationAuthError",Object.setPrototypeOf(this,ug.prototype)}}function dg(l){return new ug(l,Su(l))}const AS="storage_not_supported",s_="in_mem_redirect_unavailable";function o_(){const l=window.location.hash,n=window.location.search;let a=!1,o=!1,r="",d;if(l&&l.length>1){const S=l.charAt(0)==="#"?l.substring(1):l,T=new URLSearchParams(S);T.has("state")&&(a=!0,r=S,d=T)}if(n&&n.length>1){const S=n.charAt(0)==="?"?n.substring(1):n,T=new URLSearchParams(S);T.has("state")&&(o=!0,r=S,d=T)}if(a&&o){const S=n.charAt(0)==="?"?n.substring(1):n,T=l.charAt(0)==="#"?l.substring(1):l;r=`${S}${T}`,d=new URLSearchParams(r)}if(!r||!d)throw ne(Vw);const h=d.get("state");if(!h)throw ne(ig);const{libraryState:f}=dl(On,h),{id:v,meta:p}=f;if(!v||!p)throw ne(fS,"missing_library_state");return{params:d,payload:r,urlHash:l,urlQuery:n,hasResponseInHash:a,hasResponseInQuery:o,libraryState:{id:v,meta:p}}}function bS(l){l.location.hash="",typeof l.history.replaceState=="function"&&l.history.replaceState(null,"",`${l.location.origin}${l.location.pathname}${l.location.search}`)}function r_(l){const n=l.split("#");n.shift(),window.location.hash=n.length>0?n.join("#"):""}function Tu(){return window.parent!==window}function l_(){if(Tu())return!1;try{const{libraryState:l}=o_(),{meta:n}=l;return n.interactionType===Ce.Popup}catch{return!1}}let Oa=null;function c_(l,n){Oa&&(l.verbose("18y01k",n),clearTimeout(Oa.timeoutId),Oa.channel.close(),Oa.reject(ne(Tw)),Oa=null)}async function bo(l,n,a,o){return new Promise((r,d)=>{n.verbose("1rf6em",o.correlationId);const{libraryState:h}=dl(a.base64Decode,o.state||""),f=new BroadcastChannel(h.id);let v;const p=window.setTimeout(()=>{Oa=null,f.close(),d(ne(ru,"redirect_bridge_timeout"))},l);Oa={timeoutId:p,channel:f,reject:d},f.onmessage=S=>{v=S.data.payload,Oa=null,clearTimeout(p),f.close(),v?r(v):d(ne(bw))}})}function Ia(){return typeof window<"u"&&window.location?window.location.href.split("?")[0].split("#")[0]:""}function u_(){const n=new Fe(window.location.href).getUrlComponents();return`${n.Protocol}//${n.HostNameAndPort}/`}function d_(){if(tu(window.location.hash)&&Tu())throw ne(_w)}function h_(l){if(Tu()&&!l)throw ne(ww)}function f_(){if(l_())throw ne(kw)}function wS(){if(typeof window>"u")throw ne(gS)}function _S(l){if(!l)throw ne(Qc)}function hg(l){wS(),d_(),f_(),_S(l)}function Vv(l,n){if(hg(l),h_(n.system.allowRedirectInIframe),n.cache.cacheLocation===Gn.MemoryStorage)throw dg(s_)}function kS(l){const n=document.createElement("link");n.rel="preconnect",n.href=new URL(l).origin,n.crossOrigin="anonymous",document.head.appendChild(n),window.setTimeout(()=>{try{document.head.removeChild(n)}catch{}},1e4)}function vf(){return Es()}const g_="acquireTokenFromCache",m_="acquireTokenByRefreshToken",p_="acquireTokenSilentAsync",y_="cryptoOptsGetPublicKeyThumbprint",v_="cryptoOptsSignJwt",C_="silentCacheClientAcquireToken",S_="silentIframeClientAcquireToken",T_="awaitConcurrentIframe",E_="silentRefreshClientAcquireToken",vs="standardInteractionClientGetDiscoveredAuthority",OS="nativeInteractionClientAcquireToken",A_="refreshTokenClientAcquireTokenByRefreshToken",Fv="acquireTokenBySilentIframe",fg="initializeBaseRequest",b_="initializeSilentRequest",w_="initializeCache",Yv="silentIframeClientTokenHelper",Wh="silentHandlerInitiateAuthRequest",lu="silentHandlerMonitorIframeForHash",__="silentHandlerLoadFrameSync",Ma="standardInteractionClientCreateAuthCodeClient",Eu="standardInteractionClientGetClientConfiguration",Au="standardInteractionClientInitializeAuthorizationRequest",k_="silentFlowClientAcquireCachedToken",O_="getStandardParams",I_="handleCodeResponse",gg="handleResponseEar",IS="handleResponsePlatformBroker",Oo="handleResponseCode",R_="authClientAcquireToken",Wr="deserializeResponse",N_="authorityFactoryCreateDiscoveredInstance",M_="acquireTokenByCodeAsync",x_="handleRedirectPromise",D_="handleNativeRedirectPromise",U_="nativeMessageHandlerHandshake",j_="importExistingCache",As="generatePkceCodes",H_="generateCodeVerifier",z_="generateCodeChallengeFromVerifier",L_="sha256Digest",B_="getRandomValues",Qv="generateHKDF",K_="generateBaseKey",P_="base64Decode",G_="urlEncodeArr",V_="encrypt",qv="decrypt",mg="generateEarKey",F_="decryptEarResponse";class Y_{constructor(){this.dbName=mf,this.version=fw,this.tableName=gw,this.dbOpen=!1}async open(){return new Promise((n,a)=>{const o=window.indexedDB.open(this.dbName,this.version);o.addEventListener("upgradeneeded",r=>{r.target.result.createObjectStore(this.tableName)}),o.addEventListener("success",r=>{const d=r;this.db=d.target.result,this.dbOpen=!0,n()}),o.addEventListener("error",()=>a(ne(pS)))})}closeConnection(){const n=this.db;n&&this.dbOpen&&(n.close(),this.dbOpen=!1)}async validateDbIsOpen(){if(!this.dbOpen)return this.open()}async getItem(n){return await this.validateDbIsOpen(),new Promise((a,o)=>{if(!this.db)return o(ne(Jr));const h=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).get(n);h.addEventListener("success",f=>{const v=f;this.closeConnection(),a(v.target.result)}),h.addEventListener("error",f=>{this.closeConnection(),o(f)})})}async setItem(n,a){return await this.validateDbIsOpen(),new Promise((o,r)=>{if(!this.db)return r(ne(Jr));const f=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).put(a,n);f.addEventListener("success",()=>{this.closeConnection(),o()}),f.addEventListener("error",v=>{this.closeConnection(),r(v)})})}async removeItem(n){return await this.validateDbIsOpen(),new Promise((a,o)=>{if(!this.db)return o(ne(Jr));const h=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).delete(n);h.addEventListener("success",()=>{this.closeConnection(),a()}),h.addEventListener("error",f=>{this.closeConnection(),o(f)})})}async getKeys(){return await this.validateDbIsOpen(),new Promise((n,a)=>{if(!this.db)return a(ne(Jr));const d=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).getAllKeys();d.addEventListener("success",h=>{const f=h;this.closeConnection(),n(f.target.result)}),d.addEventListener("error",h=>{this.closeConnection(),a(h)})})}async containsKey(n){return await this.validateDbIsOpen(),new Promise((a,o)=>{if(!this.db)return o(ne(Jr));const h=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).count(n);h.addEventListener("success",f=>{const v=f;this.closeConnection(),a(v.target.result===1)}),h.addEventListener("error",f=>{this.closeConnection(),o(f)})})}async deleteDatabase(){return this.db&&this.dbOpen&&this.closeConnection(),new Promise((n,a)=>{const o=window.indexedDB.deleteDatabase(mf),r=setTimeout(()=>a(!1),200);o.addEventListener("success",()=>(clearTimeout(r),n(!0))),o.addEventListener("blocked",()=>(clearTimeout(r),n(!0))),o.addEventListener("error",()=>(clearTimeout(r),a(!1)))})}}class bu{constructor(){this.cache=new Map}async initialize(){}getItem(n){return this.cache.get(n)||null}getUserData(n){return this.getItem(n)}setItem(n,a){this.cache.set(n,a)}async setUserData(n,a){this.setItem(n,a)}removeItem(n){this.cache.delete(n)}getKeys(){const n=[];return this.cache.forEach((a,o)=>{n.push(o)}),n}containsKey(n){return this.cache.has(n)}clear(){this.cache.clear()}decryptData(){return Promise.resolve(null)}}class Q_{constructor(n){this.inMemoryCache=new bu,this.indexedDBCache=new Y_,this.logger=n}handleDatabaseAccessError(n,a){if(n instanceof fl&&n.errorCode===pS)this.logger.error("1wx7zz",a);else throw n}async getItem(n,a){const o=this.inMemoryCache.getItem(n);if(!o)try{return this.logger.verbose("0naxpl",a),await this.indexedDBCache.getItem(n)}catch(r){this.handleDatabaseAccessError(r,a)}return o}async setItem(n,a,o){this.inMemoryCache.setItem(n,a);try{await this.indexedDBCache.setItem(n,a)}catch(r){this.handleDatabaseAccessError(r,o)}}async removeItem(n,a){this.inMemoryCache.removeItem(n);try{await this.indexedDBCache.removeItem(n)}catch(o){this.handleDatabaseAccessError(o,a)}}async getKeys(n){const a=this.inMemoryCache.getKeys();if(a.length===0)try{return this.logger.verbose("1iqrbq",n),await this.indexedDBCache.getKeys()}catch(o){this.handleDatabaseAccessError(o,n)}return a}async containsKey(n,a){const o=this.inMemoryCache.containsKey(n);if(!o)try{return this.logger.verbose("03zl2j",a),await this.indexedDBCache.containsKey(n)}catch(r){this.handleDatabaseAccessError(r,a)}return o}clearInMemory(n){this.logger.verbose("03r21p",n),this.inMemoryCache.clear(),this.logger.verbose("0uksk1",n)}async clearPersistent(n){try{this.logger.verbose("0rdqut",n);const a=await this.indexedDBCache.deleteDatabase();return a&&this.logger.verbose("149ouc",n),a}catch(a){return this.handleDatabaseAccessError(a,n),!1}}}class Qi{constructor(n,a,o){this.logger=n,Xw(o??!1),this.cache=new Q_(this.logger),this.performanceClient=a}createNewGuid(){return Es()}base64Encode(n){return rl(n)}base64Decode(n){return On(n)}base64UrlEncode(n){return Gc(n)}encodeKid(n){return this.base64UrlEncode(JSON.stringify({kid:n}))}async getPublicKeyThumbprint(n){const a=this.performanceClient?.startMeasurement(y_,n.correlationId),o=await $w(Qi.EXTRACTABLE,Qi.POP_KEY_USAGES),r=await $h(o.publicKey),d={e:r.e,kty:r.kty,n:r.n},h=Jv(d),f=await this.hashString(h),v=await $h(o.privateKey),p=await Ww(v,!1,["sign"]);return await this.cache.setItem(f,{privateKey:p,publicKey:o.publicKey,requestMethod:n.resourceRequestMethod,requestUri:n.resourceRequestUri},n.correlationId),a&&a.end({success:!0}),f}async removeTokenBindingKey(n,a){if(await this.cache.removeItem(n,a),await this.cache.containsKey(n,a))throw q(wb)}async clearKeystore(n){this.cache.clearInMemory(n);try{return await this.cache.clearPersistent(n),!0}catch(a){return a instanceof Error?this.logger.error("1owpn8",n):this.logger.error("0yrmwo",n),!1}}async signJwt(n,a,o,r){const d=this.performanceClient?.startMeasurement(v_,r),h=await this.cache.getItem(a,r||"");if(!h)throw ne(mS);const f=await $h(h.publicKey),v=Jv(f),p=Gc(JSON.stringify({kid:a})),S=tg.getShrHeaderString({...o?.header,alg:f.alg,kid:p}),T=Gc(S);n.cnf={jwk:JSON.parse(v)};const k=Gc(JSON.stringify(n)),M=`${T}.${k}`,J=new TextEncoder().encode(M),ve=await e_(h.privateKey,J),W=xa(new Uint8Array(ve)),de=`${M}.${W}`;return d&&d.end({success:!0}),de}async hashString(n){return a_(n)}}Qi.POP_KEY_USAGES=["sign","verify"];Qi.EXTRACTABLE=!0;function Jv(l){return JSON.stringify(l,Object.keys(l).sort())}const q_="acquireTokenSilent",J_="acquireTokenByCode",X_="acquireTokenPopup",Z_="acquireTokenPreRedirect",ef="acquireTokenRedirect",$_="ssoSilent",W_="initializeClientApplication",ek="localStorageUpdated";const Pt="msal",pg="browser",Xv="|",Ft=2,qc=2,tk=`${Pt}.${pg}.log.level`,nk=`${Pt}.${pg}.log.pii`,ik=`${Pt}.${pg}.platform.auth.dom`,Zv=`${Pt}.version`,$v="account.keys",Wv="token.keys";function Io(l=qc){return l<1?`${Pt}.${$v}`:`${Pt}.${l}.${$v}`}function Ro(l,n=Ft){return n<1?`${Pt}.${Wv}.${l}`:`${Pt}.${n}.${Wv}.${l}`}const ak=1440*60*1e3,Cf={Lax:"Lax",None:"None"};class RS{initialize(){return Promise.resolve()}getItem(n){const a=`${encodeURIComponent(n)}`,o=document.cookie.split(";");for(let r=0;r<o.length;r++){const d=o[r],[h,...f]=decodeURIComponent(d).trim().split("="),v=f.join("=");if(h===a)return v}return""}getUserData(){throw q(Oe)}setItem(n,a,o,r=!0,d=Cf.Lax){let h=`${encodeURIComponent(n)}=${encodeURIComponent(a)};path=/;SameSite=${d};`;if(o){const f=sk(o);h+=`expires=${f};`}(r||d===Cf.None)&&(h+="Secure;"),document.cookie=h}async setUserData(){return Promise.reject(q(Oe))}removeItem(n){this.setItem(n,"",-1)}getKeys(){const n=document.cookie.split(";"),a=[];return n.forEach(o=>{const r=decodeURIComponent(o).trim().split("=");a.push(r[0])}),a}containsKey(n){return this.getKeys().includes(n)}decryptData(){return Promise.resolve(null)}}function sk(l){const n=new Date;return new Date(n.getTime()+l*ak).toUTCString()}function _a(l,n){const a=l.getItem(Io(n));return a?JSON.parse(a):[]}function qn(l,n,a){const o=n.getItem(Ro(l,a));if(o){const r=JSON.parse(o);if(r&&r.hasOwnProperty("idToken")&&r.hasOwnProperty("accessToken")&&r.hasOwnProperty("refreshToken"))return r}return{idToken:[],accessToken:[],refreshToken:[]}}function Jc(l){return l.hasOwnProperty("id")&&l.hasOwnProperty("nonce")&&l.hasOwnProperty("data")}const eC="msal.cache.encryption",ok="msal.broadcast.cache";class rk{constructor(n,a,o){if(!window.localStorage)throw dg(AS);this.memoryStorage=new bu,this.initialized=!1,this.clientId=n,this.logger=a,this.performanceClient=o,this.broadcast=new BroadcastChannel(ok)}async initialize(n){const a=new RS,o=a.getItem(eC);let r={key:"",id:""};if(o)try{r=JSON.parse(o)}catch{}if(r.key&&r.id){const d=Zn(Na,P_,this.logger,this.performanceClient,n)(r.key);this.encryptionCookie={id:r.id,key:await P(Pv,Qv,this.logger,this.performanceClient,n)(d)}}else{const d=Es(),h=await P(TS,K_,this.logger,this.performanceClient,n)(),f=Zn(xa,G_,this.logger,this.performanceClient,n)(new Uint8Array(h));this.encryptionCookie={id:d,key:await P(Pv,Qv,this.logger,this.performanceClient,n)(h)};const v={id:d,key:f};a.setItem(eC,JSON.stringify(v),0,!0,Cf.None)}await P(this.importExistingCache.bind(this),j_,this.logger,this.performanceClient,n)(n),this.broadcast.addEventListener("message",d=>{this.updateCache(d,n)}),this.initialized=!0}getItem(n){return window.localStorage.getItem(n)}getUserData(n){if(!this.initialized)throw ne(Qc);return this.memoryStorage.getItem(n)}async decryptData(n,a,o){if(!this.initialized||!this.encryptionCookie)throw ne(Qc);if(a.id!==this.encryptionCookie.id)return this.performanceClient.incrementFields({encryptedCacheExpiredCount:1},o),null;const r=await P(Gv,qv,this.logger,this.performanceClient,o)(this.encryptionCookie.key,a.nonce,this.getContext(n),a.data);if(!r)return null;try{return{...JSON.parse(r),lastUpdatedAt:a.lastUpdatedAt}}catch{return this.performanceClient.incrementFields({encryptedCacheCorruptionCount:1},o),null}}setItem(n,a){window.localStorage.setItem(n,a)}async setUserData(n,a,o,r,d){if(!this.initialized||!this.encryptionCookie)throw ne(Qc);if(d)this.setItem(n,a);else{const{data:h,nonce:f}=await P(i_,V_,this.logger,this.performanceClient,o)(this.encryptionCookie.key,a,this.getContext(n)),v={id:this.encryptionCookie.id,nonce:f,data:h,lastUpdatedAt:r};this.setItem(n,JSON.stringify(v))}this.memoryStorage.setItem(n,a),this.broadcast.postMessage({key:n,value:a,context:this.getContext(n)})}removeItem(n){this.memoryStorage.containsKey(n)&&(this.memoryStorage.removeItem(n),this.broadcast.postMessage({key:n,value:null,context:this.getContext(n)})),window.localStorage.removeItem(n)}getKeys(){return Object.keys(window.localStorage)}containsKey(n){return window.localStorage.hasOwnProperty(n)}clear(){this.memoryStorage.clear(),_a(this).forEach(o=>this.removeItem(o));const a=qn(this.clientId,this);a.idToken.forEach(o=>this.removeItem(o)),a.accessToken.forEach(o=>this.removeItem(o)),a.refreshToken.forEach(o=>this.removeItem(o)),this.getKeys().forEach(o=>{(o.startsWith(Pt)||o.indexOf(this.clientId)!==-1)&&this.removeItem(o)})}async importExistingCache(n){if(!this.encryptionCookie)return;let a=_a(this);a=await this.importArray(a,n),a.length?this.setItem(Io(),JSON.stringify(a)):this.removeItem(Io());const o=qn(this.clientId,this);o.idToken=await this.importArray(o.idToken,n),o.accessToken=await this.importArray(o.accessToken,n),o.refreshToken=await this.importArray(o.refreshToken,n),o.idToken.length||o.accessToken.length||o.refreshToken.length?this.setItem(Ro(this.clientId),JSON.stringify(o)):this.removeItem(Ro(this.clientId))}async getItemFromEncryptedCache(n,a){if(!this.encryptionCookie)return null;const o=this.getItem(n);if(!o)return null;let r;try{r=JSON.parse(o)}catch{return null}return Jc(r)?r.id!==this.encryptionCookie.id?(this.performanceClient.incrementFields({encryptedCacheExpiredCount:1},a),null):(this.performanceClient.incrementFields({encryptedCacheCount:1},a),P(Gv,qv,this.logger,this.performanceClient,a)(this.encryptionCookie.key,r.nonce,this.getContext(n),r.data)):(this.performanceClient.incrementFields({unencryptedCacheCount:1},a),o)}async importArray(n,a){const o=[],r=[];return n.forEach(d=>{const h=this.getItemFromEncryptedCache(d,a).then(f=>{f?(this.memoryStorage.setItem(d,f),o.push(d)):this.removeItem(d)});r.push(h)}),await Promise.all(r),o}getContext(n){let a="";return n.includes(this.clientId)&&(a=this.clientId),a}updateCache(n,a){this.logger.trace("17cxcm",a);const o=this.performanceClient.startMeasurement(ek);o.add({isBackground:!0});const{key:r,value:d,context:h}=n.data;if(!r){this.logger.error("0e10qr",a),o.end({success:!1,errorCode:"noKey"});return}if(h&&h!==this.clientId){this.logger.trace("04rtdy",a),o.end({success:!1,errorCode:"contextMismatch"});return}d?(this.memoryStorage.setItem(r,d),this.logger.verbose("1vzsgt",a)):(this.memoryStorage.removeItem(r),this.logger.verbose("04ypih",a)),o.end({success:!0})}}class lk{constructor(){if(!window.sessionStorage)throw dg(AS)}async initialize(){}getItem(n){return window.sessionStorage.getItem(n)}getUserData(n){return this.getItem(n)}setItem(n,a){window.sessionStorage.setItem(n,a)}async setUserData(n,a){this.setItem(n,a)}removeItem(n){window.sessionStorage.removeItem(n)}getKeys(){return Object.keys(window.sessionStorage)}containsKey(n){return window.sessionStorage.hasOwnProperty(n)}decryptData(){return Promise.resolve(null)}}const Se={INITIALIZE_START:"msal:initializeStart",INITIALIZE_END:"msal:initializeEnd",ACTIVE_ACCOUNT_CHANGED:"msal:activeAccountChanged",LOGIN_SUCCESS:"msal:loginSuccess",ACQUIRE_TOKEN_START:"msal:acquireTokenStart",BROKERED_REQUEST_START:"msal:brokeredRequestStart",ACQUIRE_TOKEN_SUCCESS:"msal:acquireTokenSuccess",BROKERED_REQUEST_SUCCESS:"msal:brokeredRequestSuccess",ACQUIRE_TOKEN_FAILURE:"msal:acquireTokenFailure",BROKERED_REQUEST_FAILURE:"msal:brokeredRequestFailure",ACQUIRE_TOKEN_NETWORK_START:"msal:acquireTokenFromNetworkStart",HANDLE_REDIRECT_START:"msal:handleRedirectStart",HANDLE_REDIRECT_END:"msal:handleRedirectEnd",POPUP_OPENED:"msal:popupOpened",LOGOUT_START:"msal:logoutStart",LOGOUT_SUCCESS:"msal:logoutSuccess",LOGOUT_FAILURE:"msal:logoutFailure",LOGOUT_END:"msal:logoutEnd",RESTORE_FROM_BFCACHE:"msal:restoreFromBFCache",BROKER_CONNECTION_ESTABLISHED:"msal:brokerConnectionEstablished"};const ck="@azure/msal-browser",bs="5.3.0";function Aa(l,n){const a=l.indexOf(n);a>-1&&l.splice(a,1)}class Sf extends hf{constructor(n,a,o,r,d,h,f){super(n,o,r,d,f),this.cacheConfig=a,this.logger=r,this.internalStorage=new bu,this.browserStorage=tC(n,a.cacheLocation,r,d),this.temporaryCacheStorage=tC(n,Gn.SessionStorage,r,d),this.cookieStorage=new RS,this.eventHandler=h}async initialize(n){this.performanceClient.addFields({cacheLocation:this.cacheConfig.cacheLocation,cacheRetentionDays:this.cacheConfig.cacheRetentionDays},n),await this.browserStorage.initialize(n),await this.migrateExistingCache(n),this.trackVersionChanges(n)}async migrateExistingCache(n){let a=_a(this.browserStorage),o=qn(this.clientId,this.browserStorage);this.performanceClient.addFields({preMigrateAcntCount:a.length,preMigrateATCount:o.accessToken.length,preMigrateITCount:o.idToken.length,preMigrateRTCount:o.refreshToken.length},n);for(let d=0;d<qc;d++){const h=d;await this.removeStaleAccounts(d,h,n)}for(let d=0;d<Ft;d++){const h=d;await this.migrateIdTokens(d,h,n)}const r=this.getKMSIValues();for(let d=0;d<Ft;d++)await this.migrateAccessTokens(d,r,n),await this.migrateRefreshTokens(d,r,n);a=_a(this.browserStorage),o=qn(this.clientId,this.browserStorage),this.performanceClient.addFields({postMigrateAcntCount:a.length,postMigrateATCount:o.accessToken.length,postMigrateITCount:o.idToken.length,postMigrateRTCount:o.refreshToken.length},n)}async updateOldEntry(n,a){const o=this.browserStorage.getItem(n),r=this.validateAndParseJson(o||"");if(!r)return this.browserStorage.removeItem(n),null;if(!r.lastUpdatedAt)r.lastUpdatedAt=Date.now().toString(),this.setItem(n,JSON.stringify(r),a);else if(_v(r.lastUpdatedAt,this.cacheConfig.cacheRetentionDays))return this.browserStorage.removeItem(n),this.performanceClient.incrementFields({expiredCacheRemovedCount:1},a),null;const d=Jc(r)?await this.browserStorage.decryptData(n,r,a):r;return!d||!pu(d)?(this.performanceClient.incrementFields({invalidCacheCount:1},a),null):(Iv(d)||Rv(d))&&d.expiresOn&&ou(d.expiresOn,vC)?(this.browserStorage.removeItem(n),this.performanceClient.incrementFields({expiredCacheRemovedCount:1},a),null):d}async removeStaleAccounts(n,a,o){const r=_a(this.browserStorage,n);if(r.length!==0){for(const d of[...r]){this.performanceClient.incrementFields({oldAcntCount:1},o);const h=this.browserStorage.getItem(d),f=this.validateAndParseJson(h||"");if(!f){Aa(r,d);continue}if(f.lastUpdatedAt)_v(f.lastUpdatedAt,this.cacheConfig.cacheRetentionDays)&&(await this.removeAccountOldSchema(d,f,a,o),Aa(r,d));else{f.lastUpdatedAt=Date.now().toString(),this.setItem(d,JSON.stringify(f),o);continue}}this.setAccountKeys(r,o,n)}}async removeAccountOldSchema(n,a,o,r){const h=(Jc(a)?await this.browserStorage.decryptData(n,a,r):a)?.homeAccountId;if(h){const f=this.getTokenKeys(o);[...f.idToken].filter(v=>v.includes(h)).forEach(v=>{this.browserStorage.removeItem(v),Aa(f.idToken,v)}),[...f.accessToken].filter(v=>v.includes(h)).forEach(v=>{this.browserStorage.removeItem(v),Aa(f.accessToken,v)}),[...f.refreshToken].filter(v=>v.includes(h)).forEach(v=>{this.browserStorage.removeItem(v),Aa(f.refreshToken,v)}),this.setTokenKeys(f,r,o)}this.performanceClient.incrementFields({expiredAcntRemovedCount:1},r),this.browserStorage.removeItem(n)}getKMSIValues(){const n={},a=this.getTokenKeys().idToken;for(const o of a){const r=this.browserStorage.getUserData(o);if(r){const d=JSON.parse(r),h=Fi(d.secret,On);h&&(n[d.homeAccountId]=ys(h))}}return n}async migrateIdTokens(n,a,o){const r=qn(this.clientId,this.browserStorage,n);if(r.idToken.length===0)return;const d=qn(this.clientId,this.browserStorage,Ft),h=_a(this.browserStorage),f=_a(this.browserStorage,a);for(const v of[...r.idToken]){this.performanceClient.incrementFields({oldITCount:1},o);const p=await this.updateOldEntry(v,o);if(!p){Aa(r.idToken,v);continue}const S=h.find(de=>de.includes(p.homeAccountId)),T=f.find(de=>de.includes(p.homeAccountId));let k=null;if(S)k=this.getAccount(S,o);else if(T){const de=this.browserStorage.getItem(T),ae=this.validateAndParseJson(de||"");k=ae&&Jc(ae)?await this.browserStorage.decryptData(T,ae,o):ae}if(!k){this.performanceClient.incrementFields({skipITMigrateCount:1},o);continue}const M=Fi(p.secret,On),F=this.generateCredentialKey(p),J=this.getIdTokenCredential(F,o),ve=Object.keys(M).includes("signin_state"),W=J&&Object.keys(Fi(J.secret,On)||{}).includes("signin_state");if(!J||p.lastUpdatedAt>J.lastUpdatedAt&&(ve||!W)){const de=k.tenantProfiles||[],ae=Yf(M)||k.realm;if(ae&&!de.find(ee=>ee.tenantId===ae)){const ee=Uo(k.homeAccountId,k.localAccountId,ae,M);de.push(ee)}k.tenantProfiles=de;const Ie=this.generateAccountKey(Ss(k)),se=ys(M);await this.setUserData(Ie,JSON.stringify(k),o,k.lastUpdatedAt,se),h.includes(Ie)||h.push(Ie),await this.setUserData(F,JSON.stringify(p),o,p.lastUpdatedAt,se),this.performanceClient.incrementFields({migratedITCount:1},o),d.idToken.push(F)}}this.setTokenKeys(r,o,n),this.setTokenKeys(d,o),this.setAccountKeys(h,o)}async migrateAccessTokens(n,a,o){const r=qn(this.clientId,this.browserStorage,n);if(r.accessToken.length===0)return;const d=qn(this.clientId,this.browserStorage,Ft);for(const h of[...r.accessToken]){this.performanceClient.incrementFields({oldATCount:1},o);const f=await this.updateOldEntry(h,o);if(!f){Aa(r.accessToken,h);continue}if(!(f.homeAccountId in a)){this.performanceClient.incrementFields({skipATMigrateCount:1},o);continue}const v=this.generateCredentialKey(f),p=a[f.homeAccountId];if(!d.accessToken.includes(v))await this.setUserData(v,JSON.stringify(f),o,f.lastUpdatedAt,p),this.performanceClient.incrementFields({migratedATCount:1},o),d.accessToken.push(v);else{const S=this.getAccessTokenCredential(v,o);(!S||f.lastUpdatedAt>S.lastUpdatedAt)&&(await this.setUserData(v,JSON.stringify(f),o,f.lastUpdatedAt,p),this.performanceClient.incrementFields({migratedATCount:1},o))}}this.setTokenKeys(r,o,n),this.setTokenKeys(d,o)}async migrateRefreshTokens(n,a,o){const r=qn(this.clientId,this.browserStorage,n);if(r.refreshToken.length===0)return;const d=qn(this.clientId,this.browserStorage,Ft);for(const h of[...r.refreshToken]){this.performanceClient.incrementFields({oldRTCount:1},o);const f=await this.updateOldEntry(h,o);if(!f){Aa(r.refreshToken,h);continue}if(!(f.homeAccountId in a)){this.performanceClient.incrementFields({skipRTMigrateCount:1},o);continue}const v=this.generateCredentialKey(f),p=a[f.homeAccountId];if(!d.refreshToken.includes(v))await this.setUserData(v,JSON.stringify(f),o,f.lastUpdatedAt,p),this.performanceClient.incrementFields({migratedRTCount:1},o),d.refreshToken.push(v);else{const S=this.getRefreshTokenCredential(v,o);(!S||f.lastUpdatedAt>S.lastUpdatedAt)&&(await this.setUserData(v,JSON.stringify(f),o,f.lastUpdatedAt,p),this.performanceClient.incrementFields({migratedRTCount:1},o))}}this.setTokenKeys(r,o,n),this.setTokenKeys(d,o)}trackVersionChanges(n){const a=this.browserStorage.getItem(Zv);a&&(this.logger.info("1wuc87",n),this.performanceClient.addFields({previousLibraryVersion:a},n)),a!==bs&&this.setItem(Zv,bs,n)}validateAndParseJson(n){if(!n)return null;try{const a=JSON.parse(n);return a&&typeof a=="object"?a:null}catch{return null}}setItem(n,a,o){const r=new Array(Ft+1).fill(0),d=[],h=20;for(let f=0;f<=h;f++)try{if(this.browserStorage.setItem(n,a),f>0)for(let v=0;v<=Ft;v++){const p=r.slice(0,v).reduce((T,k)=>T+k,0);if(p>=f)break;const S=f>p+r[v]?p+r[v]:f;f>p&&r[v]>0&&this.removeAccessTokenKeys(d.slice(p,S),o,v)}break}catch(v){const p=df(v);if(p.errorCode===uf&&f<h){if(!d.length)for(let S=0;S<=Ft;S++)if(n===Ro(this.clientId,S)){const T=JSON.parse(a).accessToken;d.push(...T),r[S]=T.length}else{const T=this.getTokenKeys(S).accessToken;d.push(...T),r[S]=T.length}if(d.length<=f)throw p;this.removeAccessToken(d[f],o,!1)}else throw p}}async setUserData(n,a,o,r,d){const h=new Array(Ft+1).fill(0),f=[],v=20;for(let p=0;p<=v;p++)try{if(await P(this.browserStorage.setUserData.bind(this.browserStorage),H0,this.logger,this.performanceClient,o)(n,a,o,r,d),p>0)for(let S=0;S<=Ft;S++){const T=h.slice(0,S).reduce((M,F)=>M+F,0);if(T>=p)break;const k=p>T+h[S]?T+h[S]:p;p>T&&h[S]>0&&this.removeAccessTokenKeys(f.slice(T,k),o,S)}break}catch(S){const T=df(S);if(T.errorCode===uf&&p<v){if(!f.length)for(let k=0;k<=Ft;k++){const M=this.getTokenKeys(k).accessToken;f.push(...M),h[k]=M.length}if(f.length<=p)throw T;this.removeAccessToken(f[p],o,!1)}else throw T}}getAccount(n,a){this.logger.trace("1lfvm6",a);const o=this.browserStorage.getUserData(n);if(!o)return this.removeAccountKeyFromMap(n,a),null;const r=this.validateAndParseJson(o);if(!r||!e0(r))return null;const d=hf.toObject({},r);return this.performanceClient.addFields({accountCachedBy:hw(d.cachedByApiId)},a),d}async setAccount(n,a,o,r){this.logger.trace("1bz3wr",a);const d=this.generateAccountKey(Ss(n)),h=Date.now().toString();n.lastUpdatedAt=h,n.cachedByApiId=r,await this.setUserData(d,JSON.stringify(n),a,h,o),this.addAccountKeyToMap(d,a),this.performanceClient.addFields({kmsi:o},a)}setAccountKeys(n,a,o=qc){n.length===0?this.removeItem(Io(o)):this.setItem(Io(o),JSON.stringify(n),a)}getAccountKeys(){return _a(this.browserStorage)}addAccountKeyToMap(n,a){this.logger.trace("0rb85k",a),this.logger.tracePii("1l9bdo",a);const o=this.getAccountKeys();return o.indexOf(n)===-1?(o.push(n),this.setItem(Io(),JSON.stringify(o),a),this.logger.verbose("0xia39",a),!0):(this.logger.verbose("0161kk",a),!1)}removeAccountKeyFromMap(n,a){this.logger.trace("1jpigu",a),this.logger.tracePii("1xzspl",a);const o=this.getAccountKeys(),r=o.indexOf(n);r>-1?(o.splice(r,1),this.setAccountKeys(o,a)):this.logger.trace("1dytu2",a)}removeAccount(n,a){const o=this.getActiveAccount(a);o?.homeAccountId===n.homeAccountId&&o?.environment===n.environment&&this.setActiveAccount(null,a),super.removeAccount(n,a),this.removeAccountKeyFromMap(this.generateAccountKey(n),a),this.browserStorage.getKeys().forEach(r=>{r.includes(n.homeAccountId)&&r.includes(n.environment)&&this.browserStorage.removeItem(r)})}removeIdToken(n,a){super.removeIdToken(n,a);const o=this.getTokenKeys(),r=o.idToken.indexOf(n);r>-1&&(this.logger.info("05udv9",a),o.idToken.splice(r,1),this.setTokenKeys(o,a))}removeAccessToken(n,a,o=!0){super.removeAccessToken(n,a),o&&this.removeAccessTokenKeys([n],a)}removeAccessTokenKeys(n,a,o=Ft){this.logger.trace("17o18n",a);const r=this.getTokenKeys(o);let d=0;if(n.forEach(h=>{const f=r.accessToken.indexOf(h);f>-1&&(r.accessToken.splice(f,1),d++)}),d>0){this.logger.info("15i5d5",a),this.setTokenKeys(r,a,o);return}}removeRefreshToken(n,a){super.removeRefreshToken(n,a);const o=this.getTokenKeys(),r=o.refreshToken.indexOf(n);r>-1&&(this.logger.info("1f4fq3",a),o.refreshToken.splice(r,1),this.setTokenKeys(o,a))}getTokenKeys(n=Ft){return qn(this.clientId,this.browserStorage,n)}setTokenKeys(n,a,o=Ft){if(n.idToken.length===0&&n.accessToken.length===0&&n.refreshToken.length===0){this.removeItem(Ro(this.clientId,o));return}else this.setItem(Ro(this.clientId,o),JSON.stringify(n),a)}getIdTokenCredential(n,a){const o=this.browserStorage.getUserData(n);if(!o)return this.logger.trace("1jukz6",a),this.removeIdToken(n,a),null;const r=this.validateAndParseJson(o);return!r||!K0(r)?(this.logger.trace("1jukz6",a),null):(this.logger.trace("01ju66",a),r)}async setIdTokenCredential(n,a,o){this.logger.trace("13hjll",a);const r=this.generateCredentialKey(n),d=Date.now().toString();n.lastUpdatedAt=d,await this.setUserData(r,JSON.stringify(n),a,d,o);const h=this.getTokenKeys();h.idToken.indexOf(r)===-1&&(this.logger.info("07jy92",a),h.idToken.push(r),this.setTokenKeys(h,a))}getAccessTokenCredential(n,a){const o=this.browserStorage.getUserData(n);if(!o)return this.logger.trace("0bqvx8",a),this.removeAccessTokenKeys([n],a),null;const r=this.validateAndParseJson(o);return!r||!Iv(r)?(this.logger.trace("0bqvx8",a),null):(this.logger.trace("1o81rl",a),r)}async setAccessTokenCredential(n,a,o){this.logger.trace("1pondb",a);const r=this.generateCredentialKey(n),d=Date.now().toString();n.lastUpdatedAt=d,await this.setUserData(r,JSON.stringify(n),a,d,o);const h=this.getTokenKeys(),f=h.accessToken.indexOf(r);f!==-1&&h.accessToken.splice(f,1),this.logger.trace("1onhey",a),h.accessToken.push(r),this.setTokenKeys(h,a)}getRefreshTokenCredential(n,a){const o=this.browserStorage.getUserData(n);if(!o)return this.logger.trace("0jlizt",a),this.removeRefreshToken(n,a),null;const r=this.validateAndParseJson(o);return!r||!Rv(r)?(this.logger.trace("0jlizt",a),null):(this.logger.trace("0nokxi",a),r)}async setRefreshTokenCredential(n,a,o){this.logger.trace("0tcg8d",a);const r=this.generateCredentialKey(n),d=Date.now().toString();n.lastUpdatedAt=d,await this.setUserData(r,JSON.stringify(n),a,d,o);const h=this.getTokenKeys();h.refreshToken.indexOf(r)===-1&&(this.logger.info("0eckjs",a),h.refreshToken.push(r),this.setTokenKeys(h,a))}getAppMetadata(n,a){const o=this.browserStorage.getItem(n);if(!o)return this.logger.trace("1q101h",a),null;const r=this.validateAndParseJson(o);return!r||!F0(n,r)?(this.logger.trace("1q101h",a),null):(this.logger.trace("19pvg2",a),r)}setAppMetadata(n,a){this.logger.trace("0cyma6",a);const o=V0(n);this.setItem(o,JSON.stringify(n),a)}getServerTelemetry(n,a){const o=this.browserStorage.getItem(n);if(!o)return this.logger.trace("0jk19c",a),null;const r=this.validateAndParseJson(o);return!r||!P0(n,r)?(this.logger.trace("0jk19c",a),null):(this.logger.trace("12jguk",a),r)}setServerTelemetry(n,a,o){this.logger.trace("1poh61",o),this.setItem(n,JSON.stringify(a),o)}getAuthorityMetadata(n,a){const o=this.internalStorage.getItem(n);if(!o)return this.logger.trace("1r39oe",a),null;const r=this.validateAndParseJson(o);return r&&Y0(n,r)?(this.logger.trace("1ohvk3",a),r):null}getAuthorityMetadataKeys(){return this.internalStorage.getKeys().filter(a=>this.isAuthorityMetadata(a))}setWrapperMetadata(n,a){this.internalStorage.setItem(Pc.WRAPPER_SKU,n),this.internalStorage.setItem(Pc.WRAPPER_VER,a)}getWrapperMetadata(){const n=this.internalStorage.getItem(Pc.WRAPPER_SKU)||"",a=this.internalStorage.getItem(Pc.WRAPPER_VER)||"";return[n,a]}setAuthorityMetadata(n,a,o){this.logger.trace("07w8n2",o),this.internalStorage.setItem(n,JSON.stringify(a))}getActiveAccount(n){const a=this.generateCacheKey(dv.ACTIVE_ACCOUNT_FILTERS),o=this.browserStorage.getItem(a);if(!o)return this.logger.trace("08gw0e",n),null;const r=this.validateAndParseJson(o);return r?(this.logger.trace("1t3ch7",n),this.getAccountInfoFilteredBy({homeAccountId:r.homeAccountId,localAccountId:r.localAccountId,tenantId:r.tenantId},n)):(this.logger.trace("0me1up",n),null)}setActiveAccount(n,a){const o=this.generateCacheKey(dv.ACTIVE_ACCOUNT_FILTERS);if(n){this.logger.verbose("0rsj80",a);const r={homeAccountId:n.homeAccountId,localAccountId:n.localAccountId,tenantId:n.tenantId};this.setItem(o,JSON.stringify(r),a)}else this.logger.verbose("1bp5z5",a),this.browserStorage.removeItem(o);this.eventHandler.emitEvent(Se.ACTIVE_ACCOUNT_CHANGED,a)}getThrottlingCache(n,a){const o=this.browserStorage.getItem(n);if(!o)return this.logger.trace("1h4wa6",a),null;const r=this.validateAndParseJson(o);return!r||!G0(n,r)?(this.logger.trace("1h4wa6",a),null):(this.logger.trace("0of6n8",a),r)}setThrottlingCache(n,a,o){this.logger.trace("0wfgh6",o),this.setItem(n,JSON.stringify(a),o)}getTemporaryCache(n,a,o){const r=o?this.generateCacheKey(n):n,d=this.temporaryCacheStorage.getItem(r);if(!d){if(this.cacheConfig.cacheLocation===Gn.LocalStorage){const h=this.browserStorage.getItem(r);if(h)return this.logger.trace("1yt61y",a),h}return this.logger.trace("1qhy81",a),null}return d}setTemporaryCache(n,a,o){const r=o?this.generateCacheKey(n):n;this.temporaryCacheStorage.setItem(r,a)}removeItem(n){this.browserStorage.removeItem(n)}removeTemporaryItem(n){this.temporaryCacheStorage.removeItem(n)}getKeys(){return this.browserStorage.getKeys()}clear(n){this.removeAllAccounts(n),this.removeAppMetadata(n),this.temporaryCacheStorage.getKeys().forEach(a=>{(a.indexOf(Pt)!==-1||a.indexOf(this.clientId)!==-1)&&this.removeTemporaryItem(a)}),this.browserStorage.getKeys().forEach(a=>{(a.indexOf(Pt)!==-1||a.indexOf(this.clientId)!==-1)&&this.browserStorage.removeItem(a)}),this.internalStorage.clear()}generateCacheKey(n){return Pn.startsWith(n,Pt)?n:`${Pt}.${this.clientId}.${n}`}generateCredentialKey(n){const a=n.credentialType===Kt.REFRESH_TOKEN&&n.familyId||n.clientId,o=n.tokenType&&n.tokenType.toLowerCase()!==Je.BEARER.toLowerCase()?n.tokenType.toLowerCase():"";return[`${Pt}.${Ft}`,n.homeAccountId,n.environment,n.credentialType,a,n.realm||"",n.target||"",o].join(Xv).toLowerCase()}generateAccountKey(n){const a=n.homeAccountId.split(".")[1];return[`${Pt}.${qc}`,n.homeAccountId,n.environment,a||n.tenantId||""].join(Xv).toLowerCase()}resetRequestCache(n){this.logger.trace("0h0ynu",n),this.removeTemporaryItem(this.generateCacheKey(At.REQUEST_PARAMS)),this.removeTemporaryItem(this.generateCacheKey(At.VERIFIER)),this.removeTemporaryItem(this.generateCacheKey(At.ORIGIN_URI)),this.removeTemporaryItem(this.generateCacheKey(At.URL_HASH)),this.removeTemporaryItem(this.generateCacheKey(At.NATIVE_REQUEST)),this.setInteractionInProgress(!1,void 0)}cacheAuthorizeRequest(n,a,o){this.logger.trace("1tzef5",a);const r=rl(JSON.stringify(n));if(this.setTemporaryCache(At.REQUEST_PARAMS,r,!0),o){const d=rl(o);this.setTemporaryCache(At.VERIFIER,d,!0)}}getCachedRequest(n){this.logger.trace("0uen20",n);const a=this.getTemporaryCache(At.REQUEST_PARAMS,n,!0);if(!a)throw ne(Iw);const o=this.getTemporaryCache(At.VERIFIER,n,!0);let r,d="";try{r=JSON.parse(On(a)),o&&(d=On(o))}catch{throw this.logger.errorPii("0ewsey",n),this.logger.error("0tvdic",n),ne(Rw)}return[r,d]}getCachedNativeRequest(){this.logger.trace("1yxcdm","");const n=this.getTemporaryCache(At.NATIVE_REQUEST,"",!0);if(!n)return this.logger.trace("0mnxd4",""),null;const a=this.validateAndParseJson(n);return a||(this.logger.error("0rrkip",""),null)}isInteractionInProgress(n){const a=this.getInteractionInProgress()?.clientId;return n?a===this.clientId:!!a}getInteractionInProgress(){const n=`${Pt}.${At.INTERACTION_STATUS_KEY}`,a=this.getTemporaryCache(n,"",!1);try{return a?JSON.parse(a):null}catch{return this.logger.error("0jjyys",""),this.removeTemporaryItem(n),this.resetRequestCache(""),bS(window),null}}setInteractionInProgress(n,a=ka.SIGNIN,o=!1,r=""){const d=`${Pt}.${At.INTERACTION_STATUS_KEY}`;if(n){if(this.getInteractionInProgress())if(o)this.logger.warning("1pmscr",r),c_(this.logger,r),this.removeTemporaryItem(d);else throw ne(Sw);this.setTemporaryCache(d,JSON.stringify({clientId:this.clientId,type:a}),!1)}else!n&&this.getInteractionInProgress()?.clientId===this.clientId&&this.removeTemporaryItem(d)}async hydrateCache(n,a){const o=Zf(n.account.homeAccountId,n.account.environment,n.idToken,this.clientId,n.tenantId),r=$f(n.account.homeAccountId,n.account.environment,n.accessToken,this.clientId,n.tenantId,n.scopes.join(" "),n.expiresOn?wv(n.expiresOn):0,n.extExpiresOn?wv(n.extExpiresOn):0,On,void 0,n.tokenType,void 0,a.sshKid),d={idToken:o,accessToken:r};return this.saveCacheRecord(d,n.correlationId,ys(Fi(n.idToken,On)),Le.hydrateCache)}async saveCacheRecord(n,a,o,r,d){try{await super.saveCacheRecord(n,a,o,r,d)}catch(h){if(h instanceof _o&&this.performanceClient&&a)try{const f=this.getTokenKeys();this.performanceClient.addFields({cacheRtCount:f.refreshToken.length,cacheIdCount:f.idToken.length,cacheAtCount:f.accessToken.length},a)}catch{}throw h}}}function tC(l,n,a,o){try{switch(n){case Gn.LocalStorage:return new rk(l,a,o);case Gn.SessionStorage:return new lk;case Gn.MemoryStorage:default:break}}catch(r){a.error(r,"")}return new bu}const uk=(l,n,a,o)=>{const r={cacheLocation:Gn.MemoryStorage,cacheRetentionDays:5};return new Sf(l,r,nu,n,a,o)};function dk(l,n,a,o,r){return l.verbose("1yd030",o),a?n.getAllAccounts(r,o):[]}function hk(l,n,a,o){if(n.trace("0u7b90",o),Object.keys(l).length===0)return n.warning("1kz0cu",o),null;const r=a.getAccountInfoFilteredBy(l,o);return r?(n.verbose("0btgll",o),r):(n.verbose("0ltaj5",o),null)}function fk(l,n,a){n.setActiveAccount(l,a)}function gk(l,n){return l.getActiveAccount(n)}const mk="msal.broadcast.event";class pk{constructor(n){this.eventCallbacks=new Map,this.logger=n||new yi({}),typeof BroadcastChannel<"u"&&(this.broadcastChannel=new BroadcastChannel(mk)),this.invokeCrossTabCallbacks=this.invokeCrossTabCallbacks.bind(this)}addEventCallback(n,a,o){if(typeof window<"u"){const r=o||vf();return this.eventCallbacks.has(r)?(this.logger.error("1578i0",""),null):(this.eventCallbacks.set(r,[n,a||[]]),this.logger.verbose("1cnec4",""),r)}return null}removeEventCallback(n){this.eventCallbacks.delete(n),this.logger.verbose("12zotd","")}emitEvent(n,a,o,r,d){const h={eventType:n,interactionType:o||null,payload:r||null,error:d||null,correlationId:a,timestamp:Date.now()};switch(n){case Se.LOGIN_SUCCESS:case Se.LOGOUT_SUCCESS:case Se.ACTIVE_ACCOUNT_CHANGED:this.broadcastChannel?.postMessage(h)}this.invokeCallbacks(h)}invokeCallbacks(n){this.eventCallbacks.forEach(([a,o],r)=>{(o.length===0||o.includes(n.eventType))&&(this.logger.verbose("15jpwk",""),a.apply(null,[n]))})}invokeCrossTabCallbacks(n){const a=n.data;this.invokeCallbacks(a)}subscribeCrossTab(){this.broadcastChannel?.addEventListener("message",this.invokeCrossTabCallbacks)}unsubscribeCrossTab(){this.broadcastChannel?.removeEventListener("message",this.invokeCrossTabCallbacks)}}class NS{constructor(n,a,o,r,d,h,f,v,p){this.config=n,this.browserStorage=a,this.browserCrypto=o,this.networkClient=this.config.system.networkClient,this.eventHandler=d,this.navigationClient=h,this.platformAuthProvider=p,this.correlationId=v,this.logger=r.clone(Bn.MSAL_SKU,bs),this.performanceClient=f}}function cu(l,n,a,o){a.verbose("0bd1la",o);const r=l||n||"";return Fe.getAbsoluteUrl(r,Ia())}function gn(l,n,a,o,r,d){r.verbose("1p12tq",a);const h={clientId:n,correlationId:a,apiId:l,forceRefresh:!1,wrapperSKU:o.getWrapperMetadata()[0],wrapperVer:o.getWrapperMetadata()[1]};return new ol(h,o)}async function Yi(l,n,a,o,r,d,h,f,v){const p=f&&f.hasOwnProperty("instance_aware")?f.instance_aware:void 0,S={protocolMode:l.system.protocolMode,OIDCOptions:l.auth.OIDCOptions,knownAuthorities:l.auth.knownAuthorities,cloudDiscoveryMetadata:l.auth.cloudDiscoveryMetadata,authorityMetadata:l.auth.authorityMetadata},T=d||l.auth.authority,k=p?.length?p==="true":l.auth.instanceAware,M=v&&k?l.auth.authority.replace(Fe.getDomainFromUrl(T),v.environment):T,F=un.generateAuthority(M,h||l.auth.azureCloudOptions),J=await P(sS,N_,r,a,n)(F,l.system.networkClient,o,S,r,n,a);if(v&&!J.isAlias(v.environment))throw nt(lb);return J}async function yg(l,n,a,o,r){if(r)try{l.removeAccount(r,o),a.verbose("0s4z6h",o)}catch{a.error("0mgg1d",o)}else try{a.verbose("0zj631",o),l.clear(o),await n.clearKeystore(o)}catch{a.error("12ih0c",o)}}async function vg(l,n,a,o,r){const d=l.authority||n.auth.authority,h=[...l&&l.scopes||[]],f={...l,correlationId:l.correlationId,authority:d,scopes:h};if(!f.authenticationScheme)f.authenticationScheme=Je.BEARER,o.verbose("1l4fwv",r);else{if(f.authenticationScheme===Je.SSH){if(!l.sshJwk)throw nt(Mf);if(!l.sshKid)throw nt(sb)}o.verbose("1ecmns",r)}return f}async function yk(l,n,a,o,r){const d=await P(vg,fg,r,o,l.correlationId)(l,a,o,r,l.correlationId);return{...l,...d,account:n,forceRefresh:l.forceRefresh||!1}}function MS(l,n){let a;const o=l.httpMethod;if(n===fn.EAR){if(o&&o!==wo.POST)throw nt(cb);a=wo.POST}else a=o||wo.GET;return a}class Ho extends NS{initializeLogoutRequest(n){this.logger.verbose("0546u4",this.correlationId);const a={correlationId:this.correlationId,...n};if(n)if(n.logoutHint)this.logger.verbose("12k4l4",this.correlationId);else if(n.account){const o=this.getLogoutHintFromIdTokenClaims(n.account);o&&(this.logger.verbose("0st5di",this.correlationId),a.logoutHint=o)}else this.logger.verbose("0pdtc3",this.correlationId);else this.logger.verbose("07ndze",this.correlationId);return!n||n.postLogoutRedirectUri!==null?n&&n.postLogoutRedirectUri?(this.logger.verbose("1vamm6",a.correlationId),a.postLogoutRedirectUri=Fe.getAbsoluteUrl(n.postLogoutRedirectUri,Ia())):this.config.auth.postLogoutRedirectUri===null?this.logger.verbose("15m5g7",a.correlationId):this.config.auth.postLogoutRedirectUri?(this.logger.verbose("1f4xlz",a.correlationId),a.postLogoutRedirectUri=Fe.getAbsoluteUrl(this.config.auth.postLogoutRedirectUri,Ia())):(this.logger.verbose("17s5rf",a.correlationId),a.postLogoutRedirectUri=Fe.getAbsoluteUrl(Ia(),Ia())):this.logger.verbose("0ljv63",a.correlationId),a}getLogoutHintFromIdTokenClaims(n){const a=n.idTokenClaims;if(a){if(a.login_hint)return a.login_hint;this.logger.verbose("0mvp54",this.correlationId)}else this.logger.verbose("1e7bdp",this.correlationId);return null}async createAuthCodeClient(n){const a=await P(this.getClientConfiguration.bind(this),Eu,this.logger,this.performanceClient,this.correlationId)(n);return new oS(a,this.performanceClient)}async getClientConfiguration(n){const{serverTelemetryManager:a,requestAuthority:o,requestAzureCloudOptions:r,requestExtraQueryParameters:d,account:h}=n,f=n.authority||await P(Yi,vs,this.logger,this.performanceClient,this.correlationId)(this.config,this.correlationId,this.performanceClient,this.browserStorage,this.logger,o,r,d,h),v=this.config.system.loggerOptions;return{authOptions:{clientId:this.config.auth.clientId,authority:f,clientCapabilities:this.config.auth.clientCapabilities,redirectUri:this.config.auth.redirectUri},systemOptions:{tokenRenewalOffsetSeconds:this.config.system.tokenRenewalOffsetSeconds,preventCorsPreflight:!0},loggerOptions:{loggerCallback:v.loggerCallback,piiLoggingEnabled:v.piiLoggingEnabled,logLevel:v.logLevel,correlationId:this.correlationId},cryptoInterface:this.browserCrypto,networkInterface:this.networkClient,storageInterface:this.browserStorage,serverTelemetryManager:a,libraryInfo:{sku:Bn.MSAL_SKU,version:bs,cpu:"",os:""},telemetry:this.config.telemetry}}}async function wu(l,n,a,o,r,d,h,f){const v=cu(l.redirectUri,a.auth.redirectUri,d,f),p={interactionType:n},S=p0(o,l&&l.state||"",p),k={...await P(vg,fg,d,h,f)({...l,correlationId:f},a,h,d,f),redirectUri:v,state:S,nonce:l.nonce||Es(),responseMode:a.auth.OIDCOptions.responseMode},M={...k,httpMethod:MS(k,a.system.protocolMode)};if(l.loginHint||l.sid)return M;const F=l.account||r.getActiveAccount(f);return F&&(d.verbose("1eqlb3",f),d.verbosePii("0tf99t",f),M.account=F),M}function vk(l,n){if(!n)return null;try{return dl(l.base64Decode,n).libraryState.meta}catch{throw q(al)}}function el(l,n,a,o){const r=tu(l);if(!r)throw KC(l)?(a.error("13pl0s",o),a.errorPii("1097vx",o),ne(vw)):(a.error("18h0l1",o),ne(yw));return r}function Ck(l,n,a){if(!l.state)throw ne(ig);const o=vk(n,l.state);if(!o)throw ne(fS);if(o.interactionType!==a)throw ne(Cw)}class xS{constructor(n,a,o,r,d){this.authModule=n,this.browserStorage=a,this.authCodeRequest=o,this.logger=r,this.performanceClient=d}async handleCodeResponse(n,a,o){let r;try{r=aw(n,a.state)}catch(d){throw d instanceof _s&&d.subError===pf?ne(pf):d}return P(this.handleCodeResponseFromServer.bind(this),$C,this.logger,this.performanceClient,a.correlationId)(r,a,o)}async handleCodeResponseFromServer(n,a,o,r=!0){if(this.logger.trace("0mf2hb",a.correlationId),this.authCodeRequest.code=n.code,r&&(n.nonce=a.nonce||void 0),n.state=a.state,n.client_info)this.authCodeRequest.clientInfo=n.client_info;else{const h=this.createCcsCredentials(a);h&&(this.authCodeRequest.ccsCredential=h)}return await P(this.authModule.acquireToken.bind(this.authModule),R_,this.logger,this.performanceClient,a.correlationId)(this.authCodeRequest,o,n)}createCcsCredentials(n){return n.account?{credential:n.account.homeAccountId,type:Xn.HOME_ACCOUNT_ID}:n.loginHint?{credential:n.loginHint,type:Xn.UPN}:null}}const Sk="ContentError",Tk="PageException",Ek="user_switch";const Ak="USER_INTERACTION_REQUIRED",bk="USER_CANCEL",wk="NO_NETWORK",_k="PERSISTENT_ERROR",kk="DISABLED",Ok="ACCOUNT_UNAVAILABLE",Ik="UX_NOT_ALLOWED";const Rk=-2147186943;class mi extends et{constructor(n,a,o){super(n,a||Su(n)),Object.setPrototypeOf(this,mi.prototype),this.name="NativeAuthError",this.ext=o}}function Ao(l){if(l.ext&&l.ext.status&&(l.ext.status===_k||l.ext.status===kk)||l.ext&&l.ext.error&&l.ext.error===Rk)return!0;switch(l.errorCode){case Sk:case Tk:return!0;default:return!1}}function uu(l,n,a){if(a&&a.status)switch(a.status){case Ok:return su(u0,Su(l));case Ak:return new $n(l,n);case bk:return ne(pf);case wk:return ne(yf);case Ik:return su(XC)}return new mi(l,n,a)}class DS extends Ho{async acquireToken(n){const a=gn(Le.acquireTokenSilent_silentFlow,this.config.auth.clientId,this.correlationId,this.browserStorage,this.logger),o=await P(this.getClientConfiguration.bind(this),Eu,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:a,requestAuthority:n.authority,requestAzureCloudOptions:n.azureCloudOptions,account:n.account}),r=new tw(o,this.performanceClient);this.logger.verbose("0wa871",this.correlationId);try{const h=(await P(r.acquireCachedToken.bind(r),k_,this.logger,this.performanceClient,n.correlationId)(n))[0];return this.performanceClient.addFields({fromCache:!0},n.correlationId),h}catch(d){throw d instanceof fl&&d.errorCode===mS&&this.logger.verbose("06wena",this.correlationId),d}}logout(n){this.logger.verbose("1rkurh",this.correlationId);const a=this.initializeLogoutRequest(n);return yg(this.browserStorage,this.browserCrypto,this.logger,this.correlationId,a.account)}}class Xc extends NS{constructor(n,a,o,r,d,h,f,v,p,S,T,k){super(n,a,o,r,d,h,v,k,p),this.apiId=f,this.accountId=S,this.platformAuthProvider=p,this.nativeStorageManager=T,this.silentCacheClient=new DS(n,this.nativeStorageManager,o,r,d,h,v,k,p);const M=this.platformAuthProvider.getExtensionName();this.skus=ol.makeExtraSkuString({libraryName:Bn.MSAL_SKU,libraryVersion:bs,extensionName:M,extensionVersion:this.platformAuthProvider.getExtensionVersion()})}addRequestSKUs(n){n.extraParameters={...n.extraParameters,[qA]:this.skus}}async acquireToken(n,a){this.logger.trace("03qeos",this.correlationId);const o=this.performanceClient.startMeasurement(OS,n.correlationId),r=Wn(),d=gn(this.apiId,this.config.auth.clientId,this.correlationId,this.browserStorage,this.logger);try{const h=await this.initializeNativeRequest(n);try{const v=await this.acquireTokensFromCache(this.accountId,h);return o.end({success:!0,isNativeBroker:!1,fromCache:!0}),v}catch(v){if(a===$t.AccessToken)throw this.logger.info("0eitbc",this.correlationId),v;this.logger.info("0957j1",this.correlationId)}const f=await this.platformAuthProvider.sendMessage(h);return await this.handleNativeResponse(f,h,r).then(v=>(o.end({success:!0,isNativeBroker:!0,requestId:v.requestId}),d.clearNativeBrokerErrorCode(),v)).catch(v=>{throw o.end({success:!1,errorCode:v.errorCode,subErrorCode:v.subError,isNativeBroker:!0}),v})}catch(h){throw h instanceof mi&&d.setNativeBrokerErrorCode(h.errorCode),h}}createSilentCacheRequest(n,a){return{authority:n.authority,correlationId:this.correlationId,scopes:Yt.fromString(n.scope).asArray(),account:a,forceRefresh:!1}}async acquireTokensFromCache(n,a){if(!n)throw this.logger.warning("1ndf3e",this.correlationId),q(yv);const o=this.browserStorage.getBaseAccountInfo({nativeAccountId:n},a.correlationId);if(!o)throw q(yv);try{const r=this.createSilentCacheRequest(a,o),d=await this.silentCacheClient.acquireToken(r),h={...o,idTokenClaims:d?.idTokenClaims,idToken:d?.idToken};return{...d,account:h}}catch(r){throw r}}async acquireTokenRedirect(n,a,o){this.logger.trace("0luikq",this.correlationId);const r=await this.initializeNativeRequest(n),d=o?.navigateToLoginRequestUrl??!0;try{await this.platformAuthProvider.sendMessage(r)}catch(v){if(v instanceof mi&&(gn(this.apiId,this.config.auth.clientId,this.correlationId,this.browserStorage,this.logger).setNativeBrokerErrorCode(v.errorCode),Ao(v)))throw v}this.browserStorage.setTemporaryCache(At.NATIVE_REQUEST,JSON.stringify(r),!0);const h={apiId:Le.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},f=d?window.location.href:cu(n.redirectUri,this.config.auth.redirectUri,this.logger,this.correlationId);a.end({success:!0}),await this.navigationClient.navigateExternal(f,h)}async handleRedirectPromise(n,a){if(this.logger.trace("1c5lhw",this.correlationId),!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("0le6uv",this.correlationId),null;const o=this.browserStorage.getCachedNativeRequest();if(!o)return this.logger.verbose("0a6zjb",this.correlationId),n&&a&&n?.addFields({errorCode:"no_cached_request"},a),null;const{prompt:r,...d}=o;r&&this.logger.verbose("0ac34v",this.correlationId),this.browserStorage.removeItem(this.browserStorage.generateCacheKey(At.NATIVE_REQUEST));const h=Wn();try{this.logger.verbose("003x5a",this.correlationId);const f=await this.platformAuthProvider.sendMessage(d),v=await this.handleNativeResponse(f,d,h);return gn(this.apiId,this.config.auth.clientId,this.correlationId,this.browserStorage,this.logger).clearNativeBrokerErrorCode(),v}catch(f){throw f}}logout(){return this.logger.trace("0u2sjm",this.correlationId),Promise.reject("Logout not implemented yet")}async handleNativeResponse(n,a,o){this.logger.trace("1bojln",this.correlationId);const r=Fi(n.id_token,On),d=this.createHomeAccountIdentifier(n,r),h=this.browserStorage.getAccountInfoFilteredBy({nativeAccountId:a.accountId},this.correlationId)?.homeAccountId;if(a.extraParameters?.child_client_id&&n.account.id!==a.accountId)this.logger.info("1ub1in",this.correlationId);else if(d!==h&&n.account.id!==a.accountId)throw uu(Ek);const f=await Yi(this.config,this.correlationId,this.performanceClient,this.browserStorage,this.logger,a.authority),v=WC(this.browserStorage,f,d,On,this.correlationId,r,n.client_info,void 0,r.tid,void 0,n.account.id);n.expires_in=Number(n.expires_in);const p=await this.generateAuthenticationResult(n,a,r,v,f.canonicalAuthority,o);return await this.cacheAccount(v,ys(r)),await this.cacheNativeTokens(n,a,d,r,n.access_token,p.tenantId,o),p}createHomeAccountIdentifier(n,a){return FC(n.client_info||"",Jn.Default,this.logger,this.browserCrypto,this.correlationId,a)}generateScopes(n,a){return a?Yt.fromString(a):Yt.fromString(n)}async generatePopAccessToken(n,a){if(a.tokenType===Je.POP&&a.signPopToken){if(n.shr)return this.logger.trace("0coqhu",this.correlationId),n.shr;const o=new Mo(this.browserCrypto,this.performanceClient),r={resourceRequestMethod:a.resourceRequestMethod,resourceRequestUri:a.resourceRequestUri,shrClaims:a.shrClaims,shrNonce:a.shrNonce,correlationId:this.correlationId};if(!a.keyId)throw q(NC);return o.signPopToken(n.access_token,a.keyId,r)}else return n.access_token}async generateAuthenticationResult(n,a,o,r,d,h){const f=this.addTelemetryFromNativeResponse(n.properties.MATS),v=this.generateScopes(a.scope,n.scope),p=n.account.properties||{},S=p.UID||o.oid||o.sub||"",T=p.TenantId||o.tid||"",k=Vf(Ss(r),void 0,o,n.id_token);k.nativeAccountId!==n.account.id&&(k.nativeAccountId=n.account.id);const M=await this.generatePopAccessToken(n,a),F=a.tokenType===Je.POP?Je.POP:Je.BEARER;return{authority:d,uniqueId:S,tenantId:T,scopes:v.asArray(),account:k,idToken:n.id_token,idTokenClaims:o,accessToken:M,fromCache:f?this.isResponseFromCache(f):!1,expiresOn:Yc(h+n.expires_in),tokenType:F,correlationId:this.correlationId,state:n.state,fromPlatformBroker:!0}}async cacheAccount(n,a){await this.browserStorage.setAccount(n,this.correlationId,a,this.apiId),this.browserStorage.removeAccountContext(Ss(n),this.correlationId)}cacheNativeTokens(n,a,o,r,d,h,f){const v=Zf(o,a.authority,n.id_token||"",a.clientId,r.tid||""),p=a.tokenType===Je.POP?rv:(typeof n.expires_in=="string"?parseInt(n.expires_in,10):n.expires_in)||0,S=f+p,T=this.generateScopes(n.scope,a.scope),k=$f(o,a.authority,d,a.clientId,r.tid||h,T.printScopes(),S,0,On,void 0,a.tokenType,void 0,a.keyId),M={idToken:v,accessToken:k};return this.nativeStorageManager.saveCacheRecord(M,this.correlationId,ys(r),this.apiId,a.storeInCache)}getExpiresInValue(n,a){return n===Je.POP?rv:(typeof a=="string"?parseInt(a,10):a)||0}addTelemetryFromNativeResponse(n){const a=this.getMATSFromResponse(n);return a?(this.performanceClient.addFields({extensionId:this.platformAuthProvider.getExtensionId(),extensionVersion:this.platformAuthProvider.getExtensionVersion(),matsBrokerVersion:a.broker_version,matsAccountJoinOnStart:a.account_join_on_start,matsAccountJoinOnEnd:a.account_join_on_end,matsDeviceJoin:a.device_join,matsPromptBehavior:a.prompt_behavior,matsApiErrorCode:a.api_error_code,matsUiVisible:a.ui_visible,matsSilentCode:a.silent_code,matsSilentBiSubCode:a.silent_bi_sub_code,matsSilentMessage:a.silent_message,matsSilentStatus:a.silent_status,matsHttpStatus:a.http_status,matsHttpEventCount:a.http_event_count},this.correlationId),a):null}getMATSFromResponse(n){if(n)try{return JSON.parse(n)}catch{this.logger.error("0b3l57",this.correlationId)}return null}isResponseFromCache(n){return typeof n.is_cached>"u"?(this.logger.verbose("1okqev",this.correlationId),!1):!!n.is_cached}async initializeNativeRequest(n){this.logger.trace("04j6wj",this.correlationId);const a=await this.getCanonicalAuthority(n),{scopes:o,...r}=n,d=new Yt(o||[]);d.appendScopes(Do);const h={...r,accountId:this.accountId,clientId:this.config.auth.clientId,authority:a.urlString,scope:d.printScopes(),redirectUri:cu(n.redirectUri,this.config.auth.redirectUri,this.logger,this.correlationId),prompt:this.getPrompt(n.prompt),correlationId:this.correlationId,tokenType:n.authenticationScheme,windowTitleSubstring:document.title,extraParameters:{...n.extraParameters},extendedExpiryToken:!1,keyId:n.popKid};if(h.signPopToken&&n.popKid)throw ne(Kw);if(this.handleExtraBrokerParams(h),h.extraParameters=h.extraParameters||{},h.extraParameters.telemetry=Kn.MATS_TELEMETRY,n.authenticationScheme===Je.POP){const f={resourceRequestUri:n.resourceRequestUri,resourceRequestMethod:n.resourceRequestMethod,shrClaims:n.shrClaims,shrNonce:n.shrNonce,correlationId:this.correlationId},v=new Mo(this.browserCrypto,this.performanceClient);let p;if(h.keyId)p=this.browserCrypto.base64UrlEncode(JSON.stringify({kid:h.keyId})),h.signPopToken=!1;else{const S=await P(v.generateCnf.bind(v),hl,this.logger,this.performanceClient,this.correlationId)(f,this.logger);p=S.reqCnfString,h.keyId=S.kid,h.signPopToken=!0}h.reqCnf=p}return this.addRequestSKUs(h),h}async getCanonicalAuthority(n){const a=n.authority||this.config.auth.authority,{azureCloudOptions:o,account:r}=n;r&&await Yi(this.config,this.correlationId,this.performanceClient,this.browserStorage,this.logger,a,o,void 0,r);const d=new Fe(a);return d.validateAsUri(),d}getPrompt(n){switch(this.apiId){case Le.ssoSilent:case Le.acquireTokenSilent_silentFlow:return this.logger.trace("1hiwaz",this.correlationId),hn.NONE}if(!n){this.logger.trace("1qlu04",this.correlationId);return}switch(n){case hn.NONE:case hn.CONSENT:case hn.LOGIN:return this.logger.trace("1ynje4",this.correlationId),n;default:throw this.logger.trace("0nkr6q",this.correlationId),ne(Lw)}}handleExtraBrokerParams(n){const a=n.extraParameters&&n.extraParameters.hasOwnProperty($c)&&n.extraParameters.hasOwnProperty(Wc)&&n.extraParameters.hasOwnProperty(Cs);if(!n.embeddedClientId&&!a)return;let o="";const r=n.redirectUri;n.embeddedClientId?(n.redirectUri=this.config.auth.redirectUri,o=n.embeddedClientId):n.extraParameters&&(n.redirectUri=n.extraParameters[Wc],o=n.extraParameters[Cs]),n.extraParameters={child_client_id:o,child_redirect_uri:r},this.performanceClient?.addFields({embeddedClientId:o,embeddedRedirectUri:r},n.correlationId)}}async function Cg(l,n,a,o,r){const d=iw({...l.auth,authority:n},a,o,r);if(zf(d,{sku:Bn.MSAL_SKU,version:bs,os:"",cpu:""}),l.system.protocolMode!==fn.OIDC&&Lf(d,l.telemetry.application),a.platformBroker&&(Ob(d),a.authenticationScheme===Je.POP)){const h=new Qi(o,r),f=new Mo(h,r);let v;a.popKid?v=h.encodeKid(a.popKid):v=(await P(f.generateCnf.bind(f),hl,o,r,a.correlationId)(a,o)).reqCnfString,Pf(d,v)}return fu(d,a.correlationId,r),d}async function Sg(l,n,a,o,r){if(!a.codeChallenge)throw nt(AC);const d=await P(Cg,O_,o,r,a.correlationId)(l,n,a,o,r);return xf(d,_f.CODE),Bf(d,a.codeChallenge,wf),pi(d,{...a.extraQueryParameters,...a.extraParameters}),Wf(n,d)}async function Tg(l,n,a,o,r,d){if(!o.earJwk)throw ne(hS);const h=await Cg(n,a,o,r,d);xf(h,_f.IDTOKEN_TOKEN_REFRESHTOKEN),Lb(h,o.earJwk),Bf(h,o.codeChallenge,wf),pi(h,{...o.extraParameters});const f=new Map;pi(f,o.extraQueryParameters||{}),cl(f,o.correlationId);const v=Wf(a,f);return US(l,v,h)}async function Eg(l,n,a,o,r,d){const h=await Cg(n,a,o,r,d);xf(h,_f.CODE),Bf(h,o.codeChallenge,o.codeChallengeMethod||wf),pi(h,{...o.extraParameters});const f=new Map;pi(f,o.extraQueryParameters||{}),cl(f,o.correlationId);const v=Wf(a,f);return US(l,v,h)}function US(l,n,a){const o=l.createElement("form");return o.method="post",o.action=n,a.forEach((r,d)=>{const h=l.createElement("input");h.hidden=!0,h.name=d,h.value=r,o.appendChild(h)}),l.body.appendChild(o),o}async function jS(l,n,a,o,r,d,h,f,v,p){if(f.verbose("11qcow",l.correlationId),!p)throw ne(yS);const S=new Qi(f,v),T=new Xc(o,r,S,f,h,o.system.navigationClient,a,v,p,n,d,l.correlationId),{userRequestState:k}=dl(S.base64Decode,l.state);return P(T.acquireToken.bind(T),OS,f,v,l.correlationId)({...l,state:k,prompt:void 0})}async function No(l,n,a,o,r,d,h,f,v,p,S,T){if(gi.removeThrottle(h,r.auth.clientId,l),n.accountId)return P(jS,IS,p,S,l.correlationId)(l,n.accountId,o,r,h,f,v,p,S,T);const k={...l,code:n.code||"",codeVerifier:a},M=new xS(d,h,k,p,S);return await P(M.handleCodeResponse.bind(M),I_,p,S,l.correlationId)(n,l,o)}async function Ag(l,n,a,o,r,d,h,f,v,p,S){if(gi.removeThrottle(d,o.auth.clientId,l),rS(n,l.state),!n.ear_jwe)throw ne(pw);if(!l.earJwk)throw ne(hS);const T=JSON.parse(await P(n_,F_,v,p,l.correlationId)(l.earJwk,n.ear_jwe));if(T.accountId)return P(jS,IS,v,p,l.correlationId)(l,T.accountId,a,o,d,h,f,v,p,S);const k=new Ts(o.auth.clientId,d,new Qi(v,p),v,p,null,null);k.validateTokenResponse(T,l.correlationId);const M={code:"",state:l.state,nonce:l.nonce,client_info:T.client_info,cloud_graph_host_name:T.cloud_graph_host_name,cloud_instance_host_name:T.cloud_instance_host_name,cloud_instance_name:T.cloud_instance_name,msgraph_host:T.msgraph_host};return await P(k.handleServerTokenResponse.bind(k),Xf,v,p,l.correlationId)(T,r,Wn(),l,a,M,void 0,void 0,void 0,void 0)}const Nk=32;async function ws(l,n,a){const o=Zn(Mk,H_,n,l,a)(l,n,a),r=await P(xk,z_,n,l,a)(o,l,n,a);return{verifier:o,challenge:r}}function Mk(l,n,a){try{const o=new Uint8Array(Nk);return Zn(Zw,B_,n,l,a)(o),xa(o)}catch{throw ne(dS)}}async function xk(l,n,a,o){try{const r=await P(SS,L_,a,n,o)(l);return xa(new Uint8Array(r))}catch{throw ne(dS)}}class du{navigateInternal(n,a){return du.defaultNavigateWindow(n,a)}navigateExternal(n,a){return du.defaultNavigateWindow(n,a)}static defaultNavigateWindow(n,a){return a.noHistory?window.location.replace(n):window.location.assign(n),new Promise((o,r)=>{setTimeout(()=>{r(ne(ru,"failed_to_redirect"))},a.timeout)})}}class Dk{async sendGetRequestAsync(n,a){let o,r={},d=0;const h=nC(a);try{o=await fetch(n,{method:Uv.GET,headers:h})}catch(f){throw Zr(ne(window.navigator.onLine?Mw:yf),void 0,void 0,f)}r=iC(o.headers);try{return d=o.status,{headers:r,body:await o.json(),status:d}}catch(f){throw Zr(ne(Lv),d,r,f)}}async sendPostRequestAsync(n,a){const o=a&&a.body||"",r=nC(a);let d,h=0,f={};try{d=await fetch(n,{method:Uv.POST,headers:r,body:o})}catch(v){throw Zr(ne(window.navigator.onLine?Nw:yf),void 0,void 0,v)}f=iC(d.headers);try{return h=d.status,{headers:f,body:await d.json(),status:h}}catch(v){throw Zr(ne(Lv),h,f,v)}}}function nC(l){try{const n=new Headers;if(!(l&&l.headers))return n;const a=l.headers;return Object.entries(a).forEach(([o,r])=>{n.append(o,r)}),n}catch(n){throw Zr(ne(Pw),void 0,void 0,n)}}function iC(l){try{const n={};return l.forEach((a,o)=>{n[o]=a}),n}catch{throw ne(Gw)}}const Uk=6e4,jk=1e4,Hk=3e4,HS=2e3;function zk({auth:l,cache:n,system:a,telemetry:o},r){const d={clientId:"",authority:`${cC}`,knownAuthorities:[],cloudDiscoveryMetadata:"",authorityMetadata:"",redirectUri:typeof window<"u"&&window.location?window.location.href.split("?")[0].split("#")[0]:"",postLogoutRedirectUri:"",clientCapabilities:[],OIDCOptions:{responseMode:kf.FRAGMENT,defaultScopes:[dC,hC,bf]},azureCloudOptions:{azureCloudInstance:Gf.None,tenant:""},instanceAware:!1},h={cacheLocation:Gn.SessionStorage,cacheRetentionDays:5},f={loggerCallback:()=>{},logLevel:rt.Info,piiLoggingEnabled:!1},p={...{...QC,loggerOptions:f,networkClient:r?new Dk:nw,navigationClient:new du,popupBridgeTimeout:a?.popupBridgeTimeout||Uk,iframeBridgeTimeout:a?.iframeBridgeTimeout||jk,redirectNavigationTimeout:Hk,allowRedirectInIframe:!1,navigatePopups:!0,allowPlatformBroker:!1,nativeBrokerHandshakeTimeout:a?.nativeBrokerHandshakeTimeout||HS,protocolMode:fn.AAD},...a,loggerOptions:a?.loggerOptions||f},S={application:{appName:"",appVersion:""},client:new YC};if(a?.protocolMode!==fn.OIDC&&l?.OIDCOptions&&new yi(p.loggerOptions).warning(JSON.stringify(nt(ob)),""),a?.protocolMode&&a.protocolMode===fn.OIDC&&p?.allowPlatformBroker)throw nt(rb);return{auth:{...d,...l,OIDCOptions:{...d.OIDCOptions,...l?.OIDCOptions}},cache:{...h,...n},system:p,telemetry:{...S,...o}}}class hu{constructor(n,a,o,r){this.logger=n,this.handshakeTimeoutMs=a,this.extensionId=r,this.resolvers=new Map,this.handshakeResolvers=new Map,this.messageChannel=new MessageChannel,this.windowListener=this.onWindowMessage.bind(this),this.performanceClient=o,this.handshakeEvent=o.startMeasurement(U_),this.platformAuthType=Kn.PLATFORM_EXTENSION_PROVIDER}async sendMessage(n){this.logger.trace("0on4p2",n.correlationId);const a={method:qr.GetToken,request:n},o={channel:Kn.CHANNEL_ID,extensionId:this.extensionId,responseId:Es(),body:a};this.logger.trace("1qadfi",n.correlationId),this.logger.tracePii("1xm533",n.correlationId),this.messageChannel.port1.postMessage(o);const r=await new Promise((h,f)=>{this.resolvers.set(o.responseId,{resolve:h,reject:f})});return this.validatePlatformBrokerResponse(r)}static async createProvider(n,a,o,r){n.trace("15zfnw",r);try{const d=new hu(n,a,o,Kn.PREFERRED_EXTENSION_ID);return await d.sendHandshakeRequest(r),d}catch{const h=new hu(n,a,o);return await h.sendHandshakeRequest(r),h}}async sendHandshakeRequest(n){this.logger.trace("1dpg9o",n),window.addEventListener("message",this.windowListener,!1);const a={channel:Kn.CHANNEL_ID,extensionId:this.extensionId,responseId:Es(),body:{method:qr.HandshakeRequest}};return this.handshakeEvent.add({extensionId:this.extensionId,extensionHandshakeTimeoutMs:this.handshakeTimeoutMs}),this.messageChannel.port1.onmessage=o=>{this.onChannelMessage(o)},window.postMessage(a,window.origin,[this.messageChannel.port2]),new Promise((o,r)=>{this.handshakeResolvers.set(a.responseId,{resolve:o,reject:r}),this.timeoutId=window.setTimeout(()=>{window.removeEventListener("message",this.windowListener,!1),this.messageChannel.port1.close(),this.messageChannel.port2.close(),this.handshakeEvent.end({extensionHandshakeTimedOut:!0,success:!1}),r(ne(Hw)),this.handshakeResolvers.delete(a.responseId)},this.handshakeTimeoutMs)})}onWindowMessage(n){const a=vf();if(this.logger.trace("0jpn5u",a),n.source!==window)return;const o=n.data;if(!(!o.channel||o.channel!==Kn.CHANNEL_ID)&&!(o.extensionId&&o.extensionId!==this.extensionId)&&o.body.method===qr.HandshakeRequest){const r=this.handshakeResolvers.get(o.responseId);if(!r){this.logger.trace("07buhm",a);return}this.logger.verbose(o.extensionId?"0xrkug":"No extension installed",a),clearTimeout(this.timeoutId),this.messageChannel.port1.close(),this.messageChannel.port2.close(),window.removeEventListener("message",this.windowListener,!1),this.handshakeEvent.end({success:!1,extensionInstalled:!1}),r.reject(ne(zw))}}onChannelMessage(n){const a=vf();this.logger.trace("1py8yf",a);const o=n.data,r=this.resolvers.get(o.responseId),d=this.handshakeResolvers.get(o.responseId);try{const h=o.body.method;if(h===qr.Response){if(!r)return;const f=o.body.response;if(this.logger.trace("19hpgm",a),this.logger.tracePii("179a24",a),f.status!=="Success")r.reject(uu(f.code,f.description,f.ext));else if(f.result)f.result.code&&f.result.description?r.reject(uu(f.result.code,f.result.description,f.result.ext)):r.resolve(f.result);else throw cf(gf,"Event does not contain result.");this.resolvers.delete(o.responseId)}else if(h===qr.HandshakeResponse){if(!d){this.logger.trace("082qnt",a);return}clearTimeout(this.timeoutId),window.removeEventListener("message",this.windowListener,!1),this.extensionId=o.extensionId,this.extensionVersion=o.body.version,this.logger.verbose("0yf5ib",a),this.handshakeEvent.end({extensionInstalled:!0,success:!0}),d.resolve(),this.handshakeResolvers.delete(o.responseId)}}catch(h){this.logger.error("0xf978",a),this.logger.errorPii("04i99o",a),this.logger.errorPii("0xdvsy",a),r?r.reject(h):d&&d.reject(h)}}validatePlatformBrokerResponse(n){if(n.hasOwnProperty("access_token")&&n.hasOwnProperty("id_token")&&n.hasOwnProperty("client_info")&&n.hasOwnProperty("account")&&n.hasOwnProperty("scope")&&n.hasOwnProperty("expires_in"))return n;throw cf(gf,"Response missing expected properties.")}getExtensionId(){return this.extensionId}getExtensionVersion(){return this.extensionVersion}getExtensionName(){return this.getExtensionId()===Kn.PREFERRED_EXTENSION_ID?"chrome":this.getExtensionId()?.length?"unknown":void 0}}class bg{constructor(n,a,o){this.logger=n,this.performanceClient=a,this.correlationId=o,this.platformAuthType=Kn.PLATFORM_DOM_PROVIDER}static async createProvider(n,a,o){if(n.trace("12mj4a",o),window.navigator?.platformAuthentication&&(await window.navigator.platformAuthentication.getSupportedContracts(Kn.MICROSOFT_ENTRA_BROKERID))?.includes(Kn.PLATFORM_DOM_APIS))return n.trace("1h5q1r",o),new bg(n,a,o)}getExtensionId(){return Kn.MICROSOFT_ENTRA_BROKERID}getExtensionVersion(){return""}getExtensionName(){return Kn.DOM_API_NAME}async sendMessage(n){this.logger.trace("02bcil",n.correlationId);try{const a=this.initializePlatformDOMRequest(n),o=await window.navigator.platformAuthentication.executeGetToken(a);return this.validatePlatformBrokerResponse(o,n.correlationId)}catch(a){throw this.logger.error("11im7g",n.correlationId),a}}initializePlatformDOMRequest(n){this.logger.trace("15d6yv",n.correlationId);const{accountId:a,clientId:o,authority:r,scope:d,redirectUri:h,correlationId:f,state:v,storeInCache:p,embeddedClientId:S,extraParameters:T,...k}=n,M=this.getDOMExtraParams(k);return{accountId:a,brokerId:this.getExtensionId(),authority:r,clientId:o,correlationId:f||this.correlationId,extraParameters:{...T,...M},isSecurityTokenService:!1,redirectUri:h,scope:d,state:v,storeInCache:p,embeddedClientId:S}}validatePlatformBrokerResponse(n,a){if(n.hasOwnProperty("isSuccess")){if(n.hasOwnProperty("accessToken")&&n.hasOwnProperty("idToken")&&n.hasOwnProperty("clientInfo")&&n.hasOwnProperty("account")&&n.hasOwnProperty("scopes")&&n.hasOwnProperty("expiresIn"))return this.logger.trace("0h4vei",a),this.convertToPlatformBrokerResponse(n,a);if(n.hasOwnProperty("error")){const o=n;if(o.isSuccess===!1&&o.error&&o.error.code)throw this.logger.trace("0g92vm",a),uu(o.error.code,o.error.description,{error:parseInt(o.error.errorCode),protocol_error:o.error.protocolError,status:o.error.status,properties:o.error.properties})}}throw cf(gf,"Response missing expected properties.")}convertToPlatformBrokerResponse(n,a){return this.logger.trace("14913t",a),{access_token:n.accessToken,id_token:n.idToken,client_info:n.clientInfo,account:n.account,expires_in:n.expiresIn,scope:n.scopes,state:n.state||"",properties:n.properties||{},extendedLifetimeToken:n.extendedLifetimeToken??!1,shr:n.proofOfPossessionPayload}}getDOMExtraParams(n){return{...Object.entries(n).reduce((r,[d,h])=>(r[d]=String(h),r),{})}}}async function Lk(l,n,a,o){l.trace("134j0v",a);const r=Bk();l.trace("04c81g",a);let d;try{r&&(d=await bg.createProvider(l,n,a)),d||(l.trace("0l3na8",a),d=await hu.createProvider(l,o||HS,n,a))}catch(h){l.trace("0icbd7",h)}return d}function Bk(){let l;try{return l=window[Gn.SessionStorage],l?.getItem(ik)==="true"}catch{return!1}}function ll(l,n,a,o,r){if(n.trace("0uko3r",a),!l.system.allowPlatformBroker)return n.trace("04hozs",a),!1;if(!o)return n.trace("0kvv1r",a),!1;if(r)switch(r){case Je.BEARER:case Je.POP:return n.trace("18tev1",a),!0;default:return n.trace("1dd2nh",a),!1}return!0}class Kk extends Ho{constructor(n,a,o,r,d,h,f,v,p,S){super(n,a,o,r,d,h,f,p,S),this.nativeStorage=v,this.eventHandler=d}acquireToken(n,a){let o;try{if(o={popupName:this.generatePopupName(n.scopes||Do,n.authority||this.config.auth.authority),popupWindowAttributes:n.popupWindowAttributes||{},popupWindowParent:n.popupWindowParent??window},this.performanceClient.addFields({isAsyncPopup:!this.config.system.navigatePopups},this.correlationId),this.config.system.navigatePopups){const d={...n,httpMethod:MS(n,this.config.system.protocolMode)};return this.logger.verbose("1f9ok3",this.correlationId),o.popup=this.openSizedPopup("about:blank",o),this.acquireTokenPopupAsync(d,o,a)}else return this.logger.verbose("162h4u",this.correlationId),this.acquireTokenPopupAsync(n,o,a)}catch(r){return Promise.reject(r)}}logout(n){try{this.logger.verbose("068rup",this.correlationId);const a=this.initializeLogoutRequest(n),o={popupName:this.generateLogoutPopupName(a),popupWindowAttributes:n?.popupWindowAttributes||{},popupWindowParent:n?.popupWindowParent??window},r=n&&n.authority,d=n&&n.mainWindowRedirectUri;return this.config.system.navigatePopups?(this.logger.verbose("1a28da",this.correlationId),o.popup=this.openSizedPopup("about:blank",o),this.logoutPopupAsync(a,o,r,d)):(this.logger.verbose("1phd8u",this.correlationId),this.logoutPopupAsync(a,o,r,d))}catch(a){return Promise.reject(a)}}async acquireTokenPopupAsync(n,a,o){this.logger.verbose("1g77pg",this.correlationId);const r=await P(wu,Au,this.logger,this.performanceClient,this.correlationId)(n,Ce.Popup,this.config,this.browserCrypto,this.browserStorage,this.logger,this.performanceClient,this.correlationId);a.popup&&kS(r.authority);const d=ll(this.config,this.logger,this.correlationId,this.platformAuthProvider,n.authenticationScheme);return r.platformBroker=d,this.config.system.protocolMode===fn.EAR?this.executeEarFlow(r,a,o):this.executeCodeFlow(r,a,o)}async executeCodeFlow(n,a,o){const r=n.correlationId,d=gn(Le.acquireTokenPopup,this.config.auth.clientId,this.correlationId,this.browserStorage,this.logger),h=o||await P(ws,As,this.logger,this.performanceClient,r)(this.performanceClient,this.logger,r),f={...n,codeChallenge:h.challenge};try{const v=await P(this.createAuthCodeClient.bind(this),Ma,this.logger,this.performanceClient,r)({serverTelemetryManager:d,requestAuthority:f.authority,requestAzureCloudOptions:f.azureCloudOptions,requestExtraQueryParameters:f.extraQueryParameters,account:f.account});if(f.httpMethod===wo.POST)return await this.executeCodeFlowWithPost(f,a,v,h.verifier);{const p=await P(Sg,Jf,this.logger,this.performanceClient,r)(this.config,v.authority,f,this.logger,this.performanceClient),S=this.initiateAuthRequest(p,a);this.eventHandler.emitEvent(Se.POPUP_OPENED,r,Ce.Popup,{popupWindow:S},null);const T=await bo(this.config.system.popupBridgeTimeout,this.logger,this.browserCrypto,n),k=Zn(el,Wr,this.logger,this.performanceClient,this.correlationId)(T,this.config.auth.OIDCOptions.responseMode,this.logger,this.correlationId);return await P(No,Oo,this.logger,this.performanceClient,r)(n,k,h.verifier,Le.acquireTokenPopup,this.config,v,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}}catch(v){throw a.popup?.close(),v instanceof et&&(v.setCorrelationId(this.correlationId),d.cacheFailedRequest(v)),v}}async executeEarFlow(n,a,o){const{correlationId:r,authority:d,azureCloudOptions:h,extraQueryParameters:f,account:v}=n,p=await P(Yi,vs,this.logger,this.performanceClient,r)(this.config,this.correlationId,this.performanceClient,this.browserStorage,this.logger,d,h,f,v),S=await P(cg,mg,this.logger,this.performanceClient,r)(),T=o||await P(ws,As,this.logger,this.performanceClient,r)(this.performanceClient,this.logger,r),k={...n,earJwk:S,codeChallenge:T.challenge},M=a.popup||this.openPopup("about:blank",a);(await Tg(M.document,this.config,p,k,this.logger,this.performanceClient)).submit();const J=await P(bo,lu,this.logger,this.performanceClient,r)(this.config.system.popupBridgeTimeout,this.logger,this.browserCrypto,k),ve=Zn(el,Wr,this.logger,this.performanceClient,this.correlationId)(J,this.config.auth.OIDCOptions.responseMode,this.logger,this.correlationId);if(!ve.ear_jwe&&ve.code){const W=await P(this.createAuthCodeClient.bind(this),Ma,this.logger,this.performanceClient,r)({serverTelemetryManager:gn(Le.acquireTokenPopup,this.config.auth.clientId,r,this.browserStorage,this.logger),requestAuthority:n.authority,requestAzureCloudOptions:n.azureCloudOptions,requestExtraQueryParameters:n.extraQueryParameters,account:n.account,authority:p});return P(No,Oo,this.logger,this.performanceClient,r)(k,ve,T.verifier,Le.acquireTokenPopup,this.config,W,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}else return P(Ag,gg,this.logger,this.performanceClient,r)(k,ve,Le.acquireTokenPopup,this.config,p,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async executeCodeFlowWithPost(n,a,o,r){const d=n.correlationId,h=await P(Yi,vs,this.logger,this.performanceClient,d)(this.config,this.correlationId,this.performanceClient,this.browserStorage,this.logger),f=a.popup||this.openPopup("about:blank",a);(await Eg(f.document,this.config,h,n,this.logger,this.performanceClient)).submit();const p=await P(bo,lu,this.logger,this.performanceClient,d)(this.config.system.popupBridgeTimeout,this.logger,this.browserCrypto,n),S=Zn(el,Wr,this.logger,this.performanceClient,this.correlationId)(p,this.config.auth.OIDCOptions.responseMode,this.logger,this.correlationId);return P(No,Oo,this.logger,this.performanceClient,d)(n,S,r,Le.acquireTokenPopup,this.config,o,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async logoutPopupAsync(n,a,o,r){this.logger.verbose("0b7yrk",this.correlationId),this.eventHandler.emitEvent(Se.LOGOUT_START,this.correlationId,Ce.Popup,n);const d=gn(Le.logoutPopup,this.config.auth.clientId,this.correlationId,this.browserStorage,this.logger);try{await yg(this.browserStorage,this.browserCrypto,this.logger,this.correlationId,n.account);const h=await P(this.createAuthCodeClient.bind(this),Ma,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:d,requestAuthority:o,account:n.account||void 0});try{h.authority.endSessionEndpoint}catch{if(n.account?.homeAccountId&&n.postLogoutRedirectUri&&h.authority.protocolMode===fn.OIDC){if(this.eventHandler.emitEvent(Se.LOGOUT_SUCCESS,n.correlationId,Ce.Popup,n),r){const p={apiId:Le.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},S=Fe.getAbsoluteUrl(r,Ia());await this.navigationClient.navigateInternal(S,p)}a.popup?.close();return}}const f=h.getLogoutUri(n);this.eventHandler.emitEvent(Se.LOGOUT_SUCCESS,n.correlationId,Ce.Popup,n);const v=this.openPopup(f,a);if(this.eventHandler.emitEvent(Se.POPUP_OPENED,n.correlationId,Ce.Popup,{popupWindow:v},null),await bo(this.config.system.popupBridgeTimeout,this.logger,this.browserCrypto,n).catch(()=>{}),r){const p={apiId:Le.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},S=Fe.getAbsoluteUrl(r,Ia());this.logger.verbose("0qcur2",this.correlationId),this.logger.verbosePii("0oj7lk",this.correlationId),await this.navigationClient.navigateInternal(S,p)}else this.logger.verbose("03zgcf",this.correlationId)}catch(h){throw a.popup?.close(),h instanceof et&&(h.setCorrelationId(this.correlationId),d.cacheFailedRequest(h)),this.eventHandler.emitEvent(Se.LOGOUT_FAILURE,this.correlationId,Ce.Popup,null,h),this.eventHandler.emitEvent(Se.LOGOUT_END,this.correlationId,Ce.Popup),h}this.eventHandler.emitEvent(Se.LOGOUT_END,this.correlationId,Ce.Popup)}initiateAuthRequest(n,a){if(n)return this.logger.infoPii("1kcr9k",this.correlationId),this.openPopup(n,a);throw this.logger.error("1l7hyp",this.correlationId),ne(ng)}openPopup(n,a){try{let o;if(a.popup?(o=a.popup,this.logger.verbosePii("0cgeo7",this.correlationId),o.location.assign(n)):typeof a.popup>"u"&&(this.logger.verbosePii("0c2awd",this.correlationId),o=this.openSizedPopup(n,a)),!o)throw ne(Aw);return o.focus&&o.focus(),this.currentWindow=o,o}catch{throw this.logger.error("0dxfb9",this.correlationId),ne(Ew)}}openSizedPopup(n,{popupName:a,popupWindowAttributes:o,popupWindowParent:r}){const d=r.screenLeft?r.screenLeft:r.screenX,h=r.screenTop?r.screenTop:r.screenY,f=r.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,v=r.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;let p=o.popupSize?.width,S=o.popupSize?.height,T=o.popupPosition?.top,k=o.popupPosition?.left;return(!p||p<0||p>f)&&(this.logger.verbose("08vfmo",this.correlationId),p=Bn.POPUP_WIDTH),(!S||S<0||S>v)&&(this.logger.verbose("09cxa0",this.correlationId),S=Bn.POPUP_HEIGHT),(!T||T<0||T>v)&&(this.logger.verbose("1qh4wo",this.correlationId),T=Math.max(0,v/2-Bn.POPUP_HEIGHT/2+h)),(!k||k<0||k>f)&&(this.logger.verbose("1sz3en",this.correlationId),k=Math.max(0,f/2-Bn.POPUP_WIDTH/2+d)),r.open(n,a,`width=${p}, height=${S}, top=${T}, left=${k}, scrollbars=yes`)}generatePopupName(n,a){return`${Bn.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${n.join("-")}.${a}.${this.correlationId}`}generateLogoutPopupName(n){const a=n.account&&n.account.homeAccountId;return`${Bn.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${a}.${this.correlationId}`}}function Pk(){if(typeof window>"u"||typeof window.performance>"u"||typeof window.performance.getEntriesByType!="function")return;const l=window.performance.getEntriesByType("navigation");return(l.length?l[0]:void 0)?.type}class Gk extends Ho{constructor(n,a,o,r,d,h,f,v,p,S){super(n,a,o,r,d,h,f,p,S),this.nativeStorage=v}async acquireToken(n){const a=await P(wu,Au,this.logger,this.performanceClient,this.correlationId)(n,Ce.Redirect,this.config,this.browserCrypto,this.browserStorage,this.logger,this.performanceClient,this.correlationId);a.platformBroker=ll(this.config,this.logger,this.correlationId,this.platformAuthProvider,n.authenticationScheme);const o=d=>{d.persisted&&(this.logger.verbose("0udvtt",this.correlationId),this.browserStorage.resetRequestCache(this.correlationId),this.eventHandler.emitEvent(Se.RESTORE_FROM_BFCACHE,this.correlationId,Ce.Redirect))},r=this.getRedirectStartPage(n.redirectStartPage);this.logger.verbosePii("0zao0a",this.correlationId),this.browserStorage.setTemporaryCache(At.ORIGIN_URI,r,!0),window.addEventListener("pageshow",o);try{this.config.system.protocolMode===fn.EAR?await this.executeEarFlow(a):await this.executeCodeFlow(a)}catch(d){throw d instanceof et&&d.setCorrelationId(this.correlationId),window.removeEventListener("pageshow",o),d}}async executeCodeFlow(n){const a=n.correlationId,o=gn(Le.acquireTokenRedirect,this.config.auth.clientId,this.correlationId,this.browserStorage,this.logger),r=await P(ws,As,this.logger,this.performanceClient,a)(this.performanceClient,this.logger,a),d={...n,codeChallenge:r.challenge};this.browserStorage.cacheAuthorizeRequest(d,this.correlationId,r.verifier);try{if(d.httpMethod===wo.POST)return await this.executeCodeFlowWithPost(d);{const h=await P(this.createAuthCodeClient.bind(this),Ma,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:o,requestAuthority:d.authority,requestAzureCloudOptions:d.azureCloudOptions,requestExtraQueryParameters:d.extraQueryParameters,account:d.account}),f=await P(Sg,Jf,this.logger,this.performanceClient,n.correlationId)(this.config,h.authority,d,this.logger,this.performanceClient);return await this.initiateAuthRequest(f)}}catch(h){throw h instanceof et&&(h.setCorrelationId(this.correlationId),o.cacheFailedRequest(h)),h}}async executeEarFlow(n){const{correlationId:a,authority:o,azureCloudOptions:r,extraQueryParameters:d,account:h}=n,f=await P(Yi,vs,this.logger,this.performanceClient,a)(this.config,this.correlationId,this.performanceClient,this.browserStorage,this.logger,o,r,d,h),v=await P(cg,mg,this.logger,this.performanceClient,a)(),p=await P(ws,As,this.logger,this.performanceClient,a)(this.performanceClient,this.logger,a),S={...n,earJwk:v,codeChallenge:p.challenge};return this.browserStorage.cacheAuthorizeRequest(S,this.correlationId,p.verifier),(await Tg(document,this.config,f,S,this.logger,this.performanceClient)).submit(),new Promise((k,M)=>{setTimeout(()=>{M(ne(ru,"failed_to_redirect"))},this.config.system.redirectNavigationTimeout)})}async executeCodeFlowWithPost(n){const a=n.correlationId,o=await P(Yi,vs,this.logger,this.performanceClient,a)(this.config,this.correlationId,this.performanceClient,this.browserStorage,this.logger);return this.browserStorage.cacheAuthorizeRequest(n,this.correlationId),(await Eg(document,this.config,o,n,this.logger,this.performanceClient)).submit(),new Promise((d,h)=>{setTimeout(()=>{h(ne(ru,"failed_to_redirect"))},this.config.system.redirectNavigationTimeout)})}async handleRedirectPromise(n,a,o,r){const d=gn(Le.handleRedirectPromise,this.config.auth.clientId,this.correlationId,this.browserStorage,this.logger),h=r?.navigateToLoginRequestUrl??!0;try{const[f,v]=this.getRedirectResponse(r?.hash||"");if(!f)return this.logger.info("1qmv0q",this.correlationId),this.browserStorage.resetRequestCache(this.correlationId),Pk()!=="back_forward"?o.event.errorCode="no_server_response":this.logger.verbose("1eqegq",this.correlationId),null;const p=this.browserStorage.getTemporaryCache(At.ORIGIN_URI,this.correlationId,!0)||"",S=Sv(p),T=Sv(window.location.href);if(S===T&&h)return this.logger.verbose("11yred",this.correlationId),p.indexOf("#")>-1&&r_(p),await this.handleResponse(f,n,a,d);if(h){if(!Tu()||this.config.system.allowRedirectInIframe){this.browserStorage.setTemporaryCache(At.URL_HASH,v,!0);const k={apiId:Le.handleRedirectPromise,timeout:this.config.system.redirectNavigationTimeout,noHistory:!0};let M=!0;if(!p||p==="null"){const F=u_();this.browserStorage.setTemporaryCache(At.ORIGIN_URI,F,!0),this.logger.warning("1dutq1",this.correlationId),M=await this.navigationClient.navigateInternal(F,k)}else this.logger.verbose("08jpy1",this.correlationId),M=await this.navigationClient.navigateInternal(p,k);if(!M)return await this.handleResponse(f,n,a,d)}}else return this.logger.verbose("0v4sdv",this.correlationId),await this.handleResponse(f,n,a,d);return null}catch(f){throw f instanceof et&&(f.setCorrelationId(this.correlationId),d.cacheFailedRequest(f)),f}}getRedirectResponse(n){this.logger.verbose("1c5i8m",this.correlationId);let a=n;a||(this.config.auth.OIDCOptions.responseMode===kf.QUERY?a=window.location.search:a=window.location.hash);let o=tu(a);if(o){try{Ck(o,this.browserCrypto,Ce.Redirect)}catch(d){return d instanceof et&&this.logger.error("0bkq6p",this.correlationId),[null,""]}return bS(window),this.logger.verbose("00uvho",this.correlationId),[o,a]}const r=this.browserStorage.getTemporaryCache(At.URL_HASH,this.correlationId,!0);return this.browserStorage.removeItem(this.browserStorage.generateCacheKey(At.URL_HASH)),r&&(o=tu(r),o)?(this.logger.verbose("001671",this.correlationId),[o,r]):[null,""]}async handleResponse(n,a,o,r){if(!n.state)throw ne(ig);const{authority:h,azureCloudOptions:f,extraQueryParameters:v,account:p}=a;if(n.ear_jwe){const T=await P(Yi,vs,this.logger,this.performanceClient,a.correlationId)(this.config,this.correlationId,this.performanceClient,this.browserStorage,this.logger,h,f,v,p);return P(Ag,gg,this.logger,this.performanceClient,a.correlationId)(a,n,Le.acquireTokenRedirect,this.config,T,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}const S=await P(this.createAuthCodeClient.bind(this),Ma,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:r,requestAuthority:a.authority});return P(No,Oo,this.logger,this.performanceClient,a.correlationId)(a,n,o,Le.acquireTokenRedirect,this.config,S,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async initiateAuthRequest(n){if(this.logger.verbose("0yaw2e",this.correlationId),n){this.logger.infoPii("1luf83",this.correlationId);const a={apiId:Le.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},o=this.config.auth.onRedirectNavigate;if(typeof o=="function")if(this.logger.verbose("1nehvl",this.correlationId),o(n)!==!1){this.logger.verbose("1a0jxh",this.correlationId),await this.navigationClient.navigateExternal(n,a);return}else{this.logger.verbose("09k5h5",this.correlationId);return}else{this.logger.verbose("0klwf7",this.correlationId),await this.navigationClient.navigateExternal(n,a);return}}else throw this.logger.info("0rlh4e",this.correlationId),ne(ng)}async logout(n){this.logger.verbose("1rkurh",this.correlationId);const a=this.initializeLogoutRequest(n),o=gn(Le.logout,this.config.auth.clientId,this.correlationId,this.browserStorage,this.logger);try{this.eventHandler.emitEvent(Se.LOGOUT_START,this.correlationId,Ce.Redirect,n),await yg(this.browserStorage,this.browserCrypto,this.logger,this.correlationId,a.account);const r={apiId:Le.logout,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},d=await P(this.createAuthCodeClient.bind(this),Ma,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:o,requestAuthority:n&&n.authority,requestExtraQueryParameters:n?.extraQueryParameters,account:n&&n.account||void 0});if(d.authority.protocolMode===fn.OIDC)try{d.authority.endSessionEndpoint}catch{if(a.account?.homeAccountId){this.eventHandler.emitEvent(Se.LOGOUT_SUCCESS,this.correlationId,Ce.Redirect,a);return}}const h=d.getLogoutUri(a);a.account?.homeAccountId&&this.eventHandler.emitEvent(Se.LOGOUT_SUCCESS,this.correlationId,Ce.Redirect,a);const f=this.config.auth.onRedirectNavigate;if(typeof f=="function")if(f(h)!==!1){this.logger.verbose("06v57e",this.correlationId),this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0,ka.SIGNOUT),await this.navigationClient.navigateExternal(h,r);return}else this.browserStorage.setInteractionInProgress(!1),this.logger.verbose("0xqes1",this.correlationId);else{this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0,ka.SIGNOUT),await this.navigationClient.navigateExternal(h,r);return}}catch(r){throw r instanceof et&&(r.setCorrelationId(this.correlationId),o.cacheFailedRequest(r)),this.eventHandler.emitEvent(Se.LOGOUT_FAILURE,this.correlationId,Ce.Redirect,null,r),this.eventHandler.emitEvent(Se.LOGOUT_END,this.correlationId,Ce.Redirect),r}this.eventHandler.emitEvent(Se.LOGOUT_END,this.correlationId,Ce.Redirect)}getRedirectStartPage(n){const a=n||window.location.href;return Fe.getAbsoluteUrl(a,Ia())}}async function Vk(l,n,a,o){if(!l)throw a.info("1l7hyp",o),ne(ng);return Zn(Qk,__,a,n,o)(l)}async function Fk(l,n,a,o,r){const d=wg();if(!d.contentDocument)throw"No document associated with iframe!";return(await Eg(d.contentDocument,l,n,a,o,r)).submit(),d}async function Yk(l,n,a,o,r){const d=wg();if(!d.contentDocument)throw"No document associated with iframe!";return(await Tg(d.contentDocument,l,n,a,o,r)).submit(),d}function Qk(l){const n=wg();return n.src=l,n}function wg(){const l=document.createElement("iframe");return l.className="msalSilentIframe",l.style.visibility="hidden",l.style.position="absolute",l.style.width=l.style.height="0",l.style.border="0",l.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),l.setAttribute("allow","local-network-access *"),document.body.appendChild(l),l}class qk extends Ho{constructor(n,a,o,r,d,h,f,v,p,S,T){super(n,a,o,r,d,h,v,S,T),this.apiId=f,this.nativeStorage=p}async acquireToken(n){!n.loginHint&&!n.sid&&(!n.account||!n.account.username)&&this.logger.warning("1kl318",this.correlationId);const a={...n};a.prompt?a.prompt!==hn.NONE&&a.prompt!==hn.NO_SESSION&&(this.logger.warning("0bmctg",this.correlationId),a.prompt=hn.NONE):a.prompt=hn.NONE;const o=await P(wu,Au,this.logger,this.performanceClient,this.correlationId)(a,Ce.Silent,this.config,this.browserCrypto,this.browserStorage,this.logger,this.performanceClient,this.correlationId);return o.platformBroker=ll(this.config,this.logger,this.correlationId,this.platformAuthProvider,o.authenticationScheme),kS(o.authority),this.config.system.protocolMode===fn.EAR?this.executeEarFlow(o):this.executeCodeFlow(o)}async executeCodeFlow(n){let a;const o=gn(this.apiId,this.config.auth.clientId,this.correlationId,this.browserStorage,this.logger);try{return a=await P(this.createAuthCodeClient.bind(this),Ma,this.logger,this.performanceClient,n.correlationId)({serverTelemetryManager:o,requestAuthority:n.authority,requestAzureCloudOptions:n.azureCloudOptions,requestExtraQueryParameters:n.extraQueryParameters,account:n.account}),await P(this.silentTokenHelper.bind(this),Yv,this.logger,this.performanceClient,n.correlationId)(a,n)}catch(r){if(r instanceof et&&(r.setCorrelationId(this.correlationId),o.cacheFailedRequest(r)),!a||!(r instanceof et)||r.errorCode!==Bn.INVALID_GRANT_ERROR)throw r;return this.performanceClient.addFields({retryError:r.errorCode},this.correlationId),await P(this.silentTokenHelper.bind(this),Yv,this.logger,this.performanceClient,this.correlationId)(a,n)}}async executeEarFlow(n){const{correlationId:a,authority:o,azureCloudOptions:r,extraQueryParameters:d,account:h}=n,f=await P(Yi,vs,this.logger,this.performanceClient,a)(this.config,this.correlationId,this.performanceClient,this.browserStorage,this.logger,o,r,d,h),v=await P(cg,mg,this.logger,this.performanceClient,a)(),p=await P(ws,As,this.logger,this.performanceClient,a)(this.performanceClient,this.logger,a),S={...n,earJwk:v,codeChallenge:p.challenge};await P(Yk,Wh,this.logger,this.performanceClient,a)(this.config,f,S,this.logger,this.performanceClient);const T=this.config.auth.OIDCOptions.responseMode,k=await P(bo,lu,this.logger,this.performanceClient,a)(this.config.system.iframeBridgeTimeout,this.logger,this.browserCrypto,n),M=Zn(el,Wr,this.logger,this.performanceClient,a)(k,T,this.logger,this.correlationId);if(!M.ear_jwe&&M.code){const F=await P(this.createAuthCodeClient.bind(this),Ma,this.logger,this.performanceClient,a)({serverTelemetryManager:gn(this.apiId,this.config.auth.clientId,a,this.browserStorage,this.logger),requestAuthority:n.authority,requestAzureCloudOptions:n.azureCloudOptions,requestExtraQueryParameters:n.extraQueryParameters,account:n.account,authority:f});return P(No,Oo,this.logger,this.performanceClient,a)(S,M,p.verifier,this.apiId,this.config,F,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}else return P(Ag,gg,this.logger,this.performanceClient,a)(S,M,this.apiId,this.config,f,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}logout(){return Promise.reject(ne(ag))}async silentTokenHelper(n,a){const o=a.correlationId,r=await P(ws,As,this.logger,this.performanceClient,o)(this.performanceClient,this.logger,o),d={...a,codeChallenge:r.challenge};if(a.httpMethod===wo.POST)await P(Fk,Wh,this.logger,this.performanceClient,o)(this.config,n.authority,d,this.logger,this.performanceClient);else{const p=await P(Sg,Jf,this.logger,this.performanceClient,o)(this.config,n.authority,d,this.logger,this.performanceClient);await P(Vk,Wh,this.logger,this.performanceClient,o)(p,this.performanceClient,this.logger,o)}const h=this.config.auth.OIDCOptions.responseMode,f=await P(bo,lu,this.logger,this.performanceClient,o)(this.config.system.iframeBridgeTimeout,this.logger,this.browserCrypto,a),v=Zn(el,Wr,this.logger,this.performanceClient,o)(f,h,this.logger,this.correlationId);return P(No,Oo,this.logger,this.performanceClient,o)(a,v,r.verifier,this.apiId,this.config,n,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}}class Jk extends Ho{async acquireToken(n){const a=await P(vg,fg,this.logger,this.performanceClient,n.correlationId)(n,this.config,this.performanceClient,this.logger,this.correlationId),o={...n,...a};n.redirectUri&&(o.redirectUri=cu(n.redirectUri,this.config.auth.redirectUri,this.logger,this.correlationId));const r=gn(Le.acquireTokenSilent_silentFlow,this.config.auth.clientId,this.correlationId,this.browserStorage,this.logger),d=await this.createRefreshTokenClient({serverTelemetryManager:r,authorityUrl:o.authority,azureCloudOptions:o.azureCloudOptions,account:o.account});return P(d.acquireTokenByRefreshToken.bind(d),A_,this.logger,this.performanceClient,n.correlationId)(o,Le.acquireTokenSilent_silentFlow).catch(h=>{throw h.setCorrelationId(this.correlationId),r.cacheFailedRequest(h),h})}logout(){return Promise.reject(ne(ag))}async createRefreshTokenClient(n){const a=await P(this.getClientConfiguration.bind(this),Eu,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:n.serverTelemetryManager,requestAuthority:n.authorityUrl,requestAzureCloudOptions:n.azureCloudOptions,requestExtraQueryParameters:n.extraQueryParameters,account:n.account});return new ew(a,this.performanceClient)}}class Xk extends oS{constructor(n,a){super(n,a),this.includeRedirectUri=!1}}class Zk extends Ho{constructor(n,a,o,r,d,h,f,v,p,S){super(n,a,o,r,d,h,v,p,S),this.apiId=f}async acquireToken(n){if(!n.code)throw ne(xw);const a=await P(wu,Au,this.logger,this.performanceClient,this.correlationId)(n,Ce.Silent,this.config,this.browserCrypto,this.browserStorage,this.logger,this.performanceClient,this.correlationId),o=gn(this.apiId,this.config.auth.clientId,this.correlationId,this.browserStorage,this.logger);try{const r={...a,code:n.code},d=await P(this.getClientConfiguration.bind(this),Eu,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:o,requestAuthority:a.authority,requestAzureCloudOptions:a.azureCloudOptions,requestExtraQueryParameters:a.extraQueryParameters,account:a.account}),h=new Xk(d,this.performanceClient);this.logger.verbose("1uic5e",this.correlationId);const f=new xS(h,this.browserStorage,r,this.logger,this.performanceClient);return await P(f.handleCodeResponseFromServer.bind(f),$C,this.logger,this.performanceClient,this.correlationId)({code:n.code,msgraph_host:n.msGraphHost,cloud_graph_host_name:n.cloudGraphHostName,cloud_instance_host_name:n.cloudInstanceHostName},a,this.apiId,!1)}catch(r){throw r instanceof et&&(r.setCorrelationId(this.correlationId),o.cacheFailedRequest(r)),r}}logout(){return Promise.reject(ne(ag))}}function $k(l,n,a,o){const r=window.msal?.clientIds||[],d=r.length,h=r.filter(f=>f===l).length;h>1&&a.warning("1e88vg",o),n.add({msalInstanceCount:d,sameClientIdInstanceCount:h})}function Vc(l,n,a){try{hg(l)}catch(o){throw n.end({success:!1},o,a),o}}class _g{constructor(n){this.operatingContext=n,this.isBrowserEnvironment=this.operatingContext.isBrowserEnvironment(),this.config=n.getConfig(),this.initialized=!1,this.logger=this.operatingContext.getLogger(),this.networkClient=this.config.system.networkClient,this.navigationClient=this.config.system.navigationClient,this.redirectResponse=new Map,this.hybridAuthCodeResponses=new Map,this.performanceClient=this.config.telemetry.client,this.browserCrypto=this.isBrowserEnvironment?new Qi(this.logger,this.performanceClient):nu,this.eventHandler=new pk(this.logger),this.browserStorage=this.isBrowserEnvironment?new Sf(this.config.auth.clientId,this.config.cache,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler,$0(this.config.auth)):uk(this.config.auth.clientId,this.logger,this.performanceClient,this.eventHandler);const a={cacheLocation:Gn.MemoryStorage,cacheRetentionDays:5};this.nativeInternalStorage=new Sf(this.config.auth.clientId,a,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler),this.activeSilentTokenRequests=new Map,this.trackPageVisibility=this.trackPageVisibility.bind(this),this.trackPageVisibilityWithMeasurement=this.trackPageVisibilityWithMeasurement.bind(this)}static async createController(n,a){const o=new _g(n);return await o.initialize(a),o}trackPageVisibility(n){n&&(this.logger.info("16v6hv",n),this.performanceClient.incrementFields({visibilityChangeCount:1},n))}async initialize(n){const a=this.getRequestCorrelationId(n);if(this.logger.trace("1f7joy",a),this.initialized){this.logger.info("061m5x",a);return}if(!this.isBrowserEnvironment){this.logger.info("19fvpi",a),this.initialized=!0,this.eventHandler.emitEvent(Se.INITIALIZE_END,a);return}const o=this.config.system.allowPlatformBroker,r=this.performanceClient.startMeasurement(W_,a);if(this.eventHandler.emitEvent(Se.INITIALIZE_START,a),this.logMultipleInstances(r,a),await P(this.browserStorage.initialize.bind(this.browserStorage),w_,this.logger,this.performanceClient,a)(a),o)try{this.platformAuthProvider=await Lk(this.logger,this.performanceClient,a,this.config.system.nativeBrokerHandshakeTimeout)}catch(d){this.logger.verbose(d,a)}this.config.cache.cacheLocation===Gn.LocalStorage&&this.eventHandler.subscribeCrossTab(),!this.config.system.navigatePopups&&await this.preGeneratePkceCodes(a),this.initialized=!0,this.eventHandler.emitEvent(Se.INITIALIZE_END,a),r.end({allowPlatformBroker:o,success:!0})}async handleRedirectPromise(n){if(this.logger.verbose("02l8bm",""),_S(this.initialized),this.isBrowserEnvironment){const a=n?.hash||"";let o=this.redirectResponse.get(a);return typeof o>"u"?(o=this.handleRedirectPromiseInternal(n),this.redirectResponse.set(a,o),this.logger.verbose("1wn9kp","")):this.logger.verbose("0w0gm3",""),o}return this.logger.verbose("12xi63",""),null}async handleRedirectPromiseInternal(n){if(!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("0le6uv",""),null;if(this.browserStorage.getInteractionInProgress()?.type===ka.SIGNOUT)return this.logger.verbose("1ywcv2",""),this.browserStorage.setInteractionInProgress(!1),Promise.resolve(null);const o=this.getAllAccounts(),r=this.browserStorage.getCachedNativeRequest(),d=r&&this.platformAuthProvider&&!n?.hash;let h,f;try{if(d&&this.platformAuthProvider){const v=r?.correlationId||"";this.eventHandler.emitEvent(Se.HANDLE_REDIRECT_START,v,Ce.Redirect),h=this.performanceClient.startMeasurement(ef,v),this.logger.trace("12v7is",v);const p=new Xc(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Le.handleRedirectPromise,this.performanceClient,this.platformAuthProvider,r.accountId,this.nativeInternalStorage,r.correlationId);f=P(p.handleRedirectPromise.bind(p),D_,this.logger,this.performanceClient,h.event.correlationId)(this.performanceClient,h.event.correlationId)}else{const[v,p]=this.browserStorage.getCachedRequest(""),S=v.correlationId;this.eventHandler.emitEvent(Se.HANDLE_REDIRECT_START,S,Ce.Redirect),h=this.performanceClient.startMeasurement(ef,S),this.logger.trace("0znzs5",S);const T=this.createRedirectClient(S);f=P(T.handleRedirectPromise.bind(T),x_,this.logger,this.performanceClient,h.event.correlationId)(v,p,h,n)}}catch(v){throw this.browserStorage.resetRequestCache(""),v}return f.then(v=>(v?(this.browserStorage.resetRequestCache(v.correlationId),this.eventHandler.emitEvent(Se.ACQUIRE_TOKEN_SUCCESS,v.correlationId,Ce.Redirect,v),this.logger.verbose("0ui8f5",v.correlationId),o.length<this.getAllAccounts().length&&(this.eventHandler.emitEvent(Se.LOGIN_SUCCESS,v.correlationId,Ce.Redirect,v.account),this.logger.verbose("16im3l",v.correlationId)),h.end({success:!0},void 0,v.account)):h.event.errorCode?h.end({success:!1},void 0):h.discard(),this.eventHandler.emitEvent(Se.HANDLE_REDIRECT_END,h.event.correlationId,Ce.Redirect),v)).catch(v=>{this.browserStorage.resetRequestCache(h.event.correlationId);const p=v;throw this.eventHandler.emitEvent(Se.ACQUIRE_TOKEN_FAILURE,h.event.correlationId,Ce.Redirect,null,p),this.eventHandler.emitEvent(Se.HANDLE_REDIRECT_END,h.event.correlationId,Ce.Redirect),h.end({success:!1},p),v})}async acquireTokenRedirect(n){const a=this.getRequestCorrelationId(n);this.logger.verbose("0os66p",a);const o=this.performanceClient.startMeasurement(Z_,a);o.add({scenarioId:n.scenarioId});const r=this.config.auth.onRedirectNavigate;this.config.auth.onRedirectNavigate=d=>{const h=typeof r=="function"?r(d):void 0;return o.add({navigateCallbackResult:h!==!1}),o.event=o.end({success:!0},void 0,n.account)||o.event,h};try{Vv(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0,ka.SIGNIN),this.eventHandler.emitEvent(Se.ACQUIRE_TOKEN_START,a,Ce.Redirect,n);let d;return this.platformAuthProvider&&this.canUsePlatformBroker(n)?d=new Xc(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Le.acquireTokenRedirect,this.performanceClient,this.platformAuthProvider,this.getNativeAccountId(n),this.nativeInternalStorage,a).acquireTokenRedirect(n,o).catch(f=>{if(f instanceof mi&&Ao(f))return this.platformAuthProvider=void 0,this.createRedirectClient(a).acquireToken(n);if(f instanceof $n)return this.logger.verbose("1ipyz4",a),this.createRedirectClient(a).acquireToken(n);throw f}):d=this.createRedirectClient(a).acquireToken(n),await d}catch(d){throw this.browserStorage.resetRequestCache(a),o.event.status===2?this.performanceClient.startMeasurement(ef,a).end({success:!1},d,n.account):o.end({success:!1},d,n.account),this.eventHandler.emitEvent(Se.ACQUIRE_TOKEN_FAILURE,a,Ce.Redirect,null,d),d}}acquireTokenPopup(n){const a=this.getRequestCorrelationId(n),o=this.performanceClient.startMeasurement(X_,a);o.add({scenarioId:n.scenarioId});try{this.logger.verbose("0ch87b",a),Vc(this.initialized,o,n.account),this.browserStorage.setInteractionInProgress(!0,ka.SIGNIN,n.overrideInteractionInProgress,a)}catch(f){return Promise.reject(f)}const r=this.getAllAccounts();this.eventHandler.emitEvent(Se.ACQUIRE_TOKEN_START,a,Ce.Popup,n);let d;const h=this.getPreGeneratedPkceCodes(a);return this.canUsePlatformBroker(n)?d=this.acquireTokenNative({...n,correlationId:a},Le.acquireTokenPopup).then(f=>(o.end({success:!0,isNativeBroker:!0},void 0,f.account),f)).catch(f=>{if(f instanceof mi&&Ao(f))return this.platformAuthProvider=void 0,this.createPopupClient(a).acquireToken(n,h);if(f instanceof $n)return this.logger.verbose("0yy5fw",a),this.createPopupClient(a).acquireToken(n,h);throw f}):d=this.createPopupClient(a).acquireToken(n,h),d.then(f=>{const v=r.length<this.getAllAccounts().length;return this.eventHandler.emitEvent(Se.ACQUIRE_TOKEN_SUCCESS,a,Ce.Popup,f),v&&this.eventHandler.emitEvent(Se.LOGIN_SUCCESS,a,Ce.Popup,f.account),o.end({success:!0,accessTokenSize:f.accessToken.length,idTokenSize:f.idToken.length},void 0,f.account),f}).catch(f=>(this.eventHandler.emitEvent(Se.ACQUIRE_TOKEN_FAILURE,a,Ce.Popup,null,f),o.end({success:!1},f,n.account),Promise.reject(f))).finally(async()=>{this.browserStorage.setInteractionInProgress(!1),this.config.system.navigatePopups||await this.preGeneratePkceCodes(a)})}trackPageVisibilityWithMeasurement(){const n=this.ssoSilentMeasurement||this.acquireTokenByCodeAsyncMeasurement;n&&n.increment({visibilityChangeCount:1})}async ssoSilent(n){const a=this.getRequestCorrelationId(n),o={...n,prompt:n.prompt,correlationId:a};this.ssoSilentMeasurement=this.performanceClient.startMeasurement($_,a),this.ssoSilentMeasurement?.add({scenarioId:n.scenarioId}),Vc(this.initialized,this.ssoSilentMeasurement,n.account),this.ssoSilentMeasurement?.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement);const r=this.getAllAccounts();this.logger.verbose("0w1b45",a),this.eventHandler.emitEvent(Se.ACQUIRE_TOKEN_START,a,Ce.Silent,o);let d;return this.canUsePlatformBroker(o)?d=this.acquireTokenNative(o,Le.ssoSilent).catch(h=>{if(h instanceof mi&&Ao(h))return this.platformAuthProvider=void 0,this.createSilentIframeClient(o.correlationId).acquireToken(o);throw h}):d=this.createSilentIframeClient(o.correlationId).acquireToken(o),d.then(h=>{const f=r.length<this.getAllAccounts().length;return this.eventHandler.emitEvent(Se.ACQUIRE_TOKEN_SUCCESS,a,Ce.Silent,h),f&&this.eventHandler.emitEvent(Se.LOGIN_SUCCESS,a,Ce.Silent,h.account),this.ssoSilentMeasurement?.end({success:!0,isNativeBroker:h.fromPlatformBroker,accessTokenSize:h.accessToken.length,idTokenSize:h.idToken.length},void 0,h.account),h}).catch(h=>{throw this.eventHandler.emitEvent(Se.ACQUIRE_TOKEN_FAILURE,a,Ce.Silent,null,h),this.ssoSilentMeasurement?.end({success:!1},h,n.account),h}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenByCode(n){const a=this.getRequestCorrelationId(n);this.logger.trace("0ch6ga",a);const o=this.performanceClient.startMeasurement(J_,a);Vc(this.initialized,o),this.eventHandler.emitEvent(Se.ACQUIRE_TOKEN_START,a,Ce.Silent,n),o.add({scenarioId:n.scenarioId});try{if(n.code&&n.nativeAccountId)throw ne(Uw);if(n.code){const r=n.code;let d=this.hybridAuthCodeResponses.get(r);return d?(this.logger.verbose("0qgp28",a),o.discard()):(this.logger.verbose("06eh73",a),d=this.acquireTokenByCodeAsync({...n,correlationId:a}).then(h=>(this.eventHandler.emitEvent(Se.ACQUIRE_TOKEN_SUCCESS,a,Ce.Silent,h),this.hybridAuthCodeResponses.delete(r),o.end({success:!0,isNativeBroker:h.fromPlatformBroker,accessTokenSize:h.accessToken.length,idTokenSize:h.idToken.length},void 0,h.account),h)).catch(h=>{throw this.hybridAuthCodeResponses.delete(r),this.eventHandler.emitEvent(Se.ACQUIRE_TOKEN_FAILURE,a,Ce.Silent,null,h),o.end({success:!1},h),h}),this.hybridAuthCodeResponses.set(r,d)),await d}else if(n.nativeAccountId)if(this.canUsePlatformBroker(n,n.nativeAccountId)){const r=await this.acquireTokenNative({...n,correlationId:a},Le.acquireTokenByCode,n.nativeAccountId).catch(d=>{throw d instanceof mi&&Ao(d)&&(this.platformAuthProvider=void 0),d});return o.end({success:!0},void 0,r.account),r}else throw ne(jw);else throw ne(Dw)}catch(r){throw this.eventHandler.emitEvent(Se.ACQUIRE_TOKEN_FAILURE,a,Ce.Silent,null,r),o.end({success:!1},r),r}}async acquireTokenByCodeAsync(n){const a=this.getRequestCorrelationId(n);return this.logger.trace("10d9hy",a),this.acquireTokenByCodeAsyncMeasurement=this.performanceClient.startMeasurement(M_,a),this.acquireTokenByCodeAsyncMeasurement?.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),await this.createSilentAuthCodeClient(a).acquireToken(n).then(d=>(this.acquireTokenByCodeAsyncMeasurement?.end({success:!0,fromCache:d.fromCache,isNativeBroker:d.fromPlatformBroker}),d)).catch(d=>{throw this.acquireTokenByCodeAsyncMeasurement?.end({success:!1},d),d}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenFromCache(n,a){switch(a){case $t.Default:case $t.AccessToken:case $t.AccessTokenAndRefreshToken:const o=this.createSilentCacheClient(n.correlationId);return P(o.acquireToken.bind(o),C_,this.logger,this.performanceClient,n.correlationId)(n);default:throw q(ps)}}async acquireTokenByRefreshToken(n,a){switch(a){case $t.Default:case $t.AccessTokenAndRefreshToken:case $t.RefreshToken:case $t.RefreshTokenAndNetwork:const o=this.createSilentRefreshClient(n.correlationId);return P(o.acquireToken.bind(o),E_,this.logger,this.performanceClient,n.correlationId)(n);default:throw q(ps)}}async acquireTokenBySilentIframe(n){const a=this.createSilentIframeClient(n.correlationId);return P(a.acquireToken.bind(a),S_,this.logger,this.performanceClient,n.correlationId)(n)}async logoutRedirect(n){const a=this.getRequestCorrelationId(n);return Vv(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0,ka.SIGNOUT),this.createRedirectClient(a).logout(n)}logoutPopup(n){try{const a=this.getRequestCorrelationId(n);return hg(this.initialized),this.browserStorage.setInteractionInProgress(!0,ka.SIGNOUT),this.createPopupClient(a).logout(n).finally(()=>{this.browserStorage.setInteractionInProgress(!1)})}catch(a){return Promise.reject(a)}}async clearCache(n){if(!this.isBrowserEnvironment)return;const a=this.getRequestCorrelationId(n);return this.createSilentCacheClient(a).logout(n)}getAllAccounts(n){return dk(this.logger,this.browserStorage,this.isBrowserEnvironment,this.getRequestCorrelationId(),n)}getAccount(n){return hk(n,this.logger,this.browserStorage,this.getRequestCorrelationId())}setActiveAccount(n){fk(n,this.browserStorage,this.getRequestCorrelationId())}getActiveAccount(){return gk(this.browserStorage,this.getRequestCorrelationId())}async hydrateCache(n,a){this.logger.verbose("16jycr",n.correlationId);const o=Wb(n.account,n.cloudGraphHostName,n.msGraphHost);return await this.browserStorage.setAccount(o,n.correlationId,ys(n.idTokenClaims),Le.hydrateCache),n.fromPlatformBroker?(this.logger.verbose("1fxyu8",n.correlationId),this.nativeInternalStorage.hydrateCache(n,a)):this.browserStorage.hydrateCache(n,a)}async acquireTokenNative(n,a,o,r){const d=this.getRequestCorrelationId(n);if(this.logger.trace("0b9y3p",d),!this.platformAuthProvider)throw ne(yS);return new Xc(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,a,this.performanceClient,this.platformAuthProvider,o||this.getNativeAccountId(n),this.nativeInternalStorage,d).acquireToken(n,r)}canUsePlatformBroker(n,a){const o=this.getRequestCorrelationId(n);if(this.logger.trace("1n9lbl",o),!this.platformAuthProvider)return this.logger.trace("0vnu11",o),!1;if(!ll(this.config,this.logger,o,this.platformAuthProvider,n.authenticationScheme))return this.logger.trace("1m4bzf",o),!1;if(n.prompt)switch(n.prompt){case hn.NONE:case hn.CONSENT:case hn.LOGIN:this.logger.trace("0vdv8e",o);break;default:return this.logger.trace("0pdzw6",o),!1}return!a&&!this.getNativeAccountId(n)?(this.logger.trace("16lbtk",o),!1):!0}getNativeAccountId(n){const a=n.account||this.getAccount({loginHint:n.loginHint,sid:n.sid})||this.getActiveAccount();return a&&a.nativeAccountId||""}createPopupClient(n){return new Kk(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,n,this.platformAuthProvider)}createRedirectClient(n){return new Gk(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,n,this.platformAuthProvider)}createSilentIframeClient(n){return new qk(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Le.ssoSilent,this.performanceClient,this.nativeInternalStorage,n,this.platformAuthProvider)}createSilentCacheClient(n){return new DS(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,n,this.platformAuthProvider)}createSilentRefreshClient(n){return new Jk(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,n,this.platformAuthProvider)}createSilentAuthCodeClient(n){return new Zk(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Le.acquireTokenByCode,this.performanceClient,n,this.platformAuthProvider)}addEventCallback(n,a){return this.eventHandler.addEventCallback(n,a)}removeEventCallback(n){this.eventHandler.removeEventCallback(n)}addPerformanceCallback(n){return wS(),this.performanceClient.addPerformanceCallback(n)}removePerformanceCallback(n){return this.performanceClient.removePerformanceCallback(n)}getLogger(){return this.logger}setLogger(n){this.logger=n}initializeWrapperLibrary(n,a){this.browserStorage.setWrapperMetadata(n,a)}setNavigationClient(n){this.navigationClient=n}getConfiguration(){return this.config}getPerformanceClient(){return this.performanceClient}isBrowserEnv(){return this.isBrowserEnvironment}getRequestCorrelationId(n){return n?.correlationId?n.correlationId:this.isBrowserEnvironment?Es():""}async loginRedirect(n){const a=this.getRequestCorrelationId(n);return this.logger.verbose("0lz9hf",a),this.acquireTokenRedirect({correlationId:a,...n||Hv})}loginPopup(n){const a=this.getRequestCorrelationId(n);return this.logger.verbose("0qw7v5",a),this.acquireTokenPopup({correlationId:a,...n||Hv})}async acquireTokenSilent(n){const a=this.getRequestCorrelationId(n),o=this.performanceClient.startMeasurement(q_,a);o.add({cacheLookupPolicy:n.cacheLookupPolicy,scenarioId:n.scenarioId}),Vc(this.initialized,o,n.account),this.logger.verbose("0x1c4s",a);const r=n.account||this.getActiveAccount();if(!r)throw ne(Ow);return this.acquireTokenSilentDeduped(n,r,a).then(d=>(o.end({success:!0,fromCache:d.fromCache,isNativeBroker:d.fromPlatformBroker,accessTokenSize:d.accessToken.length,idTokenSize:d.idToken.length},void 0,d.account),{...d,state:n.state,correlationId:a})).catch(d=>{throw d instanceof et&&d.setCorrelationId(a),o.end({success:!1},d,r),d})}async acquireTokenSilentDeduped(n,a,o){const r=yu(this.config.auth.clientId,{...n,authority:n.authority||this.config.auth.authority},a.homeAccountId),d=JSON.stringify(r),h=this.activeSilentTokenRequests.get(d);if(typeof h>"u"){this.logger.verbose("0fcjbk",o),this.performanceClient.addFields({deduped:!1},o);const f=P(this.acquireTokenSilentAsync.bind(this),p_,this.logger,this.performanceClient,o)({...n,correlationId:o},a);return this.activeSilentTokenRequests.set(d,f),f.finally(()=>{this.activeSilentTokenRequests.delete(d)})}else return this.logger.verbose("1yq7nb",o),this.performanceClient.addFields({deduped:!0},o),h}async acquireTokenSilentAsync(n,a){const o=()=>this.trackPageVisibility(n.correlationId);this.eventHandler.emitEvent(Se.ACQUIRE_TOKEN_START,n.correlationId,Ce.Silent,n),n.correlationId&&this.performanceClient.incrementFields({visibilityChangeCount:0},n.correlationId),document.addEventListener("visibilitychange",o);const r=await P(yk,b_,this.logger,this.performanceClient,n.correlationId)(n,a,this.config,this.performanceClient,this.logger),d=n.cacheLookupPolicy||$t.Default;return this.acquireTokenSilentNoIframe(r,d).catch(async f=>{if(Wk(f,d)){const p=`${f.errorCode}${f.subError?`|${f.subError}`:""}`;if(this.performanceClient.addFields({silentRefreshReason:p},n.correlationId),this.activeIframeRequest)if(d!==$t.Skip){const[S,T]=this.activeIframeRequest;this.logger.verbose("1w8fso",r.correlationId);const k=this.performanceClient.startMeasurement(T_,r.correlationId);k.add({awaitIframeCorrelationId:T});const M=await S;if(k.end({success:M}),M)return this.logger.verbose("0ywzzi",r.correlationId),this.acquireTokenSilentNoIframe(r,d);throw this.logger.info("17y14q",r.correlationId),f}else return this.logger.warning("1bd4p8",r.correlationId),P(this.acquireTokenBySilentIframe.bind(this),Fv,this.logger,this.performanceClient,r.correlationId)(r);else{let S;return this.activeIframeRequest=[new Promise(T=>{S=T}),r.correlationId],this.logger.verbose("0rh08z",r.correlationId),P(this.acquireTokenBySilentIframe.bind(this),Fv,this.logger,this.performanceClient,r.correlationId)(r).then(T=>(S(!0),T)).catch(T=>{throw S(!1),T}).finally(()=>{this.activeIframeRequest=void 0})}}else throw f}).then(f=>(this.eventHandler.emitEvent(Se.ACQUIRE_TOKEN_SUCCESS,n.correlationId,Ce.Silent,f),n.correlationId&&this.performanceClient.addFields({fromCache:f.fromCache,isNativeBroker:f.fromPlatformBroker},n.correlationId),f)).catch(f=>{throw this.eventHandler.emitEvent(Se.ACQUIRE_TOKEN_FAILURE,n.correlationId,Ce.Silent,null,f),f}).finally(()=>{document.removeEventListener("visibilitychange",o)})}async acquireTokenSilentNoIframe(n,a){return ll(this.config,this.logger,n.correlationId,this.platformAuthProvider,n.authenticationScheme)&&n.account.nativeAccountId?(this.logger.verbose("0sczo4",n.correlationId),this.acquireTokenNative(n,Le.acquireTokenSilent_silentFlow,n.account.nativeAccountId,a).catch(async o=>{throw o instanceof mi&&Ao(o)?(this.logger.verbose("07rkmb",n.correlationId),this.platformAuthProvider=void 0,q(ps)):o})):(this.logger.verbose("0ox81t",n.correlationId),a===$t.AccessToken&&this.logger.verbose("0fvwxe",n.correlationId),P(this.acquireTokenFromCache.bind(this),g_,this.logger,this.performanceClient,n.correlationId)(n,a).catch(o=>{if(a===$t.AccessToken)throw o;return this.eventHandler.emitEvent(Se.ACQUIRE_TOKEN_NETWORK_START,n.correlationId,Ce.Silent,n),P(this.acquireTokenByRefreshToken.bind(this),m_,this.logger,this.performanceClient,n.correlationId)(n,a)}))}async preGeneratePkceCodes(n){return this.logger.verbose("1x6uj6",n),this.pkceCode=await P(ws,As,this.logger,this.performanceClient,n)(this.performanceClient,this.logger,n),Promise.resolve()}getPreGeneratedPkceCodes(n){const a=this.pkceCode?{...this.pkceCode}:void 0;return this.pkceCode=void 0,a?this.logger.verbose("12js1o",n):this.logger.verbose("1oe9ci",n),this.performanceClient.addFields({usePreGeneratedPkce:!!a},n),a}logMultipleInstances(n,a){const o=this.config.auth.clientId;if(!window)return;window.msal=window.msal||{},window.msal.clientIds=window.msal.clientIds||[],window.msal.clientIds.length>0&&this.logger.verbose("1qtz3l",a),window.msal.clientIds.push(o),$k(o,n,this.logger,a)}}function Wk(l,n){const a=!(l instanceof $n&&l.subError!==qf),o=l.errorCode===Bn.INVALID_GRANT_ERROR||l.errorCode===ps,r=a&&o||l.errorCode===ff||l.errorCode===JC,d=mw.includes(n);return r&&d}class kg{static loggerCallback(n,a){switch(n){case rt.Error:console.error(a);return;case rt.Info:console.info(a);return;case rt.Verbose:console.debug(a);return;case rt.Warning:console.warn(a);return;default:console.log(a);return}}constructor(n){this.browserEnvironment=typeof window<"u",this.config=zk(n,this.browserEnvironment);let a;try{a=window[Gn.SessionStorage]}catch{}const o=a?.getItem(tk),r=a?.getItem(nk)?.toLowerCase(),d=r==="true"?!0:r==="false"?!1:void 0,h={...this.config.system.loggerOptions},f=o&&Object.keys(rt).includes(o)?rt[o]:void 0;f&&(h.loggerCallback=kg.loggerCallback,h.logLevel=f),d!==void 0&&(h.piiLoggingEnabled=d),this.logger=new yi(h,ck,bs),this.available=!1}getConfig(){return this.config}getLogger(){return this.logger}isAvailable(){return this.available}isBrowserEnvironment(){return this.browserEnvironment}}class xo extends kg{getModuleName(){return xo.MODULE_NAME}getId(){return xo.ID}async initialize(n){return this.available=typeof window<"u",this.available}}xo.MODULE_NAME="";xo.ID="StandardOperatingContext";class eO{constructor(n,a){this.controller=a||new _g(new xo(n))}async initialize(n){return this.controller.initialize(n)}async acquireTokenPopup(n){return this.controller.acquireTokenPopup(n)}acquireTokenRedirect(n){return this.controller.acquireTokenRedirect(n)}acquireTokenSilent(n){return this.controller.acquireTokenSilent(n)}acquireTokenByCode(n){return this.controller.acquireTokenByCode(n)}addEventCallback(n,a){return this.controller.addEventCallback(n,a)}removeEventCallback(n){return this.controller.removeEventCallback(n)}addPerformanceCallback(n){return this.controller.addPerformanceCallback(n)}removePerformanceCallback(n){return this.controller.removePerformanceCallback(n)}getAccount(n){return this.controller.getAccount(n)}getAllAccounts(n){return this.controller.getAllAccounts(n)}handleRedirectPromise(n){return this.controller.handleRedirectPromise(n)}loginPopup(n){return this.controller.loginPopup(n)}loginRedirect(n){return this.controller.loginRedirect(n)}logoutRedirect(n){return this.controller.logoutRedirect(n)}logoutPopup(n){return this.controller.logoutPopup(n)}ssoSilent(n){return this.controller.ssoSilent(n)}getLogger(){return this.controller.getLogger()}setLogger(n){this.controller.setLogger(n)}setActiveAccount(n){this.controller.setActiveAccount(n)}getActiveAccount(){return this.controller.getActiveAccount()}initializeWrapperLibrary(n,a){return this.controller.initializeWrapperLibrary(n,a)}setNavigationClient(n){this.controller.setNavigationClient(n)}getConfiguration(){return this.controller.getConfiguration()}async hydrateCache(n,a){return this.controller.hydrateCache(n,a)}clearCache(n){return this.controller.clearCache(n)}}const Og=typeof window<"u"&&!!window.electronOutlook,tO=Og?null:{auth:{clientId:"893adac7-4ea6-44e3-b2fe-e7bd49f64814",authority:"https://login.microsoftonline.com/d8d598e0-2fb2-4605-8514-1967b50e2bd6",redirectUri:window.location.origin+window.location.pathname},cache:{cacheLocation:"localStorage",storeAuthStateInCookie:!1}},zS=["Calendars.ReadWrite.Shared"],nO="https://graph.microsoft.com/v1.0";let LS=null;const Fc=Og?null:new eO(tO),iO=!Og&&Fc?Fc.initialize().then(()=>Fc.handleRedirectPromise()).then(l=>(l&&console.log("MSAL redirect login succeeded:",l.account?.username),Fc)).catch(l=>(console.error("MSAL init failed:",l),LS=l?.message||String(l),null)):Promise.resolve(null);function aO(){return LS}async function sO(){return iO}async function oO(l){const n=l.getAllAccounts();if(n.length===0)return null;try{return(await l.acquireTokenSilent({scopes:zS,account:n[0]})).accessToken}catch{return null}}function rO(l){l.loginRedirect({scopes:zS})}async function lO(l){l.getAllAccounts().length>0&&l.clearCache()}async function cO(l,n,a){const o=new URLSearchParams({startDateTime:`${n}T00:00:00`,endDateTime:`${a}T23:59:59`,$top:"100",$select:"subject,start,end,showAs,isAllDay,isCancelled,attendees,categories",$orderby:"start/dateTime"}),r=[];let d=`${nO}/me/calendarView?${o}`;for(;d;){const h=await fetch(d,{headers:{Authorization:`Bearer ${l}`}});if(!h.ok)throw h.status===401?new Error("outlook_token_expired"):new Error(`Graph API error: ${h.status}`);const f=await h.json();r.push(...f.value||[]),d=f["@odata.nextLink"]||null}return r}const uO={busy:"BUSY",oof:"OOF",tentative:"TENTATIVE",free:"FREE",workingElsewhere:"WORKING-ELSEWHERE",unknown:"BUSY"};function BS(l){const n=l.start.timeZone==="UTC"?"Z":"",a=l.end.timeZone==="UTC"?"Z":"",o=new Date(l.start.dateTime+n),r=new Date(l.end.dateTime+a),d=o.getFullYear()+"-"+String(o.getMonth()+1).padStart(2,"0")+"-"+String(o.getDate()).padStart(2,"0"),h=String(o.getHours()).padStart(2,"0")+":"+String(o.getMinutes()).padStart(2,"0"),f=String(r.getHours()).padStart(2,"0")+":"+String(r.getMinutes()).padStart(2,"0");return{name:l.subject||"Outlook Event",date:d,start:h,end:f,status:uO[l.showAs]||"BUSY",isMeeting:(l.attendees?.length||0)>0,categories:l.categories||[],isAllDay:l.isAllDay||!1,isCancelled:l.isCancelled||!1,graphId:l.id}}const dO=Object.freeze(Object.defineProperty({__proto__:null,acquireTokenSilent:oO,fetchCalendarEvents:cO,getInitializedMsal:sO,getMsalInitError:aO,graphEventToParsedFormat:BS,loginRedirect:rO,logout:lO},Symbol.toStringTag,{value:"Module"})),Vi=typeof window<"u"&&window.electronOutlook,Xr=Vi?Promise.resolve(null):UE(()=>Promise.resolve().then(()=>dO),void 0,import.meta.url).catch(()=>null);function hO({events:l,setEvents:n,settings:a,pushUndo:o,minDate:r,maxDate:d,tags:h}){const[f,v]=j.useState(!1),[p,S]=j.useState("idle"),[T,k]=j.useState(null),[M,F]=j.useState(null),[J,ve]=j.useState(null),[W,de]=j.useState(null),ae=j.useRef(null),Ie=j.useRef(!1),se=j.useRef(null),ee=j.useRef(null);j.useEffect(()=>{let me=!1;return Vi?Vi.checkAccount().then(fe=>{!me&&fe&&v(!0)}):Xr.then(fe=>{if(!(me||!fe))return fe.getInitializedMsal().then(D=>{if(!me){if(!D){S("error"),k(fe.getMsalInitError?.()||"MSAL failed to initialize");return}ae.current=D,D.getAllAccounts().length>0&&v(!0)}})}),()=>{me=!0}},[]);const re=j.useCallback(async()=>{if(Vi){S("fetching"),k(null);try{await Vi.connect(),v(!0),S("idle")}catch(me){S("error"),k(me.message||"Connection failed")}}else{if(!ae.current){const fe=await Xr;S("error"),k(fe?.getMsalInitError?.()||"MSAL not ready  try refreshing the page");return}(await Xr)?.loginRedirect(ae.current)}},[]),Ae=j.useCallback(async()=>{if(o(),n(me=>me.filter(fe=>!fe.outlookSynced)),Vi)await Vi.disconnect();else if(ae.current){const me=await Xr;try{await me?.logout(ae.current)}catch{}}v(!1),S("idle"),k(null),F(null)},[o,n]),Re=j.useCallback((me,fe)=>{o(),n(D=>{const Y=fe?D.filter($=>!$.outlookSynced):D,te=[];for(const $ of me)Y.some(A=>A.name===$.name&&A.start===$.start&&A.end===$.end&&A.date===$.date)||te.push($);return[...Y,...te]}),F(new Date),S("idle"),ve(null),de(null),se.current=null,ee.current=null},[o,n]),Ye=j.useCallback((me,fe)=>{const Y=me.filter(ie=>!ie.categories||ie.categories.length===0?!0:!ie.categories.some(A=>fe.some(R=>R.include===!1&&R.category.toLowerCase()===A.toLowerCase()))).map((ie,A)=>{let R=null;if(ie.categories?.length>0)for(const Q of ie.categories){const H=fe.find(X=>X.include!==!1&&X.tagId&&X.category.toLowerCase()===Q.toLowerCase());if(H){R=H.tagId;break}}return{id:Date.now()+A,name:ie.name,start:ie.start,end:ie.end,date:ie.date,tagId:R,outlookSynced:!0}}),te=a.icsReplaceOnImport;if(te==="ask"){const ie={newEvents:Y};ee.current=ie,de(ie);return}Re(Y,te==="yes"||te===!0)},[o,n,a,Re]),tt=j.useCallback(me=>{const fe=se.current;fe&&Ye(fe.filteredEvents,me)},[Ye]),Ue=j.useCallback(me=>{const fe=ee.current;fe&&Re(fe.newEvents,me)},[Re]),be=j.useCallback(async()=>{if(!Ie.current){Ie.current=!0,S("fetching"),k(null);try{let me;if(Vi)me=await Vi.fetchEvents(r,d);else{if(!ae.current)throw new Error("Not connected");const H=await Xr;let X=await H.acquireTokenSilent(ae.current);if(!X){H.loginRedirect(ae.current);return}me=await H.fetchCalendarEvents(X,r,d)}const fe=me.filter(H=>!H.isCancelled).map(BS).filter(H=>!H.isAllDay).filter(H=>H.start!==H.end),D={...a,icsCategoryRules:[]},Y=lC(fe,D,r,d);if(Y.length===0){o(),n(H=>H.filter(X=>!X.outlookSynced)),F(new Date),S("idle");return}const te={};let $=0;for(const H of Y)if(H.categories?.length>0)for(const X of H.categories)te[X]=(te[X]||0)+1;else $++;const ie=Object.keys(te).sort();if(ie.length===0){Ye(Y,[]);return}const A=a.icsCategoryRules||[];if(ie.every(H=>A.some(X=>X.category.toLowerCase()===H.toLowerCase()))){Ye(Y,A);return}const Q={filteredEvents:Y,catCounts:te,uncategorized:$};se.current=Q,ve(Q),S("idle")}catch(me){S("error"),k(me.message)}finally{Ie.current=!1}}},[r,d,a,o,n,Ye]);return j.useEffect(()=>{f&&be()},[f,r,d]),j.useEffect(()=>{if(!f)return;const me=setInterval(be,300*1e3);return()=>clearInterval(me)},[f,be]),{outlookAvailable:!0,outlookConnected:f,outlookStatus:p,outlookError:T,lastFetched:M,connectOutlook:re,disconnectOutlook:Ae,refreshOutlookEvents:be,pendingOutlookImport:J,finishOutlookImport:tt,pendingOutlookReplace:W,finishOutlookReplace:Ue}}const fO=Object.freeze(Object.defineProperty({__proto__:null,useOutlook:hO},Symbol.toStringTag,{value:"Module"}));function gO(){return{syncIndicator:null,syncSettingsUI:null}}function mO(){return{outlookAvailable:!1,outlookConnected:!1,outlookStatus:"idle",outlookError:null,lastFetched:null,connectOutlook:()=>{},disconnectOutlook:()=>{},refreshOutlookEvents:()=>{},pendingOutlookImport:null,finishOutlookImport:()=>{},pendingOutlookReplace:null,finishOutlookReplace:()=>{}}}const pO=typeof window<"u"&&!!window.electronOutlook,aC=Object.assign({"./useSync.jsx":ME}),yO=!pO&&aC["./useSync.jsx"]?.useSync?aC["./useSync.jsx"].useSync:gO,vO=Object.assign({"./useOutlook.jsx":fO}),CO=vO["./useOutlook.jsx"]?.useOutlook??mO,SO="2026-02-27 03:14 PM CT";function KS(l){const n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(l);return n?{r:parseInt(n[1],16),g:parseInt(n[2],16),b:parseInt(n[3],16)}:{r:148,g:163,b:184}}function TO(l,n,a){const{r:o,g:r,b:d}=KS(l),h=a?{r:30,g:41,b:59}:{r:255,g:255,b:255},f=(v,p)=>Math.round(v*n+p*(1-n));return`rgb(${f(o,h.r)}, ${f(r,h.g)}, ${f(d,h.b)})`}function EO(l,n,a){const{r:o,g:r,b:d}=KS(l),h=a?{r:30,g:41,b:59}:{r:255,g:255,b:255},f={r:o*n+h.r*(1-n),g:r*n+h.g*(1-n),b:d*n+h.b*(1-n)};return(f.r*299+f.g*587+f.b*114)/1e3>150?"#1a1a1a":"#ffffff"}function AO(l,n){const[a]=l.split(":").map(Number),[o]=n.split(":").map(Number),r=l.split(":")[1];return a>=19&&a<=23&&o!==a-12?`${(a-12).toString().padStart(2,"0")}:${r}`:a>=1&&a<=6&&o!==a+12?`${(a+12).toString().padStart(2,"0")}:${r}`:l}const ba=[.5,.75,1,1.5,2,3],tf={small:{title:"0.7rem",time:"0.55rem",label:"Small"},medium:{title:"0.8rem",time:"0.65rem",label:"Medium"},large:{title:"0.95rem",time:"0.75rem",label:"Large"},xlarge:{title:"1.1rem",time:"0.85rem",label:"Extra Large"}},sC={workdayStart:"09:00",workdayEnd:"17:00",useExtendedHours:!0,extendedStart:"06:00",extendedEnd:"23:59",autoStartNext:!1,darkMode:!1,zoomLevel:1.5,fitMode:!0,smartDuration:!0,defaultTaskDuration:30,defaultEventDuration:60,defaultTaskColor:"#94a3b8",defaultEventColor:"#94a3b8",minFragmentMinutes:5,calendarFontSize:"medium",wrapListNames:!0,restrictTasksToWorkHours:!0,debugMode:!1,debugTimeOffset:0,icsImportBusy:!0,icsImportOof:!0,icsImportTentative:!1,icsImportFree:!1,icsImportWorkingElsewhere:!1,icsImportMeetingsOnly:!1,icsReplaceOnImport:"no",icsCategoryRules:[]},oC=["zoomLevel","fitMode","debugMode","debugTimeOffset","darkMode"],bO=[{id:1,name:"Epic Medical Center",color:"#ef4444"},{id:2,name:"Verona Hospital",color:"#667eea"},{id:3,name:"Fitchburg Health",color:"#10b981"},{id:4,name:"Internal",color:"#f59e0b"}],wO=[{id:1,name:"Tech note review",duration:30,adjustedDuration:null,completed:!1,tagId:null,pausedElapsed:0},{id:2,name:"Sherlock #12345678",duration:75,adjustedDuration:null,completed:!1,tagId:3,pausedElapsed:0},{id:3,name:"Firewatch investigation",duration:60,adjustedDuration:null,completed:!1,tagId:1,pausedElapsed:0}],_O=[{id:1,name:"EMC check-in",start:"11:00",end:"11:30",tagId:1},{id:2,name:"Workgroup meeting",start:"13:30",end:"14:30",tagId:4},{id:3,name:"Verona Hospital office hours",start:"15:00",end:"16:00",tagId:2}];function nf(){const l=localStorage.getItem("timekerper-activeTaskId");if(!l||l==="null")return null;const n=JSON.parse(l),a=localStorage.getItem("timekerper-tasks");if(!a)return null;const r=JSON.parse(a).find(J=>J.id===n&&!J.completed);if(!r||r.startedAtMin==null)return null;const d=localStorage.getItem("timekerper-settings"),h=d?JSON.parse(d):{},f=h.debugMode&&h.debugTimeOffset||0,v=cn()+f,p=localStorage.getItem("timekerper-events"),S=p?JSON.parse(p):[],T=r.startedAtDate||ft(),k=r.pauseEvents&&r.pauseEvents.length>0,M=Af(S,r.pauseEvents||[],r.startedAtMin,v,T)+(k?0:r.pauseGapMinutes||0),F=Math.max(0,v-r.startedAtMin-M);return{id:n,taskStartTime:Date.now()-F*6e4,elapsedMinutes:F}}function kO(l,n){const a=ft(),o=l.map(d=>{let h=d;return d.startedAtMin!=null&&!d.startedAtDate&&(h={...h,startedAtDate:a}),d.workSegments?.some(f=>!f.date)&&(h={...h,workSegments:h.workSegments.map(f=>f.date?f:{...f,date:a})}),d.pauseEvents?.some(f=>!f.date)&&(h={...h,pauseEvents:h.pauseEvents.map(f=>f.date?f:{...f,date:a})}),h}),r=n.map(d=>d.date?d:{...d,date:a});return{tasks:o,events:r}}function OO(){const l=localStorage.getItem("timekerper-tasks"),n=localStorage.getItem("timekerper-events"),a=l?JSON.parse(l):wO,o=n?JSON.parse(n):_O;if(parseInt(localStorage.getItem("timekerper-migrationVersion")||"0")<1){const d=kO(a,o);return localStorage.setItem("timekerper-tasks",JSON.stringify(d.tasks)),localStorage.setItem("timekerper-events",JSON.stringify(d.events)),localStorage.setItem("timekerper-migrationVersion","1"),d}return{tasks:a,events:o}}const rC=OO();function IO(){const[l,n]=j.useState(rC.tasks),[a,o]=j.useState(rC.events),[r,d]=j.useState(()=>{const m=localStorage.getItem("timekerper-settings"),E=m?{...sC,...JSON.parse(m)}:sC;return typeof E.darkMode!="boolean"&&(E.darkMode=E.darkMode==="on"||E.darkMode===!0),E}),[h,f]=j.useState(()=>{const m=localStorage.getItem("timekerper-tags");return m?JSON.parse(m):bO}),[v,p]=j.useState(()=>nf()?.id??null),[S,T]=j.useState(()=>nf()?.taskStartTime??null),[k,M]=j.useState(()=>nf()?.elapsedMinutes??0),F=r.debugMode&&r.debugTimeOffset||0,[J,ve]=j.useState(cn()+F),[W,de]=j.useState(ft()),[ae,Ie]=j.useState(()=>localStorage.getItem("tk_calendarView")||"1day"),se=j.useRef(ft()),ee=ft(),re=W===ee,Re=(new Date(ee+"T12:00:00").getDay()+6)%7,Ye=ln(ee,-Re),tt=ln(ee,-1),Ue=Ye<tt?Ye:tt,be=ln(ee,7),[me,fe]=j.useState(!1),[D,Y]=j.useState(!1),[te,$]=j.useState(!1),[ie,A]=j.useState(!1),[R,Q]=j.useState(null),[H,X]=j.useState(null),[le,ye]=j.useState(!0),[it,je]=j.useState(!1),[Rt,vi]=j.useState("all"),[pt,mn]=j.useState(null),[_t,yt]=j.useState([]),[Da,ks]=j.useState(null),[ei,qi]=j.useState(""),[Ua,ja]=j.useState(30),[Os,Is]=j.useState(null),[Gt,gl]=j.useState(!1),[zo,Rs]=j.useState(""),[pn,Lo]=j.useState("09:00"),[Ha,za]=j.useState("10:00"),[Ns,ti]=j.useState(null),[Nt,In]=j.useState(ft()),[Qt,Bo]=j.useState(!1),[Ko,Po]=j.useState(""),[La,Ci]=j.useState(null),ni=j.useRef(!1),ii=j.useRef(null),Ba=j.useRef(null),Si=j.useRef(null),Go=j.useRef(null),Vo=j.useRef(null),Ms=j.useRef(null),[Ka,_u]=j.useState(320),[ml,pl]=j.useState(300),Pa=j.useRef(!1),Ji=j.useRef(!1),[Xi,xs]=j.useState(null),[Fo,Rn]=j.useState(null),[lt,kt]=j.useState(null),[Ti,Ga]=j.useState(null),Ei=j.useRef([]),Zi=j.useRef([]),ai=j.useRef(l),yn=j.useRef(a),{syncIndicator:Yo,syncSettingsUI:$i}=yO({tasks:l,setTasks:n,events:a,setEvents:o,tags:h,setTags:f,settings:r,setSettings:d,activeTaskId:v,setActiveTaskId:p,setTaskStartTime:T,setElapsedMinutes:M,tasksRef:ai,eventsRef:yn,timeOffset:F}),[,si]=j.useState(0);j.useEffect(()=>{ai.current=l},[l]),j.useEffect(()=>{yn.current=a},[a]);const Ge=j.useCallback(()=>{Ei.current=[...Ei.current.slice(-49),{tasks:ai.current,events:yn.current}],Zi.current=[],si(m=>m+1)},[]),{outlookAvailable:oi,outlookConnected:ct,outlookStatus:qt,outlookError:Va,lastFetched:vn,connectOutlook:Ai,disconnectOutlook:ku,refreshOutlookEvents:Qo,pendingOutlookImport:Ds,finishOutlookImport:yl,pendingOutlookReplace:Us,finishOutlookReplace:Wi}=CO({events:a,setEvents:o,settings:r,pushUndo:Ge,minDate:Ue,maxDate:be,tags:h});j.useEffect(()=>{if(!Ds)return;const{catCounts:m,uncategorized:E}=Ds,O=Object.keys(m).sort(),U=r.icsCategoryRules||[],B=O.map(Z=>{const L=U.find(ue=>ue.category.toLowerCase()===Z.toLowerCase());return L?{category:Z,include:L.include,tagId:L.tagId}:{category:Z,include:!0,tagId:null}});yt(B),mn({mode:"outlook-import",catCounts:m,uncategorized:E})},[Ds]);const Cn=j.useCallback(()=>{const m=Ei.current;if(m.length===0)return;const E=m[m.length-1];Zi.current=[...Zi.current,{tasks:ai.current,events:yn.current}],Ei.current=m.slice(0,-1),n(E.tasks),o(E.events),ai.current=E.tasks,yn.current=E.events,si(O=>O+1)},[]),Mt=j.useCallback(()=>{const m=Zi.current;if(m.length===0)return;const E=m[m.length-1];Ei.current=[...Ei.current,{tasks:ai.current,events:yn.current}],Zi.current=m.slice(0,-1),n(E.tasks),o(E.events),ai.current=E.tasks,yn.current=E.events,si(O=>O+1)},[]),vl=Ei.current.length>0,Ou=Zi.current.length>0,qo=W>Ue,Cl=W<be,bi=ae==="1day"?1:parseInt(ae)||1,ri=j.useMemo(()=>{if(bi===1)return se.current=W,[W];const m=bi-1;let E=se.current;return W>ln(E,m)?E=ln(W,-m):W<E&&(E=W),ln(E,m)>be&&(E=ln(be,-m)),E<Ue&&(E=Ue),se.current=E,Array.from({length:bi},(O,U)=>ln(E,U))},[W,bi,Ue,be]),en=ri.includes(ee),Fa=j.useCallback(()=>{de(m=>{const E=ln(m,-1);return E>=Ue?E:m})},[Ue]),js=j.useCallback(()=>{de(m=>{const E=ln(m,1);return E<=be?E:m})},[be]),Ya=j.useCallback(()=>{de(ft())},[]),xt=j.useCallback(m=>{Ie(m);const E=m==="1day"?1:parseInt(m)||1;E>1&&de(O=>ln(O,E-1)>be?ln(be,-(E-1)):O<Ue?Ue:O)},[be,Ue]);j.useEffect(()=>{const m=E=>{const O=document.activeElement?.tagName?.toLowerCase();O==="input"||O==="textarea"||((E.ctrlKey||E.metaKey)&&E.key==="z"&&(E.preventDefault(),E.shiftKey?Mt():Cn()),(E.ctrlKey||E.metaKey)&&E.key==="y"&&(E.preventDefault(),Mt()),E.key==="ArrowLeft"&&!E.ctrlKey&&!E.metaKey&&!E.shiftKey&&Fa(),E.key==="ArrowRight"&&!E.ctrlKey&&!E.metaKey&&!E.shiftKey&&js(),(E.key==="t"||E.key==="T")&&Ya())};return window.addEventListener("keydown",m),()=>window.removeEventListener("keydown",m)},[Cn,Mt,Fa,js,Ya]),j.useEffect(()=>{localStorage.setItem("timekerper-tasks",JSON.stringify(l))},[l]),j.useEffect(()=>{localStorage.setItem("timekerper-events",JSON.stringify(a))},[a]),j.useEffect(()=>{localStorage.setItem("timekerper-settings",JSON.stringify(r))},[r]),j.useEffect(()=>{localStorage.setItem("timekerper-tags",JSON.stringify(h))},[h]),j.useEffect(()=>{localStorage.setItem("timekerper-activeTaskId",JSON.stringify(v))},[v]),j.useEffect(()=>{localStorage.setItem("tk_calendarView",ae)},[ae]),j.useEffect(()=>{if(!v||!S)return;const m=setInterval(()=>{const E=cn()+F;ve(E);const O=l.find(U=>U.id===v);if(O&&O.startedAtMin!=null){const U=O.startedAtDate||ft(),B=Af(a,O.pauseEvents||[],O.startedAtMin,E,U);M(Math.max(0,E-O.startedAtMin-B))}},1e3);return()=>clearInterval(m)},[v,S,F,l,a]),j.useEffect(()=>{if(v)return;const m=()=>ve(cn()+F);m();const E=setInterval(m,15e3);return()=>clearInterval(E)},[v,F]),j.useEffect(()=>{document.documentElement.setAttribute("data-theme",r.darkMode===!0?"dark":"light")},[r.darkMode]),j.useEffect(()=>{if(!ie)return;const m=E=>{Go.current&&!Go.current.contains(E.target)&&A(!1)};return document.addEventListener("mousedown",m),()=>document.removeEventListener("mousedown",m)},[ie]),j.useEffect(()=>{const m=O=>{if(Pa.current){const U=Math.max(260,Math.min(O.clientX,window.innerWidth-300));_u(U)}else if(Ji.current){const U=document.querySelector(".header")?.offsetHeight||0,B=O.clientY-U,Z=window.innerHeight-U,L=Math.max(120,Math.min(B,Z-200));pl(L)}},E=()=>{Pa.current&&(Pa.current=!1,document.body.style.cursor="",document.body.style.userSelect=""),Ji.current&&(Ji.current=!1,document.body.style.cursor="",document.body.style.userSelect="")};return window.addEventListener("mousemove",m),window.addEventListener("mouseup",E),()=>{window.removeEventListener("mousemove",m),window.removeEventListener("mouseup",E)}},[]);const Sl=j.useCallback(()=>{Pa.current=!0,document.body.style.cursor="col-resize",document.body.style.userSelect="none"},[]),Tl=j.useCallback(()=>{Ji.current=!0,document.body.style.cursor="row-resize",document.body.style.userSelect="none"},[]),Nn=j.useMemo(()=>r.useExtendedHours?r:{...r,extendedStart:r.workdayStart,extendedEnd:r.workdayEnd},[r]),Qa=j.useMemo(()=>ri.map(m=>RE(l,a,Nn,v,k,m)),[ri,l,a,Nn,v,k,J]),El=j.useMemo(()=>Qa.map(m=>{const E={};for(const O of m)O.type==="task"&&(E[O.taskId]=Math.max(E[O.taskId]||0,O.blockIndex+1));return E}),[Qa]),Al=j.useMemo(()=>Qa.map(m=>{const E=m.map((B,Z)=>({...B,_idx:Z})).filter(B=>B.type==="event");if(E.length===0)return{};const O={},U=[];for(const B of E){const Z=U.filter(pe=>pe.endMin>B.startMin);U.length=0,U.push(...Z);const L=new Set(U.map(pe=>pe.col));let ue=0;for(;L.has(ue);)ue++;U.push({endMin:B.endMin,col:ue}),O[B._idx]={col:ue,total:0}}for(const B of E){let Z=1;for(const L of E)L.startMin<B.endMin&&L.endMin>B.startMin&&(Z=Math.max(Z,O[L._idx].col+1));O[B._idx].total=Z}return O}),[Qa]),Dt=l.find(m=>!m.completed),Jt=l.find(m=>m.id===v),bl=Jt&&k>(Jt.adjustedDuration??Jt.duration),Ot=ke(Nn.extendedStart),Ut=ke(Nn.extendedEnd),Hs=ke(r.workdayStart),qa=ke(r.workdayEnd),ut=r.zoomLevel,wi=(Ut-Ot)*ut,Jo=Math.floor(Ot/60),Xo=Math.ceil(Ut/60),Zo=Array.from({length:Xo-Jo},(m,E)=>Jo+E),_i=j.useCallback(m=>m&&h.find(E=>E.id===m)?.color||null,[h]),Sn=j.useCallback(m=>m&&h.find(E=>E.id===m)?.name||null,[h]),$o=j.useCallback((m,E,O)=>{const U=(m.startMin-Ot)*ut,B=(m.endMin-m.startMin)*ut,Z={top:`${U}px`,height:`${Math.max(B,4)}px`},L=O[E];if(L&&L.total>1){const Be=`(100% - ${8+2*(L.total-1)}px) / ${L.total}`;Z.left=`calc(4px + ${L.col} * (${Be} + 2px))`,Z.width=`calc(${Be})`,Z.right="auto"}return Z},[Ot,ut]),Ja=j.useCallback(m=>(m.endMin-m.startMin)*ut,[ut]),Te=j.useCallback((m,E)=>{(m==="extendedEnd"||m==="workdayEnd")&&E==="00:00"&&(E="23:59"),d(O=>({...O,[m]:E}))},[]),Wo=j.useCallback((m,E)=>{const O=m.match(/^(.+?)\s+\[(.+?)\]$/);let U=null,B=m;if(O){B=O[1];const Z=O[2];U=h.find(L=>L.name===Z)?.id??null}if(r.smartDuration){const Z=B.match(/^(.+?)\s+(\d+)$/);if(Z)return{name:Z[1],duration:parseInt(Z[2],10),tagId:U}}return{name:B,duration:E,tagId:U}},[r.smartDuration,h]),zs=j.useCallback(()=>{if(!Dt)return;const m=(Dt.pausedElapsed||0)*6e4,E=cn()+F;n(O=>O.map(U=>{if(U.id!==Dt.id)return U;const B={};if(U.startedAtMin==null&&(B.startedAtMin=E,B.startedAtDate=ft()),U.pausedAtMin!=null){B.pauseGapMinutes=(U.pauseGapMinutes||0)+Math.max(0,E-U.pausedAtMin),B.pausedAtMin=null;const Z=[...U.pauseEvents||[]];Z.length>0&&Z[Z.length-1].end==null&&(Z[Z.length-1]={...Z[Z.length-1],end:E}),B.pauseEvents=Z}return Object.keys(B).length>0?{...U,...B}:U})),p(Dt.id),T(Date.now()-m),M(Dt.pausedElapsed||0)},[Dt,F]),er=()=>{const m=cn()+F,E=r.restrictTasksToWorkHours?ke(r.workdayStart):ke(r.extendedStart),O=r.restrictTasksToWorkHours?ke(r.workdayEnd):ke(r.extendedEnd);if(m<E||m>=O)return!0;const U=ft(),B=r.minFragmentMinutes||5;return a.filter(Z=>Z.date===U).some(Z=>{const L=ke(Z.start),ue=ke(Z.end);return m>=L&&m<ue||L>m&&L-m<=B})},Ls=j.useCallback(()=>{if(!v)return;Ge();const m=k,E=cn()+F;n(O=>{const U=O.map(B=>{if(B.id!==v)return B;const Z=B.startedAtMin+(B.pausedElapsed||0)+(B.pauseGapMinutes||0);return{...B,completed:!0,actualDuration:m,workSegments:[...B.workSegments||[],{start:Z,end:E,date:ft()}],pausedElapsed:0,pausedAtMin:null,pauseEvents:[]}});if(r.autoStartNext&&!er()){const B=U.find(Z=>!Z.completed);if(B){const Z=(B.pausedElapsed||0)*6e4,L=cn()+F;setTimeout(()=>{n(ue=>ue.map(pe=>{if(pe.id!==B.id)return pe;const ze={};if(pe.startedAtMin==null&&(ze.startedAtMin=L,ze.startedAtDate=ft()),pe.pausedAtMin!=null){ze.pauseGapMinutes=(pe.pauseGapMinutes||0)+Math.max(0,L-pe.pausedAtMin),ze.pausedAtMin=null;const Be=[...pe.pauseEvents||[]];Be.length>0&&Be[Be.length-1].end==null&&(Be[Be.length-1]={...Be[Be.length-1],end:L}),ze.pauseEvents=Be}return Object.keys(ze).length>0?{...pe,...ze}:pe})),p(B.id),T(Date.now()-Z),M(B.pausedElapsed||0)},0)}else p(null),T(null),M(0)}else p(null),T(null),M(0);return U})},[v,Ge,r.autoStartNext,a,F]),Bs=j.useCallback(()=>{if(!v)return;Ge();const m=cn()+F;n(E=>E.map(O=>{if(O.id!==v)return O;const U=O.startedAtMin+(O.pausedElapsed||0)+(O.pauseGapMinutes||0);return{...O,pausedElapsed:k,pausedAtMin:m,workSegments:[...O.workSegments||[],{start:U,end:m,date:ft()}],pauseEvents:[...O.pauseEvents||[],{start:m,end:null,date:ft()}]}})),p(null),T(null),M(0)},[v,k,Ge,F]),tr=j.useCallback(()=>{v&&n(m=>m.map(E=>E.id===v?{...E,startedAtMin:null,startedAtDate:null,pausedAtMin:null,pauseGapMinutes:0,pausedElapsed:0,workSegments:[],pauseEvents:[]}:E)),p(null),T(null),M(0)},[v]),bt=j.useCallback(m=>{v&&(Ge(),n(E=>E.map(O=>{if(O.id!==v)return O;const U=O.adjustedDuration??O.duration;return{...O,adjustedDuration:Math.max(5,U+m)}})))},[v,Ge]),ki=()=>{Q(null),qi(""),ja(r.defaultTaskDuration),Is(null),gl(!1),fe(!0)},ea=m=>{Q(m),qi(m.name),ja(m.adjustedDuration??m.duration),Is(m.tagId),fe(!0)},li=()=>{if(ei.trim()){if(Ge(),R)n(m=>m.map(E=>E.id===R.id?{...E,name:ei,adjustedDuration:Ua,tagId:Os}:E));else{const E=ei.split(`
`).map(O=>O.trim()).filter(O=>O.length>0).map((O,U)=>{const B=Wo(O,Ua);return{id:Date.now()+U,name:B.name,duration:B.duration,adjustedDuration:null,completed:!1,tagId:B.tagId!==null?B.tagId:Os,pausedElapsed:0}});n(O=>Gt?[...E,...O]:[...O,...E])}fe(!1)}},wl=m=>{Ge(),m===v&&tr(),n(E=>E.filter(O=>O.id!==m))},nr=m=>{Ge();const E=m===v,O=E?k:0,U=cn()+F;E&&!r.autoStartNext&&(p(null),T(null),M(0)),n(B=>{const Z=B.map(L=>{if(L.id!==m)return L;if(L.completed)return{...L,completed:!1,actualDuration:void 0,startedAtMin:null,startedAtDate:null,pausedAtMin:null,pauseGapMinutes:0,pausedElapsed:0,workSegments:[],pauseEvents:[]};{const ue={...L,completed:!0,pausedElapsed:0,pausedAtMin:null,pauseEvents:[]};if(E){const pe=L.startedAtMin+(L.pausedElapsed||0)+(L.pauseGapMinutes||0);ue.workSegments=[...L.workSegments||[],{start:pe,end:U,date:ft()}],ue.actualDuration=O}else L.workSegments?.length>0?ue.actualDuration=L.workSegments.reduce((pe,ze)=>pe+(ze.end-ze.start),0):ue.actualDuration=0;return ue}});if(E&&r.autoStartNext&&!er()){const L=Z.find(ue=>!ue.completed);if(L){const ue=(L.pausedElapsed||0)*6e4,pe=cn()+F;setTimeout(()=>{n(ze=>ze.map(Be=>{if(Be.id!==L.id)return Be;const vt={};if(Be.startedAtMin==null&&(vt.startedAtMin=pe,vt.startedAtDate=ft()),Be.pausedAtMin!=null){vt.pauseGapMinutes=(Be.pauseGapMinutes||0)+Math.max(0,pe-Be.pausedAtMin),vt.pausedAtMin=null;const Xt=[...Be.pauseEvents||[]];Xt.length>0&&Xt[Xt.length-1].end==null&&(Xt[Xt.length-1]={...Xt[Xt.length-1],end:pe}),vt.pauseEvents=Xt}return Object.keys(vt).length>0?{...Be,...vt}:Be})),p(L.id),T(Date.now()-ue),M(L.pausedElapsed||0)},0)}else p(null),T(null),M(0)}return Z})},ir=m=>{Ge();const E=l.findIndex(B=>B.id===m.id),O={...m,id:Date.now(),completed:!1,pausedElapsed:0,adjustedDuration:null,startedAtMin:null,startedAtDate:null,pausedAtMin:null,pauseGapMinutes:0,workSegments:[],pauseEvents:[]},U=[...l];U.splice(E+1,0,O),n(U)},Xa=()=>{X(null),Rs("");const m=new Date,E=m.getHours()*60+m.getMinutes(),O=Math.ceil((E+1)/30)*30,U=Math.min(O,ke(Nn.extendedEnd)-r.defaultEventDuration);Lo(dn(U));const B=U+r.defaultEventDuration;za(dn(B)),ti(null),In(W),ni.current=!1,Y(!0)},Za=m=>{X(m),Rs(m.name),Lo(m.start),za(m.end),ti(m.tagId),In(m.date||ft()),ni.current=!0,Y(!0)},_l=m=>{const E=AO(m,pn);if(!ni.current){const O=ke(pn),B=ke(Ha)-O,Z=ke(E);za(dn(Z+B))}Lo(E)},Iu=m=>{ni.current=!0,za(m)},ar=()=>{const m=zo.trim()||"Event";let E=Ha;ke(Ha)<=ke(pn)&&(E=dn(ke(pn)+r.defaultEventDuration)),Ge(),o(H?O=>O.map(U=>U.id===H.id?{...U,name:m,start:pn,end:E,tagId:Ns,date:Nt}:U):O=>[...O,{id:Date.now(),name:m,start:pn,end:E,tagId:Ns,date:Nt}]),Y(!1)},kl=m=>{Ge(),o(E=>E.filter(O=>O.id!==m))},sr=j.useCallback(()=>{Ge(),v&&(p(null),T(null),M(0)),n([])},[Ge,v]),Ru=j.useCallback(()=>{Ge(),o(m=>m.filter(E=>E.date!==W))},[Ge,W]),Nu=j.useCallback(()=>{Ge(),n(m=>m.filter(E=>!E.completed))},[Ge]),Mu=j.useCallback(()=>{Ge(),o(m=>m.filter(E=>{if(E.date<W)return!1;if(E.date===W){if(W<ee)return!1;if(W===ee)return ke(E.end)>J}return!0}))},[Ge,W,J,ee]),xu=(m,E)=>{xs(E),m.dataTransfer.effectAllowed="move",m.dataTransfer.setData("text/plain",E)},Du=(m,E)=>{m.preventDefault(),m.dataTransfer.dropEffect="move",E!==Fo&&Rn(E)},Ol=(m,E)=>{m.preventDefault(),!(Xi===null||Xi===E)&&(Ge(),n(O=>{const U=[...O],B=U.findIndex(ue=>ue.id===Xi),Z=U.findIndex(ue=>ue.id===E),[L]=U.splice(B,1);return U.splice(Z,0,L),U}),xs(null),Rn(null))},Uu=()=>{xs(null),Rn(null)},ju=()=>{f(m=>[...m,{id:Date.now(),name:"New Tag",color:"#94a3b8"}])},Il=(m,E)=>{f(O=>O.map(U=>U.id===m?{...U,...E}:U))},Hu=m=>{Ge(),f(E=>E.filter(O=>O.id!==m)),n(E=>E.map(O=>O.tagId===m?{...O,tagId:null}:O)),o(E=>E.map(O=>O.tagId===m?{...O,tagId:null}:O))},or=()=>{const m=Object.fromEntries(Object.entries(r).filter(([Z])=>!oC.includes(Z))),E=JSON.stringify({settings:m,tags:h,version:1},null,2),O=new Blob([E],{type:"application/json"}),U=URL.createObjectURL(O),B=document.createElement("a");B.href=U,B.download="timekerper-settings.json",B.click(),URL.revokeObjectURL(U)},zu=()=>{const E=l.filter(O=>!O.completed).map(O=>{const U=O.adjustedDuration??O.duration;return`${O.name} ${U}`}).join(`
`);navigator.clipboard.writeText(E),Ci("tasks"),setTimeout(()=>Ci(O=>O==="tasks"?null:O),1500)},Lu=()=>{const m=ft(),O=a.filter(U=>U.date>=m).sort((U,B)=>U.date<B.date?-1:U.date>B.date?1:ke(U.start)-ke(B.start)).map(U=>{const B=Sn(U.tagId),Z=B?` [${B}]`:"";return`${U.name} ${U.start}-${U.end} ${U.date}${Z}`}).join(`
`);navigator.clipboard.writeText(O),Ci("events"),setTimeout(()=>Ci(U=>U==="events"?null:U),1500)},Bu=()=>{const m=Ko.split(`
`).map(Z=>Z.trim()).filter(Z=>Z.length>0);if(m.length===0)return;Ge();const E=[];for(const Z of m){const L=Z.match(/^(.+?)\s+(\d{1,2}:\d{2})\s*-\s*(\d{1,2}:\d{2})\s+(\d{4}-\d{2}-\d{2})(?:\s+\[(.+?)\])?$/);if(L){const ue=L[5],pe=ue?h.find(ze=>ze.name===ue)?.id??null:null;E.push({id:Date.now()+E.length,name:L[1],start:L[2].padStart(5,"0"),end:L[3].padStart(5,"0"),date:L[4],tagId:pe})}}let O=[...a];const U=[];let B=0;for(const Z of E){const L=O.findIndex(ue=>ue.name===Z.name&&ue.start===Z.start&&ue.end===Z.end&&ue.date===Z.date);L>=0?(Z.tagId!=null&&O[L].tagId==null&&(O[L]={...O[L],tagId:Z.tagId}),B++):U.push(Z)}(U.length>0||O!==a)&&o([...O,...U]),B>0&&U.length===0?alert(`All ${B} event${B!==1?"s":""} already exist. Nothing imported.`):B>0&&alert(`Added ${U.length} event${U.length!==1?"s":""}. Skipped ${B} duplicate${B!==1?"s":""}.`),Po(""),Bo(!1)},Rl=m=>{const E=m.target.files?.[0];if(!E)return;const O=new FileReader;O.onload=U=>{try{const B=JSON.parse(U.target.result);if(B.settings){const Z=Object.fromEntries(Object.entries(B.settings).filter(([L])=>!oC.includes(L)));d(L=>({...L,...Z}))}B.tags&&Array.isArray(B.tags)&&f(B.tags)}catch{}},O.readAsText(E),m.target.value=""},Ks=(m,E)=>{const O=m.filter(L=>!L.categories||L.categories.length===0?!0:!L.categories.some(ue=>E.some(pe=>pe.include===!1&&pe.category.toLowerCase()===ue.toLowerCase())));if(O.length===0){alert("No events to import after applying category filters.");return}Ge();const U=O.map((L,ue)=>{let pe=null;if(L.categories&&L.categories.length>0)for(const ze of L.categories){const Be=E.find(vt=>vt.include!==!1&&vt.tagId&&vt.category.toLowerCase()===ze.toLowerCase());if(Be){pe=Be.tagId;break}}return{id:Date.now()+ue,name:L.name,start:L.start,end:L.end,date:L.date,tagId:pe,icsImported:!0}}),B=r.icsReplaceOnImport;if(B==="ask"){ks({newEvents:U});return}rr(U,B==="yes"||B===!0)},rr=(m,E)=>{const O=E?a.filter(L=>!L.icsImported):a;let U=[...O];const B=[];let Z=0;for(const L of m){const ue=U.findIndex(pe=>pe.name===L.name&&pe.start===L.start&&pe.end===L.end&&pe.date===L.date);ue>=0?(L.tagId!=null&&U[ue].tagId==null&&(U[ue]={...U[ue],tagId:L.tagId}),Z++):B.push(L)}if(B.length===0&&U===O){alert(`All ${Z} event${Z!==1?"s":""} already exist. Nothing imported.`),E&&o(O);return}o([...U,...B]),Z>0&&alert(`Imported ${B.length} event${B.length!==1?"s":""}. Skipped ${Z} duplicate${Z!==1?"s":""}.`)},Ku=m=>{const E=m.target.files?.[0];if(!E)return;const O=new FileReader;O.onload=U=>{try{const B=IE(U.target.result),Z={...r,icsCategoryRules:[]},L=lC(B,Z,Ue,be);if(L.length===0){alert("No events to import. Check your status filter settings or date range.");return}const ue={};let pe=0;for(const tn of L)if(tn.categories&&tn.categories.length>0)for(const jt of tn.categories)ue[jt]=(ue[jt]||0)+1;else pe++;const ze=Object.keys(ue).sort();if(ze.length===0){Ks(L,[]);return}const Be=r.icsCategoryRules||[];if(ze.every(tn=>Be.some(jt=>jt.category.toLowerCase()===tn.toLowerCase()))){Ks(L,Be);return}const Xt=ze.map(tn=>{const jt=Be.find(Gs=>Gs.category.toLowerCase()===tn.toLowerCase());return jt?{category:tn,include:jt.include,tagId:jt.tagId}:{category:tn,include:!0,tagId:null}});yt(Xt),mn({mode:"import",filteredEvents:L,catCounts:ue,uncategorized:pe})}catch{alert("Could not parse the .ics file. Make sure it is a valid iCalendar file.")}},O.readAsText(E),m.target.value=""},Pu=()=>{yt([...r.icsCategoryRules||[]]),mn({mode:"settings"})},Gu=(m,E)=>{kt(E),m.dataTransfer.effectAllowed="move",m.dataTransfer.setData("text/plain",E)},Vu=(m,E)=>{m.preventDefault(),m.dataTransfer.dropEffect="move",E!==Ti&&Ga(E)},Fu=(m,E)=>{m.preventDefault(),!(lt===null||lt===E)&&(f(O=>{const U=[...O],B=U.findIndex(ue=>ue.id===lt),Z=U.findIndex(ue=>ue.id===E),[L]=U.splice(B,1);return U.splice(Z,0,L),U}),kt(null),Ga(null))},Yu=()=>{kt(null),Ga(null)},Nl=()=>{const m=ba.find(E=>E>r.zoomLevel);m!=null&&(Te("zoomLevel",m),Te("fitMode",!1))},Ps=()=>{const m=[...ba].reverse().find(E=>E<r.zoomLevel);m!=null&&(Te("zoomLevel",m),Te("fitMode",!1))},ci=j.useCallback(()=>{if(!Si.current)return;const m=Si.current.clientHeight,E=Ut-Ot;if(E<=0)return;const O=Math.max(.1,Math.min(5,m/E));Te("zoomLevel",Math.floor(O*100)/100),Te("fitMode",!0)},[Ut,Ot,Te]);j.useEffect(()=>{if(!r.fitMode)return;const m=()=>{ci()};return window.addEventListener("resize",m),()=>window.removeEventListener("resize",m)},[r.fitMode,ci]);const lr=m=>{m.key==="Enter"&&(m.ctrlKey||!R&&!ei.includes(`
`)&&m.target.tagName!=="TEXTAREA")&&li(),m.key==="Enter"&&R&&li()},Ml=m=>{m.key==="Enter"&&(m.preventDefault(),ii.current?.focus())},xl=m=>{m.key==="Enter"&&(m.preventDefault(),Ba.current?.focus())},Dl=m=>{m.key==="Enter"&&(m.preventDefault(),ar())};return y.jsxs("div",{className:"app",children:[y.jsxs("header",{className:"header",children:[y.jsxs("h1",{children:["Timekerper",Yo,ct&&y.jsx("span",{className:`outlook-indicator ${qt}`,title:qt==="error"?Va||"Error":qt==="fetching"?"Fetching...":vn?`Outlook: ${vn.toLocaleTimeString([],{hour:"numeric",minute:"2-digit"})}`:"Outlook connected"})]}),y.jsxs("div",{className:"header-right",children:[y.jsxs("div",{className:"undo-redo",children:[y.jsx("button",{onClick:Cn,disabled:!vl,title:"Undo (Ctrl+Z)",children:""}),y.jsx("button",{onClick:Mt,disabled:!Ou,title:"Redo (Ctrl+Shift+Z)",children:""})]}),y.jsxs("div",{className:"zoom-controls",children:[y.jsx("button",{onClick:Ps,disabled:r.zoomLevel<=ba[0],children:""}),y.jsxs("span",{className:"zoom-label",children:[Math.round(ut*100),"%"]}),y.jsx("button",{onClick:Nl,disabled:r.zoomLevel>=ba[ba.length-1],children:"+"}),y.jsx("button",{onClick:ci,className:"fit-btn",title:"Fit calendar to window height",children:"Fit"})]}),y.jsxs("div",{className:"view-toggle",children:[y.jsx("button",{className:ae==="1day"?"active":"",onClick:()=>xt("1day"),children:"Day"}),y.jsx("button",{className:ae==="2day"?"active":"",onClick:()=>xt("2day"),children:"2"}),y.jsx("button",{className:ae==="3day"?"active":"",onClick:()=>xt("3day"),children:"3"}),y.jsx("button",{className:ae==="4day"?"active":"",onClick:()=>xt("4day"),children:"4"}),y.jsx("button",{className:ae==="5day"?"active":"",onClick:()=>xt("5day"),children:"5"})]}),y.jsxs("div",{className:"view-menu-wrapper",ref:Go,children:[y.jsx("button",{className:"view-menu-btn",onClick:()=>A(m=>!m),title:"View options",children:"View "}),ie&&y.jsxs("div",{className:"view-menu-dropdown",children:[y.jsxs("div",{className:"view-menu-section",children:[y.jsx("span",{className:"view-menu-label",children:"Zoom"}),y.jsxs("div",{className:"view-menu-row",children:[y.jsx("button",{onClick:Ps,disabled:r.zoomLevel<=ba[0],children:""}),y.jsxs("span",{className:"view-menu-zoom-level",children:[Math.round(ut*100),"%"]}),y.jsx("button",{onClick:Nl,disabled:r.zoomLevel>=ba[ba.length-1],children:"+"}),y.jsx("button",{onClick:ci,className:"fit-btn",children:"Fit"})]})]}),y.jsxs("div",{className:"view-menu-section",children:[y.jsx("span",{className:"view-menu-label",children:"Layout"}),y.jsxs("div",{className:"view-menu-row",children:[y.jsx("button",{className:ae==="1day"?"active":"",onClick:()=>{xt("1day"),A(!1)},children:"Day"}),y.jsx("button",{className:ae==="2day"?"active":"",onClick:()=>{xt("2day"),A(!1)},children:"2"}),y.jsx("button",{className:ae==="3day"?"active":"",onClick:()=>{xt("3day"),A(!1)},children:"3"}),y.jsx("button",{className:ae==="4day"?"active":"",onClick:()=>{xt("4day"),A(!1)},children:"4"}),y.jsx("button",{className:ae==="5day"?"active":"",onClick:()=>{xt("5day"),A(!1)},children:"5"})]})]})]})]}),y.jsxs("div",{className:"date-nav",children:[y.jsx("button",{className:"date-nav-btn",onClick:Fa,disabled:!qo,title:"Previous day ()",children:""}),y.jsxs("span",{className:"date-nav-label",children:[y.jsx("span",{className:"date-long",children:AE(W)}),y.jsx("span",{className:"date-short",children:wE(W)})]}),y.jsx("button",{className:"date-nav-btn",onClick:js,disabled:!Cl,title:"Next day ()",children:""}),y.jsx("button",{className:"today-btn",onClick:Ya,disabled:re,title:"Go to today (T)",children:"Today"})]}),y.jsxs("button",{className:"settings-btn",onClick:()=>$(!0),title:"Settings",children:[y.jsx("span",{className:"settings-label-long",children:"Settings"}),y.jsx("span",{className:"settings-label-short",children:""})]})]})]}),y.jsxs("main",{className:"main-content",children:[y.jsxs("aside",{className:"task-panel",style:{width:`${Ka}px`,"--panel-height":`${ml}px`},children:[en?v&&Jt?y.jsxs("div",{className:"active-task-panel compact",children:[y.jsxs("div",{className:"active-task-header",children:[y.jsx("h2",{children:"Working On"}),y.jsxs("div",{className:"active-task-actions",children:[y.jsx("button",{className:"btn-done",onClick:Ls,children:"Done"}),y.jsx("button",{className:"btn-pause",onClick:Bs,children:"Pause"}),y.jsx("button",{className:"btn-cancel",onClick:tr,children:"Cancel"})]})]}),y.jsx("span",{className:"active-task-name",children:Jt.name}),y.jsxs("div",{className:"active-task-row",children:[y.jsxs("div",{className:`timer ${bl?"over":""}`,children:[y.jsx("span",{className:"elapsed",children:So(k)}),y.jsxs("span",{className:"estimate",children:["/ ",So(Jt.adjustedDuration??Jt.duration)]}),Jt.adjustedDuration&&Jt.adjustedDuration!==Jt.duration&&y.jsxs("span",{className:"original-estimate",children:["(orig ",So(Jt.duration),")"]}),bl&&y.jsxs("span",{className:"over-notice",children:["+",So(k-(Jt.adjustedDuration??Jt.duration))," over"]})]}),y.jsxs("div",{className:"time-adjust-btns",children:[y.jsx("button",{onClick:()=>bt(-15),children:"-15"}),y.jsx("button",{onClick:()=>bt(-5),children:"-5"}),y.jsx("button",{onClick:()=>bt(5),children:"+5"}),y.jsx("button",{onClick:()=>bt(15),children:"+15"})]})]})]}):y.jsx("div",{className:"start-task-panel compact",children:Dt?y.jsxs("div",{className:"start-task-row",children:[y.jsxs("div",{className:"start-task-info",children:[y.jsx("span",{className:"next-task-label",children:"Next:"}),y.jsx("span",{className:"next-task-name",children:Dt.name}),y.jsxs("span",{className:"next-task-duration",children:[So(Dt.adjustedDuration??Dt.duration),Dt.pausedElapsed>0&&y.jsxs("span",{className:"paused-time",children:[" (",So(Dt.pausedElapsed)," done)"]})]})]}),y.jsx("button",{className:"btn-start",onClick:zs,children:Dt.pausedElapsed>0?"Resume":"Start"})]}):y.jsx("p",{className:"no-tasks",children:"All tasks completed!"})}):y.jsx("div",{className:"date-view-banner",children:y.jsx("span",{className:"date-view-label",children:W<ee?"Viewing past days":"Viewing future days"})}),y.jsxs("div",{className:"panel-scroll",children:[y.jsxs("div",{className:"panel-section",children:[y.jsxs("div",{className:"panel-section-header",children:[y.jsx("h2",{children:"Tasks"}),y.jsxs("span",{className:"task-summary",children:[l.filter(m=>!m.completed).length," tasks,"," ",l.filter(m=>!m.completed).reduce((m,E)=>m+(E.adjustedDuration??E.duration),0)," min"]}),l.some(m=>m.completed)&&y.jsx("button",{className:"section-toggle",onClick:()=>ye(m=>!m),children:le?`Show completed (${l.filter(m=>m.completed).length})`:"Hide completed"})]}),y.jsx("ul",{className:"task-list",children:l.map((m,E)=>{if(le&&m.completed)return null;const O=re&&!m.completed&&E===l.findIndex(B=>!B.completed),U=_i(m.tagId);return y.jsxs("li",{draggable:!m.completed,onDragStart:B=>xu(B,m.id),onDragOver:B=>Du(B,m.id),onDrop:B=>Ol(B,m.id),onDragEnd:Uu,className:["task-item",m.completed&&"completed",m.id===v&&"active",O&&!m.completed&&"next-up",Fo===m.id&&"drag-over",Xi===m.id&&"dragging"].filter(Boolean).join(" "),title:m.name,children:[y.jsx("span",{className:"drag-handle",title:"Drag to reorder",children:""}),y.jsx("input",{type:"checkbox",checked:m.completed,onChange:()=>nr(m.id),className:"task-checkbox"}),U&&y.jsx("span",{className:"tag-dot",style:{backgroundColor:U},title:Sn(m.tagId)}),y.jsx("span",{className:`task-name${r.wrapListNames?" wrap":""}`,onClick:()=>ea(m),children:m.name}),y.jsxs("span",{className:"list-end",children:[y.jsx("span",{className:"task-duration",onClick:()=>ea(m),style:{cursor:"pointer"},children:m.adjustedDuration&&m.adjustedDuration!==m.duration?`${m.adjustedDuration}m`:`${m.duration}m`}),m.pausedElapsed>0&&!m.completed&&y.jsx("span",{className:"paused-badge",title:"Paused",children:"||"}),y.jsx("button",{className:"action-btn",onClick:()=>ir(m),title:"Duplicate",children:""}),y.jsx("button",{className:"action-btn delete",onClick:()=>wl(m.id),title:"Delete",children:""})]})]},m.id)})}),y.jsxs("div",{className:"panel-section-actions",children:[y.jsx("button",{className:"add-btn",onClick:ki,children:"+ Add Task"}),l.some(m=>!m.completed)&&y.jsx("button",{className:"clear-btn",onClick:zu,children:La==="tasks"?"Copied!":"Export Tasks"}),l.some(m=>m.completed)&&y.jsx("button",{className:"clear-btn",onClick:Nu,children:"Clear Completed"}),l.length>0&&y.jsx("button",{className:"clear-btn",onClick:sr,children:"Clear All"})]})]}),y.jsxs("div",{className:"panel-section",children:[y.jsxs("div",{className:"panel-section-header",children:[y.jsx("h2",{children:re?"Events":`Events (${new Date(W+"T12:00:00").toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})})`}),a.some(m=>m.icsImported||m.outlookSynced)&&(()=>{const E=a.filter(B=>B.date===W).filter(B=>!(it&&re&&ke(B.end)<=J)),O=B=>B.icsImported||B.outlookSynced,U=Rt==="manual"?E.filter(O).length:Rt==="outlook"?E.filter(B=>!O(B)).length:0;return y.jsx("button",{className:"source-filter-toggle",onClick:()=>vi(B=>B==="all"?"manual":B==="manual"?"outlook":"all"),children:Rt==="all"?"All sources":Rt==="manual"?`Manual only${U?` (${U} hidden)`:""}`:`Outlook only${U?` (${U} hidden)`:""}`})})(),re&&a.filter(m=>m.date===W).some(m=>ke(m.end)<=J)&&y.jsx("button",{className:"section-toggle",onClick:()=>je(m=>!m),children:it?`Show past (${a.filter(m=>m.date===W&&ke(m.end)<=J).length})`:"Hide past"})]}),y.jsx("ul",{className:"event-list",children:a.filter(m=>m.date===W).sort((m,E)=>ke(m.start)-ke(E.start)).map(m=>{const E=m.icsImported||m.outlookSynced;if(Rt==="manual"&&E||Rt==="outlook"&&!E)return null;const O=re?ke(m.end)<=J:W<ee;if(it&&O)return null;const U=_i(m.tagId);return y.jsxs("li",{className:`event-item${O?" past-event":""}`,onClick:()=>Za(m),title:`${m.name} (${Fh(m.start,m.end,!1)})`,children:[U&&y.jsx("span",{className:"tag-dot",style:{backgroundColor:U},title:Sn(m.tagId)}),m.outlookSynced&&y.jsx("span",{className:"outlook-icon",title:"From Outlook (live)",children:""}),m.icsImported&&!m.outlookSynced&&y.jsx("span",{className:"ics-icon",title:"Imported from .ics file",children:""}),y.jsx("span",{className:`event-name${r.wrapListNames?" wrap":""}`,children:m.name}),y.jsxs("span",{className:"list-end",children:[y.jsx("span",{className:"event-time",children:Fh(m.start,m.end,!1)}),y.jsx("button",{className:"action-btn delete",onClick:B=>{B.stopPropagation(),kl(m.id)},title:"Delete",children:""})]})]},m.id)})}),Qt&&y.jsxs("div",{className:"bulk-event-entry",children:[y.jsx("textarea",{value:Ko,onChange:m=>Po(m.target.value),placeholder:`Paste events (one per line):
Staff Meeting 10:00-12:15 ${ft()} [Internal]
Team meeting 14:00-14:30 ${ft()}`,rows:4,autoFocus:!0}),y.jsxs("div",{className:"bulk-event-actions",children:[y.jsx("button",{className:"btn-primary",onClick:Bu,disabled:!Ko.trim(),children:"Add Events"}),y.jsx("button",{className:"btn-secondary",onClick:()=>{Bo(!1),Po("")},children:"Cancel"})]})]}),y.jsxs("div",{className:"panel-section-actions",children:[y.jsx("button",{className:"add-btn secondary",onClick:Xa,children:"+ Add Event"}),y.jsx("button",{className:"clear-btn",onClick:()=>Bo(m=>!m),children:"Bulk Add"}),y.jsx("button",{className:"clear-btn ics-import-btn",onClick:()=>Ms.current?.click(),children:"Import .ics"}),y.jsx("input",{ref:Ms,type:"file",accept:".ics,.ical,.ifb,.icalendar",onChange:Ku,style:{display:"none"}}),oi&&(ct?y.jsx("button",{className:"clear-btn outlook-btn",onClick:Qo,disabled:qt==="fetching",children:qt==="fetching"?"Fetching...":" Outlook"}):y.jsx("button",{className:"clear-btn outlook-btn",onClick:Ai,children:"Connect Outlook"})),oi&&qt==="error"&&Va&&y.jsx("div",{className:"outlook-error",children:Va}),a.length>0&&y.jsx("button",{className:"clear-btn",onClick:Lu,children:La==="events"?"Copied!":"Export Events"}),a.filter(m=>m.date===W).some(m=>re?ke(m.end)<=J:W<ee)&&y.jsx("button",{className:"clear-btn",onClick:Mu,children:"Clear Past"}),a.some(m=>m.date===W)&&y.jsx("button",{className:"clear-btn",onClick:Ru,children:"Clear All"})]})]})]})]}),y.jsx("div",{className:"resize-handle resize-handle-h",onMouseDown:Sl}),y.jsx("div",{className:"resize-handle resize-handle-v",onMouseDown:Tl}),y.jsxs("section",{className:"calendar-panel",children:[ri.length>1&&y.jsxs("div",{className:"day-headers",children:[y.jsx("div",{className:"day-header-spacer"}),ri.map(m=>y.jsx("div",{className:`day-header${m===ee?" today":""}${m===W?" focused":""}${m<ee?" past":""}`,onClick:()=>de(m),children:bE(m)},m))]}),y.jsxs("div",{className:"calendar-container",ref:Si,children:[y.jsx("div",{className:"time-labels",style:{height:`${wi}px`},children:Zo.map(m=>y.jsxs("div",{className:"time-label",style:{position:"absolute",top:`${(m*60-Ot)*ut}px`,height:`${60*ut}px`},children:[m>12?m-12:m===0?12:m,":00 ",m>=12?"PM":"AM"]},m))}),ri.map((m,E)=>{const O=Qa[E],U=Al[E],B=El[E],Z=m===ee;return y.jsxs("div",{className:`calendar-grid day-column${Z?" today":""}${m===W&&ri.length>1?" focused":""}${m<ee?" past":""}`,style:{height:`${wi}px`,"--block-title-size":tf[r.calendarFontSize]?.title||"0.8rem","--block-time-size":tf[r.calendarFontSize]?.time||"0.65rem"},onClick:()=>ri.length>1&&de(m),children:[Zo.map((L,ue)=>y.jsx("div",{className:"hour-line",style:{top:`${(L*60-Ot)*ut}px`}},ue)),Hs>Ot&&y.jsx("div",{className:"dim-zone",style:{top:0,height:`${(Hs-Ot)*ut}px`}}),qa<Ut&&y.jsx("div",{className:"dim-zone",style:{top:`${(qa-Ot)*ut}px`,height:`${(Ut-qa)*ut}px`}}),Z&&J>=Ot&&J<=Ut&&y.jsx("div",{className:"current-time-line",style:{top:`${(J-Ot)*ut}px`},children:y.jsx("span",{className:"current-time-label",children:"Now"})}),O.map((L,ue)=>{const pe=L.type==="pause",ze=L.type==="task",Be=_i(L.tagId),vt=Ja(L),Xt=vt<40,tn=vt<25,jt=pe?"#f59e0b":Be||(ze?r.defaultTaskColor:r.defaultEventColor),cr=pe?r.darkMode?"#fbbf24":"#92400e":EO(jt,pe?.25:ze?.1:1,r.darkMode),ur=pe?L.name:ze?L.taskName:L.name;return y.jsx("div",{className:["calendar-block",`${L.type}-block`,L.isActive&&"active",L.isPast&&"past",L.isCompleted&&"completed-block",L.isPausedRemaining&&"paused-remaining",Xt&&"compact",tn&&"tiny"].filter(Boolean).join(" "),style:{...$o(L,ue,U),...pe?{color:cr}:{backgroundColor:ze?TO(jt,.1,r.darkMode):jt,color:cr,...ze?{borderLeft:`10px solid ${jt}`,borderRadius:(()=>{const Vs=B[L.taskId]||1,Oi=L.blockIndex===0,$a=L.blockIndex===Vs-1;return`${Oi?"5px":"0"} 5px 5px ${$a?"5px":"0"}`})()}:{}}},title:`${ur}
${Vh(L.start)} - ${Vh(L.end)}`,onClick:Vs=>{if(Vs.stopPropagation(),L.type==="task"){const Oi=l.find($a=>$a.id===L.taskId);Oi&&ea(Oi)}else if(L.type==="event"){const Oi=a.find($a=>$a.id===L.id);Oi&&Za(Oi)}},children:y.jsxs("div",{className:"block-content",children:[y.jsxs("span",{className:"block-name",children:[L.outlookSynced&&y.jsx("span",{className:"outlook-icon",children:""}),L.icsImported&&!L.outlookSynced&&y.jsx("span",{className:"ics-icon",children:""}),L.continuesBefore&&" ",ur,L.continuesAfter&&" ",L.isActive&&" "]}),y.jsx("span",{className:"block-time",children:Fh(L.start,L.end,ze)})]})},`${L.type}-${L.taskId||L.id}-${ue}`)})]},m)})]})]})]}),me&&y.jsx("div",{className:"modal-overlay",onMouseDown:()=>{ei.trim()?li():fe(!1)},children:y.jsxs("div",{className:"modal",onMouseDown:m=>m.stopPropagation(),children:[y.jsx("h3",{children:R?"Edit Task":"Add Tasks"}),y.jsxs("div",{className:"form-group",children:[y.jsxs("label",{children:[R?"Task Name":"Task Name(s)",!R&&y.jsx("span",{className:"label-hint",children:"  one per line for bulk add"})]}),R?y.jsx("input",{type:"text",value:ei,onChange:m=>qi(m.target.value),onKeyDown:lr,placeholder:"What do you need to do?",autoFocus:!0}):y.jsx("textarea",{value:ei,onChange:m=>qi(m.target.value),onKeyDown:lr,placeholder:r.smartDuration?`Enter tasks (one per line):
Tech note review
Sherlock #12345678 75
Firewatch investigation 60`:"Enter tasks (one per line)",rows:4,autoFocus:!0}),!R&&r.smartDuration&&y.jsx("p",{className:"form-hint",children:'Numbers at the end of a line set the duration (e.g., "task name 30" = 30 min)'})]}),y.jsxs("div",{className:"form-group",children:[y.jsxs("label",{children:[R?"Duration (minutes)":"Default Duration (minutes)",!R&&r.smartDuration&&y.jsx("span",{className:"label-hint",children:"  used when no number is specified"})]}),y.jsx("input",{type:"number",value:Ua,onChange:m=>ja(Number(m.target.value)),onKeyDown:R?lr:void 0,min:"5",max:"480"})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{children:"Tag"}),y.jsxs("div",{className:"tag-selector",children:[y.jsx("button",{className:`tag-option no-tag ${Os===null?"selected":""}`,onClick:()=>Is(null),title:"No tag",children:""}),h.map(m=>y.jsx("button",{className:`tag-option ${Os===m.id?"selected":""}`,onClick:()=>Is(m.id),style:{backgroundColor:m.color},title:m.name},m.id))]})]}),!R&&y.jsxs("label",{className:"toggle-row",children:[y.jsx("input",{type:"checkbox",checked:Gt,onChange:m=>gl(m.target.checked)}),y.jsx("span",{children:"Add to top of list"})]}),y.jsxs("div",{className:"modal-actions",children:[R&&y.jsx("button",{className:"btn-delete",onClick:()=>{wl(R.id),fe(!1)},children:"Delete"}),y.jsx("button",{className:"btn-secondary",onClick:()=>fe(!1),children:"Cancel"}),y.jsx("button",{className:"btn-primary",onClick:li,children:R?"Save Changes":"Add Task(s)"})]})]})}),D&&y.jsx("div",{className:"modal-overlay",onMouseDown:()=>ar(),children:y.jsxs("div",{className:"modal",onMouseDown:m=>m.stopPropagation(),children:[y.jsx("h3",{children:H?"Edit Event":"Add Event"}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{children:"Event Name"}),y.jsx("input",{type:"text",value:zo,onChange:m=>Rs(m.target.value),onKeyDown:Ml,placeholder:"Meeting name",autoFocus:!0})]}),y.jsxs("div",{className:"form-row",children:[y.jsxs("div",{className:"form-group",children:[y.jsx("label",{children:"Start"}),y.jsx("input",{type:"time",value:pn,onChange:m=>_l(m.target.value),ref:ii,onKeyDown:xl})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{children:"End"}),y.jsx("input",{type:"time",value:Ha,onChange:m=>Iu(m.target.value),ref:Ba,onKeyDown:Dl})]})]}),y.jsxs("div",{className:"form-row",children:[y.jsxs("div",{className:"form-group",children:[y.jsx("label",{children:"Date"}),y.jsx("input",{type:"date",value:Nt,onChange:m=>In(m.target.value),min:Ue,max:be})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{children:"Duration"}),y.jsx("div",{className:"quick-duration-btns",children:[30,60,90].map(m=>y.jsxs("button",{className:"quick-dur-btn",onClick:()=>{ni.current=!0,za(dn(ke(pn)+m))},children:[m,"m"]},m))})]})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{children:"Tag"}),y.jsxs("div",{className:"tag-selector",children:[y.jsx("button",{className:`tag-option no-tag ${Ns===null?"selected":""}`,onClick:()=>ti(null),title:"No tag",children:""}),h.map(m=>y.jsx("button",{className:`tag-option ${Ns===m.id?"selected":""}`,onClick:()=>ti(m.id),style:{backgroundColor:m.color},title:m.name},m.id))]})]}),y.jsxs("div",{className:"modal-actions",children:[H&&y.jsx("button",{className:"btn-delete",onClick:()=>{kl(H.id),Y(!1)},children:"Delete"}),y.jsx("button",{className:"btn-secondary",onClick:()=>Y(!1),children:"Cancel"}),y.jsx("button",{className:"btn-primary",onClick:ar,children:H?"Save Changes":"Add Event"})]})]})}),te&&y.jsx("div",{className:"modal-overlay",onMouseDown:()=>$(!1),children:y.jsxs("div",{className:"modal modal-wide",onMouseDown:m=>m.stopPropagation(),children:[y.jsx("h3",{children:"Settings"}),y.jsxs("div",{className:"settings-section",children:[y.jsx("h4",{children:"Working Hours"}),y.jsxs("div",{className:"form-row",children:[y.jsxs("div",{className:"form-group",children:[y.jsx("label",{children:"Start"}),y.jsx("input",{type:"time",value:r.workdayStart,onChange:m=>Te("workdayStart",m.target.value)})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{children:"End"}),y.jsx("input",{type:"time",value:r.workdayEnd,onChange:m=>Te("workdayEnd",m.target.value)})]})]})]}),y.jsxs("div",{className:"settings-section",children:[y.jsx("h4",{children:"Extended View Hours"}),y.jsxs("label",{className:"toggle-row",children:[y.jsx("input",{type:"checkbox",checked:r.useExtendedHours,onChange:m=>Te("useExtendedHours",m.target.checked)}),y.jsx("span",{children:"Show hours outside working hours"})]}),r.useExtendedHours&&y.jsxs(y.Fragment,{children:[y.jsx("p",{className:"settings-hint",children:"Calendar range  dimmed outside working hours"}),y.jsxs("div",{className:"form-row",children:[y.jsxs("div",{className:"form-group",children:[y.jsx("label",{children:"Start"}),y.jsx("input",{type:"time",value:r.extendedStart,onChange:m=>Te("extendedStart",m.target.value)})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{children:"End"}),y.jsx("input",{type:"time",value:r.extendedEnd,onChange:m=>Te("extendedEnd",m.target.value)})]})]})]})]}),y.jsxs("div",{className:"settings-section",children:[y.jsx("h4",{children:"Defaults"}),y.jsxs("div",{className:"form-row",children:[y.jsxs("div",{className:"form-group",children:[y.jsx("label",{children:"Task Duration (min)"}),y.jsx("input",{type:"number",value:r.defaultTaskDuration,onChange:m=>Te("defaultTaskDuration",Number(m.target.value)),min:"5",max:"480"})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{children:"Event Duration (min)"}),y.jsx("input",{type:"number",value:r.defaultEventDuration,onChange:m=>Te("defaultEventDuration",Number(m.target.value)),min:"5",max:"480"})]})]}),y.jsxs("div",{className:"form-row",children:[y.jsxs("div",{className:"form-group",children:[y.jsx("label",{children:"Task Color"}),y.jsx("input",{type:"color",value:r.defaultTaskColor,onChange:m=>Te("defaultTaskColor",m.target.value),className:"color-input"})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{children:"Event Color"}),y.jsx("input",{type:"color",value:r.defaultEventColor,onChange:m=>Te("defaultEventColor",m.target.value),className:"color-input"})]})]})]}),y.jsxs("div",{className:"settings-section",children:[y.jsx("h4",{children:"Calendar"}),y.jsxs("div",{className:"form-row",children:[y.jsxs("div",{className:"form-group",children:[y.jsx("label",{children:"Min Fragment (min)"}),y.jsx("input",{type:"number",value:r.minFragmentMinutes,onChange:m=>Te("minFragmentMinutes",Math.max(1,Math.min(10,Number(m.target.value)))),min:"1",max:"10"}),y.jsx("p",{className:"form-hint",children:"Smallest task fragment to show (110 min)"})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{children:"Font Size"}),y.jsx("select",{value:r.calendarFontSize,onChange:m=>Te("calendarFontSize",m.target.value),className:"select-input",children:Object.entries(tf).map(([m,E])=>y.jsx("option",{value:m,children:E.label},m))})]})]})]}),y.jsxs("div",{className:"settings-section",children:[y.jsx("h4",{children:"Behavior"}),y.jsxs("label",{className:"toggle-row",children:[y.jsx("input",{type:"checkbox",checked:r.autoStartNext,onChange:m=>Te("autoStartNext",m.target.checked)}),y.jsx("span",{children:"Auto-start next task on completion"})]}),y.jsxs("label",{className:"toggle-row",children:[y.jsx("input",{type:"checkbox",checked:r.smartDuration,onChange:m=>Te("smartDuration",m.target.checked)}),y.jsx("span",{children:"Smart duration  numbers at end of task name set duration"})]}),y.jsxs("label",{className:"toggle-row",children:[y.jsx("input",{type:"checkbox",checked:r.wrapListNames,onChange:m=>Te("wrapListNames",m.target.checked)}),y.jsx("span",{children:"Wrap names in list view"})]}),y.jsxs("label",{className:"toggle-row",children:[y.jsx("input",{type:"checkbox",checked:r.restrictTasksToWorkHours,onChange:m=>Te("restrictTasksToWorkHours",m.target.checked)}),y.jsx("span",{children:"Restrict tasks to work hours only"})]}),y.jsxs("label",{className:"toggle-row",children:[y.jsx("input",{type:"checkbox",checked:r.darkMode,onChange:m=>Te("darkMode",m.target.checked)}),y.jsx("span",{children:"Dark mode"})]})]}),y.jsxs("div",{className:"settings-section",children:[y.jsx("h4",{children:"Tags"}),y.jsx("div",{className:"tag-edit-list",children:h.map(m=>y.jsxs("div",{className:`tag-edit-row${lt===m.id?" dragging":""}${Ti===m.id&&lt!==m.id?" drag-over":""}`,draggable:!0,onDragStart:E=>Gu(E,m.id),onDragOver:E=>Vu(E,m.id),onDrop:E=>Fu(E,m.id),onDragEnd:Yu,children:[y.jsx("span",{className:"drag-handle",title:"Drag to reorder",children:""}),y.jsx("input",{type:"color",value:m.color,onChange:E=>Il(m.id,{color:E.target.value}),className:"color-input"}),y.jsx("input",{type:"text",value:m.name,onChange:E=>Il(m.id,{name:E.target.value}),className:"tag-name-input"}),y.jsx("button",{className:"action-btn delete",onClick:()=>Hu(m.id),children:""})]},m.id))}),y.jsx("button",{className:"add-btn small",onClick:ju,children:"+ Add Tag"})]}),y.jsxs("div",{className:"settings-section",children:[y.jsx("h4",{children:"Calendar Import Filters"}),y.jsx("p",{className:"settings-hint",children:"Which event statuses to include when importing from .ics files or Outlook live sync"}),y.jsxs("label",{className:"toggle-row",children:[y.jsx("input",{type:"checkbox",checked:r.icsImportBusy,onChange:m=>Te("icsImportBusy",m.target.checked)}),y.jsx("span",{children:"Busy"})]}),y.jsxs("label",{className:"toggle-row",children:[y.jsx("input",{type:"checkbox",checked:r.icsImportOof,onChange:m=>Te("icsImportOof",m.target.checked)}),y.jsx("span",{children:"Out of Office"})]}),y.jsxs("label",{className:"toggle-row",children:[y.jsx("input",{type:"checkbox",checked:r.icsImportTentative,onChange:m=>Te("icsImportTentative",m.target.checked)}),y.jsx("span",{children:"Tentative"})]}),y.jsxs("label",{className:"toggle-row",children:[y.jsx("input",{type:"checkbox",checked:r.icsImportWorkingElsewhere,onChange:m=>Te("icsImportWorkingElsewhere",m.target.checked)}),y.jsx("span",{children:"Working Elsewhere"})]}),y.jsxs("label",{className:"toggle-row",children:[y.jsx("input",{type:"checkbox",checked:r.icsImportFree,onChange:m=>Te("icsImportFree",m.target.checked)}),y.jsx("span",{children:"Free"})]}),y.jsxs("div",{style:{marginTop:"0.75rem"},children:[y.jsxs("label",{className:"toggle-row",children:[y.jsx("input",{type:"checkbox",checked:r.icsImportMeetingsOnly,onChange:m=>Te("icsImportMeetingsOnly",m.target.checked)}),y.jsx("span",{children:"Meetings only (skip appointments with no attendees)"})]}),y.jsxs("label",{className:"toggle-row",children:[y.jsx("span",{children:"Previous imports:"}),y.jsxs("select",{value:r.icsReplaceOnImport===!0?"yes":r.icsReplaceOnImport===!1?"no":r.icsReplaceOnImport,onChange:m=>Te("icsReplaceOnImport",m.target.value),children:[y.jsx("option",{value:"no",children:"Keep (deduplicate)"}),y.jsx("option",{value:"yes",children:"Clear before importing"}),y.jsx("option",{value:"ask",children:"Ask each time"})]})]})]}),y.jsxs("div",{style:{marginTop:"0.5rem"},children:[y.jsxs("button",{className:"btn-secondary",onClick:Pu,children:["Category Mapping",(r.icsCategoryRules||[]).length>0?` (${r.icsCategoryRules.length} saved)`:""]}),y.jsx("p",{className:"form-hint",children:"Map Outlook categories to tags or exclude them during import"})]})]}),oi&&y.jsxs("div",{className:"settings-section",children:[y.jsx("h4",{children:"Outlook Calendar (Live)"}),y.jsx("p",{className:"settings-hint",children:"Connect to your Outlook calendar to automatically sync events"}),ct?y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"outlook-status-row",children:[y.jsx("span",{className:`outlook-indicator ${qt}`}),y.jsxs("span",{children:[qt==="fetching"&&"Fetching events...",qt==="idle"&&vn&&`Last fetched ${vn.toLocaleTimeString([],{hour:"numeric",minute:"2-digit"})}`,qt==="idle"&&!vn&&"Connected",qt==="error"&&(Va||"Error fetching events")]}),y.jsx("button",{className:"btn-secondary",onClick:Qo,disabled:qt==="fetching",style:{marginLeft:"auto"},children:"Refresh Now"})]}),y.jsx("p",{className:"settings-hint",style:{marginTop:"0.5rem"},children:"Uses the same status filters as calendar import (above). Events refresh automatically every 5 minutes."}),y.jsx("button",{className:"btn-secondary",style:{marginTop:"0.5rem"},onClick:ku,children:"Disconnect"})]}):y.jsx("button",{className:"btn-primary",onClick:Ai,children:"Sign in with Microsoft"})]}),y.jsxs("div",{className:"settings-section",children:[y.jsx("h4",{children:"Debug"}),y.jsxs("label",{className:"toggle-row",children:[y.jsx("input",{type:"checkbox",checked:r.debugMode,onChange:m=>Te("debugMode",m.target.checked)}),y.jsx("span",{children:"Debug mode"})]}),r.debugMode&&y.jsxs("div",{className:"form-group",style:{marginTop:"0.5rem"},children:[y.jsx("label",{children:"Time offset (minutes)"}),y.jsx("input",{type:"number",value:r.debugTimeOffset,onChange:m=>Te("debugTimeOffset",Number(m.target.value))}),y.jsxs("p",{className:"form-hint",children:["Effective time: ",Vh(dn(cn()+(r.debugTimeOffset||0)))," ","(",r.debugTimeOffset>0?"+":"",r.debugTimeOffset||0,"m from real time)"]}),y.jsxs("p",{className:"settings-hint",style:{marginTop:"1rem",fontSize:"0.85em",opacity:.7},children:["Last updated: ",SO]})]})]}),$i,y.jsxs("div",{className:"settings-section",children:[y.jsx("h4",{children:"Transfer Settings"}),y.jsx("p",{className:"settings-hint",children:"Export or import your settings and tags for use on another device"}),y.jsxs("div",{className:"transfer-btns",children:[y.jsx("button",{className:"btn-secondary",onClick:or,children:"Export Settings"}),y.jsx("button",{className:"btn-secondary",onClick:()=>Vo.current?.click(),children:"Import Settings"}),y.jsx("input",{ref:Vo,type:"file",accept:".json",onChange:Rl,style:{display:"none"}})]})]}),y.jsx("div",{className:"modal-actions",children:y.jsx("button",{className:"btn-primary",onClick:()=>$(!1),children:"Done"})})]})}),Da&&y.jsx("div",{className:"modal-overlay",style:{zIndex:200},onMouseDown:()=>ks(null),children:y.jsxs("div",{className:"modal",onMouseDown:m=>m.stopPropagation(),children:[y.jsx("h3",{children:"Clear previously imported events before importing?"}),y.jsxs("div",{className:"modal-actions",children:[y.jsx("button",{onClick:()=>{const{newEvents:m}=Da;ks(null),rr(m,!1)},children:"Keep (deduplicate)"}),y.jsx("button",{className:"primary",onClick:()=>{const{newEvents:m}=Da;ks(null),rr(m,!0)},children:"Clear before importing"})]})]})}),Us&&y.jsx("div",{className:"modal-overlay",style:{zIndex:200},onMouseDown:()=>Wi(!0),children:y.jsxs("div",{className:"modal",onMouseDown:m=>m.stopPropagation(),children:[y.jsx("h3",{children:"Clear previously synced Outlook events?"}),y.jsxs("div",{className:"modal-actions",children:[y.jsx("button",{onClick:()=>Wi(!1),children:"Keep (deduplicate)"}),y.jsx("button",{className:"primary",onClick:()=>Wi(!0),children:"Clear before syncing"})]})]})}),pt&&y.jsx("div",{className:"modal-overlay",style:{zIndex:200},onMouseDown:()=>{mn(null),yt([])},children:y.jsxs("div",{className:"modal modal-wide",onMouseDown:m=>m.stopPropagation(),children:[y.jsx("h3",{children:pt.mode==="settings"?"Category Mapping":"Map Categories"}),(pt.mode==="import"||pt.mode==="outlook-import")&&pt.uncategorized>0&&y.jsxs("p",{className:"form-hint",style:{marginBottom:"0.75rem"},children:[pt.uncategorized," event",pt.uncategorized!==1?"s":""," without a category will always be imported."]}),y.jsx("div",{className:"category-mapping-list",children:_t.map((m,E)=>y.jsxs("div",{className:`category-mapping-row${m.include===!1?" excluded":""}`,children:[pt.mode==="settings"?y.jsx("input",{type:"text",className:"category-rule-name",value:m.category,onChange:O=>{const U=[..._t];U[E]={...U[E],category:O.target.value},yt(U)},placeholder:"Category name"}):y.jsxs("span",{className:"category-mapping-name",children:[m.category,pt.catCounts?.[m.category]!=null&&y.jsxs("span",{className:"category-mapping-count",children:["(",pt.catCounts[m.category],")"]})]}),y.jsxs("label",{className:"category-mapping-toggle",children:[y.jsx("input",{type:"checkbox",checked:m.include!==!1,onChange:O=>{const U=[..._t];U[E]={...U[E],include:O.target.checked},O.target.checked||(U[E].tagId=null),yt(U)}}),"Include"]}),m.include!==!1&&y.jsxs("div",{className:"tag-selector compact",children:[y.jsx("button",{className:`tag-option no-tag ${m.tagId===null?"selected":""}`,onClick:()=>{const O=[..._t];O[E]={...O[E],tagId:null},yt(O)},title:"No tag",children:""}),h.map(O=>y.jsx("button",{className:`tag-option ${m.tagId===O.id?"selected":""}`,onClick:()=>{const U=[..._t];U[E]={...U[E],tagId:O.id},yt(U)},style:{backgroundColor:O.color},title:O.name},O.id))]}),pt.mode==="settings"&&y.jsx("button",{className:"action-btn delete",onClick:()=>yt(O=>O.filter((U,B)=>B!==E)),title:"Remove rule",children:""})]},E))}),pt.mode==="settings"&&y.jsx("button",{className:"btn-secondary",style:{marginTop:"0.5rem"},onClick:()=>yt(m=>[...m,{category:"",include:!0,tagId:null}]),children:"+ Add Category"}),y.jsxs("div",{className:"modal-actions",style:{marginTop:"1rem"},children:[y.jsx("button",{className:"btn-secondary",onClick:()=>{mn(null),yt([])},children:"Cancel"}),pt.mode==="import"?y.jsxs(y.Fragment,{children:[y.jsx("button",{className:"btn-primary",onClick:()=>{const m=_t.filter(E=>E.category.trim());Ks(pt.filteredEvents,m),mn(null),yt([])},children:"Import"}),y.jsx("button",{className:"btn-primary",onClick:()=>{const m=_t.filter(E=>E.category.trim());Te("icsCategoryRules",m),Ks(pt.filteredEvents,m),mn(null),yt([])},children:"Remember & Import"})]}):pt.mode==="outlook-import"?y.jsxs(y.Fragment,{children:[y.jsx("button",{className:"btn-primary",onClick:()=>{const m=_t.filter(E=>E.category.trim());yl(m),mn(null),yt([])},children:"Apply"}),y.jsx("button",{className:"btn-primary",onClick:()=>{const m=_t.filter(E=>E.category.trim());Te("icsCategoryRules",m),yl(m),mn(null),yt([])},children:"Remember & Apply"})]}):y.jsx("button",{className:"btn-primary",onClick:()=>{const m=_t.filter(E=>E.category.trim());Te("icsCategoryRules",m),mn(null),yt([])},children:"Save"})]})]})})]})}CE.createRoot(document.getElementById("root")).render(y.jsx(j.StrictMode,{children:y.jsx(IO,{})}));
