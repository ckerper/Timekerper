(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const d of r)if(d.type==="childList")for(const h of d.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&o(h)}).observe(document,{childList:!0,subtree:!0});function a(r){const d={};return r.integrity&&(d.integrity=r.integrity),r.referrerPolicy&&(d.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?d.credentials="include":r.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function o(r){if(r.ep)return;r.ep=!0;const d=a(r);fetch(r.href,d)}})();var xh={exports:{}},qr={};var Hy;function oE(){if(Hy)return qr;Hy=1;var l=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function a(o,r,d){var h=null;if(d!==void 0&&(h=""+d),r.key!==void 0&&(h=""+r.key),"key"in r){d={};for(var f in r)f!=="key"&&(d[f]=r[f])}else d=r;return r=d.ref,{$$typeof:l,type:o,key:h,ref:r!==void 0?r:null,props:d}}return qr.Fragment=n,qr.jsx=a,qr.jsxs=a,qr}var zy;function rE(){return zy||(zy=1,xh.exports=oE()),xh.exports}var v=rE(),Dh={exports:{}},Te={};var Ly;function lE(){if(Ly)return Te;Ly=1;var l=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),h=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),I=Symbol.iterator;function x(b){return b===null||typeof b!="object"?null:(b=I&&b[I]||b["@@iterator"],typeof b=="function"?b:null)}var F={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Y=Object.assign,ge={};function Z(b,M,J){this.props=b,this.context=M,this.refs=ge,this.updater=J||F}Z.prototype.isReactComponent={},Z.prototype.setState=function(b,M){if(typeof b!="object"&&typeof b!="function"&&b!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,b,M,"setState")},Z.prototype.forceUpdate=function(b){this.updater.enqueueForceUpdate(this,b,"forceUpdate")};function ue(){}ue.prototype=Z.prototype;function ie(b,M,J){this.props=b,this.context=M,this.refs=ge,this.updater=J||F}var Ce=ie.prototype=new ue;Ce.constructor=ie,Y(Ce,Z.prototype),Ce.isPureReactComponent=!0;var te=Array.isArray;function W(){}var se={H:null,A:null,T:null,S:null},Ee=Object.prototype.hasOwnProperty;function He(b,M,J){var P=J.ref;return{$$typeof:l,type:b,key:M,ref:P!==void 0?P:null,props:J}}function we(b,M){return He(b.type,M,b.props)}function Ye(b){return typeof b=="object"&&b!==null&&b.$$typeof===l}function ke(b){var M={"=":"=0",":":"=2"};return"$"+b.replace(/[=:]/g,function(J){return M[J]})}var ye=/\/+/g;function tt(b,M){return typeof b=="object"&&b!==null&&b.key!=null?ke(""+b.key):M.toString(36)}function Re(b){switch(b.status){case"fulfilled":return b.value;case"rejected":throw b.reason;default:switch(typeof b.status=="string"?b.then(W,W):(b.status="pending",b.then(function(M){b.status==="pending"&&(b.status="fulfilled",b.value=M)},function(M){b.status==="pending"&&(b.status="rejected",b.reason=M)})),b.status){case"fulfilled":return b.value;case"rejected":throw b.reason}}throw b}function j(b,M,J,P,$){var re=typeof b;(re==="undefined"||re==="boolean")&&(b=null);var me=!1;if(b===null)me=!0;else switch(re){case"bigint":case"string":case"number":me=!0;break;case"object":switch(b.$$typeof){case l:case n:me=!0;break;case T:return me=b._init,j(me(b._payload),M,J,P,$)}}if(me)return $=$(b),me=P===""?"."+tt(b,0):P,te($)?(J="",me!=null&&(J=me.replace(ye,"$&/")+"/"),j($,M,J,"",function(Ot){return Ot})):$!=null&&(Ye($)&&($=we($,J+($.key==null||b&&b.key===$.key?"":(""+$.key).replace(ye,"$&/")+"/")+me)),M.push($)),1;me=0;var it=P===""?".":P+":";if(te(b))for(var Ue=0;Ue<b.length;Ue++)P=b[Ue],re=it+tt(P,Ue),me+=j(P,M,J,re,$);else if(Ue=x(b),typeof Ue=="function")for(b=Ue.call(b),Ue=0;!(P=b.next()).done;)P=P.value,re=it+tt(P,Ue++),me+=j(P,M,J,re,$);else if(re==="object"){if(typeof b.then=="function")return j(Re(b),M,J,P,$);throw M=String(b),Error("Objects are not valid as a React child (found: "+(M==="[object Object]"?"object with keys {"+Object.keys(b).join(", ")+"}":M)+"). If you meant to render a collection of children, use an array instead.")}return me}function q(b,M,J){if(b==null)return b;var P=[],$=0;return j(b,P,"","",function(re){return M.call(J,re,$++)}),P}function oe(b){if(b._status===-1){var M=b._result;M=M(),M.then(function(J){(b._status===0||b._status===-1)&&(b._status=1,b._result=J)},function(J){(b._status===0||b._status===-1)&&(b._status=2,b._result=J)}),b._status===-1&&(b._status=0,b._result=M)}if(b._status===1)return b._result.default;throw b._result}var ne=typeof reportError=="function"?reportError:function(b){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var M=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof b=="object"&&b!==null&&typeof b.message=="string"?String(b.message):String(b),error:b});if(!window.dispatchEvent(M))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",b);return}console.error(b)},he={map:q,forEach:function(b,M,J){q(b,function(){M.apply(this,arguments)},J)},count:function(b){var M=0;return q(b,function(){M++}),M},toArray:function(b){return q(b,function(M){return M})||[]},only:function(b){if(!Ye(b))throw Error("React.Children.only expected to receive a single React element child.");return b}};return Te.Activity=S,Te.Children=he,Te.Component=Z,Te.Fragment=a,Te.Profiler=r,Te.PureComponent=ie,Te.StrictMode=o,Te.Suspense=y,Te.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=se,Te.__COMPILER_RUNTIME={__proto__:null,c:function(b){return se.H.useMemoCache(b)}},Te.cache=function(b){return function(){return b.apply(null,arguments)}},Te.cacheSignal=function(){return null},Te.cloneElement=function(b,M,J){if(b==null)throw Error("The argument must be a React element, but you passed "+b+".");var P=Y({},b.props),$=b.key;if(M!=null)for(re in M.key!==void 0&&($=""+M.key),M)!Ee.call(M,re)||re==="key"||re==="__self"||re==="__source"||re==="ref"&&M.ref===void 0||(P[re]=M[re]);var re=arguments.length-2;if(re===1)P.children=J;else if(1<re){for(var me=Array(re),it=0;it<re;it++)me[it]=arguments[it+2];P.children=me}return He(b.type,$,P)},Te.createContext=function(b){return b={$$typeof:h,_currentValue:b,_currentValue2:b,_threadCount:0,Provider:null,Consumer:null},b.Provider=b,b.Consumer={$$typeof:d,_context:b},b},Te.createElement=function(b,M,J){var P,$={},re=null;if(M!=null)for(P in M.key!==void 0&&(re=""+M.key),M)Ee.call(M,P)&&P!=="key"&&P!=="__self"&&P!=="__source"&&($[P]=M[P]);var me=arguments.length-2;if(me===1)$.children=J;else if(1<me){for(var it=Array(me),Ue=0;Ue<me;Ue++)it[Ue]=arguments[Ue+2];$.children=it}if(b&&b.defaultProps)for(P in me=b.defaultProps,me)$[P]===void 0&&($[P]=me[P]);return He(b,re,$)},Te.createRef=function(){return{current:null}},Te.forwardRef=function(b){return{$$typeof:f,render:b}},Te.isValidElement=Ye,Te.lazy=function(b){return{$$typeof:T,_payload:{_status:-1,_result:b},_init:oe}},Te.memo=function(b,M){return{$$typeof:p,type:b,compare:M===void 0?null:M}},Te.startTransition=function(b){var M=se.T,J={};se.T=J;try{var P=b(),$=se.S;$!==null&&$(J,P),typeof P=="object"&&P!==null&&typeof P.then=="function"&&P.then(W,ne)}catch(re){ne(re)}finally{M!==null&&J.types!==null&&(M.types=J.types),se.T=M}},Te.unstable_useCacheRefresh=function(){return se.H.useCacheRefresh()},Te.use=function(b){return se.H.use(b)},Te.useActionState=function(b,M,J){return se.H.useActionState(b,M,J)},Te.useCallback=function(b,M){return se.H.useCallback(b,M)},Te.useContext=function(b){return se.H.useContext(b)},Te.useDebugValue=function(){},Te.useDeferredValue=function(b,M){return se.H.useDeferredValue(b,M)},Te.useEffect=function(b,M){return se.H.useEffect(b,M)},Te.useEffectEvent=function(b){return se.H.useEffectEvent(b)},Te.useId=function(){return se.H.useId()},Te.useImperativeHandle=function(b,M,J){return se.H.useImperativeHandle(b,M,J)},Te.useInsertionEffect=function(b,M){return se.H.useInsertionEffect(b,M)},Te.useLayoutEffect=function(b,M){return se.H.useLayoutEffect(b,M)},Te.useMemo=function(b,M){return se.H.useMemo(b,M)},Te.useOptimistic=function(b,M){return se.H.useOptimistic(b,M)},Te.useReducer=function(b,M,J){return se.H.useReducer(b,M,J)},Te.useRef=function(b){return se.H.useRef(b)},Te.useState=function(b){return se.H.useState(b)},Te.useSyncExternalStore=function(b,M,J){return se.H.useSyncExternalStore(b,M,J)},Te.useTransition=function(){return se.H.useTransition()},Te.version="19.2.4",Te}var By;function yf(){return By||(By=1,Dh.exports=lE()),Dh.exports}var z=yf(),Uh={exports:{}},Jr={},jh={exports:{}},Hh={};var Ky;function cE(){return Ky||(Ky=1,(function(l){function n(j,q){var oe=j.length;j.push(q);e:for(;0<oe;){var ne=oe-1>>>1,he=j[ne];if(0<r(he,q))j[ne]=q,j[oe]=he,oe=ne;else break e}}function a(j){return j.length===0?null:j[0]}function o(j){if(j.length===0)return null;var q=j[0],oe=j.pop();if(oe!==q){j[0]=oe;e:for(var ne=0,he=j.length,b=he>>>1;ne<b;){var M=2*(ne+1)-1,J=j[M],P=M+1,$=j[P];if(0>r(J,oe))P<he&&0>r($,J)?(j[ne]=$,j[P]=oe,ne=P):(j[ne]=J,j[M]=oe,ne=M);else if(P<he&&0>r($,oe))j[ne]=$,j[P]=oe,ne=P;else break e}}return q}function r(j,q){var oe=j.sortIndex-q.sortIndex;return oe!==0?oe:j.id-q.id}if(l.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;l.unstable_now=function(){return d.now()}}else{var h=Date,f=h.now();l.unstable_now=function(){return h.now()-f}}var y=[],p=[],T=1,S=null,I=3,x=!1,F=!1,Y=!1,ge=!1,Z=typeof setTimeout=="function"?setTimeout:null,ue=typeof clearTimeout=="function"?clearTimeout:null,ie=typeof setImmediate<"u"?setImmediate:null;function Ce(j){for(var q=a(p);q!==null;){if(q.callback===null)o(p);else if(q.startTime<=j)o(p),q.sortIndex=q.expirationTime,n(y,q);else break;q=a(p)}}function te(j){if(Y=!1,Ce(j),!F)if(a(y)!==null)F=!0,W||(W=!0,ke());else{var q=a(p);q!==null&&Re(te,q.startTime-j)}}var W=!1,se=-1,Ee=5,He=-1;function we(){return ge?!0:!(l.unstable_now()-He<Ee)}function Ye(){if(ge=!1,W){var j=l.unstable_now();He=j;var q=!0;try{e:{F=!1,Y&&(Y=!1,ue(se),se=-1),x=!0;var oe=I;try{t:{for(Ce(j),S=a(y);S!==null&&!(S.expirationTime>j&&we());){var ne=S.callback;if(typeof ne=="function"){S.callback=null,I=S.priorityLevel;var he=ne(S.expirationTime<=j);if(j=l.unstable_now(),typeof he=="function"){S.callback=he,Ce(j),q=!0;break t}S===a(y)&&o(y),Ce(j)}else o(y);S=a(y)}if(S!==null)q=!0;else{var b=a(p);b!==null&&Re(te,b.startTime-j),q=!1}}break e}finally{S=null,I=oe,x=!1}q=void 0}}finally{q?ke():W=!1}}}var ke;if(typeof ie=="function")ke=function(){ie(Ye)};else if(typeof MessageChannel<"u"){var ye=new MessageChannel,tt=ye.port2;ye.port1.onmessage=Ye,ke=function(){tt.postMessage(null)}}else ke=function(){Z(Ye,0)};function Re(j,q){se=Z(function(){j(l.unstable_now())},q)}l.unstable_IdlePriority=5,l.unstable_ImmediatePriority=1,l.unstable_LowPriority=4,l.unstable_NormalPriority=3,l.unstable_Profiling=null,l.unstable_UserBlockingPriority=2,l.unstable_cancelCallback=function(j){j.callback=null},l.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ee=0<j?Math.floor(1e3/j):5},l.unstable_getCurrentPriorityLevel=function(){return I},l.unstable_next=function(j){switch(I){case 1:case 2:case 3:var q=3;break;default:q=I}var oe=I;I=q;try{return j()}finally{I=oe}},l.unstable_requestPaint=function(){ge=!0},l.unstable_runWithPriority=function(j,q){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var oe=I;I=j;try{return q()}finally{I=oe}},l.unstable_scheduleCallback=function(j,q,oe){var ne=l.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?ne+oe:ne):oe=ne,j){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=oe+he,j={id:T++,callback:q,priorityLevel:j,startTime:oe,expirationTime:he,sortIndex:-1},oe>ne?(j.sortIndex=oe,n(p,j),a(y)===null&&j===a(p)&&(Y?(ue(se),se=-1):Y=!0,Re(te,oe-ne))):(j.sortIndex=he,n(y,j),F||x||(F=!0,W||(W=!0,ke()))),j},l.unstable_shouldYield=we,l.unstable_wrapCallback=function(j){var q=I;return function(){var oe=I;I=q;try{return j.apply(this,arguments)}finally{I=oe}}}})(Hh)),Hh}var Py;function uE(){return Py||(Py=1,jh.exports=cE()),jh.exports}var zh={exports:{}},Gt={};var Gy;function dE(){if(Gy)return Gt;Gy=1;var l=yf();function n(y){var p="https://react.dev/errors/"+y;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)p+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+y+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var o={d:{f:a,r:function(){throw Error(n(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},r=Symbol.for("react.portal");function d(y,p,T){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:S==null?null:""+S,children:y,containerInfo:p,implementation:T}}var h=l.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(y,p){if(y==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Gt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,Gt.createPortal=function(y,p){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(n(299));return d(y,p,null,T)},Gt.flushSync=function(y){var p=h.T,T=o.p;try{if(h.T=null,o.p=2,y)return y()}finally{h.T=p,o.p=T,o.d.f()}},Gt.preconnect=function(y,p){typeof y=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,o.d.C(y,p))},Gt.prefetchDNS=function(y){typeof y=="string"&&o.d.D(y)},Gt.preinit=function(y,p){if(typeof y=="string"&&p&&typeof p.as=="string"){var T=p.as,S=f(T,p.crossOrigin),I=typeof p.integrity=="string"?p.integrity:void 0,x=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;T==="style"?o.d.S(y,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:S,integrity:I,fetchPriority:x}):T==="script"&&o.d.X(y,{crossOrigin:S,integrity:I,fetchPriority:x,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Gt.preinitModule=function(y,p){if(typeof y=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var T=f(p.as,p.crossOrigin);o.d.M(y,{crossOrigin:T,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&o.d.M(y)},Gt.preload=function(y,p){if(typeof y=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var T=p.as,S=f(T,p.crossOrigin);o.d.L(y,T,{crossOrigin:S,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Gt.preloadModule=function(y,p){if(typeof y=="string")if(p){var T=f(p.as,p.crossOrigin);o.d.m(y,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:T,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else o.d.m(y)},Gt.requestFormReset=function(y){o.d.r(y)},Gt.unstable_batchedUpdates=function(y,p){return y(p)},Gt.useFormState=function(y,p,T){return h.H.useFormState(y,p,T)},Gt.useFormStatus=function(){return h.H.useHostTransitionStatus()},Gt.version="19.2.4",Gt}var Vy;function hE(){if(Vy)return zh.exports;Vy=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(n){console.error(n)}}return l(),zh.exports=dE(),zh.exports}var Fy;function fE(){if(Fy)return Jr;Fy=1;var l=uE(),n=yf(),a=hE();function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function d(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function h(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function f(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function y(e){if(d(e)!==e)throw Error(o(188))}function p(e){var t=e.alternate;if(!t){if(t=d(e),t===null)throw Error(o(188));return t!==e?null:e}for(var i=e,s=t;;){var c=i.return;if(c===null)break;var u=c.alternate;if(u===null){if(s=c.return,s!==null){i=s;continue}break}if(c.child===u.child){for(u=c.child;u;){if(u===i)return y(c),e;if(u===s)return y(c),t;u=u.sibling}throw Error(o(188))}if(i.return!==s.return)i=c,s=u;else{for(var g=!1,C=c.child;C;){if(C===i){g=!0,i=c,s=u;break}if(C===s){g=!0,s=c,i=u;break}C=C.sibling}if(!g){for(C=u.child;C;){if(C===i){g=!0,i=u,s=c;break}if(C===s){g=!0,s=u,i=c;break}C=C.sibling}if(!g)throw Error(o(189))}}if(i.alternate!==s)throw Error(o(190))}if(i.tag!==3)throw Error(o(188));return i.stateNode.current===i?e:t}function T(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=T(e),t!==null)return t;e=e.sibling}return null}var S=Object.assign,I=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),F=Symbol.for("react.portal"),Y=Symbol.for("react.fragment"),ge=Symbol.for("react.strict_mode"),Z=Symbol.for("react.profiler"),ue=Symbol.for("react.consumer"),ie=Symbol.for("react.context"),Ce=Symbol.for("react.forward_ref"),te=Symbol.for("react.suspense"),W=Symbol.for("react.suspense_list"),se=Symbol.for("react.memo"),Ee=Symbol.for("react.lazy"),He=Symbol.for("react.activity"),we=Symbol.for("react.memo_cache_sentinel"),Ye=Symbol.iterator;function ke(e){return e===null||typeof e!="object"?null:(e=Ye&&e[Ye]||e["@@iterator"],typeof e=="function"?e:null)}var ye=Symbol.for("react.client.reference");function tt(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===ye?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Y:return"Fragment";case Z:return"Profiler";case ge:return"StrictMode";case te:return"Suspense";case W:return"SuspenseList";case He:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case F:return"Portal";case ie:return e.displayName||"Context";case ue:return(e._context.displayName||"Context")+".Consumer";case Ce:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case se:return t=e.displayName||null,t!==null?t:tt(e.type)||"Memo";case Ee:t=e._payload,e=e._init;try{return tt(e(t))}catch{}}return null}var Re=Array.isArray,j=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe={pending:!1,data:null,method:null,action:null},ne=[],he=-1;function b(e){return{current:e}}function M(e){0>he||(e.current=ne[he],ne[he]=null,he--)}function J(e,t){he++,ne[he]=e.current,e.current=t}var P=b(null),$=b(null),re=b(null),me=b(null);function it(e,t){switch(J(re,t),J($,e),J(P,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?oy(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=oy(t),e=ry(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}M(P),J(P,e)}function Ue(){M(P),M($),M(re)}function Ot(e){e.memoizedState!==null&&J(me,e);var t=P.current,i=ry(t,e.type);t!==i&&(J($,e),J(P,i))}function Ci(e){$.current===e&&(M(P),M($)),me.current===e&&(M(me),Vr._currentValue=oe)}var bt,ei;function Bt(e){if(bt===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);bt=t&&t[1]||"",ei=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+bt+e+ei}var Rt=!1;function Ua(e,t){if(!e||Rt)return"";Rt=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(t){var V=function(){throw Error()};if(Object.defineProperty(V.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(V,[])}catch(U){var N=U}Reflect.construct(e,[],V)}else{try{V.call()}catch(U){N=U}e.call(V.prototype)}}else{try{throw Error()}catch(U){N=U}(V=e())&&typeof V.catch=="function"&&V.catch(function(){})}}catch(U){if(U&&N&&typeof U.stack=="string")return[U.stack,N.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var u=s.DetermineComponentFrameRoot(),g=u[0],C=u[1];if(g&&C){var A=g.split(`
`),R=C.split(`
`);for(c=s=0;s<A.length&&!A[s].includes("DetermineComponentFrameRoot");)s++;for(;c<R.length&&!R[c].includes("DetermineComponentFrameRoot");)c++;if(s===A.length||c===R.length)for(s=A.length-1,c=R.length-1;1<=s&&0<=c&&A[s]!==R[c];)c--;for(;1<=s&&0<=c;s--,c--)if(A[s]!==R[c]){if(s!==1||c!==1)do if(s--,c--,0>c||A[s]!==R[c]){var B=`
`+A[s].replace(" at new "," at ");return e.displayName&&B.includes("<anonymous>")&&(B=B.replace("<anonymous>",e.displayName)),B}while(1<=s&&0<=c);break}}}finally{Rt=!1,Error.prepareStackTrace=i}return(i=e?e.displayName||e.name:"")?Bt(i):""}function Os(e,t){switch(e.tag){case 26:case 27:case 5:return Bt(e.type);case 16:return Bt("Lazy");case 13:return e.child!==t&&t!==null?Bt("Suspense Fallback"):Bt("Suspense");case 19:return Bt("SuspenseList");case 0:case 15:return Ua(e.type,!1);case 11:return Ua(e.type.render,!1);case 1:return Ua(e.type,!0);case 31:return Bt("Activity");default:return""}}function ti(e){try{var t="",i=null;do t+=Os(e,i),i=e,e=e.return;while(e);return t}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}var Qi=Object.prototype.hasOwnProperty,ja=l.unstable_scheduleCallback,Ha=l.unstable_cancelCallback,Rs=l.unstable_shouldYield,Ns=l.unstable_requestPaint,Kt=l.unstable_now,pl=l.unstable_getCurrentPriorityLevel,Bo=l.unstable_ImmediatePriority,Ms=l.unstable_UserBlockingPriority,fn=l.unstable_NormalPriority,Ko=l.unstable_LowPriority,za=l.unstable_IdlePriority,La=l.log,xs=l.unstable_setDisableYieldValue,ni=null,Nt=null;function bn(e){if(typeof La=="function"&&xs(e),Nt&&typeof Nt.setStrictMode=="function")try{Nt.setStrictMode(ni,e)}catch{}}var Yt=Math.clz32?Math.clz32:Vo,Po=Math.log,Go=Math.LN2;function Vo(e){return e>>>=0,e===0?32:31-(Po(e)/Go|0)|0}var Ba=256,Si=262144,ii=4194304;function ai(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ka(e,t,i){var s=e.pendingLanes;if(s===0)return 0;var c=0,u=e.suspendedLanes,g=e.pingedLanes;e=e.warmLanes;var C=s&134217727;return C!==0?(s=C&~u,s!==0?c=ai(s):(g&=C,g!==0?c=ai(g):i||(i=C&~e,i!==0&&(c=ai(i))))):(C=s&~u,C!==0?c=ai(C):g!==0?c=ai(g):i||(i=s&~e,i!==0&&(c=ai(i)))),c===0?0:t!==0&&t!==c&&(t&u)===0&&(u=c&-c,i=t&-t,u>=i||u===32&&(i&4194048)!==0)?t:c}function Ti(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Fo(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Yo(){var e=ii;return ii<<=1,(ii&62914560)===0&&(ii=4194304),e}function Ds(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function Pa(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Tu(e,t,i,s,c,u){var g=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var C=e.entanglements,A=e.expirationTimes,R=e.hiddenUpdates;for(i=g&~i;0<i;){var B=31-Yt(i),V=1<<B;C[B]=0,A[B]=-1;var N=R[B];if(N!==null)for(R[B]=null,B=0;B<N.length;B++){var U=N[B];U!==null&&(U.lane&=-536870913)}i&=~V}s!==0&&yl(e,s,0),u!==0&&c===0&&e.tag!==0&&(e.suspendedLanes|=u&~(g&~t))}function yl(e,t,i){e.pendingLanes|=t,e.suspendedLanes&=~t;var s=31-Yt(t);e.entangledLanes|=t,e.entanglements[s]=e.entanglements[s]|1073741824|i&261930}function vl(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var s=31-Yt(i),c=1<<s;c&t|e[s]&t&&(e[s]|=t),i&=~c}}function Ga(e,t){var i=t&-t;return i=(i&42)!==0?1:qi(i),(i&(e.suspendedLanes|t))!==0?0:i}function qi(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ji(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Us(){var e=q.p;return e!==0?e:(e=window.event,e===void 0?32:Ry(e.type))}function Qo(e,t){var i=q.p;try{return q.p=e,t()}finally{q.p=i}}var wn=Math.random().toString(36).slice(2),lt="__reactFiber$"+wn,wt="__reactProps$"+wn,Ei="__reactContainer$"+wn,Va="__reactEvents$"+wn,Ai="__reactListeners$"+wn,Xi="__reactHandles$"+wn,si="__reactResources$"+wn,gn="__reactMarker$"+wn;function qo(e){delete e[lt],delete e[wt],delete e[Va],delete e[Ai],delete e[Xi]}function Zi(e){var t=e[lt];if(t)return t;for(var i=e.parentNode;i;){if(t=i[Ei]||i[lt]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=gy(e);e!==null;){if(i=e[lt])return i;e=gy(e)}return t}e=i,i=e.parentNode}return null}function oi(e){if(e=e[lt]||e[Ei]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Pe(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(o(33))}function ri(e){var t=e[si];return t||(t=e[si]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function ut(e){e[gn]=!0}var Qt=new Set,Fa={};function mn(e,t){bi(e,t),bi(e+"Capture",t)}function bi(e,t){for(Fa[e]=t,e=0;e<t.length;e++)Qt.add(t[e])}var Eu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Jo={},js={};function Hs(e){return Qi.call(js,e)?!0:Qi.call(Jo,e)?!1:Eu.test(e)?js[e]=!0:(Jo[e]=!0,!1)}function zs(e,t,i){if(Hs(t))if(i===null)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var s=t.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+i)}}function Ls(e,t,i){if(i===null)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+i)}}function Bn(e,t,i,s){if(s===null)e.removeAttribute(i);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttributeNS(t,i,""+s)}}function Wt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ya(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function li(e,t,i){var s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var c=s.get,u=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(g){i=""+g,u.call(this,g)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return i},setValue:function(g){i=""+g},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Xo(e){if(!e._valueTracker){var t=Ya(e)?"checked":"value";e._valueTracker=li(e,t,""+e[t])}}function Bs(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),s="";return e&&(s=Ya(e)?e.checked?"true":"false":e.value),e=s,e!==i?(t.setValue(e),!0):!1}function $i(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Zo=/[\n"\\]/g;function ct(e){return e.replace(Zo,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function $o(e,t,i,s,c,u,g,C){e.name="",g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"?e.type=g:e.removeAttribute("type"),t!=null?g==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Wt(t)):e.value!==""+Wt(t)&&(e.value=""+Wt(t)):g!=="submit"&&g!=="reset"||e.removeAttribute("value"),t!=null?wi(e,g,Wt(t)):i!=null?wi(e,g,Wt(i)):s!=null&&e.removeAttribute("value"),c==null&&u!=null&&(e.defaultChecked=!!u),c!=null&&(e.checked=c&&typeof c!="function"&&typeof c!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?e.name=""+Wt(C):e.removeAttribute("name")}function Cl(e,t,i,s,c,u,g,C){if(u!=null&&typeof u!="function"&&typeof u!="symbol"&&typeof u!="boolean"&&(e.type=u),t!=null||i!=null){if(!(u!=="submit"&&u!=="reset"||t!=null)){Xo(e);return}i=i!=null?""+Wt(i):"",t=t!=null?""+Wt(t):i,C||t===e.value||(e.value=t),e.defaultValue=t}s=s??c,s=typeof s!="function"&&typeof s!="symbol"&&!!s,e.checked=C?e.checked:!!s,e.defaultChecked=!!s,g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(e.name=g),Xo(e)}function wi(e,t,i){t==="number"&&$i(e.ownerDocument)===e||e.defaultValue===""+i||(e.defaultValue=""+i)}function _n(e,t,i,s){if(e=e.options,t){t={};for(var c=0;c<i.length;c++)t["$"+i[c]]=!0;for(i=0;i<e.length;i++)c=t.hasOwnProperty("$"+e[i].value),e[i].selected!==c&&(e[i].selected=c),c&&s&&(e[i].defaultSelected=!0)}else{for(i=""+Wt(i),t=null,c=0;c<e.length;c++){if(e[c].value===i){e[c].selected=!0,s&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function Sl(e,t,i){if(t!=null&&(t=""+Wt(t),t!==e.value&&(e.value=t),i==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=i!=null?""+Wt(i):""}function Tl(e,t,i,s){if(t==null){if(s!=null){if(i!=null)throw Error(o(92));if(Re(s)){if(1<s.length)throw Error(o(93));s=s[0]}i=s}i==null&&(i=""),t=i}i=Wt(t),e.defaultValue=i,s=e.textContent,s===i&&s!==""&&s!==null&&(e.value=s),Xo(e)}function pt(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var qt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Wo(e,t,i){var s=t.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?s?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":s?e.setProperty(t,i):typeof i!="number"||i===0||qt.has(t)?t==="float"?e.cssFloat=i:e[t]=(""+i).trim():e[t]=i+"px"}function Pt(e,t,i){if(t!=null&&typeof t!="object")throw Error(o(62));if(e=e.style,i!=null){for(var s in i)!i.hasOwnProperty(s)||t!=null&&t.hasOwnProperty(s)||(s.indexOf("--")===0?e.setProperty(s,""):s==="float"?e.cssFloat="":e[s]="");for(var c in t)s=t[c],t.hasOwnProperty(c)&&i[c]!==s&&Wo(e,c,s)}else for(var u in t)t.hasOwnProperty(u)&&Wo(e,u,t[u])}function Kn(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var El=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),er=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function yt(e){return er.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function kn(){}var Ks=null;function tr(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var _i=null,ci=null;function Ps(e){var t=oi(e);if(t&&(e=t.stateNode)){var i=e[wt]||null;e:switch(e=t.stateNode,t.type){case"input":if($o(e,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+ct(""+t)+'"][type="radio"]'),t=0;t<i.length;t++){var s=i[t];if(s!==e&&s.form===e.form){var c=s[wt]||null;if(!c)throw Error(o(90));$o(s,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name)}}for(t=0;t<i.length;t++)s=i[t],s.form===e.form&&Bs(s)}break e;case"textarea":Sl(e,i.value,i.defaultValue);break e;case"select":t=i.value,t!=null&&_n(e,!!i.multiple,t,!1)}}}var nr=!1;function Al(e,t,i){if(nr)return e(t,i);nr=!0;try{var s=e(t);return s}finally{if(nr=!1,(_i!==null||ci!==null)&&(dc(),_i&&(t=_i,e=ci,ci=_i=null,Ps(t),e)))for(t=0;t<e.length;t++)Ps(e[t])}}function _e(e,t){var i=e.stateNode;if(i===null)return null;var s=i[wt]||null;if(s===null)return null;i=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(o(231,t,typeof i));return i}var Pn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ir=!1;if(Pn)try{var Wi={};Object.defineProperty(Wi,"passive",{get:function(){ir=!0}}),window.addEventListener("test",Wi,Wi),window.removeEventListener("test",Wi,Wi)}catch{ir=!1}var ui=null,ar=null,Qa=null;function qa(){if(Qa)return Qa;var e,t=ar,i=t.length,s,c="value"in ui?ui.value:ui.textContent,u=c.length;for(e=0;e<i&&t[e]===c[e];e++);var g=i-e;for(s=1;s<=g&&t[i-s]===c[u-s];s++);return Qa=c.slice(e,1<s?1-s:void 0)}function Gs(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ea(){return!0}function Ja(){return!1}function Mt(e){function t(i,s,c,u,g){this._reactName=i,this._targetInst=c,this.type=s,this.nativeEvent=u,this.target=g,this.currentTarget=null;for(var C in e)e.hasOwnProperty(C)&&(i=e[C],this[C]=i?i(u):u[C]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?ea:Ja,this.isPropagationStopped=Ja,this}return S(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=ea)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=ea)},persist:function(){},isPersistent:ea}),t}var ki={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vs=Mt(ki),Xa=S({},ki,{view:0,detail:0}),bl=Mt(Xa),sr,or,Ii,Za=S({},Xa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:lr,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ii&&(Ii&&e.type==="mousemove"?(sr=e.screenX-Ii.screenX,or=e.screenY-Ii.screenY):or=sr=0,Ii=e),sr)},movementY:function(e){return"movementY"in e?e.movementY:or}}),wl=Mt(Za),Au=S({},Za,{dataTransfer:0}),bu=Mt(Au),wu=S({},Xa,{relatedTarget:0}),rr=Mt(wu),_u=S({},ki,{animationName:0,elapsedTime:0,pseudoElement:0}),ku=Mt(_u),Iu=S({},ki,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Ou=Mt(Iu),_l=S({},ki,{data:0}),kl=Mt(_l),Ru={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Mu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xu(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Mu[e])?!!t[e]:!1}function lr(){return xu}var Fs=S({},Xa,{key:function(e){if(e.key){var t=Ru[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Gs(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Nu[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:lr,charCode:function(e){return e.type==="keypress"?Gs(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Gs(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),cr=Mt(Fs),Du=S({},Za,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Il=Mt(Du),Uu=S({},Xa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:lr}),ju=Mt(Uu),Hu=S({},ki,{propertyName:0,elapsedTime:0,pseudoElement:0}),zu=Mt(Hu),Ol=S({},Za,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rl=Mt(Ol),Ys=S({},ki,{newState:0,oldState:0}),ur=Mt(Ys),Lu=[9,13,27,32],dr=Pn&&"CompositionEvent"in window,$a=null;Pn&&"documentMode"in document&&($a=document.documentMode);var m=Pn&&"TextEvent"in window&&!$a,E=Pn&&(!dr||$a&&8<$a&&11>=$a),k=" ",D=!1;function L(e,t){switch(e){case"keyup":return Lu.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function X(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var H=!1;function ce(e,t){switch(e){case"compositionend":return X(t);case"keypress":return t.which!==32?null:(D=!0,k);case"textInput":return e=t.data,e===k&&D?null:e;default:return null}}function Se(e,t){if(H)return e==="compositionend"||!dr&&L(e,t)?(e=qa(),Qa=ar=ui=null,H=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return E&&t.locale!=="ko"?null:t.data;default:return null}}var Fe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ze(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Fe[e.type]:t==="textarea"}function _t(e,t,i,s){_i?ci?ci.push(s):ci=[s]:_i=s,t=vc(t,"onChange"),0<t.length&&(i=new Vs("onChange","change",null,i,s),e.push({event:i,listeners:t}))}var kt=null,xt=null;function Jt(e){ey(e,0)}function Wa(e){var t=Pe(e);if(Bs(t))return e}function hr(e,t){if(e==="change")return t}var fr=!1;if(Pn){var es;if(Pn){var Gn="oninput"in document;if(!Gn){var ta=document.createElement("div");ta.setAttribute("oninput","return;"),Gn=typeof ta.oninput=="function"}es=Gn}else es=!1;fr=es&&(!document.documentMode||9<document.documentMode)}function Bu(){kt&&(kt.detachEvent("onpropertychange",Ku),xt=kt=null)}function Ku(e){if(e.propertyName==="value"&&Wa(xt)){var t=[];_t(t,xt,e,tr(e)),Al(Jt,t)}}function DS(e,t,i){e==="focusin"?(Bu(),kt=t,xt=i,kt.attachEvent("onpropertychange",Ku)):e==="focusout"&&Bu()}function US(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Wa(xt)}function jS(e,t){if(e==="click")return Wa(t)}function HS(e,t){if(e==="input"||e==="change")return Wa(t)}function zS(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var pn=typeof Object.is=="function"?Object.is:zS;function gr(e,t){if(pn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),s=Object.keys(t);if(i.length!==s.length)return!1;for(s=0;s<i.length;s++){var c=i[s];if(!Qi.call(t,c)||!pn(e[c],t[c]))return!1}return!0}function bg(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function wg(e,t){var i=bg(e);e=0;for(var s;i;){if(i.nodeType===3){if(s=e+i.textContent.length,e<=t&&s>=t)return{node:i,offset:t-e};e=s}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=bg(i)}}function _g(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?_g(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function kg(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=$i(e.document);t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=$i(e.document)}return t}function Pu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var LS=Pn&&"documentMode"in document&&11>=document.documentMode,Qs=null,Gu=null,mr=null,Vu=!1;function Ig(e,t,i){var s=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Vu||Qs==null||Qs!==$i(s)||(s=Qs,"selectionStart"in s&&Pu(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),mr&&gr(mr,s)||(mr=s,s=vc(Gu,"onSelect"),0<s.length&&(t=new Vs("onSelect","select",null,t,i),e.push({event:t,listeners:s}),t.target=Qs)))}function ts(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var qs={animationend:ts("Animation","AnimationEnd"),animationiteration:ts("Animation","AnimationIteration"),animationstart:ts("Animation","AnimationStart"),transitionrun:ts("Transition","TransitionRun"),transitionstart:ts("Transition","TransitionStart"),transitioncancel:ts("Transition","TransitionCancel"),transitionend:ts("Transition","TransitionEnd")},Fu={},Og={};Pn&&(Og=document.createElement("div").style,"AnimationEvent"in window||(delete qs.animationend.animation,delete qs.animationiteration.animation,delete qs.animationstart.animation),"TransitionEvent"in window||delete qs.transitionend.transition);function ns(e){if(Fu[e])return Fu[e];if(!qs[e])return e;var t=qs[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in Og)return Fu[e]=t[i];return e}var Rg=ns("animationend"),Ng=ns("animationiteration"),Mg=ns("animationstart"),BS=ns("transitionrun"),KS=ns("transitionstart"),PS=ns("transitioncancel"),xg=ns("transitionend"),Dg=new Map,Yu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Yu.push("scrollEnd");function Vn(e,t){Dg.set(e,t),mn(t,[e])}var Nl=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},In=[],Js=0,Qu=0;function Ml(){for(var e=Js,t=Qu=Js=0;t<e;){var i=In[t];In[t++]=null;var s=In[t];In[t++]=null;var c=In[t];In[t++]=null;var u=In[t];if(In[t++]=null,s!==null&&c!==null){var g=s.pending;g===null?c.next=c:(c.next=g.next,g.next=c),s.pending=c}u!==0&&Ug(i,c,u)}}function xl(e,t,i,s){In[Js++]=e,In[Js++]=t,In[Js++]=i,In[Js++]=s,Qu|=s,e.lanes|=s,e=e.alternate,e!==null&&(e.lanes|=s)}function qu(e,t,i,s){return xl(e,t,i,s),Dl(e)}function is(e,t){return xl(e,null,null,t),Dl(e)}function Ug(e,t,i){e.lanes|=i;var s=e.alternate;s!==null&&(s.lanes|=i);for(var c=!1,u=e.return;u!==null;)u.childLanes|=i,s=u.alternate,s!==null&&(s.childLanes|=i),u.tag===22&&(e=u.stateNode,e===null||e._visibility&1||(c=!0)),e=u,u=u.return;return e.tag===3?(u=e.stateNode,c&&t!==null&&(c=31-Yt(i),e=u.hiddenUpdates,s=e[c],s===null?e[c]=[t]:s.push(t),t.lane=i|536870912),u):null}function Dl(e){if(50<Hr)throw Hr=0,ih=null,Error(o(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Xs={};function GS(e,t,i,s){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yn(e,t,i,s){return new GS(e,t,i,s)}function Ju(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Oi(e,t){var i=e.alternate;return i===null?(i=yn(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&65011712,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function jg(e,t){e.flags&=65011714;var i=e.alternate;return i===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,t=i.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Ul(e,t,i,s,c,u){var g=0;if(s=e,typeof e=="function")Ju(e)&&(g=1);else if(typeof e=="string")g=qT(e,i,P.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case He:return e=yn(31,i,t,c),e.elementType=He,e.lanes=u,e;case Y:return as(i.children,c,u,t);case ge:g=8,c|=24;break;case Z:return e=yn(12,i,t,c|2),e.elementType=Z,e.lanes=u,e;case te:return e=yn(13,i,t,c),e.elementType=te,e.lanes=u,e;case W:return e=yn(19,i,t,c),e.elementType=W,e.lanes=u,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ie:g=10;break e;case ue:g=9;break e;case Ce:g=11;break e;case se:g=14;break e;case Ee:g=16,s=null;break e}g=29,i=Error(o(130,e===null?"null":typeof e,"")),s=null}return t=yn(g,i,t,c),t.elementType=e,t.type=s,t.lanes=u,t}function as(e,t,i,s){return e=yn(7,e,s,t),e.lanes=i,e}function Xu(e,t,i){return e=yn(6,e,null,t),e.lanes=i,e}function Hg(e){var t=yn(18,null,null,0);return t.stateNode=e,t}function Zu(e,t,i){return t=yn(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var zg=new WeakMap;function On(e,t){if(typeof e=="object"&&e!==null){var i=zg.get(e);return i!==void 0?i:(t={value:e,source:t,stack:ti(t)},zg.set(e,t),t)}return{value:e,source:t,stack:ti(t)}}var Zs=[],$s=0,jl=null,pr=0,Rn=[],Nn=0,na=null,di=1,hi="";function Ri(e,t){Zs[$s++]=pr,Zs[$s++]=jl,jl=e,pr=t}function Lg(e,t,i){Rn[Nn++]=di,Rn[Nn++]=hi,Rn[Nn++]=na,na=e;var s=di;e=hi;var c=32-Yt(s)-1;s&=~(1<<c),i+=1;var u=32-Yt(t)+c;if(30<u){var g=c-c%5;u=(s&(1<<g)-1).toString(32),s>>=g,c-=g,di=1<<32-Yt(t)+c|i<<c|s,hi=u+e}else di=1<<u|i<<c|s,hi=e}function $u(e){e.return!==null&&(Ri(e,1),Lg(e,1,0))}function Wu(e){for(;e===jl;)jl=Zs[--$s],Zs[$s]=null,pr=Zs[--$s],Zs[$s]=null;for(;e===na;)na=Rn[--Nn],Rn[Nn]=null,hi=Rn[--Nn],Rn[Nn]=null,di=Rn[--Nn],Rn[Nn]=null}function Bg(e,t){Rn[Nn++]=di,Rn[Nn++]=hi,Rn[Nn++]=na,di=t.id,hi=t.overflow,na=e}var Dt=null,at=null,je=!1,ia=null,Mn=!1,ed=Error(o(519));function aa(e){var t=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw yr(On(t,e)),ed}function Kg(e){var t=e.stateNode,i=e.type,s=e.memoizedProps;switch(t[lt]=e,t[wt]=s,i){case"dialog":Me("cancel",t),Me("close",t);break;case"iframe":case"object":case"embed":Me("load",t);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Me(Lr[i],t);break;case"source":Me("error",t);break;case"img":case"image":case"link":Me("error",t),Me("load",t);break;case"details":Me("toggle",t);break;case"input":Me("invalid",t),Cl(t,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0);break;case"select":Me("invalid",t);break;case"textarea":Me("invalid",t),Tl(t,s.value,s.defaultValue,s.children)}i=s.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||t.textContent===""+i||s.suppressHydrationWarning===!0||ay(t.textContent,i)?(s.popover!=null&&(Me("beforetoggle",t),Me("toggle",t)),s.onScroll!=null&&Me("scroll",t),s.onScrollEnd!=null&&Me("scrollend",t),s.onClick!=null&&(t.onclick=kn),t=!0):t=!1,t||aa(e,!0)}function Pg(e){for(Dt=e.return;Dt;)switch(Dt.tag){case 5:case 31:case 13:Mn=!1;return;case 27:case 3:Mn=!0;return;default:Dt=Dt.return}}function Ws(e){if(e!==Dt)return!1;if(!je)return Pg(e),je=!0,!1;var t=e.tag,i;if((i=t!==3&&t!==27)&&((i=t===5)&&(i=e.type,i=!(i!=="form"&&i!=="button")||vh(e.type,e.memoizedProps)),i=!i),i&&at&&aa(e),Pg(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));at=fy(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));at=fy(e)}else t===27?(t=at,va(e.type)?(e=Ah,Ah=null,at=e):at=t):at=Dt?Dn(e.stateNode.nextSibling):null;return!0}function ss(){at=Dt=null,je=!1}function td(){var e=ia;return e!==null&&(an===null?an=e:an.push.apply(an,e),ia=null),e}function yr(e){ia===null?ia=[e]:ia.push(e)}var nd=b(null),os=null,Ni=null;function sa(e,t,i){J(nd,t._currentValue),t._currentValue=i}function Mi(e){e._currentValue=nd.current,M(nd)}function id(e,t,i){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===i)break;e=e.return}}function ad(e,t,i,s){var c=e.child;for(c!==null&&(c.return=e);c!==null;){var u=c.dependencies;if(u!==null){var g=c.child;u=u.firstContext;e:for(;u!==null;){var C=u;u=c;for(var A=0;A<t.length;A++)if(C.context===t[A]){u.lanes|=i,C=u.alternate,C!==null&&(C.lanes|=i),id(u.return,i,e),s||(g=null);break e}u=C.next}}else if(c.tag===18){if(g=c.return,g===null)throw Error(o(341));g.lanes|=i,u=g.alternate,u!==null&&(u.lanes|=i),id(g,i,e),g=null}else g=c.child;if(g!==null)g.return=c;else for(g=c;g!==null;){if(g===e){g=null;break}if(c=g.sibling,c!==null){c.return=g.return,g=c;break}g=g.return}c=g}}function eo(e,t,i,s){e=null;for(var c=t,u=!1;c!==null;){if(!u){if((c.flags&524288)!==0)u=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var g=c.alternate;if(g===null)throw Error(o(387));if(g=g.memoizedProps,g!==null){var C=c.type;pn(c.pendingProps.value,g.value)||(e!==null?e.push(C):e=[C])}}else if(c===me.current){if(g=c.alternate,g===null)throw Error(o(387));g.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(e!==null?e.push(Vr):e=[Vr])}c=c.return}e!==null&&ad(t,e,i,s),t.flags|=262144}function Hl(e){for(e=e.firstContext;e!==null;){if(!pn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function rs(e){os=e,Ni=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Ut(e){return Gg(os,e)}function zl(e,t){return os===null&&rs(e),Gg(e,t)}function Gg(e,t){var i=t._currentValue;if(t={context:t,memoizedValue:i,next:null},Ni===null){if(e===null)throw Error(o(308));Ni=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Ni=Ni.next=t;return i}var VS=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(i,s){e.push(s)}};this.abort=function(){t.aborted=!0,e.forEach(function(i){return i()})}},FS=l.unstable_scheduleCallback,YS=l.unstable_NormalPriority,vt={$$typeof:ie,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function sd(){return{controller:new VS,data:new Map,refCount:0}}function vr(e){e.refCount--,e.refCount===0&&FS(YS,function(){e.controller.abort()})}var Cr=null,od=0,to=0,no=null;function QS(e,t){if(Cr===null){var i=Cr=[];od=0,to=ch(),no={status:"pending",value:void 0,then:function(s){i.push(s)}}}return od++,t.then(Vg,Vg),t}function Vg(){if(--od===0&&Cr!==null){no!==null&&(no.status="fulfilled");var e=Cr;Cr=null,to=0,no=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function qS(e,t){var i=[],s={status:"pending",value:null,reason:null,then:function(c){i.push(c)}};return e.then(function(){s.status="fulfilled",s.value=t;for(var c=0;c<i.length;c++)(0,i[c])(t)},function(c){for(s.status="rejected",s.reason=c,c=0;c<i.length;c++)(0,i[c])(void 0)}),s}var Fg=j.S;j.S=function(e,t){Ip=Kt(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&QS(e,t),Fg!==null&&Fg(e,t)};var ls=b(null);function rd(){var e=ls.current;return e!==null?e:We.pooledCache}function Ll(e,t){t===null?J(ls,ls.current):J(ls,t.pool)}function Yg(){var e=rd();return e===null?null:{parent:vt._currentValue,pool:e}}var io=Error(o(460)),ld=Error(o(474)),Bl=Error(o(542)),Kl={then:function(){}};function Qg(e){return e=e.status,e==="fulfilled"||e==="rejected"}function qg(e,t,i){switch(i=e[i],i===void 0?e.push(t):i!==t&&(t.then(kn,kn),t=i),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Xg(e),e;default:if(typeof t.status=="string")t.then(kn,kn);else{if(e=We,e!==null&&100<e.shellSuspendCounter)throw Error(o(482));e=t,e.status="pending",e.then(function(s){if(t.status==="pending"){var c=t;c.status="fulfilled",c.value=s}},function(s){if(t.status==="pending"){var c=t;c.status="rejected",c.reason=s}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Xg(e),e}throw us=t,io}}function cs(e){try{var t=e._init;return t(e._payload)}catch(i){throw i!==null&&typeof i=="object"&&typeof i.then=="function"?(us=i,io):i}}var us=null;function Jg(){if(us===null)throw Error(o(459));var e=us;return us=null,e}function Xg(e){if(e===io||e===Bl)throw Error(o(483))}var ao=null,Sr=0;function Pl(e){var t=Sr;return Sr+=1,ao===null&&(ao=[]),qg(ao,e,t)}function Tr(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Gl(e,t){throw t.$$typeof===I?Error(o(525)):(e=Object.prototype.toString.call(t),Error(o(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Zg(e){function t(_,w){if(e){var O=_.deletions;O===null?(_.deletions=[w],_.flags|=16):O.push(w)}}function i(_,w){if(!e)return null;for(;w!==null;)t(_,w),w=w.sibling;return null}function s(_){for(var w=new Map;_!==null;)_.key!==null?w.set(_.key,_):w.set(_.index,_),_=_.sibling;return w}function c(_,w){return _=Oi(_,w),_.index=0,_.sibling=null,_}function u(_,w,O){return _.index=O,e?(O=_.alternate,O!==null?(O=O.index,O<w?(_.flags|=67108866,w):O):(_.flags|=67108866,w)):(_.flags|=1048576,w)}function g(_){return e&&_.alternate===null&&(_.flags|=67108866),_}function C(_,w,O,G){return w===null||w.tag!==6?(w=Xu(O,_.mode,G),w.return=_,w):(w=c(w,O),w.return=_,w)}function A(_,w,O,G){var de=O.type;return de===Y?B(_,w,O.props.children,G,O.key):w!==null&&(w.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===Ee&&cs(de)===w.type)?(w=c(w,O.props),Tr(w,O),w.return=_,w):(w=Ul(O.type,O.key,O.props,null,_.mode,G),Tr(w,O),w.return=_,w)}function R(_,w,O,G){return w===null||w.tag!==4||w.stateNode.containerInfo!==O.containerInfo||w.stateNode.implementation!==O.implementation?(w=Zu(O,_.mode,G),w.return=_,w):(w=c(w,O.children||[]),w.return=_,w)}function B(_,w,O,G,de){return w===null||w.tag!==7?(w=as(O,_.mode,G,de),w.return=_,w):(w=c(w,O),w.return=_,w)}function V(_,w,O){if(typeof w=="string"&&w!==""||typeof w=="number"||typeof w=="bigint")return w=Xu(""+w,_.mode,O),w.return=_,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case x:return O=Ul(w.type,w.key,w.props,null,_.mode,O),Tr(O,w),O.return=_,O;case F:return w=Zu(w,_.mode,O),w.return=_,w;case Ee:return w=cs(w),V(_,w,O)}if(Re(w)||ke(w))return w=as(w,_.mode,O,null),w.return=_,w;if(typeof w.then=="function")return V(_,Pl(w),O);if(w.$$typeof===ie)return V(_,zl(_,w),O);Gl(_,w)}return null}function N(_,w,O,G){var de=w!==null?w.key:null;if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return de!==null?null:C(_,w,""+O,G);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case x:return O.key===de?A(_,w,O,G):null;case F:return O.key===de?R(_,w,O,G):null;case Ee:return O=cs(O),N(_,w,O,G)}if(Re(O)||ke(O))return de!==null?null:B(_,w,O,G,null);if(typeof O.then=="function")return N(_,w,Pl(O),G);if(O.$$typeof===ie)return N(_,w,zl(_,O),G);Gl(_,O)}return null}function U(_,w,O,G,de){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return _=_.get(O)||null,C(w,_,""+G,de);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case x:return _=_.get(G.key===null?O:G.key)||null,A(w,_,G,de);case F:return _=_.get(G.key===null?O:G.key)||null,R(w,_,G,de);case Ee:return G=cs(G),U(_,w,O,G,de)}if(Re(G)||ke(G))return _=_.get(O)||null,B(w,_,G,de,null);if(typeof G.then=="function")return U(_,w,O,Pl(G),de);if(G.$$typeof===ie)return U(_,w,O,zl(w,G),de);Gl(w,G)}return null}function ae(_,w,O,G){for(var de=null,Be=null,le=w,be=w=0,De=null;le!==null&&be<O.length;be++){le.index>be?(De=le,le=null):De=le.sibling;var Ke=N(_,le,O[be],G);if(Ke===null){le===null&&(le=De);break}e&&le&&Ke.alternate===null&&t(_,le),w=u(Ke,w,be),Be===null?de=Ke:Be.sibling=Ke,Be=Ke,le=De}if(be===O.length)return i(_,le),je&&Ri(_,be),de;if(le===null){for(;be<O.length;be++)le=V(_,O[be],G),le!==null&&(w=u(le,w,be),Be===null?de=le:Be.sibling=le,Be=le);return je&&Ri(_,be),de}for(le=s(le);be<O.length;be++)De=U(le,_,be,O[be],G),De!==null&&(e&&De.alternate!==null&&le.delete(De.key===null?be:De.key),w=u(De,w,be),Be===null?de=De:Be.sibling=De,Be=De);return e&&le.forEach(function(Aa){return t(_,Aa)}),je&&Ri(_,be),de}function fe(_,w,O,G){if(O==null)throw Error(o(151));for(var de=null,Be=null,le=w,be=w=0,De=null,Ke=O.next();le!==null&&!Ke.done;be++,Ke=O.next()){le.index>be?(De=le,le=null):De=le.sibling;var Aa=N(_,le,Ke.value,G);if(Aa===null){le===null&&(le=De);break}e&&le&&Aa.alternate===null&&t(_,le),w=u(Aa,w,be),Be===null?de=Aa:Be.sibling=Aa,Be=Aa,le=De}if(Ke.done)return i(_,le),je&&Ri(_,be),de;if(le===null){for(;!Ke.done;be++,Ke=O.next())Ke=V(_,Ke.value,G),Ke!==null&&(w=u(Ke,w,be),Be===null?de=Ke:Be.sibling=Ke,Be=Ke);return je&&Ri(_,be),de}for(le=s(le);!Ke.done;be++,Ke=O.next())Ke=U(le,_,be,Ke.value,G),Ke!==null&&(e&&Ke.alternate!==null&&le.delete(Ke.key===null?be:Ke.key),w=u(Ke,w,be),Be===null?de=Ke:Be.sibling=Ke,Be=Ke);return e&&le.forEach(function(sE){return t(_,sE)}),je&&Ri(_,be),de}function $e(_,w,O,G){if(typeof O=="object"&&O!==null&&O.type===Y&&O.key===null&&(O=O.props.children),typeof O=="object"&&O!==null){switch(O.$$typeof){case x:e:{for(var de=O.key;w!==null;){if(w.key===de){if(de=O.type,de===Y){if(w.tag===7){i(_,w.sibling),G=c(w,O.props.children),G.return=_,_=G;break e}}else if(w.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===Ee&&cs(de)===w.type){i(_,w.sibling),G=c(w,O.props),Tr(G,O),G.return=_,_=G;break e}i(_,w);break}else t(_,w);w=w.sibling}O.type===Y?(G=as(O.props.children,_.mode,G,O.key),G.return=_,_=G):(G=Ul(O.type,O.key,O.props,null,_.mode,G),Tr(G,O),G.return=_,_=G)}return g(_);case F:e:{for(de=O.key;w!==null;){if(w.key===de)if(w.tag===4&&w.stateNode.containerInfo===O.containerInfo&&w.stateNode.implementation===O.implementation){i(_,w.sibling),G=c(w,O.children||[]),G.return=_,_=G;break e}else{i(_,w);break}else t(_,w);w=w.sibling}G=Zu(O,_.mode,G),G.return=_,_=G}return g(_);case Ee:return O=cs(O),$e(_,w,O,G)}if(Re(O))return ae(_,w,O,G);if(ke(O)){if(de=ke(O),typeof de!="function")throw Error(o(150));return O=de.call(O),fe(_,w,O,G)}if(typeof O.then=="function")return $e(_,w,Pl(O),G);if(O.$$typeof===ie)return $e(_,w,zl(_,O),G);Gl(_,O)}return typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint"?(O=""+O,w!==null&&w.tag===6?(i(_,w.sibling),G=c(w,O),G.return=_,_=G):(i(_,w),G=Xu(O,_.mode,G),G.return=_,_=G),g(_)):i(_,w)}return function(_,w,O,G){try{Sr=0;var de=$e(_,w,O,G);return ao=null,de}catch(le){if(le===io||le===Bl)throw le;var Be=yn(29,le,null,_.mode);return Be.lanes=G,Be.return=_,Be}}}var ds=Zg(!0),$g=Zg(!1),oa=!1;function cd(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ud(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ra(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function la(e,t,i){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,(Ge&2)!==0){var c=s.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),s.pending=t,t=Dl(e),Ug(e,null,i),t}return xl(e,s,t,i),Dl(e)}function Er(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194048)!==0)){var s=t.lanes;s&=e.pendingLanes,i|=s,t.lanes=i,vl(e,i)}}function dd(e,t){var i=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,i===s)){var c=null,u=null;if(i=i.firstBaseUpdate,i!==null){do{var g={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};u===null?c=u=g:u=u.next=g,i=i.next}while(i!==null);u===null?c=u=t:u=u.next=t}else c=u=t;i={baseState:s.baseState,firstBaseUpdate:c,lastBaseUpdate:u,shared:s.shared,callbacks:s.callbacks},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}var hd=!1;function Ar(){if(hd){var e=no;if(e!==null)throw e}}function br(e,t,i,s){hd=!1;var c=e.updateQueue;oa=!1;var u=c.firstBaseUpdate,g=c.lastBaseUpdate,C=c.shared.pending;if(C!==null){c.shared.pending=null;var A=C,R=A.next;A.next=null,g===null?u=R:g.next=R,g=A;var B=e.alternate;B!==null&&(B=B.updateQueue,C=B.lastBaseUpdate,C!==g&&(C===null?B.firstBaseUpdate=R:C.next=R,B.lastBaseUpdate=A))}if(u!==null){var V=c.baseState;g=0,B=R=A=null,C=u;do{var N=C.lane&-536870913,U=N!==C.lane;if(U?(xe&N)===N:(s&N)===N){N!==0&&N===to&&(hd=!0),B!==null&&(B=B.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});e:{var ae=e,fe=C;N=t;var $e=i;switch(fe.tag){case 1:if(ae=fe.payload,typeof ae=="function"){V=ae.call($e,V,N);break e}V=ae;break e;case 3:ae.flags=ae.flags&-65537|128;case 0:if(ae=fe.payload,N=typeof ae=="function"?ae.call($e,V,N):ae,N==null)break e;V=S({},V,N);break e;case 2:oa=!0}}N=C.callback,N!==null&&(e.flags|=64,U&&(e.flags|=8192),U=c.callbacks,U===null?c.callbacks=[N]:U.push(N))}else U={lane:N,tag:C.tag,payload:C.payload,callback:C.callback,next:null},B===null?(R=B=U,A=V):B=B.next=U,g|=N;if(C=C.next,C===null){if(C=c.shared.pending,C===null)break;U=C,C=U.next,U.next=null,c.lastBaseUpdate=U,c.shared.pending=null}}while(!0);B===null&&(A=V),c.baseState=A,c.firstBaseUpdate=R,c.lastBaseUpdate=B,u===null&&(c.shared.lanes=0),fa|=g,e.lanes=g,e.memoizedState=V}}function Wg(e,t){if(typeof e!="function")throw Error(o(191,e));e.call(t)}function em(e,t){var i=e.callbacks;if(i!==null)for(e.callbacks=null,e=0;e<i.length;e++)Wg(i[e],t)}var so=b(null),Vl=b(0);function tm(e,t){e=Ki,J(Vl,e),J(so,t),Ki=e|t.baseLanes}function fd(){J(Vl,Ki),J(so,so.current)}function gd(){Ki=Vl.current,M(so),M(Vl)}var vn=b(null),xn=null;function ca(e){var t=e.alternate;J(gt,gt.current&1),J(vn,e),xn===null&&(t===null||so.current!==null||t.memoizedState!==null)&&(xn=e)}function md(e){J(gt,gt.current),J(vn,e),xn===null&&(xn=e)}function nm(e){e.tag===22?(J(gt,gt.current),J(vn,e),xn===null&&(xn=e)):ua()}function ua(){J(gt,gt.current),J(vn,vn.current)}function Cn(e){M(vn),xn===e&&(xn=null),M(gt)}var gt=b(0);function Fl(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||Th(i)||Eh(i)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var xi=0,Ae=null,Xe=null,Ct=null,Yl=!1,oo=!1,hs=!1,Ql=0,wr=0,ro=null,JS=0;function dt(){throw Error(o(321))}function pd(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!pn(e[i],t[i]))return!1;return!0}function yd(e,t,i,s,c,u){return xi=u,Ae=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,j.H=e===null||e.memoizedState===null?Lm:Md,hs=!1,u=i(s,c),hs=!1,oo&&(u=am(t,i,s,c)),im(e),u}function im(e){j.H=Ir;var t=Xe!==null&&Xe.next!==null;if(xi=0,Ct=Xe=Ae=null,Yl=!1,wr=0,ro=null,t)throw Error(o(300));e===null||St||(e=e.dependencies,e!==null&&Hl(e)&&(St=!0))}function am(e,t,i,s){Ae=e;var c=0;do{if(oo&&(ro=null),wr=0,oo=!1,25<=c)throw Error(o(301));if(c+=1,Ct=Xe=null,e.updateQueue!=null){var u=e.updateQueue;u.lastEffect=null,u.events=null,u.stores=null,u.memoCache!=null&&(u.memoCache.index=0)}j.H=Bm,u=t(i,s)}while(oo);return u}function XS(){var e=j.H,t=e.useState()[0];return t=typeof t.then=="function"?_r(t):t,e=e.useState()[0],(Xe!==null?Xe.memoizedState:null)!==e&&(Ae.flags|=1024),t}function vd(){var e=Ql!==0;return Ql=0,e}function Cd(e,t,i){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i}function Sd(e){if(Yl){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Yl=!1}xi=0,Ct=Xe=Ae=null,oo=!1,wr=Ql=0,ro=null}function Xt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ct===null?Ae.memoizedState=Ct=e:Ct=Ct.next=e,Ct}function mt(){if(Xe===null){var e=Ae.alternate;e=e!==null?e.memoizedState:null}else e=Xe.next;var t=Ct===null?Ae.memoizedState:Ct.next;if(t!==null)Ct=t,Xe=e;else{if(e===null)throw Ae.alternate===null?Error(o(467)):Error(o(310));Xe=e,e={memoizedState:Xe.memoizedState,baseState:Xe.baseState,baseQueue:Xe.baseQueue,queue:Xe.queue,next:null},Ct===null?Ae.memoizedState=Ct=e:Ct=Ct.next=e}return Ct}function ql(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function _r(e){var t=wr;return wr+=1,ro===null&&(ro=[]),e=qg(ro,e,t),t=Ae,(Ct===null?t.memoizedState:Ct.next)===null&&(t=t.alternate,j.H=t===null||t.memoizedState===null?Lm:Md),e}function Jl(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return _r(e);if(e.$$typeof===ie)return Ut(e)}throw Error(o(438,String(e)))}function Td(e){var t=null,i=Ae.updateQueue;if(i!==null&&(t=i.memoCache),t==null){var s=Ae.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(t={data:s.data.map(function(c){return c.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),i===null&&(i=ql(),Ae.updateQueue=i),i.memoCache=t,i=t.data[t.index],i===void 0)for(i=t.data[t.index]=Array(e),s=0;s<e;s++)i[s]=we;return t.index++,i}function Di(e,t){return typeof t=="function"?t(e):t}function Xl(e){var t=mt();return Ed(t,Xe,e)}function Ed(e,t,i){var s=e.queue;if(s===null)throw Error(o(311));s.lastRenderedReducer=i;var c=e.baseQueue,u=s.pending;if(u!==null){if(c!==null){var g=c.next;c.next=u.next,u.next=g}t.baseQueue=c=u,s.pending=null}if(u=e.baseState,c===null)e.memoizedState=u;else{t=c.next;var C=g=null,A=null,R=t,B=!1;do{var V=R.lane&-536870913;if(V!==R.lane?(xe&V)===V:(xi&V)===V){var N=R.revertLane;if(N===0)A!==null&&(A=A.next={lane:0,revertLane:0,gesture:null,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null}),V===to&&(B=!0);else if((xi&N)===N){R=R.next,N===to&&(B=!0);continue}else V={lane:0,revertLane:R.revertLane,gesture:null,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null},A===null?(C=A=V,g=u):A=A.next=V,Ae.lanes|=N,fa|=N;V=R.action,hs&&i(u,V),u=R.hasEagerState?R.eagerState:i(u,V)}else N={lane:V,revertLane:R.revertLane,gesture:R.gesture,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null},A===null?(C=A=N,g=u):A=A.next=N,Ae.lanes|=V,fa|=V;R=R.next}while(R!==null&&R!==t);if(A===null?g=u:A.next=C,!pn(u,e.memoizedState)&&(St=!0,B&&(i=no,i!==null)))throw i;e.memoizedState=u,e.baseState=g,e.baseQueue=A,s.lastRenderedState=u}return c===null&&(s.lanes=0),[e.memoizedState,s.dispatch]}function Ad(e){var t=mt(),i=t.queue;if(i===null)throw Error(o(311));i.lastRenderedReducer=e;var s=i.dispatch,c=i.pending,u=t.memoizedState;if(c!==null){i.pending=null;var g=c=c.next;do u=e(u,g.action),g=g.next;while(g!==c);pn(u,t.memoizedState)||(St=!0),t.memoizedState=u,t.baseQueue===null&&(t.baseState=u),i.lastRenderedState=u}return[u,s]}function sm(e,t,i){var s=Ae,c=mt(),u=je;if(u){if(i===void 0)throw Error(o(407));i=i()}else i=t();var g=!pn((Xe||c).memoizedState,i);if(g&&(c.memoizedState=i,St=!0),c=c.queue,_d(lm.bind(null,s,c,e),[e]),c.getSnapshot!==t||g||Ct!==null&&Ct.memoizedState.tag&1){if(s.flags|=2048,lo(9,{destroy:void 0},rm.bind(null,s,c,i,t),null),We===null)throw Error(o(349));u||(xi&127)!==0||om(s,t,i)}return i}function om(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=Ae.updateQueue,t===null?(t=ql(),Ae.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function rm(e,t,i,s){t.value=i,t.getSnapshot=s,cm(t)&&um(e)}function lm(e,t,i){return i(function(){cm(t)&&um(e)})}function cm(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!pn(e,i)}catch{return!0}}function um(e){var t=is(e,2);t!==null&&sn(t,e,2)}function bd(e){var t=Xt();if(typeof e=="function"){var i=e;if(e=i(),hs){bn(!0);try{i()}finally{bn(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Di,lastRenderedState:e},t}function dm(e,t,i,s){return e.baseState=i,Ed(e,Xe,typeof s=="function"?s:Di)}function ZS(e,t,i,s,c){if(Wl(e))throw Error(o(485));if(e=t.action,e!==null){var u={payload:c,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(g){u.listeners.push(g)}};j.T!==null?i(!0):u.isTransition=!1,s(u),i=t.pending,i===null?(u.next=t.pending=u,hm(t,u)):(u.next=i.next,t.pending=i.next=u)}}function hm(e,t){var i=t.action,s=t.payload,c=e.state;if(t.isTransition){var u=j.T,g={};j.T=g;try{var C=i(c,s),A=j.S;A!==null&&A(g,C),fm(e,t,C)}catch(R){wd(e,t,R)}finally{u!==null&&g.types!==null&&(u.types=g.types),j.T=u}}else try{u=i(c,s),fm(e,t,u)}catch(R){wd(e,t,R)}}function fm(e,t,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(s){gm(e,t,s)},function(s){return wd(e,t,s)}):gm(e,t,i)}function gm(e,t,i){t.status="fulfilled",t.value=i,mm(t),e.state=i,t=e.pending,t!==null&&(i=t.next,i===t?e.pending=null:(i=i.next,t.next=i,hm(e,i)))}function wd(e,t,i){var s=e.pending;if(e.pending=null,s!==null){s=s.next;do t.status="rejected",t.reason=i,mm(t),t=t.next;while(t!==s)}e.action=null}function mm(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function pm(e,t){return t}function ym(e,t){if(je){var i=We.formState;if(i!==null){e:{var s=Ae;if(je){if(at){t:{for(var c=at,u=Mn;c.nodeType!==8;){if(!u){c=null;break t}if(c=Dn(c.nextSibling),c===null){c=null;break t}}u=c.data,c=u==="F!"||u==="F"?c:null}if(c){at=Dn(c.nextSibling),s=c.data==="F!";break e}}aa(s)}s=!1}s&&(t=i[0])}}return i=Xt(),i.memoizedState=i.baseState=t,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:pm,lastRenderedState:t},i.queue=s,i=jm.bind(null,Ae,s),s.dispatch=i,s=bd(!1),u=Nd.bind(null,Ae,!1,s.queue),s=Xt(),c={state:t,dispatch:null,action:e,pending:null},s.queue=c,i=ZS.bind(null,Ae,c,u,i),c.dispatch=i,s.memoizedState=e,[t,i,!1]}function vm(e){var t=mt();return Cm(t,Xe,e)}function Cm(e,t,i){if(t=Ed(e,t,pm)[0],e=Xl(Di)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var s=_r(t)}catch(g){throw g===io?Bl:g}else s=t;t=mt();var c=t.queue,u=c.dispatch;return i!==t.memoizedState&&(Ae.flags|=2048,lo(9,{destroy:void 0},$S.bind(null,c,i),null)),[s,u,e]}function $S(e,t){e.action=t}function Sm(e){var t=mt(),i=Xe;if(i!==null)return Cm(t,i,e);mt(),t=t.memoizedState,i=mt();var s=i.queue.dispatch;return i.memoizedState=e,[t,s,!1]}function lo(e,t,i,s){return e={tag:e,create:i,deps:s,inst:t,next:null},t=Ae.updateQueue,t===null&&(t=ql(),Ae.updateQueue=t),i=t.lastEffect,i===null?t.lastEffect=e.next=e:(s=i.next,i.next=e,e.next=s,t.lastEffect=e),e}function Tm(){return mt().memoizedState}function Zl(e,t,i,s){var c=Xt();Ae.flags|=e,c.memoizedState=lo(1|t,{destroy:void 0},i,s===void 0?null:s)}function $l(e,t,i,s){var c=mt();s=s===void 0?null:s;var u=c.memoizedState.inst;Xe!==null&&s!==null&&pd(s,Xe.memoizedState.deps)?c.memoizedState=lo(t,u,i,s):(Ae.flags|=e,c.memoizedState=lo(1|t,u,i,s))}function Em(e,t){Zl(8390656,8,e,t)}function _d(e,t){$l(2048,8,e,t)}function WS(e){Ae.flags|=4;var t=Ae.updateQueue;if(t===null)t=ql(),Ae.updateQueue=t,t.events=[e];else{var i=t.events;i===null?t.events=[e]:i.push(e)}}function Am(e){var t=mt().memoizedState;return WS({ref:t,nextImpl:e}),function(){if((Ge&2)!==0)throw Error(o(440));return t.impl.apply(void 0,arguments)}}function bm(e,t){return $l(4,2,e,t)}function wm(e,t){return $l(4,4,e,t)}function _m(e,t){if(typeof t=="function"){e=e();var i=t(e);return function(){typeof i=="function"?i():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function km(e,t,i){i=i!=null?i.concat([e]):null,$l(4,4,_m.bind(null,t,e),i)}function kd(){}function Im(e,t){var i=mt();t=t===void 0?null:t;var s=i.memoizedState;return t!==null&&pd(t,s[1])?s[0]:(i.memoizedState=[e,t],e)}function Om(e,t){var i=mt();t=t===void 0?null:t;var s=i.memoizedState;if(t!==null&&pd(t,s[1]))return s[0];if(s=e(),hs){bn(!0);try{e()}finally{bn(!1)}}return i.memoizedState=[s,t],s}function Id(e,t,i){return i===void 0||(xi&1073741824)!==0&&(xe&261930)===0?e.memoizedState=t:(e.memoizedState=i,e=Rp(),Ae.lanes|=e,fa|=e,i)}function Rm(e,t,i,s){return pn(i,t)?i:so.current!==null?(e=Id(e,i,s),pn(e,t)||(St=!0),e):(xi&42)===0||(xi&1073741824)!==0&&(xe&261930)===0?(St=!0,e.memoizedState=i):(e=Rp(),Ae.lanes|=e,fa|=e,t)}function Nm(e,t,i,s,c){var u=q.p;q.p=u!==0&&8>u?u:8;var g=j.T,C={};j.T=C,Nd(e,!1,t,i);try{var A=c(),R=j.S;if(R!==null&&R(C,A),A!==null&&typeof A=="object"&&typeof A.then=="function"){var B=qS(A,s);kr(e,t,B,En(e))}else kr(e,t,s,En(e))}catch(V){kr(e,t,{then:function(){},status:"rejected",reason:V},En())}finally{q.p=u,g!==null&&C.types!==null&&(g.types=C.types),j.T=g}}function eT(){}function Od(e,t,i,s){if(e.tag!==5)throw Error(o(476));var c=Mm(e).queue;Nm(e,c,t,oe,i===null?eT:function(){return xm(e),i(s)})}function Mm(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:oe,baseState:oe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Di,lastRenderedState:oe},next:null};var i={};return t.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Di,lastRenderedState:i},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function xm(e){var t=Mm(e);t.next===null&&(t=e.alternate.memoizedState),kr(e,t.next.queue,{},En())}function Rd(){return Ut(Vr)}function Dm(){return mt().memoizedState}function Um(){return mt().memoizedState}function tT(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var i=En();e=ra(i);var s=la(t,e,i);s!==null&&(sn(s,t,i),Er(s,t,i)),t={cache:sd()},e.payload=t;return}t=t.return}}function nT(e,t,i){var s=En();i={lane:s,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},Wl(e)?Hm(t,i):(i=qu(e,t,i,s),i!==null&&(sn(i,e,s),zm(i,t,s)))}function jm(e,t,i){var s=En();kr(e,t,i,s)}function kr(e,t,i,s){var c={lane:s,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null};if(Wl(e))Hm(t,c);else{var u=e.alternate;if(e.lanes===0&&(u===null||u.lanes===0)&&(u=t.lastRenderedReducer,u!==null))try{var g=t.lastRenderedState,C=u(g,i);if(c.hasEagerState=!0,c.eagerState=C,pn(C,g))return xl(e,t,c,0),We===null&&Ml(),!1}catch{}if(i=qu(e,t,c,s),i!==null)return sn(i,e,s),zm(i,t,s),!0}return!1}function Nd(e,t,i,s){if(s={lane:2,revertLane:ch(),gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},Wl(e)){if(t)throw Error(o(479))}else t=qu(e,i,s,2),t!==null&&sn(t,e,2)}function Wl(e){var t=e.alternate;return e===Ae||t!==null&&t===Ae}function Hm(e,t){oo=Yl=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function zm(e,t,i){if((i&4194048)!==0){var s=t.lanes;s&=e.pendingLanes,i|=s,t.lanes=i,vl(e,i)}}var Ir={readContext:Ut,use:Jl,useCallback:dt,useContext:dt,useEffect:dt,useImperativeHandle:dt,useLayoutEffect:dt,useInsertionEffect:dt,useMemo:dt,useReducer:dt,useRef:dt,useState:dt,useDebugValue:dt,useDeferredValue:dt,useTransition:dt,useSyncExternalStore:dt,useId:dt,useHostTransitionStatus:dt,useFormState:dt,useActionState:dt,useOptimistic:dt,useMemoCache:dt,useCacheRefresh:dt};Ir.useEffectEvent=dt;var Lm={readContext:Ut,use:Jl,useCallback:function(e,t){return Xt().memoizedState=[e,t===void 0?null:t],e},useContext:Ut,useEffect:Em,useImperativeHandle:function(e,t,i){i=i!=null?i.concat([e]):null,Zl(4194308,4,_m.bind(null,t,e),i)},useLayoutEffect:function(e,t){return Zl(4194308,4,e,t)},useInsertionEffect:function(e,t){Zl(4,2,e,t)},useMemo:function(e,t){var i=Xt();t=t===void 0?null:t;var s=e();if(hs){bn(!0);try{e()}finally{bn(!1)}}return i.memoizedState=[s,t],s},useReducer:function(e,t,i){var s=Xt();if(i!==void 0){var c=i(t);if(hs){bn(!0);try{i(t)}finally{bn(!1)}}}else c=t;return s.memoizedState=s.baseState=c,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:c},s.queue=e,e=e.dispatch=nT.bind(null,Ae,e),[s.memoizedState,e]},useRef:function(e){var t=Xt();return e={current:e},t.memoizedState=e},useState:function(e){e=bd(e);var t=e.queue,i=jm.bind(null,Ae,t);return t.dispatch=i,[e.memoizedState,i]},useDebugValue:kd,useDeferredValue:function(e,t){var i=Xt();return Id(i,e,t)},useTransition:function(){var e=bd(!1);return e=Nm.bind(null,Ae,e.queue,!0,!1),Xt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,i){var s=Ae,c=Xt();if(je){if(i===void 0)throw Error(o(407));i=i()}else{if(i=t(),We===null)throw Error(o(349));(xe&127)!==0||om(s,t,i)}c.memoizedState=i;var u={value:i,getSnapshot:t};return c.queue=u,Em(lm.bind(null,s,u,e),[e]),s.flags|=2048,lo(9,{destroy:void 0},rm.bind(null,s,u,i,t),null),i},useId:function(){var e=Xt(),t=We.identifierPrefix;if(je){var i=hi,s=di;i=(s&~(1<<32-Yt(s)-1)).toString(32)+i,t="_"+t+"R_"+i,i=Ql++,0<i&&(t+="H"+i.toString(32)),t+="_"}else i=JS++,t="_"+t+"r_"+i.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Rd,useFormState:ym,useActionState:ym,useOptimistic:function(e){var t=Xt();t.memoizedState=t.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=i,t=Nd.bind(null,Ae,!0,i),i.dispatch=t,[e,t]},useMemoCache:Td,useCacheRefresh:function(){return Xt().memoizedState=tT.bind(null,Ae)},useEffectEvent:function(e){var t=Xt(),i={impl:e};return t.memoizedState=i,function(){if((Ge&2)!==0)throw Error(o(440));return i.impl.apply(void 0,arguments)}}},Md={readContext:Ut,use:Jl,useCallback:Im,useContext:Ut,useEffect:_d,useImperativeHandle:km,useInsertionEffect:bm,useLayoutEffect:wm,useMemo:Om,useReducer:Xl,useRef:Tm,useState:function(){return Xl(Di)},useDebugValue:kd,useDeferredValue:function(e,t){var i=mt();return Rm(i,Xe.memoizedState,e,t)},useTransition:function(){var e=Xl(Di)[0],t=mt().memoizedState;return[typeof e=="boolean"?e:_r(e),t]},useSyncExternalStore:sm,useId:Dm,useHostTransitionStatus:Rd,useFormState:vm,useActionState:vm,useOptimistic:function(e,t){var i=mt();return dm(i,Xe,e,t)},useMemoCache:Td,useCacheRefresh:Um};Md.useEffectEvent=Am;var Bm={readContext:Ut,use:Jl,useCallback:Im,useContext:Ut,useEffect:_d,useImperativeHandle:km,useInsertionEffect:bm,useLayoutEffect:wm,useMemo:Om,useReducer:Ad,useRef:Tm,useState:function(){return Ad(Di)},useDebugValue:kd,useDeferredValue:function(e,t){var i=mt();return Xe===null?Id(i,e,t):Rm(i,Xe.memoizedState,e,t)},useTransition:function(){var e=Ad(Di)[0],t=mt().memoizedState;return[typeof e=="boolean"?e:_r(e),t]},useSyncExternalStore:sm,useId:Dm,useHostTransitionStatus:Rd,useFormState:Sm,useActionState:Sm,useOptimistic:function(e,t){var i=mt();return Xe!==null?dm(i,Xe,e,t):(i.baseState=e,[e,i.queue.dispatch])},useMemoCache:Td,useCacheRefresh:Um};Bm.useEffectEvent=Am;function xd(e,t,i,s){t=e.memoizedState,i=i(s,t),i=i==null?t:S({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var Dd={enqueueSetState:function(e,t,i){e=e._reactInternals;var s=En(),c=ra(s);c.payload=t,i!=null&&(c.callback=i),t=la(e,c,s),t!==null&&(sn(t,e,s),Er(t,e,s))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var s=En(),c=ra(s);c.tag=1,c.payload=t,i!=null&&(c.callback=i),t=la(e,c,s),t!==null&&(sn(t,e,s),Er(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=En(),s=ra(i);s.tag=2,t!=null&&(s.callback=t),t=la(e,s,i),t!==null&&(sn(t,e,i),Er(t,e,i))}};function Km(e,t,i,s,c,u,g){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,u,g):t.prototype&&t.prototype.isPureReactComponent?!gr(i,s)||!gr(c,u):!0}function Pm(e,t,i,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,s),t.state!==e&&Dd.enqueueReplaceState(t,t.state,null)}function fs(e,t){var i=t;if("ref"in t){i={};for(var s in t)s!=="ref"&&(i[s]=t[s])}if(e=e.defaultProps){i===t&&(i=S({},i));for(var c in e)i[c]===void 0&&(i[c]=e[c])}return i}function Gm(e){Nl(e)}function Vm(e){console.error(e)}function Fm(e){Nl(e)}function ec(e,t){try{var i=e.onUncaughtError;i(t.value,{componentStack:t.stack})}catch(s){setTimeout(function(){throw s})}}function Ym(e,t,i){try{var s=e.onCaughtError;s(i.value,{componentStack:i.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function Ud(e,t,i){return i=ra(i),i.tag=3,i.payload={element:null},i.callback=function(){ec(e,t)},i}function Qm(e){return e=ra(e),e.tag=3,e}function qm(e,t,i,s){var c=i.type.getDerivedStateFromError;if(typeof c=="function"){var u=s.value;e.payload=function(){return c(u)},e.callback=function(){Ym(t,i,s)}}var g=i.stateNode;g!==null&&typeof g.componentDidCatch=="function"&&(e.callback=function(){Ym(t,i,s),typeof c!="function"&&(ga===null?ga=new Set([this]):ga.add(this));var C=s.stack;this.componentDidCatch(s.value,{componentStack:C!==null?C:""})})}function iT(e,t,i,s,c){if(i.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(t=i.alternate,t!==null&&eo(t,i,c,!0),i=vn.current,i!==null){switch(i.tag){case 31:case 13:return xn===null?hc():i.alternate===null&&ht===0&&(ht=3),i.flags&=-257,i.flags|=65536,i.lanes=c,s===Kl?i.flags|=16384:(t=i.updateQueue,t===null?i.updateQueue=new Set([s]):t.add(s),oh(e,s,c)),!1;case 22:return i.flags|=65536,s===Kl?i.flags|=16384:(t=i.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([s])},i.updateQueue=t):(i=t.retryQueue,i===null?t.retryQueue=new Set([s]):i.add(s)),oh(e,s,c)),!1}throw Error(o(435,i.tag))}return oh(e,s,c),hc(),!1}if(je)return t=vn.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=c,s!==ed&&(e=Error(o(422),{cause:s}),yr(On(e,i)))):(s!==ed&&(t=Error(o(423),{cause:s}),yr(On(t,i))),e=e.current.alternate,e.flags|=65536,c&=-c,e.lanes|=c,s=On(s,i),c=Ud(e.stateNode,s,c),dd(e,c),ht!==4&&(ht=2)),!1;var u=Error(o(520),{cause:s});if(u=On(u,i),jr===null?jr=[u]:jr.push(u),ht!==4&&(ht=2),t===null)return!0;s=On(s,i),i=t;do{switch(i.tag){case 3:return i.flags|=65536,e=c&-c,i.lanes|=e,e=Ud(i.stateNode,s,e),dd(i,e),!1;case 1:if(t=i.type,u=i.stateNode,(i.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||u!==null&&typeof u.componentDidCatch=="function"&&(ga===null||!ga.has(u))))return i.flags|=65536,c&=-c,i.lanes|=c,c=Qm(c),qm(c,e,i,s),dd(i,c),!1}i=i.return}while(i!==null);return!1}var jd=Error(o(461)),St=!1;function jt(e,t,i,s){t.child=e===null?$g(t,null,i,s):ds(t,e.child,i,s)}function Jm(e,t,i,s,c){i=i.render;var u=t.ref;if("ref"in s){var g={};for(var C in s)C!=="ref"&&(g[C]=s[C])}else g=s;return rs(t),s=yd(e,t,i,g,u,c),C=vd(),e!==null&&!St?(Cd(e,t,c),Ui(e,t,c)):(je&&C&&$u(t),t.flags|=1,jt(e,t,s,c),t.child)}function Xm(e,t,i,s,c){if(e===null){var u=i.type;return typeof u=="function"&&!Ju(u)&&u.defaultProps===void 0&&i.compare===null?(t.tag=15,t.type=u,Zm(e,t,u,s,c)):(e=Ul(i.type,null,s,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(u=e.child,!Vd(e,c)){var g=u.memoizedProps;if(i=i.compare,i=i!==null?i:gr,i(g,s)&&e.ref===t.ref)return Ui(e,t,c)}return t.flags|=1,e=Oi(u,s),e.ref=t.ref,e.return=t,t.child=e}function Zm(e,t,i,s,c){if(e!==null){var u=e.memoizedProps;if(gr(u,s)&&e.ref===t.ref)if(St=!1,t.pendingProps=s=u,Vd(e,c))(e.flags&131072)!==0&&(St=!0);else return t.lanes=e.lanes,Ui(e,t,c)}return Hd(e,t,i,s,c)}function $m(e,t,i,s){var c=s.children,u=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.mode==="hidden"){if((t.flags&128)!==0){if(u=u!==null?u.baseLanes|i:i,e!==null){for(s=t.child=e.child,c=0;s!==null;)c=c|s.lanes|s.childLanes,s=s.sibling;s=c&~u}else s=0,t.child=null;return Wm(e,t,u,i,s)}if((i&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Ll(t,u!==null?u.cachePool:null),u!==null?tm(t,u):fd(),nm(t);else return s=t.lanes=536870912,Wm(e,t,u!==null?u.baseLanes|i:i,i,s)}else u!==null?(Ll(t,u.cachePool),tm(t,u),ua(),t.memoizedState=null):(e!==null&&Ll(t,null),fd(),ua());return jt(e,t,c,i),t.child}function Or(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Wm(e,t,i,s,c){var u=rd();return u=u===null?null:{parent:vt._currentValue,pool:u},t.memoizedState={baseLanes:i,cachePool:u},e!==null&&Ll(t,null),fd(),nm(t),e!==null&&eo(e,t,s,!0),t.childLanes=c,null}function tc(e,t){return t=ic({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function ep(e,t,i){return ds(t,e.child,null,i),e=tc(t,t.pendingProps),e.flags|=2,Cn(t),t.memoizedState=null,e}function aT(e,t,i){var s=t.pendingProps,c=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(je){if(s.mode==="hidden")return e=tc(t,s),t.lanes=536870912,Or(null,e);if(md(t),(e=at)?(e=hy(e,Mn),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:na!==null?{id:di,overflow:hi}:null,retryLane:536870912,hydrationErrors:null},i=Hg(e),i.return=t,t.child=i,Dt=t,at=null)):e=null,e===null)throw aa(t);return t.lanes=536870912,null}return tc(t,s)}var u=e.memoizedState;if(u!==null){var g=u.dehydrated;if(md(t),c)if(t.flags&256)t.flags&=-257,t=ep(e,t,i);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(o(558));else if(St||eo(e,t,i,!1),c=(i&e.childLanes)!==0,St||c){if(s=We,s!==null&&(g=Ga(s,i),g!==0&&g!==u.retryLane))throw u.retryLane=g,is(e,g),sn(s,e,g),jd;hc(),t=ep(e,t,i)}else e=u.treeContext,at=Dn(g.nextSibling),Dt=t,je=!0,ia=null,Mn=!1,e!==null&&Bg(t,e),t=tc(t,s),t.flags|=4096;return t}return e=Oi(e.child,{mode:s.mode,children:s.children}),e.ref=t.ref,t.child=e,e.return=t,e}function nc(e,t){var i=t.ref;if(i===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(o(284));(e===null||e.ref!==i)&&(t.flags|=4194816)}}function Hd(e,t,i,s,c){return rs(t),i=yd(e,t,i,s,void 0,c),s=vd(),e!==null&&!St?(Cd(e,t,c),Ui(e,t,c)):(je&&s&&$u(t),t.flags|=1,jt(e,t,i,c),t.child)}function tp(e,t,i,s,c,u){return rs(t),t.updateQueue=null,i=am(t,s,i,c),im(e),s=vd(),e!==null&&!St?(Cd(e,t,u),Ui(e,t,u)):(je&&s&&$u(t),t.flags|=1,jt(e,t,i,u),t.child)}function np(e,t,i,s,c){if(rs(t),t.stateNode===null){var u=Xs,g=i.contextType;typeof g=="object"&&g!==null&&(u=Ut(g)),u=new i(s,u),t.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=Dd,t.stateNode=u,u._reactInternals=t,u=t.stateNode,u.props=s,u.state=t.memoizedState,u.refs={},cd(t),g=i.contextType,u.context=typeof g=="object"&&g!==null?Ut(g):Xs,u.state=t.memoizedState,g=i.getDerivedStateFromProps,typeof g=="function"&&(xd(t,i,g,s),u.state=t.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(g=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),g!==u.state&&Dd.enqueueReplaceState(u,u.state,null),br(t,s,u,c),Ar(),u.state=t.memoizedState),typeof u.componentDidMount=="function"&&(t.flags|=4194308),s=!0}else if(e===null){u=t.stateNode;var C=t.memoizedProps,A=fs(i,C);u.props=A;var R=u.context,B=i.contextType;g=Xs,typeof B=="object"&&B!==null&&(g=Ut(B));var V=i.getDerivedStateFromProps;B=typeof V=="function"||typeof u.getSnapshotBeforeUpdate=="function",C=t.pendingProps!==C,B||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(C||R!==g)&&Pm(t,u,s,g),oa=!1;var N=t.memoizedState;u.state=N,br(t,s,u,c),Ar(),R=t.memoizedState,C||N!==R||oa?(typeof V=="function"&&(xd(t,i,V,s),R=t.memoizedState),(A=oa||Km(t,i,A,s,N,R,g))?(B||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(t.flags|=4194308)):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=R),u.props=s,u.state=R,u.context=g,s=A):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{u=t.stateNode,ud(e,t),g=t.memoizedProps,B=fs(i,g),u.props=B,V=t.pendingProps,N=u.context,R=i.contextType,A=Xs,typeof R=="object"&&R!==null&&(A=Ut(R)),C=i.getDerivedStateFromProps,(R=typeof C=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(g!==V||N!==A)&&Pm(t,u,s,A),oa=!1,N=t.memoizedState,u.state=N,br(t,s,u,c),Ar();var U=t.memoizedState;g!==V||N!==U||oa||e!==null&&e.dependencies!==null&&Hl(e.dependencies)?(typeof C=="function"&&(xd(t,i,C,s),U=t.memoizedState),(B=oa||Km(t,i,B,s,N,U,A)||e!==null&&e.dependencies!==null&&Hl(e.dependencies))?(R||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(s,U,A),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(s,U,A)),typeof u.componentDidUpdate=="function"&&(t.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof u.componentDidUpdate!="function"||g===e.memoizedProps&&N===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&N===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=U),u.props=s,u.state=U,u.context=A,s=B):(typeof u.componentDidUpdate!="function"||g===e.memoizedProps&&N===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&N===e.memoizedState||(t.flags|=1024),s=!1)}return u=s,nc(e,t),s=(t.flags&128)!==0,u||s?(u=t.stateNode,i=s&&typeof i.getDerivedStateFromError!="function"?null:u.render(),t.flags|=1,e!==null&&s?(t.child=ds(t,e.child,null,c),t.child=ds(t,null,i,c)):jt(e,t,i,c),t.memoizedState=u.state,e=t.child):e=Ui(e,t,c),e}function ip(e,t,i,s){return ss(),t.flags|=256,jt(e,t,i,s),t.child}var zd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ld(e){return{baseLanes:e,cachePool:Yg()}}function Bd(e,t,i){return e=e!==null?e.childLanes&~i:0,t&&(e|=Tn),e}function ap(e,t,i){var s=t.pendingProps,c=!1,u=(t.flags&128)!==0,g;if((g=u)||(g=e!==null&&e.memoizedState===null?!1:(gt.current&2)!==0),g&&(c=!0,t.flags&=-129),g=(t.flags&32)!==0,t.flags&=-33,e===null){if(je){if(c?ca(t):ua(),(e=at)?(e=hy(e,Mn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:na!==null?{id:di,overflow:hi}:null,retryLane:536870912,hydrationErrors:null},i=Hg(e),i.return=t,t.child=i,Dt=t,at=null)):e=null,e===null)throw aa(t);return Eh(e)?t.lanes=32:t.lanes=536870912,null}var C=s.children;return s=s.fallback,c?(ua(),c=t.mode,C=ic({mode:"hidden",children:C},c),s=as(s,c,i,null),C.return=t,s.return=t,C.sibling=s,t.child=C,s=t.child,s.memoizedState=Ld(i),s.childLanes=Bd(e,g,i),t.memoizedState=zd,Or(null,s)):(ca(t),Kd(t,C))}var A=e.memoizedState;if(A!==null&&(C=A.dehydrated,C!==null)){if(u)t.flags&256?(ca(t),t.flags&=-257,t=Pd(e,t,i)):t.memoizedState!==null?(ua(),t.child=e.child,t.flags|=128,t=null):(ua(),C=s.fallback,c=t.mode,s=ic({mode:"visible",children:s.children},c),C=as(C,c,i,null),C.flags|=2,s.return=t,C.return=t,s.sibling=C,t.child=s,ds(t,e.child,null,i),s=t.child,s.memoizedState=Ld(i),s.childLanes=Bd(e,g,i),t.memoizedState=zd,t=Or(null,s));else if(ca(t),Eh(C)){if(g=C.nextSibling&&C.nextSibling.dataset,g)var R=g.dgst;g=R,s=Error(o(419)),s.stack="",s.digest=g,yr({value:s,source:null,stack:null}),t=Pd(e,t,i)}else if(St||eo(e,t,i,!1),g=(i&e.childLanes)!==0,St||g){if(g=We,g!==null&&(s=Ga(g,i),s!==0&&s!==A.retryLane))throw A.retryLane=s,is(e,s),sn(g,e,s),jd;Th(C)||hc(),t=Pd(e,t,i)}else Th(C)?(t.flags|=192,t.child=e.child,t=null):(e=A.treeContext,at=Dn(C.nextSibling),Dt=t,je=!0,ia=null,Mn=!1,e!==null&&Bg(t,e),t=Kd(t,s.children),t.flags|=4096);return t}return c?(ua(),C=s.fallback,c=t.mode,A=e.child,R=A.sibling,s=Oi(A,{mode:"hidden",children:s.children}),s.subtreeFlags=A.subtreeFlags&65011712,R!==null?C=Oi(R,C):(C=as(C,c,i,null),C.flags|=2),C.return=t,s.return=t,s.sibling=C,t.child=s,Or(null,s),s=t.child,C=e.child.memoizedState,C===null?C=Ld(i):(c=C.cachePool,c!==null?(A=vt._currentValue,c=c.parent!==A?{parent:A,pool:A}:c):c=Yg(),C={baseLanes:C.baseLanes|i,cachePool:c}),s.memoizedState=C,s.childLanes=Bd(e,g,i),t.memoizedState=zd,Or(e.child,s)):(ca(t),i=e.child,e=i.sibling,i=Oi(i,{mode:"visible",children:s.children}),i.return=t,i.sibling=null,e!==null&&(g=t.deletions,g===null?(t.deletions=[e],t.flags|=16):g.push(e)),t.child=i,t.memoizedState=null,i)}function Kd(e,t){return t=ic({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function ic(e,t){return e=yn(22,e,null,t),e.lanes=0,e}function Pd(e,t,i){return ds(t,e.child,null,i),e=Kd(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function sp(e,t,i){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),id(e.return,t,i)}function Gd(e,t,i,s,c,u){var g=e.memoizedState;g===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:i,tailMode:c,treeForkCount:u}:(g.isBackwards=t,g.rendering=null,g.renderingStartTime=0,g.last=s,g.tail=i,g.tailMode=c,g.treeForkCount=u)}function op(e,t,i){var s=t.pendingProps,c=s.revealOrder,u=s.tail;s=s.children;var g=gt.current,C=(g&2)!==0;if(C?(g=g&1|2,t.flags|=128):g&=1,J(gt,g),jt(e,t,s,i),s=je?pr:0,!C&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&sp(e,i,t);else if(e.tag===19)sp(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(c){case"forwards":for(i=t.child,c=null;i!==null;)e=i.alternate,e!==null&&Fl(e)===null&&(c=i),i=i.sibling;i=c,i===null?(c=t.child,t.child=null):(c=i.sibling,i.sibling=null),Gd(t,!1,c,i,u,s);break;case"backwards":case"unstable_legacy-backwards":for(i=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&Fl(e)===null){t.child=c;break}e=c.sibling,c.sibling=i,i=c,c=e}Gd(t,!0,i,null,u,s);break;case"together":Gd(t,!1,null,null,void 0,s);break;default:t.memoizedState=null}return t.child}function Ui(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),fa|=t.lanes,(i&t.childLanes)===0)if(e!==null){if(eo(e,t,i,!1),(i&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(o(153));if(t.child!==null){for(e=t.child,i=Oi(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=Oi(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function Vd(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Hl(e)))}function sT(e,t,i){switch(t.tag){case 3:it(t,t.stateNode.containerInfo),sa(t,vt,e.memoizedState.cache),ss();break;case 27:case 5:Ot(t);break;case 4:it(t,t.stateNode.containerInfo);break;case 10:sa(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,md(t),null;break;case 13:var s=t.memoizedState;if(s!==null)return s.dehydrated!==null?(ca(t),t.flags|=128,null):(i&t.child.childLanes)!==0?ap(e,t,i):(ca(t),e=Ui(e,t,i),e!==null?e.sibling:null);ca(t);break;case 19:var c=(e.flags&128)!==0;if(s=(i&t.childLanes)!==0,s||(eo(e,t,i,!1),s=(i&t.childLanes)!==0),c){if(s)return op(e,t,i);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),J(gt,gt.current),s)break;return null;case 22:return t.lanes=0,$m(e,t,i,t.pendingProps);case 24:sa(t,vt,e.memoizedState.cache)}return Ui(e,t,i)}function rp(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps)St=!0;else{if(!Vd(e,i)&&(t.flags&128)===0)return St=!1,sT(e,t,i);St=(e.flags&131072)!==0}else St=!1,je&&(t.flags&1048576)!==0&&Lg(t,pr,t.index);switch(t.lanes=0,t.tag){case 16:e:{var s=t.pendingProps;if(e=cs(t.elementType),t.type=e,typeof e=="function")Ju(e)?(s=fs(e,s),t.tag=1,t=np(null,t,e,s,i)):(t.tag=0,t=Hd(null,t,e,s,i));else{if(e!=null){var c=e.$$typeof;if(c===Ce){t.tag=11,t=Jm(null,t,e,s,i);break e}else if(c===se){t.tag=14,t=Xm(null,t,e,s,i);break e}}throw t=tt(e)||e,Error(o(306,t,""))}}return t;case 0:return Hd(e,t,t.type,t.pendingProps,i);case 1:return s=t.type,c=fs(s,t.pendingProps),np(e,t,s,c,i);case 3:e:{if(it(t,t.stateNode.containerInfo),e===null)throw Error(o(387));s=t.pendingProps;var u=t.memoizedState;c=u.element,ud(e,t),br(t,s,null,i);var g=t.memoizedState;if(s=g.cache,sa(t,vt,s),s!==u.cache&&ad(t,[vt],i,!0),Ar(),s=g.element,u.isDehydrated)if(u={element:s,isDehydrated:!1,cache:g.cache},t.updateQueue.baseState=u,t.memoizedState=u,t.flags&256){t=ip(e,t,s,i);break e}else if(s!==c){c=On(Error(o(424)),t),yr(c),t=ip(e,t,s,i);break e}else for(e=t.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,at=Dn(e.firstChild),Dt=t,je=!0,ia=null,Mn=!0,i=$g(t,null,s,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(ss(),s===c){t=Ui(e,t,i);break e}jt(e,t,s,i)}t=t.child}return t;case 26:return nc(e,t),e===null?(i=vy(t.type,null,t.pendingProps,null))?t.memoizedState=i:je||(i=t.type,e=t.pendingProps,s=Cc(re.current).createElement(i),s[lt]=t,s[wt]=e,Ht(s,i,e),ut(s),t.stateNode=s):t.memoizedState=vy(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Ot(t),e===null&&je&&(s=t.stateNode=my(t.type,t.pendingProps,re.current),Dt=t,Mn=!0,c=at,va(t.type)?(Ah=c,at=Dn(s.firstChild)):at=c),jt(e,t,t.pendingProps.children,i),nc(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&je&&((c=s=at)&&(s=UT(s,t.type,t.pendingProps,Mn),s!==null?(t.stateNode=s,Dt=t,at=Dn(s.firstChild),Mn=!1,c=!0):c=!1),c||aa(t)),Ot(t),c=t.type,u=t.pendingProps,g=e!==null?e.memoizedProps:null,s=u.children,vh(c,u)?s=null:g!==null&&vh(c,g)&&(t.flags|=32),t.memoizedState!==null&&(c=yd(e,t,XS,null,null,i),Vr._currentValue=c),nc(e,t),jt(e,t,s,i),t.child;case 6:return e===null&&je&&((e=i=at)&&(i=jT(i,t.pendingProps,Mn),i!==null?(t.stateNode=i,Dt=t,at=null,e=!0):e=!1),e||aa(t)),null;case 13:return ap(e,t,i);case 4:return it(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=ds(t,null,s,i):jt(e,t,s,i),t.child;case 11:return Jm(e,t,t.type,t.pendingProps,i);case 7:return jt(e,t,t.pendingProps,i),t.child;case 8:return jt(e,t,t.pendingProps.children,i),t.child;case 12:return jt(e,t,t.pendingProps.children,i),t.child;case 10:return s=t.pendingProps,sa(t,t.type,s.value),jt(e,t,s.children,i),t.child;case 9:return c=t.type._context,s=t.pendingProps.children,rs(t),c=Ut(c),s=s(c),t.flags|=1,jt(e,t,s,i),t.child;case 14:return Xm(e,t,t.type,t.pendingProps,i);case 15:return Zm(e,t,t.type,t.pendingProps,i);case 19:return op(e,t,i);case 31:return aT(e,t,i);case 22:return $m(e,t,i,t.pendingProps);case 24:return rs(t),s=Ut(vt),e===null?(c=rd(),c===null&&(c=We,u=sd(),c.pooledCache=u,u.refCount++,u!==null&&(c.pooledCacheLanes|=i),c=u),t.memoizedState={parent:s,cache:c},cd(t),sa(t,vt,c)):((e.lanes&i)!==0&&(ud(e,t),br(t,null,null,i),Ar()),c=e.memoizedState,u=t.memoizedState,c.parent!==s?(c={parent:s,cache:s},t.memoizedState=c,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=c),sa(t,vt,s)):(s=u.cache,sa(t,vt,s),s!==c.cache&&ad(t,[vt],i,!0))),jt(e,t,t.pendingProps.children,i),t.child;case 29:throw t.pendingProps}throw Error(o(156,t.tag))}function ji(e){e.flags|=4}function Fd(e,t,i,s,c){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(c&335544128)===c)if(e.stateNode.complete)e.flags|=8192;else if(Dp())e.flags|=8192;else throw us=Kl,ld}else e.flags&=-16777217}function lp(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Ay(t))if(Dp())e.flags|=8192;else throw us=Kl,ld}function ac(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Yo():536870912,e.lanes|=t,fo|=t)}function Rr(e,t){if(!je)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var s=null;i!==null;)i.alternate!==null&&(s=i),i=i.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function st(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,s=0;if(t)for(var c=e.child;c!==null;)i|=c.lanes|c.childLanes,s|=c.subtreeFlags&65011712,s|=c.flags&65011712,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)i|=c.lanes|c.childLanes,s|=c.subtreeFlags,s|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=s,e.childLanes=i,t}function oT(e,t,i){var s=t.pendingProps;switch(Wu(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return st(t),null;case 1:return st(t),null;case 3:return i=t.stateNode,s=null,e!==null&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),Mi(vt),Ue(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(Ws(t)?ji(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,td())),st(t),null;case 26:var c=t.type,u=t.memoizedState;return e===null?(ji(t),u!==null?(st(t),lp(t,u)):(st(t),Fd(t,c,null,s,i))):u?u!==e.memoizedState?(ji(t),st(t),lp(t,u)):(st(t),t.flags&=-16777217):(e=e.memoizedProps,e!==s&&ji(t),st(t),Fd(t,c,e,s,i)),null;case 27:if(Ci(t),i=re.current,c=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==s&&ji(t);else{if(!s){if(t.stateNode===null)throw Error(o(166));return st(t),null}e=P.current,Ws(t)?Kg(t):(e=my(c,s,i),t.stateNode=e,ji(t))}return st(t),null;case 5:if(Ci(t),c=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==s&&ji(t);else{if(!s){if(t.stateNode===null)throw Error(o(166));return st(t),null}if(u=P.current,Ws(t))Kg(t);else{var g=Cc(re.current);switch(u){case 1:u=g.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:u=g.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":u=g.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":u=g.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":u=g.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild);break;case"select":u=typeof s.is=="string"?g.createElement("select",{is:s.is}):g.createElement("select"),s.multiple?u.multiple=!0:s.size&&(u.size=s.size);break;default:u=typeof s.is=="string"?g.createElement(c,{is:s.is}):g.createElement(c)}}u[lt]=t,u[wt]=s;e:for(g=t.child;g!==null;){if(g.tag===5||g.tag===6)u.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}t.stateNode=u;e:switch(Ht(u,c,s),c){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&ji(t)}}return st(t),Fd(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,i),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==s&&ji(t);else{if(typeof s!="string"&&t.stateNode===null)throw Error(o(166));if(e=re.current,Ws(t)){if(e=t.stateNode,i=t.memoizedProps,s=null,c=Dt,c!==null)switch(c.tag){case 27:case 5:s=c.memoizedProps}e[lt]=t,e=!!(e.nodeValue===i||s!==null&&s.suppressHydrationWarning===!0||ay(e.nodeValue,i)),e||aa(t,!0)}else e=Cc(e).createTextNode(s),e[lt]=t,t.stateNode=e}return st(t),null;case 31:if(i=t.memoizedState,e===null||e.memoizedState!==null){if(s=Ws(t),i!==null){if(e===null){if(!s)throw Error(o(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(557));e[lt]=t}else ss(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;st(t),e=!1}else i=td(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=i),e=!0;if(!e)return t.flags&256?(Cn(t),t):(Cn(t),null);if((t.flags&128)!==0)throw Error(o(558))}return st(t),null;case 13:if(s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(c=Ws(t),s!==null&&s.dehydrated!==null){if(e===null){if(!c)throw Error(o(318));if(c=t.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(o(317));c[lt]=t}else ss(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;st(t),c=!1}else c=td(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=c),c=!0;if(!c)return t.flags&256?(Cn(t),t):(Cn(t),null)}return Cn(t),(t.flags&128)!==0?(t.lanes=i,t):(i=s!==null,e=e!==null&&e.memoizedState!==null,i&&(s=t.child,c=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(c=s.alternate.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==c&&(s.flags|=2048)),i!==e&&i&&(t.child.flags|=8192),ac(t,t.updateQueue),st(t),null);case 4:return Ue(),e===null&&fh(t.stateNode.containerInfo),st(t),null;case 10:return Mi(t.type),st(t),null;case 19:if(M(gt),s=t.memoizedState,s===null)return st(t),null;if(c=(t.flags&128)!==0,u=s.rendering,u===null)if(c)Rr(s,!1);else{if(ht!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(u=Fl(e),u!==null){for(t.flags|=128,Rr(s,!1),e=u.updateQueue,t.updateQueue=e,ac(t,e),t.subtreeFlags=0,e=i,i=t.child;i!==null;)jg(i,e),i=i.sibling;return J(gt,gt.current&1|2),je&&Ri(t,s.treeForkCount),t.child}e=e.sibling}s.tail!==null&&Kt()>cc&&(t.flags|=128,c=!0,Rr(s,!1),t.lanes=4194304)}else{if(!c)if(e=Fl(u),e!==null){if(t.flags|=128,c=!0,e=e.updateQueue,t.updateQueue=e,ac(t,e),Rr(s,!0),s.tail===null&&s.tailMode==="hidden"&&!u.alternate&&!je)return st(t),null}else 2*Kt()-s.renderingStartTime>cc&&i!==536870912&&(t.flags|=128,c=!0,Rr(s,!1),t.lanes=4194304);s.isBackwards?(u.sibling=t.child,t.child=u):(e=s.last,e!==null?e.sibling=u:t.child=u,s.last=u)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Kt(),e.sibling=null,i=gt.current,J(gt,c?i&1|2:i&1),je&&Ri(t,s.treeForkCount),e):(st(t),null);case 22:case 23:return Cn(t),gd(),s=t.memoizedState!==null,e!==null?e.memoizedState!==null!==s&&(t.flags|=8192):s&&(t.flags|=8192),s?(i&536870912)!==0&&(t.flags&128)===0&&(st(t),t.subtreeFlags&6&&(t.flags|=8192)):st(t),i=t.updateQueue,i!==null&&ac(t,i.retryQueue),i=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),s=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),s!==i&&(t.flags|=2048),e!==null&&M(ls),null;case 24:return i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),Mi(vt),st(t),null;case 25:return null;case 30:return null}throw Error(o(156,t.tag))}function rT(e,t){switch(Wu(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Mi(vt),Ue(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Ci(t),null;case 31:if(t.memoizedState!==null){if(Cn(t),t.alternate===null)throw Error(o(340));ss()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(Cn(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(o(340));ss()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return M(gt),null;case 4:return Ue(),null;case 10:return Mi(t.type),null;case 22:case 23:return Cn(t),gd(),e!==null&&M(ls),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Mi(vt),null;case 25:return null;default:return null}}function cp(e,t){switch(Wu(t),t.tag){case 3:Mi(vt),Ue();break;case 26:case 27:case 5:Ci(t);break;case 4:Ue();break;case 31:t.memoizedState!==null&&Cn(t);break;case 13:Cn(t);break;case 19:M(gt);break;case 10:Mi(t.type);break;case 22:case 23:Cn(t),gd(),e!==null&&M(ls);break;case 24:Mi(vt)}}function Nr(e,t){try{var i=t.updateQueue,s=i!==null?i.lastEffect:null;if(s!==null){var c=s.next;i=c;do{if((i.tag&e)===e){s=void 0;var u=i.create,g=i.inst;s=u(),g.destroy=s}i=i.next}while(i!==c)}}catch(C){qe(t,t.return,C)}}function da(e,t,i){try{var s=t.updateQueue,c=s!==null?s.lastEffect:null;if(c!==null){var u=c.next;s=u;do{if((s.tag&e)===e){var g=s.inst,C=g.destroy;if(C!==void 0){g.destroy=void 0,c=t;var A=i,R=C;try{R()}catch(B){qe(c,A,B)}}}s=s.next}while(s!==u)}}catch(B){qe(t,t.return,B)}}function up(e){var t=e.updateQueue;if(t!==null){var i=e.stateNode;try{em(t,i)}catch(s){qe(e,e.return,s)}}}function dp(e,t,i){i.props=fs(e.type,e.memoizedProps),i.state=e.memoizedState;try{i.componentWillUnmount()}catch(s){qe(e,t,s)}}function Mr(e,t){try{var i=e.ref;if(i!==null){switch(e.tag){case 26:case 27:case 5:var s=e.stateNode;break;case 30:s=e.stateNode;break;default:s=e.stateNode}typeof i=="function"?e.refCleanup=i(s):i.current=s}}catch(c){qe(e,t,c)}}function fi(e,t){var i=e.ref,s=e.refCleanup;if(i!==null)if(typeof s=="function")try{s()}catch(c){qe(e,t,c)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(c){qe(e,t,c)}else i.current=null}function hp(e){var t=e.type,i=e.memoizedProps,s=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":i.autoFocus&&s.focus();break e;case"img":i.src?s.src=i.src:i.srcSet&&(s.srcset=i.srcSet)}}catch(c){qe(e,e.return,c)}}function Yd(e,t,i){try{var s=e.stateNode;OT(s,e.type,i,t),s[wt]=t}catch(c){qe(e,e.return,c)}}function fp(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&va(e.type)||e.tag===4}function Qd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||fp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&va(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function qd(e,t,i){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(e,t):(t=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,t.appendChild(e),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=kn));else if(s!==4&&(s===27&&va(e.type)&&(i=e.stateNode,t=null),e=e.child,e!==null))for(qd(e,t,i),e=e.sibling;e!==null;)qd(e,t,i),e=e.sibling}function sc(e,t,i){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(s!==4&&(s===27&&va(e.type)&&(i=e.stateNode),e=e.child,e!==null))for(sc(e,t,i),e=e.sibling;e!==null;)sc(e,t,i),e=e.sibling}function gp(e){var t=e.stateNode,i=e.memoizedProps;try{for(var s=e.type,c=t.attributes;c.length;)t.removeAttributeNode(c[0]);Ht(t,s,i),t[lt]=e,t[wt]=i}catch(u){qe(e,e.return,u)}}var Hi=!1,Tt=!1,Jd=!1,mp=typeof WeakSet=="function"?WeakSet:Set,It=null;function lT(e,t){if(e=e.containerInfo,ph=_c,e=kg(e),Pu(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var s=i.getSelection&&i.getSelection();if(s&&s.rangeCount!==0){i=s.anchorNode;var c=s.anchorOffset,u=s.focusNode;s=s.focusOffset;try{i.nodeType,u.nodeType}catch{i=null;break e}var g=0,C=-1,A=-1,R=0,B=0,V=e,N=null;t:for(;;){for(var U;V!==i||c!==0&&V.nodeType!==3||(C=g+c),V!==u||s!==0&&V.nodeType!==3||(A=g+s),V.nodeType===3&&(g+=V.nodeValue.length),(U=V.firstChild)!==null;)N=V,V=U;for(;;){if(V===e)break t;if(N===i&&++R===c&&(C=g),N===u&&++B===s&&(A=g),(U=V.nextSibling)!==null)break;V=N,N=V.parentNode}V=U}i=C===-1||A===-1?null:{start:C,end:A}}else i=null}i=i||{start:0,end:0}}else i=null;for(yh={focusedElem:e,selectionRange:i},_c=!1,It=t;It!==null;)if(t=It,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,It=e;else for(;It!==null;){switch(t=It,u=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(i=0;i<e.length;i++)c=e[i],c.ref.impl=c.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&u!==null){e=void 0,i=t,c=u.memoizedProps,u=u.memoizedState,s=i.stateNode;try{var ae=fs(i.type,c);e=s.getSnapshotBeforeUpdate(ae,u),s.__reactInternalSnapshotBeforeUpdate=e}catch(fe){qe(i,i.return,fe)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,i=e.nodeType,i===9)Sh(e);else if(i===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Sh(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(o(163))}if(e=t.sibling,e!==null){e.return=t.return,It=e;break}It=t.return}}function pp(e,t,i){var s=i.flags;switch(i.tag){case 0:case 11:case 15:Li(e,i),s&4&&Nr(5,i);break;case 1:if(Li(e,i),s&4)if(e=i.stateNode,t===null)try{e.componentDidMount()}catch(g){qe(i,i.return,g)}else{var c=fs(i.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(c,t,e.__reactInternalSnapshotBeforeUpdate)}catch(g){qe(i,i.return,g)}}s&64&&up(i),s&512&&Mr(i,i.return);break;case 3:if(Li(e,i),s&64&&(e=i.updateQueue,e!==null)){if(t=null,i.child!==null)switch(i.child.tag){case 27:case 5:t=i.child.stateNode;break;case 1:t=i.child.stateNode}try{em(e,t)}catch(g){qe(i,i.return,g)}}break;case 27:t===null&&s&4&&gp(i);case 26:case 5:Li(e,i),t===null&&s&4&&hp(i),s&512&&Mr(i,i.return);break;case 12:Li(e,i);break;case 31:Li(e,i),s&4&&Cp(e,i);break;case 13:Li(e,i),s&4&&Sp(e,i),s&64&&(e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(i=yT.bind(null,i),HT(e,i))));break;case 22:if(s=i.memoizedState!==null||Hi,!s){t=t!==null&&t.memoizedState!==null||Tt,c=Hi;var u=Tt;Hi=s,(Tt=t)&&!u?Bi(e,i,(i.subtreeFlags&8772)!==0):Li(e,i),Hi=c,Tt=u}break;case 30:break;default:Li(e,i)}}function yp(e){var t=e.alternate;t!==null&&(e.alternate=null,yp(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&qo(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var ot=null,en=!1;function zi(e,t,i){for(i=i.child;i!==null;)vp(e,t,i),i=i.sibling}function vp(e,t,i){if(Nt&&typeof Nt.onCommitFiberUnmount=="function")try{Nt.onCommitFiberUnmount(ni,i)}catch{}switch(i.tag){case 26:Tt||fi(i,t),zi(e,t,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:Tt||fi(i,t);var s=ot,c=en;va(i.type)&&(ot=i.stateNode,en=!1),zi(e,t,i),Kr(i.stateNode),ot=s,en=c;break;case 5:Tt||fi(i,t);case 6:if(s=ot,c=en,ot=null,zi(e,t,i),ot=s,en=c,ot!==null)if(en)try{(ot.nodeType===9?ot.body:ot.nodeName==="HTML"?ot.ownerDocument.body:ot).removeChild(i.stateNode)}catch(u){qe(i,t,u)}else try{ot.removeChild(i.stateNode)}catch(u){qe(i,t,u)}break;case 18:ot!==null&&(en?(e=ot,uy(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,i.stateNode),To(e)):uy(ot,i.stateNode));break;case 4:s=ot,c=en,ot=i.stateNode.containerInfo,en=!0,zi(e,t,i),ot=s,en=c;break;case 0:case 11:case 14:case 15:da(2,i,t),Tt||da(4,i,t),zi(e,t,i);break;case 1:Tt||(fi(i,t),s=i.stateNode,typeof s.componentWillUnmount=="function"&&dp(i,t,s)),zi(e,t,i);break;case 21:zi(e,t,i);break;case 22:Tt=(s=Tt)||i.memoizedState!==null,zi(e,t,i),Tt=s;break;default:zi(e,t,i)}}function Cp(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{To(e)}catch(i){qe(t,t.return,i)}}}function Sp(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{To(e)}catch(i){qe(t,t.return,i)}}function cT(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new mp),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new mp),t;default:throw Error(o(435,e.tag))}}function oc(e,t){var i=cT(e);t.forEach(function(s){if(!i.has(s)){i.add(s);var c=vT.bind(null,e,s);s.then(c,c)}})}function tn(e,t){var i=t.deletions;if(i!==null)for(var s=0;s<i.length;s++){var c=i[s],u=e,g=t,C=g;e:for(;C!==null;){switch(C.tag){case 27:if(va(C.type)){ot=C.stateNode,en=!1;break e}break;case 5:ot=C.stateNode,en=!1;break e;case 3:case 4:ot=C.stateNode.containerInfo,en=!0;break e}C=C.return}if(ot===null)throw Error(o(160));vp(u,g,c),ot=null,en=!1,u=c.alternate,u!==null&&(u.return=null),c.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Tp(t,e),t=t.sibling}var Fn=null;function Tp(e,t){var i=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:tn(t,e),nn(e),s&4&&(da(3,e,e.return),Nr(3,e),da(5,e,e.return));break;case 1:tn(t,e),nn(e),s&512&&(Tt||i===null||fi(i,i.return)),s&64&&Hi&&(e=e.updateQueue,e!==null&&(s=e.callbacks,s!==null&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=i===null?s:i.concat(s))));break;case 26:var c=Fn;if(tn(t,e),nn(e),s&512&&(Tt||i===null||fi(i,i.return)),s&4){var u=i!==null?i.memoizedState:null;if(s=e.memoizedState,i===null)if(s===null)if(e.stateNode===null){e:{s=e.type,i=e.memoizedProps,c=c.ownerDocument||c;t:switch(s){case"title":u=c.getElementsByTagName("title")[0],(!u||u[gn]||u[lt]||u.namespaceURI==="http://www.w3.org/2000/svg"||u.hasAttribute("itemprop"))&&(u=c.createElement(s),c.head.insertBefore(u,c.querySelector("head > title"))),Ht(u,s,i),u[lt]=e,ut(u),s=u;break e;case"link":var g=Ty("link","href",c).get(s+(i.href||""));if(g){for(var C=0;C<g.length;C++)if(u=g[C],u.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&u.getAttribute("rel")===(i.rel==null?null:i.rel)&&u.getAttribute("title")===(i.title==null?null:i.title)&&u.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){g.splice(C,1);break t}}u=c.createElement(s),Ht(u,s,i),c.head.appendChild(u);break;case"meta":if(g=Ty("meta","content",c).get(s+(i.content||""))){for(C=0;C<g.length;C++)if(u=g[C],u.getAttribute("content")===(i.content==null?null:""+i.content)&&u.getAttribute("name")===(i.name==null?null:i.name)&&u.getAttribute("property")===(i.property==null?null:i.property)&&u.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&u.getAttribute("charset")===(i.charSet==null?null:i.charSet)){g.splice(C,1);break t}}u=c.createElement(s),Ht(u,s,i),c.head.appendChild(u);break;default:throw Error(o(468,s))}u[lt]=e,ut(u),s=u}e.stateNode=s}else Ey(c,e.type,e.stateNode);else e.stateNode=Sy(c,s,e.memoizedProps);else u!==s?(u===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):u.count--,s===null?Ey(c,e.type,e.stateNode):Sy(c,s,e.memoizedProps)):s===null&&e.stateNode!==null&&Yd(e,e.memoizedProps,i.memoizedProps)}break;case 27:tn(t,e),nn(e),s&512&&(Tt||i===null||fi(i,i.return)),i!==null&&s&4&&Yd(e,e.memoizedProps,i.memoizedProps);break;case 5:if(tn(t,e),nn(e),s&512&&(Tt||i===null||fi(i,i.return)),e.flags&32){c=e.stateNode;try{pt(c,"")}catch(ae){qe(e,e.return,ae)}}s&4&&e.stateNode!=null&&(c=e.memoizedProps,Yd(e,c,i!==null?i.memoizedProps:c)),s&1024&&(Jd=!0);break;case 6:if(tn(t,e),nn(e),s&4){if(e.stateNode===null)throw Error(o(162));s=e.memoizedProps,i=e.stateNode;try{i.nodeValue=s}catch(ae){qe(e,e.return,ae)}}break;case 3:if(Ec=null,c=Fn,Fn=Sc(t.containerInfo),tn(t,e),Fn=c,nn(e),s&4&&i!==null&&i.memoizedState.isDehydrated)try{To(t.containerInfo)}catch(ae){qe(e,e.return,ae)}Jd&&(Jd=!1,Ep(e));break;case 4:s=Fn,Fn=Sc(e.stateNode.containerInfo),tn(t,e),nn(e),Fn=s;break;case 12:tn(t,e),nn(e);break;case 31:tn(t,e),nn(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,oc(e,s)));break;case 13:tn(t,e),nn(e),e.child.flags&8192&&e.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(lc=Kt()),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,oc(e,s)));break;case 22:c=e.memoizedState!==null;var A=i!==null&&i.memoizedState!==null,R=Hi,B=Tt;if(Hi=R||c,Tt=B||A,tn(t,e),Tt=B,Hi=R,nn(e),s&8192)e:for(t=e.stateNode,t._visibility=c?t._visibility&-2:t._visibility|1,c&&(i===null||A||Hi||Tt||gs(e)),i=null,t=e;;){if(t.tag===5||t.tag===26){if(i===null){A=i=t;try{if(u=A.stateNode,c)g=u.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none";else{C=A.stateNode;var V=A.memoizedProps.style,N=V!=null&&V.hasOwnProperty("display")?V.display:null;C.style.display=N==null||typeof N=="boolean"?"":(""+N).trim()}}catch(ae){qe(A,A.return,ae)}}}else if(t.tag===6){if(i===null){A=t;try{A.stateNode.nodeValue=c?"":A.memoizedProps}catch(ae){qe(A,A.return,ae)}}}else if(t.tag===18){if(i===null){A=t;try{var U=A.stateNode;c?dy(U,!0):dy(A.stateNode,!1)}catch(ae){qe(A,A.return,ae)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;i===t&&(i=null),t=t.return}i===t&&(i=null),t.sibling.return=t.return,t=t.sibling}s&4&&(s=e.updateQueue,s!==null&&(i=s.retryQueue,i!==null&&(s.retryQueue=null,oc(e,i))));break;case 19:tn(t,e),nn(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,oc(e,s)));break;case 30:break;case 21:break;default:tn(t,e),nn(e)}}function nn(e){var t=e.flags;if(t&2){try{for(var i,s=e.return;s!==null;){if(fp(s)){i=s;break}s=s.return}if(i==null)throw Error(o(160));switch(i.tag){case 27:var c=i.stateNode,u=Qd(e);sc(e,u,c);break;case 5:var g=i.stateNode;i.flags&32&&(pt(g,""),i.flags&=-33);var C=Qd(e);sc(e,C,g);break;case 3:case 4:var A=i.stateNode.containerInfo,R=Qd(e);qd(e,R,A);break;default:throw Error(o(161))}}catch(B){qe(e,e.return,B)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Ep(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Ep(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Li(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)pp(e,t.alternate,t),t=t.sibling}function gs(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:da(4,t,t.return),gs(t);break;case 1:fi(t,t.return);var i=t.stateNode;typeof i.componentWillUnmount=="function"&&dp(t,t.return,i),gs(t);break;case 27:Kr(t.stateNode);case 26:case 5:fi(t,t.return),gs(t);break;case 22:t.memoizedState===null&&gs(t);break;case 30:gs(t);break;default:gs(t)}e=e.sibling}}function Bi(e,t,i){for(i=i&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var s=t.alternate,c=e,u=t,g=u.flags;switch(u.tag){case 0:case 11:case 15:Bi(c,u,i),Nr(4,u);break;case 1:if(Bi(c,u,i),s=u,c=s.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch(R){qe(s,s.return,R)}if(s=u,c=s.updateQueue,c!==null){var C=s.stateNode;try{var A=c.shared.hiddenCallbacks;if(A!==null)for(c.shared.hiddenCallbacks=null,c=0;c<A.length;c++)Wg(A[c],C)}catch(R){qe(s,s.return,R)}}i&&g&64&&up(u),Mr(u,u.return);break;case 27:gp(u);case 26:case 5:Bi(c,u,i),i&&s===null&&g&4&&hp(u),Mr(u,u.return);break;case 12:Bi(c,u,i);break;case 31:Bi(c,u,i),i&&g&4&&Cp(c,u);break;case 13:Bi(c,u,i),i&&g&4&&Sp(c,u);break;case 22:u.memoizedState===null&&Bi(c,u,i),Mr(u,u.return);break;case 30:break;default:Bi(c,u,i)}t=t.sibling}}function Xd(e,t){var i=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==i&&(e!=null&&e.refCount++,i!=null&&vr(i))}function Zd(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&vr(e))}function Yn(e,t,i,s){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Ap(e,t,i,s),t=t.sibling}function Ap(e,t,i,s){var c=t.flags;switch(t.tag){case 0:case 11:case 15:Yn(e,t,i,s),c&2048&&Nr(9,t);break;case 1:Yn(e,t,i,s);break;case 3:Yn(e,t,i,s),c&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&vr(e)));break;case 12:if(c&2048){Yn(e,t,i,s),e=t.stateNode;try{var u=t.memoizedProps,g=u.id,C=u.onPostCommit;typeof C=="function"&&C(g,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(A){qe(t,t.return,A)}}else Yn(e,t,i,s);break;case 31:Yn(e,t,i,s);break;case 13:Yn(e,t,i,s);break;case 23:break;case 22:u=t.stateNode,g=t.alternate,t.memoizedState!==null?u._visibility&2?Yn(e,t,i,s):xr(e,t):u._visibility&2?Yn(e,t,i,s):(u._visibility|=2,co(e,t,i,s,(t.subtreeFlags&10256)!==0||!1)),c&2048&&Xd(g,t);break;case 24:Yn(e,t,i,s),c&2048&&Zd(t.alternate,t);break;default:Yn(e,t,i,s)}}function co(e,t,i,s,c){for(c=c&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var u=e,g=t,C=i,A=s,R=g.flags;switch(g.tag){case 0:case 11:case 15:co(u,g,C,A,c),Nr(8,g);break;case 23:break;case 22:var B=g.stateNode;g.memoizedState!==null?B._visibility&2?co(u,g,C,A,c):xr(u,g):(B._visibility|=2,co(u,g,C,A,c)),c&&R&2048&&Xd(g.alternate,g);break;case 24:co(u,g,C,A,c),c&&R&2048&&Zd(g.alternate,g);break;default:co(u,g,C,A,c)}t=t.sibling}}function xr(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var i=e,s=t,c=s.flags;switch(s.tag){case 22:xr(i,s),c&2048&&Xd(s.alternate,s);break;case 24:xr(i,s),c&2048&&Zd(s.alternate,s);break;default:xr(i,s)}t=t.sibling}}var Dr=8192;function uo(e,t,i){if(e.subtreeFlags&Dr)for(e=e.child;e!==null;)bp(e,t,i),e=e.sibling}function bp(e,t,i){switch(e.tag){case 26:uo(e,t,i),e.flags&Dr&&e.memoizedState!==null&&JT(i,Fn,e.memoizedState,e.memoizedProps);break;case 5:uo(e,t,i);break;case 3:case 4:var s=Fn;Fn=Sc(e.stateNode.containerInfo),uo(e,t,i),Fn=s;break;case 22:e.memoizedState===null&&(s=e.alternate,s!==null&&s.memoizedState!==null?(s=Dr,Dr=16777216,uo(e,t,i),Dr=s):uo(e,t,i));break;default:uo(e,t,i)}}function wp(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Ur(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var i=0;i<t.length;i++){var s=t[i];It=s,kp(s,e)}wp(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)_p(e),e=e.sibling}function _p(e){switch(e.tag){case 0:case 11:case 15:Ur(e),e.flags&2048&&da(9,e,e.return);break;case 3:Ur(e);break;case 12:Ur(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,rc(e)):Ur(e);break;default:Ur(e)}}function rc(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var i=0;i<t.length;i++){var s=t[i];It=s,kp(s,e)}wp(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:da(8,t,t.return),rc(t);break;case 22:i=t.stateNode,i._visibility&2&&(i._visibility&=-3,rc(t));break;default:rc(t)}e=e.sibling}}function kp(e,t){for(;It!==null;){var i=It;switch(i.tag){case 0:case 11:case 15:da(8,i,t);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var s=i.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:vr(i.memoizedState.cache)}if(s=i.child,s!==null)s.return=i,It=s;else e:for(i=e;It!==null;){s=It;var c=s.sibling,u=s.return;if(yp(s),s===i){It=null;break e}if(c!==null){c.return=u,It=c;break e}It=u}}}var uT={getCacheForType:function(e){var t=Ut(vt),i=t.data.get(e);return i===void 0&&(i=e(),t.data.set(e,i)),i},cacheSignal:function(){return Ut(vt).controller.signal}},dT=typeof WeakMap=="function"?WeakMap:Map,Ge=0,We=null,Ne=null,xe=0,Qe=0,Sn=null,ha=!1,ho=!1,$d=!1,Ki=0,ht=0,fa=0,ms=0,Wd=0,Tn=0,fo=0,jr=null,an=null,eh=!1,lc=0,Ip=0,cc=1/0,uc=null,ga=null,At=0,ma=null,go=null,Pi=0,th=0,nh=null,Op=null,Hr=0,ih=null;function En(){return(Ge&2)!==0&&xe!==0?xe&-xe:j.T!==null?ch():Us()}function Rp(){if(Tn===0)if((xe&536870912)===0||je){var e=Si;Si<<=1,(Si&3932160)===0&&(Si=262144),Tn=e}else Tn=536870912;return e=vn.current,e!==null&&(e.flags|=32),Tn}function sn(e,t,i){(e===We&&(Qe===2||Qe===9)||e.cancelPendingCommit!==null)&&(mo(e,0),pa(e,xe,Tn,!1)),Pa(e,i),((Ge&2)===0||e!==We)&&(e===We&&((Ge&2)===0&&(ms|=i),ht===4&&pa(e,xe,Tn,!1)),gi(e))}function Np(e,t,i){if((Ge&6)!==0)throw Error(o(327));var s=!i&&(t&127)===0&&(t&e.expiredLanes)===0||Ti(e,t),c=s?gT(e,t):sh(e,t,!0),u=s;do{if(c===0){ho&&!s&&pa(e,t,0,!1);break}else{if(i=e.current.alternate,u&&!hT(i)){c=sh(e,t,!1),u=!1;continue}if(c===2){if(u=t,e.errorRecoveryDisabledLanes&u)var g=0;else g=e.pendingLanes&-536870913,g=g!==0?g:g&536870912?536870912:0;if(g!==0){t=g;e:{var C=e;c=jr;var A=C.current.memoizedState.isDehydrated;if(A&&(mo(C,g).flags|=256),g=sh(C,g,!1),g!==2){if($d&&!A){C.errorRecoveryDisabledLanes|=u,ms|=u,c=4;break e}u=an,an=c,u!==null&&(an===null?an=u:an.push.apply(an,u))}c=g}if(u=!1,c!==2)continue}}if(c===1){mo(e,0),pa(e,t,0,!0);break}e:{switch(s=e,u=c,u){case 0:case 1:throw Error(o(345));case 4:if((t&4194048)!==t)break;case 6:pa(s,t,Tn,!ha);break e;case 2:an=null;break;case 3:case 5:break;default:throw Error(o(329))}if((t&62914560)===t&&(c=lc+300-Kt(),10<c)){if(pa(s,t,Tn,!ha),Ka(s,0,!0)!==0)break e;Pi=t,s.timeoutHandle=ly(Mp.bind(null,s,i,an,uc,eh,t,Tn,ms,fo,ha,u,"Throttled",-0,0),c);break e}Mp(s,i,an,uc,eh,t,Tn,ms,fo,ha,u,null,-0,0)}}break}while(!0);gi(e)}function Mp(e,t,i,s,c,u,g,C,A,R,B,V,N,U){if(e.timeoutHandle=-1,V=t.subtreeFlags,V&8192||(V&16785408)===16785408){V={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:kn},bp(t,u,V);var ae=(u&62914560)===u?lc-Kt():(u&4194048)===u?Ip-Kt():0;if(ae=XT(V,ae),ae!==null){Pi=u,e.cancelPendingCommit=ae(Bp.bind(null,e,t,u,i,s,c,g,C,A,B,V,null,N,U)),pa(e,u,g,!R);return}}Bp(e,t,u,i,s,c,g,C,A)}function hT(e){for(var t=e;;){var i=t.tag;if((i===0||i===11||i===15)&&t.flags&16384&&(i=t.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var s=0;s<i.length;s++){var c=i[s],u=c.getSnapshot;c=c.value;try{if(!pn(u(),c))return!1}catch{return!1}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function pa(e,t,i,s){t&=~Wd,t&=~ms,e.suspendedLanes|=t,e.pingedLanes&=~t,s&&(e.warmLanes|=t),s=e.expirationTimes;for(var c=t;0<c;){var u=31-Yt(c),g=1<<u;s[u]=-1,c&=~g}i!==0&&yl(e,i,t)}function dc(){return(Ge&6)===0?(zr(0),!1):!0}function ah(){if(Ne!==null){if(Qe===0)var e=Ne.return;else e=Ne,Ni=os=null,Sd(e),ao=null,Sr=0,e=Ne;for(;e!==null;)cp(e.alternate,e),e=e.return;Ne=null}}function mo(e,t){var i=e.timeoutHandle;i!==-1&&(e.timeoutHandle=-1,MT(i)),i=e.cancelPendingCommit,i!==null&&(e.cancelPendingCommit=null,i()),Pi=0,ah(),We=e,Ne=i=Oi(e.current,null),xe=t,Qe=0,Sn=null,ha=!1,ho=Ti(e,t),$d=!1,fo=Tn=Wd=ms=fa=ht=0,an=jr=null,eh=!1,(t&8)!==0&&(t|=t&32);var s=e.entangledLanes;if(s!==0)for(e=e.entanglements,s&=t;0<s;){var c=31-Yt(s),u=1<<c;t|=e[c],s&=~u}return Ki=t,Ml(),i}function xp(e,t){Ae=null,j.H=Ir,t===io||t===Bl?(t=Jg(),Qe=3):t===ld?(t=Jg(),Qe=4):Qe=t===jd?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Sn=t,Ne===null&&(ht=1,ec(e,On(t,e.current)))}function Dp(){var e=vn.current;return e===null?!0:(xe&4194048)===xe?xn===null:(xe&62914560)===xe||(xe&536870912)!==0?e===xn:!1}function Up(){var e=j.H;return j.H=Ir,e===null?Ir:e}function jp(){var e=j.A;return j.A=uT,e}function hc(){ht=4,ha||(xe&4194048)!==xe&&vn.current!==null||(ho=!0),(fa&134217727)===0&&(ms&134217727)===0||We===null||pa(We,xe,Tn,!1)}function sh(e,t,i){var s=Ge;Ge|=2;var c=Up(),u=jp();(We!==e||xe!==t)&&(uc=null,mo(e,t)),t=!1;var g=ht;e:do try{if(Qe!==0&&Ne!==null){var C=Ne,A=Sn;switch(Qe){case 8:ah(),g=6;break e;case 3:case 2:case 9:case 6:vn.current===null&&(t=!0);var R=Qe;if(Qe=0,Sn=null,po(e,C,A,R),i&&ho){g=0;break e}break;default:R=Qe,Qe=0,Sn=null,po(e,C,A,R)}}fT(),g=ht;break}catch(B){xp(e,B)}while(!0);return t&&e.shellSuspendCounter++,Ni=os=null,Ge=s,j.H=c,j.A=u,Ne===null&&(We=null,xe=0,Ml()),g}function fT(){for(;Ne!==null;)Hp(Ne)}function gT(e,t){var i=Ge;Ge|=2;var s=Up(),c=jp();We!==e||xe!==t?(uc=null,cc=Kt()+500,mo(e,t)):ho=Ti(e,t);e:do try{if(Qe!==0&&Ne!==null){t=Ne;var u=Sn;t:switch(Qe){case 1:Qe=0,Sn=null,po(e,t,u,1);break;case 2:case 9:if(Qg(u)){Qe=0,Sn=null,zp(t);break}t=function(){Qe!==2&&Qe!==9||We!==e||(Qe=7),gi(e)},u.then(t,t);break e;case 3:Qe=7;break e;case 4:Qe=5;break e;case 7:Qg(u)?(Qe=0,Sn=null,zp(t)):(Qe=0,Sn=null,po(e,t,u,7));break;case 5:var g=null;switch(Ne.tag){case 26:g=Ne.memoizedState;case 5:case 27:var C=Ne;if(g?Ay(g):C.stateNode.complete){Qe=0,Sn=null;var A=C.sibling;if(A!==null)Ne=A;else{var R=C.return;R!==null?(Ne=R,fc(R)):Ne=null}break t}}Qe=0,Sn=null,po(e,t,u,5);break;case 6:Qe=0,Sn=null,po(e,t,u,6);break;case 8:ah(),ht=6;break e;default:throw Error(o(462))}}mT();break}catch(B){xp(e,B)}while(!0);return Ni=os=null,j.H=s,j.A=c,Ge=i,Ne!==null?0:(We=null,xe=0,Ml(),ht)}function mT(){for(;Ne!==null&&!Rs();)Hp(Ne)}function Hp(e){var t=rp(e.alternate,e,Ki);e.memoizedProps=e.pendingProps,t===null?fc(e):Ne=t}function zp(e){var t=e,i=t.alternate;switch(t.tag){case 15:case 0:t=tp(i,t,t.pendingProps,t.type,void 0,xe);break;case 11:t=tp(i,t,t.pendingProps,t.type.render,t.ref,xe);break;case 5:Sd(t);default:cp(i,t),t=Ne=jg(t,Ki),t=rp(i,t,Ki)}e.memoizedProps=e.pendingProps,t===null?fc(e):Ne=t}function po(e,t,i,s){Ni=os=null,Sd(t),ao=null,Sr=0;var c=t.return;try{if(iT(e,c,t,i,xe)){ht=1,ec(e,On(i,e.current)),Ne=null;return}}catch(u){if(c!==null)throw Ne=c,u;ht=1,ec(e,On(i,e.current)),Ne=null;return}t.flags&32768?(je||s===1?e=!0:ho||(xe&536870912)!==0?e=!1:(ha=e=!0,(s===2||s===9||s===3||s===6)&&(s=vn.current,s!==null&&s.tag===13&&(s.flags|=16384))),Lp(t,e)):fc(t)}function fc(e){var t=e;do{if((t.flags&32768)!==0){Lp(t,ha);return}e=t.return;var i=oT(t.alternate,t,Ki);if(i!==null){Ne=i;return}if(t=t.sibling,t!==null){Ne=t;return}Ne=t=e}while(t!==null);ht===0&&(ht=5)}function Lp(e,t){do{var i=rT(e.alternate,e);if(i!==null){i.flags&=32767,Ne=i;return}if(i=e.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!t&&(e=e.sibling,e!==null)){Ne=e;return}Ne=e=i}while(e!==null);ht=6,Ne=null}function Bp(e,t,i,s,c,u,g,C,A){e.cancelPendingCommit=null;do gc();while(At!==0);if((Ge&6)!==0)throw Error(o(327));if(t!==null){if(t===e.current)throw Error(o(177));if(u=t.lanes|t.childLanes,u|=Qu,Tu(e,i,u,g,C,A),e===We&&(Ne=We=null,xe=0),go=t,ma=e,Pi=i,th=u,nh=c,Op=s,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,CT(fn,function(){return Fp(),null})):(e.callbackNode=null,e.callbackPriority=0),s=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||s){s=j.T,j.T=null,c=q.p,q.p=2,g=Ge,Ge|=4;try{lT(e,t,i)}finally{Ge=g,q.p=c,j.T=s}}At=1,Kp(),Pp(),Gp()}}function Kp(){if(At===1){At=0;var e=ma,t=go,i=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||i){i=j.T,j.T=null;var s=q.p;q.p=2;var c=Ge;Ge|=4;try{Tp(t,e);var u=yh,g=kg(e.containerInfo),C=u.focusedElem,A=u.selectionRange;if(g!==C&&C&&C.ownerDocument&&_g(C.ownerDocument.documentElement,C)){if(A!==null&&Pu(C)){var R=A.start,B=A.end;if(B===void 0&&(B=R),"selectionStart"in C)C.selectionStart=R,C.selectionEnd=Math.min(B,C.value.length);else{var V=C.ownerDocument||document,N=V&&V.defaultView||window;if(N.getSelection){var U=N.getSelection(),ae=C.textContent.length,fe=Math.min(A.start,ae),$e=A.end===void 0?fe:Math.min(A.end,ae);!U.extend&&fe>$e&&(g=$e,$e=fe,fe=g);var _=wg(C,fe),w=wg(C,$e);if(_&&w&&(U.rangeCount!==1||U.anchorNode!==_.node||U.anchorOffset!==_.offset||U.focusNode!==w.node||U.focusOffset!==w.offset)){var O=V.createRange();O.setStart(_.node,_.offset),U.removeAllRanges(),fe>$e?(U.addRange(O),U.extend(w.node,w.offset)):(O.setEnd(w.node,w.offset),U.addRange(O))}}}}for(V=[],U=C;U=U.parentNode;)U.nodeType===1&&V.push({element:U,left:U.scrollLeft,top:U.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<V.length;C++){var G=V[C];G.element.scrollLeft=G.left,G.element.scrollTop=G.top}}_c=!!ph,yh=ph=null}finally{Ge=c,q.p=s,j.T=i}}e.current=t,At=2}}function Pp(){if(At===2){At=0;var e=ma,t=go,i=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||i){i=j.T,j.T=null;var s=q.p;q.p=2;var c=Ge;Ge|=4;try{pp(e,t.alternate,t)}finally{Ge=c,q.p=s,j.T=i}}At=3}}function Gp(){if(At===4||At===3){At=0,Ns();var e=ma,t=go,i=Pi,s=Op;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?At=5:(At=0,go=ma=null,Vp(e,e.pendingLanes));var c=e.pendingLanes;if(c===0&&(ga=null),Ji(i),t=t.stateNode,Nt&&typeof Nt.onCommitFiberRoot=="function")try{Nt.onCommitFiberRoot(ni,t,void 0,(t.current.flags&128)===128)}catch{}if(s!==null){t=j.T,c=q.p,q.p=2,j.T=null;try{for(var u=e.onRecoverableError,g=0;g<s.length;g++){var C=s[g];u(C.value,{componentStack:C.stack})}}finally{j.T=t,q.p=c}}(Pi&3)!==0&&gc(),gi(e),c=e.pendingLanes,(i&261930)!==0&&(c&42)!==0?e===ih?Hr++:(Hr=0,ih=e):Hr=0,zr(0)}}function Vp(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,vr(t)))}function gc(){return Kp(),Pp(),Gp(),Fp()}function Fp(){if(At!==5)return!1;var e=ma,t=th;th=0;var i=Ji(Pi),s=j.T,c=q.p;try{q.p=32>i?32:i,j.T=null,i=nh,nh=null;var u=ma,g=Pi;if(At=0,go=ma=null,Pi=0,(Ge&6)!==0)throw Error(o(331));var C=Ge;if(Ge|=4,_p(u.current),Ap(u,u.current,g,i),Ge=C,zr(0,!1),Nt&&typeof Nt.onPostCommitFiberRoot=="function")try{Nt.onPostCommitFiberRoot(ni,u)}catch{}return!0}finally{q.p=c,j.T=s,Vp(e,t)}}function Yp(e,t,i){t=On(i,t),t=Ud(e.stateNode,t,2),e=la(e,t,2),e!==null&&(Pa(e,2),gi(e))}function qe(e,t,i){if(e.tag===3)Yp(e,e,i);else for(;t!==null;){if(t.tag===3){Yp(t,e,i);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(ga===null||!ga.has(s))){e=On(i,e),i=Qm(2),s=la(t,i,2),s!==null&&(qm(i,s,t,e),Pa(s,2),gi(s));break}}t=t.return}}function oh(e,t,i){var s=e.pingCache;if(s===null){s=e.pingCache=new dT;var c=new Set;s.set(t,c)}else c=s.get(t),c===void 0&&(c=new Set,s.set(t,c));c.has(i)||($d=!0,c.add(i),e=pT.bind(null,e,t,i),t.then(e,e))}function pT(e,t,i){var s=e.pingCache;s!==null&&s.delete(t),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,We===e&&(xe&i)===i&&(ht===4||ht===3&&(xe&62914560)===xe&&300>Kt()-lc?(Ge&2)===0&&mo(e,0):Wd|=i,fo===xe&&(fo=0)),gi(e)}function Qp(e,t){t===0&&(t=Yo()),e=is(e,t),e!==null&&(Pa(e,t),gi(e))}function yT(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),Qp(e,i)}function vT(e,t){var i=0;switch(e.tag){case 31:case 13:var s=e.stateNode,c=e.memoizedState;c!==null&&(i=c.retryLane);break;case 19:s=e.stateNode;break;case 22:s=e.stateNode._retryCache;break;default:throw Error(o(314))}s!==null&&s.delete(t),Qp(e,i)}function CT(e,t){return ja(e,t)}var mc=null,yo=null,rh=!1,pc=!1,lh=!1,ya=0;function gi(e){e!==yo&&e.next===null&&(yo===null?mc=yo=e:yo=yo.next=e),pc=!0,rh||(rh=!0,TT())}function zr(e,t){if(!lh&&pc){lh=!0;do for(var i=!1,s=mc;s!==null;){if(e!==0){var c=s.pendingLanes;if(c===0)var u=0;else{var g=s.suspendedLanes,C=s.pingedLanes;u=(1<<31-Yt(42|e)+1)-1,u&=c&~(g&~C),u=u&201326741?u&201326741|1:u?u|2:0}u!==0&&(i=!0,Zp(s,u))}else u=xe,u=Ka(s,s===We?u:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),(u&3)===0||Ti(s,u)||(i=!0,Zp(s,u));s=s.next}while(i);lh=!1}}function ST(){qp()}function qp(){pc=rh=!1;var e=0;ya!==0&&NT()&&(e=ya);for(var t=Kt(),i=null,s=mc;s!==null;){var c=s.next,u=Jp(s,t);u===0?(s.next=null,i===null?mc=c:i.next=c,c===null&&(yo=i)):(i=s,(e!==0||(u&3)!==0)&&(pc=!0)),s=c}At!==0&&At!==5||zr(e),ya!==0&&(ya=0)}function Jp(e,t){for(var i=e.suspendedLanes,s=e.pingedLanes,c=e.expirationTimes,u=e.pendingLanes&-62914561;0<u;){var g=31-Yt(u),C=1<<g,A=c[g];A===-1?((C&i)===0||(C&s)!==0)&&(c[g]=Fo(C,t)):A<=t&&(e.expiredLanes|=C),u&=~C}if(t=We,i=xe,i=Ka(e,e===t?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s=e.callbackNode,i===0||e===t&&(Qe===2||Qe===9)||e.cancelPendingCommit!==null)return s!==null&&s!==null&&Ha(s),e.callbackNode=null,e.callbackPriority=0;if((i&3)===0||Ti(e,i)){if(t=i&-i,t===e.callbackPriority)return t;switch(s!==null&&Ha(s),Ji(i)){case 2:case 8:i=Ms;break;case 32:i=fn;break;case 268435456:i=za;break;default:i=fn}return s=Xp.bind(null,e),i=ja(i,s),e.callbackPriority=t,e.callbackNode=i,t}return s!==null&&s!==null&&Ha(s),e.callbackPriority=2,e.callbackNode=null,2}function Xp(e,t){if(At!==0&&At!==5)return e.callbackNode=null,e.callbackPriority=0,null;var i=e.callbackNode;if(gc()&&e.callbackNode!==i)return null;var s=xe;return s=Ka(e,e===We?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s===0?null:(Np(e,s,t),Jp(e,Kt()),e.callbackNode!=null&&e.callbackNode===i?Xp.bind(null,e):null)}function Zp(e,t){if(gc())return null;Np(e,t,!0)}function TT(){xT(function(){(Ge&6)!==0?ja(Bo,ST):qp()})}function ch(){if(ya===0){var e=to;e===0&&(e=Ba,Ba<<=1,(Ba&261888)===0&&(Ba=256)),ya=e}return ya}function $p(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:yt(""+e)}function Wp(e,t){var i=t.ownerDocument.createElement("input");return i.name=t.name,i.value=t.value,e.id&&i.setAttribute("form",e.id),t.parentNode.insertBefore(i,t),e=new FormData(e),i.parentNode.removeChild(i),e}function ET(e,t,i,s,c){if(t==="submit"&&i&&i.stateNode===c){var u=$p((c[wt]||null).action),g=s.submitter;g&&(t=(t=g[wt]||null)?$p(t.formAction):g.getAttribute("formAction"),t!==null&&(u=t,g=null));var C=new Vs("action","action",null,s,c);e.push({event:C,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(ya!==0){var A=g?Wp(c,g):new FormData(c);Od(i,{pending:!0,data:A,method:c.method,action:u},null,A)}}else typeof u=="function"&&(C.preventDefault(),A=g?Wp(c,g):new FormData(c),Od(i,{pending:!0,data:A,method:c.method,action:u},u,A))},currentTarget:c}]})}}for(var uh=0;uh<Yu.length;uh++){var dh=Yu[uh],AT=dh.toLowerCase(),bT=dh[0].toUpperCase()+dh.slice(1);Vn(AT,"on"+bT)}Vn(Rg,"onAnimationEnd"),Vn(Ng,"onAnimationIteration"),Vn(Mg,"onAnimationStart"),Vn("dblclick","onDoubleClick"),Vn("focusin","onFocus"),Vn("focusout","onBlur"),Vn(BS,"onTransitionRun"),Vn(KS,"onTransitionStart"),Vn(PS,"onTransitionCancel"),Vn(xg,"onTransitionEnd"),bi("onMouseEnter",["mouseout","mouseover"]),bi("onMouseLeave",["mouseout","mouseover"]),bi("onPointerEnter",["pointerout","pointerover"]),bi("onPointerLeave",["pointerout","pointerover"]),mn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),mn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),mn("onBeforeInput",["compositionend","keypress","textInput","paste"]),mn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),mn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),mn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Lr));function ey(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var s=e[i],c=s.event;s=s.listeners;e:{var u=void 0;if(t)for(var g=s.length-1;0<=g;g--){var C=s[g],A=C.instance,R=C.currentTarget;if(C=C.listener,A!==u&&c.isPropagationStopped())break e;u=C,c.currentTarget=R;try{u(c)}catch(B){Nl(B)}c.currentTarget=null,u=A}else for(g=0;g<s.length;g++){if(C=s[g],A=C.instance,R=C.currentTarget,C=C.listener,A!==u&&c.isPropagationStopped())break e;u=C,c.currentTarget=R;try{u(c)}catch(B){Nl(B)}c.currentTarget=null,u=A}}}}function Me(e,t){var i=t[Va];i===void 0&&(i=t[Va]=new Set);var s=e+"__bubble";i.has(s)||(ty(t,e,2,!1),i.add(s))}function hh(e,t,i){var s=0;t&&(s|=4),ty(i,e,s,t)}var yc="_reactListening"+Math.random().toString(36).slice(2);function fh(e){if(!e[yc]){e[yc]=!0,Qt.forEach(function(i){i!=="selectionchange"&&(wT.has(i)||hh(i,!1,e),hh(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[yc]||(t[yc]=!0,hh("selectionchange",!1,t))}}function ty(e,t,i,s){switch(Ry(t)){case 2:var c=WT;break;case 8:c=eE;break;default:c=Ih}i=c.bind(null,t,i,e),c=void 0,!ir||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),s?c!==void 0?e.addEventListener(t,i,{capture:!0,passive:c}):e.addEventListener(t,i,!0):c!==void 0?e.addEventListener(t,i,{passive:c}):e.addEventListener(t,i,!1)}function gh(e,t,i,s,c){var u=s;if((t&1)===0&&(t&2)===0&&s!==null)e:for(;;){if(s===null)return;var g=s.tag;if(g===3||g===4){var C=s.stateNode.containerInfo;if(C===c)break;if(g===4)for(g=s.return;g!==null;){var A=g.tag;if((A===3||A===4)&&g.stateNode.containerInfo===c)return;g=g.return}for(;C!==null;){if(g=Zi(C),g===null)return;if(A=g.tag,A===5||A===6||A===26||A===27){s=u=g;continue e}C=C.parentNode}}s=s.return}Al(function(){var R=u,B=tr(i),V=[];e:{var N=Dg.get(e);if(N!==void 0){var U=Vs,ae=e;switch(e){case"keypress":if(Gs(i)===0)break e;case"keydown":case"keyup":U=cr;break;case"focusin":ae="focus",U=rr;break;case"focusout":ae="blur",U=rr;break;case"beforeblur":case"afterblur":U=rr;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":U=wl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":U=bu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":U=ju;break;case Rg:case Ng:case Mg:U=ku;break;case xg:U=zu;break;case"scroll":case"scrollend":U=bl;break;case"wheel":U=Rl;break;case"copy":case"cut":case"paste":U=Ou;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":U=Il;break;case"toggle":case"beforetoggle":U=ur}var fe=(t&4)!==0,$e=!fe&&(e==="scroll"||e==="scrollend"),_=fe?N!==null?N+"Capture":null:N;fe=[];for(var w=R,O;w!==null;){var G=w;if(O=G.stateNode,G=G.tag,G!==5&&G!==26&&G!==27||O===null||_===null||(G=_e(w,_),G!=null&&fe.push(Br(w,G,O))),$e)break;w=w.return}0<fe.length&&(N=new U(N,ae,null,i,B),V.push({event:N,listeners:fe}))}}if((t&7)===0){e:{if(N=e==="mouseover"||e==="pointerover",U=e==="mouseout"||e==="pointerout",N&&i!==Ks&&(ae=i.relatedTarget||i.fromElement)&&(Zi(ae)||ae[Ei]))break e;if((U||N)&&(N=B.window===B?B:(N=B.ownerDocument)?N.defaultView||N.parentWindow:window,U?(ae=i.relatedTarget||i.toElement,U=R,ae=ae?Zi(ae):null,ae!==null&&($e=d(ae),fe=ae.tag,ae!==$e||fe!==5&&fe!==27&&fe!==6)&&(ae=null)):(U=null,ae=R),U!==ae)){if(fe=wl,G="onMouseLeave",_="onMouseEnter",w="mouse",(e==="pointerout"||e==="pointerover")&&(fe=Il,G="onPointerLeave",_="onPointerEnter",w="pointer"),$e=U==null?N:Pe(U),O=ae==null?N:Pe(ae),N=new fe(G,w+"leave",U,i,B),N.target=$e,N.relatedTarget=O,G=null,Zi(B)===R&&(fe=new fe(_,w+"enter",ae,i,B),fe.target=O,fe.relatedTarget=$e,G=fe),$e=G,U&&ae)t:{for(fe=_T,_=U,w=ae,O=0,G=_;G;G=fe(G))O++;G=0;for(var de=w;de;de=fe(de))G++;for(;0<O-G;)_=fe(_),O--;for(;0<G-O;)w=fe(w),G--;for(;O--;){if(_===w||w!==null&&_===w.alternate){fe=_;break t}_=fe(_),w=fe(w)}fe=null}else fe=null;U!==null&&ny(V,N,U,fe,!1),ae!==null&&$e!==null&&ny(V,$e,ae,fe,!0)}}e:{if(N=R?Pe(R):window,U=N.nodeName&&N.nodeName.toLowerCase(),U==="select"||U==="input"&&N.type==="file")var Be=hr;else if(ze(N))if(fr)Be=HS;else{Be=US;var le=DS}else U=N.nodeName,!U||U.toLowerCase()!=="input"||N.type!=="checkbox"&&N.type!=="radio"?R&&Kn(R.elementType)&&(Be=hr):Be=jS;if(Be&&(Be=Be(e,R))){_t(V,Be,i,B);break e}le&&le(e,N,R),e==="focusout"&&R&&N.type==="number"&&R.memoizedProps.value!=null&&wi(N,"number",N.value)}switch(le=R?Pe(R):window,e){case"focusin":(ze(le)||le.contentEditable==="true")&&(Qs=le,Gu=R,mr=null);break;case"focusout":mr=Gu=Qs=null;break;case"mousedown":Vu=!0;break;case"contextmenu":case"mouseup":case"dragend":Vu=!1,Ig(V,i,B);break;case"selectionchange":if(LS)break;case"keydown":case"keyup":Ig(V,i,B)}var be;if(dr)e:{switch(e){case"compositionstart":var De="onCompositionStart";break e;case"compositionend":De="onCompositionEnd";break e;case"compositionupdate":De="onCompositionUpdate";break e}De=void 0}else H?L(e,i)&&(De="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(De="onCompositionStart");De&&(E&&i.locale!=="ko"&&(H||De!=="onCompositionStart"?De==="onCompositionEnd"&&H&&(be=qa()):(ui=B,ar="value"in ui?ui.value:ui.textContent,H=!0)),le=vc(R,De),0<le.length&&(De=new kl(De,e,null,i,B),V.push({event:De,listeners:le}),be?De.data=be:(be=X(i),be!==null&&(De.data=be)))),(be=m?ce(e,i):Se(e,i))&&(De=vc(R,"onBeforeInput"),0<De.length&&(le=new kl("onBeforeInput","beforeinput",null,i,B),V.push({event:le,listeners:De}),le.data=be)),ET(V,e,R,i,B)}ey(V,t)})}function Br(e,t,i){return{instance:e,listener:t,currentTarget:i}}function vc(e,t){for(var i=t+"Capture",s=[];e!==null;){var c=e,u=c.stateNode;if(c=c.tag,c!==5&&c!==26&&c!==27||u===null||(c=_e(e,i),c!=null&&s.unshift(Br(e,c,u)),c=_e(e,t),c!=null&&s.push(Br(e,c,u))),e.tag===3)return s;e=e.return}return[]}function _T(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function ny(e,t,i,s,c){for(var u=t._reactName,g=[];i!==null&&i!==s;){var C=i,A=C.alternate,R=C.stateNode;if(C=C.tag,A!==null&&A===s)break;C!==5&&C!==26&&C!==27||R===null||(A=R,c?(R=_e(i,u),R!=null&&g.unshift(Br(i,R,A))):c||(R=_e(i,u),R!=null&&g.push(Br(i,R,A)))),i=i.return}g.length!==0&&e.push({event:t,listeners:g})}var kT=/\r\n?/g,IT=/\u0000|\uFFFD/g;function iy(e){return(typeof e=="string"?e:""+e).replace(kT,`
`).replace(IT,"")}function ay(e,t){return t=iy(t),iy(e)===t}function Ze(e,t,i,s,c,u){switch(i){case"children":typeof s=="string"?t==="body"||t==="textarea"&&s===""||pt(e,s):(typeof s=="number"||typeof s=="bigint")&&t!=="body"&&pt(e,""+s);break;case"className":Ls(e,"class",s);break;case"tabIndex":Ls(e,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":Ls(e,i,s);break;case"style":Pt(e,s,u);break;case"data":if(t!=="object"){Ls(e,"data",s);break}case"src":case"href":if(s===""&&(t!=="a"||i!=="href")){e.removeAttribute(i);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(i);break}s=yt(""+s),e.setAttribute(i,s);break;case"action":case"formAction":if(typeof s=="function"){e.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof u=="function"&&(i==="formAction"?(t!=="input"&&Ze(e,t,"name",c.name,c,null),Ze(e,t,"formEncType",c.formEncType,c,null),Ze(e,t,"formMethod",c.formMethod,c,null),Ze(e,t,"formTarget",c.formTarget,c,null)):(Ze(e,t,"encType",c.encType,c,null),Ze(e,t,"method",c.method,c,null),Ze(e,t,"target",c.target,c,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(i);break}s=yt(""+s),e.setAttribute(i,s);break;case"onClick":s!=null&&(e.onclick=kn);break;case"onScroll":s!=null&&Me("scroll",e);break;case"onScrollEnd":s!=null&&Me("scrollend",e);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(o(61));if(i=s.__html,i!=null){if(c.children!=null)throw Error(o(60));e.innerHTML=i}}break;case"multiple":e.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":e.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){e.removeAttribute("xlink:href");break}i=yt(""+s),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(i,""+s):e.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(i,""):e.removeAttribute(i);break;case"capture":case"download":s===!0?e.setAttribute(i,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(i,s):e.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?e.setAttribute(i,s):e.removeAttribute(i);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?e.removeAttribute(i):e.setAttribute(i,s);break;case"popover":Me("beforetoggle",e),Me("toggle",e),zs(e,"popover",s);break;case"xlinkActuate":Bn(e,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":Bn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":Bn(e,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":Bn(e,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":Bn(e,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":Bn(e,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":Bn(e,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":Bn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":Bn(e,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":zs(e,"is",s);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=El.get(i)||i,zs(e,i,s))}}function mh(e,t,i,s,c,u){switch(i){case"style":Pt(e,s,u);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(o(61));if(i=s.__html,i!=null){if(c.children!=null)throw Error(o(60));e.innerHTML=i}}break;case"children":typeof s=="string"?pt(e,s):(typeof s=="number"||typeof s=="bigint")&&pt(e,""+s);break;case"onScroll":s!=null&&Me("scroll",e);break;case"onScrollEnd":s!=null&&Me("scrollend",e);break;case"onClick":s!=null&&(e.onclick=kn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Fa.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(c=i.endsWith("Capture"),t=i.slice(2,c?i.length-7:void 0),u=e[wt]||null,u=u!=null?u[i]:null,typeof u=="function"&&e.removeEventListener(t,u,c),typeof s=="function")){typeof u!="function"&&u!==null&&(i in e?e[i]=null:e.hasAttribute(i)&&e.removeAttribute(i)),e.addEventListener(t,s,c);break e}i in e?e[i]=s:s===!0?e.setAttribute(i,""):zs(e,i,s)}}}function Ht(e,t,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Me("error",e),Me("load",e);var s=!1,c=!1,u;for(u in i)if(i.hasOwnProperty(u)){var g=i[u];if(g!=null)switch(u){case"src":s=!0;break;case"srcSet":c=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:Ze(e,t,u,g,i,null)}}c&&Ze(e,t,"srcSet",i.srcSet,i,null),s&&Ze(e,t,"src",i.src,i,null);return;case"input":Me("invalid",e);var C=u=g=c=null,A=null,R=null;for(s in i)if(i.hasOwnProperty(s)){var B=i[s];if(B!=null)switch(s){case"name":c=B;break;case"type":g=B;break;case"checked":A=B;break;case"defaultChecked":R=B;break;case"value":u=B;break;case"defaultValue":C=B;break;case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(o(137,t));break;default:Ze(e,t,s,B,i,null)}}Cl(e,u,C,A,R,g,c,!1);return;case"select":Me("invalid",e),s=g=u=null;for(c in i)if(i.hasOwnProperty(c)&&(C=i[c],C!=null))switch(c){case"value":u=C;break;case"defaultValue":g=C;break;case"multiple":s=C;default:Ze(e,t,c,C,i,null)}t=u,i=g,e.multiple=!!s,t!=null?_n(e,!!s,t,!1):i!=null&&_n(e,!!s,i,!0);return;case"textarea":Me("invalid",e),u=c=s=null;for(g in i)if(i.hasOwnProperty(g)&&(C=i[g],C!=null))switch(g){case"value":s=C;break;case"defaultValue":c=C;break;case"children":u=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(o(91));break;default:Ze(e,t,g,C,i,null)}Tl(e,s,c,u);return;case"option":for(A in i)i.hasOwnProperty(A)&&(s=i[A],s!=null)&&(A==="selected"?e.selected=s&&typeof s!="function"&&typeof s!="symbol":Ze(e,t,A,s,i,null));return;case"dialog":Me("beforetoggle",e),Me("toggle",e),Me("cancel",e),Me("close",e);break;case"iframe":case"object":Me("load",e);break;case"video":case"audio":for(s=0;s<Lr.length;s++)Me(Lr[s],e);break;case"image":Me("error",e),Me("load",e);break;case"details":Me("toggle",e);break;case"embed":case"source":case"link":Me("error",e),Me("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(R in i)if(i.hasOwnProperty(R)&&(s=i[R],s!=null))switch(R){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:Ze(e,t,R,s,i,null)}return;default:if(Kn(t)){for(B in i)i.hasOwnProperty(B)&&(s=i[B],s!==void 0&&mh(e,t,B,s,i,void 0));return}}for(C in i)i.hasOwnProperty(C)&&(s=i[C],s!=null&&Ze(e,t,C,s,i,null))}function OT(e,t,i,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var c=null,u=null,g=null,C=null,A=null,R=null,B=null;for(U in i){var V=i[U];if(i.hasOwnProperty(U)&&V!=null)switch(U){case"checked":break;case"value":break;case"defaultValue":A=V;default:s.hasOwnProperty(U)||Ze(e,t,U,null,s,V)}}for(var N in s){var U=s[N];if(V=i[N],s.hasOwnProperty(N)&&(U!=null||V!=null))switch(N){case"type":u=U;break;case"name":c=U;break;case"checked":R=U;break;case"defaultChecked":B=U;break;case"value":g=U;break;case"defaultValue":C=U;break;case"children":case"dangerouslySetInnerHTML":if(U!=null)throw Error(o(137,t));break;default:U!==V&&Ze(e,t,N,U,s,V)}}$o(e,g,C,A,R,B,u,c);return;case"select":U=g=C=N=null;for(u in i)if(A=i[u],i.hasOwnProperty(u)&&A!=null)switch(u){case"value":break;case"multiple":U=A;default:s.hasOwnProperty(u)||Ze(e,t,u,null,s,A)}for(c in s)if(u=s[c],A=i[c],s.hasOwnProperty(c)&&(u!=null||A!=null))switch(c){case"value":N=u;break;case"defaultValue":C=u;break;case"multiple":g=u;default:u!==A&&Ze(e,t,c,u,s,A)}t=C,i=g,s=U,N!=null?_n(e,!!i,N,!1):!!s!=!!i&&(t!=null?_n(e,!!i,t,!0):_n(e,!!i,i?[]:"",!1));return;case"textarea":U=N=null;for(C in i)if(c=i[C],i.hasOwnProperty(C)&&c!=null&&!s.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:Ze(e,t,C,null,s,c)}for(g in s)if(c=s[g],u=i[g],s.hasOwnProperty(g)&&(c!=null||u!=null))switch(g){case"value":N=c;break;case"defaultValue":U=c;break;case"children":break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(o(91));break;default:c!==u&&Ze(e,t,g,c,s,u)}Sl(e,N,U);return;case"option":for(var ae in i)N=i[ae],i.hasOwnProperty(ae)&&N!=null&&!s.hasOwnProperty(ae)&&(ae==="selected"?e.selected=!1:Ze(e,t,ae,null,s,N));for(A in s)N=s[A],U=i[A],s.hasOwnProperty(A)&&N!==U&&(N!=null||U!=null)&&(A==="selected"?e.selected=N&&typeof N!="function"&&typeof N!="symbol":Ze(e,t,A,N,s,U));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var fe in i)N=i[fe],i.hasOwnProperty(fe)&&N!=null&&!s.hasOwnProperty(fe)&&Ze(e,t,fe,null,s,N);for(R in s)if(N=s[R],U=i[R],s.hasOwnProperty(R)&&N!==U&&(N!=null||U!=null))switch(R){case"children":case"dangerouslySetInnerHTML":if(N!=null)throw Error(o(137,t));break;default:Ze(e,t,R,N,s,U)}return;default:if(Kn(t)){for(var $e in i)N=i[$e],i.hasOwnProperty($e)&&N!==void 0&&!s.hasOwnProperty($e)&&mh(e,t,$e,void 0,s,N);for(B in s)N=s[B],U=i[B],!s.hasOwnProperty(B)||N===U||N===void 0&&U===void 0||mh(e,t,B,N,s,U);return}}for(var _ in i)N=i[_],i.hasOwnProperty(_)&&N!=null&&!s.hasOwnProperty(_)&&Ze(e,t,_,null,s,N);for(V in s)N=s[V],U=i[V],!s.hasOwnProperty(V)||N===U||N==null&&U==null||Ze(e,t,V,N,s,U)}function sy(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function RT(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,i=performance.getEntriesByType("resource"),s=0;s<i.length;s++){var c=i[s],u=c.transferSize,g=c.initiatorType,C=c.duration;if(u&&C&&sy(g)){for(g=0,C=c.responseEnd,s+=1;s<i.length;s++){var A=i[s],R=A.startTime;if(R>C)break;var B=A.transferSize,V=A.initiatorType;B&&sy(V)&&(A=A.responseEnd,g+=B*(A<C?1:(C-R)/(A-R)))}if(--s,t+=8*(u+g)/(c.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var ph=null,yh=null;function Cc(e){return e.nodeType===9?e:e.ownerDocument}function oy(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ry(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function vh(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ch=null;function NT(){var e=window.event;return e&&e.type==="popstate"?e===Ch?!1:(Ch=e,!0):(Ch=null,!1)}var ly=typeof setTimeout=="function"?setTimeout:void 0,MT=typeof clearTimeout=="function"?clearTimeout:void 0,cy=typeof Promise=="function"?Promise:void 0,xT=typeof queueMicrotask=="function"?queueMicrotask:typeof cy<"u"?function(e){return cy.resolve(null).then(e).catch(DT)}:ly;function DT(e){setTimeout(function(){throw e})}function va(e){return e==="head"}function uy(e,t){var i=t,s=0;do{var c=i.nextSibling;if(e.removeChild(i),c&&c.nodeType===8)if(i=c.data,i==="/$"||i==="/&"){if(s===0){e.removeChild(c),To(t);return}s--}else if(i==="$"||i==="$?"||i==="$~"||i==="$!"||i==="&")s++;else if(i==="html")Kr(e.ownerDocument.documentElement);else if(i==="head"){i=e.ownerDocument.head,Kr(i);for(var u=i.firstChild;u;){var g=u.nextSibling,C=u.nodeName;u[gn]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&u.rel.toLowerCase()==="stylesheet"||i.removeChild(u),u=g}}else i==="body"&&Kr(e.ownerDocument.body);i=c}while(i);To(t)}function dy(e,t){var i=e;e=0;do{var s=i.nextSibling;if(i.nodeType===1?t?(i._stashedDisplay=i.style.display,i.style.display="none"):(i.style.display=i._stashedDisplay||"",i.getAttribute("style")===""&&i.removeAttribute("style")):i.nodeType===3&&(t?(i._stashedText=i.nodeValue,i.nodeValue=""):i.nodeValue=i._stashedText||""),s&&s.nodeType===8)if(i=s.data,i==="/$"){if(e===0)break;e--}else i!=="$"&&i!=="$?"&&i!=="$~"&&i!=="$!"||e++;i=s}while(i)}function Sh(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var i=t;switch(t=t.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":Sh(i),qo(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}e.removeChild(i)}}function UT(e,t,i,s){for(;e.nodeType===1;){var c=i;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!s&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(s){if(!e[gn])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(u=e.getAttribute("rel"),u==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(u!==c.rel||e.getAttribute("href")!==(c.href==null||c.href===""?null:c.href)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin)||e.getAttribute("title")!==(c.title==null?null:c.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(u=e.getAttribute("src"),(u!==(c.src==null?null:c.src)||e.getAttribute("type")!==(c.type==null?null:c.type)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin))&&u&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var u=c.name==null?null:""+c.name;if(c.type==="hidden"&&e.getAttribute("name")===u)return e}else return e;if(e=Dn(e.nextSibling),e===null)break}return null}function jT(e,t,i){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=Dn(e.nextSibling),e===null))return null;return e}function hy(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Dn(e.nextSibling),e===null))return null;return e}function Th(e){return e.data==="$?"||e.data==="$~"}function Eh(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function HT(e,t){var i=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||i.readyState!=="loading")t();else{var s=function(){t(),i.removeEventListener("DOMContentLoaded",s)};i.addEventListener("DOMContentLoaded",s),e._reactRetry=s}}function Dn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Ah=null;function fy(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"||i==="/&"){if(t===0)return Dn(e.nextSibling);t--}else i!=="$"&&i!=="$!"&&i!=="$?"&&i!=="$~"&&i!=="&"||t++}e=e.nextSibling}return null}function gy(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"){if(t===0)return e;t--}else i!=="/$"&&i!=="/&"||t++}e=e.previousSibling}return null}function my(e,t,i){switch(t=Cc(i),e){case"html":if(e=t.documentElement,!e)throw Error(o(452));return e;case"head":if(e=t.head,!e)throw Error(o(453));return e;case"body":if(e=t.body,!e)throw Error(o(454));return e;default:throw Error(o(451))}}function Kr(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);qo(e)}var Un=new Map,py=new Set;function Sc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Gi=q.d;q.d={f:zT,r:LT,D:BT,C:KT,L:PT,m:GT,X:FT,S:VT,M:YT};function zT(){var e=Gi.f(),t=dc();return e||t}function LT(e){var t=oi(e);t!==null&&t.tag===5&&t.type==="form"?xm(t):Gi.r(e)}var vo=typeof document>"u"?null:document;function yy(e,t,i){var s=vo;if(s&&typeof t=="string"&&t){var c=ct(t);c='link[rel="'+e+'"][href="'+c+'"]',typeof i=="string"&&(c+='[crossorigin="'+i+'"]'),py.has(c)||(py.add(c),e={rel:e,crossOrigin:i,href:t},s.querySelector(c)===null&&(t=s.createElement("link"),Ht(t,"link",e),ut(t),s.head.appendChild(t)))}}function BT(e){Gi.D(e),yy("dns-prefetch",e,null)}function KT(e,t){Gi.C(e,t),yy("preconnect",e,t)}function PT(e,t,i){Gi.L(e,t,i);var s=vo;if(s&&e&&t){var c='link[rel="preload"][as="'+ct(t)+'"]';t==="image"&&i&&i.imageSrcSet?(c+='[imagesrcset="'+ct(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(c+='[imagesizes="'+ct(i.imageSizes)+'"]')):c+='[href="'+ct(e)+'"]';var u=c;switch(t){case"style":u=Co(e);break;case"script":u=So(e)}Un.has(u)||(e=S({rel:"preload",href:t==="image"&&i&&i.imageSrcSet?void 0:e,as:t},i),Un.set(u,e),s.querySelector(c)!==null||t==="style"&&s.querySelector(Pr(u))||t==="script"&&s.querySelector(Gr(u))||(t=s.createElement("link"),Ht(t,"link",e),ut(t),s.head.appendChild(t)))}}function GT(e,t){Gi.m(e,t);var i=vo;if(i&&e){var s=t&&typeof t.as=="string"?t.as:"script",c='link[rel="modulepreload"][as="'+ct(s)+'"][href="'+ct(e)+'"]',u=c;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":u=So(e)}if(!Un.has(u)&&(e=S({rel:"modulepreload",href:e},t),Un.set(u,e),i.querySelector(c)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(Gr(u)))return}s=i.createElement("link"),Ht(s,"link",e),ut(s),i.head.appendChild(s)}}}function VT(e,t,i){Gi.S(e,t,i);var s=vo;if(s&&e){var c=ri(s).hoistableStyles,u=Co(e);t=t||"default";var g=c.get(u);if(!g){var C={loading:0,preload:null};if(g=s.querySelector(Pr(u)))C.loading=5;else{e=S({rel:"stylesheet",href:e,"data-precedence":t},i),(i=Un.get(u))&&bh(e,i);var A=g=s.createElement("link");ut(A),Ht(A,"link",e),A._p=new Promise(function(R,B){A.onload=R,A.onerror=B}),A.addEventListener("load",function(){C.loading|=1}),A.addEventListener("error",function(){C.loading|=2}),C.loading|=4,Tc(g,t,s)}g={type:"stylesheet",instance:g,count:1,state:C},c.set(u,g)}}}function FT(e,t){Gi.X(e,t);var i=vo;if(i&&e){var s=ri(i).hoistableScripts,c=So(e),u=s.get(c);u||(u=i.querySelector(Gr(c)),u||(e=S({src:e,async:!0},t),(t=Un.get(c))&&wh(e,t),u=i.createElement("script"),ut(u),Ht(u,"link",e),i.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},s.set(c,u))}}function YT(e,t){Gi.M(e,t);var i=vo;if(i&&e){var s=ri(i).hoistableScripts,c=So(e),u=s.get(c);u||(u=i.querySelector(Gr(c)),u||(e=S({src:e,async:!0,type:"module"},t),(t=Un.get(c))&&wh(e,t),u=i.createElement("script"),ut(u),Ht(u,"link",e),i.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},s.set(c,u))}}function vy(e,t,i,s){var c=(c=re.current)?Sc(c):null;if(!c)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(t=Co(i.href),i=ri(c).hoistableStyles,s=i.get(t),s||(s={type:"style",instance:null,count:0,state:null},i.set(t,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){e=Co(i.href);var u=ri(c).hoistableStyles,g=u.get(e);if(g||(c=c.ownerDocument||c,g={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,g),(u=c.querySelector(Pr(e)))&&!u._p&&(g.instance=u,g.state.loading=5),Un.has(e)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},Un.set(e,i),u||QT(c,e,i,g.state))),t&&s===null)throw Error(o(528,""));return g}if(t&&s!==null)throw Error(o(529,""));return null;case"script":return t=i.async,i=i.src,typeof i=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=So(i),i=ri(c).hoistableScripts,s=i.get(t),s||(s={type:"script",instance:null,count:0,state:null},i.set(t,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function Co(e){return'href="'+ct(e)+'"'}function Pr(e){return'link[rel="stylesheet"]['+e+"]"}function Cy(e){return S({},e,{"data-precedence":e.precedence,precedence:null})}function QT(e,t,i,s){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?s.loading=1:(t=e.createElement("link"),s.preload=t,t.addEventListener("load",function(){return s.loading|=1}),t.addEventListener("error",function(){return s.loading|=2}),Ht(t,"link",i),ut(t),e.head.appendChild(t))}function So(e){return'[src="'+ct(e)+'"]'}function Gr(e){return"script[async]"+e}function Sy(e,t,i){if(t.count++,t.instance===null)switch(t.type){case"style":var s=e.querySelector('style[data-href~="'+ct(i.href)+'"]');if(s)return t.instance=s,ut(s),s;var c=S({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return s=(e.ownerDocument||e).createElement("style"),ut(s),Ht(s,"style",c),Tc(s,i.precedence,e),t.instance=s;case"stylesheet":c=Co(i.href);var u=e.querySelector(Pr(c));if(u)return t.state.loading|=4,t.instance=u,ut(u),u;s=Cy(i),(c=Un.get(c))&&bh(s,c),u=(e.ownerDocument||e).createElement("link"),ut(u);var g=u;return g._p=new Promise(function(C,A){g.onload=C,g.onerror=A}),Ht(u,"link",s),t.state.loading|=4,Tc(u,i.precedence,e),t.instance=u;case"script":return u=So(i.src),(c=e.querySelector(Gr(u)))?(t.instance=c,ut(c),c):(s=i,(c=Un.get(u))&&(s=S({},i),wh(s,c)),e=e.ownerDocument||e,c=e.createElement("script"),ut(c),Ht(c,"link",s),e.head.appendChild(c),t.instance=c);case"void":return null;default:throw Error(o(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(s=t.instance,t.state.loading|=4,Tc(s,i.precedence,e));return t.instance}function Tc(e,t,i){for(var s=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),c=s.length?s[s.length-1]:null,u=c,g=0;g<s.length;g++){var C=s[g];if(C.dataset.precedence===t)u=C;else if(u!==c)break}u?u.parentNode.insertBefore(e,u.nextSibling):(t=i.nodeType===9?i.head:i,t.insertBefore(e,t.firstChild))}function bh(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function wh(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Ec=null;function Ty(e,t,i){if(Ec===null){var s=new Map,c=Ec=new Map;c.set(i,s)}else c=Ec,s=c.get(i),s||(s=new Map,c.set(i,s));if(s.has(e))return s;for(s.set(e,null),i=i.getElementsByTagName(e),c=0;c<i.length;c++){var u=i[c];if(!(u[gn]||u[lt]||e==="link"&&u.getAttribute("rel")==="stylesheet")&&u.namespaceURI!=="http://www.w3.org/2000/svg"){var g=u.getAttribute(t)||"";g=e+g;var C=s.get(g);C?C.push(u):s.set(g,[u])}}return s}function Ey(e,t,i){e=e.ownerDocument||e,e.head.insertBefore(i,t==="title"?e.querySelector("head > title"):null)}function qT(e,t,i){if(i===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;return t.rel==="stylesheet"?(e=t.disabled,typeof t.precedence=="string"&&e==null):!0;case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Ay(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function JT(e,t,i,s){if(i.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var c=Co(s.href),u=t.querySelector(Pr(c));if(u){t=u._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Ac.bind(e),t.then(e,e)),i.state.loading|=4,i.instance=u,ut(u);return}u=t.ownerDocument||t,s=Cy(s),(c=Un.get(c))&&bh(s,c),u=u.createElement("link"),ut(u);var g=u;g._p=new Promise(function(C,A){g.onload=C,g.onerror=A}),Ht(u,"link",s),i.instance=u}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(i,t),(t=i.state.preload)&&(i.state.loading&3)===0&&(e.count++,i=Ac.bind(e),t.addEventListener("load",i),t.addEventListener("error",i))}}var _h=0;function XT(e,t){return e.stylesheets&&e.count===0&&wc(e,e.stylesheets),0<e.count||0<e.imgCount?function(i){var s=setTimeout(function(){if(e.stylesheets&&wc(e,e.stylesheets),e.unsuspend){var u=e.unsuspend;e.unsuspend=null,u()}},6e4+t);0<e.imgBytes&&_h===0&&(_h=62500*RT());var c=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&wc(e,e.stylesheets),e.unsuspend)){var u=e.unsuspend;e.unsuspend=null,u()}},(e.imgBytes>_h?50:800)+t);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(s),clearTimeout(c)}}:null}function Ac(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)wc(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var bc=null;function wc(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,bc=new Map,t.forEach(ZT,e),bc=null,Ac.call(e))}function ZT(e,t){if(!(t.state.loading&4)){var i=bc.get(e);if(i)var s=i.get(null);else{i=new Map,bc.set(e,i);for(var c=e.querySelectorAll("link[data-precedence],style[data-precedence]"),u=0;u<c.length;u++){var g=c[u];(g.nodeName==="LINK"||g.getAttribute("media")!=="not all")&&(i.set(g.dataset.precedence,g),s=g)}s&&i.set(null,s)}c=t.instance,g=c.getAttribute("data-precedence"),u=i.get(g)||s,u===s&&i.set(null,c),i.set(g,c),this.count++,s=Ac.bind(this),c.addEventListener("load",s),c.addEventListener("error",s),u?u.parentNode.insertBefore(c,u.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(c,e.firstChild)),t.state.loading|=4}}var Vr={$$typeof:ie,Provider:null,Consumer:null,_currentValue:oe,_currentValue2:oe,_threadCount:0};function $T(e,t,i,s,c,u,g,C,A){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ds(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ds(0),this.hiddenUpdates=Ds(null),this.identifierPrefix=s,this.onUncaughtError=c,this.onCaughtError=u,this.onRecoverableError=g,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=A,this.incompleteTransitions=new Map}function by(e,t,i,s,c,u,g,C,A,R,B,V){return e=new $T(e,t,i,g,A,R,B,V,C),t=1,u===!0&&(t|=24),u=yn(3,null,null,t),e.current=u,u.stateNode=e,t=sd(),t.refCount++,e.pooledCache=t,t.refCount++,u.memoizedState={element:s,isDehydrated:i,cache:t},cd(u),e}function wy(e){return e?(e=Xs,e):Xs}function _y(e,t,i,s,c,u){c=wy(c),s.context===null?s.context=c:s.pendingContext=c,s=ra(t),s.payload={element:i},u=u===void 0?null:u,u!==null&&(s.callback=u),i=la(e,s,t),i!==null&&(sn(i,e,t),Er(i,e,t))}function ky(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function kh(e,t){ky(e,t),(e=e.alternate)&&ky(e,t)}function Iy(e){if(e.tag===13||e.tag===31){var t=is(e,67108864);t!==null&&sn(t,e,67108864),kh(e,67108864)}}function Oy(e){if(e.tag===13||e.tag===31){var t=En();t=qi(t);var i=is(e,t);i!==null&&sn(i,e,t),kh(e,t)}}var _c=!0;function WT(e,t,i,s){var c=j.T;j.T=null;var u=q.p;try{q.p=2,Ih(e,t,i,s)}finally{q.p=u,j.T=c}}function eE(e,t,i,s){var c=j.T;j.T=null;var u=q.p;try{q.p=8,Ih(e,t,i,s)}finally{q.p=u,j.T=c}}function Ih(e,t,i,s){if(_c){var c=Oh(s);if(c===null)gh(e,t,s,kc,i),Ny(e,s);else if(nE(c,e,t,i,s))s.stopPropagation();else if(Ny(e,s),t&4&&-1<tE.indexOf(e)){for(;c!==null;){var u=oi(c);if(u!==null)switch(u.tag){case 3:if(u=u.stateNode,u.current.memoizedState.isDehydrated){var g=ai(u.pendingLanes);if(g!==0){var C=u;for(C.pendingLanes|=2,C.entangledLanes|=2;g;){var A=1<<31-Yt(g);C.entanglements[1]|=A,g&=~A}gi(u),(Ge&6)===0&&(cc=Kt()+500,zr(0))}}break;case 31:case 13:C=is(u,2),C!==null&&sn(C,u,2),dc(),kh(u,2)}if(u=Oh(s),u===null&&gh(e,t,s,kc,i),u===c)break;c=u}c!==null&&s.stopPropagation()}else gh(e,t,s,null,i)}}function Oh(e){return e=tr(e),Rh(e)}var kc=null;function Rh(e){if(kc=null,e=Zi(e),e!==null){var t=d(e);if(t===null)e=null;else{var i=t.tag;if(i===13){if(e=h(t),e!==null)return e;e=null}else if(i===31){if(e=f(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return kc=e,null}function Ry(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(pl()){case Bo:return 2;case Ms:return 8;case fn:case Ko:return 32;case za:return 268435456;default:return 32}default:return 32}}var Nh=!1,Ca=null,Sa=null,Ta=null,Fr=new Map,Yr=new Map,Ea=[],tE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ny(e,t){switch(e){case"focusin":case"focusout":Ca=null;break;case"dragenter":case"dragleave":Sa=null;break;case"mouseover":case"mouseout":Ta=null;break;case"pointerover":case"pointerout":Fr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yr.delete(t.pointerId)}}function Qr(e,t,i,s,c,u){return e===null||e.nativeEvent!==u?(e={blockedOn:t,domEventName:i,eventSystemFlags:s,nativeEvent:u,targetContainers:[c]},t!==null&&(t=oi(t),t!==null&&Iy(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function nE(e,t,i,s,c){switch(t){case"focusin":return Ca=Qr(Ca,e,t,i,s,c),!0;case"dragenter":return Sa=Qr(Sa,e,t,i,s,c),!0;case"mouseover":return Ta=Qr(Ta,e,t,i,s,c),!0;case"pointerover":var u=c.pointerId;return Fr.set(u,Qr(Fr.get(u)||null,e,t,i,s,c)),!0;case"gotpointercapture":return u=c.pointerId,Yr.set(u,Qr(Yr.get(u)||null,e,t,i,s,c)),!0}return!1}function My(e){var t=Zi(e.target);if(t!==null){var i=d(t);if(i!==null){if(t=i.tag,t===13){if(t=h(i),t!==null){e.blockedOn=t,Qo(e.priority,function(){Oy(i)});return}}else if(t===31){if(t=f(i),t!==null){e.blockedOn=t,Qo(e.priority,function(){Oy(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ic(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=Oh(e.nativeEvent);if(i===null){i=e.nativeEvent;var s=new i.constructor(i.type,i);Ks=s,i.target.dispatchEvent(s),Ks=null}else return t=oi(i),t!==null&&Iy(t),e.blockedOn=i,!1;t.shift()}return!0}function xy(e,t,i){Ic(e)&&i.delete(t)}function iE(){Nh=!1,Ca!==null&&Ic(Ca)&&(Ca=null),Sa!==null&&Ic(Sa)&&(Sa=null),Ta!==null&&Ic(Ta)&&(Ta=null),Fr.forEach(xy),Yr.forEach(xy)}function Oc(e,t){e.blockedOn===t&&(e.blockedOn=null,Nh||(Nh=!0,l.unstable_scheduleCallback(l.unstable_NormalPriority,iE)))}var Rc=null;function Dy(e){Rc!==e&&(Rc=e,l.unstable_scheduleCallback(l.unstable_NormalPriority,function(){Rc===e&&(Rc=null);for(var t=0;t<e.length;t+=3){var i=e[t],s=e[t+1],c=e[t+2];if(typeof s!="function"){if(Rh(s||i)===null)continue;break}var u=oi(i);u!==null&&(e.splice(t,3),t-=3,Od(u,{pending:!0,data:c,method:i.method,action:s},s,c))}}))}function To(e){function t(A){return Oc(A,e)}Ca!==null&&Oc(Ca,e),Sa!==null&&Oc(Sa,e),Ta!==null&&Oc(Ta,e),Fr.forEach(t),Yr.forEach(t);for(var i=0;i<Ea.length;i++){var s=Ea[i];s.blockedOn===e&&(s.blockedOn=null)}for(;0<Ea.length&&(i=Ea[0],i.blockedOn===null);)My(i),i.blockedOn===null&&Ea.shift();if(i=(e.ownerDocument||e).$$reactFormReplay,i!=null)for(s=0;s<i.length;s+=3){var c=i[s],u=i[s+1],g=c[wt]||null;if(typeof u=="function")g||Dy(i);else if(g){var C=null;if(u&&u.hasAttribute("formAction")){if(c=u,g=u[wt]||null)C=g.formAction;else if(Rh(c)!==null)continue}else C=g.action;typeof C=="function"?i[s+1]=C:(i.splice(s,3),s-=3),Dy(i)}}}function Uy(){function e(u){u.canIntercept&&u.info==="react-transition"&&u.intercept({handler:function(){return new Promise(function(g){return c=g})},focusReset:"manual",scroll:"manual"})}function t(){c!==null&&(c(),c=null),s||setTimeout(i,20)}function i(){if(!s&&!navigation.transition){var u=navigation.currentEntry;u&&u.url!=null&&navigation.navigate(u.url,{state:u.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var s=!1,c=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(i,100),function(){s=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),c!==null&&(c(),c=null)}}}function Mh(e){this._internalRoot=e}Nc.prototype.render=Mh.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(o(409));var i=t.current,s=En();_y(i,s,e,t,null,null)},Nc.prototype.unmount=Mh.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;_y(e.current,2,null,e,null,null),dc(),t[Ei]=null}};function Nc(e){this._internalRoot=e}Nc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Us();e={blockedOn:null,target:e,priority:t};for(var i=0;i<Ea.length&&t!==0&&t<Ea[i].priority;i++);Ea.splice(i,0,e),i===0&&My(e)}};var jy=n.version;if(jy!=="19.2.4")throw Error(o(527,jy,"19.2.4"));q.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(o(188)):(e=Object.keys(e).join(","),Error(o(268,e)));return e=p(t),e=e!==null?T(e):null,e=e===null?null:e.stateNode,e};var aE={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:j,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Mc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mc.isDisabled&&Mc.supportsFiber)try{ni=Mc.inject(aE),Nt=Mc}catch{}}return Jr.createRoot=function(e,t){if(!r(e))throw Error(o(299));var i=!1,s="",c=Gm,u=Vm,g=Fm;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onUncaughtError!==void 0&&(c=t.onUncaughtError),t.onCaughtError!==void 0&&(u=t.onCaughtError),t.onRecoverableError!==void 0&&(g=t.onRecoverableError)),t=by(e,1,!1,null,null,i,s,null,c,u,g,Uy),e[Ei]=t.current,fh(e),new Mh(t)},Jr.hydrateRoot=function(e,t,i){if(!r(e))throw Error(o(299));var s=!1,c="",u=Gm,g=Vm,C=Fm,A=null;return i!=null&&(i.unstable_strictMode===!0&&(s=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onUncaughtError!==void 0&&(u=i.onUncaughtError),i.onCaughtError!==void 0&&(g=i.onCaughtError),i.onRecoverableError!==void 0&&(C=i.onRecoverableError),i.formState!==void 0&&(A=i.formState)),t=by(e,1,!0,t,i??null,s,c,A,u,g,C,Uy),t.context=wy(null),i=t.current,s=En(),s=qi(s),c=ra(s),c.callback=null,la(i,c,s),i=s,t.current.lanes=i,Pa(t,i),gi(t),e[Ei]=t.current,fh(e),new Nc(t)},Jr.version="19.2.4",Jr}var Yy;function gE(){if(Yy)return Uh.exports;Yy=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(n){console.error(n)}}return l(),Uh.exports=fE(),Uh.exports}var mE=gE();const il="timekerper-sync.json",al="https://api.github.com",vf=["zoomLevel","fitMode","debugMode","debugTimeOffset","darkMode"];function sl(l){return{Authorization:`Bearer ${l}`,Accept:"application/vnd.github+json","Content-Type":"application/json"}}async function pE(l){let n=1;for(;n<=10;){const a=await fetch(`${al}/gists?per_page=100&page=${n}`,{headers:sl(l)});if(!a.ok)throw new Error(a.status===401?"Invalid token":`GitHub API error: ${a.status}`);const o=await a.json();if(o.length===0)break;for(const r of o)if(r.files[il]){const d=await fetch(`${al}/gists/${r.id}`,{headers:sl(l)});if(!d.ok)throw new Error(`Failed to fetch gist: ${d.status}`);const f=(await d.json()).files[il]?.content;return{gistId:r.id,data:f?JSON.parse(f):null}}n++}return null}async function yE(l,n){const a=await fetch(`${al}/gists`,{method:"POST",headers:sl(l),body:JSON.stringify({description:"Timekerper sync data",public:!1,files:{[il]:{content:JSON.stringify(n)}}})});if(!a.ok)throw new Error(`Failed to create gist: ${a.status}`);return(await a.json()).id}async function Qy(l,n,a){const o=await fetch(`${al}/gists/${n}`,{method:"PATCH",headers:sl(l),body:JSON.stringify({files:{[il]:{content:JSON.stringify(a)}}})});if(!o.ok)throw o.status===404?new Error("gist_not_found"):new Error(`Failed to push: ${o.status}`)}async function qy(l,n){const a=await fetch(`${al}/gists/${n}`,{headers:sl(l)});if(!a.ok)throw a.status===404?new Error("gist_not_found"):new Error(`Failed to pull: ${a.status}`);const r=(await a.json()).files[il]?.content;if(!r)throw new Error("Sync file missing from gist");return JSON.parse(r)}function xc(l,n,a,o,r){const d=Object.fromEntries(Object.entries(o).filter(([h])=>!vf.includes(h)));return{version:1,tasks:l,events:n,tags:a,settings:d,activeTaskId:r,pushedAt:new Date().toISOString()}}function vE(l,n){const a=["tasks","events","tags","activeTaskId"];for(const r of a)if(JSON.stringify(l[r])!==JSON.stringify(n[r]))return!0;const o=r=>r&&Object.fromEntries(Object.entries(r).filter(([d])=>!vf.includes(d)));return JSON.stringify(o(l.settings))!==JSON.stringify(o(n.settings))}function Ie(l){const[n,a]=l.split(":").map(Number);return n*60+a}function cn(l){const n=Math.floor(l/60),a=l%60;return`${n.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`}function Lh(l){const[n,a]=l.split(":").map(Number),o=n>=12?"PM":"AM";return`${n>12?n-12:n===0?12:n}:${a.toString().padStart(2,"0")} ${o}`}function Eo(l){if(l>=60){const n=Math.floor(l/60),a=l%60;return a>0?`${n}h ${a}m`:`${n}h`}return`${l}m`}function Bh(l,n,a){const[o,r]=l.split(":").map(Number),[d,h]=n.split(":").map(Number),f=o>=12?"pm":"am",y=d>=12?"pm":"am",p=o>12?o-12:o===0?12:o,T=d>12?d-12:d===0?12:d,S=`${p}:${r.toString().padStart(2,"0")}`,I=`${T}:${h.toString().padStart(2,"0")}${y}`,x=f===y?`${S}${I}`:`${S}${f}${I}`;return a?`(${x})`:x}function rn(){const l=new Date;return l.getHours()*60+l.getMinutes()}function Cf(l,n,a,o,r){const d=[];for(const p of l){if(p.date!==r)continue;const T=Math.max(Ie(p.start),a),S=Math.min(Ie(p.end),o);S>T&&d.push([T,S])}for(const p of n||[]){const T=Math.max(p.start,a),S=Math.min(p.end??o,o);S>T&&d.push([T,S])}if(d.length===0)return 0;d.sort((p,T)=>p[0]-T[0]);let h=0,[f,y]=d[0];for(let p=1;p<d.length;p++)d[p][0]<=y?y=Math.max(y,d[p][1]):(h+=y-f,[f,y]=d[p]);return h+=y-f,h}function ft(){const l=new Date;return l.getFullYear()+"-"+String(l.getMonth()+1).padStart(2,"0")+"-"+String(l.getDate()).padStart(2,"0")}function on(l,n){const a=new Date(l+"T12:00:00");return a.setDate(a.getDate()+n),a.getFullYear()+"-"+String(a.getMonth()+1).padStart(2,"0")+"-"+String(a.getDate()).padStart(2,"0")}function CE(l){return new Date(l+"T12:00:00").toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})}function SE(l){return new Date(l+"T12:00:00").toLocaleDateString("en-US",{weekday:"short",day:"numeric"})}function TE(l){return new Date(l+"T12:00:00").toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}function EE(l){const n=l["X-MICROSOFT-CDO-BUSYSTATUS"];if(n)return n.toUpperCase();const a=l.PARTSTAT;return a==="DECLINED"?"FREE":a==="TENTATIVE"?"TENTATIVE":l.TRANSP==="TRANSPARENT"?"FREE":null}const AE={"Eastern Standard Time":"America/New_York","Central Standard Time":"America/Chicago","Mountain Standard Time":"America/Denver","Pacific Standard Time":"America/Los_Angeles","US Mountain Standard Time":"America/Phoenix","US Eastern Standard Time":"America/Indianapolis","Alaska Standard Time":"America/Anchorage","Hawaiian Standard Time":"Pacific/Honolulu","Atlantic Standard Time":"America/Halifax","Newfoundland Standard Time":"America/St_Johns","GMT Standard Time":"Europe/London","Greenwich Standard Time":"Atlantic/Reykjavik","W. Europe Standard Time":"Europe/Berlin","Central European Standard Time":"Europe/Warsaw","Romance Standard Time":"Europe/Paris","Central Europe Standard Time":"Europe/Budapest","E. Europe Standard Time":"Europe/Chisinau","FLE Standard Time":"Europe/Kiev","GTB Standard Time":"Europe/Bucharest","Russian Standard Time":"Europe/Moscow","Israel Standard Time":"Asia/Jerusalem","South Africa Standard Time":"Africa/Johannesburg","India Standard Time":"Asia/Kolkata","China Standard Time":"Asia/Shanghai","Tokyo Standard Time":"Asia/Tokyo","Korea Standard Time":"Asia/Seoul","AUS Eastern Standard Time":"Australia/Sydney","New Zealand Standard Time":"Pacific/Auckland",UTC:"UTC"};function bE(l,n,a,o,r,d,h){const f=Date.UTC(l,n-1,a,o,r,d),y=new Intl.DateTimeFormat("en-US",{timeZone:h,year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!1}).formatToParts(new Date(f)),p=I=>{const x=y.find(F=>F.type===I);return x?+x.value:0},T=p("hour")===24?0:p("hour"),S=Date.UTC(p("year"),p("month")-1,p("day"),T,p("minute"),p("second"));return new Date(f-(S-f))}function Kh(l){if(!l)return null;let n=null,a=l;if(l.startsWith("TZID=")){const T=l.indexOf(":",5);T>0&&(n=l.slice(5,T).replace(/^"|"$/g,""),a=l.slice(T+1))}else l.includes(":")&&(a=l.split(":").pop());const o=a.match(/^(\d{4})(\d{2})(\d{2})(?:T(\d{2})(\d{2})(\d{2}))?/);if(!o)return null;const[,r,d,h,f,y,p]=o;if(a.endsWith("Z"))return new Date(Date.UTC(+r,+d-1,+h,+(f||0),+(y||0),+(p||0)));if(n){const T=AE[n]||n;try{return bE(+r,+d,+h,+(f||0),+(y||0),+(p||0),T)}catch{}}return new Date(+r,+d-1,+h,+(f||0),+(y||0),+(p||0))}function wE(l){const n=[],o=l.replace(/\r?\n[ \t]/g,"").replace(/\r/g,"").split(`
`);let r=!1,d={},h=0,f=[];for(const y of o){const p=y.trim();if(p==="BEGIN:VEVENT"){r=!0,d={},h=0,f=[];continue}if(p==="END:VEVENT"){r=!1;const T=d.SUMMARY||"Imported Event",S=Kh(d.DTSTART),I=Kh(d.DTEND);if(S&&I){const x=EE(d),F=S.getFullYear()+"-"+String(S.getMonth()+1).padStart(2,"0")+"-"+String(S.getDate()).padStart(2,"0"),Y=String(S.getHours()).padStart(2,"0")+":"+String(S.getMinutes()).padStart(2,"0"),ge=String(I.getHours()).padStart(2,"0")+":"+String(I.getMinutes()).padStart(2,"0"),Z=d.UID||null,ue=d["RECURRENCE-ID"]||null;let ie=null;if(ue&&Z){const Ce=Kh(ue);Ce&&(ie=Ce.getFullYear()+"-"+String(Ce.getMonth()+1).padStart(2,"0")+"-"+String(Ce.getDate()).padStart(2,"0"))}n.push({name:T,date:F,start:Y,end:ge,status:x,isMeeting:h>0,categories:f,uid:Z,replacesDate:ie})}continue}if(r){const T=p.indexOf(":");if(T===-1)continue;const S=p.substring(0,T),I=p.substring(T+1),x=S.split(";")[0];if(d[x]=I,x==="ATTENDEE"&&h++,x==="CATEGORIES"&&f.push(...I.split(",").map(F=>F.trim()).filter(Boolean)),S.includes("PARTSTAT=")){const F=S.match(/PARTSTAT=([^;]+)/);F&&(d.PARTSTAT=F[1])}if(x==="DTSTART"||x==="DTEND"){const F=S.match(/TZID=([^;:]+)/);F&&(d[x]=`TZID=${F[1]}:${I}`)}}}return n}function tC(l,n,a,o){const r={BUSY:n.icsImportBusy,OOF:n.icsImportOof,TENTATIVE:n.icsImportTentative,FREE:n.icsImportFree,"WORKING-ELSEWHERE":n.icsImportWorkingElsewhere},d=n.icsCategoryRules||[],h=new Map;for(const p of l)!p.replacesDate&&p.uid&&h.set(p.uid,p);for(const p of l)if(p.replacesDate&&p.uid){const T=h.get(p.uid);T?(p.name==="Imported Event"&&(p.name=T.name),(!p.categories||p.categories.length===0)&&(p.categories=T.categories),p.isMeeting||(p.isMeeting=T.isMeeting),p.status||(p.status=T.status)):p.name==="Imported Event"&&(p._orphaned=!0)}const f=l.filter(p=>{if(p._orphaned)return!1;const T=r[p.status];if(T===void 0){if(!n.icsImportBusy)return!1}else if(!T)return!1;if(p.date<a||p.date>o||n.icsImportMeetingsOnly&&!p.isMeeting)return!1;if(p.categories&&p.categories.length>0){for(const S of p.categories)if(d.find(x=>x.include===!1&&x.category.toLowerCase()===S.toLowerCase()))return!1}return!0}),y=new Set;for(const p of f)p.replacesDate&&p.uid&&y.add(`${p.uid}|${p.replacesDate}`);return y.size===0?f:f.filter(p=>p.replacesDate?!0:!(p.uid&&y.has(`${p.uid}|${p.date}`)))}function Jy(l,n,a,o,r,d=0){const h=l.filter(S=>S.date===n).map(S=>({start:Math.max(Ie(S.start),a),end:Math.min(Ie(S.end),o)})).filter(S=>S.end>S.start),f=(r||[]).map(S=>({start:Math.max(S.start,a),end:Math.min(S.end,o)})).filter(S=>S.end>S.start),y=[...h,...f].sort((S,I)=>S.start-I.start);let p=0,T=a;for(const S of y){if(S.start>T){const I=S.start-T;I>=d&&(p+=I)}T=Math.max(T,S.end)}if(T<o){const S=o-T;S>=d&&(p+=S)}return p}function _E(l,n,a,o,r,d){const h=Ie(a.extendedStart),f=Ie(a.extendedEnd),y=Ie(a.workdayStart),p=Ie(a.workdayEnd),T=a.restrictTasksToWorkHours?y:h,S=a.restrictTasksToWorkHours?p:f,I=a.debugMode&&a.debugTimeOffset||0,x=rn()+I,F=ft(),Y=d===F,ge=d>F,Z=n.filter(te=>te.date===d).map(te=>({...te,startMin:Ie(te.start),endMin:Ie(te.end),type:"event",isPast:Y?Ie(te.end)<=x:!ge})).filter(te=>te.startMin<f&&te.endMin>h).sort((te,W)=>te.startMin-W.startMin),ue=[],ie=[];if(Y||ge){const te=l.filter(ne=>!ne.completed),W=te[0],se=Y&&(W?.pauseEvents?.some(ne=>ne.end==null)??!1),Ee=[];if(Y&&W?.startedAtMin!=null&&W.pauseEvents?.length>0)for(const ne of W.pauseEvents){const he=ne.start,b=ne.end??x;if(b>he&&(Ee.push({startMin:he,endMin:b}),b>h&&he<f)){const M=Math.max(he,h),J=Math.min(b,f);ie.push({startMin:M,endMin:J,start:cn(M),end:cn(J),type:"pause",name:"Paused",isPast:b<=x})}}let He;ge?He=T:W?.startedAtMin!=null?He=Math.max(T,W.startedAtMin):o?He=Math.max(T,x-r):He=Math.max(T,Math.min(x,S));let we=0;if(ge){const ne=M=>{const J=[];for(const P of l)if(!(!P.completed||!P.workSegments?.length))for(const $ of P.workSegments)$.date===M&&J.push({start:$.start,end:$.end});if(M===F&&W?.startedAtMin!=null&&W.pauseEvents?.length>0)for(const P of W.pauseEvents){const $=P.end??x;$>P.start&&J.push({start:P.start,end:$})}return J},he=a.minFragmentMinutes||5,b=Math.max(T,Math.min(x,S));b<S&&(we+=Jy(n,F,b,S,ne(F),he));for(let M=on(F,1);M<d;M=on(M,1))we+=Jy(n,M,T,S,ne(M),he)}const Ye=[];for(const ne of l)if(!(!ne.completed||!ne.workSegments?.length))for(const he of ne.workSegments){if(he.date!==d)continue;const b=Math.max(he.start,He),M=Math.min(he.end,f);M>b&&Ye.push({startMin:b,endMin:M})}const ke=[...Z.filter(ne=>ne.endMin>He),...Ee.filter(ne=>ne.endMin>He),...Ye.filter(ne=>ne.endMin>He)].sort((ne,he)=>ne.startMin-he.startMin),ye=[];for(const ne of ke){const he=Math.max(ne.startMin,He);ye.length===0||he>ye[ye.length-1].end?ye.push({start:he,end:ne.endMin}):ye[ye.length-1].end=Math.max(ye[ye.length-1].end,ne.endMin)}const tt=[];let Re=He;for(const ne of ye)ne.start>Re&&tt.push({start:Re,end:ne.start}),Re=Math.max(Re,ne.end);Re<S&&tt.push({start:Re,end:S});let j=0,q=0,oe=we;for(const ne of te){const he=Y&&ne.id===o,b=ne.adjustedDuration??ne.duration;let M;if(ge&&oe>0){if(oe>=b){oe-=b;continue}M=b-oe,oe=0}else M=he?Math.max(r,b):b;let J=M,P=0;const $=ge&&M<b;for(;J>0&&j<tt.length;){const re=tt[j],me=re.start+q,it=re.end-me;if(it<=0){j++,q=0;continue}const Ue=Math.min(J,it),Ot=a.minFragmentMinutes||5;if(Ue<Ot&&J>it){j++,q=0;continue}const Ci=Y&&me+Ue<=x;ue.push({taskId:ne.id,taskName:ne.name,tagId:ne.tagId,start:cn(me),end:cn(me+Ue),startMin:me,endMin:me+Ue,duration:Ue,isSplit:M>Ue||P>0||$,blockIndex:P,type:"task",isActive:he,isPast:Ci,isPausedRemaining:se&&ne.id===W?.id&&!Ci,continuesBefore:P>0||$,continuesAfter:J-Ue>0}),J-=Ue,q+=Ue,P++,q>=re.end-re.start&&(j++,q=0)}}}const Ce=l.filter(te=>te.completed&&te.startedAtMin!=null&&te.actualDuration>=2);for(const te of Ce){const W=te.workSegments||[];if(W.length>0){const se=W.filter(Ee=>Ee.date===d);for(let Ee=0;Ee<se.length;Ee++){const He=se[Ee],we=Math.max(He.start,h),Ye=Math.min(He.end,f);Ye>we&&ue.push({taskId:te.id,taskName:te.name,tagId:te.tagId,start:cn(we),end:cn(Ye),startMin:we,endMin:Ye,duration:Ye-we,isSplit:se.length>1,blockIndex:Ee,type:"task",isActive:!1,isPast:!0,isCompleted:!0,continuesBefore:Ee>0,continuesAfter:Ee<se.length-1})}}else if(Y){const se=Math.max(te.startedAtMin,h),Ee=Math.min(te.startedAtMin+te.actualDuration,f);Ee>se&&ue.push({taskId:te.id,taskName:te.name,tagId:te.tagId,start:cn(se),end:cn(Ee),startMin:se,endMin:Ee,duration:Ee-se,isSplit:!1,blockIndex:0,type:"task",isActive:!1,isPast:!0,isCompleted:!0,continuesBefore:!1,continuesAfter:!1})}}return[...Z,...ue,...ie].sort((te,W)=>te.startMin-W.startMin)}function Xy(l){const n=Math.round((Date.now()-l.getTime())/1e3);if(n<10)return"just now";if(n<60)return`${n}s ago`;const a=Math.round(n/60);return a<60?`${a}m ago`:l.toLocaleTimeString([],{hour:"numeric",minute:"2-digit"})}function kE({tasks:l,setTasks:n,events:a,setEvents:o,tags:r,setTags:d,settings:h,setSettings:f,activeTaskId:y,setActiveTaskId:p,setTaskStartTime:T,setElapsedMinutes:S,tasksRef:I,eventsRef:x,timeOffset:F}){const[Y,ge]=z.useState(()=>localStorage.getItem("timekerper-sync-enabled")==="true"),[Z,ue]=z.useState(()=>localStorage.getItem("timekerper-sync-pat")||""),[ie,Ce]=z.useState(()=>localStorage.getItem("timekerper-sync-gistId")||""),[te,W]=z.useState("idle"),[se,Ee]=z.useState(null),[He,we]=z.useState(null),[Ye,ke]=z.useState(null),ye=z.useRef(!1),tt=z.useRef(!1),Re=z.useRef(!1);z.useEffect(()=>{localStorage.setItem("timekerper-sync-pat",Z)},[Z]),z.useEffect(()=>{localStorage.setItem("timekerper-sync-gistId",ie)},[ie]),z.useEffect(()=>{localStorage.setItem("timekerper-sync-enabled",Y)},[Y]);const j=z.useCallback(P=>{if(tt.current=!0,P.tasks&&n(P.tasks),P.events&&o(P.events),P.tags&&d(P.tags),P.settings){const $=Object.fromEntries(Object.entries(P.settings).filter(([re])=>!vf.includes(re)));f(re=>({...re,...$}))}if(P.activeTaskId!=null){const $=(P.tasks||[]).find(re=>re.id===P.activeTaskId&&!re.completed);if($&&$.startedAtMin!=null){const re=rn()+F,me=$.startedAtDate||ft(),it=$.pauseEvents&&$.pauseEvents.length>0,Ue=Cf(P.events||[],$.pauseEvents||[],$.startedAtMin,re,me)+(it?0:$.pauseGapMinutes||0),Ot=Math.max(0,re-$.startedAtMin-Ue);p(P.activeTaskId),T(Date.now()-Ot*6e4),S(Ot)}else p(null),T(null),S(0)}else P.activeTaskId===null&&(p(null),T(null),S(0));setTimeout(()=>{tt.current=!1},0)},[F]),q=z.useCallback(async()=>{if(!(tt.current||ye.current||!Y||!ie||!Z)){ye.current=!0,W("syncing");try{const P=xc(I.current,x.current,r,h,y);await Qy(Z,ie,P),Re.current=!1,we(new Date),W("idle"),Ee(null)}catch(P){W("error"),Ee(P.message)}finally{ye.current=!1}}},[Y,ie,Z,r,h,y]),oe=z.useCallback(async()=>{if(!(Re.current||ye.current||!Y||!ie||!Z)){ye.current=!0,W("syncing");try{const P=await qy(Z,ie),$=xc(I.current,x.current,r,h,y);vE($,P)&&j(P),we(new Date),W("idle"),Ee(null)}catch(P){W("error"),Ee(P.message)}finally{ye.current=!1}}},[Y,ie,Z,r,h,y,j]),ne=async P=>{W("syncing"),Ee(null);try{const $=await pE(P);if($)W("idle"),ke({pat:P,gistId:$.gistId});else{const re=xc(I.current,x.current,r,h,y),me=await yE(P,re);Ce(me),ue(P),ge(!0),W("idle"),we(new Date)}}catch($){W("error"),Ee($.message)}},he=async P=>{const{pat:$,gistId:re}=Ye;ke(null),W("syncing");try{if(P==="pull"){const me=await qy($,re);j(me)}else{const me=xc(I.current,x.current,r,h,y);await Qy($,re,me)}Ce(re),ue($),ge(!0),W("idle"),we(new Date)}catch(me){W("error"),Ee(me.message)}},b=()=>{ge(!1),ue(""),Ce(""),W("idle"),Ee(null),we(null),localStorage.removeItem("timekerper-sync-pat"),localStorage.removeItem("timekerper-sync-gistId"),localStorage.removeItem("timekerper-sync-enabled")};z.useEffect(()=>{if(!Y||tt.current)return;Re.current=!0;const P=setTimeout(()=>{tt.current||q()},2e3);return()=>clearTimeout(P)},[l,a,r,h,y,Y,q]),z.useEffect(()=>{if(!Y)return;const P=setInterval(oe,6e4);return()=>clearInterval(P)},[Y,oe]),z.useEffect(()=>{Y&&ie&&Z&&oe()},[]);const M=Y?v.jsx("span",{className:`sync-indicator ${te}`,title:te==="error"?se:te==="syncing"?"Syncing...":He?`Last synced ${Xy(He)}`:"Connected"}):null,J=v.jsxs("div",{className:"settings-section",children:[v.jsx("h4",{children:"Sync"}),v.jsx("p",{className:"settings-hint",children:"Sync your data across devices via a private GitHub Gist"}),Y?v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"sync-status-row",children:[v.jsx("span",{className:`sync-dot ${te}`}),v.jsxs("span",{children:[te==="syncing"&&"Syncing...",te==="idle"&&He&&`Last synced ${Xy(He)}`,te==="idle"&&!He&&"Connected",te==="error"&&"Sync error"]}),v.jsx("button",{className:"btn-secondary sync-now-btn",onClick:async()=>{await q(),await oe()},children:"Sync Now"})]}),te==="error"&&se&&v.jsx("p",{className:"sync-error",children:se}),v.jsx("button",{className:"btn-secondary",style:{marginTop:"0.5rem"},onClick:b,children:"Disconnect"})]}):v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"form-group",children:[v.jsxs("label",{children:["GitHub Personal Access Token ",v.jsx("span",{className:"label-hint",children:' needs "gist" scope only'})]}),v.jsxs("details",{className:"sync-help",children:[v.jsx("summary",{children:"How do I get one?"}),v.jsxs("ol",{children:[v.jsxs("li",{children:["Go to ",v.jsx("strong",{children:"github.com  Settings  Developer settings  Personal access tokens  Tokens (classic)"})]}),v.jsxs("li",{children:["Click ",v.jsx("strong",{children:"Generate new token (classic)"})]}),v.jsx("li",{children:'Give it a name (e.g. "Timekerper sync")'}),v.jsxs("li",{children:["Check only the ",v.jsx("strong",{children:"gist"})," scope"]}),v.jsxs("li",{children:["Click ",v.jsx("strong",{children:"Generate token"})," and copy it"]}),v.jsx("li",{children:"Paste the same token on each device you want to sync"})]})]}),v.jsx("input",{type:"password",className:"pat-input",value:Z,onChange:P=>ue(P.target.value),placeholder:"ghp_xxxxxxxxxxxxxxxxxxxx"})]}),Ye?v.jsxs("div",{className:"sync-conflict",children:[v.jsx("p",{className:"sync-conflict-msg",children:"Existing sync data found. Which do you want to keep?"}),v.jsxs("div",{className:"sync-conflict-btns",children:[v.jsx("button",{className:"btn-primary",onClick:()=>he("pull"),children:"Use cloud data"}),v.jsx("button",{className:"btn-secondary",onClick:()=>he("push"),children:"Use this device"}),v.jsx("button",{className:"btn-secondary",onClick:()=>{ke(null),ue("")},children:"Cancel"})]})]}):v.jsx("button",{className:"btn-primary",onClick:()=>ne(Z),disabled:!Z.trim()||te==="syncing",children:te==="syncing"?"Connecting...":"Connect"})]})]});return{syncIndicator:M,syncSettingsUI:J}}const IE=Object.freeze(Object.defineProperty({__proto__:null,useSync:kE},Symbol.toStringTag,{value:"Module"}));const OE="msal.js.common",nC="https://login.microsoftonline.com/common/",RE="login.microsoftonline.com",iC="common",NE="adfs",ME="dstsv2",xE=`${nC}discovery/instance?api-version=1.1&authorization_endpoint=`,Zy=".ciamlogin.com",DE=".onmicrosoft.com",Wh="|",aC="openid",sC="profile",Sf="offline_access",UE="email",Tf="S256",jE="application/x-www-form-urlencoded;charset=utf-8",Xr="Not Available",ef="/",$y="http://169.254.169.254/metadata/instance/compute/location",HE="2020-06-01",zE=2e3,LE="TryAutoDetect",BE="login.microsoft.com",KE=["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],Wy=240,PE="invalid_instance",ev=200,GE=400,tv=400,VE=499,FE=500,YE=599,ko={GET:"GET",POST:"POST"},jo=[aC,sC,Sf],nv=[...jo,UE],$t={CONTENT_TYPE:"Content-Type",CONTENT_LENGTH:"Content-Length",RETRY_AFTER:"Retry-After",CCS_HEADER:"X-AnchorMailbox",WWWAuthenticate:"WWW-Authenticate",AuthenticationInfo:"Authentication-Info",X_MS_REQUEST_ID:"x-ms-request-id",X_MS_HTTP_VERSION:"x-ms-httpver"},iv={ACTIVE_ACCOUNT_FILTERS:"active-account-filters"},Na={COMMON:"common",ORGANIZATIONS:"organizations",CONSUMERS:"consumers"},Dc={ACCESS_TOKEN:"access_token",XMS_CC:"xms_cc"},un={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",NO_SESSION:"no_session"},Ef={CODE:"code",IDTOKEN_TOKEN_REFRESHTOKEN:"id_token token refresh_token"},Af={QUERY:"query",FRAGMENT:"fragment"},oC={AUTHORIZATION_CODE_GRANT:"authorization_code",REFRESH_TOKEN_GRANT:"refresh_token"},QE="MSSTS",qE="ADFS",rC="Generic",lC="-",tf=".",zt={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"},bf="appmetadata",JE="client_info",Yc="1",nf="authority-metadata",XE=3600*24,Qn={CONFIG:"config",CACHE:"cache",NETWORK:"network",HARDCODED_VALUES:"hardcoded_values"},av=5,ZE=330,$E=50,cC="server-telemetry",sv="|",Ao=",",WE="1",eA="0",tA="unknown_error",Je={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},nA=60,iA=3600,uC="throttling",aA="retry-after, h429",sA="invalid_grant",oA="client_mismatch",bo={FAILED_AUTO_DETECTION:"1",INTERNAL_CACHE:"2",ENVIRONMENT_VARIABLE:"3",IMDS:"4"},Ph={CONFIGURED_NO_AUTO_DETECTION:"2",AUTO_DETECTION_REQUESTED_SUCCESSFUL:"4",AUTO_DETECTION_REQUESTED_FAILED:"5"},ps={NOT_APPLICABLE:"0",FORCE_REFRESH_OR_CLAIMS:"1",NO_CACHED_ACCESS_TOKEN:"2",CACHED_ACCESS_TOKEN_EXPIRED:"3",PROACTIVELY_REFRESHED:"4"},rA={Pop:"pop"},dC=300;const Ts="client_id",hC="redirect_uri",lA="response_type",cA="response_mode",uA="grant_type",dA="claims",hA="scope",fA="refresh_token",gA="state",mA="nonce",pA="prompt",yA="code",vA="code_challenge",CA="code_challenge_method",SA="code_verifier",TA="client-request-id",EA="x-client-SKU",AA="x-client-VER",bA="x-client-OS",wA="x-client-CPU",_A="x-client-current-telemetry",kA="x-client-last-telemetry",IA="x-ms-lib-capability",OA="x-app-name",RA="x-app-ver",NA="post_logout_redirect_uri",MA="id_token_hint",xA="client_secret",DA="client_assertion",UA="client_assertion_type",fC="token_type",gC="req_cnf",ov="return_spa_code",jA="nativebroker",HA="logout_hint",zA="sid",LA="login_hint",BA="domain_hint",KA="x-client-xtra-sku",Qc="brk_client_id",qc="brk_redirect_uri",af="instance_aware",PA="ear_jwk",GA="ear_jwe_crypto";function wf(l){return`See https://aka.ms/msal.js.errors#${l} for details`}class et extends Error{constructor(n,a,o){const r=a||(n?wf(n):""),d=r?`${n}: ${r}`:n;super(d),Object.setPrototypeOf(this,et.prototype),this.errorCode=n||"",this.errorMessage=r||"",this.subError=o||"",this.name="AuthError"}setCorrelationId(n){this.correlationId=n}}function sf(l,n){return new et(l,n||wf(l))}class _f extends et{constructor(n){super(n),this.name="ClientConfigurationError",Object.setPrototypeOf(this,_f.prototype)}}function nt(l){return new _f(l)}class zn{static isEmptyObj(n){if(n)try{const a=JSON.parse(n);return Object.keys(a).length===0}catch{}return!0}static startsWith(n,a){return n.indexOf(a)===0}static endsWith(n,a){return n.length>=a.length&&n.lastIndexOf(a)===n.length-a.length}static queryStringToObject(n){const a={},o=n.split("&"),r=d=>decodeURIComponent(d.replace(/\+/g," "));return o.forEach(d=>{if(d.trim()){const[h,f]=d.split(/=(.+)/g,2);h&&f&&(a[r(h)]=r(f))}}),a}static trimArrayEntries(n){return n.map(a=>a.trim())}static removeEmptyStringsFromArray(n){return n.filter(a=>!!a)}static jsonParseHelper(n){try{return JSON.parse(n)}catch{return null}}}class kf extends et{constructor(n,a){super(n,a),this.name="ClientAuthError",Object.setPrototypeOf(this,kf.prototype)}}function Q(l,n){return new kf(l,n)}const VA="redirect_uri_empty",FA="authority_uri_insecure",Uc="url_parse_error",YA="empty_url_error",QA="empty_input_scopes_error",mC="invalid_claims",qA="token_request_empty",JA="logout_request_empty",pC="pkce_params_missing",yC="invalid_cloud_discovery_metadata",XA="invalid_authority_metadata",ZA="untrusted_authority",If="missing_ssh_jwk",$A="missing_ssh_kid",WA="cannot_set_OIDCOptions",eb="cannot_allow_platform_broker",tb="authority_mismatch",nb="invalid_request_method_for_EAR";const vC="client_info_decoding_error",ib="client_info_empty_error",CC="token_parsing_error",ab="null_or_empty_token",_a="endpoints_resolution_error",sb="network_error",ob="openid_config_error",rb="hash_not_deserialized",ol="invalid_state",lb="state_mismatch",rv="state_not_found",cb="nonce_mismatch",SC="auth_time_not_found",ub="max_age_transpired",db="multiple_matching_appMetadata",hb="request_cannot_be_made",fb="cannot_remove_empty_scope",gb="cannot_append_scopeset",lv="empty_input_scopeset",TC="no_account_in_silent_request",mb="invalid_cache_record",EC="invalid_cache_environment",cv="no_account_found",AC="no_crypto_object",vs="token_refresh_required",pb="token_claims_cnf_required_for_signedjwt",yb="authorization_code_missing_from_server_response",vb="binding_key_not_removed",Cb="end_session_endpoint_not_supported",bC="key_id_missing",Oe="method_not_implemented";class Ft{constructor(n){const a=n?zn.trimArrayEntries([...n]):[],o=a?zn.removeEmptyStringsFromArray(a):[];if(!o||!o.length)throw nt(QA);this.scopes=new Set,o.forEach(r=>this.scopes.add(r))}static fromString(n){const o=(n||"").split(" ");return new Ft(o)}static createSearchScopes(n){const a=n&&n.length>0?n:[...jo],o=new Ft(a);return o.containsOnlyOIDCScopes()?o.removeScope(Sf):o.removeOIDCScopes(),o}containsScope(n){const a=this.printScopesLowerCase().split(" "),o=new Ft(a);return n?o.scopes.has(n.toLowerCase()):!1}containsScopeSet(n){return!n||n.scopes.size<=0?!1:this.scopes.size>=n.scopes.size&&n.asArray().every(a=>this.containsScope(a))}containsOnlyOIDCScopes(){let n=0;return nv.forEach(a=>{this.containsScope(a)&&(n+=1)}),this.scopes.size===n}appendScope(n){n&&this.scopes.add(n.trim())}appendScopes(n){try{n.forEach(a=>this.appendScope(a))}catch{throw Q(gb)}}removeScope(n){if(!n)throw Q(fb);this.scopes.delete(n.trim())}removeOIDCScopes(){nv.forEach(n=>{this.scopes.delete(n)})}unionScopeSets(n){if(!n)throw Q(lv);const a=new Set;return n.scopes.forEach(o=>a.add(o.toLowerCase())),this.scopes.forEach(o=>a.add(o.toLowerCase())),a}intersectingScopeSets(n){if(!n)throw Q(lv);n.containsOnlyOIDCScopes()||n.removeOIDCScopes();const a=this.unionScopeSets(n),o=n.getScopeCount(),r=this.getScopeCount();return a.size<r+o}getScopeCount(){return this.scopes.size}asArray(){const n=[];return this.scopes.forEach(a=>n.push(a)),n}printScopes(){return this.scopes?this.asArray().join(" "):""}printScopesLowerCase(){return this.printScopes().toLowerCase()}}function lu(l,n,a){if(!n)return;const o=l.get(Ts);o&&l.has(Qc)&&a?.addFields({embeddedClientId:o,embeddedRedirectUri:l.get(hC)},n)}function Of(l,n){l.set(lA,n)}function Sb(l,n){l.set(cA,n||Af.QUERY)}function Tb(l){l.set(jA,"1")}function Rf(l,n,a=!0,o=jo){a&&!o.includes("openid")&&!n.includes("openid")&&o.push("openid");const r=a?[...n||[],...o]:n||[],d=new Ft(r);l.set(hA,d.printScopes())}function Nf(l,n){l.set(Ts,n)}function Mf(l,n){l.set(hC,n)}function Eb(l,n){l.set(NA,n)}function Ab(l,n){l.set(MA,n)}function bb(l,n){l.set(BA,n)}function jc(l,n){l.set(LA,n)}function Jc(l,n){l.set($t.CCS_HEADER,`UPN:${n}`)}function el(l,n){l.set($t.CCS_HEADER,`Oid:${n.uid}@${n.utid}`)}function uv(l,n){l.set(zA,n)}function xf(l,n,a){const o=Rb(n,a);try{JSON.parse(o)}catch{throw nt(mC)}l.set(dA,o)}function dl(l,n){l.set(TA,n)}function Df(l,n){l.set(EA,n.sku),l.set(AA,n.version),n.os&&l.set(bA,n.os),n.cpu&&l.set(wA,n.cpu)}function Uf(l,n){n?.appName&&l.set(OA,n.appName),n?.appVersion&&l.set(RA,n.appVersion)}function wb(l,n){l.set(pA,n)}function wC(l,n){n&&l.set(gA,n)}function _b(l,n){l.set(mA,n)}function jf(l,n,a){if(n&&a)l.set(vA,n),l.set(CA,a);else throw nt(pC)}function kb(l,n){l.set(yA,n)}function Ib(l,n){l.set(fA,n)}function Ob(l,n){l.set(SA,n)}function _C(l,n){l.set(xA,n)}function kC(l,n){n&&l.set(DA,n)}function IC(l,n){n&&l.set(UA,n)}function OC(l,n){l.set(uA,n)}function Hf(l){l.set(JE,"1")}function RC(l){l.has(af)||l.set(af,"true")}function yi(l,n){Object.entries(n).forEach(([a,o])=>{!l.has(a)&&o&&l.set(a,o)})}function Rb(l,n){let a;if(!l)a={};else try{a=JSON.parse(l)}catch{throw nt(mC)}return n&&n.length>0&&(a.hasOwnProperty(Dc.ACCESS_TOKEN)||(a[Dc.ACCESS_TOKEN]={}),a[Dc.ACCESS_TOKEN][Dc.XMS_CC]={values:n}),JSON.stringify(a)}function zf(l,n){n&&(l.set(fC,Je.POP),l.set(gC,n))}function NC(l,n){n&&(l.set(fC,Je.SSH),l.set(gC,n))}function MC(l,n){l.set(_A,n.generateCurrentRequestHeaderValue()),l.set(kA,n.generateLastRequestHeaderValue())}function xC(l){l.set(IA,aA)}function Nb(l,n){l.set(HA,n)}function cu(l,n,a){l.has(Qc)||l.set(Qc,n),l.has(qc)||l.set(qc,a)}function Mb(l,n){l.set(PA,encodeURIComponent(n)),l.set(GA,"eyJhbGciOiJkaXIiLCJlbmMiOiJBMjU2R0NNIn0")}function dv(l){if(!l)return l;let n=l.toLowerCase();return zn.endsWith(n,"?")?n=n.slice(0,-1):zn.endsWith(n,"?/")&&(n=n.slice(0,-2)),zn.endsWith(n,"/")||(n+="/"),n}function DC(l){return l.startsWith("#/")?l.substring(2):l.startsWith("#")||l.startsWith("?")?l.substring(1):l}function Xc(l){if(!l||l.indexOf("=")<0)return null;try{const n=DC(l),a=Object.fromEntries(new URLSearchParams(n));if(a.code||a.ear_jwe||a.error||a.error_description||a.state)return a}catch{throw Q(rb)}return null}function rl(l){const n=new Array;return l.forEach((a,o)=>{n.push(`${o}=${encodeURIComponent(a)}`)}),n.join("&")}function hv(l){if(!l)return l;const n=l.split("#")[0];try{const a=new URL(n),o=a.origin+a.pathname+a.search;return dv(o)}catch{return dv(n)}}const Zc={createNewGuid:()=>{throw Q(Oe)},base64Decode:()=>{throw Q(Oe)},base64Encode:()=>{throw Q(Oe)},base64UrlEncode:()=>{throw Q(Oe)},encodeKid:()=>{throw Q(Oe)},async getPublicKeyThumbprint(){throw Q(Oe)},async removeTokenBindingKey(){throw Q(Oe)},async clearKeystore(){throw Q(Oe)},async signJwt(){throw Q(Oe)},async hashString(){throw Q(Oe)}};var rt;(function(l){l[l.Error=0]="Error",l[l.Warning=1]="Warning",l[l.Info=2]="Info",l[l.Verbose=3]="Verbose",l[l.Trace=4]="Trace"})(rt||(rt={}));const xb=50,Db=500,ys=new Map;function Ub(l,n){ys.delete(l),ys.set(l,n)}function jb(l,n){const a=Date.now();let o=ys.get(l);if(o)Ub(l,o);else if(o={logs:[],firstEventTime:a},ys.set(l,o),ys.size>xb){const r=ys.keys().next().value;r&&ys.delete(r)}o.logs.push({...n,milliseconds:a-o.firstEventTime}),o.logs.length>Db&&o.logs.shift()}function Hb(l){if(l.length!==6)return!1;for(let n=0;n<l.length;n++){const a=l[n];if(!(a>="a"&&a<="z"||a>="A"&&a<="Z"||a>="0"&&a<="9"))return!1}return!0}class vi{constructor(n,a,o){this.level=rt.Info;const r=()=>{},d=n||vi.createDefaultLoggerOptions();this.localCallback=d.loggerCallback||r,this.piiLoggingEnabled=d.piiLoggingEnabled||!1,this.level=typeof d.logLevel=="number"?d.logLevel:rt.Info,this.packageName=a||"",this.packageVersion=o||""}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:rt.Info}}clone(n,a){return new vi({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level},n,a)}logMessage(n,a){const o=a.correlationId;if(Hb(n)){const y={hash:n,level:a.logLevel,containsPii:a.containsPii||!1,milliseconds:0};jb(o,y)}if(a.logLevel>this.level||!this.piiLoggingEnabled&&a.containsPii)return;const f=`${`[${new Date().toUTCString()}] : [${o}]`} : ${this.packageName}@${this.packageVersion} : ${rt[a.logLevel]} - ${n}`;this.executeCallback(a.logLevel,f,a.containsPii||!1)}executeCallback(n,a,o){this.localCallback&&this.localCallback(n,a,o)}error(n,a){this.logMessage(n,{logLevel:rt.Error,containsPii:!1,correlationId:a})}errorPii(n,a){this.logMessage(n,{logLevel:rt.Error,containsPii:!0,correlationId:a})}warning(n,a){this.logMessage(n,{logLevel:rt.Warning,containsPii:!1,correlationId:a})}warningPii(n,a){this.logMessage(n,{logLevel:rt.Warning,containsPii:!0,correlationId:a})}info(n,a){this.logMessage(n,{logLevel:rt.Info,containsPii:!1,correlationId:a})}infoPii(n,a){this.logMessage(n,{logLevel:rt.Info,containsPii:!0,correlationId:a})}verbose(n,a){this.logMessage(n,{logLevel:rt.Verbose,containsPii:!1,correlationId:a})}verbosePii(n,a){this.logMessage(n,{logLevel:rt.Verbose,containsPii:!0,correlationId:a})}trace(n,a){this.logMessage(n,{logLevel:rt.Trace,containsPii:!1,correlationId:a})}tracePii(n,a){this.logMessage(n,{logLevel:rt.Trace,containsPii:!0,correlationId:a})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}}const uu="@azure/msal-common",hl="16.1.0";const Lf={None:"none"};function fv(l,n){return!!l&&!!n&&l===n.split(".")[1]}function Ho(l,n,a,o){if(o){const{oid:r,sub:d,tid:h,name:f,tfp:y,acr:p,preferred_username:T,upn:S,login_hint:I}=o,x=h||y||p||"";return{tenantId:x,localAccountId:r||d||"",name:f,username:T||S||"",loginHint:I,isHomeTenant:fv(x,l)}}else return{tenantId:a,localAccountId:n,username:"",isHomeTenant:fv(a,l)}}function Bf(l,n,a,o){let r=l;if(n){const{isHomeTenant:d,...h}=n;r={...l,...h}}if(a){const{isHomeTenant:d,...h}=Ho(l.homeAccountId,l.localAccountId,l.tenantId,a);return r={...r,...h,idTokenClaims:a,idToken:o},r}return r}function Vi(l,n){const a=zb(l);try{const o=n(a);return JSON.parse(o)}catch{throw Q(CC)}}function Cs(l){if(!l.signin_state)return!1;const n=["kmsi","dvc_dmjd"];return l.signin_state.some(a=>n.includes(a.trim().toLowerCase()))}function zb(l){if(!l)throw Q(ab);const a=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(l);if(!a||a.length<4)throw Q(CC);return a[2]}function UC(l,n){if(n===0||Date.now()-3e5>l+n)throw Q(ub)}class Ve{get urlString(){return this._urlString}constructor(n){if(this._urlString=n,!this._urlString)throw nt(YA);n.includes("#")||(this._urlString=Ve.canonicalizeUri(n))}static canonicalizeUri(n){if(n){let a=n.toLowerCase();return zn.endsWith(a,"?")?a=a.slice(0,-1):zn.endsWith(a,"?/")&&(a=a.slice(0,-2)),zn.endsWith(a,"/")||(a+="/"),a}return n}validateAsUri(){let n;try{n=this.getUrlComponents()}catch{throw nt(Uc)}if(!n.HostNameAndPort||!n.PathSegments)throw nt(Uc);if(!n.Protocol||n.Protocol.toLowerCase()!=="https:")throw nt(FA)}static appendQueryString(n,a){return a?n.indexOf("?")<0?`${n}?${a}`:`${n}&${a}`:n}static removeHashFromUrl(n){return Ve.canonicalizeUri(n.split("#")[0])}replaceTenantPath(n){const a=this.getUrlComponents(),o=a.PathSegments;return n&&o.length!==0&&(o[0]===Na.COMMON||o[0]===Na.ORGANIZATIONS)&&(o[0]=n),Ve.constructAuthorityUriFromObject(a)}getUrlComponents(){const n=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),a=this.urlString.match(n);if(!a)throw nt(Uc);const o={Protocol:a[1],HostNameAndPort:a[4],AbsolutePath:a[5],QueryString:a[7]};let r=o.AbsolutePath.split("/");return r=r.filter(d=>d&&d.length>0),o.PathSegments=r,o.QueryString&&o.QueryString.endsWith("/")&&(o.QueryString=o.QueryString.substring(0,o.QueryString.length-1)),o}static getDomainFromUrl(n){const a=RegExp("^([^:/?#]+://)?([^/?#]*)"),o=n.match(a);if(!o)throw nt(Uc);return o[2]}static getAbsoluteUrl(n,a){if(n[0]===ef){const r=new Ve(a).getUrlComponents();return r.Protocol+"//"+r.HostNameAndPort+n}return n}static constructAuthorityUriFromObject(n){return new Ve(n.Protocol+"//"+n.HostNameAndPort+"/"+n.PathSegments.join("/"))}}const Lb=[{host:"login.microsoftonline.com"},{host:"login.chinacloudapi.cn",issuerHost:"login.partner.microsoftonline.cn"},{host:"login.microsoftonline.us"},{host:"login.sovcloud-identity.fr"},{host:"login.sovcloud-identity.de"},{host:"login.sovcloud-identity.sg"}];function Bb(l,n){return{token_endpoint:`https://${l}/{tenantid}/oauth2/v2.0/token`,jwks_uri:`https://${l}/{tenantid}/discovery/v2.0/keys`,issuer:`https://${n}/{tenantid}/v2.0`,authorization_endpoint:`https://${l}/{tenantid}/oauth2/v2.0/authorize`,end_session_endpoint:`https://${l}/{tenantid}/oauth2/v2.0/logout`}}const Kb=Lb.reduce((l,{host:n,issuerHost:a})=>(l[n]=Bb(n,a||n),l),{}),jC={endpointMetadata:Kb,instanceDiscoveryMetadata:{metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]},{preferred_network:"login.sovcloud-identity.fr",preferred_cache:"login.sovcloud-identity.fr",aliases:["login.sovcloud-identity.fr"]},{preferred_network:"login.sovcloud-identity.de",preferred_cache:"login.sovcloud-identity.de",aliases:["login.sovcloud-identity.de"]},{preferred_network:"login.sovcloud-identity.sg",preferred_cache:"login.sovcloud-identity.sg",aliases:["login.sovcloud-identity.sg"]}]}},gv=jC.endpointMetadata,Kf=jC.instanceDiscoveryMetadata,HC=new Set;Kf.metadata.forEach(l=>{l.aliases.forEach(n=>{HC.add(n)})});function Pb(l,n,a){let o;const r=l.canonicalAuthority;if(r){const d=new Ve(r).getUrlComponents().HostNameAndPort;o=mv(n,a,d,l.cloudDiscoveryMetadata?.metadata)||mv(n,a,d,Kf.metadata)||l.knownAuthorities}return o||[]}function mv(l,n,a,o,r){if(l.trace("1bmquz",n),a&&o){const d=$c(o,a);if(d)return l.trace("1fotbt",n),d.aliases;l.trace("14avvj",n)}return null}function Gb(l){return $c(Kf.metadata,l)}function $c(l,n){for(let a=0;a<l.length;a++){const o=l[a];if(o.aliases.includes(n))return o}return null}const of="cache_quota_exceeded",Vb="cache_error_unknown";class Io extends Error{constructor(n,a){const o=a||wf(n);super(o),Object.setPrototypeOf(this,Io.prototype),this.name="CacheError",this.errorCode=n,this.errorMessage=o}}function rf(l){return l instanceof Error?l.name==="QuotaExceededError"||l.name==="NS_ERROR_DOM_QUOTA_REACHED"||l.message.includes("exceeded the quota")?new Io(of):new Io(l.name,l.message):new Io(Vb)}function Wc(l,n){if(!l)throw Q(ib);try{const a=n(l);return JSON.parse(a)}catch{throw Q(vC)}}function Oo(l){if(!l)throw Q(vC);const n=l.split(tf,2);return{uid:n[0],utid:n.length<2?"":n[1]}}const Jn={Default:0,Adfs:1,Dsts:2,Ciam:3};function Pf(l){return l&&(l.tid||l.tfp||l.acr)||null}const dn={AAD:"AAD",OIDC:"OIDC",EAR:"EAR"};function Es(l){const n=l.tenantProfiles||[];return n.length===0&&l.realm&&l.localAccountId&&n.push(Ho(l.homeAccountId,l.localAccountId,l.realm)),{homeAccountId:l.homeAccountId,environment:l.environment,tenantId:l.realm,username:l.username,localAccountId:l.localAccountId,loginHint:l.loginHint,name:l.name,nativeAccountId:l.nativeAccountId,authorityType:l.authorityType,tenantProfiles:new Map(n.map(a=>[a.tenantId,a])),dataBoundary:l.dataBoundary}}function Fb(l,n,a){let o;n.authorityType===Jn.Adfs?o=qE:n.protocolMode===dn.OIDC?o=rC:o=QE;let r,d;l.clientInfo&&a&&(r=Wc(l.clientInfo,a),r.xms_tdbr&&(d=r.xms_tdbr==="EU"?"EU":"None"));const h=l.environment||n&&n.getPreferredCache();if(!h)throw Q(EC);const f=l.idTokenClaims?.preferred_username||l.idTokenClaims?.upn,y=l.idTokenClaims?.emails?l.idTokenClaims.emails[0]:null,p=f||y||"",T=l.idTokenClaims?.login_hint,S=r?.utid||Pf(l.idTokenClaims)||"",I=r?.uid||l.idTokenClaims?.oid||l.idTokenClaims?.sub||"";let x;return l.tenantProfiles?x=l.tenantProfiles:x=[Ho(l.homeAccountId,I,S,l.idTokenClaims)],{homeAccountId:l.homeAccountId,environment:h,realm:S,localAccountId:I,username:p,authorityType:o,loginHint:T,clientInfo:l.clientInfo,name:l.idTokenClaims?.name||"",lastModificationTime:void 0,lastModificationApp:void 0,cloudGraphHostName:l.cloudGraphHostName,msGraphHost:l.msGraphHost,nativeAccountId:l.nativeAccountId,tenantProfiles:x,dataBoundary:d}}function Yb(l,n,a){const o=Array.from(l.tenantProfiles?.values()||[]);return o.length===0&&l.tenantId&&l.localAccountId&&o.push(Ho(l.homeAccountId,l.localAccountId,l.tenantId,l.idTokenClaims)),{authorityType:l.authorityType||rC,homeAccountId:l.homeAccountId,localAccountId:l.localAccountId,nativeAccountId:l.nativeAccountId,realm:l.tenantId,environment:l.environment,username:l.username,loginHint:l.loginHint,name:l.name,cloudGraphHostName:n,msGraphHost:a,tenantProfiles:o,dataBoundary:l.dataBoundary}}function zC(l,n,a,o,r,d){if(!(n===Jn.Adfs||n===Jn.Dsts)){if(l)try{const h=Wc(l,o.base64Decode);if(h.uid&&h.utid)return`${h.uid}.${h.utid}`}catch{}a.warning("1ub6wv",r)}return d?.sub||""}function Qb(l){return l?l.hasOwnProperty("homeAccountId")&&l.hasOwnProperty("environment")&&l.hasOwnProperty("realm")&&l.hasOwnProperty("localAccountId")&&l.hasOwnProperty("username")&&l.hasOwnProperty("authorityType"):!1}class lf{constructor(n,a,o,r,d){this.clientId=n,this.cryptoImpl=a,this.commonLogger=o.clone(uu,hl),this.staticAuthorityOptions=d,this.performanceClient=r}getAllAccounts(n={},a){return this.buildTenantProfiles(this.getAccountsFilteredBy(n,a),a,n)}getAccountInfoFilteredBy(n,a){const o=this.getAllAccounts(n,a);return o.length>1?o.sort(d=>d.idTokenClaims?-1:1)[0]:o.length===1?o[0]:null}getBaseAccountInfo(n,a){const o=this.getAccountsFilteredBy(n,a);return o.length>0?Es(o[0]):null}buildTenantProfiles(n,a,o){return n.flatMap(r=>this.getTenantProfilesFromAccountEntity(r,a,o?.tenantId,o))}getTenantedAccountInfoByFilter(n,a,o,r,d){let h=null,f;if(d&&!this.tenantProfileMatchesFilter(o,d))return null;const y=this.getIdToken(n,r,a,o.tenantId);return y&&(f=Vi(y.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(f,d))?null:(h=Bf(n,o,f,y?.secret),h)}getTenantProfilesFromAccountEntity(n,a,o,r){const d=Es(n);let h=d.tenantProfiles||new Map;const f=this.getTokenKeys();if(o){const p=h.get(o);if(p)h=new Map([[o,p]]);else return[]}const y=[];return h.forEach(p=>{const T=this.getTenantedAccountInfoByFilter(d,f,p,a,r);T&&y.push(T)}),y}tenantProfileMatchesFilter(n,a){return!(a.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(n,a.localAccountId)||a.name&&n.name!==a.name||a.isHomeTenant!==void 0&&n.isHomeTenant!==a.isHomeTenant)}idTokenClaimsMatchTenantProfileFilter(n,a){return!(a&&(a.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(n,a.localAccountId)||a.loginHint&&!this.matchLoginHintFromTokenClaims(n,a.loginHint)||a.username&&!this.matchUsername(n.preferred_username,a.username)||a.name&&!this.matchName(n,a.name)||a.sid&&!this.matchSid(n,a.sid)))}async saveCacheRecord(n,a,o,r,d){if(!n)throw Q(mb);try{n.account&&await this.setAccount(n.account,a,o,r),n.idToken&&d?.idToken!==!1&&await this.setIdTokenCredential(n.idToken,a,o),n.accessToken&&d?.accessToken!==!1&&await this.saveAccessToken(n.accessToken,a,o),n.refreshToken&&d?.refreshToken!==!1&&await this.setRefreshTokenCredential(n.refreshToken,a,o),n.appMetadata&&this.setAppMetadata(n.appMetadata,a)}catch(h){throw this.commonLogger?.error("0j476p",a),h instanceof et?h:rf(h)}}async saveAccessToken(n,a,o){const r={clientId:n.clientId,credentialType:n.credentialType,environment:n.environment,homeAccountId:n.homeAccountId,realm:n.realm,tokenType:n.tokenType},d=this.getTokenKeys(),h=Ft.fromString(n.target);d.accessToken.forEach(f=>{if(!this.accessTokenKeyMatchesFilter(f,r,!1))return;const y=this.getAccessTokenCredential(f,a);y&&this.credentialMatchesFilter(y,r,a)&&Ft.fromString(y.target).intersectingScopeSets(h)&&this.removeAccessToken(f,a)}),await this.setAccessTokenCredential(n,a,o)}getAccountsFilteredBy(n,a){const o=this.getAccountKeys(),r=[];return o.forEach(d=>{const h=this.getAccount(d,a);if(!h||n.homeAccountId&&!this.matchHomeAccountId(h,n.homeAccountId)||n.username&&!this.matchUsername(h.username,n.username)||n.environment&&!this.matchEnvironment(h,n.environment,a)||n.realm&&!this.matchRealm(h,n.realm)||n.nativeAccountId&&!this.matchNativeAccountId(h,n.nativeAccountId)||n.authorityType&&!this.matchAuthorityType(h,n.authorityType))return;const f={localAccountId:n?.localAccountId,name:n?.name},y=h.tenantProfiles?.filter(p=>this.tenantProfileMatchesFilter(p,f));y&&y.length===0||r.push(h)}),r}credentialMatchesFilter(n,a,o){return!(a.clientId&&!this.matchClientId(n,a.clientId)||a.userAssertionHash&&!this.matchUserAssertionHash(n,a.userAssertionHash)||typeof a.homeAccountId=="string"&&!this.matchHomeAccountId(n,a.homeAccountId)||a.environment&&!this.matchEnvironment(n,a.environment,o)||a.realm&&!this.matchRealm(n,a.realm)||a.credentialType&&!this.matchCredentialType(n,a.credentialType)||a.familyId&&!this.matchFamilyId(n,a.familyId)||a.target&&!this.matchTarget(n,a.target)||n.credentialType===zt.ACCESS_TOKEN_WITH_AUTH_SCHEME&&(a.tokenType&&!this.matchTokenType(n,a.tokenType)||a.tokenType===Je.SSH&&a.keyId&&!this.matchKeyId(n,a.keyId)))}getAppMetadataFilteredBy(n,a){const o=this.getKeys(),r={};return o.forEach(d=>{if(!this.isAppMetadata(d))return;const h=this.getAppMetadata(d,a);h&&(n.environment&&!this.matchEnvironment(h,n.environment,a)||n.clientId&&!this.matchClientId(h,n.clientId)||(r[d]=h))}),r}getAuthorityMetadataByAlias(n,a){const o=this.getAuthorityMetadataKeys();let r=null;return o.forEach(d=>{if(!this.isAuthorityMetadata(d)||d.indexOf(this.clientId)===-1)return;const h=this.getAuthorityMetadata(d,a);h&&h.aliases.indexOf(n)!==-1&&(r=h)}),r}removeAllAccounts(n){this.getAllAccounts({},n).forEach(o=>{this.removeAccount(o,n)})}removeAccount(n,a){this.removeAccountContext(n,a);const o=this.getAccountKeys(),r=d=>d.includes(n.homeAccountId)&&d.includes(n.environment);o.filter(r).forEach(d=>{this.removeItem(d,a),this.performanceClient.incrementFields({accountsRemoved:1},a)})}removeAccountContext(n,a){const o=this.getTokenKeys(),r=d=>d.includes(n.homeAccountId)&&d.includes(n.environment);o.idToken.filter(r).forEach(d=>{this.removeIdToken(d,a)}),o.accessToken.filter(r).forEach(d=>{this.removeAccessToken(d,a)}),o.refreshToken.filter(r).forEach(d=>{this.removeRefreshToken(d,a)})}removeAccessToken(n,a){const o=this.getAccessTokenCredential(n,a);if(o&&(this.removeItem(n,a),this.performanceClient.incrementFields({accessTokensRemoved:1},a),o.credentialType.toLowerCase()===zt.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()&&o.tokenType===Je.POP)){const d=o.keyId;d&&this.cryptoImpl.removeTokenBindingKey(d,a).catch(()=>{this.commonLogger.error("0cx291",a),this.performanceClient?.incrementFields({removeTokenBindingKeyFailure:1},a)})}}removeAppMetadata(n){return this.getKeys().forEach(o=>{this.isAppMetadata(o)&&this.removeItem(o,n)}),!0}getIdToken(n,a,o,r){this.commonLogger.trace("1drz22",a);const d={homeAccountId:n.homeAccountId,environment:n.environment,credentialType:zt.ID_TOKEN,clientId:this.clientId,realm:r},h=this.getIdTokensByFilter(d,a,o),f=h.size;if(f<1)return this.commonLogger.info("1atvtd",a),null;if(f>1){let y=h;if(!r){const p=new Map;h.forEach((S,I)=>{S.realm===n.tenantId&&p.set(I,S)});const T=p.size;if(T<1)return this.commonLogger.info("0ooalx",a),h.values().next().value;if(T===1)return this.commonLogger.info("1eq2vc",a),p.values().next().value;y=p}return this.commonLogger.info("1ws328",a),y.forEach((p,T)=>{this.removeIdToken(T,a)}),this.performanceClient.addFields({multiMatchedID:h.size},a),null}return this.commonLogger.info("1sm769",a),h.values().next().value}getIdTokensByFilter(n,a,o){const r=o&&o.idToken||this.getTokenKeys().idToken,d=new Map;return r.forEach(h=>{if(!this.idTokenKeyMatchesFilter(h,{clientId:this.clientId,...n}))return;const f=this.getIdTokenCredential(h,a);f&&this.credentialMatchesFilter(f,n,a)&&d.set(h,f)}),d}idTokenKeyMatchesFilter(n,a){const o=n.toLowerCase();return!(a.clientId&&o.indexOf(a.clientId.toLowerCase())===-1||a.homeAccountId&&o.indexOf(a.homeAccountId.toLowerCase())===-1)}removeIdToken(n,a){this.removeItem(n,a)}removeRefreshToken(n,a){this.removeItem(n,a)}getAccessToken(n,a,o,r){const d=a.correlationId;this.commonLogger.trace("1t7hz1",d);const h=Ft.createSearchScopes(a.scopes),f=a.authenticationScheme||Je.BEARER,y=f.toLowerCase()!==Je.BEARER.toLowerCase()?zt.ACCESS_TOKEN_WITH_AUTH_SCHEME:zt.ACCESS_TOKEN,p={homeAccountId:n.homeAccountId,environment:n.environment,credentialType:y,clientId:this.clientId,realm:r||n.tenantId,target:h,tokenType:f,keyId:a.sshKid},T=o&&o.accessToken||this.getTokenKeys().accessToken,S=[];T.forEach(x=>{if(this.accessTokenKeyMatchesFilter(x,p,!0)){const F=this.getAccessTokenCredential(x,d);F&&this.credentialMatchesFilter(F,p,d)&&S.push(F)}});const I=S.length;return I<1?(this.commonLogger.info("1nckna",d),null):I>1?(this.commonLogger.info("1wkfwp",d),S.forEach(x=>{this.removeAccessToken(this.generateCredentialKey(x),d)}),this.performanceClient.addFields({multiMatchedAT:S.length},d),null):(this.commonLogger.info("06yt98",d),S[0])}accessTokenKeyMatchesFilter(n,a,o){const r=n.toLowerCase();if(a.clientId&&r.indexOf(a.clientId.toLowerCase())===-1||a.homeAccountId&&r.indexOf(a.homeAccountId.toLowerCase())===-1||a.realm&&r.indexOf(a.realm.toLowerCase())===-1)return!1;if(a.target){const d=a.target.asArray();for(let h=0;h<d.length;h++){if(o&&!r.includes(d[h].toLowerCase()))return!1;if(!o&&r.includes(d[h].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(n,a){const o=this.getTokenKeys(),r=[];return o.accessToken.forEach(d=>{if(!this.accessTokenKeyMatchesFilter(d,n,!0))return;const h=this.getAccessTokenCredential(d,a);h&&this.credentialMatchesFilter(h,n,a)&&r.push(h)}),r}getRefreshToken(n,a,o,r){this.commonLogger.trace("0x53vi",o);const d=a?Yc:void 0,h={homeAccountId:n.homeAccountId,environment:n.environment,credentialType:zt.REFRESH_TOKEN,clientId:this.clientId,familyId:d},f=r&&r.refreshToken||this.getTokenKeys().refreshToken,y=[];f.forEach(T=>{if(this.refreshTokenKeyMatchesFilter(T,h)){const S=this.getRefreshTokenCredential(T,o);S&&this.credentialMatchesFilter(S,h,o)&&y.push(S)}});const p=y.length;return p<1?(this.commonLogger.info("0dlw11",o),null):(p>1&&this.performanceClient.addFields({multiMatchedRT:p},o),this.commonLogger.info("0wcnep",o),y[0])}refreshTokenKeyMatchesFilter(n,a){const o=n.toLowerCase();return!(a.familyId&&o.indexOf(a.familyId.toLowerCase())===-1||!a.familyId&&a.clientId&&o.indexOf(a.clientId.toLowerCase())===-1||a.homeAccountId&&o.indexOf(a.homeAccountId.toLowerCase())===-1)}readAppMetadataFromCache(n,a){const o={environment:n,clientId:this.clientId},r=this.getAppMetadataFilteredBy(o,a),d=Object.keys(r).map(f=>r[f]),h=d.length;if(h<1)return null;if(h>1)throw Q(db);return d[0]}isAppMetadataFOCI(n,a){const o=this.readAppMetadataFromCache(n,a);return!!(o&&o.familyId===Yc)}matchHomeAccountId(n,a){return typeof n.homeAccountId=="string"&&a===n.homeAccountId}matchLocalAccountIdFromTokenClaims(n,a){const o=n.oid||n.sub;return a===o}matchLocalAccountIdFromTenantProfile(n,a){return n.localAccountId===a}matchName(n,a){return a.toLowerCase()===n.name?.toLowerCase()}matchUsername(n,a){return!!(n&&typeof n=="string"&&a?.toLowerCase()===n.toLowerCase())}matchUserAssertionHash(n,a){return!!(n.userAssertionHash&&a===n.userAssertionHash)}matchEnvironment(n,a,o){if(this.staticAuthorityOptions){const d=Pb(this.staticAuthorityOptions,this.commonLogger,o);if(d.includes(a)&&d.includes(n.environment))return!0}const r=this.getAuthorityMetadataByAlias(a,o);return!!(r&&r.aliases.indexOf(n.environment)>-1)}matchCredentialType(n,a){return n.credentialType&&a.toLowerCase()===n.credentialType.toLowerCase()}matchClientId(n,a){return!!(n.clientId&&a===n.clientId)}matchFamilyId(n,a){return!!(n.familyId&&a===n.familyId)}matchRealm(n,a){return n.realm?.toLowerCase()===a.toLowerCase()}matchNativeAccountId(n,a){return!!(n.nativeAccountId&&a===n.nativeAccountId)}matchLoginHintFromTokenClaims(n,a){return n.login_hint===a||n.preferred_username===a||n.upn===a}matchSid(n,a){return n.sid===a}matchAuthorityType(n,a){return!!(n.authorityType&&a.toLowerCase()===n.authorityType.toLowerCase())}matchTarget(n,a){return n.credentialType!==zt.ACCESS_TOKEN&&n.credentialType!==zt.ACCESS_TOKEN_WITH_AUTH_SCHEME||!n.target?!1:Ft.fromString(n.target).containsScopeSet(a)}matchTokenType(n,a){return!!(n.tokenType&&n.tokenType===a)}matchKeyId(n,a){return!!(n.keyId&&n.keyId===a)}isAppMetadata(n){return n.indexOf(bf)!==-1}isAuthorityMetadata(n){return n.indexOf(nf)!==-1}generateAuthorityMetadataCacheKey(n){return`${nf}-${this.clientId}-${n}`}static toObject(n,a){for(const o in a)n[o]=a[o];return n}}class qb extends lf{async setAccount(){throw Q(Oe)}getAccount(){throw Q(Oe)}async setIdTokenCredential(){throw Q(Oe)}getIdTokenCredential(){throw Q(Oe)}async setAccessTokenCredential(){throw Q(Oe)}getAccessTokenCredential(){throw Q(Oe)}async setRefreshTokenCredential(){throw Q(Oe)}getRefreshTokenCredential(){throw Q(Oe)}setAppMetadata(){throw Q(Oe)}getAppMetadata(){throw Q(Oe)}setServerTelemetry(){throw Q(Oe)}getServerTelemetry(){throw Q(Oe)}setAuthorityMetadata(){throw Q(Oe)}getAuthorityMetadata(){throw Q(Oe)}getAuthorityMetadataKeys(){throw Q(Oe)}setThrottlingCache(){throw Q(Oe)}getThrottlingCache(){throw Q(Oe)}removeItem(){throw Q(Oe)}getKeys(){throw Q(Oe)}getAccountKeys(){throw Q(Oe)}getTokenKeys(){throw Q(Oe)}generateCredentialKey(){throw Q(Oe)}generateAccountKey(){throw Q(Oe)}}const Jb={InProgress:1};class LC{generateId(){return"callback-id"}startMeasurement(n,a){return{end:()=>null,discard:()=>{},add:()=>{},increment:()=>{},event:{eventId:this.generateId(),status:Jb.InProgress,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:n,startTimeMs:Date.now(),correlationId:a||""}}}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}}const BC={tokenRenewalOffsetSeconds:dC,preventCorsPreflight:!1},Xb={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:rt.Info,correlationId:""},Zb={async sendGetRequestAsync(){throw Q(Oe)},async sendPostRequestAsync(){throw Q(Oe)}},$b={sku:OE,version:hl,cpu:"",os:""},Wb={clientSecret:"",clientAssertion:void 0},e0={azureCloudInstance:Lf.None,tenant:`${iC}`},t0={application:{appName:"",appVersion:""}};function Gf({authOptions:l,systemOptions:n,loggerOptions:a,storageInterface:o,networkInterface:r,cryptoInterface:d,clientCredentials:h,libraryInfo:f,telemetry:y,serverTelemetryManager:p,persistencePlugin:T,serializableCache:S}){const I={...Xb,...a};return{authOptions:n0(l),systemOptions:{...BC,...n},loggerOptions:I,storageInterface:o||new qb(l.clientId,Zc,new vi(I),new LC),networkInterface:r||Zb,cryptoInterface:d||Zc,clientCredentials:h||Wb,libraryInfo:{...$b,...f},telemetry:{...t0,...y},serverTelemetryManager:p||null,persistencePlugin:T||null,serializableCache:S||null}}function n0(l){return{clientCapabilities:[],azureCloudOptions:e0,instanceAware:!1,...l}}function KC(l){return l.authOptions.authority.options.protocolMode===dn.OIDC}class Is extends et{constructor(n,a,o,r,d){super(n,a,o),this.name="ServerError",this.errorNo=r,this.status=d,Object.setPrototypeOf(this,Is.prototype)}}const cf="no_tokens_found",i0="native_account_unavailable",PC="refresh_token_expired",GC="ux_not_allowed",a0="interaction_required",s0="consent_required",o0="login_required",Vf="bad_token",r0="interrupted_user";const pv=[a0,s0,o0,Vf,GC,r0],l0=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token","ux_not_allowed","interrupted_user"];class $n extends et{constructor(n,a,o,r,d,h,f,y){super(n,a,o),Object.setPrototypeOf(this,$n.prototype),this.timestamp=r||"",this.traceId=d||"",this.correlationId=h||"",this.claims=f||"",this.name="InteractionRequiredAuthError",this.errorNo=y}}function VC(l,n,a){const o=!!l&&pv.indexOf(l)>-1,r=!!a&&l0.indexOf(a)>-1,d=!!n&&pv.some(h=>n.indexOf(h)>-1);return o||d||r}function eu(l,n){return new $n(l,n)}function c0(l,n,a){const o=u0(l,a);return n?`${o}${Wh}${n}`:o}function u0(l,n){if(!l)throw Q(AC);const a={id:l.createNewGuid()};n&&(a.meta=n);const o=JSON.stringify(a);return l.base64Encode(o)}function fl(l,n){if(!l)throw Q(AC);if(!n)throw Q(ol);try{const a=n.split(Wh),o=a[0],r=a.length>1?a.slice(1).join(Wh):"",d=l(o),h=JSON.parse(d);return{userRequestState:r||"",libraryState:h}}catch{throw Q(ol)}}function Wn(){return Math.round(new Date().getTime()/1e3)}function yv(l){return l.getTime()/1e3}function Kc(l){return l?new Date(Number(l)*1e3):new Date}function tu(l,n){const a=Number(l)||0;return Wn()+n>a}function vv(l,n){const a=Number(l)+n*24*60*60*1e3;return Date.now()>a}function d0(l){return Number(l)>Wn()}const h0="networkClientSendPostRequestAsync",f0="refreshTokenClientExecutePostToTokenEndpoint",g0="authorizationCodeClientExecutePostToTokenEndpoint",m0="refreshTokenClientExecuteTokenRequest",p0="refreshTokenClientAcquireToken",Gh="refreshTokenClientAcquireTokenWithCachedRefreshToken",y0="refreshTokenClientCreateTokenRequestBody",v0="silentFlowClientGenerateResultFromCacheRecord",Ff="getAuthCodeUrl",FC="handleCodeResponseFromServer",C0="authClientExecuteTokenRequest",S0="authClientCreateTokenRequestBody",T0="updateTokenEndpointAuthority",gl="popTokenGenerateCnf",Yf="handleServerTokenResponse",E0="authorityResolveEndpointsAsync",A0="authorityGetCloudDiscoveryMetadataFromNetwork",b0="authorityUpdateCloudDiscoveryMetadata",w0="authorityGetEndpointMetadataFromNetwork",_0="authorityUpdateEndpointMetadata",Cv="authorityUpdateMetadataWithRegionalInformation",k0="regionDiscoveryDetectRegion",Sv="regionDiscoveryGetRegionFromIMDS",I0="regionDiscoveryGetCurrentVersion",O0="cacheManagerGetRefreshToken",R0="setUserData";const Zn=(l,n,a,o,r)=>(...d)=>{a.trace("1plfzx",r);const h=o.startMeasurement(n,r);if(r){const f=n+"CallCount";o.incrementFields({[f]:1},r)}try{const f=l(...d);return h.end({success:!0}),a.trace("1g8n6a",r),f}catch(f){a.trace("0cfd8i",r);try{a.trace(JSON.stringify(f),r)}catch{a.trace("00dty7",r)}throw h.end({success:!1},f),f}},K=(l,n,a,o,r)=>(...d)=>{a.trace("1plfzx",r);const h=o.startMeasurement(n,r);if(r){const f=n+"CallCount";o.incrementFields({[f]:1},r)}return l(...d).then(f=>(a.trace("1g8n6a",r),h.end({success:!0}),f)).catch(f=>{a.trace("0cfd8i",r);try{a.trace(JSON.stringify(f),r)}catch{a.trace("00dty7",r)}throw h.end({success:!1},f),f})};const N0={SW:"sw"};class Do{constructor(n,a){this.cryptoUtils=n,this.performanceClient=a}async generateCnf(n,a){const o=await K(this.generateKid.bind(this),gl,a,this.performanceClient,n.correlationId)(n),r=this.cryptoUtils.base64UrlEncode(JSON.stringify(o));return{kid:o.kid,reqCnfString:r}}async generateKid(n){return{kid:await this.cryptoUtils.getPublicKeyThumbprint(n),xms_ksl:N0.SW}}async signPopToken(n,a,o){return this.signPayload(n,a,o)}async signPayload(n,a,o,r){const{resourceRequestMethod:d,resourceRequestUri:h,shrClaims:f,shrNonce:y,shrOptions:p}=o,S=(h?new Ve(h):void 0)?.getUrlComponents();return this.cryptoUtils.signJwt({at:n,ts:Wn(),m:d?.toUpperCase(),u:S?.HostNameAndPort,nonce:y||this.cryptoUtils.createNewGuid(),p:S?.AbsolutePath,q:S?.QueryString?[[],S.QueryString]:void 0,client_claims:f||void 0,...r},a,p,o.correlationId)}}class M0{constructor(n,a){this.cache=n,this.hasChanged=a}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}}function Qf(l,n,a,o,r){return{credentialType:zt.ID_TOKEN,homeAccountId:l,environment:n,clientId:o,secret:a,realm:r,lastUpdatedAt:Date.now().toString()}}function qf(l,n,a,o,r,d,h,f,y,p,T,S,I){const x={homeAccountId:l,credentialType:zt.ACCESS_TOKEN,secret:a,cachedAt:Wn().toString(),expiresOn:h.toString(),extendedExpiresOn:f.toString(),environment:n,clientId:o,realm:r,target:d,tokenType:T||Je.BEARER,lastUpdatedAt:Date.now().toString()};if(S&&(x.userAssertionHash=S),p&&(x.refreshOn=p.toString()),x.tokenType?.toLowerCase()!==Je.BEARER.toLowerCase())switch(x.credentialType=zt.ACCESS_TOKEN_WITH_AUTH_SCHEME,x.tokenType){case Je.POP:const F=Vi(a,y);if(!F?.cnf?.kid)throw Q(pb);x.keyId=F.cnf.kid;break;case Je.SSH:x.keyId=I}return x}function x0(l,n,a,o,r,d,h){const f={credentialType:zt.REFRESH_TOKEN,homeAccountId:l,environment:n,clientId:o,secret:a,lastUpdatedAt:Date.now().toString()};return d&&(f.userAssertionHash=d),r&&(f.familyId=r),h&&(f.expiresOn=h.toString()),f}function du(l){return l.hasOwnProperty("homeAccountId")&&l.hasOwnProperty("environment")&&l.hasOwnProperty("credentialType")&&l.hasOwnProperty("clientId")&&l.hasOwnProperty("secret")}function Tv(l){return l?du(l)&&l.hasOwnProperty("realm")&&l.hasOwnProperty("target")&&(l.credentialType===zt.ACCESS_TOKEN||l.credentialType===zt.ACCESS_TOKEN_WITH_AUTH_SCHEME):!1}function D0(l){return l?du(l)&&l.hasOwnProperty("realm")&&l.credentialType===zt.ID_TOKEN:!1}function Ev(l){return l?du(l)&&l.credentialType===zt.REFRESH_TOKEN:!1}function U0(l,n){const a=l.indexOf(cC)===0;let o=!0;return n&&(o=n.hasOwnProperty("failedRequests")&&n.hasOwnProperty("errors")&&n.hasOwnProperty("cacheHits")),a&&o}function j0(l,n){let a=!1;l&&(a=l.indexOf(uC)===0);let o=!0;return n&&(o=n.hasOwnProperty("throttleTime")),a&&o}function H0({environment:l,clientId:n}){return[bf,l,n].join(lC).toLowerCase()}function z0(l,n){return n?l.indexOf(bf)===0&&n.hasOwnProperty("clientId")&&n.hasOwnProperty("environment"):!1}function L0(l,n){return n?l.indexOf(nf)===0&&n.hasOwnProperty("aliases")&&n.hasOwnProperty("preferred_cache")&&n.hasOwnProperty("preferred_network")&&n.hasOwnProperty("canonical_authority")&&n.hasOwnProperty("authorization_endpoint")&&n.hasOwnProperty("token_endpoint")&&n.hasOwnProperty("issuer")&&n.hasOwnProperty("aliasesFromNetwork")&&n.hasOwnProperty("endpointsFromNetwork")&&n.hasOwnProperty("expiresAt")&&n.hasOwnProperty("jwks_uri"):!1}function Av(){return Wn()+XE}function Hc(l,n,a){l.authorization_endpoint=n.authorization_endpoint,l.token_endpoint=n.token_endpoint,l.end_session_endpoint=n.end_session_endpoint,l.issuer=n.issuer,l.endpointsFromNetwork=a,l.jwks_uri=n.jwks_uri}function Vh(l,n,a){l.aliases=n.aliases,l.preferred_cache=n.preferred_cache,l.preferred_network=n.preferred_network,l.aliasesFromNetwork=a}function bv(l){return l.expiresAt<=Wn()}class As{constructor(n,a,o,r,d,h,f){this.clientId=n,this.cacheStorage=a,this.cryptoObj=o,this.logger=r,this.performanceClient=d,this.serializableCache=h,this.persistencePlugin=f}validateTokenResponse(n,a,o){if(n.error||n.error_description||n.suberror){const r=`Error(s): ${n.error_codes||Xr} - Timestamp: ${n.timestamp||Xr} - Description: ${n.error_description||Xr} - Correlation ID: ${n.correlation_id||Xr} - Trace ID: ${n.trace_id||Xr}`,d=n.error_codes?.length?n.error_codes[0]:void 0,h=new Is(n.error,r,n.suberror,d,n.status);if(o&&n.status&&n.status>=FE&&n.status<=YE){this.logger.warning("16ks7j",a);return}else if(o&&n.status&&n.status>=GE&&n.status<=VE){this.logger.warning("0g61x3",a);return}throw VC(n.error,n.error_description,n.suberror)?new $n(n.error,n.error_description,n.suberror,n.timestamp||"",n.trace_id||"",n.correlation_id||"",n.claims||"",d):h}}async handleServerTokenResponse(n,a,o,r,d,h,f,y,p,T){let S;if(n.id_token){if(S=Vi(n.id_token||"",this.cryptoObj.base64Decode),h&&h.nonce&&S.nonce!==h.nonce)throw Q(cb);if(r.maxAge||r.maxAge===0){const Y=S.auth_time;if(!Y)throw Q(SC);UC(Y,r.maxAge)}}this.homeAccountIdentifier=zC(n.client_info||"",a.authorityType,this.logger,this.cryptoObj,r.correlationId,S);let I;h&&h.state&&(I=fl(this.cryptoObj.base64Decode,h.state)),n.key_id=n.key_id||r.sshKid||void 0;const x=this.generateCacheRecord(n,a,o,r,S,f,h);let F;try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("0jbz5k",r.correlationId),F=new M0(this.serializableCache,!0),await this.persistencePlugin.beforeCacheAccess(F)),y&&!p&&x.account&&this.cacheStorage.getAllAccounts({homeAccountId:x.account.homeAccountId,environment:x.account.environment},r.correlationId).length<1)return this.logger.warning("1gmt66",r.correlationId),this.performanceClient?.addFields({acntLoggedOut:!0},r.correlationId),await As.generateAuthenticationResult(this.cryptoObj,a,x,!1,r,this.performanceClient,S,I,void 0,T);await this.cacheStorage.saveCacheRecord(x,r.correlationId,Cs(S||{}),d,r.storeInCache)}finally{this.persistencePlugin&&this.serializableCache&&F&&(this.logger.verbose("1bh17u",r.correlationId),await this.persistencePlugin.afterCacheAccess(F))}return As.generateAuthenticationResult(this.cryptoObj,a,x,!1,r,this.performanceClient,S,I,n,T)}generateCacheRecord(n,a,o,r,d,h,f){const y=a.getPreferredCache();if(!y)throw Q(EC);const p=Pf(d);let T,S;n.id_token&&d&&(T=Qf(this.homeAccountIdentifier,y,n.id_token,this.clientId,p||""),S=YC(this.cacheStorage,a,this.homeAccountIdentifier,this.cryptoObj.base64Decode,r.correlationId,d,n.client_info,y,p,f,void 0,this.logger));let I=null;if(n.access_token){const Y=n.scope?Ft.fromString(n.scope):new Ft(r.scopes||[]),ge=(typeof n.expires_in=="string"?parseInt(n.expires_in,10):n.expires_in)||0,Z=(typeof n.ext_expires_in=="string"?parseInt(n.ext_expires_in,10):n.ext_expires_in)||0,ue=(typeof n.refresh_in=="string"?parseInt(n.refresh_in,10):n.refresh_in)||void 0,ie=o+ge,Ce=ie+Z,te=ue&&ue>0?o+ue:void 0;I=qf(this.homeAccountIdentifier,y,n.access_token,this.clientId,p||a.tenant||"",Y.printScopes(),ie,Ce,this.cryptoObj.base64Decode,te,n.token_type,h,n.key_id)}let x=null;if(n.refresh_token){let Y;if(n.refresh_token_expires_in){const ge=typeof n.refresh_token_expires_in=="string"?parseInt(n.refresh_token_expires_in,10):n.refresh_token_expires_in;Y=o+ge,this.performanceClient?.addFields({ntwkRtExpiresOnSeconds:Y},r.correlationId)}x=x0(this.homeAccountIdentifier,y,n.refresh_token,this.clientId,n.foci,h,Y)}let F=null;return n.foci&&(F={clientId:this.clientId,environment:y,familyId:n.foci}),{account:S,idToken:T,accessToken:I,refreshToken:x,appMetadata:F}}static async generateAuthenticationResult(n,a,o,r,d,h,f,y,p,T){let S="",I=[],x=null,F,Y,ge="";if(o.accessToken){if(o.accessToken.tokenType===Je.POP&&!d.popKid){const Ce=new Do(n,h),{secret:te,keyId:W}=o.accessToken;if(!W)throw Q(bC);S=await Ce.signPopToken(te,W,d)}else S=o.accessToken.secret;I=Ft.fromString(o.accessToken.target).asArray(),x=Kc(o.accessToken.expiresOn),F=Kc(o.accessToken.extendedExpiresOn),o.accessToken.refreshOn&&(Y=Kc(o.accessToken.refreshOn))}o.appMetadata&&(ge=o.appMetadata.familyId===Yc?Yc:"");const Z=f?.oid||f?.sub||"",ue=f?.tid||"";p?.spa_accountid&&o.account&&(o.account.nativeAccountId=p?.spa_accountid);const ie=o.account?Bf(Es(o.account),void 0,f,o.idToken?.secret):null;return{authority:a.canonicalAuthority,uniqueId:Z,tenantId:ue,scopes:I,account:ie,idToken:o?.idToken?.secret||"",idTokenClaims:f||{},accessToken:S,fromCache:r,expiresOn:x,extExpiresOn:F,refreshOn:Y,correlationId:d.correlationId,requestId:T||"",familyId:ge,tokenType:o.accessToken?.tokenType||"",state:y?y.userRequestState:"",cloudGraphHostName:o.account?.cloudGraphHostName||"",msGraphHost:o.account?.msGraphHost||"",code:p?.spa_code,fromPlatformBroker:!1}}}function YC(l,n,a,o,r,d,h,f,y,p,T,S){S?.verbose("09jz0t",r);const x=l.getAccountKeys().find(ue=>ue.startsWith(a));let F=null;x&&(F=l.getAccount(x,r));const Y=F||Fb({homeAccountId:a,idTokenClaims:d,clientInfo:h,environment:f,cloudGraphHostName:p?.cloud_graph_host_name,msGraphHost:p?.msgraph_host,nativeAccountId:T},n,o),ge=Y.tenantProfiles||[],Z=y||Y.realm;if(Z&&!ge.find(ue=>ue.tenantId===Z)){const ue=Ho(a,Y.localAccountId,Z,d);ge.push(ue)}return Y.tenantProfiles=ge,Y}const Xn={HOME_ACCOUNT_ID:"home_account_id",UPN:"UPN"};async function QC(l,n,a){return typeof l=="string"?l:l({clientId:n,tokenEndpoint:a})}function hu(l,n,a){return{clientId:l,authority:n.authority,scopes:n.scopes,homeAccountIdentifier:a,claims:n.claims,authenticationScheme:n.authenticationScheme,resourceRequestMethod:n.resourceRequestMethod,resourceRequestUri:n.resourceRequestUri,shrClaims:n.shrClaims,sshKid:n.sshKid,embeddedClientId:n.embeddedClientId||n.extraParameters?.clientId}}class mi{static generateThrottlingStorageKey(n){return`${uC}.${JSON.stringify(n)}`}static preProcess(n,a,o){const r=mi.generateThrottlingStorageKey(a),d=n.getThrottlingCache(r,o);if(d){if(d.throttleTime<Date.now()){n.removeItem(r,o);return}throw new Is(d.errorCodes?.join(" ")||"",d.errorMessage,d.subError)}}static postProcess(n,a,o,r){if(mi.checkResponseStatus(o)||mi.checkResponseForRetryAfter(o)){const d={throttleTime:mi.calculateThrottleTime(parseInt(o.headers[$t.RETRY_AFTER])),error:o.body.error,errorCodes:o.body.error_codes,errorMessage:o.body.error_description,subError:o.body.suberror};n.setThrottlingCache(mi.generateThrottlingStorageKey(a),d,r)}}static checkResponseStatus(n){return n.status===429||n.status>=500&&n.status<600}static checkResponseForRetryAfter(n){return n.headers?n.headers.hasOwnProperty($t.RETRY_AFTER)&&(n.status<200||n.status>=300):!1}static calculateThrottleTime(n){const a=n<=0?0:n,o=Date.now()/1e3;return Math.floor(Math.min(o+(a||nA),o+iA)*1e3)}static removeThrottle(n,a,o,r){const d=hu(a,o,r),h=this.generateThrottlingStorageKey(d);n.removeItem(h,o.correlationId)}}class fu extends et{constructor(n,a,o){super(n.errorCode,n.errorMessage,n.subError),Object.setPrototypeOf(this,fu.prototype),this.name="NetworkError",this.error=n,this.httpStatus=a,this.responseHeaders=o}}function Wr(l,n,a,o){return l.errorMessage=`${l.errorMessage}, additionalErrorInfo: error.name:${o?.name}, error.message:${o?.message}`,new fu(l,n,a)}function qC(l,n,a){const o={};if(o[$t.CONTENT_TYPE]=jE,!n&&a)switch(a.type){case Xn.HOME_ACCOUNT_ID:try{const r=Oo(a.credential);o[$t.CCS_HEADER]=`Oid:${r.uid}@${r.utid}`}catch{l.verbose("1qhtee","")}break;case Xn.UPN:o[$t.CCS_HEADER]=`UPN: ${a.credential}`;break}return o}function JC(l,n,a,o){const r=new Map;return l.embeddedClientId&&cu(r,n,a),l.extraQueryParameters&&yi(r,l.extraQueryParameters),dl(r,l.correlationId),lu(r,l.correlationId,o),rl(r)}async function XC(l,n,a,o,r,d,h,f,y,p){const T=await B0(o,l,{body:n,headers:a},r,d,h,f,y);return p&&T.status<500&&T.status!==429&&p.clearTelemetryCache(),T}async function B0(l,n,a,o,r,d,h,f){mi.preProcess(r,l,o);let y;try{y=await K(d.sendPostRequestAsync.bind(d),h0,h,f,o)(n,a);const p=y.headers||{};f?.addFields({refreshTokenSize:y.body.refresh_token?.length||0,httpVerToken:p[$t.X_MS_HTTP_VERSION]||"",requestId:p[$t.X_MS_REQUEST_ID]||""},o)}catch(p){if(p instanceof fu){const T=p.responseHeaders;throw T&&f?.addFields({httpVerToken:T[$t.X_MS_HTTP_VERSION]||"",requestId:T[$t.X_MS_REQUEST_ID]||"",contentTypeHeader:T[$t.CONTENT_TYPE]||void 0,contentLengthHeader:T[$t.CONTENT_LENGTH]||void 0,httpStatus:p.httpStatus},o),p.error}throw p instanceof et?p:Q(sb)}return mi.postProcess(r,l,y,o),y}function K0(l){return l.hasOwnProperty("authorization_endpoint")&&l.hasOwnProperty("token_endpoint")&&l.hasOwnProperty("issuer")&&l.hasOwnProperty("jwks_uri")}function P0(l){return l.hasOwnProperty("tenant_discovery_endpoint")&&l.hasOwnProperty("metadata")}function G0(l){return l.hasOwnProperty("error")&&l.hasOwnProperty("error_description")}class gu{constructor(n,a,o,r){this.networkInterface=n,this.logger=a,this.performanceClient=o,this.correlationId=r}async detectRegion(n,a){let o=n;if(o)a.region_source=bo.ENVIRONMENT_VARIABLE;else{const r=gu.IMDS_OPTIONS;try{const d=await K(this.getRegionFromIMDS.bind(this),Sv,this.logger,this.performanceClient,this.correlationId)(HE,r);if(d.status===ev&&(o=d.body,a.region_source=bo.IMDS),d.status===tv){const h=await K(this.getCurrentVersion.bind(this),I0,this.logger,this.performanceClient,this.correlationId)(r);if(!h)return a.region_source=bo.FAILED_AUTO_DETECTION,null;const f=await K(this.getRegionFromIMDS.bind(this),Sv,this.logger,this.performanceClient,this.correlationId)(h,r);f.status===ev&&(o=f.body,a.region_source=bo.IMDS)}}catch{return a.region_source=bo.FAILED_AUTO_DETECTION,null}}return o||(a.region_source=bo.FAILED_AUTO_DETECTION),o||null}async getRegionFromIMDS(n,a){return this.networkInterface.sendGetRequestAsync(`${$y}?api-version=${n}&format=text`,a,zE)}async getCurrentVersion(n){try{const a=await this.networkInterface.sendGetRequestAsync(`${$y}?format=json`,n);return a.status===tv&&a.body&&a.body["newest-versions"]&&a.body["newest-versions"].length>0?a.body["newest-versions"][0]:null}catch{return null}}}gu.IMDS_OPTIONS={headers:{Metadata:"true"}};class ln{constructor(n,a,o,r,d,h,f,y){this.canonicalAuthority=n,this._canonicalAuthority.validateAsUri(),this.networkInterface=a,this.cacheManager=o,this.authorityOptions=r,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=d,this.performanceClient=f,this.correlationId=h,this.managedIdentity=y||!1,this.regionDiscovery=new gu(a,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(n){if(n.HostNameAndPort.endsWith(Zy))return Jn.Ciam;const a=n.PathSegments;if(a.length)switch(a[0].toLowerCase()){case NE:return Jn.Adfs;case ME:return Jn.Dsts}return Jn.Default}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(n){this._canonicalAuthority=new Ve(n),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw Q(_a)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw Q(_a)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw Q(_a)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw Q(Cb);return this.replacePath(this.metadata.end_session_endpoint)}else throw Q(_a)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw Q(_a)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw Q(_a)}canReplaceTenant(n){return n.PathSegments.length===1&&!ln.reservedTenantDomains.has(n.PathSegments[0])&&this.getAuthorityType(n)===Jn.Default&&this.protocolMode!==dn.OIDC}replaceTenant(n){return n.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(n){let a=n;const r=new Ve(this.metadata.canonical_authority).getUrlComponents(),d=r.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((f,y)=>{let p=d[y];if(y===0&&this.canReplaceTenant(r)){const T=new Ve(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];p!==T&&(this.logger.verbose("1q3g2x",this.correlationId),p=T)}f!==p&&(a=a.replace(`/${p}/`,`/${f}/`))}),this.replaceTenant(a)}get defaultOpenIdConfigurationEndpoint(){const n=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||this.authorityType===Jn.Adfs||this.protocolMode===dn.OIDC&&!this.isAliasOfKnownMicrosoftAuthority(n)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}async resolveEndpointsAsync(){const n=this.getCurrentMetadataEntity(),a=await K(this.updateCloudDiscoveryMetadata.bind(this),b0,this.logger,this.performanceClient,this.correlationId)(n);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,n.preferred_network);const o=await K(this.updateEndpointMetadata.bind(this),_0,this.logger,this.performanceClient,this.correlationId)(n);this.updateCachedMetadata(n,a,{source:o}),this.performanceClient?.addFields({cloudDiscoverySource:a,authorityEndpointSource:o},this.correlationId)}getCurrentMetadataEntity(){let n=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort,this.correlationId);return n||(n={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:Av(),jwks_uri:""}),n}updateCachedMetadata(n,a,o){a!==Qn.CACHE&&o?.source!==Qn.CACHE&&(n.expiresAt=Av(),n.canonical_authority=this.canonicalAuthority);const r=this.cacheManager.generateAuthorityMetadataCacheKey(n.preferred_cache,this.correlationId);this.cacheManager.setAuthorityMetadata(r,n,this.correlationId),this.metadata=n}async updateEndpointMetadata(n){const a=this.updateEndpointMetadataFromLocalSources(n);if(a){if(a.source===Qn.HARDCODED_VALUES&&this.authorityOptions.azureRegionConfiguration?.azureRegion&&a.metadata){const r=await K(this.updateMetadataWithRegionalInformation.bind(this),Cv,this.logger,this.performanceClient,this.correlationId)(a.metadata);Hc(n,r,!1),n.canonical_authority=this.canonicalAuthority}return a.source}let o=await K(this.getEndpointMetadataFromNetwork.bind(this),w0,this.logger,this.performanceClient,this.correlationId)();if(o)return this.authorityOptions.azureRegionConfiguration?.azureRegion&&(o=await K(this.updateMetadataWithRegionalInformation.bind(this),Cv,this.logger,this.performanceClient,this.correlationId)(o)),Hc(n,o,!0),Qn.NETWORK;throw Q(ob,this.defaultOpenIdConfigurationEndpoint)}updateEndpointMetadataFromLocalSources(n){this.logger.verbose("1fi0kc",this.correlationId);const a=this.getEndpointMetadataFromConfig();if(a)return this.logger.verbose("06t0uj",this.correlationId),Hc(n,a,!1),{source:Qn.CONFIG};this.logger.verbose("151k0p",this.correlationId);const o=this.getEndpointMetadataFromHardcodedValues();if(o)return Hc(n,o,!1),{source:Qn.HARDCODED_VALUES,metadata:o};this.logger.verbose("1imop5",this.correlationId);const r=bv(n);return this.isAuthoritySameType(n)&&n.endpointsFromNetwork&&!r?(this.logger.verbose("16uq31",""),{source:Qn.CACHE}):(r&&this.logger.verbose("0uoibc",""),null)}isAuthoritySameType(n){return new Ve(n.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch{throw nt(XA)}return null}async getEndpointMetadataFromNetwork(){const n={},a=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose("1y65x6",this.correlationId);try{const o=await this.networkInterface.sendGetRequestAsync(a,n);return K0(o.body)?o.body:(this.logger.verbose("1koyv8",this.correlationId),null)}catch{return this.logger.verbose("0a9wik",this.correlationId),null}}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in gv?gv[this.hostnameAndPort]:null}async updateMetadataWithRegionalInformation(n){const a=this.authorityOptions.azureRegionConfiguration?.azureRegion;if(a){if(a!==LE)return this.regionDiscoveryMetadata.region_outcome=Ph.CONFIGURED_NO_AUTO_DETECTION,this.regionDiscoveryMetadata.region_used=a,ln.replaceWithRegionalInformation(n,a);const o=await K(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),k0,this.logger,this.performanceClient,this.correlationId)(this.authorityOptions.azureRegionConfiguration?.environmentRegion,this.regionDiscoveryMetadata);if(o)return this.regionDiscoveryMetadata.region_outcome=Ph.AUTO_DETECTION_REQUESTED_SUCCESSFUL,this.regionDiscoveryMetadata.region_used=o,ln.replaceWithRegionalInformation(n,o);this.regionDiscoveryMetadata.region_outcome=Ph.AUTO_DETECTION_REQUESTED_FAILED}return n}async updateCloudDiscoveryMetadata(n){const a=this.updateCloudDiscoveryMetadataFromLocalSources(n);if(a)return a;const o=await K(this.getCloudDiscoveryMetadataFromNetwork.bind(this),A0,this.logger,this.performanceClient,this.correlationId)();if(o)return Vh(n,o,!0),Qn.NETWORK;throw nt(ZA)}updateCloudDiscoveryMetadataFromLocalSources(n){this.logger.verbose("0jhlgt",this.correlationId),this.logger.verbosePii("1fy7uz",this.correlationId),this.logger.verbosePii("08zabj",this.correlationId),this.logger.verbosePii("1o1kv3",this.correlationId);const a=this.getCloudDiscoveryMetadataFromConfig();if(a)return this.logger.verbose("1nakio",this.correlationId),Vh(n,a,!1),Qn.CONFIG;this.logger.verbose("1x74aj",this.correlationId);const o=Gb(this.hostnameAndPort);if(o)return this.logger.verbose("0by47c",this.correlationId),Vh(n,o,!1),Qn.HARDCODED_VALUES;this.logger.verbose("0r2fzy",this.correlationId);const r=bv(n);return this.isAuthoritySameType(n)&&n.aliasesFromNetwork&&!r?(this.logger.verbose("1uffgh",""),Qn.CACHE):(r&&this.logger.verbose("0uoibc",""),null)}getCloudDiscoveryMetadataFromConfig(){if(this.authorityType===Jn.Ciam)return this.logger.verbose("04y84h",this.correlationId),ln.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("0gszr3",this.correlationId);try{this.logger.verbose("1iifkx",this.correlationId);const n=JSON.parse(this.authorityOptions.cloudDiscoveryMetadata),a=$c(n.metadata,this.hostnameAndPort);if(this.logger.verbose("0q67e3",""),a)return this.logger.verbose("0hzfao",this.correlationId),a;this.logger.verbose("1ajz3u",this.correlationId)}catch{throw this.logger.verbose("1wq5tu",this.correlationId),nt(yC)}}return this.isInKnownAuthorities()?(this.logger.verbose("0mt9al",this.correlationId),ln.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}async getCloudDiscoveryMetadataFromNetwork(){const n=`${xE}${this.canonicalAuthority}oauth2/v2.0/authorize`,a={};let o=null;try{const r=await this.networkInterface.sendGetRequestAsync(n,a);let d,h;if(P0(r.body))d=r.body,h=d.metadata,this.logger.verbosePii("1vglyt",this.correlationId);else if(G0(r.body)){if(this.logger.warning("062uto",this.correlationId),d=r.body,d.error===PE)return this.logger.error("1x90tm",this.correlationId),null;this.logger.warning("0wchdm",this.correlationId),this.logger.warning("1s5mpv",this.correlationId),this.logger.warning("1yhqpw",this.correlationId),h=[]}else return this.logger.error("0768g0",this.correlationId),null;this.logger.verbose("1lrobr",this.correlationId),o=$c(h,this.hostnameAndPort)}catch(r){return r instanceof et?this.logger.error("0vwhc7",this.correlationId):this.logger.error("0s2z41",this.correlationId),null}return o||(this.logger.warning("0jp28q",this.correlationId),this.logger.verbose("130sd8",this.correlationId),o=ln.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),o}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(a=>a&&Ve.getDomainFromUrl(a).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(n,a){let o;if(a&&a.azureCloudInstance!==Lf.None){const r=a.tenant?a.tenant:iC;o=`${a.azureCloudInstance}/${r}/`}return o||n}static createCloudDiscoveryMetadataFromHost(n){return{preferred_network:n,preferred_cache:n,aliases:[n]}}getPreferredCache(){if(this.managedIdentity)return RE;if(this.discoveryComplete())return this.metadata.preferred_cache;throw Q(_a)}isAlias(n){return this.metadata.aliases.indexOf(n)>-1}isAliasOfKnownMicrosoftAuthority(n){return HC.has(n)}static isPublicCloudAuthority(n){return KE.indexOf(n)>=0}static buildRegionalAuthorityString(n,a,o){const r=new Ve(n);r.validateAsUri();const d=r.getUrlComponents();let h=`${a}.${d.HostNameAndPort}`;this.isPublicCloudAuthority(d.HostNameAndPort)&&(h=`${a}.${BE}`);const f=Ve.constructAuthorityUriFromObject({...r.getUrlComponents(),HostNameAndPort:h}).urlString;return o?`${f}?${o}`:f}static replaceWithRegionalInformation(n,a){const o={...n};return o.authorization_endpoint=ln.buildRegionalAuthorityString(o.authorization_endpoint,a),o.token_endpoint=ln.buildRegionalAuthorityString(o.token_endpoint,a),o.end_session_endpoint&&(o.end_session_endpoint=ln.buildRegionalAuthorityString(o.end_session_endpoint,a)),o}static transformCIAMAuthority(n){let a=n;const r=new Ve(n).getUrlComponents();if(r.PathSegments.length===0&&r.HostNameAndPort.endsWith(Zy)){const d=r.HostNameAndPort.split(".")[0];a=`${a}${d}${DE}`}return a}}ln.reservedTenantDomains=new Set(["{tenant}","{tenantid}",Na.COMMON,Na.CONSUMERS,Na.ORGANIZATIONS]);function V0(l){const o=new Ve(l).getUrlComponents().PathSegments.slice(-1)[0]?.toLowerCase();switch(o){case Na.COMMON:case Na.ORGANIZATIONS:case Na.CONSUMERS:return;default:return o}}function ZC(l){return l.endsWith(ef)?l:`${l}${ef}`}function F0(l){const n=l.cloudDiscoveryMetadata;let a;if(n)try{a=JSON.parse(n)}catch{throw nt(yC)}return{canonicalAuthority:l.authority?ZC(l.authority):void 0,knownAuthorities:l.knownAuthorities,cloudDiscoveryMetadata:a}}async function $C(l,n,a,o,r,d,h){const f=ln.transformCIAMAuthority(ZC(l)),y=new ln(f,n,a,o,r,d,h);try{return await K(y.resolveEndpointsAsync.bind(y),E0,r,h,d)(),y}catch{throw Q(_a)}}class WC{constructor(n,a){this.includeRedirectUri=!0,this.config=Gf(n),this.logger=new vi(this.config.loggerOptions,uu,hl),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=a,this.oidcDefaultScopes=this.config.authOptions.authority.options.OIDCOptions?.defaultScopes}async acquireToken(n,a,o){if(!n.code)throw Q(hb);o&&o.cloud_instance_host_name&&await K(this.updateTokenEndpointAuthority.bind(this),T0,this.logger,this.performanceClient,n.correlationId)(o.cloud_instance_host_name,n.correlationId);const r=Wn(),d=await K(this.executeTokenRequest.bind(this),C0,this.logger,this.performanceClient,n.correlationId)(this.authority,n,this.serverTelemetryManager),h=d.headers?.[$t.X_MS_REQUEST_ID],f=new As(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.performanceClient,this.config.serializableCache,this.config.persistencePlugin);return f.validateTokenResponse(d.body,n.correlationId),K(f.handleServerTokenResponse.bind(f),Yf,this.logger,this.performanceClient,n.correlationId)(d.body,this.authority,r,n,a,o,void 0,void 0,void 0,h)}getLogoutUri(n){if(!n)throw nt(JA);const a=this.createLogoutUrlQueryString(n);return Ve.appendQueryString(this.authority.endSessionEndpoint,a)}async executeTokenRequest(n,a,o){const r=JC(a,this.config.authOptions.clientId,this.config.authOptions.redirectUri,this.performanceClient),d=Ve.appendQueryString(n.tokenEndpoint,r),h=await K(this.createTokenRequestBody.bind(this),S0,this.logger,this.performanceClient,a.correlationId)(a);let f;if(a.clientInfo)try{const T=Wc(a.clientInfo,this.cryptoUtils.base64Decode);f={credential:`${T.uid}${tf}${T.utid}`,type:Xn.HOME_ACCOUNT_ID}}catch{this.logger.verbose("0wznt3",a.correlationId)}const y=qC(this.logger,this.config.systemOptions.preventCorsPreflight,f||a.ccsCredential),p=hu(this.config.authOptions.clientId,a);return K(XC,g0,this.logger,this.performanceClient,a.correlationId)(d,h,y,p,a.correlationId,this.cacheManager,this.networkClient,this.logger,this.performanceClient,o)}async createTokenRequestBody(n){const a=new Map;if(Nf(a,n.embeddedClientId||n.extraParameters?.[Ts]||this.config.authOptions.clientId),this.includeRedirectUri)Mf(a,n.redirectUri);else if(!n.redirectUri)throw nt(VA);if(Rf(a,n.scopes,!0,this.oidcDefaultScopes),kb(a,n.code),Df(a,this.config.libraryInfo),Uf(a,this.config.telemetry.application),xC(a),this.serverTelemetryManager&&!KC(this.config)&&MC(a,this.serverTelemetryManager),n.codeVerifier&&Ob(a,n.codeVerifier),this.config.clientCredentials.clientSecret&&_C(a,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const r=this.config.clientCredentials.clientAssertion;kC(a,await QC(r.assertion,this.config.authOptions.clientId,n.resourceRequestUri)),IC(a,r.assertionType)}if(OC(a,oC.AUTHORIZATION_CODE_GRANT),Hf(a),n.authenticationScheme===Je.POP){const r=new Do(this.cryptoUtils,this.performanceClient);let d;n.popKid?d=this.cryptoUtils.encodeKid(n.popKid):d=(await K(r.generateCnf.bind(r),gl,this.logger,this.performanceClient,n.correlationId)(n,this.logger)).reqCnfString,zf(a,d)}else if(n.authenticationScheme===Je.SSH)if(n.sshJwk)NC(a,n.sshJwk);else throw nt(If);(!zn.isEmptyObj(n.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&xf(a,n.claims,this.config.authOptions.clientCapabilities);let o;if(n.clientInfo)try{const r=Wc(n.clientInfo,this.cryptoUtils.base64Decode);o={credential:`${r.uid}${tf}${r.utid}`,type:Xn.HOME_ACCOUNT_ID}}catch{this.logger.verbose("0wznt3",n.correlationId)}else o=n.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&o)switch(o.type){case Xn.HOME_ACCOUNT_ID:try{const r=Oo(o.credential);el(a,r)}catch{this.logger.verbose("1qhtee",n.correlationId)}break;case Xn.UPN:Jc(a,o.credential);break}return n.embeddedClientId&&cu(a,this.config.authOptions.clientId,this.config.authOptions.redirectUri),n.extraParameters&&yi(a,n.extraParameters),n.enableSpaAuthorizationCode&&(!n.extraParameters||!n.extraParameters[ov])&&yi(a,{[ov]:"1"}),lu(a,n.correlationId,this.performanceClient),rl(a)}createLogoutUrlQueryString(n){const a=new Map;return n.postLogoutRedirectUri&&Eb(a,n.postLogoutRedirectUri),n.correlationId&&dl(a,n.correlationId),n.idTokenHint&&Ab(a,n.idTokenHint),n.state&&wC(a,n.state),n.logoutHint&&Nb(a,n.logoutHint),n.extraQueryParameters&&yi(a,n.extraQueryParameters),this.config.authOptions.instanceAware&&RC(a),rl(a)}async updateTokenEndpointAuthority(n,a){const o=`https://${n}/${this.authority.tenant}/`,r=await $C(o,this.networkClient,this.cacheManager,this.authority.options,this.logger,a,this.performanceClient);this.authority=r}}const Y0=300;class Q0{constructor(n,a){this.config=Gf(n),this.logger=new vi(this.config.loggerOptions,uu,hl),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=a}async acquireToken(n,a){const o=Wn(),r=await K(this.executeTokenRequest.bind(this),m0,this.logger,this.performanceClient,n.correlationId)(n,this.authority),d=r.headers?.[$t.X_MS_REQUEST_ID],h=new As(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.performanceClient,this.config.serializableCache,this.config.persistencePlugin);return h.validateTokenResponse(r.body,n.correlationId),K(h.handleServerTokenResponse.bind(h),Yf,this.logger,this.performanceClient,n.correlationId)(r.body,this.authority,o,n,a,void 0,void 0,!0,n.forceCache,d)}async acquireTokenByRefreshToken(n,a){if(!n)throw nt(qA);if(!n.account)throw Q(TC);if(this.cacheManager.isAppMetadataFOCI(n.account.environment,n.correlationId))try{return await K(this.acquireTokenWithCachedRefreshToken.bind(this),Gh,this.logger,this.performanceClient,n.correlationId)(n,!0,a)}catch(r){const d=r instanceof $n&&r.errorCode===cf,h=r instanceof Is&&r.errorCode===sA&&r.subError===oA;if(d||h)return K(this.acquireTokenWithCachedRefreshToken.bind(this),Gh,this.logger,this.performanceClient,n.correlationId)(n,!1,a);throw r}return K(this.acquireTokenWithCachedRefreshToken.bind(this),Gh,this.logger,this.performanceClient,n.correlationId)(n,!1,a)}async acquireTokenWithCachedRefreshToken(n,a,o){const r=Zn(this.cacheManager.getRefreshToken.bind(this.cacheManager),O0,this.logger,this.performanceClient,n.correlationId)(n.account,a,n.correlationId,void 0);if(!r)throw eu(cf);if(r.expiresOn){const h=n.refreshTokenExpirationOffsetSeconds||Y0;if(this.performanceClient?.addFields({cacheRtExpiresOnSeconds:Number(r.expiresOn),rtOffsetSeconds:h},n.correlationId),tu(r.expiresOn,h))throw eu(PC)}const d={...n,refreshToken:r.secret,authenticationScheme:n.authenticationScheme||Je.BEARER,ccsCredential:{credential:n.account.homeAccountId,type:Xn.HOME_ACCOUNT_ID}};try{return await K(this.acquireToken.bind(this),p0,this.logger,this.performanceClient,n.correlationId)(d,o)}catch(h){if(h instanceof $n&&h.subError===Vf){this.logger.verbose("1pg3ap",n.correlationId);const f=this.cacheManager.generateCredentialKey(r);this.cacheManager.removeRefreshToken(f,n.correlationId)}throw h}}async executeTokenRequest(n,a){const o=JC(n,this.config.authOptions.clientId,this.config.authOptions.redirectUri,this.performanceClient),r=Ve.appendQueryString(a.tokenEndpoint,o),d=await K(this.createTokenRequestBody.bind(this),y0,this.logger,this.performanceClient,n.correlationId)(n),h=qC(this.logger,this.config.systemOptions.preventCorsPreflight,n.ccsCredential),f=hu(this.config.authOptions.clientId,n);return K(XC,f0,this.logger,this.performanceClient,n.correlationId)(r,d,h,f,n.correlationId,this.cacheManager,this.networkClient,this.logger,this.performanceClient,this.serverTelemetryManager)}async createTokenRequestBody(n){const a=new Map;if(Nf(a,n.embeddedClientId||n.extraParameters?.[Ts]||this.config.authOptions.clientId),n.redirectUri&&Mf(a,n.redirectUri),Rf(a,n.scopes,!0,this.config.authOptions.authority.options.OIDCOptions?.defaultScopes),OC(a,oC.REFRESH_TOKEN_GRANT),Hf(a),Df(a,this.config.libraryInfo),Uf(a,this.config.telemetry.application),xC(a),this.serverTelemetryManager&&!KC(this.config)&&MC(a,this.serverTelemetryManager),Ib(a,n.refreshToken),this.config.clientCredentials.clientSecret&&_C(a,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const o=this.config.clientCredentials.clientAssertion;kC(a,await QC(o.assertion,this.config.authOptions.clientId,n.resourceRequestUri)),IC(a,o.assertionType)}if(n.authenticationScheme===Je.POP){const o=new Do(this.cryptoUtils,this.performanceClient);let r;n.popKid?r=this.cryptoUtils.encodeKid(n.popKid):r=(await K(o.generateCnf.bind(o),gl,this.logger,this.performanceClient,n.correlationId)(n,this.logger)).reqCnfString,zf(a,r)}else if(n.authenticationScheme===Je.SSH)if(n.sshJwk)NC(a,n.sshJwk);else throw nt(If);if((!zn.isEmptyObj(n.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&xf(a,n.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&n.ccsCredential)switch(n.ccsCredential.type){case Xn.HOME_ACCOUNT_ID:try{const o=Oo(n.ccsCredential.credential);el(a,o)}catch{this.logger.verbose("1qhtee",n.correlationId)}break;case Xn.UPN:Jc(a,n.ccsCredential.credential);break}return n.embeddedClientId&&cu(a,this.config.authOptions.clientId,this.config.authOptions.redirectUri),n.extraParameters&&yi(a,{...n.extraParameters}),lu(a,n.correlationId,this.performanceClient),rl(a)}}class q0{constructor(n,a){this.config=Gf(n),this.logger=new vi(this.config.loggerOptions,uu,hl),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=a}async acquireCachedToken(n){let a=ps.NOT_APPLICABLE;if(n.forceRefresh||!zn.isEmptyObj(n.claims))throw this.setCacheOutcome(ps.FORCE_REFRESH_OR_CLAIMS,n.correlationId),Q(vs);if(!n.account)throw Q(TC);const o=n.account.tenantId||V0(n.authority),r=this.cacheManager.getTokenKeys(),d=this.cacheManager.getAccessToken(n.account,n,r,o);if(d){if(d0(d.cachedAt)||tu(d.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome(ps.CACHED_ACCESS_TOKEN_EXPIRED,n.correlationId),Q(vs);d.refreshOn&&tu(d.refreshOn,0)&&(a=ps.PROACTIVELY_REFRESHED)}else throw this.setCacheOutcome(ps.NO_CACHED_ACCESS_TOKEN,n.correlationId),Q(vs);const h=n.authority||this.authority.getPreferredCache(),f={account:this.cacheManager.getAccount(this.cacheManager.generateAccountKey(n.account),n.correlationId),accessToken:d,idToken:this.cacheManager.getIdToken(n.account,n.correlationId,r,o),refreshToken:null,appMetadata:this.cacheManager.readAppMetadataFromCache(h,n.correlationId)};return this.setCacheOutcome(a,n.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[await K(this.generateResultFromCacheRecord.bind(this),v0,this.logger,this.performanceClient,n.correlationId)(f,n),a]}setCacheOutcome(n,a){this.serverTelemetryManager?.setCacheOutcome(n),this.performanceClient?.addFields({cacheOutcome:n},a),n!==ps.NOT_APPLICABLE&&this.logger.info("09ingz",a)}async generateResultFromCacheRecord(n,a){let o;if(n.idToken&&(o=Vi(n.idToken.secret,this.config.cryptoInterface.base64Decode)),a.maxAge||a.maxAge===0){const r=o?.auth_time;if(!r)throw Q(SC);UC(r,a.maxAge)}return As.generateAuthenticationResult(this.cryptoUtils,this.authority,n,!0,a,this.performanceClient,o)}}const J0={sendGetRequestAsync:()=>Promise.reject(Q(Oe)),sendPostRequestAsync:()=>Promise.reject(Q(Oe))};function X0(l,n,a,o){const r=n.correlationId,d=new Map;Nf(d,n.embeddedClientId||n.extraQueryParameters?.[Ts]||l.clientId);const h=[...n.scopes||[],...n.extraScopesToConsent||[]];if(Rf(d,h,!0,l.authority.options.OIDCOptions?.defaultScopes),Mf(d,n.redirectUri),dl(d,r),Sb(d,n.responseMode),Hf(d),n.prompt&&(wb(d,n.prompt),o?.addFields({prompt:n.prompt},r)),n.domainHint&&(bb(d,n.domainHint),o?.addFields({domainHintFromRequest:!0},r)),n.prompt!==un.SELECT_ACCOUNT)if(n.sid&&n.prompt===un.NONE)a.verbose("1tvqyx",n.correlationId),uv(d,n.sid),o?.addFields({sidFromRequest:!0},r);else if(n.account){const f=W0(n.account);let y=ew(n.account);if(y&&n.domainHint&&(a.warning("0wkg3v",n.correlationId),y=null),y){a.verbose("1eyfsw",n.correlationId),jc(d,y),o?.addFields({loginHintFromClaim:!0},r);try{const p=Oo(n.account.homeAccountId);el(d,p)}catch{a.verbose("12ugck",n.correlationId)}}else if(f&&n.prompt===un.NONE){a.verbose("1rmd8s",n.correlationId),uv(d,f),o?.addFields({sidFromClaim:!0},r);try{const p=Oo(n.account.homeAccountId);el(d,p)}catch{a.verbose("12ugck",n.correlationId)}}else if(n.loginHint)a.verbose("0y3007",n.correlationId),jc(d,n.loginHint),Jc(d,n.loginHint),o?.addFields({loginHintFromRequest:!0},r);else if(n.account.username){a.verbose("02f507",n.correlationId),jc(d,n.account.username),o?.addFields({loginHintFromUpn:!0},r);try{const p=Oo(n.account.homeAccountId);el(d,p)}catch{a.verbose("12ugck",n.correlationId)}}}else n.loginHint&&(a.verbose("0g01ey",n.correlationId),jc(d,n.loginHint),Jc(d,n.loginHint),o?.addFields({loginHintFromRequest:!0},r));else a.verbose("169k9v",n.correlationId);return n.nonce&&_b(d,n.nonce),n.state&&wC(d,n.state),(n.claims||l.clientCapabilities&&l.clientCapabilities.length>0)&&xf(d,n.claims,l.clientCapabilities),n.embeddedClientId&&cu(d,l.clientId,l.redirectUri),l.instanceAware&&(!n.extraQueryParameters||!Object.keys(n.extraQueryParameters).includes(af))&&RC(d),d}function Jf(l,n){const a=rl(n);return Ve.appendQueryString(l.authorizationEndpoint,a)}function Z0(l,n){if(eS(l,n),!l.code)throw Q(yb);return l}function eS(l,n){if(!l.state||!n)throw l.state?Q(rv,"Cached State"):Q(rv,"Server State");let a,o;try{a=decodeURIComponent(l.state)}catch{throw Q(ol,l.state)}try{o=decodeURIComponent(n)}catch{throw Q(ol,l.state)}if(a!==o)throw Q(lb);if(l.error||l.error_description||l.suberror){const r=$0(l);throw VC(l.error,l.error_description,l.suberror)?new $n(l.error||"",l.error_description,l.suberror,l.timestamp||"",l.trace_id||"",l.correlation_id||"",l.claims||"",r):new Is(l.error||"",l.error_description,l.suberror,r)}}function $0(l){const n="code=",a=l.error_uri?.lastIndexOf(n);return a&&a>=0?l.error_uri?.substring(a+n.length):void 0}function W0(l){return l.idTokenClaims?.sid||null}function ew(l){return l.loginHint||l.idTokenClaims?.login_hint||null}const uf="unexpected_error";const wv=",",tS="|";function tw(l){const{skus:n,libraryName:a,libraryVersion:o,extensionName:r,extensionVersion:d}=l,h=new Map([[0,[a,o]],[2,[r,d]]]);let f=[];if(n?.length){if(f=n.split(wv),f.length<4)return n}else f=Array.from({length:4},()=>tS);return h.forEach((y,p)=>{y.length===2&&y[0]?.length&&y[1]?.length&&nw({skuArr:f,index:p,skuName:y[0],skuVersion:y[1]})}),f.join(wv)}function nw(l){const{skuArr:n,index:a,skuName:o,skuVersion:r}=l;a>=n.length||(n[a]=[o,r].join(tS))}class ll{constructor(n,a){this.cacheOutcome=ps.NOT_APPLICABLE,this.cacheManager=a,this.apiId=n.apiId,this.correlationId=n.correlationId,this.wrapperSKU=n.wrapperSKU||"",this.wrapperVer=n.wrapperVer||"",this.telemetryCacheKey=cC+lC+n.clientId}generateCurrentRequestHeaderValue(){const n=`${this.apiId}${Ao}${this.cacheOutcome}`,a=[this.wrapperSKU,this.wrapperVer],o=this.getNativeBrokerErrorCode();o?.length&&a.push(`broker_error=${o}`);const r=a.join(Ao),d=this.getRegionDiscoveryFields(),h=[n,d].join(Ao);return[av,h,r].join(sv)}generateLastRequestHeaderValue(){const n=this.getLastRequests(),a=ll.maxErrorsToSend(n),o=n.failedRequests.slice(0,2*a).join(Ao),r=n.errors.slice(0,a).join(Ao),d=n.errors.length,h=a<d?WE:eA,f=[d,h].join(Ao);return[av,n.cacheHits,o,r,f].join(sv)}cacheFailedRequest(n){const a=this.getLastRequests();a.errors.length>=$E&&(a.failedRequests.shift(),a.failedRequests.shift(),a.errors.shift()),a.failedRequests.push(this.apiId,this.correlationId),n instanceof Error&&n&&n.toString()?n instanceof et?n.subError?a.errors.push(n.subError):n.errorCode?a.errors.push(n.errorCode):a.errors.push(n.toString()):a.errors.push(n.toString()):a.errors.push(tA),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,a,this.correlationId)}incrementCacheHits(){const n=this.getLastRequests();return n.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,n,this.correlationId),n.cacheHits}getLastRequests(){const n={failedRequests:[],errors:[],cacheHits:0};return this.cacheManager.getServerTelemetry(this.telemetryCacheKey,this.correlationId)||n}clearTelemetryCache(){const n=this.getLastRequests(),a=ll.maxErrorsToSend(n),o=n.errors.length;if(a===o)this.cacheManager.removeItem(this.telemetryCacheKey,this.correlationId);else{const r={failedRequests:n.failedRequests.slice(a*2),errors:n.errors.slice(a),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,r,this.correlationId)}}static maxErrorsToSend(n){let a,o=0,r=0;const d=n.errors.length;for(a=0;a<d;a++){const h=n.failedRequests[2*a]||"",f=n.failedRequests[2*a+1]||"",y=n.errors[a]||"";if(r+=h.toString().length+f.toString().length+y.length+3,r<ZE)o+=1;else break}return o}getRegionDiscoveryFields(){const n=[];return n.push(this.regionUsed||""),n.push(this.regionSource||""),n.push(this.regionOutcome||""),n.join(",")}updateRegionDiscoveryMetadata(n){this.regionUsed=n.region_used,this.regionSource=n.region_source,this.regionOutcome=n.region_outcome}setCacheOutcome(n){this.cacheOutcome=n}setNativeBrokerErrorCode(n){const a=this.getLastRequests();a.nativeBrokerErrorCode=n,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,a,this.correlationId)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){const n=this.getLastRequests();delete n.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,n,this.correlationId)}static makeExtraSkuString(n){return tw(n)}}class Xf extends et{constructor(n,a){super(n,a),this.name="JoseHeaderError",Object.setPrototypeOf(this,Xf.prototype)}}function _v(l){return new Xf(l)}const iw="missing_kid_error",aw="missing_alg_error";class Zf{constructor(n){this.typ=n.typ,this.alg=n.alg,this.kid=n.kid}static getShrHeaderString(n){if(!n.kid)throw _v(iw);if(!n.alg)throw _v(aw);const a=new Zf({typ:n.typ||rA.Pop,kid:n.kid,alg:n.alg});return JSON.stringify(a)}}function mu(l){return`See https://aka.ms/msal.js.errors#${l} for details`}class ml extends et{constructor(n,a){super(n,mu(n),a),Object.setPrototypeOf(this,ml.prototype),this.name="BrowserAuthError"}}function ee(l,n){return new ml(l,n)}const jn={INVALID_GRANT_ERROR:"invalid_grant",POPUP_WIDTH:483,POPUP_HEIGHT:600,POPUP_NAME_PREFIX:"msal",MSAL_SKU:"msal.js.browser"},Hn={CHANNEL_ID:"53ee284d-920a-4b59-9d30-a60315b26836",PREFERRED_EXTENSION_ID:"ppnbnpeolgkicgegkbkbjmhlideopiji",MATS_TELEMETRY:"MATS",MICROSOFT_ENTRA_BROKERID:"MicrosoftEntra",DOM_API_NAME:"DOM API",PLATFORM_DOM_APIS:"get-token-and-sign-out",PLATFORM_DOM_PROVIDER:"PlatformAuthDOMHandler",PLATFORM_EXTENSION_PROVIDER:"PlatformAuthExtensionHandler"},Zr={HandshakeRequest:"Handshake",HandshakeResponse:"HandshakeResponse",GetToken:"GetToken",Response:"Response"},Ln={LocalStorage:"localStorage",SessionStorage:"sessionStorage",MemoryStorage:"memoryStorage"},kv={GET:"GET",POST:"POST"},Ia={SIGNIN:"signin",SIGNOUT:"signout"},Et={ORIGIN_URI:"request.origin",URL_HASH:"urlHash",REQUEST_PARAMS:"request.params",VERIFIER:"code.verifier",INTERACTION_STATUS_KEY:"interaction.status",NATIVE_REQUEST:"request.native"},zc={WRAPPER_SKU:"wrapper.sku",WRAPPER_VER:"wrapper.version"},Le={acquireTokenRedirect:861,acquireTokenPopup:862,ssoSilent:863,acquireTokenSilent_authCode:864,handleRedirectPromise:865,acquireTokenByCode:866,acquireTokenSilent_silentFlow:61,logout:961,logoutPopup:962,hydrateCache:963,loadExternalTokens:964},Iv={861:"acquireTokenRedirect",862:"acquireTokenPopup",863:"ssoSilent",864:"acquireTokenSilent_authCode",865:"handleRedirectPromise",866:"acquireTokenByCode",61:"acquireTokenSilent_silentFlow",961:"logout",962:"logoutPopup",963:"hydrateCache",964:"loadExternalTokens"},sw=l=>typeof l=="number"&&l in Iv?Iv[l]:"unknown";var pe;(function(l){l.Redirect="redirect",l.Popup="popup",l.Silent="silent",l.None="none"})(pe||(pe={}));const Ov={scopes:jo},nS="jwk",df="msal.db",ow=1,rw=`${df}.keys`,Zt={Default:0,AccessToken:1,AccessTokenAndRefreshToken:2,RefreshToken:3,RefreshTokenAndNetwork:4,Skip:5},lw=[Zt.Default,Zt.Skip,Zt.RefreshTokenAndNetwork];function Lc(l){return encodeURIComponent(cl(l).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"))}function Da(l){return iS(l).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function cl(l){return iS(new TextEncoder().encode(l))}function iS(l){const n=Array.from(l,a=>String.fromCodePoint(a)).join("");return btoa(n)}const aS="pkce_not_created",sS="ear_jwk_empty",cw="ear_jwe_empty",Rv="crypto_nonexistent",$f="empty_navigate_uri",uw="hash_empty_error",Wf="no_state_in_hash",dw="hash_does_not_contain_known_properties",oS="unable_to_parse_state",hw="state_interaction_type_mismatch",fw="interaction_in_progress",gw="interaction_in_progress_cancelled",mw="popup_window_error",pw="empty_window_error",hf="user_cancelled",yw="redirect_bridge_empty_response",vw="redirect_in_iframe",Cw="block_iframe_reload",Sw="block_nested_popups",eg="silent_logout_unsupported",Tw="no_account_error",Ew="no_token_request_cache_error",Aw="unable_to_parse_token_request_cache_error",rS="non_browser_environment",$r="database_not_open",ff="no_network_connectivity",bw="post_request_failed",ww="get_request_failed",Nv="failed_to_parse_response",lS="crypto_key_not_found",_w="auth_code_required",kw="auth_code_or_nativeAccountId_required",Iw="spa_code_and_nativeAccountId_present",cS="database_unavailable",Ow="unable_to_acquire_token_from_native_platform",Rw="native_handshake_timeout",Nw="native_extension_not_installed",uS="native_connection_not_established",Pc="uninitialized_public_client_application",Mw="native_prompt_not_supported",xw="invalid_base64_string",Dw="invalid_pop_token_request",Uw="failed_to_build_headers",jw="failed_to_parse_headers",Fh="failed_to_decrypt_ear_response",nu="timed_out",Hw="empty_response";function An(l){return new TextDecoder().decode(Ma(l))}function Ma(l){let n=l.replace(/-/g,"+").replace(/_/g,"/");switch(n.length%4){case 0:break;case 2:n+="==";break;case 3:n+="=";break;default:throw ee(xw)}const a=atob(n);return Uint8Array.from(a,o=>o.codePointAt(0)||0)}const zw="RSASSA-PKCS1-v1_5",zo="AES-GCM",dS="HKDF",tg="SHA-256",Lw=2048,Bw=new Uint8Array([1,0,1]),Mv="0123456789abcdef",xv=new Uint32Array(1),ng="raw",hS="encrypt",ig="decrypt",Kw="deriveKey",Pw="crypto_subtle_undefined",ag={name:zw,hash:tg,modulusLength:Lw,publicExponent:Bw};function Gw(l){if(!window)throw ee(rS);if(!window.crypto)throw ee(Rv);if(!l&&!window.crypto.subtle)throw ee(Rv,Pw)}async function fS(l){const a=new TextEncoder().encode(l);return window.crypto.subtle.digest(tg,a)}function Vw(l){return window.crypto.getRandomValues(l)}function Yh(){return window.crypto.getRandomValues(xv),xv[0]}function bs(){const l=Date.now(),n=Yh()*1024+(Yh()&1023),a=new Uint8Array(16),o=Math.trunc(n/2**30),r=n&2**30-1,d=Yh();a[0]=l/2**40,a[1]=l/2**32,a[2]=l/2**24,a[3]=l/2**16,a[4]=l/2**8,a[5]=l,a[6]=112|o>>>8,a[7]=o,a[8]=128|r>>>24,a[9]=r>>>16,a[10]=r>>>8,a[11]=r,a[12]=d>>>24,a[13]=d>>>16,a[14]=d>>>8,a[15]=d;let h="";for(let f=0;f<a.length;f++)h+=Mv.charAt(a[f]>>>4),h+=Mv.charAt(a[f]&15),(f===3||f===5||f===7||f===9)&&(h+="-");return h}async function Fw(l,n){return window.crypto.subtle.generateKey(ag,l,n)}async function Qh(l){return window.crypto.subtle.exportKey(nS,l)}async function Yw(l,n,a){return window.crypto.subtle.importKey(nS,l,ag,n,a)}async function Qw(l,n){return window.crypto.subtle.sign(ag,l,n)}async function sg(){const l=await gS(),a={alg:"dir",kty:"oct",k:Da(new Uint8Array(l))};return cl(JSON.stringify(a))}async function qw(l){const n=An(l),o=JSON.parse(n).k,r=Ma(o);return window.crypto.subtle.importKey(ng,r,zo,!1,[ig])}async function Jw(l,n){const a=n.split(".");if(a.length!==5)throw ee(Fh,"jwe_length");const o=await qw(l).catch(()=>{throw ee(Fh,"import_key")});try{const r=new TextEncoder().encode(a[0]),d=Ma(a[2]),h=Ma(a[3]),f=Ma(a[4]),y=f.byteLength*8,p=new Uint8Array(h.length+f.length);p.set(h),p.set(f,h.length);const T=await window.crypto.subtle.decrypt({name:zo,iv:d,tagLength:y,additionalData:r},o,p);return new TextDecoder().decode(T)}catch{throw ee(Fh,"decrypt")}}async function gS(){const l=await window.crypto.subtle.generateKey({name:zo,length:256},!0,[hS,ig]);return window.crypto.subtle.exportKey(ng,l)}async function Dv(l){return window.crypto.subtle.importKey(ng,l,dS,!1,[Kw])}async function mS(l,n,a){return window.crypto.subtle.deriveKey({name:dS,salt:n,hash:tg,info:new TextEncoder().encode(a)},l,{name:zo,length:256},!1,[hS,ig])}async function Xw(l,n,a){const o=new TextEncoder().encode(n),r=window.crypto.getRandomValues(new Uint8Array(16)),d=await mS(l,r,a),h=await window.crypto.subtle.encrypt({name:zo,iv:new Uint8Array(12)},d,o);return{data:Da(new Uint8Array(h)),nonce:Da(r)}}async function Uv(l,n,a,o){const r=Ma(o),d=await mS(l,Ma(n),a),h=await window.crypto.subtle.decrypt({name:zo,iv:new Uint8Array(12)},d,r);return new TextDecoder().decode(h)}async function Zw(l){const n=await fS(l),a=new Uint8Array(n);return Da(a)}class og extends et{constructor(n,a){super(n,a),this.name="BrowserConfigurationAuthError",Object.setPrototypeOf(this,og.prototype)}}function rg(l){return new og(l,mu(l))}const pS="storage_not_supported",$w="in_mem_redirect_unavailable";function Ww(){const l=window.location.hash,n=window.location.search;let a=!1,o=!1,r="",d;if(l&&l.length>1){const T=l.charAt(0)==="#"?l.substring(1):l,S=new URLSearchParams(T);S.has("state")&&(a=!0,r=T,d=S)}if(n&&n.length>1){const T=n.charAt(0)==="?"?n.substring(1):n,S=new URLSearchParams(T);S.has("state")&&(o=!0,r=T,d=S)}if(a&&o){const T=n.charAt(0)==="?"?n.substring(1):n,S=l.charAt(0)==="#"?l.substring(1):l;r=`${T}${S}`,d=new URLSearchParams(r)}if(!r||!d)throw ee(Hw);const h=d.get("state");if(!h)throw ee(Wf);const{libraryState:f}=fl(An,h),{id:y,meta:p}=f;if(!y||!p)throw ee(oS,"missing_library_state");return{params:d,payload:r,urlHash:l,urlQuery:n,hasResponseInHash:a,hasResponseInQuery:o,libraryState:{id:y,meta:p}}}function yS(l){l.location.hash="",typeof l.history.replaceState=="function"&&l.history.replaceState(null,"",`${l.location.origin}${l.location.pathname}${l.location.search}`)}function e_(l){const n=l.split("#");n.shift(),window.location.hash=n.length>0?n.join("#"):""}function pu(){return window.parent!==window}function t_(){if(pu())return!1;try{const{libraryState:l}=Ww(),{meta:n}=l;return n.interactionType===pe.Popup}catch{return!1}}let Oa=null;function n_(l,n){Oa&&(l.verbose("18y01k",n),clearTimeout(Oa.timeoutId),Oa.channel.close(),Oa.reject(ee(gw)),Oa=null)}async function _o(l,n,a,o){return new Promise((r,d)=>{n.verbose("1rf6em",o.correlationId);const{libraryState:h}=fl(a.base64Decode,o.state||""),f=new BroadcastChannel(h.id);let y;const p=window.setTimeout(()=>{Oa=null,f.close(),d(ee(nu,"redirect_bridge_timeout"))},l);Oa={timeoutId:p,channel:f,reject:d},f.onmessage=T=>{y=T.data.payload,Oa=null,clearTimeout(p),f.close(),y?r(y):d(ee(yw))}})}function Ra(){return typeof window<"u"&&window.location?window.location.href.split("?")[0].split("#")[0]:""}function i_(){const n=new Ve(window.location.href).getUrlComponents();return`${n.Protocol}//${n.HostNameAndPort}/`}function a_(){if(Xc(window.location.hash)&&pu())throw ee(Cw)}function s_(l){if(pu()&&!l)throw ee(vw)}function o_(){if(t_())throw ee(Sw)}function vS(){if(typeof window>"u")throw ee(rS)}function CS(l){if(!l)throw ee(Pc)}function lg(l){vS(),a_(),o_(),CS(l)}function jv(l,n){if(lg(l),s_(n.system.allowRedirectInIframe),n.cache.cacheLocation===Ln.MemoryStorage)throw rg($w)}function SS(l){const n=document.createElement("link");n.rel="preconnect",n.href=new URL(l).origin,n.crossOrigin="anonymous",document.head.appendChild(n),window.setTimeout(()=>{try{document.head.removeChild(n)}catch{}},1e4)}function gf(){return bs()}const r_="acquireTokenFromCache",l_="acquireTokenByRefreshToken",c_="acquireTokenSilentAsync",u_="cryptoOptsGetPublicKeyThumbprint",d_="cryptoOptsSignJwt",h_="silentCacheClientAcquireToken",f_="silentIframeClientAcquireToken",g_="awaitConcurrentIframe",m_="silentRefreshClientAcquireToken",Ss="standardInteractionClientGetDiscoveredAuthority",TS="nativeInteractionClientAcquireToken",p_="refreshTokenClientAcquireTokenByRefreshToken",Hv="acquireTokenBySilentIframe",cg="initializeBaseRequest",y_="initializeSilentRequest",v_="initializeCache",zv="silentIframeClientTokenHelper",qh="silentHandlerInitiateAuthRequest",iu="silentHandlerMonitorIframeForHash",C_="silentHandlerLoadFrameSync",xa="standardInteractionClientCreateAuthCodeClient",yu="standardInteractionClientGetClientConfiguration",vu="standardInteractionClientInitializeAuthorizationRequest",S_="silentFlowClientAcquireCachedToken",T_="getStandardParams",E_="handleCodeResponse",ug="handleResponseEar",ES="handleResponsePlatformBroker",Ro="handleResponseCode",A_="authClientAcquireToken",tl="deserializeResponse",b_="authorityFactoryCreateDiscoveredInstance",w_="acquireTokenByCodeAsync",__="handleRedirectPromise",k_="handleNativeRedirectPromise",I_="nativeMessageHandlerHandshake",O_="importExistingCache",ws="generatePkceCodes",R_="generateCodeVerifier",N_="generateCodeChallengeFromVerifier",M_="sha256Digest",x_="getRandomValues",Lv="generateHKDF",D_="generateBaseKey",U_="base64Decode",j_="urlEncodeArr",H_="encrypt",Bv="decrypt",dg="generateEarKey",z_="decryptEarResponse";class L_{constructor(){this.dbName=df,this.version=ow,this.tableName=rw,this.dbOpen=!1}async open(){return new Promise((n,a)=>{const o=window.indexedDB.open(this.dbName,this.version);o.addEventListener("upgradeneeded",r=>{r.target.result.createObjectStore(this.tableName)}),o.addEventListener("success",r=>{const d=r;this.db=d.target.result,this.dbOpen=!0,n()}),o.addEventListener("error",()=>a(ee(cS)))})}closeConnection(){const n=this.db;n&&this.dbOpen&&(n.close(),this.dbOpen=!1)}async validateDbIsOpen(){if(!this.dbOpen)return this.open()}async getItem(n){return await this.validateDbIsOpen(),new Promise((a,o)=>{if(!this.db)return o(ee($r));const h=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).get(n);h.addEventListener("success",f=>{const y=f;this.closeConnection(),a(y.target.result)}),h.addEventListener("error",f=>{this.closeConnection(),o(f)})})}async setItem(n,a){return await this.validateDbIsOpen(),new Promise((o,r)=>{if(!this.db)return r(ee($r));const f=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).put(a,n);f.addEventListener("success",()=>{this.closeConnection(),o()}),f.addEventListener("error",y=>{this.closeConnection(),r(y)})})}async removeItem(n){return await this.validateDbIsOpen(),new Promise((a,o)=>{if(!this.db)return o(ee($r));const h=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).delete(n);h.addEventListener("success",()=>{this.closeConnection(),a()}),h.addEventListener("error",f=>{this.closeConnection(),o(f)})})}async getKeys(){return await this.validateDbIsOpen(),new Promise((n,a)=>{if(!this.db)return a(ee($r));const d=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).getAllKeys();d.addEventListener("success",h=>{const f=h;this.closeConnection(),n(f.target.result)}),d.addEventListener("error",h=>{this.closeConnection(),a(h)})})}async containsKey(n){return await this.validateDbIsOpen(),new Promise((a,o)=>{if(!this.db)return o(ee($r));const h=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).count(n);h.addEventListener("success",f=>{const y=f;this.closeConnection(),a(y.target.result===1)}),h.addEventListener("error",f=>{this.closeConnection(),o(f)})})}async deleteDatabase(){return this.db&&this.dbOpen&&this.closeConnection(),new Promise((n,a)=>{const o=window.indexedDB.deleteDatabase(df),r=setTimeout(()=>a(!1),200);o.addEventListener("success",()=>(clearTimeout(r),n(!0))),o.addEventListener("blocked",()=>(clearTimeout(r),n(!0))),o.addEventListener("error",()=>(clearTimeout(r),a(!1)))})}}class Cu{constructor(){this.cache=new Map}async initialize(){}getItem(n){return this.cache.get(n)||null}getUserData(n){return this.getItem(n)}setItem(n,a){this.cache.set(n,a)}async setUserData(n,a){this.setItem(n,a)}removeItem(n){this.cache.delete(n)}getKeys(){const n=[];return this.cache.forEach((a,o)=>{n.push(o)}),n}containsKey(n){return this.cache.has(n)}clear(){this.cache.clear()}decryptData(){return Promise.resolve(null)}}class B_{constructor(n){this.inMemoryCache=new Cu,this.indexedDBCache=new L_,this.logger=n}handleDatabaseAccessError(n,a){if(n instanceof ml&&n.errorCode===cS)this.logger.error("1wx7zz",a);else throw n}async getItem(n,a){const o=this.inMemoryCache.getItem(n);if(!o)try{return this.logger.verbose("0naxpl",a),await this.indexedDBCache.getItem(n)}catch(r){this.handleDatabaseAccessError(r,a)}return o}async setItem(n,a,o){this.inMemoryCache.setItem(n,a);try{await this.indexedDBCache.setItem(n,a)}catch(r){this.handleDatabaseAccessError(r,o)}}async removeItem(n,a){this.inMemoryCache.removeItem(n);try{await this.indexedDBCache.removeItem(n)}catch(o){this.handleDatabaseAccessError(o,a)}}async getKeys(n){const a=this.inMemoryCache.getKeys();if(a.length===0)try{return this.logger.verbose("1iqrbq",n),await this.indexedDBCache.getKeys()}catch(o){this.handleDatabaseAccessError(o,n)}return a}async containsKey(n,a){const o=this.inMemoryCache.containsKey(n);if(!o)try{return this.logger.verbose("03zl2j",a),await this.indexedDBCache.containsKey(n)}catch(r){this.handleDatabaseAccessError(r,a)}return o}clearInMemory(n){this.logger.verbose("03r21p",n),this.inMemoryCache.clear(),this.logger.verbose("0uksk1",n)}async clearPersistent(n){try{this.logger.verbose("0rdqut",n);const a=await this.indexedDBCache.deleteDatabase();return a&&this.logger.verbose("149ouc",n),a}catch(a){return this.handleDatabaseAccessError(a,n),!1}}}class Yi{constructor(n,a,o){this.logger=n,Gw(o??!1),this.cache=new B_(this.logger),this.performanceClient=a}createNewGuid(){return bs()}base64Encode(n){return cl(n)}base64Decode(n){return An(n)}base64UrlEncode(n){return Lc(n)}encodeKid(n){return this.base64UrlEncode(JSON.stringify({kid:n}))}async getPublicKeyThumbprint(n){const a=this.performanceClient?.startMeasurement(u_,n.correlationId),o=await Fw(Yi.EXTRACTABLE,Yi.POP_KEY_USAGES),r=await Qh(o.publicKey),d={e:r.e,kty:r.kty,n:r.n},h=Kv(d),f=await this.hashString(h),y=await Qh(o.privateKey),p=await Yw(y,!1,["sign"]);return await this.cache.setItem(f,{privateKey:p,publicKey:o.publicKey,requestMethod:n.resourceRequestMethod,requestUri:n.resourceRequestUri},n.correlationId),a&&a.end({success:!0}),f}async removeTokenBindingKey(n,a){if(await this.cache.removeItem(n,a),await this.cache.containsKey(n,a))throw Q(vb)}async clearKeystore(n){this.cache.clearInMemory(n);try{return await this.cache.clearPersistent(n),!0}catch(a){return a instanceof Error?this.logger.error("1owpn8",n):this.logger.error("0yrmwo",n),!1}}async signJwt(n,a,o,r){const d=this.performanceClient?.startMeasurement(d_,r),h=await this.cache.getItem(a,r||"");if(!h)throw ee(lS);const f=await Qh(h.publicKey),y=Kv(f),p=Lc(JSON.stringify({kid:a})),T=Zf.getShrHeaderString({...o?.header,alg:f.alg,kid:p}),S=Lc(T);n.cnf={jwk:JSON.parse(y)};const I=Lc(JSON.stringify(n)),x=`${S}.${I}`,Y=new TextEncoder().encode(x),ge=await Qw(h.privateKey,Y),Z=Da(new Uint8Array(ge)),ue=`${x}.${Z}`;return d&&d.end({success:!0}),ue}async hashString(n){return Zw(n)}}Yi.POP_KEY_USAGES=["sign","verify"];Yi.EXTRACTABLE=!0;function Kv(l){return JSON.stringify(l,Object.keys(l).sort())}const K_="acquireTokenSilent",P_="acquireTokenByCode",G_="acquireTokenPopup",V_="acquireTokenPreRedirect",Jh="acquireTokenRedirect",F_="ssoSilent",Y_="initializeClientApplication",Q_="localStorageUpdated";const Lt="msal",hg="browser",Pv="|",Vt=2,Gc=2,q_=`${Lt}.${hg}.log.level`,J_=`${Lt}.${hg}.log.pii`,X_=`${Lt}.${hg}.platform.auth.dom`,Gv=`${Lt}.version`,Vv="account.keys",Fv="token.keys";function No(l=Gc){return l<1?`${Lt}.${Vv}`:`${Lt}.${l}.${Vv}`}function Mo(l,n=Vt){return n<1?`${Lt}.${Fv}.${l}`:`${Lt}.${n}.${Fv}.${l}`}const Z_=1440*60*1e3,mf={Lax:"Lax",None:"None"};class AS{initialize(){return Promise.resolve()}getItem(n){const a=`${encodeURIComponent(n)}`,o=document.cookie.split(";");for(let r=0;r<o.length;r++){const d=o[r],[h,...f]=decodeURIComponent(d).trim().split("="),y=f.join("=");if(h===a)return y}return""}getUserData(){throw Q(Oe)}setItem(n,a,o,r=!0,d=mf.Lax){let h=`${encodeURIComponent(n)}=${encodeURIComponent(a)};path=/;SameSite=${d};`;if(o){const f=$_(o);h+=`expires=${f};`}(r||d===mf.None)&&(h+="Secure;"),document.cookie=h}async setUserData(){return Promise.reject(Q(Oe))}removeItem(n){this.setItem(n,"",-1)}getKeys(){const n=document.cookie.split(";"),a=[];return n.forEach(o=>{const r=decodeURIComponent(o).trim().split("=");a.push(r[0])}),a}containsKey(n){return this.getKeys().includes(n)}decryptData(){return Promise.resolve(null)}}function $_(l){const n=new Date;return new Date(n.getTime()+l*Z_).toUTCString()}function ka(l,n){const a=l.getItem(No(n));return a?JSON.parse(a):[]}function qn(l,n,a){const o=n.getItem(Mo(l,a));if(o){const r=JSON.parse(o);if(r&&r.hasOwnProperty("idToken")&&r.hasOwnProperty("accessToken")&&r.hasOwnProperty("refreshToken"))return r}return{idToken:[],accessToken:[],refreshToken:[]}}function Vc(l){return l.hasOwnProperty("id")&&l.hasOwnProperty("nonce")&&l.hasOwnProperty("data")}const Yv="msal.cache.encryption",W_="msal.broadcast.cache";class ek{constructor(n,a,o){if(!window.localStorage)throw rg(pS);this.memoryStorage=new Cu,this.initialized=!1,this.clientId=n,this.logger=a,this.performanceClient=o,this.broadcast=new BroadcastChannel(W_)}async initialize(n){const a=new AS,o=a.getItem(Yv);let r={key:"",id:""};if(o)try{r=JSON.parse(o)}catch{}if(r.key&&r.id){const d=Zn(Ma,U_,this.logger,this.performanceClient,n)(r.key);this.encryptionCookie={id:r.id,key:await K(Dv,Lv,this.logger,this.performanceClient,n)(d)}}else{const d=bs(),h=await K(gS,D_,this.logger,this.performanceClient,n)(),f=Zn(Da,j_,this.logger,this.performanceClient,n)(new Uint8Array(h));this.encryptionCookie={id:d,key:await K(Dv,Lv,this.logger,this.performanceClient,n)(h)};const y={id:d,key:f};a.setItem(Yv,JSON.stringify(y),0,!0,mf.None)}await K(this.importExistingCache.bind(this),O_,this.logger,this.performanceClient,n)(n),this.broadcast.addEventListener("message",d=>{this.updateCache(d,n)}),this.initialized=!0}getItem(n){return window.localStorage.getItem(n)}getUserData(n){if(!this.initialized)throw ee(Pc);return this.memoryStorage.getItem(n)}async decryptData(n,a,o){if(!this.initialized||!this.encryptionCookie)throw ee(Pc);if(a.id!==this.encryptionCookie.id)return this.performanceClient.incrementFields({encryptedCacheExpiredCount:1},o),null;const r=await K(Uv,Bv,this.logger,this.performanceClient,o)(this.encryptionCookie.key,a.nonce,this.getContext(n),a.data);if(!r)return null;try{return{...JSON.parse(r),lastUpdatedAt:a.lastUpdatedAt}}catch{return this.performanceClient.incrementFields({encryptedCacheCorruptionCount:1},o),null}}setItem(n,a){window.localStorage.setItem(n,a)}async setUserData(n,a,o,r,d){if(!this.initialized||!this.encryptionCookie)throw ee(Pc);if(d)this.setItem(n,a);else{const{data:h,nonce:f}=await K(Xw,H_,this.logger,this.performanceClient,o)(this.encryptionCookie.key,a,this.getContext(n)),y={id:this.encryptionCookie.id,nonce:f,data:h,lastUpdatedAt:r};this.setItem(n,JSON.stringify(y))}this.memoryStorage.setItem(n,a),this.broadcast.postMessage({key:n,value:a,context:this.getContext(n)})}removeItem(n){this.memoryStorage.containsKey(n)&&(this.memoryStorage.removeItem(n),this.broadcast.postMessage({key:n,value:null,context:this.getContext(n)})),window.localStorage.removeItem(n)}getKeys(){return Object.keys(window.localStorage)}containsKey(n){return window.localStorage.hasOwnProperty(n)}clear(){this.memoryStorage.clear(),ka(this).forEach(o=>this.removeItem(o));const a=qn(this.clientId,this);a.idToken.forEach(o=>this.removeItem(o)),a.accessToken.forEach(o=>this.removeItem(o)),a.refreshToken.forEach(o=>this.removeItem(o)),this.getKeys().forEach(o=>{(o.startsWith(Lt)||o.indexOf(this.clientId)!==-1)&&this.removeItem(o)})}async importExistingCache(n){if(!this.encryptionCookie)return;let a=ka(this);a=await this.importArray(a,n),a.length?this.setItem(No(),JSON.stringify(a)):this.removeItem(No());const o=qn(this.clientId,this);o.idToken=await this.importArray(o.idToken,n),o.accessToken=await this.importArray(o.accessToken,n),o.refreshToken=await this.importArray(o.refreshToken,n),o.idToken.length||o.accessToken.length||o.refreshToken.length?this.setItem(Mo(this.clientId),JSON.stringify(o)):this.removeItem(Mo(this.clientId))}async getItemFromEncryptedCache(n,a){if(!this.encryptionCookie)return null;const o=this.getItem(n);if(!o)return null;let r;try{r=JSON.parse(o)}catch{return null}return Vc(r)?r.id!==this.encryptionCookie.id?(this.performanceClient.incrementFields({encryptedCacheExpiredCount:1},a),null):(this.performanceClient.incrementFields({encryptedCacheCount:1},a),K(Uv,Bv,this.logger,this.performanceClient,a)(this.encryptionCookie.key,r.nonce,this.getContext(n),r.data)):(this.performanceClient.incrementFields({unencryptedCacheCount:1},a),o)}async importArray(n,a){const o=[],r=[];return n.forEach(d=>{const h=this.getItemFromEncryptedCache(d,a).then(f=>{f?(this.memoryStorage.setItem(d,f),o.push(d)):this.removeItem(d)});r.push(h)}),await Promise.all(r),o}getContext(n){let a="";return n.includes(this.clientId)&&(a=this.clientId),a}updateCache(n,a){this.logger.trace("17cxcm",a);const o=this.performanceClient.startMeasurement(Q_);o.add({isBackground:!0});const{key:r,value:d,context:h}=n.data;if(!r){this.logger.error("0e10qr",a),o.end({success:!1,errorCode:"noKey"});return}if(h&&h!==this.clientId){this.logger.trace("04rtdy",a),o.end({success:!1,errorCode:"contextMismatch"});return}d?(this.memoryStorage.setItem(r,d),this.logger.verbose("1vzsgt",a)):(this.memoryStorage.removeItem(r),this.logger.verbose("04ypih",a)),o.end({success:!0})}}class tk{constructor(){if(!window.sessionStorage)throw rg(pS)}async initialize(){}getItem(n){return window.sessionStorage.getItem(n)}getUserData(n){return this.getItem(n)}setItem(n,a){window.sessionStorage.setItem(n,a)}async setUserData(n,a){this.setItem(n,a)}removeItem(n){window.sessionStorage.removeItem(n)}getKeys(){return Object.keys(window.sessionStorage)}containsKey(n){return window.sessionStorage.hasOwnProperty(n)}decryptData(){return Promise.resolve(null)}}const ve={INITIALIZE_START:"msal:initializeStart",INITIALIZE_END:"msal:initializeEnd",ACTIVE_ACCOUNT_CHANGED:"msal:activeAccountChanged",LOGIN_SUCCESS:"msal:loginSuccess",ACQUIRE_TOKEN_START:"msal:acquireTokenStart",BROKERED_REQUEST_START:"msal:brokeredRequestStart",ACQUIRE_TOKEN_SUCCESS:"msal:acquireTokenSuccess",BROKERED_REQUEST_SUCCESS:"msal:brokeredRequestSuccess",ACQUIRE_TOKEN_FAILURE:"msal:acquireTokenFailure",BROKERED_REQUEST_FAILURE:"msal:brokeredRequestFailure",ACQUIRE_TOKEN_NETWORK_START:"msal:acquireTokenFromNetworkStart",HANDLE_REDIRECT_START:"msal:handleRedirectStart",HANDLE_REDIRECT_END:"msal:handleRedirectEnd",POPUP_OPENED:"msal:popupOpened",LOGOUT_START:"msal:logoutStart",LOGOUT_SUCCESS:"msal:logoutSuccess",LOGOUT_FAILURE:"msal:logoutFailure",LOGOUT_END:"msal:logoutEnd",RESTORE_FROM_BFCACHE:"msal:restoreFromBFCache",BROKER_CONNECTION_ESTABLISHED:"msal:brokerConnectionEstablished"};const nk="@azure/msal-browser",_s="5.3.0";function ba(l,n){const a=l.indexOf(n);a>-1&&l.splice(a,1)}class pf extends lf{constructor(n,a,o,r,d,h,f){super(n,o,r,d,f),this.cacheConfig=a,this.logger=r,this.internalStorage=new Cu,this.browserStorage=Qv(n,a.cacheLocation,r,d),this.temporaryCacheStorage=Qv(n,Ln.SessionStorage,r,d),this.cookieStorage=new AS,this.eventHandler=h}async initialize(n){this.performanceClient.addFields({cacheLocation:this.cacheConfig.cacheLocation,cacheRetentionDays:this.cacheConfig.cacheRetentionDays},n),await this.browserStorage.initialize(n),await this.migrateExistingCache(n),this.trackVersionChanges(n)}async migrateExistingCache(n){let a=ka(this.browserStorage),o=qn(this.clientId,this.browserStorage);this.performanceClient.addFields({preMigrateAcntCount:a.length,preMigrateATCount:o.accessToken.length,preMigrateITCount:o.idToken.length,preMigrateRTCount:o.refreshToken.length},n);for(let d=0;d<Gc;d++){const h=d;await this.removeStaleAccounts(d,h,n)}for(let d=0;d<Vt;d++){const h=d;await this.migrateIdTokens(d,h,n)}const r=this.getKMSIValues();for(let d=0;d<Vt;d++)await this.migrateAccessTokens(d,r,n),await this.migrateRefreshTokens(d,r,n);a=ka(this.browserStorage),o=qn(this.clientId,this.browserStorage),this.performanceClient.addFields({postMigrateAcntCount:a.length,postMigrateATCount:o.accessToken.length,postMigrateITCount:o.idToken.length,postMigrateRTCount:o.refreshToken.length},n)}async updateOldEntry(n,a){const o=this.browserStorage.getItem(n),r=this.validateAndParseJson(o||"");if(!r)return this.browserStorage.removeItem(n),null;if(!r.lastUpdatedAt)r.lastUpdatedAt=Date.now().toString(),this.setItem(n,JSON.stringify(r),a);else if(vv(r.lastUpdatedAt,this.cacheConfig.cacheRetentionDays))return this.browserStorage.removeItem(n),this.performanceClient.incrementFields({expiredCacheRemovedCount:1},a),null;const d=Vc(r)?await this.browserStorage.decryptData(n,r,a):r;return!d||!du(d)?(this.performanceClient.incrementFields({invalidCacheCount:1},a),null):(Tv(d)||Ev(d))&&d.expiresOn&&tu(d.expiresOn,dC)?(this.browserStorage.removeItem(n),this.performanceClient.incrementFields({expiredCacheRemovedCount:1},a),null):d}async removeStaleAccounts(n,a,o){const r=ka(this.browserStorage,n);if(r.length!==0){for(const d of[...r]){this.performanceClient.incrementFields({oldAcntCount:1},o);const h=this.browserStorage.getItem(d),f=this.validateAndParseJson(h||"");if(!f){ba(r,d);continue}if(f.lastUpdatedAt)vv(f.lastUpdatedAt,this.cacheConfig.cacheRetentionDays)&&(await this.removeAccountOldSchema(d,f,a,o),ba(r,d));else{f.lastUpdatedAt=Date.now().toString(),this.setItem(d,JSON.stringify(f),o);continue}}this.setAccountKeys(r,o,n)}}async removeAccountOldSchema(n,a,o,r){const h=(Vc(a)?await this.browserStorage.decryptData(n,a,r):a)?.homeAccountId;if(h){const f=this.getTokenKeys(o);[...f.idToken].filter(y=>y.includes(h)).forEach(y=>{this.browserStorage.removeItem(y),ba(f.idToken,y)}),[...f.accessToken].filter(y=>y.includes(h)).forEach(y=>{this.browserStorage.removeItem(y),ba(f.accessToken,y)}),[...f.refreshToken].filter(y=>y.includes(h)).forEach(y=>{this.browserStorage.removeItem(y),ba(f.refreshToken,y)}),this.setTokenKeys(f,r,o)}this.performanceClient.incrementFields({expiredAcntRemovedCount:1},r),this.browserStorage.removeItem(n)}getKMSIValues(){const n={},a=this.getTokenKeys().idToken;for(const o of a){const r=this.browserStorage.getUserData(o);if(r){const d=JSON.parse(r),h=Vi(d.secret,An);h&&(n[d.homeAccountId]=Cs(h))}}return n}async migrateIdTokens(n,a,o){const r=qn(this.clientId,this.browserStorage,n);if(r.idToken.length===0)return;const d=qn(this.clientId,this.browserStorage,Vt),h=ka(this.browserStorage),f=ka(this.browserStorage,a);for(const y of[...r.idToken]){this.performanceClient.incrementFields({oldITCount:1},o);const p=await this.updateOldEntry(y,o);if(!p){ba(r.idToken,y);continue}const T=h.find(ue=>ue.includes(p.homeAccountId)),S=f.find(ue=>ue.includes(p.homeAccountId));let I=null;if(T)I=this.getAccount(T,o);else if(S){const ue=this.browserStorage.getItem(S),ie=this.validateAndParseJson(ue||"");I=ie&&Vc(ie)?await this.browserStorage.decryptData(S,ie,o):ie}if(!I){this.performanceClient.incrementFields({skipITMigrateCount:1},o);continue}const x=Vi(p.secret,An),F=this.generateCredentialKey(p),Y=this.getIdTokenCredential(F,o),ge=Object.keys(x).includes("signin_state"),Z=Y&&Object.keys(Vi(Y.secret,An)||{}).includes("signin_state");if(!Y||p.lastUpdatedAt>Y.lastUpdatedAt&&(ge||!Z)){const ue=I.tenantProfiles||[],ie=Pf(x)||I.realm;if(ie&&!ue.find(W=>W.tenantId===ie)){const W=Ho(I.homeAccountId,I.localAccountId,ie,x);ue.push(W)}I.tenantProfiles=ue;const Ce=this.generateAccountKey(Es(I)),te=Cs(x);await this.setUserData(Ce,JSON.stringify(I),o,I.lastUpdatedAt,te),h.includes(Ce)||h.push(Ce),await this.setUserData(F,JSON.stringify(p),o,p.lastUpdatedAt,te),this.performanceClient.incrementFields({migratedITCount:1},o),d.idToken.push(F)}}this.setTokenKeys(r,o,n),this.setTokenKeys(d,o),this.setAccountKeys(h,o)}async migrateAccessTokens(n,a,o){const r=qn(this.clientId,this.browserStorage,n);if(r.accessToken.length===0)return;const d=qn(this.clientId,this.browserStorage,Vt);for(const h of[...r.accessToken]){this.performanceClient.incrementFields({oldATCount:1},o);const f=await this.updateOldEntry(h,o);if(!f){ba(r.accessToken,h);continue}if(!(f.homeAccountId in a)){this.performanceClient.incrementFields({skipATMigrateCount:1},o);continue}const y=this.generateCredentialKey(f),p=a[f.homeAccountId];if(!d.accessToken.includes(y))await this.setUserData(y,JSON.stringify(f),o,f.lastUpdatedAt,p),this.performanceClient.incrementFields({migratedATCount:1},o),d.accessToken.push(y);else{const T=this.getAccessTokenCredential(y,o);(!T||f.lastUpdatedAt>T.lastUpdatedAt)&&(await this.setUserData(y,JSON.stringify(f),o,f.lastUpdatedAt,p),this.performanceClient.incrementFields({migratedATCount:1},o))}}this.setTokenKeys(r,o,n),this.setTokenKeys(d,o)}async migrateRefreshTokens(n,a,o){const r=qn(this.clientId,this.browserStorage,n);if(r.refreshToken.length===0)return;const d=qn(this.clientId,this.browserStorage,Vt);for(const h of[...r.refreshToken]){this.performanceClient.incrementFields({oldRTCount:1},o);const f=await this.updateOldEntry(h,o);if(!f){ba(r.refreshToken,h);continue}if(!(f.homeAccountId in a)){this.performanceClient.incrementFields({skipRTMigrateCount:1},o);continue}const y=this.generateCredentialKey(f),p=a[f.homeAccountId];if(!d.refreshToken.includes(y))await this.setUserData(y,JSON.stringify(f),o,f.lastUpdatedAt,p),this.performanceClient.incrementFields({migratedRTCount:1},o),d.refreshToken.push(y);else{const T=this.getRefreshTokenCredential(y,o);(!T||f.lastUpdatedAt>T.lastUpdatedAt)&&(await this.setUserData(y,JSON.stringify(f),o,f.lastUpdatedAt,p),this.performanceClient.incrementFields({migratedRTCount:1},o))}}this.setTokenKeys(r,o,n),this.setTokenKeys(d,o)}trackVersionChanges(n){const a=this.browserStorage.getItem(Gv);a&&(this.logger.info("1wuc87",n),this.performanceClient.addFields({previousLibraryVersion:a},n)),a!==_s&&this.setItem(Gv,_s,n)}validateAndParseJson(n){if(!n)return null;try{const a=JSON.parse(n);return a&&typeof a=="object"?a:null}catch{return null}}setItem(n,a,o){const r=new Array(Vt+1).fill(0),d=[],h=20;for(let f=0;f<=h;f++)try{if(this.browserStorage.setItem(n,a),f>0)for(let y=0;y<=Vt;y++){const p=r.slice(0,y).reduce((S,I)=>S+I,0);if(p>=f)break;const T=f>p+r[y]?p+r[y]:f;f>p&&r[y]>0&&this.removeAccessTokenKeys(d.slice(p,T),o,y)}break}catch(y){const p=rf(y);if(p.errorCode===of&&f<h){if(!d.length)for(let T=0;T<=Vt;T++)if(n===Mo(this.clientId,T)){const S=JSON.parse(a).accessToken;d.push(...S),r[T]=S.length}else{const S=this.getTokenKeys(T).accessToken;d.push(...S),r[T]=S.length}if(d.length<=f)throw p;this.removeAccessToken(d[f],o,!1)}else throw p}}async setUserData(n,a,o,r,d){const h=new Array(Vt+1).fill(0),f=[],y=20;for(let p=0;p<=y;p++)try{if(await K(this.browserStorage.setUserData.bind(this.browserStorage),R0,this.logger,this.performanceClient,o)(n,a,o,r,d),p>0)for(let T=0;T<=Vt;T++){const S=h.slice(0,T).reduce((x,F)=>x+F,0);if(S>=p)break;const I=p>S+h[T]?S+h[T]:p;p>S&&h[T]>0&&this.removeAccessTokenKeys(f.slice(S,I),o,T)}break}catch(T){const S=rf(T);if(S.errorCode===of&&p<y){if(!f.length)for(let I=0;I<=Vt;I++){const x=this.getTokenKeys(I).accessToken;f.push(...x),h[I]=x.length}if(f.length<=p)throw S;this.removeAccessToken(f[p],o,!1)}else throw S}}getAccount(n,a){this.logger.trace("1lfvm6",a);const o=this.browserStorage.getUserData(n);if(!o)return this.removeAccountKeyFromMap(n,a),null;const r=this.validateAndParseJson(o);if(!r||!Qb(r))return null;const d=lf.toObject({},r);return this.performanceClient.addFields({accountCachedBy:sw(d.cachedByApiId)},a),d}async setAccount(n,a,o,r){this.logger.trace("1bz3wr",a);const d=this.generateAccountKey(Es(n)),h=Date.now().toString();n.lastUpdatedAt=h,n.cachedByApiId=r,await this.setUserData(d,JSON.stringify(n),a,h,o),this.addAccountKeyToMap(d,a),this.performanceClient.addFields({kmsi:o},a)}setAccountKeys(n,a,o=Gc){n.length===0?this.removeItem(No(o)):this.setItem(No(o),JSON.stringify(n),a)}getAccountKeys(){return ka(this.browserStorage)}addAccountKeyToMap(n,a){this.logger.trace("0rb85k",a),this.logger.tracePii("1l9bdo",a);const o=this.getAccountKeys();return o.indexOf(n)===-1?(o.push(n),this.setItem(No(),JSON.stringify(o),a),this.logger.verbose("0xia39",a),!0):(this.logger.verbose("0161kk",a),!1)}removeAccountKeyFromMap(n,a){this.logger.trace("1jpigu",a),this.logger.tracePii("1xzspl",a);const o=this.getAccountKeys(),r=o.indexOf(n);r>-1?(o.splice(r,1),this.setAccountKeys(o,a)):this.logger.trace("1dytu2",a)}removeAccount(n,a){const o=this.getActiveAccount(a);o?.homeAccountId===n.homeAccountId&&o?.environment===n.environment&&this.setActiveAccount(null,a),super.removeAccount(n,a),this.removeAccountKeyFromMap(this.generateAccountKey(n),a),this.browserStorage.getKeys().forEach(r=>{r.includes(n.homeAccountId)&&r.includes(n.environment)&&this.browserStorage.removeItem(r)})}removeIdToken(n,a){super.removeIdToken(n,a);const o=this.getTokenKeys(),r=o.idToken.indexOf(n);r>-1&&(this.logger.info("05udv9",a),o.idToken.splice(r,1),this.setTokenKeys(o,a))}removeAccessToken(n,a,o=!0){super.removeAccessToken(n,a),o&&this.removeAccessTokenKeys([n],a)}removeAccessTokenKeys(n,a,o=Vt){this.logger.trace("17o18n",a);const r=this.getTokenKeys(o);let d=0;if(n.forEach(h=>{const f=r.accessToken.indexOf(h);f>-1&&(r.accessToken.splice(f,1),d++)}),d>0){this.logger.info("15i5d5",a),this.setTokenKeys(r,a,o);return}}removeRefreshToken(n,a){super.removeRefreshToken(n,a);const o=this.getTokenKeys(),r=o.refreshToken.indexOf(n);r>-1&&(this.logger.info("1f4fq3",a),o.refreshToken.splice(r,1),this.setTokenKeys(o,a))}getTokenKeys(n=Vt){return qn(this.clientId,this.browserStorage,n)}setTokenKeys(n,a,o=Vt){if(n.idToken.length===0&&n.accessToken.length===0&&n.refreshToken.length===0){this.removeItem(Mo(this.clientId,o));return}else this.setItem(Mo(this.clientId,o),JSON.stringify(n),a)}getIdTokenCredential(n,a){const o=this.browserStorage.getUserData(n);if(!o)return this.logger.trace("1jukz6",a),this.removeIdToken(n,a),null;const r=this.validateAndParseJson(o);return!r||!D0(r)?(this.logger.trace("1jukz6",a),null):(this.logger.trace("01ju66",a),r)}async setIdTokenCredential(n,a,o){this.logger.trace("13hjll",a);const r=this.generateCredentialKey(n),d=Date.now().toString();n.lastUpdatedAt=d,await this.setUserData(r,JSON.stringify(n),a,d,o);const h=this.getTokenKeys();h.idToken.indexOf(r)===-1&&(this.logger.info("07jy92",a),h.idToken.push(r),this.setTokenKeys(h,a))}getAccessTokenCredential(n,a){const o=this.browserStorage.getUserData(n);if(!o)return this.logger.trace("0bqvx8",a),this.removeAccessTokenKeys([n],a),null;const r=this.validateAndParseJson(o);return!r||!Tv(r)?(this.logger.trace("0bqvx8",a),null):(this.logger.trace("1o81rl",a),r)}async setAccessTokenCredential(n,a,o){this.logger.trace("1pondb",a);const r=this.generateCredentialKey(n),d=Date.now().toString();n.lastUpdatedAt=d,await this.setUserData(r,JSON.stringify(n),a,d,o);const h=this.getTokenKeys(),f=h.accessToken.indexOf(r);f!==-1&&h.accessToken.splice(f,1),this.logger.trace("1onhey",a),h.accessToken.push(r),this.setTokenKeys(h,a)}getRefreshTokenCredential(n,a){const o=this.browserStorage.getUserData(n);if(!o)return this.logger.trace("0jlizt",a),this.removeRefreshToken(n,a),null;const r=this.validateAndParseJson(o);return!r||!Ev(r)?(this.logger.trace("0jlizt",a),null):(this.logger.trace("0nokxi",a),r)}async setRefreshTokenCredential(n,a,o){this.logger.trace("0tcg8d",a);const r=this.generateCredentialKey(n),d=Date.now().toString();n.lastUpdatedAt=d,await this.setUserData(r,JSON.stringify(n),a,d,o);const h=this.getTokenKeys();h.refreshToken.indexOf(r)===-1&&(this.logger.info("0eckjs",a),h.refreshToken.push(r),this.setTokenKeys(h,a))}getAppMetadata(n,a){const o=this.browserStorage.getItem(n);if(!o)return this.logger.trace("1q101h",a),null;const r=this.validateAndParseJson(o);return!r||!z0(n,r)?(this.logger.trace("1q101h",a),null):(this.logger.trace("19pvg2",a),r)}setAppMetadata(n,a){this.logger.trace("0cyma6",a);const o=H0(n);this.setItem(o,JSON.stringify(n),a)}getServerTelemetry(n,a){const o=this.browserStorage.getItem(n);if(!o)return this.logger.trace("0jk19c",a),null;const r=this.validateAndParseJson(o);return!r||!U0(n,r)?(this.logger.trace("0jk19c",a),null):(this.logger.trace("12jguk",a),r)}setServerTelemetry(n,a,o){this.logger.trace("1poh61",o),this.setItem(n,JSON.stringify(a),o)}getAuthorityMetadata(n,a){const o=this.internalStorage.getItem(n);if(!o)return this.logger.trace("1r39oe",a),null;const r=this.validateAndParseJson(o);return r&&L0(n,r)?(this.logger.trace("1ohvk3",a),r):null}getAuthorityMetadataKeys(){return this.internalStorage.getKeys().filter(a=>this.isAuthorityMetadata(a))}setWrapperMetadata(n,a){this.internalStorage.setItem(zc.WRAPPER_SKU,n),this.internalStorage.setItem(zc.WRAPPER_VER,a)}getWrapperMetadata(){const n=this.internalStorage.getItem(zc.WRAPPER_SKU)||"",a=this.internalStorage.getItem(zc.WRAPPER_VER)||"";return[n,a]}setAuthorityMetadata(n,a,o){this.logger.trace("07w8n2",o),this.internalStorage.setItem(n,JSON.stringify(a))}getActiveAccount(n){const a=this.generateCacheKey(iv.ACTIVE_ACCOUNT_FILTERS),o=this.browserStorage.getItem(a);if(!o)return this.logger.trace("08gw0e",n),null;const r=this.validateAndParseJson(o);return r?(this.logger.trace("1t3ch7",n),this.getAccountInfoFilteredBy({homeAccountId:r.homeAccountId,localAccountId:r.localAccountId,tenantId:r.tenantId},n)):(this.logger.trace("0me1up",n),null)}setActiveAccount(n,a){const o=this.generateCacheKey(iv.ACTIVE_ACCOUNT_FILTERS);if(n){this.logger.verbose("0rsj80",a);const r={homeAccountId:n.homeAccountId,localAccountId:n.localAccountId,tenantId:n.tenantId};this.setItem(o,JSON.stringify(r),a)}else this.logger.verbose("1bp5z5",a),this.browserStorage.removeItem(o);this.eventHandler.emitEvent(ve.ACTIVE_ACCOUNT_CHANGED,a)}getThrottlingCache(n,a){const o=this.browserStorage.getItem(n);if(!o)return this.logger.trace("1h4wa6",a),null;const r=this.validateAndParseJson(o);return!r||!j0(n,r)?(this.logger.trace("1h4wa6",a),null):(this.logger.trace("0of6n8",a),r)}setThrottlingCache(n,a,o){this.logger.trace("0wfgh6",o),this.setItem(n,JSON.stringify(a),o)}getTemporaryCache(n,a,o){const r=o?this.generateCacheKey(n):n,d=this.temporaryCacheStorage.getItem(r);if(!d){if(this.cacheConfig.cacheLocation===Ln.LocalStorage){const h=this.browserStorage.getItem(r);if(h)return this.logger.trace("1yt61y",a),h}return this.logger.trace("1qhy81",a),null}return d}setTemporaryCache(n,a,o){const r=o?this.generateCacheKey(n):n;this.temporaryCacheStorage.setItem(r,a)}removeItem(n){this.browserStorage.removeItem(n)}removeTemporaryItem(n){this.temporaryCacheStorage.removeItem(n)}getKeys(){return this.browserStorage.getKeys()}clear(n){this.removeAllAccounts(n),this.removeAppMetadata(n),this.temporaryCacheStorage.getKeys().forEach(a=>{(a.indexOf(Lt)!==-1||a.indexOf(this.clientId)!==-1)&&this.removeTemporaryItem(a)}),this.browserStorage.getKeys().forEach(a=>{(a.indexOf(Lt)!==-1||a.indexOf(this.clientId)!==-1)&&this.browserStorage.removeItem(a)}),this.internalStorage.clear()}generateCacheKey(n){return zn.startsWith(n,Lt)?n:`${Lt}.${this.clientId}.${n}`}generateCredentialKey(n){const a=n.credentialType===zt.REFRESH_TOKEN&&n.familyId||n.clientId,o=n.tokenType&&n.tokenType.toLowerCase()!==Je.BEARER.toLowerCase()?n.tokenType.toLowerCase():"";return[`${Lt}.${Vt}`,n.homeAccountId,n.environment,n.credentialType,a,n.realm||"",n.target||"",o].join(Pv).toLowerCase()}generateAccountKey(n){const a=n.homeAccountId.split(".")[1];return[`${Lt}.${Gc}`,n.homeAccountId,n.environment,a||n.tenantId||""].join(Pv).toLowerCase()}resetRequestCache(n){this.logger.trace("0h0ynu",n),this.removeTemporaryItem(this.generateCacheKey(Et.REQUEST_PARAMS)),this.removeTemporaryItem(this.generateCacheKey(Et.VERIFIER)),this.removeTemporaryItem(this.generateCacheKey(Et.ORIGIN_URI)),this.removeTemporaryItem(this.generateCacheKey(Et.URL_HASH)),this.removeTemporaryItem(this.generateCacheKey(Et.NATIVE_REQUEST)),this.setInteractionInProgress(!1,void 0)}cacheAuthorizeRequest(n,a,o){this.logger.trace("1tzef5",a);const r=cl(JSON.stringify(n));if(this.setTemporaryCache(Et.REQUEST_PARAMS,r,!0),o){const d=cl(o);this.setTemporaryCache(Et.VERIFIER,d,!0)}}getCachedRequest(n){this.logger.trace("0uen20",n);const a=this.getTemporaryCache(Et.REQUEST_PARAMS,n,!0);if(!a)throw ee(Ew);const o=this.getTemporaryCache(Et.VERIFIER,n,!0);let r,d="";try{r=JSON.parse(An(a)),o&&(d=An(o))}catch{throw this.logger.errorPii("0ewsey",n),this.logger.error("0tvdic",n),ee(Aw)}return[r,d]}getCachedNativeRequest(){this.logger.trace("1yxcdm","");const n=this.getTemporaryCache(Et.NATIVE_REQUEST,"",!0);if(!n)return this.logger.trace("0mnxd4",""),null;const a=this.validateAndParseJson(n);return a||(this.logger.error("0rrkip",""),null)}isInteractionInProgress(n){const a=this.getInteractionInProgress()?.clientId;return n?a===this.clientId:!!a}getInteractionInProgress(){const n=`${Lt}.${Et.INTERACTION_STATUS_KEY}`,a=this.getTemporaryCache(n,"",!1);try{return a?JSON.parse(a):null}catch{return this.logger.error("0jjyys",""),this.removeTemporaryItem(n),this.resetRequestCache(""),yS(window),null}}setInteractionInProgress(n,a=Ia.SIGNIN,o=!1,r=""){const d=`${Lt}.${Et.INTERACTION_STATUS_KEY}`;if(n){if(this.getInteractionInProgress())if(o)this.logger.warning("1pmscr",r),n_(this.logger,r),this.removeTemporaryItem(d);else throw ee(fw);this.setTemporaryCache(d,JSON.stringify({clientId:this.clientId,type:a}),!1)}else!n&&this.getInteractionInProgress()?.clientId===this.clientId&&this.removeTemporaryItem(d)}async hydrateCache(n,a){const o=Qf(n.account.homeAccountId,n.account.environment,n.idToken,this.clientId,n.tenantId),r=qf(n.account.homeAccountId,n.account.environment,n.accessToken,this.clientId,n.tenantId,n.scopes.join(" "),n.expiresOn?yv(n.expiresOn):0,n.extExpiresOn?yv(n.extExpiresOn):0,An,void 0,n.tokenType,void 0,a.sshKid),d={idToken:o,accessToken:r};return this.saveCacheRecord(d,n.correlationId,Cs(Vi(n.idToken,An)),Le.hydrateCache)}async saveCacheRecord(n,a,o,r,d){try{await super.saveCacheRecord(n,a,o,r,d)}catch(h){if(h instanceof Io&&this.performanceClient&&a)try{const f=this.getTokenKeys();this.performanceClient.addFields({cacheRtCount:f.refreshToken.length,cacheIdCount:f.idToken.length,cacheAtCount:f.accessToken.length},a)}catch{}throw h}}}function Qv(l,n,a,o){try{switch(n){case Ln.LocalStorage:return new ek(l,a,o);case Ln.SessionStorage:return new tk;case Ln.MemoryStorage:default:break}}catch(r){a.error(r,"")}return new Cu}const ik=(l,n,a,o)=>{const r={cacheLocation:Ln.MemoryStorage,cacheRetentionDays:5};return new pf(l,r,Zc,n,a,o)};function ak(l,n,a,o,r){return l.verbose("1yd030",o),a?n.getAllAccounts(r,o):[]}function sk(l,n,a,o){if(n.trace("0u7b90",o),Object.keys(l).length===0)return n.warning("1kz0cu",o),null;const r=a.getAccountInfoFilteredBy(l,o);return r?(n.verbose("0btgll",o),r):(n.verbose("0ltaj5",o),null)}function ok(l,n,a){n.setActiveAccount(l,a)}function rk(l,n){return l.getActiveAccount(n)}const lk="msal.broadcast.event";class ck{constructor(n){this.eventCallbacks=new Map,this.logger=n||new vi({}),typeof BroadcastChannel<"u"&&(this.broadcastChannel=new BroadcastChannel(lk)),this.invokeCrossTabCallbacks=this.invokeCrossTabCallbacks.bind(this)}addEventCallback(n,a,o){if(typeof window<"u"){const r=o||gf();return this.eventCallbacks.has(r)?(this.logger.error("1578i0",""),null):(this.eventCallbacks.set(r,[n,a||[]]),this.logger.verbose("1cnec4",""),r)}return null}removeEventCallback(n){this.eventCallbacks.delete(n),this.logger.verbose("12zotd","")}emitEvent(n,a,o,r,d){const h={eventType:n,interactionType:o||null,payload:r||null,error:d||null,correlationId:a,timestamp:Date.now()};switch(n){case ve.LOGIN_SUCCESS:case ve.LOGOUT_SUCCESS:case ve.ACTIVE_ACCOUNT_CHANGED:this.broadcastChannel?.postMessage(h)}this.invokeCallbacks(h)}invokeCallbacks(n){this.eventCallbacks.forEach(([a,o],r)=>{(o.length===0||o.includes(n.eventType))&&(this.logger.verbose("15jpwk",""),a.apply(null,[n]))})}invokeCrossTabCallbacks(n){const a=n.data;this.invokeCallbacks(a)}subscribeCrossTab(){this.broadcastChannel?.addEventListener("message",this.invokeCrossTabCallbacks)}unsubscribeCrossTab(){this.broadcastChannel?.removeEventListener("message",this.invokeCrossTabCallbacks)}}class bS{constructor(n,a,o,r,d,h,f,y,p){this.config=n,this.browserStorage=a,this.browserCrypto=o,this.networkClient=this.config.system.networkClient,this.eventHandler=d,this.navigationClient=h,this.platformAuthProvider=p,this.correlationId=y,this.logger=r.clone(jn.MSAL_SKU,_s),this.performanceClient=f}}function au(l,n,a,o){a.verbose("0bd1la",o);const r=l||n||"";return Ve.getAbsoluteUrl(r,Ra())}function hn(l,n,a,o,r,d){r.verbose("1p12tq",a);const h={clientId:n,correlationId:a,apiId:l,forceRefresh:!1,wrapperSKU:o.getWrapperMetadata()[0],wrapperVer:o.getWrapperMetadata()[1]};return new ll(h,o)}async function Fi(l,n,a,o,r,d,h,f,y){const p=f&&f.hasOwnProperty("instance_aware")?f.instance_aware:void 0,T={protocolMode:l.system.protocolMode,OIDCOptions:l.auth.OIDCOptions,knownAuthorities:l.auth.knownAuthorities,cloudDiscoveryMetadata:l.auth.cloudDiscoveryMetadata,authorityMetadata:l.auth.authorityMetadata},S=d||l.auth.authority,I=p?.length?p==="true":l.auth.instanceAware,x=y&&I?l.auth.authority.replace(Ve.getDomainFromUrl(S),y.environment):S,F=ln.generateAuthority(x,h||l.auth.azureCloudOptions),Y=await K($C,b_,r,a,n)(F,l.system.networkClient,o,T,r,n,a);if(y&&!Y.isAlias(y.environment))throw nt(tb);return Y}async function fg(l,n,a,o,r){if(r)try{l.removeAccount(r,o),a.verbose("0s4z6h",o)}catch{a.error("0mgg1d",o)}else try{a.verbose("0zj631",o),l.clear(o),await n.clearKeystore(o)}catch{a.error("12ih0c",o)}}async function gg(l,n,a,o,r){const d=l.authority||n.auth.authority,h=[...l&&l.scopes||[]],f={...l,correlationId:l.correlationId,authority:d,scopes:h};if(!f.authenticationScheme)f.authenticationScheme=Je.BEARER,o.verbose("1l4fwv",r);else{if(f.authenticationScheme===Je.SSH){if(!l.sshJwk)throw nt(If);if(!l.sshKid)throw nt($A)}o.verbose("1ecmns",r)}return f}async function uk(l,n,a,o,r){const d=await K(gg,cg,r,o,l.correlationId)(l,a,o,r,l.correlationId);return{...l,...d,account:n,forceRefresh:l.forceRefresh||!1}}function wS(l,n){let a;const o=l.httpMethod;if(n===dn.EAR){if(o&&o!==ko.POST)throw nt(nb);a=ko.POST}else a=o||ko.GET;return a}class Lo extends bS{initializeLogoutRequest(n){this.logger.verbose("0546u4",this.correlationId);const a={correlationId:this.correlationId,...n};if(n)if(n.logoutHint)this.logger.verbose("12k4l4",this.correlationId);else if(n.account){const o=this.getLogoutHintFromIdTokenClaims(n.account);o&&(this.logger.verbose("0st5di",this.correlationId),a.logoutHint=o)}else this.logger.verbose("0pdtc3",this.correlationId);else this.logger.verbose("07ndze",this.correlationId);return!n||n.postLogoutRedirectUri!==null?n&&n.postLogoutRedirectUri?(this.logger.verbose("1vamm6",a.correlationId),a.postLogoutRedirectUri=Ve.getAbsoluteUrl(n.postLogoutRedirectUri,Ra())):this.config.auth.postLogoutRedirectUri===null?this.logger.verbose("15m5g7",a.correlationId):this.config.auth.postLogoutRedirectUri?(this.logger.verbose("1f4xlz",a.correlationId),a.postLogoutRedirectUri=Ve.getAbsoluteUrl(this.config.auth.postLogoutRedirectUri,Ra())):(this.logger.verbose("17s5rf",a.correlationId),a.postLogoutRedirectUri=Ve.getAbsoluteUrl(Ra(),Ra())):this.logger.verbose("0ljv63",a.correlationId),a}getLogoutHintFromIdTokenClaims(n){const a=n.idTokenClaims;if(a){if(a.login_hint)return a.login_hint;this.logger.verbose("0mvp54",this.correlationId)}else this.logger.verbose("1e7bdp",this.correlationId);return null}async createAuthCodeClient(n){const a=await K(this.getClientConfiguration.bind(this),yu,this.logger,this.performanceClient,this.correlationId)(n);return new WC(a,this.performanceClient)}async getClientConfiguration(n){const{serverTelemetryManager:a,requestAuthority:o,requestAzureCloudOptions:r,requestExtraQueryParameters:d,account:h}=n,f=n.authority||await K(Fi,Ss,this.logger,this.performanceClient,this.correlationId)(this.config,this.correlationId,this.performanceClient,this.browserStorage,this.logger,o,r,d,h),y=this.config.system.loggerOptions;return{authOptions:{clientId:this.config.auth.clientId,authority:f,clientCapabilities:this.config.auth.clientCapabilities,redirectUri:this.config.auth.redirectUri},systemOptions:{tokenRenewalOffsetSeconds:this.config.system.tokenRenewalOffsetSeconds,preventCorsPreflight:!0},loggerOptions:{loggerCallback:y.loggerCallback,piiLoggingEnabled:y.piiLoggingEnabled,logLevel:y.logLevel,correlationId:this.correlationId},cryptoInterface:this.browserCrypto,networkInterface:this.networkClient,storageInterface:this.browserStorage,serverTelemetryManager:a,libraryInfo:{sku:jn.MSAL_SKU,version:_s,cpu:"",os:""},telemetry:this.config.telemetry}}}async function Su(l,n,a,o,r,d,h,f){const y=au(l.redirectUri,a.auth.redirectUri,d,f),p={interactionType:n},T=c0(o,l&&l.state||"",p),I={...await K(gg,cg,d,h,f)({...l,correlationId:f},a,h,d,f),redirectUri:y,state:T,nonce:l.nonce||bs(),responseMode:a.auth.OIDCOptions.responseMode},x={...I,httpMethod:wS(I,a.system.protocolMode)};if(l.loginHint||l.sid)return x;const F=l.account||r.getActiveAccount(f);return F&&(d.verbose("1eqlb3",f),d.verbosePii("0tf99t",f),x.account=F),x}function dk(l,n){if(!n)return null;try{return fl(l.base64Decode,n).libraryState.meta}catch{throw Q(ol)}}function nl(l,n,a,o){const r=Xc(l);if(!r)throw DC(l)?(a.error("13pl0s",o),a.errorPii("1097vx",o),ee(dw)):(a.error("18h0l1",o),ee(uw));return r}function hk(l,n,a){if(!l.state)throw ee(Wf);const o=dk(n,l.state);if(!o)throw ee(oS);if(o.interactionType!==a)throw ee(hw)}class _S{constructor(n,a,o,r,d){this.authModule=n,this.browserStorage=a,this.authCodeRequest=o,this.logger=r,this.performanceClient=d}async handleCodeResponse(n,a,o){let r;try{r=Z0(n,a.state)}catch(d){throw d instanceof Is&&d.subError===hf?ee(hf):d}return K(this.handleCodeResponseFromServer.bind(this),FC,this.logger,this.performanceClient,a.correlationId)(r,a,o)}async handleCodeResponseFromServer(n,a,o,r=!0){if(this.logger.trace("0mf2hb",a.correlationId),this.authCodeRequest.code=n.code,r&&(n.nonce=a.nonce||void 0),n.state=a.state,n.client_info)this.authCodeRequest.clientInfo=n.client_info;else{const h=this.createCcsCredentials(a);h&&(this.authCodeRequest.ccsCredential=h)}return await K(this.authModule.acquireToken.bind(this.authModule),A_,this.logger,this.performanceClient,a.correlationId)(this.authCodeRequest,o,n)}createCcsCredentials(n){return n.account?{credential:n.account.homeAccountId,type:Xn.HOME_ACCOUNT_ID}:n.loginHint?{credential:n.loginHint,type:Xn.UPN}:null}}const fk="ContentError",gk="PageException",mk="user_switch";const pk="USER_INTERACTION_REQUIRED",yk="USER_CANCEL",vk="NO_NETWORK",Ck="PERSISTENT_ERROR",Sk="DISABLED",Tk="ACCOUNT_UNAVAILABLE",Ek="UX_NOT_ALLOWED";const Ak=-2147186943;class pi extends et{constructor(n,a,o){super(n,a||mu(n)),Object.setPrototypeOf(this,pi.prototype),this.name="NativeAuthError",this.ext=o}}function wo(l){if(l.ext&&l.ext.status&&(l.ext.status===Ck||l.ext.status===Sk)||l.ext&&l.ext.error&&l.ext.error===Ak)return!0;switch(l.errorCode){case fk:case gk:return!0;default:return!1}}function su(l,n,a){if(a&&a.status)switch(a.status){case Tk:return eu(i0,mu(l));case pk:return new $n(l,n);case yk:return ee(hf);case vk:return ee(ff);case Ek:return eu(GC)}return new pi(l,n,a)}class kS extends Lo{async acquireToken(n){const a=hn(Le.acquireTokenSilent_silentFlow,this.config.auth.clientId,this.correlationId,this.browserStorage,this.logger),o=await K(this.getClientConfiguration.bind(this),yu,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:a,requestAuthority:n.authority,requestAzureCloudOptions:n.azureCloudOptions,account:n.account}),r=new q0(o,this.performanceClient);this.logger.verbose("0wa871",this.correlationId);try{const h=(await K(r.acquireCachedToken.bind(r),S_,this.logger,this.performanceClient,n.correlationId)(n))[0];return this.performanceClient.addFields({fromCache:!0},n.correlationId),h}catch(d){throw d instanceof ml&&d.errorCode===lS&&this.logger.verbose("06wena",this.correlationId),d}}logout(n){this.logger.verbose("1rkurh",this.correlationId);const a=this.initializeLogoutRequest(n);return fg(this.browserStorage,this.browserCrypto,this.logger,this.correlationId,a.account)}}class Fc extends bS{constructor(n,a,o,r,d,h,f,y,p,T,S,I){super(n,a,o,r,d,h,y,I,p),this.apiId=f,this.accountId=T,this.platformAuthProvider=p,this.nativeStorageManager=S,this.silentCacheClient=new kS(n,this.nativeStorageManager,o,r,d,h,y,I,p);const x=this.platformAuthProvider.getExtensionName();this.skus=ll.makeExtraSkuString({libraryName:jn.MSAL_SKU,libraryVersion:_s,extensionName:x,extensionVersion:this.platformAuthProvider.getExtensionVersion()})}addRequestSKUs(n){n.extraParameters={...n.extraParameters,[KA]:this.skus}}async acquireToken(n,a){this.logger.trace("03qeos",this.correlationId);const o=this.performanceClient.startMeasurement(TS,n.correlationId),r=Wn(),d=hn(this.apiId,this.config.auth.clientId,this.correlationId,this.browserStorage,this.logger);try{const h=await this.initializeNativeRequest(n);try{const y=await this.acquireTokensFromCache(this.accountId,h);return o.end({success:!0,isNativeBroker:!1,fromCache:!0}),y}catch(y){if(a===Zt.AccessToken)throw this.logger.info("0eitbc",this.correlationId),y;this.logger.info("0957j1",this.correlationId)}const f=await this.platformAuthProvider.sendMessage(h);return await this.handleNativeResponse(f,h,r).then(y=>(o.end({success:!0,isNativeBroker:!0,requestId:y.requestId}),d.clearNativeBrokerErrorCode(),y)).catch(y=>{throw o.end({success:!1,errorCode:y.errorCode,subErrorCode:y.subError,isNativeBroker:!0}),y})}catch(h){throw h instanceof pi&&d.setNativeBrokerErrorCode(h.errorCode),h}}createSilentCacheRequest(n,a){return{authority:n.authority,correlationId:this.correlationId,scopes:Ft.fromString(n.scope).asArray(),account:a,forceRefresh:!1}}async acquireTokensFromCache(n,a){if(!n)throw this.logger.warning("1ndf3e",this.correlationId),Q(cv);const o=this.browserStorage.getBaseAccountInfo({nativeAccountId:n},a.correlationId);if(!o)throw Q(cv);try{const r=this.createSilentCacheRequest(a,o),d=await this.silentCacheClient.acquireToken(r),h={...o,idTokenClaims:d?.idTokenClaims,idToken:d?.idToken};return{...d,account:h}}catch(r){throw r}}async acquireTokenRedirect(n,a,o){this.logger.trace("0luikq",this.correlationId);const r=await this.initializeNativeRequest(n),d=o?.navigateToLoginRequestUrl??!0;try{await this.platformAuthProvider.sendMessage(r)}catch(y){if(y instanceof pi&&(hn(this.apiId,this.config.auth.clientId,this.correlationId,this.browserStorage,this.logger).setNativeBrokerErrorCode(y.errorCode),wo(y)))throw y}this.browserStorage.setTemporaryCache(Et.NATIVE_REQUEST,JSON.stringify(r),!0);const h={apiId:Le.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},f=d?window.location.href:au(n.redirectUri,this.config.auth.redirectUri,this.logger,this.correlationId);a.end({success:!0}),await this.navigationClient.navigateExternal(f,h)}async handleRedirectPromise(n,a){if(this.logger.trace("1c5lhw",this.correlationId),!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("0le6uv",this.correlationId),null;const o=this.browserStorage.getCachedNativeRequest();if(!o)return this.logger.verbose("0a6zjb",this.correlationId),n&&a&&n?.addFields({errorCode:"no_cached_request"},a),null;const{prompt:r,...d}=o;r&&this.logger.verbose("0ac34v",this.correlationId),this.browserStorage.removeItem(this.browserStorage.generateCacheKey(Et.NATIVE_REQUEST));const h=Wn();try{this.logger.verbose("003x5a",this.correlationId);const f=await this.platformAuthProvider.sendMessage(d),y=await this.handleNativeResponse(f,d,h);return hn(this.apiId,this.config.auth.clientId,this.correlationId,this.browserStorage,this.logger).clearNativeBrokerErrorCode(),y}catch(f){throw f}}logout(){return this.logger.trace("0u2sjm",this.correlationId),Promise.reject("Logout not implemented yet")}async handleNativeResponse(n,a,o){this.logger.trace("1bojln",this.correlationId);const r=Vi(n.id_token,An),d=this.createHomeAccountIdentifier(n,r),h=this.browserStorage.getAccountInfoFilteredBy({nativeAccountId:a.accountId},this.correlationId)?.homeAccountId;if(a.extraParameters?.child_client_id&&n.account.id!==a.accountId)this.logger.info("1ub1in",this.correlationId);else if(d!==h&&n.account.id!==a.accountId)throw su(mk);const f=await Fi(this.config,this.correlationId,this.performanceClient,this.browserStorage,this.logger,a.authority),y=YC(this.browserStorage,f,d,An,this.correlationId,r,n.client_info,void 0,r.tid,void 0,n.account.id);n.expires_in=Number(n.expires_in);const p=await this.generateAuthenticationResult(n,a,r,y,f.canonicalAuthority,o);return await this.cacheAccount(y,Cs(r)),await this.cacheNativeTokens(n,a,d,r,n.access_token,p.tenantId,o),p}createHomeAccountIdentifier(n,a){return zC(n.client_info||"",Jn.Default,this.logger,this.browserCrypto,this.correlationId,a)}generateScopes(n,a){return a?Ft.fromString(a):Ft.fromString(n)}async generatePopAccessToken(n,a){if(a.tokenType===Je.POP&&a.signPopToken){if(n.shr)return this.logger.trace("0coqhu",this.correlationId),n.shr;const o=new Do(this.browserCrypto,this.performanceClient),r={resourceRequestMethod:a.resourceRequestMethod,resourceRequestUri:a.resourceRequestUri,shrClaims:a.shrClaims,shrNonce:a.shrNonce,correlationId:this.correlationId};if(!a.keyId)throw Q(bC);return o.signPopToken(n.access_token,a.keyId,r)}else return n.access_token}async generateAuthenticationResult(n,a,o,r,d,h){const f=this.addTelemetryFromNativeResponse(n.properties.MATS),y=this.generateScopes(a.scope,n.scope),p=n.account.properties||{},T=p.UID||o.oid||o.sub||"",S=p.TenantId||o.tid||"",I=Bf(Es(r),void 0,o,n.id_token);I.nativeAccountId!==n.account.id&&(I.nativeAccountId=n.account.id);const x=await this.generatePopAccessToken(n,a),F=a.tokenType===Je.POP?Je.POP:Je.BEARER;return{authority:d,uniqueId:T,tenantId:S,scopes:y.asArray(),account:I,idToken:n.id_token,idTokenClaims:o,accessToken:x,fromCache:f?this.isResponseFromCache(f):!1,expiresOn:Kc(h+n.expires_in),tokenType:F,correlationId:this.correlationId,state:n.state,fromPlatformBroker:!0}}async cacheAccount(n,a){await this.browserStorage.setAccount(n,this.correlationId,a,this.apiId),this.browserStorage.removeAccountContext(Es(n),this.correlationId)}cacheNativeTokens(n,a,o,r,d,h,f){const y=Qf(o,a.authority,n.id_token||"",a.clientId,r.tid||""),p=a.tokenType===Je.POP?Wy:(typeof n.expires_in=="string"?parseInt(n.expires_in,10):n.expires_in)||0,T=f+p,S=this.generateScopes(n.scope,a.scope),I=qf(o,a.authority,d,a.clientId,r.tid||h,S.printScopes(),T,0,An,void 0,a.tokenType,void 0,a.keyId),x={idToken:y,accessToken:I};return this.nativeStorageManager.saveCacheRecord(x,this.correlationId,Cs(r),this.apiId,a.storeInCache)}getExpiresInValue(n,a){return n===Je.POP?Wy:(typeof a=="string"?parseInt(a,10):a)||0}addTelemetryFromNativeResponse(n){const a=this.getMATSFromResponse(n);return a?(this.performanceClient.addFields({extensionId:this.platformAuthProvider.getExtensionId(),extensionVersion:this.platformAuthProvider.getExtensionVersion(),matsBrokerVersion:a.broker_version,matsAccountJoinOnStart:a.account_join_on_start,matsAccountJoinOnEnd:a.account_join_on_end,matsDeviceJoin:a.device_join,matsPromptBehavior:a.prompt_behavior,matsApiErrorCode:a.api_error_code,matsUiVisible:a.ui_visible,matsSilentCode:a.silent_code,matsSilentBiSubCode:a.silent_bi_sub_code,matsSilentMessage:a.silent_message,matsSilentStatus:a.silent_status,matsHttpStatus:a.http_status,matsHttpEventCount:a.http_event_count},this.correlationId),a):null}getMATSFromResponse(n){if(n)try{return JSON.parse(n)}catch{this.logger.error("0b3l57",this.correlationId)}return null}isResponseFromCache(n){return typeof n.is_cached>"u"?(this.logger.verbose("1okqev",this.correlationId),!1):!!n.is_cached}async initializeNativeRequest(n){this.logger.trace("04j6wj",this.correlationId);const a=await this.getCanonicalAuthority(n),{scopes:o,...r}=n,d=new Ft(o||[]);d.appendScopes(jo);const h={...r,accountId:this.accountId,clientId:this.config.auth.clientId,authority:a.urlString,scope:d.printScopes(),redirectUri:au(n.redirectUri,this.config.auth.redirectUri,this.logger,this.correlationId),prompt:this.getPrompt(n.prompt),correlationId:this.correlationId,tokenType:n.authenticationScheme,windowTitleSubstring:document.title,extraParameters:{...n.extraParameters},extendedExpiryToken:!1,keyId:n.popKid};if(h.signPopToken&&n.popKid)throw ee(Dw);if(this.handleExtraBrokerParams(h),h.extraParameters=h.extraParameters||{},h.extraParameters.telemetry=Hn.MATS_TELEMETRY,n.authenticationScheme===Je.POP){const f={resourceRequestUri:n.resourceRequestUri,resourceRequestMethod:n.resourceRequestMethod,shrClaims:n.shrClaims,shrNonce:n.shrNonce,correlationId:this.correlationId},y=new Do(this.browserCrypto,this.performanceClient);let p;if(h.keyId)p=this.browserCrypto.base64UrlEncode(JSON.stringify({kid:h.keyId})),h.signPopToken=!1;else{const T=await K(y.generateCnf.bind(y),gl,this.logger,this.performanceClient,this.correlationId)(f,this.logger);p=T.reqCnfString,h.keyId=T.kid,h.signPopToken=!0}h.reqCnf=p}return this.addRequestSKUs(h),h}async getCanonicalAuthority(n){const a=n.authority||this.config.auth.authority,{azureCloudOptions:o,account:r}=n;r&&await Fi(this.config,this.correlationId,this.performanceClient,this.browserStorage,this.logger,a,o,void 0,r);const d=new Ve(a);return d.validateAsUri(),d}getPrompt(n){switch(this.apiId){case Le.ssoSilent:case Le.acquireTokenSilent_silentFlow:return this.logger.trace("1hiwaz",this.correlationId),un.NONE}if(!n){this.logger.trace("1qlu04",this.correlationId);return}switch(n){case un.NONE:case un.CONSENT:case un.LOGIN:return this.logger.trace("1ynje4",this.correlationId),n;default:throw this.logger.trace("0nkr6q",this.correlationId),ee(Mw)}}handleExtraBrokerParams(n){const a=n.extraParameters&&n.extraParameters.hasOwnProperty(Qc)&&n.extraParameters.hasOwnProperty(qc)&&n.extraParameters.hasOwnProperty(Ts);if(!n.embeddedClientId&&!a)return;let o="";const r=n.redirectUri;n.embeddedClientId?(n.redirectUri=this.config.auth.redirectUri,o=n.embeddedClientId):n.extraParameters&&(n.redirectUri=n.extraParameters[qc],o=n.extraParameters[Ts]),n.extraParameters={child_client_id:o,child_redirect_uri:r},this.performanceClient?.addFields({embeddedClientId:o,embeddedRedirectUri:r},n.correlationId)}}async function mg(l,n,a,o,r){const d=X0({...l.auth,authority:n},a,o,r);if(Df(d,{sku:jn.MSAL_SKU,version:_s,os:"",cpu:""}),l.system.protocolMode!==dn.OIDC&&Uf(d,l.telemetry.application),a.platformBroker&&(Tb(d),a.authenticationScheme===Je.POP)){const h=new Yi(o,r),f=new Do(h,r);let y;a.popKid?y=h.encodeKid(a.popKid):y=(await K(f.generateCnf.bind(f),gl,o,r,a.correlationId)(a,o)).reqCnfString,zf(d,y)}return lu(d,a.correlationId,r),d}async function pg(l,n,a,o,r){if(!a.codeChallenge)throw nt(pC);const d=await K(mg,T_,o,r,a.correlationId)(l,n,a,o,r);return Of(d,Ef.CODE),jf(d,a.codeChallenge,Tf),yi(d,{...a.extraQueryParameters,...a.extraParameters}),Jf(n,d)}async function yg(l,n,a,o,r,d){if(!o.earJwk)throw ee(sS);const h=await mg(n,a,o,r,d);Of(h,Ef.IDTOKEN_TOKEN_REFRESHTOKEN),Mb(h,o.earJwk),jf(h,o.codeChallenge,Tf),yi(h,{...o.extraParameters});const f=new Map;yi(f,o.extraQueryParameters||{}),dl(f,o.correlationId);const y=Jf(a,f);return IS(l,y,h)}async function vg(l,n,a,o,r,d){const h=await mg(n,a,o,r,d);Of(h,Ef.CODE),jf(h,o.codeChallenge,o.codeChallengeMethod||Tf),yi(h,{...o.extraParameters});const f=new Map;yi(f,o.extraQueryParameters||{}),dl(f,o.correlationId);const y=Jf(a,f);return IS(l,y,h)}function IS(l,n,a){const o=l.createElement("form");return o.method="post",o.action=n,a.forEach((r,d)=>{const h=l.createElement("input");h.hidden=!0,h.name=d,h.value=r,o.appendChild(h)}),l.body.appendChild(o),o}async function OS(l,n,a,o,r,d,h,f,y,p){if(f.verbose("11qcow",l.correlationId),!p)throw ee(uS);const T=new Yi(f,y),S=new Fc(o,r,T,f,h,o.system.navigationClient,a,y,p,n,d,l.correlationId),{userRequestState:I}=fl(T.base64Decode,l.state);return K(S.acquireToken.bind(S),TS,f,y,l.correlationId)({...l,state:I,prompt:void 0})}async function xo(l,n,a,o,r,d,h,f,y,p,T,S){if(mi.removeThrottle(h,r.auth.clientId,l),n.accountId)return K(OS,ES,p,T,l.correlationId)(l,n.accountId,o,r,h,f,y,p,T,S);const I={...l,code:n.code||"",codeVerifier:a},x=new _S(d,h,I,p,T);return await K(x.handleCodeResponse.bind(x),E_,p,T,l.correlationId)(n,l,o)}async function Cg(l,n,a,o,r,d,h,f,y,p,T){if(mi.removeThrottle(d,o.auth.clientId,l),eS(n,l.state),!n.ear_jwe)throw ee(cw);if(!l.earJwk)throw ee(sS);const S=JSON.parse(await K(Jw,z_,y,p,l.correlationId)(l.earJwk,n.ear_jwe));if(S.accountId)return K(OS,ES,y,p,l.correlationId)(l,S.accountId,a,o,d,h,f,y,p,T);const I=new As(o.auth.clientId,d,new Yi(y,p),y,p,null,null);I.validateTokenResponse(S,l.correlationId);const x={code:"",state:l.state,nonce:l.nonce,client_info:S.client_info,cloud_graph_host_name:S.cloud_graph_host_name,cloud_instance_host_name:S.cloud_instance_host_name,cloud_instance_name:S.cloud_instance_name,msgraph_host:S.msgraph_host};return await K(I.handleServerTokenResponse.bind(I),Yf,y,p,l.correlationId)(S,r,Wn(),l,a,x,void 0,void 0,void 0,void 0)}const bk=32;async function ks(l,n,a){const o=Zn(wk,R_,n,l,a)(l,n,a),r=await K(_k,N_,n,l,a)(o,l,n,a);return{verifier:o,challenge:r}}function wk(l,n,a){try{const o=new Uint8Array(bk);return Zn(Vw,x_,n,l,a)(o),Da(o)}catch{throw ee(aS)}}async function _k(l,n,a,o){try{const r=await K(fS,M_,a,n,o)(l);return Da(new Uint8Array(r))}catch{throw ee(aS)}}class ou{navigateInternal(n,a){return ou.defaultNavigateWindow(n,a)}navigateExternal(n,a){return ou.defaultNavigateWindow(n,a)}static defaultNavigateWindow(n,a){return a.noHistory?window.location.replace(n):window.location.assign(n),new Promise((o,r)=>{setTimeout(()=>{r(ee(nu,"failed_to_redirect"))},a.timeout)})}}class kk{async sendGetRequestAsync(n,a){let o,r={},d=0;const h=qv(a);try{o=await fetch(n,{method:kv.GET,headers:h})}catch(f){throw Wr(ee(window.navigator.onLine?ww:ff),void 0,void 0,f)}r=Jv(o.headers);try{return d=o.status,{headers:r,body:await o.json(),status:d}}catch(f){throw Wr(ee(Nv),d,r,f)}}async sendPostRequestAsync(n,a){const o=a&&a.body||"",r=qv(a);let d,h=0,f={};try{d=await fetch(n,{method:kv.POST,headers:r,body:o})}catch(y){throw Wr(ee(window.navigator.onLine?bw:ff),void 0,void 0,y)}f=Jv(d.headers);try{return h=d.status,{headers:f,body:await d.json(),status:h}}catch(y){throw Wr(ee(Nv),h,f,y)}}}function qv(l){try{const n=new Headers;if(!(l&&l.headers))return n;const a=l.headers;return Object.entries(a).forEach(([o,r])=>{n.append(o,r)}),n}catch(n){throw Wr(ee(Uw),void 0,void 0,n)}}function Jv(l){try{const n={};return l.forEach((a,o)=>{n[o]=a}),n}catch{throw ee(jw)}}const Ik=6e4,Ok=1e4,Rk=3e4,RS=2e3;function Nk({auth:l,cache:n,system:a,telemetry:o},r){const d={clientId:"",authority:`${nC}`,knownAuthorities:[],cloudDiscoveryMetadata:"",authorityMetadata:"",redirectUri:typeof window<"u"&&window.location?window.location.href.split("?")[0].split("#")[0]:"",postLogoutRedirectUri:"",clientCapabilities:[],OIDCOptions:{responseMode:Af.FRAGMENT,defaultScopes:[aC,sC,Sf]},azureCloudOptions:{azureCloudInstance:Lf.None,tenant:""},instanceAware:!1},h={cacheLocation:Ln.SessionStorage,cacheRetentionDays:5},f={loggerCallback:()=>{},logLevel:rt.Info,piiLoggingEnabled:!1},p={...{...BC,loggerOptions:f,networkClient:r?new kk:J0,navigationClient:new ou,popupBridgeTimeout:a?.popupBridgeTimeout||Ik,iframeBridgeTimeout:a?.iframeBridgeTimeout||Ok,redirectNavigationTimeout:Rk,allowRedirectInIframe:!1,navigatePopups:!0,allowPlatformBroker:!1,nativeBrokerHandshakeTimeout:a?.nativeBrokerHandshakeTimeout||RS,protocolMode:dn.AAD},...a,loggerOptions:a?.loggerOptions||f},T={application:{appName:"",appVersion:""},client:new LC};if(a?.protocolMode!==dn.OIDC&&l?.OIDCOptions&&new vi(p.loggerOptions).warning(JSON.stringify(nt(WA)),""),a?.protocolMode&&a.protocolMode===dn.OIDC&&p?.allowPlatformBroker)throw nt(eb);return{auth:{...d,...l,OIDCOptions:{...d.OIDCOptions,...l?.OIDCOptions}},cache:{...h,...n},system:p,telemetry:{...T,...o}}}class ru{constructor(n,a,o,r){this.logger=n,this.handshakeTimeoutMs=a,this.extensionId=r,this.resolvers=new Map,this.handshakeResolvers=new Map,this.messageChannel=new MessageChannel,this.windowListener=this.onWindowMessage.bind(this),this.performanceClient=o,this.handshakeEvent=o.startMeasurement(I_),this.platformAuthType=Hn.PLATFORM_EXTENSION_PROVIDER}async sendMessage(n){this.logger.trace("0on4p2",n.correlationId);const a={method:Zr.GetToken,request:n},o={channel:Hn.CHANNEL_ID,extensionId:this.extensionId,responseId:bs(),body:a};this.logger.trace("1qadfi",n.correlationId),this.logger.tracePii("1xm533",n.correlationId),this.messageChannel.port1.postMessage(o);const r=await new Promise((h,f)=>{this.resolvers.set(o.responseId,{resolve:h,reject:f})});return this.validatePlatformBrokerResponse(r)}static async createProvider(n,a,o,r){n.trace("15zfnw",r);try{const d=new ru(n,a,o,Hn.PREFERRED_EXTENSION_ID);return await d.sendHandshakeRequest(r),d}catch{const h=new ru(n,a,o);return await h.sendHandshakeRequest(r),h}}async sendHandshakeRequest(n){this.logger.trace("1dpg9o",n),window.addEventListener("message",this.windowListener,!1);const a={channel:Hn.CHANNEL_ID,extensionId:this.extensionId,responseId:bs(),body:{method:Zr.HandshakeRequest}};return this.handshakeEvent.add({extensionId:this.extensionId,extensionHandshakeTimeoutMs:this.handshakeTimeoutMs}),this.messageChannel.port1.onmessage=o=>{this.onChannelMessage(o)},window.postMessage(a,window.origin,[this.messageChannel.port2]),new Promise((o,r)=>{this.handshakeResolvers.set(a.responseId,{resolve:o,reject:r}),this.timeoutId=window.setTimeout(()=>{window.removeEventListener("message",this.windowListener,!1),this.messageChannel.port1.close(),this.messageChannel.port2.close(),this.handshakeEvent.end({extensionHandshakeTimedOut:!0,success:!1}),r(ee(Rw)),this.handshakeResolvers.delete(a.responseId)},this.handshakeTimeoutMs)})}onWindowMessage(n){const a=gf();if(this.logger.trace("0jpn5u",a),n.source!==window)return;const o=n.data;if(!(!o.channel||o.channel!==Hn.CHANNEL_ID)&&!(o.extensionId&&o.extensionId!==this.extensionId)&&o.body.method===Zr.HandshakeRequest){const r=this.handshakeResolvers.get(o.responseId);if(!r){this.logger.trace("07buhm",a);return}this.logger.verbose(o.extensionId?"0xrkug":"No extension installed",a),clearTimeout(this.timeoutId),this.messageChannel.port1.close(),this.messageChannel.port2.close(),window.removeEventListener("message",this.windowListener,!1),this.handshakeEvent.end({success:!1,extensionInstalled:!1}),r.reject(ee(Nw))}}onChannelMessage(n){const a=gf();this.logger.trace("1py8yf",a);const o=n.data,r=this.resolvers.get(o.responseId),d=this.handshakeResolvers.get(o.responseId);try{const h=o.body.method;if(h===Zr.Response){if(!r)return;const f=o.body.response;if(this.logger.trace("19hpgm",a),this.logger.tracePii("179a24",a),f.status!=="Success")r.reject(su(f.code,f.description,f.ext));else if(f.result)f.result.code&&f.result.description?r.reject(su(f.result.code,f.result.description,f.result.ext)):r.resolve(f.result);else throw sf(uf,"Event does not contain result.");this.resolvers.delete(o.responseId)}else if(h===Zr.HandshakeResponse){if(!d){this.logger.trace("082qnt",a);return}clearTimeout(this.timeoutId),window.removeEventListener("message",this.windowListener,!1),this.extensionId=o.extensionId,this.extensionVersion=o.body.version,this.logger.verbose("0yf5ib",a),this.handshakeEvent.end({extensionInstalled:!0,success:!0}),d.resolve(),this.handshakeResolvers.delete(o.responseId)}}catch(h){this.logger.error("0xf978",a),this.logger.errorPii("04i99o",a),this.logger.errorPii("0xdvsy",a),r?r.reject(h):d&&d.reject(h)}}validatePlatformBrokerResponse(n){if(n.hasOwnProperty("access_token")&&n.hasOwnProperty("id_token")&&n.hasOwnProperty("client_info")&&n.hasOwnProperty("account")&&n.hasOwnProperty("scope")&&n.hasOwnProperty("expires_in"))return n;throw sf(uf,"Response missing expected properties.")}getExtensionId(){return this.extensionId}getExtensionVersion(){return this.extensionVersion}getExtensionName(){return this.getExtensionId()===Hn.PREFERRED_EXTENSION_ID?"chrome":this.getExtensionId()?.length?"unknown":void 0}}class Sg{constructor(n,a,o){this.logger=n,this.performanceClient=a,this.correlationId=o,this.platformAuthType=Hn.PLATFORM_DOM_PROVIDER}static async createProvider(n,a,o){if(n.trace("12mj4a",o),window.navigator?.platformAuthentication&&(await window.navigator.platformAuthentication.getSupportedContracts(Hn.MICROSOFT_ENTRA_BROKERID))?.includes(Hn.PLATFORM_DOM_APIS))return n.trace("1h5q1r",o),new Sg(n,a,o)}getExtensionId(){return Hn.MICROSOFT_ENTRA_BROKERID}getExtensionVersion(){return""}getExtensionName(){return Hn.DOM_API_NAME}async sendMessage(n){this.logger.trace("02bcil",n.correlationId);try{const a=this.initializePlatformDOMRequest(n),o=await window.navigator.platformAuthentication.executeGetToken(a);return this.validatePlatformBrokerResponse(o,n.correlationId)}catch(a){throw this.logger.error("11im7g",n.correlationId),a}}initializePlatformDOMRequest(n){this.logger.trace("15d6yv",n.correlationId);const{accountId:a,clientId:o,authority:r,scope:d,redirectUri:h,correlationId:f,state:y,storeInCache:p,embeddedClientId:T,extraParameters:S,...I}=n,x=this.getDOMExtraParams(I);return{accountId:a,brokerId:this.getExtensionId(),authority:r,clientId:o,correlationId:f||this.correlationId,extraParameters:{...S,...x},isSecurityTokenService:!1,redirectUri:h,scope:d,state:y,storeInCache:p,embeddedClientId:T}}validatePlatformBrokerResponse(n,a){if(n.hasOwnProperty("isSuccess")){if(n.hasOwnProperty("accessToken")&&n.hasOwnProperty("idToken")&&n.hasOwnProperty("clientInfo")&&n.hasOwnProperty("account")&&n.hasOwnProperty("scopes")&&n.hasOwnProperty("expiresIn"))return this.logger.trace("0h4vei",a),this.convertToPlatformBrokerResponse(n,a);if(n.hasOwnProperty("error")){const o=n;if(o.isSuccess===!1&&o.error&&o.error.code)throw this.logger.trace("0g92vm",a),su(o.error.code,o.error.description,{error:parseInt(o.error.errorCode),protocol_error:o.error.protocolError,status:o.error.status,properties:o.error.properties})}}throw sf(uf,"Response missing expected properties.")}convertToPlatformBrokerResponse(n,a){return this.logger.trace("14913t",a),{access_token:n.accessToken,id_token:n.idToken,client_info:n.clientInfo,account:n.account,expires_in:n.expiresIn,scope:n.scopes,state:n.state||"",properties:n.properties||{},extendedLifetimeToken:n.extendedLifetimeToken??!1,shr:n.proofOfPossessionPayload}}getDOMExtraParams(n){return{...Object.entries(n).reduce((r,[d,h])=>(r[d]=String(h),r),{})}}}async function Mk(l,n,a,o){l.trace("134j0v",a);const r=xk();l.trace("04c81g",a);let d;try{r&&(d=await Sg.createProvider(l,n,a)),d||(l.trace("0l3na8",a),d=await ru.createProvider(l,o||RS,n,a))}catch(h){l.trace("0icbd7",h)}return d}function xk(){let l;try{return l=window[Ln.SessionStorage],l?.getItem(X_)==="true"}catch{return!1}}function ul(l,n,a,o,r){if(n.trace("0uko3r",a),!l.system.allowPlatformBroker)return n.trace("04hozs",a),!1;if(!o)return n.trace("0kvv1r",a),!1;if(r)switch(r){case Je.BEARER:case Je.POP:return n.trace("18tev1",a),!0;default:return n.trace("1dd2nh",a),!1}return!0}class Dk extends Lo{constructor(n,a,o,r,d,h,f,y,p,T){super(n,a,o,r,d,h,f,p,T),this.nativeStorage=y,this.eventHandler=d}acquireToken(n,a){let o;try{if(o={popupName:this.generatePopupName(n.scopes||jo,n.authority||this.config.auth.authority),popupWindowAttributes:n.popupWindowAttributes||{},popupWindowParent:n.popupWindowParent??window},this.performanceClient.addFields({isAsyncPopup:!this.config.system.navigatePopups},this.correlationId),this.config.system.navigatePopups){const d={...n,httpMethod:wS(n,this.config.system.protocolMode)};return this.logger.verbose("1f9ok3",this.correlationId),o.popup=this.openSizedPopup("about:blank",o),this.acquireTokenPopupAsync(d,o,a)}else return this.logger.verbose("162h4u",this.correlationId),this.acquireTokenPopupAsync(n,o,a)}catch(r){return Promise.reject(r)}}logout(n){try{this.logger.verbose("068rup",this.correlationId);const a=this.initializeLogoutRequest(n),o={popupName:this.generateLogoutPopupName(a),popupWindowAttributes:n?.popupWindowAttributes||{},popupWindowParent:n?.popupWindowParent??window},r=n&&n.authority,d=n&&n.mainWindowRedirectUri;return this.config.system.navigatePopups?(this.logger.verbose("1a28da",this.correlationId),o.popup=this.openSizedPopup("about:blank",o),this.logoutPopupAsync(a,o,r,d)):(this.logger.verbose("1phd8u",this.correlationId),this.logoutPopupAsync(a,o,r,d))}catch(a){return Promise.reject(a)}}async acquireTokenPopupAsync(n,a,o){this.logger.verbose("1g77pg",this.correlationId);const r=await K(Su,vu,this.logger,this.performanceClient,this.correlationId)(n,pe.Popup,this.config,this.browserCrypto,this.browserStorage,this.logger,this.performanceClient,this.correlationId);a.popup&&SS(r.authority);const d=ul(this.config,this.logger,this.correlationId,this.platformAuthProvider,n.authenticationScheme);return r.platformBroker=d,this.config.system.protocolMode===dn.EAR?this.executeEarFlow(r,a,o):this.executeCodeFlow(r,a,o)}async executeCodeFlow(n,a,o){const r=n.correlationId,d=hn(Le.acquireTokenPopup,this.config.auth.clientId,this.correlationId,this.browserStorage,this.logger),h=o||await K(ks,ws,this.logger,this.performanceClient,r)(this.performanceClient,this.logger,r),f={...n,codeChallenge:h.challenge};try{const y=await K(this.createAuthCodeClient.bind(this),xa,this.logger,this.performanceClient,r)({serverTelemetryManager:d,requestAuthority:f.authority,requestAzureCloudOptions:f.azureCloudOptions,requestExtraQueryParameters:f.extraQueryParameters,account:f.account});if(f.httpMethod===ko.POST)return await this.executeCodeFlowWithPost(f,a,y,h.verifier);{const p=await K(pg,Ff,this.logger,this.performanceClient,r)(this.config,y.authority,f,this.logger,this.performanceClient),T=this.initiateAuthRequest(p,a);this.eventHandler.emitEvent(ve.POPUP_OPENED,r,pe.Popup,{popupWindow:T},null);const S=await _o(this.config.system.popupBridgeTimeout,this.logger,this.browserCrypto,n),I=Zn(nl,tl,this.logger,this.performanceClient,this.correlationId)(S,this.config.auth.OIDCOptions.responseMode,this.logger,this.correlationId);return await K(xo,Ro,this.logger,this.performanceClient,r)(n,I,h.verifier,Le.acquireTokenPopup,this.config,y,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}}catch(y){throw a.popup?.close(),y instanceof et&&(y.setCorrelationId(this.correlationId),d.cacheFailedRequest(y)),y}}async executeEarFlow(n,a,o){const{correlationId:r,authority:d,azureCloudOptions:h,extraQueryParameters:f,account:y}=n,p=await K(Fi,Ss,this.logger,this.performanceClient,r)(this.config,this.correlationId,this.performanceClient,this.browserStorage,this.logger,d,h,f,y),T=await K(sg,dg,this.logger,this.performanceClient,r)(),S=o||await K(ks,ws,this.logger,this.performanceClient,r)(this.performanceClient,this.logger,r),I={...n,earJwk:T,codeChallenge:S.challenge},x=a.popup||this.openPopup("about:blank",a);(await yg(x.document,this.config,p,I,this.logger,this.performanceClient)).submit();const Y=await K(_o,iu,this.logger,this.performanceClient,r)(this.config.system.popupBridgeTimeout,this.logger,this.browserCrypto,I),ge=Zn(nl,tl,this.logger,this.performanceClient,this.correlationId)(Y,this.config.auth.OIDCOptions.responseMode,this.logger,this.correlationId);if(!ge.ear_jwe&&ge.code){const Z=await K(this.createAuthCodeClient.bind(this),xa,this.logger,this.performanceClient,r)({serverTelemetryManager:hn(Le.acquireTokenPopup,this.config.auth.clientId,r,this.browserStorage,this.logger),requestAuthority:n.authority,requestAzureCloudOptions:n.azureCloudOptions,requestExtraQueryParameters:n.extraQueryParameters,account:n.account,authority:p});return K(xo,Ro,this.logger,this.performanceClient,r)(I,ge,S.verifier,Le.acquireTokenPopup,this.config,Z,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}else return K(Cg,ug,this.logger,this.performanceClient,r)(I,ge,Le.acquireTokenPopup,this.config,p,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async executeCodeFlowWithPost(n,a,o,r){const d=n.correlationId,h=await K(Fi,Ss,this.logger,this.performanceClient,d)(this.config,this.correlationId,this.performanceClient,this.browserStorage,this.logger),f=a.popup||this.openPopup("about:blank",a);(await vg(f.document,this.config,h,n,this.logger,this.performanceClient)).submit();const p=await K(_o,iu,this.logger,this.performanceClient,d)(this.config.system.popupBridgeTimeout,this.logger,this.browserCrypto,n),T=Zn(nl,tl,this.logger,this.performanceClient,this.correlationId)(p,this.config.auth.OIDCOptions.responseMode,this.logger,this.correlationId);return K(xo,Ro,this.logger,this.performanceClient,d)(n,T,r,Le.acquireTokenPopup,this.config,o,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async logoutPopupAsync(n,a,o,r){this.logger.verbose("0b7yrk",this.correlationId),this.eventHandler.emitEvent(ve.LOGOUT_START,this.correlationId,pe.Popup,n);const d=hn(Le.logoutPopup,this.config.auth.clientId,this.correlationId,this.browserStorage,this.logger);try{await fg(this.browserStorage,this.browserCrypto,this.logger,this.correlationId,n.account);const h=await K(this.createAuthCodeClient.bind(this),xa,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:d,requestAuthority:o,account:n.account||void 0});try{h.authority.endSessionEndpoint}catch{if(n.account?.homeAccountId&&n.postLogoutRedirectUri&&h.authority.protocolMode===dn.OIDC){if(this.eventHandler.emitEvent(ve.LOGOUT_SUCCESS,n.correlationId,pe.Popup,n),r){const p={apiId:Le.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},T=Ve.getAbsoluteUrl(r,Ra());await this.navigationClient.navigateInternal(T,p)}a.popup?.close();return}}const f=h.getLogoutUri(n);this.eventHandler.emitEvent(ve.LOGOUT_SUCCESS,n.correlationId,pe.Popup,n);const y=this.openPopup(f,a);if(this.eventHandler.emitEvent(ve.POPUP_OPENED,n.correlationId,pe.Popup,{popupWindow:y},null),await _o(this.config.system.popupBridgeTimeout,this.logger,this.browserCrypto,n).catch(()=>{}),r){const p={apiId:Le.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},T=Ve.getAbsoluteUrl(r,Ra());this.logger.verbose("0qcur2",this.correlationId),this.logger.verbosePii("0oj7lk",this.correlationId),await this.navigationClient.navigateInternal(T,p)}else this.logger.verbose("03zgcf",this.correlationId)}catch(h){throw a.popup?.close(),h instanceof et&&(h.setCorrelationId(this.correlationId),d.cacheFailedRequest(h)),this.eventHandler.emitEvent(ve.LOGOUT_FAILURE,this.correlationId,pe.Popup,null,h),this.eventHandler.emitEvent(ve.LOGOUT_END,this.correlationId,pe.Popup),h}this.eventHandler.emitEvent(ve.LOGOUT_END,this.correlationId,pe.Popup)}initiateAuthRequest(n,a){if(n)return this.logger.infoPii("1kcr9k",this.correlationId),this.openPopup(n,a);throw this.logger.error("1l7hyp",this.correlationId),ee($f)}openPopup(n,a){try{let o;if(a.popup?(o=a.popup,this.logger.verbosePii("0cgeo7",this.correlationId),o.location.assign(n)):typeof a.popup>"u"&&(this.logger.verbosePii("0c2awd",this.correlationId),o=this.openSizedPopup(n,a)),!o)throw ee(pw);return o.focus&&o.focus(),this.currentWindow=o,o}catch{throw this.logger.error("0dxfb9",this.correlationId),ee(mw)}}openSizedPopup(n,{popupName:a,popupWindowAttributes:o,popupWindowParent:r}){const d=r.screenLeft?r.screenLeft:r.screenX,h=r.screenTop?r.screenTop:r.screenY,f=r.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,y=r.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;let p=o.popupSize?.width,T=o.popupSize?.height,S=o.popupPosition?.top,I=o.popupPosition?.left;return(!p||p<0||p>f)&&(this.logger.verbose("08vfmo",this.correlationId),p=jn.POPUP_WIDTH),(!T||T<0||T>y)&&(this.logger.verbose("09cxa0",this.correlationId),T=jn.POPUP_HEIGHT),(!S||S<0||S>y)&&(this.logger.verbose("1qh4wo",this.correlationId),S=Math.max(0,y/2-jn.POPUP_HEIGHT/2+h)),(!I||I<0||I>f)&&(this.logger.verbose("1sz3en",this.correlationId),I=Math.max(0,f/2-jn.POPUP_WIDTH/2+d)),r.open(n,a,`width=${p}, height=${T}, top=${S}, left=${I}, scrollbars=yes`)}generatePopupName(n,a){return`${jn.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${n.join("-")}.${a}.${this.correlationId}`}generateLogoutPopupName(n){const a=n.account&&n.account.homeAccountId;return`${jn.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${a}.${this.correlationId}`}}function Uk(){if(typeof window>"u"||typeof window.performance>"u"||typeof window.performance.getEntriesByType!="function")return;const l=window.performance.getEntriesByType("navigation");return(l.length?l[0]:void 0)?.type}class jk extends Lo{constructor(n,a,o,r,d,h,f,y,p,T){super(n,a,o,r,d,h,f,p,T),this.nativeStorage=y}async acquireToken(n){const a=await K(Su,vu,this.logger,this.performanceClient,this.correlationId)(n,pe.Redirect,this.config,this.browserCrypto,this.browserStorage,this.logger,this.performanceClient,this.correlationId);a.platformBroker=ul(this.config,this.logger,this.correlationId,this.platformAuthProvider,n.authenticationScheme);const o=d=>{d.persisted&&(this.logger.verbose("0udvtt",this.correlationId),this.browserStorage.resetRequestCache(this.correlationId),this.eventHandler.emitEvent(ve.RESTORE_FROM_BFCACHE,this.correlationId,pe.Redirect))},r=this.getRedirectStartPage(n.redirectStartPage);this.logger.verbosePii("0zao0a",this.correlationId),this.browserStorage.setTemporaryCache(Et.ORIGIN_URI,r,!0),window.addEventListener("pageshow",o);try{this.config.system.protocolMode===dn.EAR?await this.executeEarFlow(a):await this.executeCodeFlow(a)}catch(d){throw d instanceof et&&d.setCorrelationId(this.correlationId),window.removeEventListener("pageshow",o),d}}async executeCodeFlow(n){const a=n.correlationId,o=hn(Le.acquireTokenRedirect,this.config.auth.clientId,this.correlationId,this.browserStorage,this.logger),r=await K(ks,ws,this.logger,this.performanceClient,a)(this.performanceClient,this.logger,a),d={...n,codeChallenge:r.challenge};this.browserStorage.cacheAuthorizeRequest(d,this.correlationId,r.verifier);try{if(d.httpMethod===ko.POST)return await this.executeCodeFlowWithPost(d);{const h=await K(this.createAuthCodeClient.bind(this),xa,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:o,requestAuthority:d.authority,requestAzureCloudOptions:d.azureCloudOptions,requestExtraQueryParameters:d.extraQueryParameters,account:d.account}),f=await K(pg,Ff,this.logger,this.performanceClient,n.correlationId)(this.config,h.authority,d,this.logger,this.performanceClient);return await this.initiateAuthRequest(f)}}catch(h){throw h instanceof et&&(h.setCorrelationId(this.correlationId),o.cacheFailedRequest(h)),h}}async executeEarFlow(n){const{correlationId:a,authority:o,azureCloudOptions:r,extraQueryParameters:d,account:h}=n,f=await K(Fi,Ss,this.logger,this.performanceClient,a)(this.config,this.correlationId,this.performanceClient,this.browserStorage,this.logger,o,r,d,h),y=await K(sg,dg,this.logger,this.performanceClient,a)(),p=await K(ks,ws,this.logger,this.performanceClient,a)(this.performanceClient,this.logger,a),T={...n,earJwk:y,codeChallenge:p.challenge};return this.browserStorage.cacheAuthorizeRequest(T,this.correlationId,p.verifier),(await yg(document,this.config,f,T,this.logger,this.performanceClient)).submit(),new Promise((I,x)=>{setTimeout(()=>{x(ee(nu,"failed_to_redirect"))},this.config.system.redirectNavigationTimeout)})}async executeCodeFlowWithPost(n){const a=n.correlationId,o=await K(Fi,Ss,this.logger,this.performanceClient,a)(this.config,this.correlationId,this.performanceClient,this.browserStorage,this.logger);return this.browserStorage.cacheAuthorizeRequest(n,this.correlationId),(await vg(document,this.config,o,n,this.logger,this.performanceClient)).submit(),new Promise((d,h)=>{setTimeout(()=>{h(ee(nu,"failed_to_redirect"))},this.config.system.redirectNavigationTimeout)})}async handleRedirectPromise(n,a,o,r){const d=hn(Le.handleRedirectPromise,this.config.auth.clientId,this.correlationId,this.browserStorage,this.logger),h=r?.navigateToLoginRequestUrl??!0;try{const[f,y]=this.getRedirectResponse(r?.hash||"");if(!f)return this.logger.info("1qmv0q",this.correlationId),this.browserStorage.resetRequestCache(this.correlationId),Uk()!=="back_forward"?o.event.errorCode="no_server_response":this.logger.verbose("1eqegq",this.correlationId),null;const p=this.browserStorage.getTemporaryCache(Et.ORIGIN_URI,this.correlationId,!0)||"",T=hv(p),S=hv(window.location.href);if(T===S&&h)return this.logger.verbose("11yred",this.correlationId),p.indexOf("#")>-1&&e_(p),await this.handleResponse(f,n,a,d);if(h){if(!pu()||this.config.system.allowRedirectInIframe){this.browserStorage.setTemporaryCache(Et.URL_HASH,y,!0);const I={apiId:Le.handleRedirectPromise,timeout:this.config.system.redirectNavigationTimeout,noHistory:!0};let x=!0;if(!p||p==="null"){const F=i_();this.browserStorage.setTemporaryCache(Et.ORIGIN_URI,F,!0),this.logger.warning("1dutq1",this.correlationId),x=await this.navigationClient.navigateInternal(F,I)}else this.logger.verbose("08jpy1",this.correlationId),x=await this.navigationClient.navigateInternal(p,I);if(!x)return await this.handleResponse(f,n,a,d)}}else return this.logger.verbose("0v4sdv",this.correlationId),await this.handleResponse(f,n,a,d);return null}catch(f){throw f instanceof et&&(f.setCorrelationId(this.correlationId),d.cacheFailedRequest(f)),f}}getRedirectResponse(n){this.logger.verbose("1c5i8m",this.correlationId);let a=n;a||(this.config.auth.OIDCOptions.responseMode===Af.QUERY?a=window.location.search:a=window.location.hash);let o=Xc(a);if(o){try{hk(o,this.browserCrypto,pe.Redirect)}catch(d){return d instanceof et&&this.logger.error("0bkq6p",this.correlationId),[null,""]}return yS(window),this.logger.verbose("00uvho",this.correlationId),[o,a]}const r=this.browserStorage.getTemporaryCache(Et.URL_HASH,this.correlationId,!0);return this.browserStorage.removeItem(this.browserStorage.generateCacheKey(Et.URL_HASH)),r&&(o=Xc(r),o)?(this.logger.verbose("001671",this.correlationId),[o,r]):[null,""]}async handleResponse(n,a,o,r){if(!n.state)throw ee(Wf);const{authority:h,azureCloudOptions:f,extraQueryParameters:y,account:p}=a;if(n.ear_jwe){const S=await K(Fi,Ss,this.logger,this.performanceClient,a.correlationId)(this.config,this.correlationId,this.performanceClient,this.browserStorage,this.logger,h,f,y,p);return K(Cg,ug,this.logger,this.performanceClient,a.correlationId)(a,n,Le.acquireTokenRedirect,this.config,S,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}const T=await K(this.createAuthCodeClient.bind(this),xa,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:r,requestAuthority:a.authority});return K(xo,Ro,this.logger,this.performanceClient,a.correlationId)(a,n,o,Le.acquireTokenRedirect,this.config,T,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async initiateAuthRequest(n){if(this.logger.verbose("0yaw2e",this.correlationId),n){this.logger.infoPii("1luf83",this.correlationId);const a={apiId:Le.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},o=this.config.auth.onRedirectNavigate;if(typeof o=="function")if(this.logger.verbose("1nehvl",this.correlationId),o(n)!==!1){this.logger.verbose("1a0jxh",this.correlationId),await this.navigationClient.navigateExternal(n,a);return}else{this.logger.verbose("09k5h5",this.correlationId);return}else{this.logger.verbose("0klwf7",this.correlationId),await this.navigationClient.navigateExternal(n,a);return}}else throw this.logger.info("0rlh4e",this.correlationId),ee($f)}async logout(n){this.logger.verbose("1rkurh",this.correlationId);const a=this.initializeLogoutRequest(n),o=hn(Le.logout,this.config.auth.clientId,this.correlationId,this.browserStorage,this.logger);try{this.eventHandler.emitEvent(ve.LOGOUT_START,this.correlationId,pe.Redirect,n),await fg(this.browserStorage,this.browserCrypto,this.logger,this.correlationId,a.account);const r={apiId:Le.logout,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},d=await K(this.createAuthCodeClient.bind(this),xa,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:o,requestAuthority:n&&n.authority,requestExtraQueryParameters:n?.extraQueryParameters,account:n&&n.account||void 0});if(d.authority.protocolMode===dn.OIDC)try{d.authority.endSessionEndpoint}catch{if(a.account?.homeAccountId){this.eventHandler.emitEvent(ve.LOGOUT_SUCCESS,this.correlationId,pe.Redirect,a);return}}const h=d.getLogoutUri(a);a.account?.homeAccountId&&this.eventHandler.emitEvent(ve.LOGOUT_SUCCESS,this.correlationId,pe.Redirect,a);const f=this.config.auth.onRedirectNavigate;if(typeof f=="function")if(f(h)!==!1){this.logger.verbose("06v57e",this.correlationId),this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0,Ia.SIGNOUT),await this.navigationClient.navigateExternal(h,r);return}else this.browserStorage.setInteractionInProgress(!1),this.logger.verbose("0xqes1",this.correlationId);else{this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0,Ia.SIGNOUT),await this.navigationClient.navigateExternal(h,r);return}}catch(r){throw r instanceof et&&(r.setCorrelationId(this.correlationId),o.cacheFailedRequest(r)),this.eventHandler.emitEvent(ve.LOGOUT_FAILURE,this.correlationId,pe.Redirect,null,r),this.eventHandler.emitEvent(ve.LOGOUT_END,this.correlationId,pe.Redirect),r}this.eventHandler.emitEvent(ve.LOGOUT_END,this.correlationId,pe.Redirect)}getRedirectStartPage(n){const a=n||window.location.href;return Ve.getAbsoluteUrl(a,Ra())}}async function Hk(l,n,a,o){if(!l)throw a.info("1l7hyp",o),ee($f);return Zn(Bk,C_,a,n,o)(l)}async function zk(l,n,a,o,r){const d=Tg();if(!d.contentDocument)throw"No document associated with iframe!";return(await vg(d.contentDocument,l,n,a,o,r)).submit(),d}async function Lk(l,n,a,o,r){const d=Tg();if(!d.contentDocument)throw"No document associated with iframe!";return(await yg(d.contentDocument,l,n,a,o,r)).submit(),d}function Bk(l){const n=Tg();return n.src=l,n}function Tg(){const l=document.createElement("iframe");return l.className="msalSilentIframe",l.style.visibility="hidden",l.style.position="absolute",l.style.width=l.style.height="0",l.style.border="0",l.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),l.setAttribute("allow","local-network-access *"),document.body.appendChild(l),l}class Kk extends Lo{constructor(n,a,o,r,d,h,f,y,p,T,S){super(n,a,o,r,d,h,y,T,S),this.apiId=f,this.nativeStorage=p}async acquireToken(n){!n.loginHint&&!n.sid&&(!n.account||!n.account.username)&&this.logger.warning("1kl318",this.correlationId);const a={...n};a.prompt?a.prompt!==un.NONE&&a.prompt!==un.NO_SESSION&&(this.logger.warning("0bmctg",this.correlationId),a.prompt=un.NONE):a.prompt=un.NONE;const o=await K(Su,vu,this.logger,this.performanceClient,this.correlationId)(a,pe.Silent,this.config,this.browserCrypto,this.browserStorage,this.logger,this.performanceClient,this.correlationId);return o.platformBroker=ul(this.config,this.logger,this.correlationId,this.platformAuthProvider,o.authenticationScheme),SS(o.authority),this.config.system.protocolMode===dn.EAR?this.executeEarFlow(o):this.executeCodeFlow(o)}async executeCodeFlow(n){let a;const o=hn(this.apiId,this.config.auth.clientId,this.correlationId,this.browserStorage,this.logger);try{return a=await K(this.createAuthCodeClient.bind(this),xa,this.logger,this.performanceClient,n.correlationId)({serverTelemetryManager:o,requestAuthority:n.authority,requestAzureCloudOptions:n.azureCloudOptions,requestExtraQueryParameters:n.extraQueryParameters,account:n.account}),await K(this.silentTokenHelper.bind(this),zv,this.logger,this.performanceClient,n.correlationId)(a,n)}catch(r){if(r instanceof et&&(r.setCorrelationId(this.correlationId),o.cacheFailedRequest(r)),!a||!(r instanceof et)||r.errorCode!==jn.INVALID_GRANT_ERROR)throw r;return this.performanceClient.addFields({retryError:r.errorCode},this.correlationId),await K(this.silentTokenHelper.bind(this),zv,this.logger,this.performanceClient,this.correlationId)(a,n)}}async executeEarFlow(n){const{correlationId:a,authority:o,azureCloudOptions:r,extraQueryParameters:d,account:h}=n,f=await K(Fi,Ss,this.logger,this.performanceClient,a)(this.config,this.correlationId,this.performanceClient,this.browserStorage,this.logger,o,r,d,h),y=await K(sg,dg,this.logger,this.performanceClient,a)(),p=await K(ks,ws,this.logger,this.performanceClient,a)(this.performanceClient,this.logger,a),T={...n,earJwk:y,codeChallenge:p.challenge};await K(Lk,qh,this.logger,this.performanceClient,a)(this.config,f,T,this.logger,this.performanceClient);const S=this.config.auth.OIDCOptions.responseMode,I=await K(_o,iu,this.logger,this.performanceClient,a)(this.config.system.iframeBridgeTimeout,this.logger,this.browserCrypto,n),x=Zn(nl,tl,this.logger,this.performanceClient,a)(I,S,this.logger,this.correlationId);if(!x.ear_jwe&&x.code){const F=await K(this.createAuthCodeClient.bind(this),xa,this.logger,this.performanceClient,a)({serverTelemetryManager:hn(this.apiId,this.config.auth.clientId,a,this.browserStorage,this.logger),requestAuthority:n.authority,requestAzureCloudOptions:n.azureCloudOptions,requestExtraQueryParameters:n.extraQueryParameters,account:n.account,authority:f});return K(xo,Ro,this.logger,this.performanceClient,a)(T,x,p.verifier,this.apiId,this.config,F,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}else return K(Cg,ug,this.logger,this.performanceClient,a)(T,x,this.apiId,this.config,f,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}logout(){return Promise.reject(ee(eg))}async silentTokenHelper(n,a){const o=a.correlationId,r=await K(ks,ws,this.logger,this.performanceClient,o)(this.performanceClient,this.logger,o),d={...a,codeChallenge:r.challenge};if(a.httpMethod===ko.POST)await K(zk,qh,this.logger,this.performanceClient,o)(this.config,n.authority,d,this.logger,this.performanceClient);else{const p=await K(pg,Ff,this.logger,this.performanceClient,o)(this.config,n.authority,d,this.logger,this.performanceClient);await K(Hk,qh,this.logger,this.performanceClient,o)(p,this.performanceClient,this.logger,o)}const h=this.config.auth.OIDCOptions.responseMode,f=await K(_o,iu,this.logger,this.performanceClient,o)(this.config.system.iframeBridgeTimeout,this.logger,this.browserCrypto,a),y=Zn(nl,tl,this.logger,this.performanceClient,o)(f,h,this.logger,this.correlationId);return K(xo,Ro,this.logger,this.performanceClient,o)(a,y,r.verifier,this.apiId,this.config,n,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}}class Pk extends Lo{async acquireToken(n){const a=await K(gg,cg,this.logger,this.performanceClient,n.correlationId)(n,this.config,this.performanceClient,this.logger,this.correlationId),o={...n,...a};n.redirectUri&&(o.redirectUri=au(n.redirectUri,this.config.auth.redirectUri,this.logger,this.correlationId));const r=hn(Le.acquireTokenSilent_silentFlow,this.config.auth.clientId,this.correlationId,this.browserStorage,this.logger),d=await this.createRefreshTokenClient({serverTelemetryManager:r,authorityUrl:o.authority,azureCloudOptions:o.azureCloudOptions,account:o.account});return K(d.acquireTokenByRefreshToken.bind(d),p_,this.logger,this.performanceClient,n.correlationId)(o,Le.acquireTokenSilent_silentFlow).catch(h=>{throw h.setCorrelationId(this.correlationId),r.cacheFailedRequest(h),h})}logout(){return Promise.reject(ee(eg))}async createRefreshTokenClient(n){const a=await K(this.getClientConfiguration.bind(this),yu,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:n.serverTelemetryManager,requestAuthority:n.authorityUrl,requestAzureCloudOptions:n.azureCloudOptions,requestExtraQueryParameters:n.extraQueryParameters,account:n.account});return new Q0(a,this.performanceClient)}}class Gk extends WC{constructor(n,a){super(n,a),this.includeRedirectUri=!1}}class Vk extends Lo{constructor(n,a,o,r,d,h,f,y,p,T){super(n,a,o,r,d,h,y,p,T),this.apiId=f}async acquireToken(n){if(!n.code)throw ee(_w);const a=await K(Su,vu,this.logger,this.performanceClient,this.correlationId)(n,pe.Silent,this.config,this.browserCrypto,this.browserStorage,this.logger,this.performanceClient,this.correlationId),o=hn(this.apiId,this.config.auth.clientId,this.correlationId,this.browserStorage,this.logger);try{const r={...a,code:n.code},d=await K(this.getClientConfiguration.bind(this),yu,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:o,requestAuthority:a.authority,requestAzureCloudOptions:a.azureCloudOptions,requestExtraQueryParameters:a.extraQueryParameters,account:a.account}),h=new Gk(d,this.performanceClient);this.logger.verbose("1uic5e",this.correlationId);const f=new _S(h,this.browserStorage,r,this.logger,this.performanceClient);return await K(f.handleCodeResponseFromServer.bind(f),FC,this.logger,this.performanceClient,this.correlationId)({code:n.code,msgraph_host:n.msGraphHost,cloud_graph_host_name:n.cloudGraphHostName,cloud_instance_host_name:n.cloudInstanceHostName},a,this.apiId,!1)}catch(r){throw r instanceof et&&(r.setCorrelationId(this.correlationId),o.cacheFailedRequest(r)),r}}logout(){return Promise.reject(ee(eg))}}function Fk(l,n,a,o){const r=window.msal?.clientIds||[],d=r.length,h=r.filter(f=>f===l).length;h>1&&a.warning("1e88vg",o),n.add({msalInstanceCount:d,sameClientIdInstanceCount:h})}function Bc(l,n,a){try{lg(l)}catch(o){throw n.end({success:!1},o,a),o}}class Eg{constructor(n){this.operatingContext=n,this.isBrowserEnvironment=this.operatingContext.isBrowserEnvironment(),this.config=n.getConfig(),this.initialized=!1,this.logger=this.operatingContext.getLogger(),this.networkClient=this.config.system.networkClient,this.navigationClient=this.config.system.navigationClient,this.redirectResponse=new Map,this.hybridAuthCodeResponses=new Map,this.performanceClient=this.config.telemetry.client,this.browserCrypto=this.isBrowserEnvironment?new Yi(this.logger,this.performanceClient):Zc,this.eventHandler=new ck(this.logger),this.browserStorage=this.isBrowserEnvironment?new pf(this.config.auth.clientId,this.config.cache,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler,F0(this.config.auth)):ik(this.config.auth.clientId,this.logger,this.performanceClient,this.eventHandler);const a={cacheLocation:Ln.MemoryStorage,cacheRetentionDays:5};this.nativeInternalStorage=new pf(this.config.auth.clientId,a,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler),this.activeSilentTokenRequests=new Map,this.trackPageVisibility=this.trackPageVisibility.bind(this),this.trackPageVisibilityWithMeasurement=this.trackPageVisibilityWithMeasurement.bind(this)}static async createController(n,a){const o=new Eg(n);return await o.initialize(a),o}trackPageVisibility(n){n&&(this.logger.info("16v6hv",n),this.performanceClient.incrementFields({visibilityChangeCount:1},n))}async initialize(n){const a=this.getRequestCorrelationId(n);if(this.logger.trace("1f7joy",a),this.initialized){this.logger.info("061m5x",a);return}if(!this.isBrowserEnvironment){this.logger.info("19fvpi",a),this.initialized=!0,this.eventHandler.emitEvent(ve.INITIALIZE_END,a);return}const o=this.config.system.allowPlatformBroker,r=this.performanceClient.startMeasurement(Y_,a);if(this.eventHandler.emitEvent(ve.INITIALIZE_START,a),this.logMultipleInstances(r,a),await K(this.browserStorage.initialize.bind(this.browserStorage),v_,this.logger,this.performanceClient,a)(a),o)try{this.platformAuthProvider=await Mk(this.logger,this.performanceClient,a,this.config.system.nativeBrokerHandshakeTimeout)}catch(d){this.logger.verbose(d,a)}this.config.cache.cacheLocation===Ln.LocalStorage&&this.eventHandler.subscribeCrossTab(),!this.config.system.navigatePopups&&await this.preGeneratePkceCodes(a),this.initialized=!0,this.eventHandler.emitEvent(ve.INITIALIZE_END,a),r.end({allowPlatformBroker:o,success:!0})}async handleRedirectPromise(n){if(this.logger.verbose("02l8bm",""),CS(this.initialized),this.isBrowserEnvironment){const a=n?.hash||"";let o=this.redirectResponse.get(a);return typeof o>"u"?(o=this.handleRedirectPromiseInternal(n),this.redirectResponse.set(a,o),this.logger.verbose("1wn9kp","")):this.logger.verbose("0w0gm3",""),o}return this.logger.verbose("12xi63",""),null}async handleRedirectPromiseInternal(n){if(!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("0le6uv",""),null;if(this.browserStorage.getInteractionInProgress()?.type===Ia.SIGNOUT)return this.logger.verbose("1ywcv2",""),this.browserStorage.setInteractionInProgress(!1),Promise.resolve(null);const o=this.getAllAccounts(),r=this.browserStorage.getCachedNativeRequest(),d=r&&this.platformAuthProvider&&!n?.hash;let h,f;try{if(d&&this.platformAuthProvider){const y=r?.correlationId||"";this.eventHandler.emitEvent(ve.HANDLE_REDIRECT_START,y,pe.Redirect),h=this.performanceClient.startMeasurement(Jh,y),this.logger.trace("12v7is",y);const p=new Fc(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Le.handleRedirectPromise,this.performanceClient,this.platformAuthProvider,r.accountId,this.nativeInternalStorage,r.correlationId);f=K(p.handleRedirectPromise.bind(p),k_,this.logger,this.performanceClient,h.event.correlationId)(this.performanceClient,h.event.correlationId)}else{const[y,p]=this.browserStorage.getCachedRequest(""),T=y.correlationId;this.eventHandler.emitEvent(ve.HANDLE_REDIRECT_START,T,pe.Redirect),h=this.performanceClient.startMeasurement(Jh,T),this.logger.trace("0znzs5",T);const S=this.createRedirectClient(T);f=K(S.handleRedirectPromise.bind(S),__,this.logger,this.performanceClient,h.event.correlationId)(y,p,h,n)}}catch(y){throw this.browserStorage.resetRequestCache(""),y}return f.then(y=>(y?(this.browserStorage.resetRequestCache(y.correlationId),this.eventHandler.emitEvent(ve.ACQUIRE_TOKEN_SUCCESS,y.correlationId,pe.Redirect,y),this.logger.verbose("0ui8f5",y.correlationId),o.length<this.getAllAccounts().length&&(this.eventHandler.emitEvent(ve.LOGIN_SUCCESS,y.correlationId,pe.Redirect,y.account),this.logger.verbose("16im3l",y.correlationId)),h.end({success:!0},void 0,y.account)):h.event.errorCode?h.end({success:!1},void 0):h.discard(),this.eventHandler.emitEvent(ve.HANDLE_REDIRECT_END,h.event.correlationId,pe.Redirect),y)).catch(y=>{this.browserStorage.resetRequestCache(h.event.correlationId);const p=y;throw this.eventHandler.emitEvent(ve.ACQUIRE_TOKEN_FAILURE,h.event.correlationId,pe.Redirect,null,p),this.eventHandler.emitEvent(ve.HANDLE_REDIRECT_END,h.event.correlationId,pe.Redirect),h.end({success:!1},p),y})}async acquireTokenRedirect(n){const a=this.getRequestCorrelationId(n);this.logger.verbose("0os66p",a);const o=this.performanceClient.startMeasurement(V_,a);o.add({scenarioId:n.scenarioId});const r=this.config.auth.onRedirectNavigate;this.config.auth.onRedirectNavigate=d=>{const h=typeof r=="function"?r(d):void 0;return o.add({navigateCallbackResult:h!==!1}),o.event=o.end({success:!0},void 0,n.account)||o.event,h};try{jv(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0,Ia.SIGNIN),this.eventHandler.emitEvent(ve.ACQUIRE_TOKEN_START,a,pe.Redirect,n);let d;return this.platformAuthProvider&&this.canUsePlatformBroker(n)?d=new Fc(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Le.acquireTokenRedirect,this.performanceClient,this.platformAuthProvider,this.getNativeAccountId(n),this.nativeInternalStorage,a).acquireTokenRedirect(n,o).catch(f=>{if(f instanceof pi&&wo(f))return this.platformAuthProvider=void 0,this.createRedirectClient(a).acquireToken(n);if(f instanceof $n)return this.logger.verbose("1ipyz4",a),this.createRedirectClient(a).acquireToken(n);throw f}):d=this.createRedirectClient(a).acquireToken(n),await d}catch(d){throw this.browserStorage.resetRequestCache(a),o.event.status===2?this.performanceClient.startMeasurement(Jh,a).end({success:!1},d,n.account):o.end({success:!1},d,n.account),this.eventHandler.emitEvent(ve.ACQUIRE_TOKEN_FAILURE,a,pe.Redirect,null,d),d}}acquireTokenPopup(n){const a=this.getRequestCorrelationId(n),o=this.performanceClient.startMeasurement(G_,a);o.add({scenarioId:n.scenarioId});try{this.logger.verbose("0ch87b",a),Bc(this.initialized,o,n.account),this.browserStorage.setInteractionInProgress(!0,Ia.SIGNIN,n.overrideInteractionInProgress,a)}catch(f){return Promise.reject(f)}const r=this.getAllAccounts();this.eventHandler.emitEvent(ve.ACQUIRE_TOKEN_START,a,pe.Popup,n);let d;const h=this.getPreGeneratedPkceCodes(a);return this.canUsePlatformBroker(n)?d=this.acquireTokenNative({...n,correlationId:a},Le.acquireTokenPopup).then(f=>(o.end({success:!0,isNativeBroker:!0},void 0,f.account),f)).catch(f=>{if(f instanceof pi&&wo(f))return this.platformAuthProvider=void 0,this.createPopupClient(a).acquireToken(n,h);if(f instanceof $n)return this.logger.verbose("0yy5fw",a),this.createPopupClient(a).acquireToken(n,h);throw f}):d=this.createPopupClient(a).acquireToken(n,h),d.then(f=>{const y=r.length<this.getAllAccounts().length;return this.eventHandler.emitEvent(ve.ACQUIRE_TOKEN_SUCCESS,a,pe.Popup,f),y&&this.eventHandler.emitEvent(ve.LOGIN_SUCCESS,a,pe.Popup,f.account),o.end({success:!0,accessTokenSize:f.accessToken.length,idTokenSize:f.idToken.length},void 0,f.account),f}).catch(f=>(this.eventHandler.emitEvent(ve.ACQUIRE_TOKEN_FAILURE,a,pe.Popup,null,f),o.end({success:!1},f,n.account),Promise.reject(f))).finally(async()=>{this.browserStorage.setInteractionInProgress(!1),this.config.system.navigatePopups||await this.preGeneratePkceCodes(a)})}trackPageVisibilityWithMeasurement(){const n=this.ssoSilentMeasurement||this.acquireTokenByCodeAsyncMeasurement;n&&n.increment({visibilityChangeCount:1})}async ssoSilent(n){const a=this.getRequestCorrelationId(n),o={...n,prompt:n.prompt,correlationId:a};this.ssoSilentMeasurement=this.performanceClient.startMeasurement(F_,a),this.ssoSilentMeasurement?.add({scenarioId:n.scenarioId}),Bc(this.initialized,this.ssoSilentMeasurement,n.account),this.ssoSilentMeasurement?.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement);const r=this.getAllAccounts();this.logger.verbose("0w1b45",a),this.eventHandler.emitEvent(ve.ACQUIRE_TOKEN_START,a,pe.Silent,o);let d;return this.canUsePlatformBroker(o)?d=this.acquireTokenNative(o,Le.ssoSilent).catch(h=>{if(h instanceof pi&&wo(h))return this.platformAuthProvider=void 0,this.createSilentIframeClient(o.correlationId).acquireToken(o);throw h}):d=this.createSilentIframeClient(o.correlationId).acquireToken(o),d.then(h=>{const f=r.length<this.getAllAccounts().length;return this.eventHandler.emitEvent(ve.ACQUIRE_TOKEN_SUCCESS,a,pe.Silent,h),f&&this.eventHandler.emitEvent(ve.LOGIN_SUCCESS,a,pe.Silent,h.account),this.ssoSilentMeasurement?.end({success:!0,isNativeBroker:h.fromPlatformBroker,accessTokenSize:h.accessToken.length,idTokenSize:h.idToken.length},void 0,h.account),h}).catch(h=>{throw this.eventHandler.emitEvent(ve.ACQUIRE_TOKEN_FAILURE,a,pe.Silent,null,h),this.ssoSilentMeasurement?.end({success:!1},h,n.account),h}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenByCode(n){const a=this.getRequestCorrelationId(n);this.logger.trace("0ch6ga",a);const o=this.performanceClient.startMeasurement(P_,a);Bc(this.initialized,o),this.eventHandler.emitEvent(ve.ACQUIRE_TOKEN_START,a,pe.Silent,n),o.add({scenarioId:n.scenarioId});try{if(n.code&&n.nativeAccountId)throw ee(Iw);if(n.code){const r=n.code;let d=this.hybridAuthCodeResponses.get(r);return d?(this.logger.verbose("0qgp28",a),o.discard()):(this.logger.verbose("06eh73",a),d=this.acquireTokenByCodeAsync({...n,correlationId:a}).then(h=>(this.eventHandler.emitEvent(ve.ACQUIRE_TOKEN_SUCCESS,a,pe.Silent,h),this.hybridAuthCodeResponses.delete(r),o.end({success:!0,isNativeBroker:h.fromPlatformBroker,accessTokenSize:h.accessToken.length,idTokenSize:h.idToken.length},void 0,h.account),h)).catch(h=>{throw this.hybridAuthCodeResponses.delete(r),this.eventHandler.emitEvent(ve.ACQUIRE_TOKEN_FAILURE,a,pe.Silent,null,h),o.end({success:!1},h),h}),this.hybridAuthCodeResponses.set(r,d)),await d}else if(n.nativeAccountId)if(this.canUsePlatformBroker(n,n.nativeAccountId)){const r=await this.acquireTokenNative({...n,correlationId:a},Le.acquireTokenByCode,n.nativeAccountId).catch(d=>{throw d instanceof pi&&wo(d)&&(this.platformAuthProvider=void 0),d});return o.end({success:!0},void 0,r.account),r}else throw ee(Ow);else throw ee(kw)}catch(r){throw this.eventHandler.emitEvent(ve.ACQUIRE_TOKEN_FAILURE,a,pe.Silent,null,r),o.end({success:!1},r),r}}async acquireTokenByCodeAsync(n){const a=this.getRequestCorrelationId(n);return this.logger.trace("10d9hy",a),this.acquireTokenByCodeAsyncMeasurement=this.performanceClient.startMeasurement(w_,a),this.acquireTokenByCodeAsyncMeasurement?.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),await this.createSilentAuthCodeClient(a).acquireToken(n).then(d=>(this.acquireTokenByCodeAsyncMeasurement?.end({success:!0,fromCache:d.fromCache,isNativeBroker:d.fromPlatformBroker}),d)).catch(d=>{throw this.acquireTokenByCodeAsyncMeasurement?.end({success:!1},d),d}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenFromCache(n,a){switch(a){case Zt.Default:case Zt.AccessToken:case Zt.AccessTokenAndRefreshToken:const o=this.createSilentCacheClient(n.correlationId);return K(o.acquireToken.bind(o),h_,this.logger,this.performanceClient,n.correlationId)(n);default:throw Q(vs)}}async acquireTokenByRefreshToken(n,a){switch(a){case Zt.Default:case Zt.AccessTokenAndRefreshToken:case Zt.RefreshToken:case Zt.RefreshTokenAndNetwork:const o=this.createSilentRefreshClient(n.correlationId);return K(o.acquireToken.bind(o),m_,this.logger,this.performanceClient,n.correlationId)(n);default:throw Q(vs)}}async acquireTokenBySilentIframe(n){const a=this.createSilentIframeClient(n.correlationId);return K(a.acquireToken.bind(a),f_,this.logger,this.performanceClient,n.correlationId)(n)}async logoutRedirect(n){const a=this.getRequestCorrelationId(n);return jv(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0,Ia.SIGNOUT),this.createRedirectClient(a).logout(n)}logoutPopup(n){try{const a=this.getRequestCorrelationId(n);return lg(this.initialized),this.browserStorage.setInteractionInProgress(!0,Ia.SIGNOUT),this.createPopupClient(a).logout(n).finally(()=>{this.browserStorage.setInteractionInProgress(!1)})}catch(a){return Promise.reject(a)}}async clearCache(n){if(!this.isBrowserEnvironment)return;const a=this.getRequestCorrelationId(n);return this.createSilentCacheClient(a).logout(n)}getAllAccounts(n){return ak(this.logger,this.browserStorage,this.isBrowserEnvironment,this.getRequestCorrelationId(),n)}getAccount(n){return sk(n,this.logger,this.browserStorage,this.getRequestCorrelationId())}setActiveAccount(n){ok(n,this.browserStorage,this.getRequestCorrelationId())}getActiveAccount(){return rk(this.browserStorage,this.getRequestCorrelationId())}async hydrateCache(n,a){this.logger.verbose("16jycr",n.correlationId);const o=Yb(n.account,n.cloudGraphHostName,n.msGraphHost);return await this.browserStorage.setAccount(o,n.correlationId,Cs(n.idTokenClaims),Le.hydrateCache),n.fromPlatformBroker?(this.logger.verbose("1fxyu8",n.correlationId),this.nativeInternalStorage.hydrateCache(n,a)):this.browserStorage.hydrateCache(n,a)}async acquireTokenNative(n,a,o,r){const d=this.getRequestCorrelationId(n);if(this.logger.trace("0b9y3p",d),!this.platformAuthProvider)throw ee(uS);return new Fc(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,a,this.performanceClient,this.platformAuthProvider,o||this.getNativeAccountId(n),this.nativeInternalStorage,d).acquireToken(n,r)}canUsePlatformBroker(n,a){const o=this.getRequestCorrelationId(n);if(this.logger.trace("1n9lbl",o),!this.platformAuthProvider)return this.logger.trace("0vnu11",o),!1;if(!ul(this.config,this.logger,o,this.platformAuthProvider,n.authenticationScheme))return this.logger.trace("1m4bzf",o),!1;if(n.prompt)switch(n.prompt){case un.NONE:case un.CONSENT:case un.LOGIN:this.logger.trace("0vdv8e",o);break;default:return this.logger.trace("0pdzw6",o),!1}return!a&&!this.getNativeAccountId(n)?(this.logger.trace("16lbtk",o),!1):!0}getNativeAccountId(n){const a=n.account||this.getAccount({loginHint:n.loginHint,sid:n.sid})||this.getActiveAccount();return a&&a.nativeAccountId||""}createPopupClient(n){return new Dk(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,n,this.platformAuthProvider)}createRedirectClient(n){return new jk(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,n,this.platformAuthProvider)}createSilentIframeClient(n){return new Kk(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Le.ssoSilent,this.performanceClient,this.nativeInternalStorage,n,this.platformAuthProvider)}createSilentCacheClient(n){return new kS(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,n,this.platformAuthProvider)}createSilentRefreshClient(n){return new Pk(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,n,this.platformAuthProvider)}createSilentAuthCodeClient(n){return new Vk(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Le.acquireTokenByCode,this.performanceClient,n,this.platformAuthProvider)}addEventCallback(n,a){return this.eventHandler.addEventCallback(n,a)}removeEventCallback(n){this.eventHandler.removeEventCallback(n)}addPerformanceCallback(n){return vS(),this.performanceClient.addPerformanceCallback(n)}removePerformanceCallback(n){return this.performanceClient.removePerformanceCallback(n)}getLogger(){return this.logger}setLogger(n){this.logger=n}initializeWrapperLibrary(n,a){this.browserStorage.setWrapperMetadata(n,a)}setNavigationClient(n){this.navigationClient=n}getConfiguration(){return this.config}getPerformanceClient(){return this.performanceClient}isBrowserEnv(){return this.isBrowserEnvironment}getRequestCorrelationId(n){return n?.correlationId?n.correlationId:this.isBrowserEnvironment?bs():""}async loginRedirect(n){const a=this.getRequestCorrelationId(n);return this.logger.verbose("0lz9hf",a),this.acquireTokenRedirect({correlationId:a,...n||Ov})}loginPopup(n){const a=this.getRequestCorrelationId(n);return this.logger.verbose("0qw7v5",a),this.acquireTokenPopup({correlationId:a,...n||Ov})}async acquireTokenSilent(n){const a=this.getRequestCorrelationId(n),o=this.performanceClient.startMeasurement(K_,a);o.add({cacheLookupPolicy:n.cacheLookupPolicy,scenarioId:n.scenarioId}),Bc(this.initialized,o,n.account),this.logger.verbose("0x1c4s",a);const r=n.account||this.getActiveAccount();if(!r)throw ee(Tw);return this.acquireTokenSilentDeduped(n,r,a).then(d=>(o.end({success:!0,fromCache:d.fromCache,isNativeBroker:d.fromPlatformBroker,accessTokenSize:d.accessToken.length,idTokenSize:d.idToken.length},void 0,d.account),{...d,state:n.state,correlationId:a})).catch(d=>{throw d instanceof et&&d.setCorrelationId(a),o.end({success:!1},d,r),d})}async acquireTokenSilentDeduped(n,a,o){const r=hu(this.config.auth.clientId,{...n,authority:n.authority||this.config.auth.authority},a.homeAccountId),d=JSON.stringify(r),h=this.activeSilentTokenRequests.get(d);if(typeof h>"u"){this.logger.verbose("0fcjbk",o),this.performanceClient.addFields({deduped:!1},o);const f=K(this.acquireTokenSilentAsync.bind(this),c_,this.logger,this.performanceClient,o)({...n,correlationId:o},a);return this.activeSilentTokenRequests.set(d,f),f.finally(()=>{this.activeSilentTokenRequests.delete(d)})}else return this.logger.verbose("1yq7nb",o),this.performanceClient.addFields({deduped:!0},o),h}async acquireTokenSilentAsync(n,a){const o=()=>this.trackPageVisibility(n.correlationId);this.eventHandler.emitEvent(ve.ACQUIRE_TOKEN_START,n.correlationId,pe.Silent,n),n.correlationId&&this.performanceClient.incrementFields({visibilityChangeCount:0},n.correlationId),document.addEventListener("visibilitychange",o);const r=await K(uk,y_,this.logger,this.performanceClient,n.correlationId)(n,a,this.config,this.performanceClient,this.logger),d=n.cacheLookupPolicy||Zt.Default;return this.acquireTokenSilentNoIframe(r,d).catch(async f=>{if(Yk(f,d)){const p=`${f.errorCode}${f.subError?`|${f.subError}`:""}`;if(this.performanceClient.addFields({silentRefreshReason:p},n.correlationId),this.activeIframeRequest)if(d!==Zt.Skip){const[T,S]=this.activeIframeRequest;this.logger.verbose("1w8fso",r.correlationId);const I=this.performanceClient.startMeasurement(g_,r.correlationId);I.add({awaitIframeCorrelationId:S});const x=await T;if(I.end({success:x}),x)return this.logger.verbose("0ywzzi",r.correlationId),this.acquireTokenSilentNoIframe(r,d);throw this.logger.info("17y14q",r.correlationId),f}else return this.logger.warning("1bd4p8",r.correlationId),K(this.acquireTokenBySilentIframe.bind(this),Hv,this.logger,this.performanceClient,r.correlationId)(r);else{let T;return this.activeIframeRequest=[new Promise(S=>{T=S}),r.correlationId],this.logger.verbose("0rh08z",r.correlationId),K(this.acquireTokenBySilentIframe.bind(this),Hv,this.logger,this.performanceClient,r.correlationId)(r).then(S=>(T(!0),S)).catch(S=>{throw T(!1),S}).finally(()=>{this.activeIframeRequest=void 0})}}else throw f}).then(f=>(this.eventHandler.emitEvent(ve.ACQUIRE_TOKEN_SUCCESS,n.correlationId,pe.Silent,f),n.correlationId&&this.performanceClient.addFields({fromCache:f.fromCache,isNativeBroker:f.fromPlatformBroker},n.correlationId),f)).catch(f=>{throw this.eventHandler.emitEvent(ve.ACQUIRE_TOKEN_FAILURE,n.correlationId,pe.Silent,null,f),f}).finally(()=>{document.removeEventListener("visibilitychange",o)})}async acquireTokenSilentNoIframe(n,a){return ul(this.config,this.logger,n.correlationId,this.platformAuthProvider,n.authenticationScheme)&&n.account.nativeAccountId?(this.logger.verbose("0sczo4",n.correlationId),this.acquireTokenNative(n,Le.acquireTokenSilent_silentFlow,n.account.nativeAccountId,a).catch(async o=>{throw o instanceof pi&&wo(o)?(this.logger.verbose("07rkmb",n.correlationId),this.platformAuthProvider=void 0,Q(vs)):o})):(this.logger.verbose("0ox81t",n.correlationId),a===Zt.AccessToken&&this.logger.verbose("0fvwxe",n.correlationId),K(this.acquireTokenFromCache.bind(this),r_,this.logger,this.performanceClient,n.correlationId)(n,a).catch(o=>{if(a===Zt.AccessToken)throw o;return this.eventHandler.emitEvent(ve.ACQUIRE_TOKEN_NETWORK_START,n.correlationId,pe.Silent,n),K(this.acquireTokenByRefreshToken.bind(this),l_,this.logger,this.performanceClient,n.correlationId)(n,a)}))}async preGeneratePkceCodes(n){return this.logger.verbose("1x6uj6",n),this.pkceCode=await K(ks,ws,this.logger,this.performanceClient,n)(this.performanceClient,this.logger,n),Promise.resolve()}getPreGeneratedPkceCodes(n){const a=this.pkceCode?{...this.pkceCode}:void 0;return this.pkceCode=void 0,a?this.logger.verbose("12js1o",n):this.logger.verbose("1oe9ci",n),this.performanceClient.addFields({usePreGeneratedPkce:!!a},n),a}logMultipleInstances(n,a){const o=this.config.auth.clientId;if(!window)return;window.msal=window.msal||{},window.msal.clientIds=window.msal.clientIds||[],window.msal.clientIds.length>0&&this.logger.verbose("1qtz3l",a),window.msal.clientIds.push(o),Fk(o,n,this.logger,a)}}function Yk(l,n){const a=!(l instanceof $n&&l.subError!==Vf),o=l.errorCode===jn.INVALID_GRANT_ERROR||l.errorCode===vs,r=a&&o||l.errorCode===cf||l.errorCode===PC,d=lw.includes(n);return r&&d}class Ag{static loggerCallback(n,a){switch(n){case rt.Error:console.error(a);return;case rt.Info:console.info(a);return;case rt.Verbose:console.debug(a);return;case rt.Warning:console.warn(a);return;default:console.log(a);return}}constructor(n){this.browserEnvironment=typeof window<"u",this.config=Nk(n,this.browserEnvironment);let a;try{a=window[Ln.SessionStorage]}catch{}const o=a?.getItem(q_),r=a?.getItem(J_)?.toLowerCase(),d=r==="true"?!0:r==="false"?!1:void 0,h={...this.config.system.loggerOptions},f=o&&Object.keys(rt).includes(o)?rt[o]:void 0;f&&(h.loggerCallback=Ag.loggerCallback,h.logLevel=f),d!==void 0&&(h.piiLoggingEnabled=d),this.logger=new vi(h,nk,_s),this.available=!1}getConfig(){return this.config}getLogger(){return this.logger}isAvailable(){return this.available}isBrowserEnvironment(){return this.browserEnvironment}}class Uo extends Ag{getModuleName(){return Uo.MODULE_NAME}getId(){return Uo.ID}async initialize(n){return this.available=typeof window<"u",this.available}}Uo.MODULE_NAME="";Uo.ID="StandardOperatingContext";class Qk{constructor(n,a){this.controller=a||new Eg(new Uo(n))}async initialize(n){return this.controller.initialize(n)}async acquireTokenPopup(n){return this.controller.acquireTokenPopup(n)}acquireTokenRedirect(n){return this.controller.acquireTokenRedirect(n)}acquireTokenSilent(n){return this.controller.acquireTokenSilent(n)}acquireTokenByCode(n){return this.controller.acquireTokenByCode(n)}addEventCallback(n,a){return this.controller.addEventCallback(n,a)}removeEventCallback(n){return this.controller.removeEventCallback(n)}addPerformanceCallback(n){return this.controller.addPerformanceCallback(n)}removePerformanceCallback(n){return this.controller.removePerformanceCallback(n)}getAccount(n){return this.controller.getAccount(n)}getAllAccounts(n){return this.controller.getAllAccounts(n)}handleRedirectPromise(n){return this.controller.handleRedirectPromise(n)}loginPopup(n){return this.controller.loginPopup(n)}loginRedirect(n){return this.controller.loginRedirect(n)}logoutRedirect(n){return this.controller.logoutRedirect(n)}logoutPopup(n){return this.controller.logoutPopup(n)}ssoSilent(n){return this.controller.ssoSilent(n)}getLogger(){return this.controller.getLogger()}setLogger(n){this.controller.setLogger(n)}setActiveAccount(n){this.controller.setActiveAccount(n)}getActiveAccount(){return this.controller.getActiveAccount()}initializeWrapperLibrary(n,a){return this.controller.initializeWrapperLibrary(n,a)}setNavigationClient(n){this.controller.setNavigationClient(n)}getConfiguration(){return this.controller.getConfiguration()}async hydrateCache(n,a){return this.controller.hydrateCache(n,a)}clearCache(n){return this.controller.clearCache(n)}}const qk={auth:{clientId:"893adac7-4ea6-44e3-b2fe-e7bd49f64814",authority:"https://login.microsoftonline.com/d8d598e0-2fb2-4605-8514-1967b50e2bd6",redirectUri:window.location.origin+window.location.pathname},cache:{cacheLocation:"localStorage",storeAuthStateInCookie:!1}},NS=["Calendars.ReadWrite.Shared"],Jk="https://graph.microsoft.com/v1.0";let MS=null;const Xh=new Qk(qk),Xk=Xh.initialize().then(()=>Xh.handleRedirectPromise()).then(l=>(l&&console.log("MSAL redirect login succeeded:",l.account?.username),Xh)).catch(l=>(console.error("MSAL init failed:",l),MS=l?.message||String(l),null));function Xv(){return MS}async function Zk(){return Xk}async function $k(l){const n=l.getAllAccounts();if(n.length===0)return null;try{return(await l.acquireTokenSilent({scopes:NS,account:n[0]})).accessToken}catch{return null}}function Zv(l){l.loginRedirect({scopes:NS})}async function Wk(l){l.getAllAccounts().length>0&&l.clearCache()}async function eI(l,n,a){const o=new URLSearchParams({startDateTime:`${n}T00:00:00`,endDateTime:`${a}T23:59:59`,$top:"100",$select:"subject,start,end,showAs,isAllDay,isCancelled,attendees,categories",$orderby:"start/dateTime"}),r=[];let d=`${Jk}/me/calendarView?${o}`;for(;d;){const h=await fetch(d,{headers:{Authorization:`Bearer ${l}`}});if(!h.ok)throw h.status===401?new Error("outlook_token_expired"):new Error(`Graph API error: ${h.status}`);const f=await h.json();r.push(...f.value||[]),d=f["@odata.nextLink"]||null}return r}const tI={busy:"BUSY",oof:"OOF",tentative:"TENTATIVE",free:"FREE",workingElsewhere:"WORKING-ELSEWHERE",unknown:"BUSY"};function nI(l){const n=new Date(l.start.dateTime),a=new Date(l.end.dateTime),o=n.getFullYear()+"-"+String(n.getMonth()+1).padStart(2,"0")+"-"+String(n.getDate()).padStart(2,"0"),r=String(n.getHours()).padStart(2,"0")+":"+String(n.getMinutes()).padStart(2,"0"),d=String(a.getHours()).padStart(2,"0")+":"+String(a.getMinutes()).padStart(2,"0");return{name:l.subject||"Outlook Event",date:o,start:r,end:d,status:tI[l.showAs]||"BUSY",isMeeting:(l.attendees?.length||0)>0,categories:l.categories||[],isAllDay:l.isAllDay||!1,isCancelled:l.isCancelled||!1,graphId:l.id}}function iI({events:l,setEvents:n,settings:a,pushUndo:o,minDate:r,maxDate:d,tags:h}){const[f,y]=z.useState(!1),[p,T]=z.useState("idle"),[S,I]=z.useState(null),[x,F]=z.useState(null),Y=z.useRef(null),ge=z.useRef(!1);z.useEffect(()=>{let Ce=!1;return Zk().then(te=>{if(!Ce){if(!te){T("error"),I(Xv()||"MSAL failed to initialize");return}Y.current=te,te.getAllAccounts().length>0&&y(!0)}}),()=>{Ce=!0}},[]);const Z=z.useCallback(async()=>{if(!Y.current){T("error"),I(Xv()||"MSAL not ready  try refreshing the page");return}Zv(Y.current)},[]),ue=z.useCallback(async()=>{if(Y.current){o(),n(Ce=>Ce.filter(te=>!te.outlookSynced));try{await Wk(Y.current)}catch{}y(!1),T("idle"),I(null),F(null)}},[o,n]),ie=z.useCallback(async()=>{if(!(!Y.current||ge.current)){ge.current=!0,T("fetching"),I(null);try{let Ce=await $k(Y.current);if(!Ce){Zv(Y.current);return}const W=(await eI(Ce,r,d)).filter(we=>!we.isCancelled).map(nI).filter(we=>!we.isAllDay).filter(we=>we.start!==we.end),se=tC(W,a,r,d),Ee=a.icsCategoryRules||[],He=se.map((we,Ye)=>{let ke=null;if(we.categories?.length>0)for(const ye of we.categories){const tt=Ee.find(Re=>Re.include!==!1&&Re.tagId&&Re.category.toLowerCase()===ye.toLowerCase());if(tt){ke=tt.tagId;break}}return{id:Date.now()+Ye,name:we.name,start:we.start,end:we.end,date:we.date,tagId:ke,outlookSynced:!0}});o(),n(we=>{const Ye=we.filter(ye=>!ye.outlookSynced),ke=[];for(const ye of He)Ye.some(Re=>Re.name===ye.name&&Re.start===ye.start&&Re.end===ye.end&&Re.date===ye.date)||ke.push(ye);return[...Ye,...ke]}),F(new Date),T("idle")}catch(Ce){Ce.message==="outlook_token_expired"&&y(!1),T("error"),I(Ce.message)}finally{ge.current=!1}}},[r,d,a,o,n]);return z.useEffect(()=>{f&&ie()},[f,r,d]),z.useEffect(()=>{if(!f)return;const Ce=setInterval(ie,300*1e3);return()=>clearInterval(Ce)},[f,ie]),{outlookAvailable:!0,outlookConnected:f,outlookStatus:p,outlookError:S,lastFetched:x,connectOutlook:Z,disconnectOutlook:ue,refreshOutlookEvents:ie}}const aI=Object.freeze(Object.defineProperty({__proto__:null,useOutlook:iI},Symbol.toStringTag,{value:"Module"}));function sI(){return{syncIndicator:null,syncSettingsUI:null}}function oI(){return{outlookAvailable:!1,outlookConnected:!1,outlookStatus:"idle",outlookError:null,lastFetched:null,connectOutlook:()=>{},disconnectOutlook:()=>{},refreshOutlookEvents:()=>{}}}const rI=Object.assign({"./useSync.jsx":IE}),lI=rI["./useSync.jsx"]?.useSync??sI,cI=Object.assign({"./useOutlook.jsx":aI}),uI=cI["./useOutlook.jsx"]?.useOutlook??oI,dI="2026-02-26 10:32 PM CT";function xS(l){const n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(l);return n?{r:parseInt(n[1],16),g:parseInt(n[2],16),b:parseInt(n[3],16)}:{r:148,g:163,b:184}}function hI(l,n,a){const{r:o,g:r,b:d}=xS(l),h=a?{r:30,g:41,b:59}:{r:255,g:255,b:255},f=(y,p)=>Math.round(y*n+p*(1-n));return`rgb(${f(o,h.r)}, ${f(r,h.g)}, ${f(d,h.b)})`}function fI(l,n,a){const{r:o,g:r,b:d}=xS(l),h=a?{r:30,g:41,b:59}:{r:255,g:255,b:255},f={r:o*n+h.r*(1-n),g:r*n+h.g*(1-n),b:d*n+h.b*(1-n)};return(f.r*299+f.g*587+f.b*114)/1e3>150?"#1a1a1a":"#ffffff"}function gI(l,n){const[a]=l.split(":").map(Number),[o]=n.split(":").map(Number),r=l.split(":")[1];return a>=19&&a<=23&&o!==a-12?`${(a-12).toString().padStart(2,"0")}:${r}`:a>=1&&a<=6&&o!==a+12?`${(a+12).toString().padStart(2,"0")}:${r}`:l}const wa=[.5,.75,1,1.5,2,3],Zh={small:{title:"0.7rem",time:"0.55rem",label:"Small"},medium:{title:"0.8rem",time:"0.65rem",label:"Medium"},large:{title:"0.95rem",time:"0.75rem",label:"Large"},xlarge:{title:"1.1rem",time:"0.85rem",label:"Extra Large"}},$v={workdayStart:"09:00",workdayEnd:"17:00",useExtendedHours:!0,extendedStart:"06:00",extendedEnd:"23:59",autoStartNext:!1,darkMode:!1,zoomLevel:1.5,fitMode:!0,smartDuration:!0,defaultTaskDuration:30,defaultEventDuration:60,defaultTaskColor:"#94a3b8",defaultEventColor:"#94a3b8",minFragmentMinutes:5,calendarFontSize:"medium",wrapListNames:!0,restrictTasksToWorkHours:!0,debugMode:!1,debugTimeOffset:0,icsImportBusy:!0,icsImportOof:!0,icsImportTentative:!1,icsImportFree:!1,icsImportWorkingElsewhere:!1,icsImportMeetingsOnly:!1,icsReplaceOnImport:"no",icsCategoryRules:[]},Wv=["zoomLevel","fitMode","debugMode","debugTimeOffset","darkMode"],mI=[{id:1,name:"Epic Medical Center",color:"#ef4444"},{id:2,name:"Verona Hospital",color:"#667eea"},{id:3,name:"Fitchburg Health",color:"#10b981"},{id:4,name:"Internal",color:"#f59e0b"}],pI=[{id:1,name:"Tech note review",duration:30,adjustedDuration:null,completed:!1,tagId:null,pausedElapsed:0},{id:2,name:"Sherlock #12345678",duration:75,adjustedDuration:null,completed:!1,tagId:3,pausedElapsed:0},{id:3,name:"Firewatch investigation",duration:60,adjustedDuration:null,completed:!1,tagId:1,pausedElapsed:0}],yI=[{id:1,name:"EMC check-in",start:"11:00",end:"11:30",tagId:1},{id:2,name:"Workgroup meeting",start:"13:30",end:"14:30",tagId:4},{id:3,name:"Verona Hospital office hours",start:"15:00",end:"16:00",tagId:2}];function $h(){const l=localStorage.getItem("timekerper-activeTaskId");if(!l||l==="null")return null;const n=JSON.parse(l),a=localStorage.getItem("timekerper-tasks");if(!a)return null;const r=JSON.parse(a).find(Y=>Y.id===n&&!Y.completed);if(!r||r.startedAtMin==null)return null;const d=localStorage.getItem("timekerper-settings"),h=d?JSON.parse(d):{},f=h.debugMode&&h.debugTimeOffset||0,y=rn()+f,p=localStorage.getItem("timekerper-events"),T=p?JSON.parse(p):[],S=r.startedAtDate||ft(),I=r.pauseEvents&&r.pauseEvents.length>0,x=Cf(T,r.pauseEvents||[],r.startedAtMin,y,S)+(I?0:r.pauseGapMinutes||0),F=Math.max(0,y-r.startedAtMin-x);return{id:n,taskStartTime:Date.now()-F*6e4,elapsedMinutes:F}}function vI(l,n){const a=ft(),o=l.map(d=>{let h=d;return d.startedAtMin!=null&&!d.startedAtDate&&(h={...h,startedAtDate:a}),d.workSegments?.some(f=>!f.date)&&(h={...h,workSegments:h.workSegments.map(f=>f.date?f:{...f,date:a})}),d.pauseEvents?.some(f=>!f.date)&&(h={...h,pauseEvents:h.pauseEvents.map(f=>f.date?f:{...f,date:a})}),h}),r=n.map(d=>d.date?d:{...d,date:a});return{tasks:o,events:r}}function CI(){const l=localStorage.getItem("timekerper-tasks"),n=localStorage.getItem("timekerper-events"),a=l?JSON.parse(l):pI,o=n?JSON.parse(n):yI;if(parseInt(localStorage.getItem("timekerper-migrationVersion")||"0")<1){const d=vI(a,o);return localStorage.setItem("timekerper-tasks",JSON.stringify(d.tasks)),localStorage.setItem("timekerper-events",JSON.stringify(d.events)),localStorage.setItem("timekerper-migrationVersion","1"),d}return{tasks:a,events:o}}const eC=CI();function SI(){const[l,n]=z.useState(eC.tasks),[a,o]=z.useState(eC.events),[r,d]=z.useState(()=>{const m=localStorage.getItem("timekerper-settings"),E=m?{...$v,...JSON.parse(m)}:$v;return typeof E.darkMode!="boolean"&&(E.darkMode=E.darkMode==="on"||E.darkMode===!0),E}),[h,f]=z.useState(()=>{const m=localStorage.getItem("timekerper-tags");return m?JSON.parse(m):mI}),[y,p]=z.useState(()=>$h()?.id??null),[T,S]=z.useState(()=>$h()?.taskStartTime??null),[I,x]=z.useState(()=>$h()?.elapsedMinutes??0),F=r.debugMode&&r.debugTimeOffset||0,[Y,ge]=z.useState(rn()+F),[Z,ue]=z.useState(ft()),[ie,Ce]=z.useState(()=>localStorage.getItem("tk_calendarView")||"1day"),te=z.useRef(ft()),W=ft(),se=Z===W,He=(new Date(W+"T12:00:00").getDay()+6)%7,we=on(W,-He),Ye=on(W,-1),ke=we<Ye?we:Ye,ye=on(W,7),[tt,Re]=z.useState(!1),[j,q]=z.useState(!1),[oe,ne]=z.useState(!1),[he,b]=z.useState(!1),[M,J]=z.useState(null),[P,$]=z.useState(null),[re,me]=z.useState(!0),[it,Ue]=z.useState(!1),[Ot,Ci]=z.useState("all"),[bt,ei]=z.useState(null),[Bt,Rt]=z.useState([]),[Ua,Os]=z.useState(null),[ti,Qi]=z.useState(""),[ja,Ha]=z.useState(30),[Rs,Ns]=z.useState(null),[Kt,pl]=z.useState(!1),[Bo,Ms]=z.useState(""),[fn,Ko]=z.useState("09:00"),[za,La]=z.useState("10:00"),[xs,ni]=z.useState(null),[Nt,bn]=z.useState(ft()),[Yt,Po]=z.useState(!1),[Go,Vo]=z.useState(""),[Ba,Si]=z.useState(null),ii=z.useRef(!1),ai=z.useRef(null),Ka=z.useRef(null),Ti=z.useRef(null),Fo=z.useRef(null),Yo=z.useRef(null),Ds=z.useRef(null),[Pa,Tu]=z.useState(320),[yl,vl]=z.useState(300),Ga=z.useRef(!1),qi=z.useRef(!1),[Ji,Us]=z.useState(null),[Qo,wn]=z.useState(null),[lt,wt]=z.useState(null),[Ei,Va]=z.useState(null),Ai=z.useRef([]),Xi=z.useRef([]),si=z.useRef(l),gn=z.useRef(a),{syncIndicator:qo,syncSettingsUI:Zi}=lI({tasks:l,setTasks:n,events:a,setEvents:o,tags:h,setTags:f,settings:r,setSettings:d,activeTaskId:y,setActiveTaskId:p,setTaskStartTime:S,setElapsedMinutes:x,tasksRef:si,eventsRef:gn,timeOffset:F}),[,oi]=z.useState(0);z.useEffect(()=>{si.current=l},[l]),z.useEffect(()=>{gn.current=a},[a]);const Pe=z.useCallback(()=>{Ai.current=[...Ai.current.slice(-49),{tasks:si.current,events:gn.current}],Xi.current=[],oi(m=>m+1)},[]),{outlookAvailable:ri,outlookConnected:ut,outlookStatus:Qt,outlookError:Fa,lastFetched:mn,connectOutlook:bi,disconnectOutlook:Eu,refreshOutlookEvents:Jo}=uI({events:a,setEvents:o,settings:r,pushUndo:Pe,minDate:ke,maxDate:ye,tags:h}),js=z.useCallback(()=>{const m=Ai.current;if(m.length===0)return;const E=m[m.length-1];Xi.current=[...Xi.current,{tasks:si.current,events:gn.current}],Ai.current=m.slice(0,-1),n(E.tasks),o(E.events),si.current=E.tasks,gn.current=E.events,oi(k=>k+1)},[]),Hs=z.useCallback(()=>{const m=Xi.current;if(m.length===0)return;const E=m[m.length-1];Ai.current=[...Ai.current,{tasks:si.current,events:gn.current}],Xi.current=m.slice(0,-1),n(E.tasks),o(E.events),si.current=E.tasks,gn.current=E.events,oi(k=>k+1)},[]),zs=Ai.current.length>0,Ls=Xi.current.length>0,Bn=Z>ke,Wt=Z<ye,Ya=ie==="1day"?1:parseInt(ie)||1,li=z.useMemo(()=>{if(Ya===1)return te.current=Z,[Z];const m=Ya-1;let E=te.current;return Z>on(E,m)?E=on(Z,-m):Z<E&&(E=Z),on(E,m)>ye&&(E=on(ye,-m)),E<ke&&(E=ke),te.current=E,Array.from({length:Ya},(k,D)=>on(E,D))},[Z,Ya,ke,ye]),Xo=li.includes(W),Bs=z.useCallback(()=>{ue(m=>{const E=on(m,-1);return E>=ke?E:m})},[ke]),$i=z.useCallback(()=>{ue(m=>{const E=on(m,1);return E<=ye?E:m})},[ye]),Zo=z.useCallback(()=>{ue(ft())},[]),ct=z.useCallback(m=>{Ce(m);const E=m==="1day"?1:parseInt(m)||1;E>1&&ue(k=>on(k,E-1)>ye?on(ye,-(E-1)):k<ke?ke:k)},[ye,ke]);z.useEffect(()=>{const m=E=>{const k=document.activeElement?.tagName?.toLowerCase();k==="input"||k==="textarea"||((E.ctrlKey||E.metaKey)&&E.key==="z"&&(E.preventDefault(),E.shiftKey?Hs():js()),(E.ctrlKey||E.metaKey)&&E.key==="y"&&(E.preventDefault(),Hs()),E.key==="ArrowLeft"&&!E.ctrlKey&&!E.metaKey&&!E.shiftKey&&Bs(),E.key==="ArrowRight"&&!E.ctrlKey&&!E.metaKey&&!E.shiftKey&&$i(),(E.key==="t"||E.key==="T")&&Zo())};return window.addEventListener("keydown",m),()=>window.removeEventListener("keydown",m)},[js,Hs,Bs,$i,Zo]),z.useEffect(()=>{localStorage.setItem("timekerper-tasks",JSON.stringify(l))},[l]),z.useEffect(()=>{localStorage.setItem("timekerper-events",JSON.stringify(a))},[a]),z.useEffect(()=>{localStorage.setItem("timekerper-settings",JSON.stringify(r))},[r]),z.useEffect(()=>{localStorage.setItem("timekerper-tags",JSON.stringify(h))},[h]),z.useEffect(()=>{localStorage.setItem("timekerper-activeTaskId",JSON.stringify(y))},[y]),z.useEffect(()=>{localStorage.setItem("tk_calendarView",ie)},[ie]),z.useEffect(()=>{if(!y||!T)return;const m=setInterval(()=>{const E=rn()+F;ge(E);const k=l.find(D=>D.id===y);if(k&&k.startedAtMin!=null){const D=k.startedAtDate||ft(),L=Cf(a,k.pauseEvents||[],k.startedAtMin,E,D);x(Math.max(0,E-k.startedAtMin-L))}},1e3);return()=>clearInterval(m)},[y,T,F,l,a]),z.useEffect(()=>{if(y)return;const m=()=>ge(rn()+F);m();const E=setInterval(m,15e3);return()=>clearInterval(E)},[y,F]),z.useEffect(()=>{document.documentElement.setAttribute("data-theme",r.darkMode===!0?"dark":"light")},[r.darkMode]),z.useEffect(()=>{if(!he)return;const m=E=>{Fo.current&&!Fo.current.contains(E.target)&&b(!1)};return document.addEventListener("mousedown",m),()=>document.removeEventListener("mousedown",m)},[he]),z.useEffect(()=>{const m=k=>{if(Ga.current){const D=Math.max(260,Math.min(k.clientX,window.innerWidth-300));Tu(D)}else if(qi.current){const D=document.querySelector(".header")?.offsetHeight||0,L=k.clientY-D,X=window.innerHeight-D,H=Math.max(120,Math.min(L,X-200));vl(H)}},E=()=>{Ga.current&&(Ga.current=!1,document.body.style.cursor="",document.body.style.userSelect=""),qi.current&&(qi.current=!1,document.body.style.cursor="",document.body.style.userSelect="")};return window.addEventListener("mousemove",m),window.addEventListener("mouseup",E),()=>{window.removeEventListener("mousemove",m),window.removeEventListener("mouseup",E)}},[]);const $o=z.useCallback(()=>{Ga.current=!0,document.body.style.cursor="col-resize",document.body.style.userSelect="none"},[]),Cl=z.useCallback(()=>{qi.current=!0,document.body.style.cursor="row-resize",document.body.style.userSelect="none"},[]),wi=z.useMemo(()=>r.useExtendedHours?r:{...r,extendedStart:r.workdayStart,extendedEnd:r.workdayEnd},[r]),_n=z.useMemo(()=>li.map(m=>_E(l,a,wi,y,I,m)),[li,l,a,wi,y,I,Y]),Sl=z.useMemo(()=>_n.map(m=>{const E={};for(const k of m)k.type==="task"&&(E[k.taskId]=Math.max(E[k.taskId]||0,k.blockIndex+1));return E}),[_n]),Tl=z.useMemo(()=>_n.map(m=>{const E=m.map((L,X)=>({...L,_idx:X})).filter(L=>L.type==="event");if(E.length===0)return{};const k={},D=[];for(const L of E){const X=D.filter(Se=>Se.endMin>L.startMin);D.length=0,D.push(...X);const H=new Set(D.map(Se=>Se.col));let ce=0;for(;H.has(ce);)ce++;D.push({endMin:L.endMin,col:ce}),k[L._idx]={col:ce,total:0}}for(const L of E){let X=1;for(const H of E)H.startMin<L.endMin&&H.endMin>L.startMin&&(X=Math.max(X,k[H._idx].col+1));k[L._idx].total=X}return k}),[_n]),pt=l.find(m=>!m.completed),qt=l.find(m=>m.id===y),Wo=qt&&I>(qt.adjustedDuration??qt.duration),Pt=Ie(wi.extendedStart),Kn=Ie(wi.extendedEnd),El=Ie(r.workdayStart),er=Ie(r.workdayEnd),yt=r.zoomLevel,kn=(Kn-Pt)*yt,Ks=Math.floor(Pt/60),tr=Math.ceil(Kn/60),_i=Array.from({length:tr-Ks},(m,E)=>Ks+E),ci=z.useCallback(m=>m&&h.find(E=>E.id===m)?.color||null,[h]),Ps=z.useCallback(m=>m&&h.find(E=>E.id===m)?.name||null,[h]),nr=z.useCallback((m,E,k)=>{const D=(m.startMin-Pt)*yt,L=(m.endMin-m.startMin)*yt,X={top:`${D}px`,height:`${Math.max(L,4)}px`},H=k[E];if(H&&H.total>1){const ze=`(100% - ${8+2*(H.total-1)}px) / ${H.total}`;X.left=`calc(4px + ${H.col} * (${ze} + 2px))`,X.width=`calc(${ze})`,X.right="auto"}return X},[Pt,yt]),Al=z.useCallback(m=>(m.endMin-m.startMin)*yt,[yt]),_e=z.useCallback((m,E)=>{(m==="extendedEnd"||m==="workdayEnd")&&E==="00:00"&&(E="23:59"),d(k=>({...k,[m]:E}))},[]),Pn=z.useCallback((m,E)=>{const k=m.match(/^(.+?)\s+\[(.+?)\]$/);let D=null,L=m;if(k){L=k[1];const X=k[2];D=h.find(H=>H.name===X)?.id??null}if(r.smartDuration){const X=L.match(/^(.+?)\s+(\d+)$/);if(X)return{name:X[1],duration:parseInt(X[2],10),tagId:D}}return{name:L,duration:E,tagId:D}},[r.smartDuration,h]),ir=z.useCallback(()=>{if(!pt)return;const m=(pt.pausedElapsed||0)*6e4,E=rn()+F;n(k=>k.map(D=>{if(D.id!==pt.id)return D;const L={};if(D.startedAtMin==null&&(L.startedAtMin=E,L.startedAtDate=ft()),D.pausedAtMin!=null){L.pauseGapMinutes=(D.pauseGapMinutes||0)+Math.max(0,E-D.pausedAtMin),L.pausedAtMin=null;const X=[...D.pauseEvents||[]];X.length>0&&X[X.length-1].end==null&&(X[X.length-1]={...X[X.length-1],end:E}),L.pauseEvents=X}return Object.keys(L).length>0?{...D,...L}:D})),p(pt.id),S(Date.now()-m),x(pt.pausedElapsed||0)},[pt,F]),Wi=()=>{const m=rn()+F,E=r.restrictTasksToWorkHours?Ie(r.workdayStart):Ie(r.extendedStart),k=r.restrictTasksToWorkHours?Ie(r.workdayEnd):Ie(r.extendedEnd);if(m<E||m>=k)return!0;const D=ft(),L=r.minFragmentMinutes||5;return a.filter(X=>X.date===D).some(X=>{const H=Ie(X.start),ce=Ie(X.end);return m>=H&&m<ce||H>m&&H-m<=L})},ui=z.useCallback(()=>{if(!y)return;Pe();const m=I,E=rn()+F;n(k=>{const D=k.map(L=>{if(L.id!==y)return L;const X=L.startedAtMin+(L.pausedElapsed||0)+(L.pauseGapMinutes||0);return{...L,completed:!0,actualDuration:m,workSegments:[...L.workSegments||[],{start:X,end:E,date:ft()}],pausedElapsed:0,pausedAtMin:null,pauseEvents:[]}});if(r.autoStartNext&&!Wi()){const L=D.find(X=>!X.completed);if(L){const X=(L.pausedElapsed||0)*6e4,H=rn()+F;setTimeout(()=>{n(ce=>ce.map(Se=>{if(Se.id!==L.id)return Se;const Fe={};if(Se.startedAtMin==null&&(Fe.startedAtMin=H,Fe.startedAtDate=ft()),Se.pausedAtMin!=null){Fe.pauseGapMinutes=(Se.pauseGapMinutes||0)+Math.max(0,H-Se.pausedAtMin),Fe.pausedAtMin=null;const ze=[...Se.pauseEvents||[]];ze.length>0&&ze[ze.length-1].end==null&&(ze[ze.length-1]={...ze[ze.length-1],end:H}),Fe.pauseEvents=ze}return Object.keys(Fe).length>0?{...Se,...Fe}:Se})),p(L.id),S(Date.now()-X),x(L.pausedElapsed||0)},0)}else p(null),S(null),x(0)}else p(null),S(null),x(0);return D})},[y,Pe,r.autoStartNext,a,F]),ar=z.useCallback(()=>{if(!y)return;Pe();const m=rn()+F;n(E=>E.map(k=>{if(k.id!==y)return k;const D=k.startedAtMin+(k.pausedElapsed||0)+(k.pauseGapMinutes||0);return{...k,pausedElapsed:I,pausedAtMin:m,workSegments:[...k.workSegments||[],{start:D,end:m,date:ft()}],pauseEvents:[...k.pauseEvents||[],{start:m,end:null,date:ft()}]}})),p(null),S(null),x(0)},[y,I,Pe,F]),Qa=z.useCallback(()=>{y&&n(m=>m.map(E=>E.id===y?{...E,startedAtMin:null,startedAtDate:null,pausedAtMin:null,pauseGapMinutes:0,pausedElapsed:0,workSegments:[],pauseEvents:[]}:E)),p(null),S(null),x(0)},[y]),qa=z.useCallback(m=>{y&&(Pe(),n(E=>E.map(k=>{if(k.id!==y)return k;const D=k.adjustedDuration??k.duration;return{...k,adjustedDuration:Math.max(5,D+m)}})))},[y,Pe]),Gs=()=>{J(null),Qi(""),Ha(r.defaultTaskDuration),Ns(null),pl(!1),Re(!0)},ea=m=>{J(m),Qi(m.name),Ha(m.adjustedDuration??m.duration),Ns(m.tagId),Re(!0)},Ja=()=>{if(ti.trim()){if(Pe(),M)n(m=>m.map(E=>E.id===M.id?{...E,name:ti,adjustedDuration:ja,tagId:Rs}:E));else{const E=ti.split(`
`).map(k=>k.trim()).filter(k=>k.length>0).map((k,D)=>{const L=Pn(k,ja);return{id:Date.now()+D,name:L.name,duration:L.duration,adjustedDuration:null,completed:!1,tagId:L.tagId!==null?L.tagId:Rs,pausedElapsed:0}});n(k=>Kt?[...E,...k]:[...k,...E])}Re(!1)}},Mt=m=>{Pe(),m===y&&Qa(),n(E=>E.filter(k=>k.id!==m))},ki=m=>{Pe();const E=m===y,k=E?I:0,D=rn()+F;E&&!r.autoStartNext&&(p(null),S(null),x(0)),n(L=>{const X=L.map(H=>{if(H.id!==m)return H;if(H.completed)return{...H,completed:!1,actualDuration:void 0,startedAtMin:null,startedAtDate:null,pausedAtMin:null,pauseGapMinutes:0,pausedElapsed:0,workSegments:[],pauseEvents:[]};{const ce={...H,completed:!0,pausedElapsed:0,pausedAtMin:null,pauseEvents:[]};if(E){const Se=H.startedAtMin+(H.pausedElapsed||0)+(H.pauseGapMinutes||0);ce.workSegments=[...H.workSegments||[],{start:Se,end:D,date:ft()}],ce.actualDuration=k}else H.workSegments?.length>0?ce.actualDuration=H.workSegments.reduce((Se,Fe)=>Se+(Fe.end-Fe.start),0):ce.actualDuration=0;return ce}});if(E&&r.autoStartNext&&!Wi()){const H=X.find(ce=>!ce.completed);if(H){const ce=(H.pausedElapsed||0)*6e4,Se=rn()+F;setTimeout(()=>{n(Fe=>Fe.map(ze=>{if(ze.id!==H.id)return ze;const _t={};if(ze.startedAtMin==null&&(_t.startedAtMin=Se,_t.startedAtDate=ft()),ze.pausedAtMin!=null){_t.pauseGapMinutes=(ze.pauseGapMinutes||0)+Math.max(0,Se-ze.pausedAtMin),_t.pausedAtMin=null;const kt=[...ze.pauseEvents||[]];kt.length>0&&kt[kt.length-1].end==null&&(kt[kt.length-1]={...kt[kt.length-1],end:Se}),_t.pauseEvents=kt}return Object.keys(_t).length>0?{...ze,..._t}:ze})),p(H.id),S(Date.now()-ce),x(H.pausedElapsed||0)},0)}else p(null),S(null),x(0)}return X})},Vs=m=>{Pe();const E=l.findIndex(L=>L.id===m.id),k={...m,id:Date.now(),completed:!1,pausedElapsed:0,adjustedDuration:null,startedAtMin:null,startedAtDate:null,pausedAtMin:null,pauseGapMinutes:0,workSegments:[],pauseEvents:[]},D=[...l];D.splice(E+1,0,k),n(D)},Xa=()=>{$(null),Ms("");const m=new Date,E=m.getHours()*60+m.getMinutes(),k=Math.ceil((E+1)/30)*30,D=Math.min(k,Ie(wi.extendedEnd)-r.defaultEventDuration);Ko(cn(D));const L=D+r.defaultEventDuration;La(cn(L)),ni(null),bn(Z),ii.current=!1,q(!0)},bl=m=>{$(m),Ms(m.name),Ko(m.start),La(m.end),ni(m.tagId),bn(m.date||ft()),ii.current=!0,q(!0)},sr=m=>{const E=gI(m,fn);if(!ii.current){const k=Ie(fn),L=Ie(za)-k,X=Ie(E);La(cn(X+L))}Ko(E)},or=m=>{ii.current=!0,La(m)},Ii=()=>{const m=Bo.trim()||"Event";let E=za;Ie(za)<=Ie(fn)&&(E=cn(Ie(fn)+r.defaultEventDuration)),Pe(),o(P?k=>k.map(D=>D.id===P.id?{...D,name:m,start:fn,end:E,tagId:xs,date:Nt}:D):k=>[...k,{id:Date.now(),name:m,start:fn,end:E,tagId:xs,date:Nt}]),q(!1)},Za=m=>{Pe(),o(E=>E.filter(k=>k.id!==m))},wl=z.useCallback(()=>{Pe(),y&&(p(null),S(null),x(0)),n([])},[Pe,y]),Au=z.useCallback(()=>{Pe(),o(m=>m.filter(E=>E.date!==Z))},[Pe,Z]),bu=z.useCallback(()=>{Pe(),n(m=>m.filter(E=>!E.completed))},[Pe]),wu=z.useCallback(()=>{Pe(),o(m=>m.filter(E=>{if(E.date<Z)return!1;if(E.date===Z){if(Z<W)return!1;if(Z===W)return Ie(E.end)>Y}return!0}))},[Pe,Z,Y,W]),rr=(m,E)=>{Us(E),m.dataTransfer.effectAllowed="move",m.dataTransfer.setData("text/plain",E)},_u=(m,E)=>{m.preventDefault(),m.dataTransfer.dropEffect="move",E!==Qo&&wn(E)},ku=(m,E)=>{m.preventDefault(),!(Ji===null||Ji===E)&&(Pe(),n(k=>{const D=[...k],L=D.findIndex(ce=>ce.id===Ji),X=D.findIndex(ce=>ce.id===E),[H]=D.splice(L,1);return D.splice(X,0,H),D}),Us(null),wn(null))},Iu=()=>{Us(null),wn(null)},Ou=()=>{f(m=>[...m,{id:Date.now(),name:"New Tag",color:"#94a3b8"}])},_l=(m,E)=>{f(k=>k.map(D=>D.id===m?{...D,...E}:D))},kl=m=>{Pe(),f(E=>E.filter(k=>k.id!==m)),n(E=>E.map(k=>k.tagId===m?{...k,tagId:null}:k)),o(E=>E.map(k=>k.tagId===m?{...k,tagId:null}:k))},Ru=()=>{const m=Object.fromEntries(Object.entries(r).filter(([X])=>!Wv.includes(X))),E=JSON.stringify({settings:m,tags:h,version:1},null,2),k=new Blob([E],{type:"application/json"}),D=URL.createObjectURL(k),L=document.createElement("a");L.href=D,L.download="timekerper-settings.json",L.click(),URL.revokeObjectURL(D)},Nu=()=>{const E=l.filter(k=>!k.completed).map(k=>{const D=k.adjustedDuration??k.duration;return`${k.name} ${D}`}).join(`
`);navigator.clipboard.writeText(E),Si("tasks"),setTimeout(()=>Si(k=>k==="tasks"?null:k),1500)},Mu=()=>{const m=ft(),k=a.filter(D=>D.date>=m).sort((D,L)=>D.date<L.date?-1:D.date>L.date?1:Ie(D.start)-Ie(L.start)).map(D=>{const L=Ps(D.tagId),X=L?` [${L}]`:"";return`${D.name} ${D.start}-${D.end} ${D.date}${X}`}).join(`
`);navigator.clipboard.writeText(k),Si("events"),setTimeout(()=>Si(D=>D==="events"?null:D),1500)},xu=()=>{const m=Go.split(`
`).map(X=>X.trim()).filter(X=>X.length>0);if(m.length===0)return;Pe();const E=[];for(const X of m){const H=X.match(/^(.+?)\s+(\d{1,2}:\d{2})\s*-\s*(\d{1,2}:\d{2})\s+(\d{4}-\d{2}-\d{2})(?:\s+\[(.+?)\])?$/);if(H){const ce=H[5],Se=ce?h.find(Fe=>Fe.name===ce)?.id??null:null;E.push({id:Date.now()+E.length,name:H[1],start:H[2].padStart(5,"0"),end:H[3].padStart(5,"0"),date:H[4],tagId:Se})}}let k=[...a];const D=[];let L=0;for(const X of E){const H=k.findIndex(ce=>ce.name===X.name&&ce.start===X.start&&ce.end===X.end&&ce.date===X.date);H>=0?(X.tagId!=null&&k[H].tagId==null&&(k[H]={...k[H],tagId:X.tagId}),L++):D.push(X)}(D.length>0||k!==a)&&o([...k,...D]),L>0&&D.length===0?alert(`All ${L} event${L!==1?"s":""} already exist. Nothing imported.`):L>0&&alert(`Added ${D.length} event${D.length!==1?"s":""}. Skipped ${L} duplicate${L!==1?"s":""}.`),Vo(""),Po(!1)},lr=m=>{const E=m.target.files?.[0];if(!E)return;const k=new FileReader;k.onload=D=>{try{const L=JSON.parse(D.target.result);if(L.settings){const X=Object.fromEntries(Object.entries(L.settings).filter(([H])=>!Wv.includes(H)));d(H=>({...H,...X}))}L.tags&&Array.isArray(L.tags)&&f(L.tags)}catch{}},k.readAsText(E),m.target.value=""},Fs=(m,E)=>{const k=m.filter(H=>!H.categories||H.categories.length===0?!0:!H.categories.some(ce=>E.some(Se=>Se.include===!1&&Se.category.toLowerCase()===ce.toLowerCase())));if(k.length===0){alert("No events to import after applying category filters.");return}Pe();const D=k.map((H,ce)=>{let Se=null;if(H.categories&&H.categories.length>0)for(const Fe of H.categories){const ze=E.find(_t=>_t.include!==!1&&_t.tagId&&_t.category.toLowerCase()===Fe.toLowerCase());if(ze){Se=ze.tagId;break}}return{id:Date.now()+ce,name:H.name,start:H.start,end:H.end,date:H.date,tagId:Se,icsImported:!0}}),L=r.icsReplaceOnImport;if(L==="ask"){Os({newEvents:D});return}cr(D,L==="yes"||L===!0)},cr=(m,E)=>{const k=E?a.filter(H=>!H.icsImported):a;let D=[...k];const L=[];let X=0;for(const H of m){const ce=D.findIndex(Se=>Se.name===H.name&&Se.start===H.start&&Se.end===H.end&&Se.date===H.date);ce>=0?(H.tagId!=null&&D[ce].tagId==null&&(D[ce]={...D[ce],tagId:H.tagId}),X++):L.push(H)}if(L.length===0&&D===k){alert(`All ${X} event${X!==1?"s":""} already exist. Nothing imported.`),E&&o(k);return}o([...D,...L]),X>0&&alert(`Imported ${L.length} event${L.length!==1?"s":""}. Skipped ${X} duplicate${X!==1?"s":""}.`)},Du=m=>{const E=m.target.files?.[0];if(!E)return;const k=new FileReader;k.onload=D=>{try{const L=wE(D.target.result),X={...r,icsCategoryRules:[]},H=tC(L,X,ke,ye);if(H.length===0){alert("No events to import. Check your status filter settings or date range.");return}const ce={};let Se=0;for(const xt of H)if(xt.categories&&xt.categories.length>0)for(const Jt of xt.categories)ce[Jt]=(ce[Jt]||0)+1;else Se++;const Fe=Object.keys(ce).sort();if(Fe.length===0){Fs(H,[]);return}const ze=r.icsCategoryRules||[];if(Fe.every(xt=>ze.some(Jt=>Jt.category.toLowerCase()===xt.toLowerCase()))){Fs(H,ze);return}const kt=Fe.map(xt=>{const Jt=ze.find(Wa=>Wa.category.toLowerCase()===xt.toLowerCase());return Jt?{category:xt,include:Jt.include,tagId:Jt.tagId}:{category:xt,include:!0,tagId:null}});Rt(kt),ei({mode:"import",filteredEvents:H,catCounts:ce,uncategorized:Se})}catch{alert("Could not parse the .ics file. Make sure it is a valid iCalendar file.")}},k.readAsText(E),m.target.value=""},Il=()=>{Rt([...r.icsCategoryRules||[]]),ei({mode:"settings"})},Uu=(m,E)=>{wt(E),m.dataTransfer.effectAllowed="move",m.dataTransfer.setData("text/plain",E)},ju=(m,E)=>{m.preventDefault(),m.dataTransfer.dropEffect="move",E!==Ei&&Va(E)},Hu=(m,E)=>{m.preventDefault(),!(lt===null||lt===E)&&(f(k=>{const D=[...k],L=D.findIndex(ce=>ce.id===lt),X=D.findIndex(ce=>ce.id===E),[H]=D.splice(L,1);return D.splice(X,0,H),D}),wt(null),Va(null))},zu=()=>{wt(null),Va(null)},Ol=()=>{const m=wa.find(E=>E>r.zoomLevel);m!=null&&(_e("zoomLevel",m),_e("fitMode",!1))},Rl=()=>{const m=[...wa].reverse().find(E=>E<r.zoomLevel);m!=null&&(_e("zoomLevel",m),_e("fitMode",!1))},Ys=z.useCallback(()=>{if(!Ti.current)return;const m=Ti.current.clientHeight,E=Kn-Pt;if(E<=0)return;const k=Math.max(.1,Math.min(5,m/E));_e("zoomLevel",Math.floor(k*100)/100),_e("fitMode",!0)},[Kn,Pt,_e]);z.useEffect(()=>{if(!r.fitMode)return;const m=()=>{Ys()};return window.addEventListener("resize",m),()=>window.removeEventListener("resize",m)},[r.fitMode,Ys]);const ur=m=>{m.key==="Enter"&&(m.ctrlKey||!M&&!ti.includes(`
`)&&m.target.tagName!=="TEXTAREA")&&Ja(),m.key==="Enter"&&M&&Ja()},Lu=m=>{m.key==="Enter"&&(m.preventDefault(),ai.current?.focus())},dr=m=>{m.key==="Enter"&&(m.preventDefault(),Ka.current?.focus())},$a=m=>{m.key==="Enter"&&(m.preventDefault(),Ii())};return v.jsxs("div",{className:"app",children:[v.jsxs("header",{className:"header",children:[v.jsxs("h1",{children:["Timekerper",qo,ut&&v.jsx("span",{className:`outlook-indicator ${Qt}`,title:Qt==="error"?Fa||"Error":Qt==="fetching"?"Fetching...":mn?`Outlook: ${mn.toLocaleTimeString([],{hour:"numeric",minute:"2-digit"})}`:"Outlook connected"})]}),v.jsxs("div",{className:"header-right",children:[v.jsxs("div",{className:"undo-redo",children:[v.jsx("button",{onClick:js,disabled:!zs,title:"Undo (Ctrl+Z)",children:""}),v.jsx("button",{onClick:Hs,disabled:!Ls,title:"Redo (Ctrl+Shift+Z)",children:""})]}),v.jsxs("div",{className:"zoom-controls",children:[v.jsx("button",{onClick:Rl,disabled:r.zoomLevel<=wa[0],children:""}),v.jsxs("span",{className:"zoom-label",children:[Math.round(yt*100),"%"]}),v.jsx("button",{onClick:Ol,disabled:r.zoomLevel>=wa[wa.length-1],children:"+"}),v.jsx("button",{onClick:Ys,className:"fit-btn",title:"Fit calendar to window height",children:"Fit"})]}),v.jsxs("div",{className:"view-toggle",children:[v.jsx("button",{className:ie==="1day"?"active":"",onClick:()=>ct("1day"),children:"Day"}),v.jsx("button",{className:ie==="2day"?"active":"",onClick:()=>ct("2day"),children:"2"}),v.jsx("button",{className:ie==="3day"?"active":"",onClick:()=>ct("3day"),children:"3"}),v.jsx("button",{className:ie==="4day"?"active":"",onClick:()=>ct("4day"),children:"4"}),v.jsx("button",{className:ie==="5day"?"active":"",onClick:()=>ct("5day"),children:"5"})]}),v.jsxs("div",{className:"view-menu-wrapper",ref:Fo,children:[v.jsx("button",{className:"view-menu-btn",onClick:()=>b(m=>!m),title:"View options",children:"View "}),he&&v.jsxs("div",{className:"view-menu-dropdown",children:[v.jsxs("div",{className:"view-menu-section",children:[v.jsx("span",{className:"view-menu-label",children:"Zoom"}),v.jsxs("div",{className:"view-menu-row",children:[v.jsx("button",{onClick:Rl,disabled:r.zoomLevel<=wa[0],children:""}),v.jsxs("span",{className:"view-menu-zoom-level",children:[Math.round(yt*100),"%"]}),v.jsx("button",{onClick:Ol,disabled:r.zoomLevel>=wa[wa.length-1],children:"+"}),v.jsx("button",{onClick:Ys,className:"fit-btn",children:"Fit"})]})]}),v.jsxs("div",{className:"view-menu-section",children:[v.jsx("span",{className:"view-menu-label",children:"Layout"}),v.jsxs("div",{className:"view-menu-row",children:[v.jsx("button",{className:ie==="1day"?"active":"",onClick:()=>{ct("1day"),b(!1)},children:"Day"}),v.jsx("button",{className:ie==="2day"?"active":"",onClick:()=>{ct("2day"),b(!1)},children:"2"}),v.jsx("button",{className:ie==="3day"?"active":"",onClick:()=>{ct("3day"),b(!1)},children:"3"}),v.jsx("button",{className:ie==="4day"?"active":"",onClick:()=>{ct("4day"),b(!1)},children:"4"}),v.jsx("button",{className:ie==="5day"?"active":"",onClick:()=>{ct("5day"),b(!1)},children:"5"})]})]})]})]}),v.jsxs("div",{className:"date-nav",children:[v.jsx("button",{className:"date-nav-btn",onClick:Bs,disabled:!Bn,title:"Previous day ()",children:""}),v.jsxs("span",{className:"date-nav-label",children:[v.jsx("span",{className:"date-long",children:CE(Z)}),v.jsx("span",{className:"date-short",children:TE(Z)})]}),v.jsx("button",{className:"date-nav-btn",onClick:$i,disabled:!Wt,title:"Next day ()",children:""}),v.jsx("button",{className:"today-btn",onClick:Zo,disabled:se,title:"Go to today (T)",children:"Today"})]}),v.jsxs("button",{className:"settings-btn",onClick:()=>ne(!0),title:"Settings",children:[v.jsx("span",{className:"settings-label-long",children:"Settings"}),v.jsx("span",{className:"settings-label-short",children:""})]})]})]}),v.jsxs("main",{className:"main-content",children:[v.jsxs("aside",{className:"task-panel",style:{width:`${Pa}px`,"--panel-height":`${yl}px`},children:[Xo?y&&qt?v.jsxs("div",{className:"active-task-panel compact",children:[v.jsxs("div",{className:"active-task-header",children:[v.jsx("h2",{children:"Working On"}),v.jsxs("div",{className:"active-task-actions",children:[v.jsx("button",{className:"btn-done",onClick:ui,children:"Done"}),v.jsx("button",{className:"btn-pause",onClick:ar,children:"Pause"}),v.jsx("button",{className:"btn-cancel",onClick:Qa,children:"Cancel"})]})]}),v.jsx("span",{className:"active-task-name",children:qt.name}),v.jsxs("div",{className:"active-task-row",children:[v.jsxs("div",{className:`timer ${Wo?"over":""}`,children:[v.jsx("span",{className:"elapsed",children:Eo(I)}),v.jsxs("span",{className:"estimate",children:["/ ",Eo(qt.adjustedDuration??qt.duration)]}),qt.adjustedDuration&&qt.adjustedDuration!==qt.duration&&v.jsxs("span",{className:"original-estimate",children:["(orig ",Eo(qt.duration),")"]}),Wo&&v.jsxs("span",{className:"over-notice",children:["+",Eo(I-(qt.adjustedDuration??qt.duration))," over"]})]}),v.jsxs("div",{className:"time-adjust-btns",children:[v.jsx("button",{onClick:()=>qa(-15),children:"-15"}),v.jsx("button",{onClick:()=>qa(-5),children:"-5"}),v.jsx("button",{onClick:()=>qa(5),children:"+5"}),v.jsx("button",{onClick:()=>qa(15),children:"+15"})]})]})]}):v.jsx("div",{className:"start-task-panel compact",children:pt?v.jsxs("div",{className:"start-task-row",children:[v.jsxs("div",{className:"start-task-info",children:[v.jsx("span",{className:"next-task-label",children:"Next:"}),v.jsx("span",{className:"next-task-name",children:pt.name}),v.jsxs("span",{className:"next-task-duration",children:[Eo(pt.adjustedDuration??pt.duration),pt.pausedElapsed>0&&v.jsxs("span",{className:"paused-time",children:[" (",Eo(pt.pausedElapsed)," done)"]})]})]}),v.jsx("button",{className:"btn-start",onClick:ir,children:pt.pausedElapsed>0?"Resume":"Start"})]}):v.jsx("p",{className:"no-tasks",children:"All tasks completed!"})}):v.jsx("div",{className:"date-view-banner",children:v.jsx("span",{className:"date-view-label",children:Z<W?"Viewing past days":"Viewing future days"})}),v.jsxs("div",{className:"panel-scroll",children:[v.jsxs("div",{className:"panel-section",children:[v.jsxs("div",{className:"panel-section-header",children:[v.jsx("h2",{children:"Tasks"}),v.jsxs("span",{className:"task-summary",children:[l.filter(m=>!m.completed).length," tasks,"," ",l.filter(m=>!m.completed).reduce((m,E)=>m+(E.adjustedDuration??E.duration),0)," min"]}),l.some(m=>m.completed)&&v.jsx("button",{className:"section-toggle",onClick:()=>me(m=>!m),children:re?`Show completed (${l.filter(m=>m.completed).length})`:"Hide completed"})]}),v.jsx("ul",{className:"task-list",children:l.map((m,E)=>{if(re&&m.completed)return null;const k=se&&!m.completed&&E===l.findIndex(L=>!L.completed),D=ci(m.tagId);return v.jsxs("li",{draggable:!m.completed,onDragStart:L=>rr(L,m.id),onDragOver:L=>_u(L,m.id),onDrop:L=>ku(L,m.id),onDragEnd:Iu,className:["task-item",m.completed&&"completed",m.id===y&&"active",k&&!m.completed&&"next-up",Qo===m.id&&"drag-over",Ji===m.id&&"dragging"].filter(Boolean).join(" "),title:m.name,children:[v.jsx("span",{className:"drag-handle",title:"Drag to reorder",children:""}),v.jsx("input",{type:"checkbox",checked:m.completed,onChange:()=>ki(m.id),className:"task-checkbox"}),D&&v.jsx("span",{className:"tag-dot",style:{backgroundColor:D},title:Ps(m.tagId)}),v.jsx("span",{className:`task-name${r.wrapListNames?" wrap":""}`,onClick:()=>ea(m),children:m.name}),v.jsxs("span",{className:"list-end",children:[v.jsx("span",{className:"task-duration",onClick:()=>ea(m),style:{cursor:"pointer"},children:m.adjustedDuration&&m.adjustedDuration!==m.duration?`${m.adjustedDuration}m`:`${m.duration}m`}),m.pausedElapsed>0&&!m.completed&&v.jsx("span",{className:"paused-badge",title:"Paused",children:"||"}),v.jsx("button",{className:"action-btn",onClick:()=>Vs(m),title:"Duplicate",children:""}),v.jsx("button",{className:"action-btn delete",onClick:()=>Mt(m.id),title:"Delete",children:""})]})]},m.id)})}),v.jsxs("div",{className:"panel-section-actions",children:[v.jsx("button",{className:"add-btn",onClick:Gs,children:"+ Add Task"}),l.some(m=>!m.completed)&&v.jsx("button",{className:"clear-btn",onClick:Nu,children:Ba==="tasks"?"Copied!":"Export Tasks"}),l.some(m=>m.completed)&&v.jsx("button",{className:"clear-btn",onClick:bu,children:"Clear Completed"}),l.length>0&&v.jsx("button",{className:"clear-btn",onClick:wl,children:"Clear All"})]})]}),v.jsxs("div",{className:"panel-section",children:[v.jsxs("div",{className:"panel-section-header",children:[v.jsx("h2",{children:se?"Events":`Events (${new Date(Z+"T12:00:00").toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})})`}),a.some(m=>m.icsImported||m.outlookSynced)&&(()=>{const E=a.filter(L=>L.date===Z).filter(L=>!(it&&se&&Ie(L.end)<=Y)),k=L=>L.icsImported||L.outlookSynced,D=Ot==="manual"?E.filter(k).length:Ot==="outlook"?E.filter(L=>!k(L)).length:0;return v.jsx("button",{className:"source-filter-toggle",onClick:()=>Ci(L=>L==="all"?"manual":L==="manual"?"outlook":"all"),children:Ot==="all"?"All sources":Ot==="manual"?`Manual only${D?` (${D} hidden)`:""}`:`Outlook only${D?` (${D} hidden)`:""}`})})(),se&&a.filter(m=>m.date===Z).some(m=>Ie(m.end)<=Y)&&v.jsx("button",{className:"section-toggle",onClick:()=>Ue(m=>!m),children:it?`Show past (${a.filter(m=>m.date===Z&&Ie(m.end)<=Y).length})`:"Hide past"})]}),v.jsx("ul",{className:"event-list",children:a.filter(m=>m.date===Z).sort((m,E)=>Ie(m.start)-Ie(E.start)).map(m=>{const E=m.icsImported||m.outlookSynced;if(Ot==="manual"&&E||Ot==="outlook"&&!E)return null;const k=se?Ie(m.end)<=Y:Z<W;if(it&&k)return null;const D=ci(m.tagId);return v.jsxs("li",{className:`event-item${k?" past-event":""}`,onClick:()=>bl(m),title:`${m.name} (${Bh(m.start,m.end,!1)})`,children:[D&&v.jsx("span",{className:"tag-dot",style:{backgroundColor:D},title:Ps(m.tagId)}),m.outlookSynced&&v.jsx("span",{className:"outlook-icon",title:"From Outlook (live)",children:""}),m.icsImported&&!m.outlookSynced&&v.jsx("span",{className:"ics-icon",title:"Imported from .ics file",children:""}),v.jsx("span",{className:`event-name${r.wrapListNames?" wrap":""}`,children:m.name}),v.jsxs("span",{className:"list-end",children:[v.jsx("span",{className:"event-time",children:Bh(m.start,m.end,!1)}),v.jsx("button",{className:"action-btn delete",onClick:L=>{L.stopPropagation(),Za(m.id)},title:"Delete",children:""})]})]},m.id)})}),Yt&&v.jsxs("div",{className:"bulk-event-entry",children:[v.jsx("textarea",{value:Go,onChange:m=>Vo(m.target.value),placeholder:`Paste events (one per line):
Staff Meeting 10:00-12:15 ${ft()} [Internal]
Team meeting 14:00-14:30 ${ft()}`,rows:4,autoFocus:!0}),v.jsxs("div",{className:"bulk-event-actions",children:[v.jsx("button",{className:"btn-primary",onClick:xu,disabled:!Go.trim(),children:"Add Events"}),v.jsx("button",{className:"btn-secondary",onClick:()=>{Po(!1),Vo("")},children:"Cancel"})]})]}),v.jsxs("div",{className:"panel-section-actions",children:[v.jsx("button",{className:"add-btn secondary",onClick:Xa,children:"+ Add Event"}),v.jsx("button",{className:"clear-btn",onClick:()=>Po(m=>!m),children:"Bulk Add"}),v.jsx("button",{className:"clear-btn ics-import-btn",onClick:()=>Ds.current?.click(),children:"Import .ics"}),v.jsx("input",{ref:Ds,type:"file",accept:".ics,.ical,.ifb,.icalendar",onChange:Du,style:{display:"none"}}),ri&&(ut?v.jsx("button",{className:"clear-btn outlook-btn",onClick:Jo,disabled:Qt==="fetching",children:Qt==="fetching"?"Fetching...":" Outlook"}):v.jsx("button",{className:"clear-btn outlook-btn",onClick:bi,children:"Connect Outlook"})),ri&&Qt==="error"&&Fa&&v.jsx("div",{className:"outlook-error",children:Fa}),a.length>0&&v.jsx("button",{className:"clear-btn",onClick:Mu,children:Ba==="events"?"Copied!":"Export Events"}),a.filter(m=>m.date===Z).some(m=>se?Ie(m.end)<=Y:Z<W)&&v.jsx("button",{className:"clear-btn",onClick:wu,children:"Clear Past"}),a.some(m=>m.date===Z)&&v.jsx("button",{className:"clear-btn",onClick:Au,children:"Clear All"})]})]})]})]}),v.jsx("div",{className:"resize-handle resize-handle-h",onMouseDown:$o}),v.jsx("div",{className:"resize-handle resize-handle-v",onMouseDown:Cl}),v.jsxs("section",{className:"calendar-panel",children:[li.length>1&&v.jsxs("div",{className:"day-headers",children:[v.jsx("div",{className:"day-header-spacer"}),li.map(m=>v.jsx("div",{className:`day-header${m===W?" today":""}${m===Z?" focused":""}${m<W?" past":""}`,onClick:()=>ue(m),children:SE(m)},m))]}),v.jsxs("div",{className:"calendar-container",ref:Ti,children:[v.jsx("div",{className:"time-labels",style:{height:`${kn}px`},children:_i.map(m=>v.jsxs("div",{className:"time-label",style:{position:"absolute",top:`${(m*60-Pt)*yt}px`,height:`${60*yt}px`},children:[m>12?m-12:m===0?12:m,":00 ",m>=12?"PM":"AM"]},m))}),li.map((m,E)=>{const k=_n[E],D=Tl[E],L=Sl[E],X=m===W;return v.jsxs("div",{className:`calendar-grid day-column${X?" today":""}${m===Z&&li.length>1?" focused":""}${m<W?" past":""}`,style:{height:`${kn}px`,"--block-title-size":Zh[r.calendarFontSize]?.title||"0.8rem","--block-time-size":Zh[r.calendarFontSize]?.time||"0.65rem"},onClick:()=>li.length>1&&ue(m),children:[_i.map((H,ce)=>v.jsx("div",{className:"hour-line",style:{top:`${(H*60-Pt)*yt}px`}},ce)),El>Pt&&v.jsx("div",{className:"dim-zone",style:{top:0,height:`${(El-Pt)*yt}px`}}),er<Kn&&v.jsx("div",{className:"dim-zone",style:{top:`${(er-Pt)*yt}px`,height:`${(Kn-er)*yt}px`}}),X&&Y>=Pt&&Y<=Kn&&v.jsx("div",{className:"current-time-line",style:{top:`${(Y-Pt)*yt}px`},children:v.jsx("span",{className:"current-time-label",children:"Now"})}),k.map((H,ce)=>{const Se=H.type==="pause",Fe=H.type==="task",ze=ci(H.tagId),_t=Al(H),kt=_t<40,xt=_t<25,Jt=Se?"#f59e0b":ze||(Fe?r.defaultTaskColor:r.defaultEventColor),hr=Se?r.darkMode?"#fbbf24":"#92400e":fI(Jt,Se?.25:Fe?.1:1,r.darkMode),fr=Se?H.name:Fe?H.taskName:H.name;return v.jsx("div",{className:["calendar-block",`${H.type}-block`,H.isActive&&"active",H.isPast&&"past",H.isCompleted&&"completed-block",H.isPausedRemaining&&"paused-remaining",kt&&"compact",xt&&"tiny"].filter(Boolean).join(" "),style:{...nr(H,ce,D),...Se?{color:hr}:{backgroundColor:Fe?hI(Jt,.1,r.darkMode):Jt,color:hr,...Fe?{borderLeft:`10px solid ${Jt}`,borderRadius:(()=>{const es=L[H.taskId]||1,Gn=H.blockIndex===0,ta=H.blockIndex===es-1;return`${Gn?"5px":"0"} 5px 5px ${ta?"5px":"0"}`})()}:{}}},title:`${fr}
${Lh(H.start)} - ${Lh(H.end)}`,onClick:es=>{if(es.stopPropagation(),H.type==="task"){const Gn=l.find(ta=>ta.id===H.taskId);Gn&&ea(Gn)}else if(H.type==="event"){const Gn=a.find(ta=>ta.id===H.id);Gn&&bl(Gn)}},children:v.jsxs("div",{className:"block-content",children:[v.jsxs("span",{className:"block-name",children:[H.outlookSynced&&v.jsx("span",{className:"outlook-icon",children:""}),H.icsImported&&!H.outlookSynced&&v.jsx("span",{className:"ics-icon",children:""}),H.continuesBefore&&" ",fr,H.continuesAfter&&" ",H.isActive&&" "]}),v.jsx("span",{className:"block-time",children:Bh(H.start,H.end,Fe)})]})},`${H.type}-${H.taskId||H.id}-${ce}`)})]},m)})]})]})]}),tt&&v.jsx("div",{className:"modal-overlay",onMouseDown:()=>{ti.trim()?Ja():Re(!1)},children:v.jsxs("div",{className:"modal",onMouseDown:m=>m.stopPropagation(),children:[v.jsx("h3",{children:M?"Edit Task":"Add Tasks"}),v.jsxs("div",{className:"form-group",children:[v.jsxs("label",{children:[M?"Task Name":"Task Name(s)",!M&&v.jsx("span",{className:"label-hint",children:"  one per line for bulk add"})]}),M?v.jsx("input",{type:"text",value:ti,onChange:m=>Qi(m.target.value),onKeyDown:ur,placeholder:"What do you need to do?",autoFocus:!0}):v.jsx("textarea",{value:ti,onChange:m=>Qi(m.target.value),onKeyDown:ur,placeholder:r.smartDuration?`Enter tasks (one per line):
Tech note review
Sherlock #12345678 75
Firewatch investigation 60`:"Enter tasks (one per line)",rows:4,autoFocus:!0}),!M&&r.smartDuration&&v.jsx("p",{className:"form-hint",children:'Numbers at the end of a line set the duration (e.g., "task name 30" = 30 min)'})]}),v.jsxs("div",{className:"form-group",children:[v.jsxs("label",{children:[M?"Duration (minutes)":"Default Duration (minutes)",!M&&r.smartDuration&&v.jsx("span",{className:"label-hint",children:"  used when no number is specified"})]}),v.jsx("input",{type:"number",value:ja,onChange:m=>Ha(Number(m.target.value)),onKeyDown:M?ur:void 0,min:"5",max:"480"})]}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{children:"Tag"}),v.jsxs("div",{className:"tag-selector",children:[v.jsx("button",{className:`tag-option no-tag ${Rs===null?"selected":""}`,onClick:()=>Ns(null),title:"No tag",children:""}),h.map(m=>v.jsx("button",{className:`tag-option ${Rs===m.id?"selected":""}`,onClick:()=>Ns(m.id),style:{backgroundColor:m.color},title:m.name},m.id))]})]}),!M&&v.jsxs("label",{className:"toggle-row",children:[v.jsx("input",{type:"checkbox",checked:Kt,onChange:m=>pl(m.target.checked)}),v.jsx("span",{children:"Add to top of list"})]}),v.jsxs("div",{className:"modal-actions",children:[M&&v.jsx("button",{className:"btn-delete",onClick:()=>{Mt(M.id),Re(!1)},children:"Delete"}),v.jsx("button",{className:"btn-secondary",onClick:()=>Re(!1),children:"Cancel"}),v.jsx("button",{className:"btn-primary",onClick:Ja,children:M?"Save Changes":"Add Task(s)"})]})]})}),j&&v.jsx("div",{className:"modal-overlay",onMouseDown:()=>Ii(),children:v.jsxs("div",{className:"modal",onMouseDown:m=>m.stopPropagation(),children:[v.jsx("h3",{children:P?"Edit Event":"Add Event"}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{children:"Event Name"}),v.jsx("input",{type:"text",value:Bo,onChange:m=>Ms(m.target.value),onKeyDown:Lu,placeholder:"Meeting name",autoFocus:!0})]}),v.jsxs("div",{className:"form-row",children:[v.jsxs("div",{className:"form-group",children:[v.jsx("label",{children:"Start"}),v.jsx("input",{type:"time",value:fn,onChange:m=>sr(m.target.value),ref:ai,onKeyDown:dr})]}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{children:"End"}),v.jsx("input",{type:"time",value:za,onChange:m=>or(m.target.value),ref:Ka,onKeyDown:$a})]})]}),v.jsxs("div",{className:"form-row",children:[v.jsxs("div",{className:"form-group",children:[v.jsx("label",{children:"Date"}),v.jsx("input",{type:"date",value:Nt,onChange:m=>bn(m.target.value),min:ke,max:ye})]}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{children:"Duration"}),v.jsx("div",{className:"quick-duration-btns",children:[30,60,90].map(m=>v.jsxs("button",{className:"quick-dur-btn",onClick:()=>{ii.current=!0,La(cn(Ie(fn)+m))},children:[m,"m"]},m))})]})]}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{children:"Tag"}),v.jsxs("div",{className:"tag-selector",children:[v.jsx("button",{className:`tag-option no-tag ${xs===null?"selected":""}`,onClick:()=>ni(null),title:"No tag",children:""}),h.map(m=>v.jsx("button",{className:`tag-option ${xs===m.id?"selected":""}`,onClick:()=>ni(m.id),style:{backgroundColor:m.color},title:m.name},m.id))]})]}),v.jsxs("div",{className:"modal-actions",children:[P&&v.jsx("button",{className:"btn-delete",onClick:()=>{Za(P.id),q(!1)},children:"Delete"}),v.jsx("button",{className:"btn-secondary",onClick:()=>q(!1),children:"Cancel"}),v.jsx("button",{className:"btn-primary",onClick:Ii,children:P?"Save Changes":"Add Event"})]})]})}),oe&&v.jsx("div",{className:"modal-overlay",onMouseDown:()=>ne(!1),children:v.jsxs("div",{className:"modal modal-wide",onMouseDown:m=>m.stopPropagation(),children:[v.jsx("h3",{children:"Settings"}),v.jsxs("div",{className:"settings-section",children:[v.jsx("h4",{children:"Working Hours"}),v.jsxs("div",{className:"form-row",children:[v.jsxs("div",{className:"form-group",children:[v.jsx("label",{children:"Start"}),v.jsx("input",{type:"time",value:r.workdayStart,onChange:m=>_e("workdayStart",m.target.value)})]}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{children:"End"}),v.jsx("input",{type:"time",value:r.workdayEnd,onChange:m=>_e("workdayEnd",m.target.value)})]})]})]}),v.jsxs("div",{className:"settings-section",children:[v.jsx("h4",{children:"Extended View Hours"}),v.jsxs("label",{className:"toggle-row",children:[v.jsx("input",{type:"checkbox",checked:r.useExtendedHours,onChange:m=>_e("useExtendedHours",m.target.checked)}),v.jsx("span",{children:"Show hours outside working hours"})]}),r.useExtendedHours&&v.jsxs(v.Fragment,{children:[v.jsx("p",{className:"settings-hint",children:"Calendar range  dimmed outside working hours"}),v.jsxs("div",{className:"form-row",children:[v.jsxs("div",{className:"form-group",children:[v.jsx("label",{children:"Start"}),v.jsx("input",{type:"time",value:r.extendedStart,onChange:m=>_e("extendedStart",m.target.value)})]}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{children:"End"}),v.jsx("input",{type:"time",value:r.extendedEnd,onChange:m=>_e("extendedEnd",m.target.value)})]})]})]})]}),v.jsxs("div",{className:"settings-section",children:[v.jsx("h4",{children:"Defaults"}),v.jsxs("div",{className:"form-row",children:[v.jsxs("div",{className:"form-group",children:[v.jsx("label",{children:"Task Duration (min)"}),v.jsx("input",{type:"number",value:r.defaultTaskDuration,onChange:m=>_e("defaultTaskDuration",Number(m.target.value)),min:"5",max:"480"})]}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{children:"Event Duration (min)"}),v.jsx("input",{type:"number",value:r.defaultEventDuration,onChange:m=>_e("defaultEventDuration",Number(m.target.value)),min:"5",max:"480"})]})]}),v.jsxs("div",{className:"form-row",children:[v.jsxs("div",{className:"form-group",children:[v.jsx("label",{children:"Task Color"}),v.jsx("input",{type:"color",value:r.defaultTaskColor,onChange:m=>_e("defaultTaskColor",m.target.value),className:"color-input"})]}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{children:"Event Color"}),v.jsx("input",{type:"color",value:r.defaultEventColor,onChange:m=>_e("defaultEventColor",m.target.value),className:"color-input"})]})]})]}),v.jsxs("div",{className:"settings-section",children:[v.jsx("h4",{children:"Calendar"}),v.jsxs("div",{className:"form-row",children:[v.jsxs("div",{className:"form-group",children:[v.jsx("label",{children:"Min Fragment (min)"}),v.jsx("input",{type:"number",value:r.minFragmentMinutes,onChange:m=>_e("minFragmentMinutes",Math.max(1,Math.min(10,Number(m.target.value)))),min:"1",max:"10"}),v.jsx("p",{className:"form-hint",children:"Smallest task fragment to show (110 min)"})]}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{children:"Font Size"}),v.jsx("select",{value:r.calendarFontSize,onChange:m=>_e("calendarFontSize",m.target.value),className:"select-input",children:Object.entries(Zh).map(([m,E])=>v.jsx("option",{value:m,children:E.label},m))})]})]})]}),v.jsxs("div",{className:"settings-section",children:[v.jsx("h4",{children:"Behavior"}),v.jsxs("label",{className:"toggle-row",children:[v.jsx("input",{type:"checkbox",checked:r.autoStartNext,onChange:m=>_e("autoStartNext",m.target.checked)}),v.jsx("span",{children:"Auto-start next task on completion"})]}),v.jsxs("label",{className:"toggle-row",children:[v.jsx("input",{type:"checkbox",checked:r.smartDuration,onChange:m=>_e("smartDuration",m.target.checked)}),v.jsx("span",{children:"Smart duration  numbers at end of task name set duration"})]}),v.jsxs("label",{className:"toggle-row",children:[v.jsx("input",{type:"checkbox",checked:r.wrapListNames,onChange:m=>_e("wrapListNames",m.target.checked)}),v.jsx("span",{children:"Wrap names in list view"})]}),v.jsxs("label",{className:"toggle-row",children:[v.jsx("input",{type:"checkbox",checked:r.restrictTasksToWorkHours,onChange:m=>_e("restrictTasksToWorkHours",m.target.checked)}),v.jsx("span",{children:"Restrict tasks to work hours only"})]}),v.jsxs("label",{className:"toggle-row",children:[v.jsx("input",{type:"checkbox",checked:r.darkMode,onChange:m=>_e("darkMode",m.target.checked)}),v.jsx("span",{children:"Dark mode"})]})]}),v.jsxs("div",{className:"settings-section",children:[v.jsx("h4",{children:"Tags"}),v.jsx("div",{className:"tag-edit-list",children:h.map(m=>v.jsxs("div",{className:`tag-edit-row${lt===m.id?" dragging":""}${Ei===m.id&&lt!==m.id?" drag-over":""}`,draggable:!0,onDragStart:E=>Uu(E,m.id),onDragOver:E=>ju(E,m.id),onDrop:E=>Hu(E,m.id),onDragEnd:zu,children:[v.jsx("span",{className:"drag-handle",title:"Drag to reorder",children:""}),v.jsx("input",{type:"color",value:m.color,onChange:E=>_l(m.id,{color:E.target.value}),className:"color-input"}),v.jsx("input",{type:"text",value:m.name,onChange:E=>_l(m.id,{name:E.target.value}),className:"tag-name-input"}),v.jsx("button",{className:"action-btn delete",onClick:()=>kl(m.id),children:""})]},m.id))}),v.jsx("button",{className:"add-btn small",onClick:Ou,children:"+ Add Tag"})]}),v.jsxs("div",{className:"settings-section",children:[v.jsx("h4",{children:"Calendar Import Filters"}),v.jsx("p",{className:"settings-hint",children:"Which event statuses to include when importing from .ics files or Outlook live sync"}),v.jsxs("label",{className:"toggle-row",children:[v.jsx("input",{type:"checkbox",checked:r.icsImportBusy,onChange:m=>_e("icsImportBusy",m.target.checked)}),v.jsx("span",{children:"Busy"})]}),v.jsxs("label",{className:"toggle-row",children:[v.jsx("input",{type:"checkbox",checked:r.icsImportOof,onChange:m=>_e("icsImportOof",m.target.checked)}),v.jsx("span",{children:"Out of Office"})]}),v.jsxs("label",{className:"toggle-row",children:[v.jsx("input",{type:"checkbox",checked:r.icsImportTentative,onChange:m=>_e("icsImportTentative",m.target.checked)}),v.jsx("span",{children:"Tentative"})]}),v.jsxs("label",{className:"toggle-row",children:[v.jsx("input",{type:"checkbox",checked:r.icsImportWorkingElsewhere,onChange:m=>_e("icsImportWorkingElsewhere",m.target.checked)}),v.jsx("span",{children:"Working Elsewhere"})]}),v.jsxs("label",{className:"toggle-row",children:[v.jsx("input",{type:"checkbox",checked:r.icsImportFree,onChange:m=>_e("icsImportFree",m.target.checked)}),v.jsx("span",{children:"Free"})]}),v.jsxs("div",{style:{marginTop:"0.75rem"},children:[v.jsxs("label",{className:"toggle-row",children:[v.jsx("input",{type:"checkbox",checked:r.icsImportMeetingsOnly,onChange:m=>_e("icsImportMeetingsOnly",m.target.checked)}),v.jsx("span",{children:"Meetings only (skip appointments with no attendees)"})]}),v.jsxs("label",{className:"toggle-row",children:[v.jsx("span",{children:"Previous imports:"}),v.jsxs("select",{value:r.icsReplaceOnImport===!0?"yes":r.icsReplaceOnImport===!1?"no":r.icsReplaceOnImport,onChange:m=>_e("icsReplaceOnImport",m.target.value),children:[v.jsx("option",{value:"no",children:"Keep (deduplicate)"}),v.jsx("option",{value:"yes",children:"Clear before importing"}),v.jsx("option",{value:"ask",children:"Ask each time"})]})]})]}),v.jsxs("div",{style:{marginTop:"0.5rem"},children:[v.jsxs("button",{className:"btn-secondary",onClick:Il,children:["Category Mapping",(r.icsCategoryRules||[]).length>0?` (${r.icsCategoryRules.length} saved)`:""]}),v.jsx("p",{className:"form-hint",children:"Map Outlook categories to tags or exclude them during import"})]})]}),ri&&v.jsxs("div",{className:"settings-section",children:[v.jsx("h4",{children:"Outlook Calendar (Live)"}),v.jsx("p",{className:"settings-hint",children:"Connect to your Outlook calendar to automatically sync events"}),ut?v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"outlook-status-row",children:[v.jsx("span",{className:`outlook-indicator ${Qt}`}),v.jsxs("span",{children:[Qt==="fetching"&&"Fetching events...",Qt==="idle"&&mn&&`Last fetched ${mn.toLocaleTimeString([],{hour:"numeric",minute:"2-digit"})}`,Qt==="idle"&&!mn&&"Connected",Qt==="error"&&(Fa||"Error fetching events")]}),v.jsx("button",{className:"btn-secondary",onClick:Jo,disabled:Qt==="fetching",style:{marginLeft:"auto"},children:"Refresh Now"})]}),v.jsx("p",{className:"settings-hint",style:{marginTop:"0.5rem"},children:"Uses the same status filters as calendar import (above). Events refresh automatically every 5 minutes."}),v.jsx("button",{className:"btn-secondary",style:{marginTop:"0.5rem"},onClick:Eu,children:"Disconnect"})]}):v.jsx("button",{className:"btn-primary",onClick:bi,children:"Sign in with Microsoft"})]}),v.jsxs("div",{className:"settings-section",children:[v.jsx("h4",{children:"Debug"}),v.jsxs("label",{className:"toggle-row",children:[v.jsx("input",{type:"checkbox",checked:r.debugMode,onChange:m=>_e("debugMode",m.target.checked)}),v.jsx("span",{children:"Debug mode"})]}),r.debugMode&&v.jsxs("div",{className:"form-group",style:{marginTop:"0.5rem"},children:[v.jsx("label",{children:"Time offset (minutes)"}),v.jsx("input",{type:"number",value:r.debugTimeOffset,onChange:m=>_e("debugTimeOffset",Number(m.target.value))}),v.jsxs("p",{className:"form-hint",children:["Effective time: ",Lh(cn(rn()+(r.debugTimeOffset||0)))," ","(",r.debugTimeOffset>0?"+":"",r.debugTimeOffset||0,"m from real time)"]}),v.jsxs("p",{className:"settings-hint",style:{marginTop:"1rem",fontSize:"0.85em",opacity:.7},children:["Last updated: ",dI]})]})]}),Zi,v.jsxs("div",{className:"settings-section",children:[v.jsx("h4",{children:"Transfer Settings"}),v.jsx("p",{className:"settings-hint",children:"Export or import your settings and tags for use on another device"}),v.jsxs("div",{className:"transfer-btns",children:[v.jsx("button",{className:"btn-secondary",onClick:Ru,children:"Export Settings"}),v.jsx("button",{className:"btn-secondary",onClick:()=>Yo.current?.click(),children:"Import Settings"}),v.jsx("input",{ref:Yo,type:"file",accept:".json",onChange:lr,style:{display:"none"}})]})]}),v.jsx("div",{className:"modal-actions",children:v.jsx("button",{className:"btn-primary",onClick:()=>ne(!1),children:"Done"})})]})}),Ua&&v.jsx("div",{className:"modal-overlay",style:{zIndex:200},onMouseDown:()=>Os(null),children:v.jsxs("div",{className:"modal",onMouseDown:m=>m.stopPropagation(),children:[v.jsx("h3",{children:"Clear previously imported events before importing?"}),v.jsxs("div",{className:"modal-actions",children:[v.jsx("button",{onClick:()=>{const{newEvents:m}=Ua;Os(null),cr(m,!1)},children:"Keep (deduplicate)"}),v.jsx("button",{className:"primary",onClick:()=>{const{newEvents:m}=Ua;Os(null),cr(m,!0)},children:"Clear before importing"})]})]})}),bt&&v.jsx("div",{className:"modal-overlay",style:{zIndex:200},onMouseDown:()=>{ei(null),Rt([])},children:v.jsxs("div",{className:"modal modal-wide",onMouseDown:m=>m.stopPropagation(),children:[v.jsx("h3",{children:bt.mode==="import"?"Map Categories":"Category Mapping"}),bt.mode==="import"&&bt.uncategorized>0&&v.jsxs("p",{className:"form-hint",style:{marginBottom:"0.75rem"},children:[bt.uncategorized," event",bt.uncategorized!==1?"s":""," without a category will always be imported."]}),v.jsx("div",{className:"category-mapping-list",children:Bt.map((m,E)=>v.jsxs("div",{className:`category-mapping-row${m.include===!1?" excluded":""}`,children:[bt.mode==="settings"?v.jsx("input",{type:"text",className:"category-rule-name",value:m.category,onChange:k=>{const D=[...Bt];D[E]={...D[E],category:k.target.value},Rt(D)},placeholder:"Category name"}):v.jsxs("span",{className:"category-mapping-name",children:[m.category,bt.catCounts?.[m.category]!=null&&v.jsxs("span",{className:"category-mapping-count",children:["(",bt.catCounts[m.category],")"]})]}),v.jsxs("label",{className:"category-mapping-toggle",children:[v.jsx("input",{type:"checkbox",checked:m.include!==!1,onChange:k=>{const D=[...Bt];D[E]={...D[E],include:k.target.checked},k.target.checked||(D[E].tagId=null),Rt(D)}}),"Include"]}),m.include!==!1&&v.jsxs("div",{className:"tag-selector compact",children:[v.jsx("button",{className:`tag-option no-tag ${m.tagId===null?"selected":""}`,onClick:()=>{const k=[...Bt];k[E]={...k[E],tagId:null},Rt(k)},title:"No tag",children:""}),h.map(k=>v.jsx("button",{className:`tag-option ${m.tagId===k.id?"selected":""}`,onClick:()=>{const D=[...Bt];D[E]={...D[E],tagId:k.id},Rt(D)},style:{backgroundColor:k.color},title:k.name},k.id))]}),bt.mode==="settings"&&v.jsx("button",{className:"action-btn delete",onClick:()=>Rt(k=>k.filter((D,L)=>L!==E)),title:"Remove rule",children:""})]},E))}),bt.mode==="settings"&&v.jsx("button",{className:"btn-secondary",style:{marginTop:"0.5rem"},onClick:()=>Rt(m=>[...m,{category:"",include:!0,tagId:null}]),children:"+ Add Category"}),v.jsxs("div",{className:"modal-actions",style:{marginTop:"1rem"},children:[v.jsx("button",{className:"btn-secondary",onClick:()=>{ei(null),Rt([])},children:"Cancel"}),bt.mode==="import"?v.jsxs(v.Fragment,{children:[v.jsx("button",{className:"btn-primary",onClick:()=>{const m=Bt.filter(E=>E.category.trim());Fs(bt.filteredEvents,m),ei(null),Rt([])},children:"Import"}),v.jsx("button",{className:"btn-primary",onClick:()=>{const m=Bt.filter(E=>E.category.trim());_e("icsCategoryRules",m),Fs(bt.filteredEvents,m),ei(null),Rt([])},children:"Remember & Import"})]}):v.jsx("button",{className:"btn-primary",onClick:()=>{const m=Bt.filter(E=>E.category.trim());_e("icsCategoryRules",m),ei(null),Rt([])},children:"Save"})]})]})})]})}mE.createRoot(document.getElementById("root")).render(v.jsx(z.StrictMode,{children:v.jsx(SI,{})}));
