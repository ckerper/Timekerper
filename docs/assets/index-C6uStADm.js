(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const d of r)if(d.type==="childList")for(const h of d.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&o(h)}).observe(document,{childList:!0,subtree:!0});function a(r){const d={};return r.integrity&&(d.integrity=r.integrity),r.referrerPolicy&&(d.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?d.credentials="include":r.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function o(r){if(r.ep)return;r.ep=!0;const d=a(r);fetch(r.href,d)}})();var jh={exports:{}},qr={};var Py;function cE(){if(Py)return qr;Py=1;var l=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function a(o,r,d){var h=null;if(d!==void 0&&(h=""+d),r.key!==void 0&&(h=""+r.key),"key"in r){d={};for(var f in r)f!=="key"&&(d[f]=r[f])}else d=r;return r=d.ref,{$$typeof:l,type:o,key:h,ref:r!==void 0?r:null,props:d}}return qr.Fragment=n,qr.jsx=a,qr.jsxs=a,qr}var Gy;function uE(){return Gy||(Gy=1,jh.exports=cE()),jh.exports}var v=uE(),Hh={exports:{}},Ee={};var Vy;function dE(){if(Vy)return Ee;Vy=1;var l=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),h=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),k=Symbol.iterator;function N(b){return b===null||typeof b!="object"?null:(b=k&&b[k]||b["@@iterator"],typeof b=="function"?b:null)}var F={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},q=Object.assign,ye={};function Z(b,x,J){this.props=b,this.context=x,this.refs=ye,this.updater=J||F}Z.prototype.isReactComponent={},Z.prototype.setState=function(b,x){if(typeof b!="object"&&typeof b!="function"&&b!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,b,x,"setState")},Z.prototype.forceUpdate=function(b){this.updater.enqueueForceUpdate(this,b,"forceUpdate")};function de(){}de.prototype=Z.prototype;function ae(b,x,J){this.props=b,this.context=x,this.refs=ye,this.updater=J||F}var je=ae.prototype=new de;je.constructor=ae,q(je,Z.prototype),je.isPureReactComponent=!0;var ie=Array.isArray;function ee(){}var re={H:null,A:null,T:null,S:null},Te=Object.prototype.hasOwnProperty;function he(b,x,J){var P=J.ref;return{$$typeof:l,type:b,key:x,ref:P!==void 0?P:null,props:J}}function Ae(b,x){return he(b.type,x,b.props)}function Ge(b){return typeof b=="object"&&b!==null&&b.$$typeof===l}function we(b){var x={"=":"=0",":":"=2"};return"$"+b.replace(/[=:]/g,function(J){return x[J]})}var fe=/\/+/g;function Be(b,x){return typeof b=="object"&&b!==null&&b.key!=null?we(""+b.key):x.toString(36)}function _e(b){switch(b.status){case"fulfilled":return b.value;case"rejected":throw b.reason;default:switch(typeof b.status=="string"?b.then(ee,ee):(b.status="pending",b.then(function(x){b.status==="pending"&&(b.status="fulfilled",b.value=x)},function(x){b.status==="pending"&&(b.status="rejected",b.reason=x)})),b.status){case"fulfilled":return b.value;case"rejected":throw b.reason}}throw b}function D(b,x,J,P,W){var le=typeof b;(le==="undefined"||le==="boolean")&&(b=null);var pe=!1;if(b===null)pe=!0;else switch(le){case"bigint":case"string":case"number":pe=!0;break;case"object":switch(b.$$typeof){case l:case n:pe=!0;break;case S:return pe=b._init,D(pe(b._payload),x,J,P,W)}}if(pe)return W=W(b),pe=P===""?"."+Be(b,0):P,ie(W)?(J="",pe!=null&&(J=pe.replace(fe,"$&/")+"/"),D(W,x,J,"",function(Ot){return Ot})):W!=null&&(Ge(W)&&(W=Ae(W,J+(W.key==null||b&&b.key===W.key?"":(""+W.key).replace(fe,"$&/")+"/")+pe)),x.push(W)),1;pe=0;var it=P===""?".":P+":";if(ie(b))for(var He=0;He<b.length;He++)P=b[He],le=it+Be(P,He),pe+=D(P,x,J,le,W);else if(He=N(b),typeof He=="function")for(b=He.call(b),He=0;!(P=b.next()).done;)P=P.value,le=it+Be(P,He++),pe+=D(P,x,J,le,W);else if(le==="object"){if(typeof b.then=="function")return D(_e(b),x,J,P,W);throw x=String(b),Error("Objects are not valid as a React child (found: "+(x==="[object Object]"?"object with keys {"+Object.keys(b).join(", ")+"}":x)+"). If you meant to render a collection of children, use an array instead.")}return pe}function Y(b,x,J){if(b==null)return b;var P=[],W=0;return D(b,P,"","",function(le){return x.call(J,le,W++)}),P}function te(b){if(b._status===-1){var x=b._result;x=x(),x.then(function(J){(b._status===0||b._status===-1)&&(b._status=1,b._result=J)},function(J){(b._status===0||b._status===-1)&&(b._status=2,b._result=J)}),b._status===-1&&(b._status=0,b._result=x)}if(b._status===1)return b._result.default;throw b._result}var X=typeof reportError=="function"?reportError:function(b){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var x=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof b=="object"&&b!==null&&typeof b.message=="string"?String(b.message):String(b),error:b});if(!window.dispatchEvent(x))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",b);return}console.error(b)},oe={map:Y,forEach:function(b,x,J){Y(b,function(){x.apply(this,arguments)},J)},count:function(b){var x=0;return Y(b,function(){x++}),x},toArray:function(b){return Y(b,function(x){return x})||[]},only:function(b){if(!Ge(b))throw Error("React.Children.only expected to receive a single React element child.");return b}};return Ee.Activity=T,Ee.Children=oe,Ee.Component=Z,Ee.Fragment=a,Ee.Profiler=r,Ee.PureComponent=ae,Ee.StrictMode=o,Ee.Suspense=y,Ee.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=re,Ee.__COMPILER_RUNTIME={__proto__:null,c:function(b){return re.H.useMemoCache(b)}},Ee.cache=function(b){return function(){return b.apply(null,arguments)}},Ee.cacheSignal=function(){return null},Ee.cloneElement=function(b,x,J){if(b==null)throw Error("The argument must be a React element, but you passed "+b+".");var P=q({},b.props),W=b.key;if(x!=null)for(le in x.key!==void 0&&(W=""+x.key),x)!Te.call(x,le)||le==="key"||le==="__self"||le==="__source"||le==="ref"&&x.ref===void 0||(P[le]=x[le]);var le=arguments.length-2;if(le===1)P.children=J;else if(1<le){for(var pe=Array(le),it=0;it<le;it++)pe[it]=arguments[it+2];P.children=pe}return he(b.type,W,P)},Ee.createContext=function(b){return b={$$typeof:h,_currentValue:b,_currentValue2:b,_threadCount:0,Provider:null,Consumer:null},b.Provider=b,b.Consumer={$$typeof:d,_context:b},b},Ee.createElement=function(b,x,J){var P,W={},le=null;if(x!=null)for(P in x.key!==void 0&&(le=""+x.key),x)Te.call(x,P)&&P!=="key"&&P!=="__self"&&P!=="__source"&&(W[P]=x[P]);var pe=arguments.length-2;if(pe===1)W.children=J;else if(1<pe){for(var it=Array(pe),He=0;He<pe;He++)it[He]=arguments[He+2];W.children=it}if(b&&b.defaultProps)for(P in pe=b.defaultProps,pe)W[P]===void 0&&(W[P]=pe[P]);return he(b,le,W)},Ee.createRef=function(){return{current:null}},Ee.forwardRef=function(b){return{$$typeof:f,render:b}},Ee.isValidElement=Ge,Ee.lazy=function(b){return{$$typeof:S,_payload:{_status:-1,_result:b},_init:te}},Ee.memo=function(b,x){return{$$typeof:p,type:b,compare:x===void 0?null:x}},Ee.startTransition=function(b){var x=re.T,J={};re.T=J;try{var P=b(),W=re.S;W!==null&&W(J,P),typeof P=="object"&&P!==null&&typeof P.then=="function"&&P.then(ee,X)}catch(le){X(le)}finally{x!==null&&J.types!==null&&(x.types=J.types),re.T=x}},Ee.unstable_useCacheRefresh=function(){return re.H.useCacheRefresh()},Ee.use=function(b){return re.H.use(b)},Ee.useActionState=function(b,x,J){return re.H.useActionState(b,x,J)},Ee.useCallback=function(b,x){return re.H.useCallback(b,x)},Ee.useContext=function(b){return re.H.useContext(b)},Ee.useDebugValue=function(){},Ee.useDeferredValue=function(b,x){return re.H.useDeferredValue(b,x)},Ee.useEffect=function(b,x){return re.H.useEffect(b,x)},Ee.useEffectEvent=function(b){return re.H.useEffectEvent(b)},Ee.useId=function(){return re.H.useId()},Ee.useImperativeHandle=function(b,x,J){return re.H.useImperativeHandle(b,x,J)},Ee.useInsertionEffect=function(b,x){return re.H.useInsertionEffect(b,x)},Ee.useLayoutEffect=function(b,x){return re.H.useLayoutEffect(b,x)},Ee.useMemo=function(b,x){return re.H.useMemo(b,x)},Ee.useOptimistic=function(b,x){return re.H.useOptimistic(b,x)},Ee.useReducer=function(b,x,J){return re.H.useReducer(b,x,J)},Ee.useRef=function(b){return re.H.useRef(b)},Ee.useState=function(b){return re.H.useState(b)},Ee.useSyncExternalStore=function(b,x,J){return re.H.useSyncExternalStore(b,x,J)},Ee.useTransition=function(){return re.H.useTransition()},Ee.version="19.2.4",Ee}var Fy;function Cf(){return Fy||(Fy=1,Hh.exports=dE()),Hh.exports}var H=Cf(),zh={exports:{}},Jr={},Lh={exports:{}},Bh={};var Yy;function hE(){return Yy||(Yy=1,(function(l){function n(D,Y){var te=D.length;D.push(Y);e:for(;0<te;){var X=te-1>>>1,oe=D[X];if(0<r(oe,Y))D[X]=Y,D[te]=oe,te=X;else break e}}function a(D){return D.length===0?null:D[0]}function o(D){if(D.length===0)return null;var Y=D[0],te=D.pop();if(te!==Y){D[0]=te;e:for(var X=0,oe=D.length,b=oe>>>1;X<b;){var x=2*(X+1)-1,J=D[x],P=x+1,W=D[P];if(0>r(J,te))P<oe&&0>r(W,J)?(D[X]=W,D[P]=te,X=P):(D[X]=J,D[x]=te,X=x);else if(P<oe&&0>r(W,te))D[X]=W,D[P]=te,X=P;else break e}}return Y}function r(D,Y){var te=D.sortIndex-Y.sortIndex;return te!==0?te:D.id-Y.id}if(l.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;l.unstable_now=function(){return d.now()}}else{var h=Date,f=h.now();l.unstable_now=function(){return h.now()-f}}var y=[],p=[],S=1,T=null,k=3,N=!1,F=!1,q=!1,ye=!1,Z=typeof setTimeout=="function"?setTimeout:null,de=typeof clearTimeout=="function"?clearTimeout:null,ae=typeof setImmediate<"u"?setImmediate:null;function je(D){for(var Y=a(p);Y!==null;){if(Y.callback===null)o(p);else if(Y.startTime<=D)o(p),Y.sortIndex=Y.expirationTime,n(y,Y);else break;Y=a(p)}}function ie(D){if(q=!1,je(D),!F)if(a(y)!==null)F=!0,ee||(ee=!0,we());else{var Y=a(p);Y!==null&&_e(ie,Y.startTime-D)}}var ee=!1,re=-1,Te=5,he=-1;function Ae(){return ye?!0:!(l.unstable_now()-he<Te)}function Ge(){if(ye=!1,ee){var D=l.unstable_now();he=D;var Y=!0;try{e:{F=!1,q&&(q=!1,de(re),re=-1),N=!0;var te=k;try{t:{for(je(D),T=a(y);T!==null&&!(T.expirationTime>D&&Ae());){var X=T.callback;if(typeof X=="function"){T.callback=null,k=T.priorityLevel;var oe=X(T.expirationTime<=D);if(D=l.unstable_now(),typeof oe=="function"){T.callback=oe,je(D),Y=!0;break t}T===a(y)&&o(y),je(D)}else o(y);T=a(y)}if(T!==null)Y=!0;else{var b=a(p);b!==null&&_e(ie,b.startTime-D),Y=!1}}break e}finally{T=null,k=te,N=!1}Y=void 0}}finally{Y?we():ee=!1}}}var we;if(typeof ae=="function")we=function(){ae(Ge)};else if(typeof MessageChannel<"u"){var fe=new MessageChannel,Be=fe.port2;fe.port1.onmessage=Ge,we=function(){Be.postMessage(null)}}else we=function(){Z(Ge,0)};function _e(D,Y){re=Z(function(){D(l.unstable_now())},Y)}l.unstable_IdlePriority=5,l.unstable_ImmediatePriority=1,l.unstable_LowPriority=4,l.unstable_NormalPriority=3,l.unstable_Profiling=null,l.unstable_UserBlockingPriority=2,l.unstable_cancelCallback=function(D){D.callback=null},l.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Te=0<D?Math.floor(1e3/D):5},l.unstable_getCurrentPriorityLevel=function(){return k},l.unstable_next=function(D){switch(k){case 1:case 2:case 3:var Y=3;break;default:Y=k}var te=k;k=Y;try{return D()}finally{k=te}},l.unstable_requestPaint=function(){ye=!0},l.unstable_runWithPriority=function(D,Y){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var te=k;k=D;try{return Y()}finally{k=te}},l.unstable_scheduleCallback=function(D,Y,te){var X=l.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?X+te:X):te=X,D){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=te+oe,D={id:S++,callback:Y,priorityLevel:D,startTime:te,expirationTime:oe,sortIndex:-1},te>X?(D.sortIndex=te,n(p,D),a(y)===null&&D===a(p)&&(q?(de(re),re=-1):q=!0,_e(ie,te-X))):(D.sortIndex=oe,n(y,D),F||N||(F=!0,ee||(ee=!0,we()))),D},l.unstable_shouldYield=Ae,l.unstable_wrapCallback=function(D){var Y=k;return function(){var te=k;k=Y;try{return D.apply(this,arguments)}finally{k=te}}}})(Bh)),Bh}var Qy;function fE(){return Qy||(Qy=1,Lh.exports=hE()),Lh.exports}var Kh={exports:{}},Gt={};var qy;function gE(){if(qy)return Gt;qy=1;var l=Cf();function n(y){var p="https://react.dev/errors/"+y;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var S=2;S<arguments.length;S++)p+="&args[]="+encodeURIComponent(arguments[S])}return"Minified React error #"+y+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var o={d:{f:a,r:function(){throw Error(n(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},r=Symbol.for("react.portal");function d(y,p,S){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:T==null?null:""+T,children:y,containerInfo:p,implementation:S}}var h=l.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(y,p){if(y==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Gt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,Gt.createPortal=function(y,p){var S=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(n(299));return d(y,p,null,S)},Gt.flushSync=function(y){var p=h.T,S=o.p;try{if(h.T=null,o.p=2,y)return y()}finally{h.T=p,o.p=S,o.d.f()}},Gt.preconnect=function(y,p){typeof y=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,o.d.C(y,p))},Gt.prefetchDNS=function(y){typeof y=="string"&&o.d.D(y)},Gt.preinit=function(y,p){if(typeof y=="string"&&p&&typeof p.as=="string"){var S=p.as,T=f(S,p.crossOrigin),k=typeof p.integrity=="string"?p.integrity:void 0,N=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;S==="style"?o.d.S(y,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:T,integrity:k,fetchPriority:N}):S==="script"&&o.d.X(y,{crossOrigin:T,integrity:k,fetchPriority:N,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Gt.preinitModule=function(y,p){if(typeof y=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var S=f(p.as,p.crossOrigin);o.d.M(y,{crossOrigin:S,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&o.d.M(y)},Gt.preload=function(y,p){if(typeof y=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var S=p.as,T=f(S,p.crossOrigin);o.d.L(y,S,{crossOrigin:T,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Gt.preloadModule=function(y,p){if(typeof y=="string")if(p){var S=f(p.as,p.crossOrigin);o.d.m(y,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:S,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else o.d.m(y)},Gt.requestFormReset=function(y){o.d.r(y)},Gt.unstable_batchedUpdates=function(y,p){return y(p)},Gt.useFormState=function(y,p,S){return h.H.useFormState(y,p,S)},Gt.useFormStatus=function(){return h.H.useHostTransitionStatus()},Gt.version="19.2.4",Gt}var Jy;function mE(){if(Jy)return Kh.exports;Jy=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(n){console.error(n)}}return l(),Kh.exports=gE(),Kh.exports}var Xy;function pE(){if(Xy)return Jr;Xy=1;var l=fE(),n=Cf(),a=mE();function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function d(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function h(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function f(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function y(e){if(d(e)!==e)throw Error(o(188))}function p(e){var t=e.alternate;if(!t){if(t=d(e),t===null)throw Error(o(188));return t!==e?null:e}for(var i=e,s=t;;){var c=i.return;if(c===null)break;var u=c.alternate;if(u===null){if(s=c.return,s!==null){i=s;continue}break}if(c.child===u.child){for(u=c.child;u;){if(u===i)return y(c),e;if(u===s)return y(c),t;u=u.sibling}throw Error(o(188))}if(i.return!==s.return)i=c,s=u;else{for(var g=!1,C=c.child;C;){if(C===i){g=!0,i=c,s=u;break}if(C===s){g=!0,s=c,i=u;break}C=C.sibling}if(!g){for(C=u.child;C;){if(C===i){g=!0,i=u,s=c;break}if(C===s){g=!0,s=u,i=c;break}C=C.sibling}if(!g)throw Error(o(189))}}if(i.alternate!==s)throw Error(o(190))}if(i.tag!==3)throw Error(o(188));return i.stateNode.current===i?e:t}function S(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=S(e),t!==null)return t;e=e.sibling}return null}var T=Object.assign,k=Symbol.for("react.element"),N=Symbol.for("react.transitional.element"),F=Symbol.for("react.portal"),q=Symbol.for("react.fragment"),ye=Symbol.for("react.strict_mode"),Z=Symbol.for("react.profiler"),de=Symbol.for("react.consumer"),ae=Symbol.for("react.context"),je=Symbol.for("react.forward_ref"),ie=Symbol.for("react.suspense"),ee=Symbol.for("react.suspense_list"),re=Symbol.for("react.memo"),Te=Symbol.for("react.lazy"),he=Symbol.for("react.activity"),Ae=Symbol.for("react.memo_cache_sentinel"),Ge=Symbol.iterator;function we(e){return e===null||typeof e!="object"?null:(e=Ge&&e[Ge]||e["@@iterator"],typeof e=="function"?e:null)}var fe=Symbol.for("react.client.reference");function Be(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===fe?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case q:return"Fragment";case Z:return"Profiler";case ye:return"StrictMode";case ie:return"Suspense";case ee:return"SuspenseList";case he:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case F:return"Portal";case ae:return e.displayName||"Context";case de:return(e._context.displayName||"Context")+".Consumer";case je:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case re:return t=e.displayName||null,t!==null?t:Be(e.type)||"Memo";case Te:t=e._payload,e=e._init;try{return Be(e(t))}catch{}}return null}var _e=Array.isArray,D=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te={pending:!1,data:null,method:null,action:null},X=[],oe=-1;function b(e){return{current:e}}function x(e){0>oe||(e.current=X[oe],X[oe]=null,oe--)}function J(e,t){oe++,X[oe]=e.current,e.current=t}var P=b(null),W=b(null),le=b(null),pe=b(null);function it(e,t){switch(J(le,t),J(W,e),J(P,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?dy(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=dy(t),e=hy(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}x(P),J(P,e)}function He(){x(P),x(W),x(le)}function Ot(e){e.memoizedState!==null&&J(pe,e);var t=P.current,i=hy(t,e.type);t!==i&&(J(W,e),J(P,i))}function vi(e){W.current===e&&(x(P),x(W)),pe.current===e&&(x(pe),Vr._currentValue=te)}var pt,fn;function wt(e){if(pt===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);pt=t&&t[1]||"",fn=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+pt+e+fn}var yt=!1;function La(e,t){if(!e||yt)return"";yt=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(t){var V=function(){throw Error()};if(Object.defineProperty(V.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(V,[])}catch(j){var M=j}Reflect.construct(e,[],V)}else{try{V.call()}catch(j){M=j}e.call(V.prototype)}}else{try{throw Error()}catch(j){M=j}(V=e())&&typeof V.catch=="function"&&V.catch(function(){})}}catch(j){if(j&&M&&typeof j.stack=="string")return[j.stack,M.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var u=s.DetermineComponentFrameRoot(),g=u[0],C=u[1];if(g&&C){var A=g.split(`
`),R=C.split(`
`);for(c=s=0;s<A.length&&!A[s].includes("DetermineComponentFrameRoot");)s++;for(;c<R.length&&!R[c].includes("DetermineComponentFrameRoot");)c++;if(s===A.length||c===R.length)for(s=A.length-1,c=R.length-1;1<=s&&0<=c&&A[s]!==R[c];)c--;for(;1<=s&&0<=c;s--,c--)if(A[s]!==R[c]){if(s!==1||c!==1)do if(s--,c--,0>c||A[s]!==R[c]){var B=`
`+A[s].replace(" at new "," at ");return e.displayName&&B.includes("<anonymous>")&&(B=B.replace("<anonymous>",e.displayName)),B}while(1<=s&&0<=c);break}}}finally{yt=!1,Error.prepareStackTrace=i}return(i=e?e.displayName||e.name:"")?wt(i):""}function Us(e,t){switch(e.tag){case 26:case 27:case 5:return wt(e.type);case 16:return wt("Lazy");case 13:return e.child!==t&&t!==null?wt("Suspense Fallback"):wt("Suspense");case 19:return wt("SuspenseList");case 0:case 15:return La(e.type,!1);case 11:return La(e.type.render,!1);case 1:return La(e.type,!0);case 31:return wt("Activity");default:return""}}function ti(e){try{var t="",i=null;do t+=Us(e,i),i=e,e=e.return;while(e);return t}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}var Qi=Object.prototype.hasOwnProperty,Ba=l.unstable_scheduleCallback,Ka=l.unstable_cancelCallback,js=l.unstable_shouldYield,Hs=l.unstable_requestPaint,Ht=l.unstable_now,yl=l.unstable_getCurrentPriorityLevel,Zo=l.unstable_ImmediatePriority,zs=l.unstable_UserBlockingPriority,gn=l.unstable_NormalPriority,$o=l.unstable_LowPriority,Pa=l.unstable_IdlePriority,Ga=l.log,Ls=l.unstable_setDisableYieldValue,ni=null,Rt=null;function kn(e){if(typeof Ga=="function"&&Ls(e),Rt&&typeof Rt.setStrictMode=="function")try{Rt.setStrictMode(ni,e)}catch{}}var Yt=Math.clz32?Math.clz32:tr,Wo=Math.log,er=Math.LN2;function tr(e){return e>>>=0,e===0?32:31-(Wo(e)/er|0)|0}var Va=256,Ci=262144,ii=4194304;function ai(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Fa(e,t,i){var s=e.pendingLanes;if(s===0)return 0;var c=0,u=e.suspendedLanes,g=e.pingedLanes;e=e.warmLanes;var C=s&134217727;return C!==0?(s=C&~u,s!==0?c=ai(s):(g&=C,g!==0?c=ai(g):i||(i=C&~e,i!==0&&(c=ai(i))))):(C=s&~u,C!==0?c=ai(C):g!==0?c=ai(g):i||(i=s&~e,i!==0&&(c=ai(i)))),c===0?0:t!==0&&t!==c&&(t&u)===0&&(u=c&-c,i=t&-t,u>=i||u===32&&(i&4194048)!==0)?t:c}function Si(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function nr(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ir(){var e=ii;return ii<<=1,(ii&62914560)===0&&(ii=4194304),e}function Bs(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function Ya(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Tu(e,t,i,s,c,u){var g=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var C=e.entanglements,A=e.expirationTimes,R=e.hiddenUpdates;for(i=g&~i;0<i;){var B=31-Yt(i),V=1<<B;C[B]=0,A[B]=-1;var M=R[B];if(M!==null)for(R[B]=null,B=0;B<M.length;B++){var j=M[B];j!==null&&(j.lane&=-536870913)}i&=~V}s!==0&&vl(e,s,0),u!==0&&c===0&&e.tag!==0&&(e.suspendedLanes|=u&~(g&~t))}function vl(e,t,i){e.pendingLanes|=t,e.suspendedLanes&=~t;var s=31-Yt(t);e.entangledLanes|=t,e.entanglements[s]=e.entanglements[s]|1073741824|i&261930}function Cl(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var s=31-Yt(i),c=1<<s;c&t|e[s]&t&&(e[s]|=t),i&=~c}}function Qa(e,t){var i=t&-t;return i=(i&42)!==0?1:qi(i),(i&(e.suspendedLanes|t))!==0?0:i}function qi(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ji(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Ks(){var e=Y.p;return e!==0?e:(e=window.event,e===void 0?32:Uy(e.type))}function ar(e,t){var i=Y.p;try{return Y.p=e,t()}finally{Y.p=i}}var In=Math.random().toString(36).slice(2),lt="__reactFiber$"+In,_t="__reactProps$"+In,Ti="__reactContainer$"+In,qa="__reactEvents$"+In,Ei="__reactListeners$"+In,Xi="__reactHandles$"+In,si="__reactResources$"+In,mn="__reactMarker$"+In;function sr(e){delete e[lt],delete e[_t],delete e[qa],delete e[Ei],delete e[Xi]}function Zi(e){var t=e[lt];if(t)return t;for(var i=e.parentNode;i;){if(t=i[Ti]||i[lt]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=Cy(e);e!==null;){if(i=e[lt])return i;e=Cy(e)}return t}e=i,i=e.parentNode}return null}function oi(e){if(e=e[lt]||e[Ti]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Ve(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(o(33))}function ri(e){var t=e[si];return t||(t=e[si]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function ct(e){e[mn]=!0}var Qt=new Set,Ja={};function pn(e,t){Ai(e,t),Ai(e+"Capture",t)}function Ai(e,t){for(Ja[e]=t,e=0;e<t.length;e++)Qt.add(t[e])}var Eu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),or={},Ps={};function Sl(e){return Qi.call(Ps,e)?!0:Qi.call(or,e)?!1:Eu.test(e)?Ps[e]=!0:(or[e]=!0,!1)}function $i(e,t,i){if(Sl(t))if(i===null)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var s=t.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+i)}}function bi(e,t,i){if(i===null)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+i)}}function Pn(e,t,i,s){if(s===null)e.removeAttribute(i);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttributeNS(t,i,""+s)}}function $t(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Tl(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Au(e,t,i){var s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var c=s.get,u=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(g){i=""+g,u.call(this,g)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return i},setValue:function(g){i=""+g},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Wi(e){if(!e._valueTracker){var t=Tl(e)?"checked":"value";e._valueTracker=Au(e,t,""+e[t])}}function Gn(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),s="";return e&&(s=Tl(e)?e.checked?"true":"false":e.value),e=s,e!==i?(t.setValue(e),!0):!1}function Gs(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var rr=/[\n"\\]/g;function zt(e){return e.replace(rr,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Xa(e,t,i,s,c,u,g,C){e.name="",g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"?e.type=g:e.removeAttribute("type"),t!=null?g==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+$t(t)):e.value!==""+$t(t)&&(e.value=""+$t(t)):g!=="submit"&&g!=="reset"||e.removeAttribute("value"),t!=null?lr(e,g,$t(t)):i!=null?lr(e,g,$t(i)):s!=null&&e.removeAttribute("value"),c==null&&u!=null&&(e.defaultChecked=!!u),c!=null&&(e.checked=c&&typeof c!="function"&&typeof c!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?e.name=""+$t(C):e.removeAttribute("name")}function yn(e,t,i,s,c,u,g,C){if(u!=null&&typeof u!="function"&&typeof u!="symbol"&&typeof u!="boolean"&&(e.type=u),t!=null||i!=null){if(!(u!=="submit"&&u!=="reset"||t!=null)){Wi(e);return}i=i!=null?""+$t(i):"",t=t!=null?""+$t(t):i,C||t===e.value||(e.value=t),e.defaultValue=t}s=s??c,s=typeof s!="function"&&typeof s!="symbol"&&!!s,e.checked=C?e.checked:!!s,e.defaultChecked=!!s,g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(e.name=g),Wi(e)}function lr(e,t,i){t==="number"&&Gs(e.ownerDocument)===e||e.defaultValue===""+i||(e.defaultValue=""+i)}function ea(e,t,i,s){if(e=e.options,t){t={};for(var c=0;c<i.length;c++)t["$"+i[c]]=!0;for(i=0;i<e.length;i++)c=t.hasOwnProperty("$"+e[i].value),e[i].selected!==c&&(e[i].selected=c),c&&s&&(e[i].defaultSelected=!0)}else{for(i=""+$t(i),t=null,c=0;c<e.length;c++){if(e[c].value===i){e[c].selected=!0,s&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function ta(e,t,i){if(t!=null&&(t=""+$t(t),t!==e.value&&(e.value=t),i==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=i!=null?""+$t(i):""}function na(e,t,i,s){if(t==null){if(s!=null){if(i!=null)throw Error(o(92));if(_e(s)){if(1<s.length)throw Error(o(93));s=s[0]}i=s}i==null&&(i=""),t=i}i=$t(t),e.defaultValue=i,s=e.textContent,s===i&&s!==""&&s!==null&&(e.value=s),Wi(e)}function ia(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var bu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Lt(e,t,i){var s=t.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?s?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":s?e.setProperty(t,i):typeof i!="number"||i===0||bu.has(t)?t==="float"?e.cssFloat=i:e[t]=(""+i).trim():e[t]=i+"px"}function Bt(e,t,i){if(t!=null&&typeof t!="object")throw Error(o(62));if(e=e.style,i!=null){for(var s in i)!i.hasOwnProperty(s)||t!=null&&t.hasOwnProperty(s)||(s.indexOf("--")===0?e.setProperty(s,""):s==="float"?e.cssFloat="":e[s]="");for(var c in t)s=t[c],t.hasOwnProperty(c)&&i[c]!==s&&Lt(e,c,s)}else for(var u in t)t.hasOwnProperty(u)&&Lt(e,u,t[u])}function Vs(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qt=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),wi=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Za(e){return wi.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function vn(){}var At=null;function Fs(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var _i=null,aa=null;function cr(e){var t=oi(e);if(t&&(e=t.stateNode)){var i=e[_t]||null;e:switch(e=t.stateNode,t.type){case"input":if(Xa(e,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+zt(""+t)+'"][type="radio"]'),t=0;t<i.length;t++){var s=i[t];if(s!==e&&s.form===e.form){var c=s[_t]||null;if(!c)throw Error(o(90));Xa(s,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name)}}for(t=0;t<i.length;t++)s=i[t],s.form===e.form&&Gn(s)}break e;case"textarea":ta(e,i.value,i.defaultValue);break e;case"select":t=i.value,t!=null&&ea(e,!!i.multiple,t,!1)}}}var $a=!1;function Ys(e,t,i){if($a)return e(t,i);$a=!0;try{var s=e(t);return s}finally{if($a=!1,(_i!==null||aa!==null)&&(uc(),_i&&(t=_i,e=aa,aa=_i=null,cr(t),e)))for(t=0;t<e.length;t++)cr(e[t])}}function Wa(e,t){var i=e.stateNode;if(i===null)return null;var s=i[_t]||null;if(s===null)return null;i=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(o(231,t,typeof i));return i}var Vn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ie=!1;if(Vn)try{var es={};Object.defineProperty(es,"passive",{get:function(){Ie=!0}}),window.addEventListener("test",es,es),window.removeEventListener("test",es,es)}catch{Ie=!1}var li=null,Qs=null,qs=null;function El(){if(qs)return qs;var e,t=Qs,i=t.length,s,c="value"in li?li.value:li.textContent,u=c.length;for(e=0;e<i&&t[e]===c[e];e++);var g=i-e;for(s=1;s<=g&&t[i-s]===c[u-s];s++);return qs=c.slice(e,1<s?1-s:void 0)}function ts(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ki(){return!0}function Al(){return!1}function kt(e){function t(i,s,c,u,g){this._reactName=i,this._targetInst=c,this.type=s,this.nativeEvent=u,this.target=g,this.currentTarget=null;for(var C in e)e.hasOwnProperty(C)&&(i=e[C],this[C]=i?i(u):u[C]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?ki:Al,this.isPropagationStopped=Al,this}return T(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=ki)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=ki)},persist:function(){},isPersistent:ki}),t}var On={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ns=kt(On),is=T({},On,{view:0,detail:0}),wu=kt(is),ur,Js,as,Xs=T({},is,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hr,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==as&&(as&&e.type==="mousemove"?(ur=e.screenX-as.screenX,Js=e.screenY-as.screenY):Js=ur=0,as=e),ur)},movementY:function(e){return"movementY"in e?e.movementY:Js}}),Zs=kt(Xs),bl=T({},Xs,{dataTransfer:0}),_u=kt(bl),ku=T({},is,{relatedTarget:0}),dr=kt(ku),Iu=T({},On,{animationName:0,elapsedTime:0,pseudoElement:0}),Ou=kt(Iu),Ru=T({},On,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Nu=kt(Ru),Mu=T({},On,{data:0}),wl=kt(Mu),_l={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Du={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Uu(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Du[e])?!!t[e]:!1}function hr(){return Uu}var ju=T({},is,{key:function(e){if(e.key){var t=_l[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ts(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?xu[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hr,charCode:function(e){return e.type==="keypress"?ts(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ts(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Hu=kt(ju),$s=T({},Xs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ws=kt($s),zu=T({},is,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hr}),Lu=kt(zu),Bu=T({},On,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ku=kt(Bu),Pu=T({},Xs,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Gu=kt(Pu),kl=T({},On,{newState:0,oldState:0}),Il=kt(kl),eo=[9,13,27,32],ss=Vn&&"CompositionEvent"in window,os=null;Vn&&"documentMode"in document&&(os=document.documentMode);var Vu=Vn&&"TextEvent"in window&&!os,Ol=Vn&&(!ss||os&&8<os&&11>=os),m=" ",E=!1;function I(e,t){switch(e){case"keyup":return eo.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function U(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var z=!1;function $(e,t){switch(e){case"compositionend":return U(t);case"keypress":return t.which!==32?null:(E=!0,m);case"textInput":return e=t.data,e===m&&E?null:e;default:return null}}function L(e,t){if(z)return e==="compositionend"||!ss&&I(e,t)?(e=El(),qs=Qs=li=null,z=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ol&&t.locale!=="ko"?null:t.data;default:return null}}var ue={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ce(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!ue[e.type]:t==="textarea"}function Fe(e,t,i,s){_i?aa?aa.push(s):aa=[s]:_i=s,t=yc(t,"onChange"),0<t.length&&(i=new ns("onChange","change",null,i,s),e.push({event:i,listeners:t}))}var xe=null,ft=null;function Wt(e){sy(e,0)}function Kt(e){var t=Ve(e);if(Gn(t))return e}function Pt(e,t){if(e==="change")return t}var fr=!1;if(Vn){var to;if(Vn){var no="oninput"in document;if(!no){var io=document.createElement("div");io.setAttribute("oninput","return;"),no=typeof io.oninput=="function"}to=no}else to=!1;fr=to&&(!document.documentMode||9<document.documentMode)}function ci(){xe&&(xe.detachEvent("onpropertychange",sa),ft=xe=null)}function sa(e){if(e.propertyName==="value"&&Kt(ft)){var t=[];Fe(t,ft,e,Fs(e)),Ys(Wt,t)}}function kg(e,t,i){e==="focusin"?(ci(),xe=t,ft=i,xe.attachEvent("onpropertychange",sa)):e==="focusout"&&ci()}function Ig(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Kt(ft)}function LS(e,t){if(e==="click")return Kt(t)}function BS(e,t){if(e==="input"||e==="change")return Kt(t)}function KS(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Cn=typeof Object.is=="function"?Object.is:KS;function gr(e,t){if(Cn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),s=Object.keys(t);if(i.length!==s.length)return!1;for(s=0;s<i.length;s++){var c=i[s];if(!Qi.call(t,c)||!Cn(e[c],t[c]))return!1}return!0}function Og(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Rg(e,t){var i=Og(e);e=0;for(var s;i;){if(i.nodeType===3){if(s=e+i.textContent.length,e<=t&&s>=t)return{node:i,offset:t-e};e=s}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Og(i)}}function Ng(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Ng(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Mg(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Gs(e.document);t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=Gs(e.document)}return t}function Fu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var PS=Vn&&"documentMode"in document&&11>=document.documentMode,ao=null,Yu=null,mr=null,Qu=!1;function xg(e,t,i){var s=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Qu||ao==null||ao!==Gs(s)||(s=ao,"selectionStart"in s&&Fu(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),mr&&gr(mr,s)||(mr=s,s=yc(Yu,"onSelect"),0<s.length&&(t=new ns("onSelect","select",null,t,i),e.push({event:t,listeners:s}),t.target=ao)))}function rs(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var so={animationend:rs("Animation","AnimationEnd"),animationiteration:rs("Animation","AnimationIteration"),animationstart:rs("Animation","AnimationStart"),transitionrun:rs("Transition","TransitionRun"),transitionstart:rs("Transition","TransitionStart"),transitioncancel:rs("Transition","TransitionCancel"),transitionend:rs("Transition","TransitionEnd")},qu={},Dg={};Vn&&(Dg=document.createElement("div").style,"AnimationEvent"in window||(delete so.animationend.animation,delete so.animationiteration.animation,delete so.animationstart.animation),"TransitionEvent"in window||delete so.transitionend.transition);function ls(e){if(qu[e])return qu[e];if(!so[e])return e;var t=so[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in Dg)return qu[e]=t[i];return e}var Ug=ls("animationend"),jg=ls("animationiteration"),Hg=ls("animationstart"),GS=ls("transitionrun"),VS=ls("transitionstart"),FS=ls("transitioncancel"),zg=ls("transitionend"),Lg=new Map,Ju="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ju.push("scrollEnd");function Fn(e,t){Lg.set(e,t),pn(t,[e])}var Rl=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Rn=[],oo=0,Xu=0;function Nl(){for(var e=oo,t=Xu=oo=0;t<e;){var i=Rn[t];Rn[t++]=null;var s=Rn[t];Rn[t++]=null;var c=Rn[t];Rn[t++]=null;var u=Rn[t];if(Rn[t++]=null,s!==null&&c!==null){var g=s.pending;g===null?c.next=c:(c.next=g.next,g.next=c),s.pending=c}u!==0&&Bg(i,c,u)}}function Ml(e,t,i,s){Rn[oo++]=e,Rn[oo++]=t,Rn[oo++]=i,Rn[oo++]=s,Xu|=s,e.lanes|=s,e=e.alternate,e!==null&&(e.lanes|=s)}function Zu(e,t,i,s){return Ml(e,t,i,s),xl(e)}function cs(e,t){return Ml(e,null,null,t),xl(e)}function Bg(e,t,i){e.lanes|=i;var s=e.alternate;s!==null&&(s.lanes|=i);for(var c=!1,u=e.return;u!==null;)u.childLanes|=i,s=u.alternate,s!==null&&(s.childLanes|=i),u.tag===22&&(e=u.stateNode,e===null||e._visibility&1||(c=!0)),e=u,u=u.return;return e.tag===3?(u=e.stateNode,c&&t!==null&&(c=31-Yt(i),e=u.hiddenUpdates,s=e[c],s===null?e[c]=[t]:s.push(t),t.lane=i|536870912),u):null}function xl(e){if(50<Hr)throw Hr=0,oh=null,Error(o(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var ro={};function YS(e,t,i,s){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Sn(e,t,i,s){return new YS(e,t,i,s)}function $u(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ii(e,t){var i=e.alternate;return i===null?(i=Sn(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&65011712,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function Kg(e,t){e.flags&=65011714;var i=e.alternate;return i===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,t=i.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Dl(e,t,i,s,c,u){var g=0;if(s=e,typeof e=="function")$u(e)&&(g=1);else if(typeof e=="string")g=ZT(e,i,P.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case he:return e=Sn(31,i,t,c),e.elementType=he,e.lanes=u,e;case q:return us(i.children,c,u,t);case ye:g=8,c|=24;break;case Z:return e=Sn(12,i,t,c|2),e.elementType=Z,e.lanes=u,e;case ie:return e=Sn(13,i,t,c),e.elementType=ie,e.lanes=u,e;case ee:return e=Sn(19,i,t,c),e.elementType=ee,e.lanes=u,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ae:g=10;break e;case de:g=9;break e;case je:g=11;break e;case re:g=14;break e;case Te:g=16,s=null;break e}g=29,i=Error(o(130,e===null?"null":typeof e,"")),s=null}return t=Sn(g,i,t,c),t.elementType=e,t.type=s,t.lanes=u,t}function us(e,t,i,s){return e=Sn(7,e,s,t),e.lanes=i,e}function Wu(e,t,i){return e=Sn(6,e,null,t),e.lanes=i,e}function Pg(e){var t=Sn(18,null,null,0);return t.stateNode=e,t}function ed(e,t,i){return t=Sn(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Gg=new WeakMap;function Nn(e,t){if(typeof e=="object"&&e!==null){var i=Gg.get(e);return i!==void 0?i:(t={value:e,source:t,stack:ti(t)},Gg.set(e,t),t)}return{value:e,source:t,stack:ti(t)}}var lo=[],co=0,Ul=null,pr=0,Mn=[],xn=0,oa=null,ui=1,di="";function Oi(e,t){lo[co++]=pr,lo[co++]=Ul,Ul=e,pr=t}function Vg(e,t,i){Mn[xn++]=ui,Mn[xn++]=di,Mn[xn++]=oa,oa=e;var s=ui;e=di;var c=32-Yt(s)-1;s&=~(1<<c),i+=1;var u=32-Yt(t)+c;if(30<u){var g=c-c%5;u=(s&(1<<g)-1).toString(32),s>>=g,c-=g,ui=1<<32-Yt(t)+c|i<<c|s,di=u+e}else ui=1<<u|i<<c|s,di=e}function td(e){e.return!==null&&(Oi(e,1),Vg(e,1,0))}function nd(e){for(;e===Ul;)Ul=lo[--co],lo[co]=null,pr=lo[--co],lo[co]=null;for(;e===oa;)oa=Mn[--xn],Mn[xn]=null,di=Mn[--xn],Mn[xn]=null,ui=Mn[--xn],Mn[xn]=null}function Fg(e,t){Mn[xn++]=ui,Mn[xn++]=di,Mn[xn++]=oa,ui=t.id,di=t.overflow,oa=e}var Nt=null,at=null,ze=!1,ra=null,Dn=!1,id=Error(o(519));function la(e){var t=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw yr(Nn(t,e)),id}function Yg(e){var t=e.stateNode,i=e.type,s=e.memoizedProps;switch(t[lt]=e,t[_t]=s,i){case"dialog":Me("cancel",t),Me("close",t);break;case"iframe":case"object":case"embed":Me("load",t);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Me(Lr[i],t);break;case"source":Me("error",t);break;case"img":case"image":case"link":Me("error",t),Me("load",t);break;case"details":Me("toggle",t);break;case"input":Me("invalid",t),yn(t,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0);break;case"select":Me("invalid",t);break;case"textarea":Me("invalid",t),na(t,s.value,s.defaultValue,s.children)}i=s.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||t.textContent===""+i||s.suppressHydrationWarning===!0||cy(t.textContent,i)?(s.popover!=null&&(Me("beforetoggle",t),Me("toggle",t)),s.onScroll!=null&&Me("scroll",t),s.onScrollEnd!=null&&Me("scrollend",t),s.onClick!=null&&(t.onclick=vn),t=!0):t=!1,t||la(e,!0)}function Qg(e){for(Nt=e.return;Nt;)switch(Nt.tag){case 5:case 31:case 13:Dn=!1;return;case 27:case 3:Dn=!0;return;default:Nt=Nt.return}}function uo(e){if(e!==Nt)return!1;if(!ze)return Qg(e),ze=!0,!1;var t=e.tag,i;if((i=t!==3&&t!==27)&&((i=t===5)&&(i=e.type,i=!(i!=="form"&&i!=="button")||Th(e.type,e.memoizedProps)),i=!i),i&&at&&la(e),Qg(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));at=vy(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));at=vy(e)}else t===27?(t=at,Ea(e.type)?(e=_h,_h=null,at=e):at=t):at=Nt?jn(e.stateNode.nextSibling):null;return!0}function ds(){at=Nt=null,ze=!1}function ad(){var e=ra;return e!==null&&(an===null?an=e:an.push.apply(an,e),ra=null),e}function yr(e){ra===null?ra=[e]:ra.push(e)}var sd=b(null),hs=null,Ri=null;function ca(e,t,i){J(sd,t._currentValue),t._currentValue=i}function Ni(e){e._currentValue=sd.current,x(sd)}function od(e,t,i){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===i)break;e=e.return}}function rd(e,t,i,s){var c=e.child;for(c!==null&&(c.return=e);c!==null;){var u=c.dependencies;if(u!==null){var g=c.child;u=u.firstContext;e:for(;u!==null;){var C=u;u=c;for(var A=0;A<t.length;A++)if(C.context===t[A]){u.lanes|=i,C=u.alternate,C!==null&&(C.lanes|=i),od(u.return,i,e),s||(g=null);break e}u=C.next}}else if(c.tag===18){if(g=c.return,g===null)throw Error(o(341));g.lanes|=i,u=g.alternate,u!==null&&(u.lanes|=i),od(g,i,e),g=null}else g=c.child;if(g!==null)g.return=c;else for(g=c;g!==null;){if(g===e){g=null;break}if(c=g.sibling,c!==null){c.return=g.return,g=c;break}g=g.return}c=g}}function ho(e,t,i,s){e=null;for(var c=t,u=!1;c!==null;){if(!u){if((c.flags&524288)!==0)u=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var g=c.alternate;if(g===null)throw Error(o(387));if(g=g.memoizedProps,g!==null){var C=c.type;Cn(c.pendingProps.value,g.value)||(e!==null?e.push(C):e=[C])}}else if(c===pe.current){if(g=c.alternate,g===null)throw Error(o(387));g.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(e!==null?e.push(Vr):e=[Vr])}c=c.return}e!==null&&rd(t,e,i,s),t.flags|=262144}function jl(e){for(e=e.firstContext;e!==null;){if(!Cn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function fs(e){hs=e,Ri=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Mt(e){return qg(hs,e)}function Hl(e,t){return hs===null&&fs(e),qg(e,t)}function qg(e,t){var i=t._currentValue;if(t={context:t,memoizedValue:i,next:null},Ri===null){if(e===null)throw Error(o(308));Ri=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Ri=Ri.next=t;return i}var QS=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(i,s){e.push(s)}};this.abort=function(){t.aborted=!0,e.forEach(function(i){return i()})}},qS=l.unstable_scheduleCallback,JS=l.unstable_NormalPriority,vt={$$typeof:ae,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ld(){return{controller:new QS,data:new Map,refCount:0}}function vr(e){e.refCount--,e.refCount===0&&qS(JS,function(){e.controller.abort()})}var Cr=null,cd=0,fo=0,go=null;function XS(e,t){if(Cr===null){var i=Cr=[];cd=0,fo=hh(),go={status:"pending",value:void 0,then:function(s){i.push(s)}}}return cd++,t.then(Jg,Jg),t}function Jg(){if(--cd===0&&Cr!==null){go!==null&&(go.status="fulfilled");var e=Cr;Cr=null,fo=0,go=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function ZS(e,t){var i=[],s={status:"pending",value:null,reason:null,then:function(c){i.push(c)}};return e.then(function(){s.status="fulfilled",s.value=t;for(var c=0;c<i.length;c++)(0,i[c])(t)},function(c){for(s.status="rejected",s.reason=c,c=0;c<i.length;c++)(0,i[c])(void 0)}),s}var Xg=D.S;D.S=function(e,t){xp=Ht(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&XS(e,t),Xg!==null&&Xg(e,t)};var gs=b(null);function ud(){var e=gs.current;return e!==null?e:et.pooledCache}function zl(e,t){t===null?J(gs,gs.current):J(gs,t.pool)}function Zg(){var e=ud();return e===null?null:{parent:vt._currentValue,pool:e}}var mo=Error(o(460)),dd=Error(o(474)),Ll=Error(o(542)),Bl={then:function(){}};function $g(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Wg(e,t,i){switch(i=e[i],i===void 0?e.push(t):i!==t&&(t.then(vn,vn),t=i),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,tm(e),e;default:if(typeof t.status=="string")t.then(vn,vn);else{if(e=et,e!==null&&100<e.shellSuspendCounter)throw Error(o(482));e=t,e.status="pending",e.then(function(s){if(t.status==="pending"){var c=t;c.status="fulfilled",c.value=s}},function(s){if(t.status==="pending"){var c=t;c.status="rejected",c.reason=s}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,tm(e),e}throw ps=t,mo}}function ms(e){try{var t=e._init;return t(e._payload)}catch(i){throw i!==null&&typeof i=="object"&&typeof i.then=="function"?(ps=i,mo):i}}var ps=null;function em(){if(ps===null)throw Error(o(459));var e=ps;return ps=null,e}function tm(e){if(e===mo||e===Ll)throw Error(o(483))}var po=null,Sr=0;function Kl(e){var t=Sr;return Sr+=1,po===null&&(po=[]),Wg(po,e,t)}function Tr(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Pl(e,t){throw t.$$typeof===k?Error(o(525)):(e=Object.prototype.toString.call(t),Error(o(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function nm(e){function t(_,w){if(e){var O=_.deletions;O===null?(_.deletions=[w],_.flags|=16):O.push(w)}}function i(_,w){if(!e)return null;for(;w!==null;)t(_,w),w=w.sibling;return null}function s(_){for(var w=new Map;_!==null;)_.key!==null?w.set(_.key,_):w.set(_.index,_),_=_.sibling;return w}function c(_,w){return _=Ii(_,w),_.index=0,_.sibling=null,_}function u(_,w,O){return _.index=O,e?(O=_.alternate,O!==null?(O=O.index,O<w?(_.flags|=67108866,w):O):(_.flags|=67108866,w)):(_.flags|=1048576,w)}function g(_){return e&&_.alternate===null&&(_.flags|=67108866),_}function C(_,w,O,G){return w===null||w.tag!==6?(w=Wu(O,_.mode,G),w.return=_,w):(w=c(w,O),w.return=_,w)}function A(_,w,O,G){var ge=O.type;return ge===q?B(_,w,O.props.children,G,O.key):w!==null&&(w.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===Te&&ms(ge)===w.type)?(w=c(w,O.props),Tr(w,O),w.return=_,w):(w=Dl(O.type,O.key,O.props,null,_.mode,G),Tr(w,O),w.return=_,w)}function R(_,w,O,G){return w===null||w.tag!==4||w.stateNode.containerInfo!==O.containerInfo||w.stateNode.implementation!==O.implementation?(w=ed(O,_.mode,G),w.return=_,w):(w=c(w,O.children||[]),w.return=_,w)}function B(_,w,O,G,ge){return w===null||w.tag!==7?(w=us(O,_.mode,G,ge),w.return=_,w):(w=c(w,O),w.return=_,w)}function V(_,w,O){if(typeof w=="string"&&w!==""||typeof w=="number"||typeof w=="bigint")return w=Wu(""+w,_.mode,O),w.return=_,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case N:return O=Dl(w.type,w.key,w.props,null,_.mode,O),Tr(O,w),O.return=_,O;case F:return w=ed(w,_.mode,O),w.return=_,w;case Te:return w=ms(w),V(_,w,O)}if(_e(w)||we(w))return w=us(w,_.mode,O,null),w.return=_,w;if(typeof w.then=="function")return V(_,Kl(w),O);if(w.$$typeof===ae)return V(_,Hl(_,w),O);Pl(_,w)}return null}function M(_,w,O,G){var ge=w!==null?w.key:null;if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return ge!==null?null:C(_,w,""+O,G);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case N:return O.key===ge?A(_,w,O,G):null;case F:return O.key===ge?R(_,w,O,G):null;case Te:return O=ms(O),M(_,w,O,G)}if(_e(O)||we(O))return ge!==null?null:B(_,w,O,G,null);if(typeof O.then=="function")return M(_,w,Kl(O),G);if(O.$$typeof===ae)return M(_,w,Hl(_,O),G);Pl(_,O)}return null}function j(_,w,O,G,ge){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return _=_.get(O)||null,C(w,_,""+G,ge);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case N:return _=_.get(G.key===null?O:G.key)||null,A(w,_,G,ge);case F:return _=_.get(G.key===null?O:G.key)||null,R(w,_,G,ge);case Te:return G=ms(G),j(_,w,O,G,ge)}if(_e(G)||we(G))return _=_.get(O)||null,B(w,_,G,ge,null);if(typeof G.then=="function")return j(_,w,O,Kl(G),ge);if(G.$$typeof===ae)return j(_,w,O,Hl(w,G),ge);Pl(w,G)}return null}function se(_,w,O,G){for(var ge=null,Ke=null,ce=w,ke=w=0,Ue=null;ce!==null&&ke<O.length;ke++){ce.index>ke?(Ue=ce,ce=null):Ue=ce.sibling;var Pe=M(_,ce,O[ke],G);if(Pe===null){ce===null&&(ce=Ue);break}e&&ce&&Pe.alternate===null&&t(_,ce),w=u(Pe,w,ke),Ke===null?ge=Pe:Ke.sibling=Pe,Ke=Pe,ce=Ue}if(ke===O.length)return i(_,ce),ze&&Oi(_,ke),ge;if(ce===null){for(;ke<O.length;ke++)ce=V(_,O[ke],G),ce!==null&&(w=u(ce,w,ke),Ke===null?ge=ce:Ke.sibling=ce,Ke=ce);return ze&&Oi(_,ke),ge}for(ce=s(ce);ke<O.length;ke++)Ue=j(ce,_,ke,O[ke],G),Ue!==null&&(e&&Ue.alternate!==null&&ce.delete(Ue.key===null?ke:Ue.key),w=u(Ue,w,ke),Ke===null?ge=Ue:Ke.sibling=Ue,Ke=Ue);return e&&ce.forEach(function(ka){return t(_,ka)}),ze&&Oi(_,ke),ge}function me(_,w,O,G){if(O==null)throw Error(o(151));for(var ge=null,Ke=null,ce=w,ke=w=0,Ue=null,Pe=O.next();ce!==null&&!Pe.done;ke++,Pe=O.next()){ce.index>ke?(Ue=ce,ce=null):Ue=ce.sibling;var ka=M(_,ce,Pe.value,G);if(ka===null){ce===null&&(ce=Ue);break}e&&ce&&ka.alternate===null&&t(_,ce),w=u(ka,w,ke),Ke===null?ge=ka:Ke.sibling=ka,Ke=ka,ce=Ue}if(Pe.done)return i(_,ce),ze&&Oi(_,ke),ge;if(ce===null){for(;!Pe.done;ke++,Pe=O.next())Pe=V(_,Pe.value,G),Pe!==null&&(w=u(Pe,w,ke),Ke===null?ge=Pe:Ke.sibling=Pe,Ke=Pe);return ze&&Oi(_,ke),ge}for(ce=s(ce);!Pe.done;ke++,Pe=O.next())Pe=j(ce,_,ke,Pe.value,G),Pe!==null&&(e&&Pe.alternate!==null&&ce.delete(Pe.key===null?ke:Pe.key),w=u(Pe,w,ke),Ke===null?ge=Pe:Ke.sibling=Pe,Ke=Pe);return e&&ce.forEach(function(lE){return t(_,lE)}),ze&&Oi(_,ke),ge}function We(_,w,O,G){if(typeof O=="object"&&O!==null&&O.type===q&&O.key===null&&(O=O.props.children),typeof O=="object"&&O!==null){switch(O.$$typeof){case N:e:{for(var ge=O.key;w!==null;){if(w.key===ge){if(ge=O.type,ge===q){if(w.tag===7){i(_,w.sibling),G=c(w,O.props.children),G.return=_,_=G;break e}}else if(w.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===Te&&ms(ge)===w.type){i(_,w.sibling),G=c(w,O.props),Tr(G,O),G.return=_,_=G;break e}i(_,w);break}else t(_,w);w=w.sibling}O.type===q?(G=us(O.props.children,_.mode,G,O.key),G.return=_,_=G):(G=Dl(O.type,O.key,O.props,null,_.mode,G),Tr(G,O),G.return=_,_=G)}return g(_);case F:e:{for(ge=O.key;w!==null;){if(w.key===ge)if(w.tag===4&&w.stateNode.containerInfo===O.containerInfo&&w.stateNode.implementation===O.implementation){i(_,w.sibling),G=c(w,O.children||[]),G.return=_,_=G;break e}else{i(_,w);break}else t(_,w);w=w.sibling}G=ed(O,_.mode,G),G.return=_,_=G}return g(_);case Te:return O=ms(O),We(_,w,O,G)}if(_e(O))return se(_,w,O,G);if(we(O)){if(ge=we(O),typeof ge!="function")throw Error(o(150));return O=ge.call(O),me(_,w,O,G)}if(typeof O.then=="function")return We(_,w,Kl(O),G);if(O.$$typeof===ae)return We(_,w,Hl(_,O),G);Pl(_,O)}return typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint"?(O=""+O,w!==null&&w.tag===6?(i(_,w.sibling),G=c(w,O),G.return=_,_=G):(i(_,w),G=Wu(O,_.mode,G),G.return=_,_=G),g(_)):i(_,w)}return function(_,w,O,G){try{Sr=0;var ge=We(_,w,O,G);return po=null,ge}catch(ce){if(ce===mo||ce===Ll)throw ce;var Ke=Sn(29,ce,null,_.mode);return Ke.lanes=G,Ke.return=_,Ke}}}var ys=nm(!0),im=nm(!1),ua=!1;function hd(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function fd(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function da(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ha(e,t,i){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,(Ye&2)!==0){var c=s.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),s.pending=t,t=xl(e),Bg(e,null,i),t}return Ml(e,s,t,i),xl(e)}function Er(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194048)!==0)){var s=t.lanes;s&=e.pendingLanes,i|=s,t.lanes=i,Cl(e,i)}}function gd(e,t){var i=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,i===s)){var c=null,u=null;if(i=i.firstBaseUpdate,i!==null){do{var g={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};u===null?c=u=g:u=u.next=g,i=i.next}while(i!==null);u===null?c=u=t:u=u.next=t}else c=u=t;i={baseState:s.baseState,firstBaseUpdate:c,lastBaseUpdate:u,shared:s.shared,callbacks:s.callbacks},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}var md=!1;function Ar(){if(md){var e=go;if(e!==null)throw e}}function br(e,t,i,s){md=!1;var c=e.updateQueue;ua=!1;var u=c.firstBaseUpdate,g=c.lastBaseUpdate,C=c.shared.pending;if(C!==null){c.shared.pending=null;var A=C,R=A.next;A.next=null,g===null?u=R:g.next=R,g=A;var B=e.alternate;B!==null&&(B=B.updateQueue,C=B.lastBaseUpdate,C!==g&&(C===null?B.firstBaseUpdate=R:C.next=R,B.lastBaseUpdate=A))}if(u!==null){var V=c.baseState;g=0,B=R=A=null,C=u;do{var M=C.lane&-536870913,j=M!==C.lane;if(j?(De&M)===M:(s&M)===M){M!==0&&M===fo&&(md=!0),B!==null&&(B=B.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});e:{var se=e,me=C;M=t;var We=i;switch(me.tag){case 1:if(se=me.payload,typeof se=="function"){V=se.call(We,V,M);break e}V=se;break e;case 3:se.flags=se.flags&-65537|128;case 0:if(se=me.payload,M=typeof se=="function"?se.call(We,V,M):se,M==null)break e;V=T({},V,M);break e;case 2:ua=!0}}M=C.callback,M!==null&&(e.flags|=64,j&&(e.flags|=8192),j=c.callbacks,j===null?c.callbacks=[M]:j.push(M))}else j={lane:M,tag:C.tag,payload:C.payload,callback:C.callback,next:null},B===null?(R=B=j,A=V):B=B.next=j,g|=M;if(C=C.next,C===null){if(C=c.shared.pending,C===null)break;j=C,C=j.next,j.next=null,c.lastBaseUpdate=j,c.shared.pending=null}}while(!0);B===null&&(A=V),c.baseState=A,c.firstBaseUpdate=R,c.lastBaseUpdate=B,u===null&&(c.shared.lanes=0),ya|=g,e.lanes=g,e.memoizedState=V}}function am(e,t){if(typeof e!="function")throw Error(o(191,e));e.call(t)}function sm(e,t){var i=e.callbacks;if(i!==null)for(e.callbacks=null,e=0;e<i.length;e++)am(i[e],t)}var yo=b(null),Gl=b(0);function om(e,t){e=Bi,J(Gl,e),J(yo,t),Bi=e|t.baseLanes}function pd(){J(Gl,Bi),J(yo,yo.current)}function yd(){Bi=Gl.current,x(yo),x(Gl)}var Tn=b(null),Un=null;function fa(e){var t=e.alternate;J(gt,gt.current&1),J(Tn,e),Un===null&&(t===null||yo.current!==null||t.memoizedState!==null)&&(Un=e)}function vd(e){J(gt,gt.current),J(Tn,e),Un===null&&(Un=e)}function rm(e){e.tag===22?(J(gt,gt.current),J(Tn,e),Un===null&&(Un=e)):ga()}function ga(){J(gt,gt.current),J(Tn,Tn.current)}function En(e){x(Tn),Un===e&&(Un=null),x(gt)}var gt=b(0);function Vl(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||bh(i)||wh(i)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Mi=0,be=null,Ze=null,Ct=null,Fl=!1,vo=!1,vs=!1,Yl=0,wr=0,Co=null,$S=0;function ut(){throw Error(o(321))}function Cd(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!Cn(e[i],t[i]))return!1;return!0}function Sd(e,t,i,s,c,u){return Mi=u,be=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,D.H=e===null||e.memoizedState===null?Vm:Ud,vs=!1,u=i(s,c),vs=!1,vo&&(u=cm(t,i,s,c)),lm(e),u}function lm(e){D.H=Ir;var t=Ze!==null&&Ze.next!==null;if(Mi=0,Ct=Ze=be=null,Fl=!1,wr=0,Co=null,t)throw Error(o(300));e===null||St||(e=e.dependencies,e!==null&&jl(e)&&(St=!0))}function cm(e,t,i,s){be=e;var c=0;do{if(vo&&(Co=null),wr=0,vo=!1,25<=c)throw Error(o(301));if(c+=1,Ct=Ze=null,e.updateQueue!=null){var u=e.updateQueue;u.lastEffect=null,u.events=null,u.stores=null,u.memoCache!=null&&(u.memoCache.index=0)}D.H=Fm,u=t(i,s)}while(vo);return u}function WS(){var e=D.H,t=e.useState()[0];return t=typeof t.then=="function"?_r(t):t,e=e.useState()[0],(Ze!==null?Ze.memoizedState:null)!==e&&(be.flags|=1024),t}function Td(){var e=Yl!==0;return Yl=0,e}function Ed(e,t,i){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i}function Ad(e){if(Fl){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Fl=!1}Mi=0,Ct=Ze=be=null,vo=!1,wr=Yl=0,Co=null}function Jt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ct===null?be.memoizedState=Ct=e:Ct=Ct.next=e,Ct}function mt(){if(Ze===null){var e=be.alternate;e=e!==null?e.memoizedState:null}else e=Ze.next;var t=Ct===null?be.memoizedState:Ct.next;if(t!==null)Ct=t,Ze=e;else{if(e===null)throw be.alternate===null?Error(o(467)):Error(o(310));Ze=e,e={memoizedState:Ze.memoizedState,baseState:Ze.baseState,baseQueue:Ze.baseQueue,queue:Ze.queue,next:null},Ct===null?be.memoizedState=Ct=e:Ct=Ct.next=e}return Ct}function Ql(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function _r(e){var t=wr;return wr+=1,Co===null&&(Co=[]),e=Wg(Co,e,t),t=be,(Ct===null?t.memoizedState:Ct.next)===null&&(t=t.alternate,D.H=t===null||t.memoizedState===null?Vm:Ud),e}function ql(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return _r(e);if(e.$$typeof===ae)return Mt(e)}throw Error(o(438,String(e)))}function bd(e){var t=null,i=be.updateQueue;if(i!==null&&(t=i.memoCache),t==null){var s=be.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(t={data:s.data.map(function(c){return c.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),i===null&&(i=Ql(),be.updateQueue=i),i.memoCache=t,i=t.data[t.index],i===void 0)for(i=t.data[t.index]=Array(e),s=0;s<e;s++)i[s]=Ae;return t.index++,i}function xi(e,t){return typeof t=="function"?t(e):t}function Jl(e){var t=mt();return wd(t,Ze,e)}function wd(e,t,i){var s=e.queue;if(s===null)throw Error(o(311));s.lastRenderedReducer=i;var c=e.baseQueue,u=s.pending;if(u!==null){if(c!==null){var g=c.next;c.next=u.next,u.next=g}t.baseQueue=c=u,s.pending=null}if(u=e.baseState,c===null)e.memoizedState=u;else{t=c.next;var C=g=null,A=null,R=t,B=!1;do{var V=R.lane&-536870913;if(V!==R.lane?(De&V)===V:(Mi&V)===V){var M=R.revertLane;if(M===0)A!==null&&(A=A.next={lane:0,revertLane:0,gesture:null,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null}),V===fo&&(B=!0);else if((Mi&M)===M){R=R.next,M===fo&&(B=!0);continue}else V={lane:0,revertLane:R.revertLane,gesture:null,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null},A===null?(C=A=V,g=u):A=A.next=V,be.lanes|=M,ya|=M;V=R.action,vs&&i(u,V),u=R.hasEagerState?R.eagerState:i(u,V)}else M={lane:V,revertLane:R.revertLane,gesture:R.gesture,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null},A===null?(C=A=M,g=u):A=A.next=M,be.lanes|=V,ya|=V;R=R.next}while(R!==null&&R!==t);if(A===null?g=u:A.next=C,!Cn(u,e.memoizedState)&&(St=!0,B&&(i=go,i!==null)))throw i;e.memoizedState=u,e.baseState=g,e.baseQueue=A,s.lastRenderedState=u}return c===null&&(s.lanes=0),[e.memoizedState,s.dispatch]}function _d(e){var t=mt(),i=t.queue;if(i===null)throw Error(o(311));i.lastRenderedReducer=e;var s=i.dispatch,c=i.pending,u=t.memoizedState;if(c!==null){i.pending=null;var g=c=c.next;do u=e(u,g.action),g=g.next;while(g!==c);Cn(u,t.memoizedState)||(St=!0),t.memoizedState=u,t.baseQueue===null&&(t.baseState=u),i.lastRenderedState=u}return[u,s]}function um(e,t,i){var s=be,c=mt(),u=ze;if(u){if(i===void 0)throw Error(o(407));i=i()}else i=t();var g=!Cn((Ze||c).memoizedState,i);if(g&&(c.memoizedState=i,St=!0),c=c.queue,Od(fm.bind(null,s,c,e),[e]),c.getSnapshot!==t||g||Ct!==null&&Ct.memoizedState.tag&1){if(s.flags|=2048,So(9,{destroy:void 0},hm.bind(null,s,c,i,t),null),et===null)throw Error(o(349));u||(Mi&127)!==0||dm(s,t,i)}return i}function dm(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=be.updateQueue,t===null?(t=Ql(),be.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function hm(e,t,i,s){t.value=i,t.getSnapshot=s,gm(t)&&mm(e)}function fm(e,t,i){return i(function(){gm(t)&&mm(e)})}function gm(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!Cn(e,i)}catch{return!0}}function mm(e){var t=cs(e,2);t!==null&&sn(t,e,2)}function kd(e){var t=Jt();if(typeof e=="function"){var i=e;if(e=i(),vs){kn(!0);try{i()}finally{kn(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:xi,lastRenderedState:e},t}function pm(e,t,i,s){return e.baseState=i,wd(e,Ze,typeof s=="function"?s:xi)}function eT(e,t,i,s,c){if($l(e))throw Error(o(485));if(e=t.action,e!==null){var u={payload:c,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(g){u.listeners.push(g)}};D.T!==null?i(!0):u.isTransition=!1,s(u),i=t.pending,i===null?(u.next=t.pending=u,ym(t,u)):(u.next=i.next,t.pending=i.next=u)}}function ym(e,t){var i=t.action,s=t.payload,c=e.state;if(t.isTransition){var u=D.T,g={};D.T=g;try{var C=i(c,s),A=D.S;A!==null&&A(g,C),vm(e,t,C)}catch(R){Id(e,t,R)}finally{u!==null&&g.types!==null&&(u.types=g.types),D.T=u}}else try{u=i(c,s),vm(e,t,u)}catch(R){Id(e,t,R)}}function vm(e,t,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(s){Cm(e,t,s)},function(s){return Id(e,t,s)}):Cm(e,t,i)}function Cm(e,t,i){t.status="fulfilled",t.value=i,Sm(t),e.state=i,t=e.pending,t!==null&&(i=t.next,i===t?e.pending=null:(i=i.next,t.next=i,ym(e,i)))}function Id(e,t,i){var s=e.pending;if(e.pending=null,s!==null){s=s.next;do t.status="rejected",t.reason=i,Sm(t),t=t.next;while(t!==s)}e.action=null}function Sm(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Tm(e,t){return t}function Em(e,t){if(ze){var i=et.formState;if(i!==null){e:{var s=be;if(ze){if(at){t:{for(var c=at,u=Dn;c.nodeType!==8;){if(!u){c=null;break t}if(c=jn(c.nextSibling),c===null){c=null;break t}}u=c.data,c=u==="F!"||u==="F"?c:null}if(c){at=jn(c.nextSibling),s=c.data==="F!";break e}}la(s)}s=!1}s&&(t=i[0])}}return i=Jt(),i.memoizedState=i.baseState=t,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Tm,lastRenderedState:t},i.queue=s,i=Km.bind(null,be,s),s.dispatch=i,s=kd(!1),u=Dd.bind(null,be,!1,s.queue),s=Jt(),c={state:t,dispatch:null,action:e,pending:null},s.queue=c,i=eT.bind(null,be,c,u,i),c.dispatch=i,s.memoizedState=e,[t,i,!1]}function Am(e){var t=mt();return bm(t,Ze,e)}function bm(e,t,i){if(t=wd(e,t,Tm)[0],e=Jl(xi)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var s=_r(t)}catch(g){throw g===mo?Ll:g}else s=t;t=mt();var c=t.queue,u=c.dispatch;return i!==t.memoizedState&&(be.flags|=2048,So(9,{destroy:void 0},tT.bind(null,c,i),null)),[s,u,e]}function tT(e,t){e.action=t}function wm(e){var t=mt(),i=Ze;if(i!==null)return bm(t,i,e);mt(),t=t.memoizedState,i=mt();var s=i.queue.dispatch;return i.memoizedState=e,[t,s,!1]}function So(e,t,i,s){return e={tag:e,create:i,deps:s,inst:t,next:null},t=be.updateQueue,t===null&&(t=Ql(),be.updateQueue=t),i=t.lastEffect,i===null?t.lastEffect=e.next=e:(s=i.next,i.next=e,e.next=s,t.lastEffect=e),e}function _m(){return mt().memoizedState}function Xl(e,t,i,s){var c=Jt();be.flags|=e,c.memoizedState=So(1|t,{destroy:void 0},i,s===void 0?null:s)}function Zl(e,t,i,s){var c=mt();s=s===void 0?null:s;var u=c.memoizedState.inst;Ze!==null&&s!==null&&Cd(s,Ze.memoizedState.deps)?c.memoizedState=So(t,u,i,s):(be.flags|=e,c.memoizedState=So(1|t,u,i,s))}function km(e,t){Xl(8390656,8,e,t)}function Od(e,t){Zl(2048,8,e,t)}function nT(e){be.flags|=4;var t=be.updateQueue;if(t===null)t=Ql(),be.updateQueue=t,t.events=[e];else{var i=t.events;i===null?t.events=[e]:i.push(e)}}function Im(e){var t=mt().memoizedState;return nT({ref:t,nextImpl:e}),function(){if((Ye&2)!==0)throw Error(o(440));return t.impl.apply(void 0,arguments)}}function Om(e,t){return Zl(4,2,e,t)}function Rm(e,t){return Zl(4,4,e,t)}function Nm(e,t){if(typeof t=="function"){e=e();var i=t(e);return function(){typeof i=="function"?i():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Mm(e,t,i){i=i!=null?i.concat([e]):null,Zl(4,4,Nm.bind(null,t,e),i)}function Rd(){}function xm(e,t){var i=mt();t=t===void 0?null:t;var s=i.memoizedState;return t!==null&&Cd(t,s[1])?s[0]:(i.memoizedState=[e,t],e)}function Dm(e,t){var i=mt();t=t===void 0?null:t;var s=i.memoizedState;if(t!==null&&Cd(t,s[1]))return s[0];if(s=e(),vs){kn(!0);try{e()}finally{kn(!1)}}return i.memoizedState=[s,t],s}function Nd(e,t,i){return i===void 0||(Mi&1073741824)!==0&&(De&261930)===0?e.memoizedState=t:(e.memoizedState=i,e=Up(),be.lanes|=e,ya|=e,i)}function Um(e,t,i,s){return Cn(i,t)?i:yo.current!==null?(e=Nd(e,i,s),Cn(e,t)||(St=!0),e):(Mi&42)===0||(Mi&1073741824)!==0&&(De&261930)===0?(St=!0,e.memoizedState=i):(e=Up(),be.lanes|=e,ya|=e,t)}function jm(e,t,i,s,c){var u=Y.p;Y.p=u!==0&&8>u?u:8;var g=D.T,C={};D.T=C,Dd(e,!1,t,i);try{var A=c(),R=D.S;if(R!==null&&R(C,A),A!==null&&typeof A=="object"&&typeof A.then=="function"){var B=ZS(A,s);kr(e,t,B,wn(e))}else kr(e,t,s,wn(e))}catch(V){kr(e,t,{then:function(){},status:"rejected",reason:V},wn())}finally{Y.p=u,g!==null&&C.types!==null&&(g.types=C.types),D.T=g}}function iT(){}function Md(e,t,i,s){if(e.tag!==5)throw Error(o(476));var c=Hm(e).queue;jm(e,c,t,te,i===null?iT:function(){return zm(e),i(s)})}function Hm(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:te,baseState:te,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xi,lastRenderedState:te},next:null};var i={};return t.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xi,lastRenderedState:i},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function zm(e){var t=Hm(e);t.next===null&&(t=e.alternate.memoizedState),kr(e,t.next.queue,{},wn())}function xd(){return Mt(Vr)}function Lm(){return mt().memoizedState}function Bm(){return mt().memoizedState}function aT(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var i=wn();e=da(i);var s=ha(t,e,i);s!==null&&(sn(s,t,i),Er(s,t,i)),t={cache:ld()},e.payload=t;return}t=t.return}}function sT(e,t,i){var s=wn();i={lane:s,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},$l(e)?Pm(t,i):(i=Zu(e,t,i,s),i!==null&&(sn(i,e,s),Gm(i,t,s)))}function Km(e,t,i){var s=wn();kr(e,t,i,s)}function kr(e,t,i,s){var c={lane:s,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null};if($l(e))Pm(t,c);else{var u=e.alternate;if(e.lanes===0&&(u===null||u.lanes===0)&&(u=t.lastRenderedReducer,u!==null))try{var g=t.lastRenderedState,C=u(g,i);if(c.hasEagerState=!0,c.eagerState=C,Cn(C,g))return Ml(e,t,c,0),et===null&&Nl(),!1}catch{}if(i=Zu(e,t,c,s),i!==null)return sn(i,e,s),Gm(i,t,s),!0}return!1}function Dd(e,t,i,s){if(s={lane:2,revertLane:hh(),gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},$l(e)){if(t)throw Error(o(479))}else t=Zu(e,i,s,2),t!==null&&sn(t,e,2)}function $l(e){var t=e.alternate;return e===be||t!==null&&t===be}function Pm(e,t){vo=Fl=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function Gm(e,t,i){if((i&4194048)!==0){var s=t.lanes;s&=e.pendingLanes,i|=s,t.lanes=i,Cl(e,i)}}var Ir={readContext:Mt,use:ql,useCallback:ut,useContext:ut,useEffect:ut,useImperativeHandle:ut,useLayoutEffect:ut,useInsertionEffect:ut,useMemo:ut,useReducer:ut,useRef:ut,useState:ut,useDebugValue:ut,useDeferredValue:ut,useTransition:ut,useSyncExternalStore:ut,useId:ut,useHostTransitionStatus:ut,useFormState:ut,useActionState:ut,useOptimistic:ut,useMemoCache:ut,useCacheRefresh:ut};Ir.useEffectEvent=ut;var Vm={readContext:Mt,use:ql,useCallback:function(e,t){return Jt().memoizedState=[e,t===void 0?null:t],e},useContext:Mt,useEffect:km,useImperativeHandle:function(e,t,i){i=i!=null?i.concat([e]):null,Xl(4194308,4,Nm.bind(null,t,e),i)},useLayoutEffect:function(e,t){return Xl(4194308,4,e,t)},useInsertionEffect:function(e,t){Xl(4,2,e,t)},useMemo:function(e,t){var i=Jt();t=t===void 0?null:t;var s=e();if(vs){kn(!0);try{e()}finally{kn(!1)}}return i.memoizedState=[s,t],s},useReducer:function(e,t,i){var s=Jt();if(i!==void 0){var c=i(t);if(vs){kn(!0);try{i(t)}finally{kn(!1)}}}else c=t;return s.memoizedState=s.baseState=c,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:c},s.queue=e,e=e.dispatch=sT.bind(null,be,e),[s.memoizedState,e]},useRef:function(e){var t=Jt();return e={current:e},t.memoizedState=e},useState:function(e){e=kd(e);var t=e.queue,i=Km.bind(null,be,t);return t.dispatch=i,[e.memoizedState,i]},useDebugValue:Rd,useDeferredValue:function(e,t){var i=Jt();return Nd(i,e,t)},useTransition:function(){var e=kd(!1);return e=jm.bind(null,be,e.queue,!0,!1),Jt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,i){var s=be,c=Jt();if(ze){if(i===void 0)throw Error(o(407));i=i()}else{if(i=t(),et===null)throw Error(o(349));(De&127)!==0||dm(s,t,i)}c.memoizedState=i;var u={value:i,getSnapshot:t};return c.queue=u,km(fm.bind(null,s,u,e),[e]),s.flags|=2048,So(9,{destroy:void 0},hm.bind(null,s,u,i,t),null),i},useId:function(){var e=Jt(),t=et.identifierPrefix;if(ze){var i=di,s=ui;i=(s&~(1<<32-Yt(s)-1)).toString(32)+i,t="_"+t+"R_"+i,i=Yl++,0<i&&(t+="H"+i.toString(32)),t+="_"}else i=$S++,t="_"+t+"r_"+i.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:xd,useFormState:Em,useActionState:Em,useOptimistic:function(e){var t=Jt();t.memoizedState=t.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=i,t=Dd.bind(null,be,!0,i),i.dispatch=t,[e,t]},useMemoCache:bd,useCacheRefresh:function(){return Jt().memoizedState=aT.bind(null,be)},useEffectEvent:function(e){var t=Jt(),i={impl:e};return t.memoizedState=i,function(){if((Ye&2)!==0)throw Error(o(440));return i.impl.apply(void 0,arguments)}}},Ud={readContext:Mt,use:ql,useCallback:xm,useContext:Mt,useEffect:Od,useImperativeHandle:Mm,useInsertionEffect:Om,useLayoutEffect:Rm,useMemo:Dm,useReducer:Jl,useRef:_m,useState:function(){return Jl(xi)},useDebugValue:Rd,useDeferredValue:function(e,t){var i=mt();return Um(i,Ze.memoizedState,e,t)},useTransition:function(){var e=Jl(xi)[0],t=mt().memoizedState;return[typeof e=="boolean"?e:_r(e),t]},useSyncExternalStore:um,useId:Lm,useHostTransitionStatus:xd,useFormState:Am,useActionState:Am,useOptimistic:function(e,t){var i=mt();return pm(i,Ze,e,t)},useMemoCache:bd,useCacheRefresh:Bm};Ud.useEffectEvent=Im;var Fm={readContext:Mt,use:ql,useCallback:xm,useContext:Mt,useEffect:Od,useImperativeHandle:Mm,useInsertionEffect:Om,useLayoutEffect:Rm,useMemo:Dm,useReducer:_d,useRef:_m,useState:function(){return _d(xi)},useDebugValue:Rd,useDeferredValue:function(e,t){var i=mt();return Ze===null?Nd(i,e,t):Um(i,Ze.memoizedState,e,t)},useTransition:function(){var e=_d(xi)[0],t=mt().memoizedState;return[typeof e=="boolean"?e:_r(e),t]},useSyncExternalStore:um,useId:Lm,useHostTransitionStatus:xd,useFormState:wm,useActionState:wm,useOptimistic:function(e,t){var i=mt();return Ze!==null?pm(i,Ze,e,t):(i.baseState=e,[e,i.queue.dispatch])},useMemoCache:bd,useCacheRefresh:Bm};Fm.useEffectEvent=Im;function jd(e,t,i,s){t=e.memoizedState,i=i(s,t),i=i==null?t:T({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var Hd={enqueueSetState:function(e,t,i){e=e._reactInternals;var s=wn(),c=da(s);c.payload=t,i!=null&&(c.callback=i),t=ha(e,c,s),t!==null&&(sn(t,e,s),Er(t,e,s))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var s=wn(),c=da(s);c.tag=1,c.payload=t,i!=null&&(c.callback=i),t=ha(e,c,s),t!==null&&(sn(t,e,s),Er(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=wn(),s=da(i);s.tag=2,t!=null&&(s.callback=t),t=ha(e,s,i),t!==null&&(sn(t,e,i),Er(t,e,i))}};function Ym(e,t,i,s,c,u,g){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,u,g):t.prototype&&t.prototype.isPureReactComponent?!gr(i,s)||!gr(c,u):!0}function Qm(e,t,i,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,s),t.state!==e&&Hd.enqueueReplaceState(t,t.state,null)}function Cs(e,t){var i=t;if("ref"in t){i={};for(var s in t)s!=="ref"&&(i[s]=t[s])}if(e=e.defaultProps){i===t&&(i=T({},i));for(var c in e)i[c]===void 0&&(i[c]=e[c])}return i}function qm(e){Rl(e)}function Jm(e){console.error(e)}function Xm(e){Rl(e)}function Wl(e,t){try{var i=e.onUncaughtError;i(t.value,{componentStack:t.stack})}catch(s){setTimeout(function(){throw s})}}function Zm(e,t,i){try{var s=e.onCaughtError;s(i.value,{componentStack:i.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function zd(e,t,i){return i=da(i),i.tag=3,i.payload={element:null},i.callback=function(){Wl(e,t)},i}function $m(e){return e=da(e),e.tag=3,e}function Wm(e,t,i,s){var c=i.type.getDerivedStateFromError;if(typeof c=="function"){var u=s.value;e.payload=function(){return c(u)},e.callback=function(){Zm(t,i,s)}}var g=i.stateNode;g!==null&&typeof g.componentDidCatch=="function"&&(e.callback=function(){Zm(t,i,s),typeof c!="function"&&(va===null?va=new Set([this]):va.add(this));var C=s.stack;this.componentDidCatch(s.value,{componentStack:C!==null?C:""})})}function oT(e,t,i,s,c){if(i.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(t=i.alternate,t!==null&&ho(t,i,c,!0),i=Tn.current,i!==null){switch(i.tag){case 31:case 13:return Un===null?dc():i.alternate===null&&dt===0&&(dt=3),i.flags&=-257,i.flags|=65536,i.lanes=c,s===Bl?i.flags|=16384:(t=i.updateQueue,t===null?i.updateQueue=new Set([s]):t.add(s),ch(e,s,c)),!1;case 22:return i.flags|=65536,s===Bl?i.flags|=16384:(t=i.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([s])},i.updateQueue=t):(i=t.retryQueue,i===null?t.retryQueue=new Set([s]):i.add(s)),ch(e,s,c)),!1}throw Error(o(435,i.tag))}return ch(e,s,c),dc(),!1}if(ze)return t=Tn.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=c,s!==id&&(e=Error(o(422),{cause:s}),yr(Nn(e,i)))):(s!==id&&(t=Error(o(423),{cause:s}),yr(Nn(t,i))),e=e.current.alternate,e.flags|=65536,c&=-c,e.lanes|=c,s=Nn(s,i),c=zd(e.stateNode,s,c),gd(e,c),dt!==4&&(dt=2)),!1;var u=Error(o(520),{cause:s});if(u=Nn(u,i),jr===null?jr=[u]:jr.push(u),dt!==4&&(dt=2),t===null)return!0;s=Nn(s,i),i=t;do{switch(i.tag){case 3:return i.flags|=65536,e=c&-c,i.lanes|=e,e=zd(i.stateNode,s,e),gd(i,e),!1;case 1:if(t=i.type,u=i.stateNode,(i.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||u!==null&&typeof u.componentDidCatch=="function"&&(va===null||!va.has(u))))return i.flags|=65536,c&=-c,i.lanes|=c,c=$m(c),Wm(c,e,i,s),gd(i,c),!1}i=i.return}while(i!==null);return!1}var Ld=Error(o(461)),St=!1;function xt(e,t,i,s){t.child=e===null?im(t,null,i,s):ys(t,e.child,i,s)}function ep(e,t,i,s,c){i=i.render;var u=t.ref;if("ref"in s){var g={};for(var C in s)C!=="ref"&&(g[C]=s[C])}else g=s;return fs(t),s=Sd(e,t,i,g,u,c),C=Td(),e!==null&&!St?(Ed(e,t,c),Di(e,t,c)):(ze&&C&&td(t),t.flags|=1,xt(e,t,s,c),t.child)}function tp(e,t,i,s,c){if(e===null){var u=i.type;return typeof u=="function"&&!$u(u)&&u.defaultProps===void 0&&i.compare===null?(t.tag=15,t.type=u,np(e,t,u,s,c)):(e=Dl(i.type,null,s,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(u=e.child,!Qd(e,c)){var g=u.memoizedProps;if(i=i.compare,i=i!==null?i:gr,i(g,s)&&e.ref===t.ref)return Di(e,t,c)}return t.flags|=1,e=Ii(u,s),e.ref=t.ref,e.return=t,t.child=e}function np(e,t,i,s,c){if(e!==null){var u=e.memoizedProps;if(gr(u,s)&&e.ref===t.ref)if(St=!1,t.pendingProps=s=u,Qd(e,c))(e.flags&131072)!==0&&(St=!0);else return t.lanes=e.lanes,Di(e,t,c)}return Bd(e,t,i,s,c)}function ip(e,t,i,s){var c=s.children,u=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.mode==="hidden"){if((t.flags&128)!==0){if(u=u!==null?u.baseLanes|i:i,e!==null){for(s=t.child=e.child,c=0;s!==null;)c=c|s.lanes|s.childLanes,s=s.sibling;s=c&~u}else s=0,t.child=null;return ap(e,t,u,i,s)}if((i&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&zl(t,u!==null?u.cachePool:null),u!==null?om(t,u):pd(),rm(t);else return s=t.lanes=536870912,ap(e,t,u!==null?u.baseLanes|i:i,i,s)}else u!==null?(zl(t,u.cachePool),om(t,u),ga(),t.memoizedState=null):(e!==null&&zl(t,null),pd(),ga());return xt(e,t,c,i),t.child}function Or(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function ap(e,t,i,s,c){var u=ud();return u=u===null?null:{parent:vt._currentValue,pool:u},t.memoizedState={baseLanes:i,cachePool:u},e!==null&&zl(t,null),pd(),rm(t),e!==null&&ho(e,t,s,!0),t.childLanes=c,null}function ec(e,t){return t=nc({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function sp(e,t,i){return ys(t,e.child,null,i),e=ec(t,t.pendingProps),e.flags|=2,En(t),t.memoizedState=null,e}function rT(e,t,i){var s=t.pendingProps,c=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(ze){if(s.mode==="hidden")return e=ec(t,s),t.lanes=536870912,Or(null,e);if(vd(t),(e=at)?(e=yy(e,Dn),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:oa!==null?{id:ui,overflow:di}:null,retryLane:536870912,hydrationErrors:null},i=Pg(e),i.return=t,t.child=i,Nt=t,at=null)):e=null,e===null)throw la(t);return t.lanes=536870912,null}return ec(t,s)}var u=e.memoizedState;if(u!==null){var g=u.dehydrated;if(vd(t),c)if(t.flags&256)t.flags&=-257,t=sp(e,t,i);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(o(558));else if(St||ho(e,t,i,!1),c=(i&e.childLanes)!==0,St||c){if(s=et,s!==null&&(g=Qa(s,i),g!==0&&g!==u.retryLane))throw u.retryLane=g,cs(e,g),sn(s,e,g),Ld;dc(),t=sp(e,t,i)}else e=u.treeContext,at=jn(g.nextSibling),Nt=t,ze=!0,ra=null,Dn=!1,e!==null&&Fg(t,e),t=ec(t,s),t.flags|=4096;return t}return e=Ii(e.child,{mode:s.mode,children:s.children}),e.ref=t.ref,t.child=e,e.return=t,e}function tc(e,t){var i=t.ref;if(i===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(o(284));(e===null||e.ref!==i)&&(t.flags|=4194816)}}function Bd(e,t,i,s,c){return fs(t),i=Sd(e,t,i,s,void 0,c),s=Td(),e!==null&&!St?(Ed(e,t,c),Di(e,t,c)):(ze&&s&&td(t),t.flags|=1,xt(e,t,i,c),t.child)}function op(e,t,i,s,c,u){return fs(t),t.updateQueue=null,i=cm(t,s,i,c),lm(e),s=Td(),e!==null&&!St?(Ed(e,t,u),Di(e,t,u)):(ze&&s&&td(t),t.flags|=1,xt(e,t,i,u),t.child)}function rp(e,t,i,s,c){if(fs(t),t.stateNode===null){var u=ro,g=i.contextType;typeof g=="object"&&g!==null&&(u=Mt(g)),u=new i(s,u),t.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=Hd,t.stateNode=u,u._reactInternals=t,u=t.stateNode,u.props=s,u.state=t.memoizedState,u.refs={},hd(t),g=i.contextType,u.context=typeof g=="object"&&g!==null?Mt(g):ro,u.state=t.memoizedState,g=i.getDerivedStateFromProps,typeof g=="function"&&(jd(t,i,g,s),u.state=t.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(g=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),g!==u.state&&Hd.enqueueReplaceState(u,u.state,null),br(t,s,u,c),Ar(),u.state=t.memoizedState),typeof u.componentDidMount=="function"&&(t.flags|=4194308),s=!0}else if(e===null){u=t.stateNode;var C=t.memoizedProps,A=Cs(i,C);u.props=A;var R=u.context,B=i.contextType;g=ro,typeof B=="object"&&B!==null&&(g=Mt(B));var V=i.getDerivedStateFromProps;B=typeof V=="function"||typeof u.getSnapshotBeforeUpdate=="function",C=t.pendingProps!==C,B||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(C||R!==g)&&Qm(t,u,s,g),ua=!1;var M=t.memoizedState;u.state=M,br(t,s,u,c),Ar(),R=t.memoizedState,C||M!==R||ua?(typeof V=="function"&&(jd(t,i,V,s),R=t.memoizedState),(A=ua||Ym(t,i,A,s,M,R,g))?(B||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(t.flags|=4194308)):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=R),u.props=s,u.state=R,u.context=g,s=A):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{u=t.stateNode,fd(e,t),g=t.memoizedProps,B=Cs(i,g),u.props=B,V=t.pendingProps,M=u.context,R=i.contextType,A=ro,typeof R=="object"&&R!==null&&(A=Mt(R)),C=i.getDerivedStateFromProps,(R=typeof C=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(g!==V||M!==A)&&Qm(t,u,s,A),ua=!1,M=t.memoizedState,u.state=M,br(t,s,u,c),Ar();var j=t.memoizedState;g!==V||M!==j||ua||e!==null&&e.dependencies!==null&&jl(e.dependencies)?(typeof C=="function"&&(jd(t,i,C,s),j=t.memoizedState),(B=ua||Ym(t,i,B,s,M,j,A)||e!==null&&e.dependencies!==null&&jl(e.dependencies))?(R||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(s,j,A),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(s,j,A)),typeof u.componentDidUpdate=="function"&&(t.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof u.componentDidUpdate!="function"||g===e.memoizedProps&&M===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&M===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=j),u.props=s,u.state=j,u.context=A,s=B):(typeof u.componentDidUpdate!="function"||g===e.memoizedProps&&M===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&M===e.memoizedState||(t.flags|=1024),s=!1)}return u=s,tc(e,t),s=(t.flags&128)!==0,u||s?(u=t.stateNode,i=s&&typeof i.getDerivedStateFromError!="function"?null:u.render(),t.flags|=1,e!==null&&s?(t.child=ys(t,e.child,null,c),t.child=ys(t,null,i,c)):xt(e,t,i,c),t.memoizedState=u.state,e=t.child):e=Di(e,t,c),e}function lp(e,t,i,s){return ds(),t.flags|=256,xt(e,t,i,s),t.child}var Kd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Pd(e){return{baseLanes:e,cachePool:Zg()}}function Gd(e,t,i){return e=e!==null?e.childLanes&~i:0,t&&(e|=bn),e}function cp(e,t,i){var s=t.pendingProps,c=!1,u=(t.flags&128)!==0,g;if((g=u)||(g=e!==null&&e.memoizedState===null?!1:(gt.current&2)!==0),g&&(c=!0,t.flags&=-129),g=(t.flags&32)!==0,t.flags&=-33,e===null){if(ze){if(c?fa(t):ga(),(e=at)?(e=yy(e,Dn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:oa!==null?{id:ui,overflow:di}:null,retryLane:536870912,hydrationErrors:null},i=Pg(e),i.return=t,t.child=i,Nt=t,at=null)):e=null,e===null)throw la(t);return wh(e)?t.lanes=32:t.lanes=536870912,null}var C=s.children;return s=s.fallback,c?(ga(),c=t.mode,C=nc({mode:"hidden",children:C},c),s=us(s,c,i,null),C.return=t,s.return=t,C.sibling=s,t.child=C,s=t.child,s.memoizedState=Pd(i),s.childLanes=Gd(e,g,i),t.memoizedState=Kd,Or(null,s)):(fa(t),Vd(t,C))}var A=e.memoizedState;if(A!==null&&(C=A.dehydrated,C!==null)){if(u)t.flags&256?(fa(t),t.flags&=-257,t=Fd(e,t,i)):t.memoizedState!==null?(ga(),t.child=e.child,t.flags|=128,t=null):(ga(),C=s.fallback,c=t.mode,s=nc({mode:"visible",children:s.children},c),C=us(C,c,i,null),C.flags|=2,s.return=t,C.return=t,s.sibling=C,t.child=s,ys(t,e.child,null,i),s=t.child,s.memoizedState=Pd(i),s.childLanes=Gd(e,g,i),t.memoizedState=Kd,t=Or(null,s));else if(fa(t),wh(C)){if(g=C.nextSibling&&C.nextSibling.dataset,g)var R=g.dgst;g=R,s=Error(o(419)),s.stack="",s.digest=g,yr({value:s,source:null,stack:null}),t=Fd(e,t,i)}else if(St||ho(e,t,i,!1),g=(i&e.childLanes)!==0,St||g){if(g=et,g!==null&&(s=Qa(g,i),s!==0&&s!==A.retryLane))throw A.retryLane=s,cs(e,s),sn(g,e,s),Ld;bh(C)||dc(),t=Fd(e,t,i)}else bh(C)?(t.flags|=192,t.child=e.child,t=null):(e=A.treeContext,at=jn(C.nextSibling),Nt=t,ze=!0,ra=null,Dn=!1,e!==null&&Fg(t,e),t=Vd(t,s.children),t.flags|=4096);return t}return c?(ga(),C=s.fallback,c=t.mode,A=e.child,R=A.sibling,s=Ii(A,{mode:"hidden",children:s.children}),s.subtreeFlags=A.subtreeFlags&65011712,R!==null?C=Ii(R,C):(C=us(C,c,i,null),C.flags|=2),C.return=t,s.return=t,s.sibling=C,t.child=s,Or(null,s),s=t.child,C=e.child.memoizedState,C===null?C=Pd(i):(c=C.cachePool,c!==null?(A=vt._currentValue,c=c.parent!==A?{parent:A,pool:A}:c):c=Zg(),C={baseLanes:C.baseLanes|i,cachePool:c}),s.memoizedState=C,s.childLanes=Gd(e,g,i),t.memoizedState=Kd,Or(e.child,s)):(fa(t),i=e.child,e=i.sibling,i=Ii(i,{mode:"visible",children:s.children}),i.return=t,i.sibling=null,e!==null&&(g=t.deletions,g===null?(t.deletions=[e],t.flags|=16):g.push(e)),t.child=i,t.memoizedState=null,i)}function Vd(e,t){return t=nc({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function nc(e,t){return e=Sn(22,e,null,t),e.lanes=0,e}function Fd(e,t,i){return ys(t,e.child,null,i),e=Vd(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function up(e,t,i){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),od(e.return,t,i)}function Yd(e,t,i,s,c,u){var g=e.memoizedState;g===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:i,tailMode:c,treeForkCount:u}:(g.isBackwards=t,g.rendering=null,g.renderingStartTime=0,g.last=s,g.tail=i,g.tailMode=c,g.treeForkCount=u)}function dp(e,t,i){var s=t.pendingProps,c=s.revealOrder,u=s.tail;s=s.children;var g=gt.current,C=(g&2)!==0;if(C?(g=g&1|2,t.flags|=128):g&=1,J(gt,g),xt(e,t,s,i),s=ze?pr:0,!C&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&up(e,i,t);else if(e.tag===19)up(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(c){case"forwards":for(i=t.child,c=null;i!==null;)e=i.alternate,e!==null&&Vl(e)===null&&(c=i),i=i.sibling;i=c,i===null?(c=t.child,t.child=null):(c=i.sibling,i.sibling=null),Yd(t,!1,c,i,u,s);break;case"backwards":case"unstable_legacy-backwards":for(i=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&Vl(e)===null){t.child=c;break}e=c.sibling,c.sibling=i,i=c,c=e}Yd(t,!0,i,null,u,s);break;case"together":Yd(t,!1,null,null,void 0,s);break;default:t.memoizedState=null}return t.child}function Di(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),ya|=t.lanes,(i&t.childLanes)===0)if(e!==null){if(ho(e,t,i,!1),(i&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(o(153));if(t.child!==null){for(e=t.child,i=Ii(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=Ii(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function Qd(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&jl(e)))}function lT(e,t,i){switch(t.tag){case 3:it(t,t.stateNode.containerInfo),ca(t,vt,e.memoizedState.cache),ds();break;case 27:case 5:Ot(t);break;case 4:it(t,t.stateNode.containerInfo);break;case 10:ca(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,vd(t),null;break;case 13:var s=t.memoizedState;if(s!==null)return s.dehydrated!==null?(fa(t),t.flags|=128,null):(i&t.child.childLanes)!==0?cp(e,t,i):(fa(t),e=Di(e,t,i),e!==null?e.sibling:null);fa(t);break;case 19:var c=(e.flags&128)!==0;if(s=(i&t.childLanes)!==0,s||(ho(e,t,i,!1),s=(i&t.childLanes)!==0),c){if(s)return dp(e,t,i);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),J(gt,gt.current),s)break;return null;case 22:return t.lanes=0,ip(e,t,i,t.pendingProps);case 24:ca(t,vt,e.memoizedState.cache)}return Di(e,t,i)}function hp(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps)St=!0;else{if(!Qd(e,i)&&(t.flags&128)===0)return St=!1,lT(e,t,i);St=(e.flags&131072)!==0}else St=!1,ze&&(t.flags&1048576)!==0&&Vg(t,pr,t.index);switch(t.lanes=0,t.tag){case 16:e:{var s=t.pendingProps;if(e=ms(t.elementType),t.type=e,typeof e=="function")$u(e)?(s=Cs(e,s),t.tag=1,t=rp(null,t,e,s,i)):(t.tag=0,t=Bd(null,t,e,s,i));else{if(e!=null){var c=e.$$typeof;if(c===je){t.tag=11,t=ep(null,t,e,s,i);break e}else if(c===re){t.tag=14,t=tp(null,t,e,s,i);break e}}throw t=Be(e)||e,Error(o(306,t,""))}}return t;case 0:return Bd(e,t,t.type,t.pendingProps,i);case 1:return s=t.type,c=Cs(s,t.pendingProps),rp(e,t,s,c,i);case 3:e:{if(it(t,t.stateNode.containerInfo),e===null)throw Error(o(387));s=t.pendingProps;var u=t.memoizedState;c=u.element,fd(e,t),br(t,s,null,i);var g=t.memoizedState;if(s=g.cache,ca(t,vt,s),s!==u.cache&&rd(t,[vt],i,!0),Ar(),s=g.element,u.isDehydrated)if(u={element:s,isDehydrated:!1,cache:g.cache},t.updateQueue.baseState=u,t.memoizedState=u,t.flags&256){t=lp(e,t,s,i);break e}else if(s!==c){c=Nn(Error(o(424)),t),yr(c),t=lp(e,t,s,i);break e}else for(e=t.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,at=jn(e.firstChild),Nt=t,ze=!0,ra=null,Dn=!0,i=im(t,null,s,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(ds(),s===c){t=Di(e,t,i);break e}xt(e,t,s,i)}t=t.child}return t;case 26:return tc(e,t),e===null?(i=Ay(t.type,null,t.pendingProps,null))?t.memoizedState=i:ze||(i=t.type,e=t.pendingProps,s=vc(le.current).createElement(i),s[lt]=t,s[_t]=e,Dt(s,i,e),ct(s),t.stateNode=s):t.memoizedState=Ay(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Ot(t),e===null&&ze&&(s=t.stateNode=Sy(t.type,t.pendingProps,le.current),Nt=t,Dn=!0,c=at,Ea(t.type)?(_h=c,at=jn(s.firstChild)):at=c),xt(e,t,t.pendingProps.children,i),tc(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&ze&&((c=s=at)&&(s=zT(s,t.type,t.pendingProps,Dn),s!==null?(t.stateNode=s,Nt=t,at=jn(s.firstChild),Dn=!1,c=!0):c=!1),c||la(t)),Ot(t),c=t.type,u=t.pendingProps,g=e!==null?e.memoizedProps:null,s=u.children,Th(c,u)?s=null:g!==null&&Th(c,g)&&(t.flags|=32),t.memoizedState!==null&&(c=Sd(e,t,WS,null,null,i),Vr._currentValue=c),tc(e,t),xt(e,t,s,i),t.child;case 6:return e===null&&ze&&((e=i=at)&&(i=LT(i,t.pendingProps,Dn),i!==null?(t.stateNode=i,Nt=t,at=null,e=!0):e=!1),e||la(t)),null;case 13:return cp(e,t,i);case 4:return it(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=ys(t,null,s,i):xt(e,t,s,i),t.child;case 11:return ep(e,t,t.type,t.pendingProps,i);case 7:return xt(e,t,t.pendingProps,i),t.child;case 8:return xt(e,t,t.pendingProps.children,i),t.child;case 12:return xt(e,t,t.pendingProps.children,i),t.child;case 10:return s=t.pendingProps,ca(t,t.type,s.value),xt(e,t,s.children,i),t.child;case 9:return c=t.type._context,s=t.pendingProps.children,fs(t),c=Mt(c),s=s(c),t.flags|=1,xt(e,t,s,i),t.child;case 14:return tp(e,t,t.type,t.pendingProps,i);case 15:return np(e,t,t.type,t.pendingProps,i);case 19:return dp(e,t,i);case 31:return rT(e,t,i);case 22:return ip(e,t,i,t.pendingProps);case 24:return fs(t),s=Mt(vt),e===null?(c=ud(),c===null&&(c=et,u=ld(),c.pooledCache=u,u.refCount++,u!==null&&(c.pooledCacheLanes|=i),c=u),t.memoizedState={parent:s,cache:c},hd(t),ca(t,vt,c)):((e.lanes&i)!==0&&(fd(e,t),br(t,null,null,i),Ar()),c=e.memoizedState,u=t.memoizedState,c.parent!==s?(c={parent:s,cache:s},t.memoizedState=c,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=c),ca(t,vt,s)):(s=u.cache,ca(t,vt,s),s!==c.cache&&rd(t,[vt],i,!0))),xt(e,t,t.pendingProps.children,i),t.child;case 29:throw t.pendingProps}throw Error(o(156,t.tag))}function Ui(e){e.flags|=4}function qd(e,t,i,s,c){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(c&335544128)===c)if(e.stateNode.complete)e.flags|=8192;else if(Lp())e.flags|=8192;else throw ps=Bl,dd}else e.flags&=-16777217}function fp(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Iy(t))if(Lp())e.flags|=8192;else throw ps=Bl,dd}function ic(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?ir():536870912,e.lanes|=t,bo|=t)}function Rr(e,t){if(!ze)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var s=null;i!==null;)i.alternate!==null&&(s=i),i=i.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function st(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,s=0;if(t)for(var c=e.child;c!==null;)i|=c.lanes|c.childLanes,s|=c.subtreeFlags&65011712,s|=c.flags&65011712,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)i|=c.lanes|c.childLanes,s|=c.subtreeFlags,s|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=s,e.childLanes=i,t}function cT(e,t,i){var s=t.pendingProps;switch(nd(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return st(t),null;case 1:return st(t),null;case 3:return i=t.stateNode,s=null,e!==null&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),Ni(vt),He(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(uo(t)?Ui(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,ad())),st(t),null;case 26:var c=t.type,u=t.memoizedState;return e===null?(Ui(t),u!==null?(st(t),fp(t,u)):(st(t),qd(t,c,null,s,i))):u?u!==e.memoizedState?(Ui(t),st(t),fp(t,u)):(st(t),t.flags&=-16777217):(e=e.memoizedProps,e!==s&&Ui(t),st(t),qd(t,c,e,s,i)),null;case 27:if(vi(t),i=le.current,c=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==s&&Ui(t);else{if(!s){if(t.stateNode===null)throw Error(o(166));return st(t),null}e=P.current,uo(t)?Yg(t):(e=Sy(c,s,i),t.stateNode=e,Ui(t))}return st(t),null;case 5:if(vi(t),c=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==s&&Ui(t);else{if(!s){if(t.stateNode===null)throw Error(o(166));return st(t),null}if(u=P.current,uo(t))Yg(t);else{var g=vc(le.current);switch(u){case 1:u=g.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:u=g.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":u=g.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":u=g.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":u=g.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild);break;case"select":u=typeof s.is=="string"?g.createElement("select",{is:s.is}):g.createElement("select"),s.multiple?u.multiple=!0:s.size&&(u.size=s.size);break;default:u=typeof s.is=="string"?g.createElement(c,{is:s.is}):g.createElement(c)}}u[lt]=t,u[_t]=s;e:for(g=t.child;g!==null;){if(g.tag===5||g.tag===6)u.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}t.stateNode=u;e:switch(Dt(u,c,s),c){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&Ui(t)}}return st(t),qd(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,i),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==s&&Ui(t);else{if(typeof s!="string"&&t.stateNode===null)throw Error(o(166));if(e=le.current,uo(t)){if(e=t.stateNode,i=t.memoizedProps,s=null,c=Nt,c!==null)switch(c.tag){case 27:case 5:s=c.memoizedProps}e[lt]=t,e=!!(e.nodeValue===i||s!==null&&s.suppressHydrationWarning===!0||cy(e.nodeValue,i)),e||la(t,!0)}else e=vc(e).createTextNode(s),e[lt]=t,t.stateNode=e}return st(t),null;case 31:if(i=t.memoizedState,e===null||e.memoizedState!==null){if(s=uo(t),i!==null){if(e===null){if(!s)throw Error(o(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(557));e[lt]=t}else ds(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;st(t),e=!1}else i=ad(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=i),e=!0;if(!e)return t.flags&256?(En(t),t):(En(t),null);if((t.flags&128)!==0)throw Error(o(558))}return st(t),null;case 13:if(s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(c=uo(t),s!==null&&s.dehydrated!==null){if(e===null){if(!c)throw Error(o(318));if(c=t.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(o(317));c[lt]=t}else ds(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;st(t),c=!1}else c=ad(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=c),c=!0;if(!c)return t.flags&256?(En(t),t):(En(t),null)}return En(t),(t.flags&128)!==0?(t.lanes=i,t):(i=s!==null,e=e!==null&&e.memoizedState!==null,i&&(s=t.child,c=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(c=s.alternate.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==c&&(s.flags|=2048)),i!==e&&i&&(t.child.flags|=8192),ic(t,t.updateQueue),st(t),null);case 4:return He(),e===null&&ph(t.stateNode.containerInfo),st(t),null;case 10:return Ni(t.type),st(t),null;case 19:if(x(gt),s=t.memoizedState,s===null)return st(t),null;if(c=(t.flags&128)!==0,u=s.rendering,u===null)if(c)Rr(s,!1);else{if(dt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(u=Vl(e),u!==null){for(t.flags|=128,Rr(s,!1),e=u.updateQueue,t.updateQueue=e,ic(t,e),t.subtreeFlags=0,e=i,i=t.child;i!==null;)Kg(i,e),i=i.sibling;return J(gt,gt.current&1|2),ze&&Oi(t,s.treeForkCount),t.child}e=e.sibling}s.tail!==null&&Ht()>lc&&(t.flags|=128,c=!0,Rr(s,!1),t.lanes=4194304)}else{if(!c)if(e=Vl(u),e!==null){if(t.flags|=128,c=!0,e=e.updateQueue,t.updateQueue=e,ic(t,e),Rr(s,!0),s.tail===null&&s.tailMode==="hidden"&&!u.alternate&&!ze)return st(t),null}else 2*Ht()-s.renderingStartTime>lc&&i!==536870912&&(t.flags|=128,c=!0,Rr(s,!1),t.lanes=4194304);s.isBackwards?(u.sibling=t.child,t.child=u):(e=s.last,e!==null?e.sibling=u:t.child=u,s.last=u)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ht(),e.sibling=null,i=gt.current,J(gt,c?i&1|2:i&1),ze&&Oi(t,s.treeForkCount),e):(st(t),null);case 22:case 23:return En(t),yd(),s=t.memoizedState!==null,e!==null?e.memoizedState!==null!==s&&(t.flags|=8192):s&&(t.flags|=8192),s?(i&536870912)!==0&&(t.flags&128)===0&&(st(t),t.subtreeFlags&6&&(t.flags|=8192)):st(t),i=t.updateQueue,i!==null&&ic(t,i.retryQueue),i=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),s=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),s!==i&&(t.flags|=2048),e!==null&&x(gs),null;case 24:return i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),Ni(vt),st(t),null;case 25:return null;case 30:return null}throw Error(o(156,t.tag))}function uT(e,t){switch(nd(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ni(vt),He(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return vi(t),null;case 31:if(t.memoizedState!==null){if(En(t),t.alternate===null)throw Error(o(340));ds()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(En(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(o(340));ds()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return x(gt),null;case 4:return He(),null;case 10:return Ni(t.type),null;case 22:case 23:return En(t),yd(),e!==null&&x(gs),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Ni(vt),null;case 25:return null;default:return null}}function gp(e,t){switch(nd(t),t.tag){case 3:Ni(vt),He();break;case 26:case 27:case 5:vi(t);break;case 4:He();break;case 31:t.memoizedState!==null&&En(t);break;case 13:En(t);break;case 19:x(gt);break;case 10:Ni(t.type);break;case 22:case 23:En(t),yd(),e!==null&&x(gs);break;case 24:Ni(vt)}}function Nr(e,t){try{var i=t.updateQueue,s=i!==null?i.lastEffect:null;if(s!==null){var c=s.next;i=c;do{if((i.tag&e)===e){s=void 0;var u=i.create,g=i.inst;s=u(),g.destroy=s}i=i.next}while(i!==c)}}catch(C){Je(t,t.return,C)}}function ma(e,t,i){try{var s=t.updateQueue,c=s!==null?s.lastEffect:null;if(c!==null){var u=c.next;s=u;do{if((s.tag&e)===e){var g=s.inst,C=g.destroy;if(C!==void 0){g.destroy=void 0,c=t;var A=i,R=C;try{R()}catch(B){Je(c,A,B)}}}s=s.next}while(s!==u)}}catch(B){Je(t,t.return,B)}}function mp(e){var t=e.updateQueue;if(t!==null){var i=e.stateNode;try{sm(t,i)}catch(s){Je(e,e.return,s)}}}function pp(e,t,i){i.props=Cs(e.type,e.memoizedProps),i.state=e.memoizedState;try{i.componentWillUnmount()}catch(s){Je(e,t,s)}}function Mr(e,t){try{var i=e.ref;if(i!==null){switch(e.tag){case 26:case 27:case 5:var s=e.stateNode;break;case 30:s=e.stateNode;break;default:s=e.stateNode}typeof i=="function"?e.refCleanup=i(s):i.current=s}}catch(c){Je(e,t,c)}}function hi(e,t){var i=e.ref,s=e.refCleanup;if(i!==null)if(typeof s=="function")try{s()}catch(c){Je(e,t,c)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(c){Je(e,t,c)}else i.current=null}function yp(e){var t=e.type,i=e.memoizedProps,s=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":i.autoFocus&&s.focus();break e;case"img":i.src?s.src=i.src:i.srcSet&&(s.srcset=i.srcSet)}}catch(c){Je(e,e.return,c)}}function Jd(e,t,i){try{var s=e.stateNode;MT(s,e.type,i,t),s[_t]=t}catch(c){Je(e,e.return,c)}}function vp(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Ea(e.type)||e.tag===4}function Xd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||vp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Ea(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Zd(e,t,i){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(e,t):(t=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,t.appendChild(e),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=vn));else if(s!==4&&(s===27&&Ea(e.type)&&(i=e.stateNode,t=null),e=e.child,e!==null))for(Zd(e,t,i),e=e.sibling;e!==null;)Zd(e,t,i),e=e.sibling}function ac(e,t,i){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(s!==4&&(s===27&&Ea(e.type)&&(i=e.stateNode),e=e.child,e!==null))for(ac(e,t,i),e=e.sibling;e!==null;)ac(e,t,i),e=e.sibling}function Cp(e){var t=e.stateNode,i=e.memoizedProps;try{for(var s=e.type,c=t.attributes;c.length;)t.removeAttributeNode(c[0]);Dt(t,s,i),t[lt]=e,t[_t]=i}catch(u){Je(e,e.return,u)}}var ji=!1,Tt=!1,$d=!1,Sp=typeof WeakSet=="function"?WeakSet:Set,It=null;function dT(e,t){if(e=e.containerInfo,Ch=wc,e=Mg(e),Fu(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var s=i.getSelection&&i.getSelection();if(s&&s.rangeCount!==0){i=s.anchorNode;var c=s.anchorOffset,u=s.focusNode;s=s.focusOffset;try{i.nodeType,u.nodeType}catch{i=null;break e}var g=0,C=-1,A=-1,R=0,B=0,V=e,M=null;t:for(;;){for(var j;V!==i||c!==0&&V.nodeType!==3||(C=g+c),V!==u||s!==0&&V.nodeType!==3||(A=g+s),V.nodeType===3&&(g+=V.nodeValue.length),(j=V.firstChild)!==null;)M=V,V=j;for(;;){if(V===e)break t;if(M===i&&++R===c&&(C=g),M===u&&++B===s&&(A=g),(j=V.nextSibling)!==null)break;V=M,M=V.parentNode}V=j}i=C===-1||A===-1?null:{start:C,end:A}}else i=null}i=i||{start:0,end:0}}else i=null;for(Sh={focusedElem:e,selectionRange:i},wc=!1,It=t;It!==null;)if(t=It,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,It=e;else for(;It!==null;){switch(t=It,u=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(i=0;i<e.length;i++)c=e[i],c.ref.impl=c.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&u!==null){e=void 0,i=t,c=u.memoizedProps,u=u.memoizedState,s=i.stateNode;try{var se=Cs(i.type,c);e=s.getSnapshotBeforeUpdate(se,u),s.__reactInternalSnapshotBeforeUpdate=e}catch(me){Je(i,i.return,me)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,i=e.nodeType,i===9)Ah(e);else if(i===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Ah(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(o(163))}if(e=t.sibling,e!==null){e.return=t.return,It=e;break}It=t.return}}function Tp(e,t,i){var s=i.flags;switch(i.tag){case 0:case 11:case 15:zi(e,i),s&4&&Nr(5,i);break;case 1:if(zi(e,i),s&4)if(e=i.stateNode,t===null)try{e.componentDidMount()}catch(g){Je(i,i.return,g)}else{var c=Cs(i.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(c,t,e.__reactInternalSnapshotBeforeUpdate)}catch(g){Je(i,i.return,g)}}s&64&&mp(i),s&512&&Mr(i,i.return);break;case 3:if(zi(e,i),s&64&&(e=i.updateQueue,e!==null)){if(t=null,i.child!==null)switch(i.child.tag){case 27:case 5:t=i.child.stateNode;break;case 1:t=i.child.stateNode}try{sm(e,t)}catch(g){Je(i,i.return,g)}}break;case 27:t===null&&s&4&&Cp(i);case 26:case 5:zi(e,i),t===null&&s&4&&yp(i),s&512&&Mr(i,i.return);break;case 12:zi(e,i);break;case 31:zi(e,i),s&4&&bp(e,i);break;case 13:zi(e,i),s&4&&wp(e,i),s&64&&(e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(i=ST.bind(null,i),BT(e,i))));break;case 22:if(s=i.memoizedState!==null||ji,!s){t=t!==null&&t.memoizedState!==null||Tt,c=ji;var u=Tt;ji=s,(Tt=t)&&!u?Li(e,i,(i.subtreeFlags&8772)!==0):zi(e,i),ji=c,Tt=u}break;case 30:break;default:zi(e,i)}}function Ep(e){var t=e.alternate;t!==null&&(e.alternate=null,Ep(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&sr(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var ot=null,en=!1;function Hi(e,t,i){for(i=i.child;i!==null;)Ap(e,t,i),i=i.sibling}function Ap(e,t,i){if(Rt&&typeof Rt.onCommitFiberUnmount=="function")try{Rt.onCommitFiberUnmount(ni,i)}catch{}switch(i.tag){case 26:Tt||hi(i,t),Hi(e,t,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:Tt||hi(i,t);var s=ot,c=en;Ea(i.type)&&(ot=i.stateNode,en=!1),Hi(e,t,i),Kr(i.stateNode),ot=s,en=c;break;case 5:Tt||hi(i,t);case 6:if(s=ot,c=en,ot=null,Hi(e,t,i),ot=s,en=c,ot!==null)if(en)try{(ot.nodeType===9?ot.body:ot.nodeName==="HTML"?ot.ownerDocument.body:ot).removeChild(i.stateNode)}catch(u){Je(i,t,u)}else try{ot.removeChild(i.stateNode)}catch(u){Je(i,t,u)}break;case 18:ot!==null&&(en?(e=ot,my(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,i.stateNode),Mo(e)):my(ot,i.stateNode));break;case 4:s=ot,c=en,ot=i.stateNode.containerInfo,en=!0,Hi(e,t,i),ot=s,en=c;break;case 0:case 11:case 14:case 15:ma(2,i,t),Tt||ma(4,i,t),Hi(e,t,i);break;case 1:Tt||(hi(i,t),s=i.stateNode,typeof s.componentWillUnmount=="function"&&pp(i,t,s)),Hi(e,t,i);break;case 21:Hi(e,t,i);break;case 22:Tt=(s=Tt)||i.memoizedState!==null,Hi(e,t,i),Tt=s;break;default:Hi(e,t,i)}}function bp(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Mo(e)}catch(i){Je(t,t.return,i)}}}function wp(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Mo(e)}catch(i){Je(t,t.return,i)}}function hT(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Sp),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Sp),t;default:throw Error(o(435,e.tag))}}function sc(e,t){var i=hT(e);t.forEach(function(s){if(!i.has(s)){i.add(s);var c=TT.bind(null,e,s);s.then(c,c)}})}function tn(e,t){var i=t.deletions;if(i!==null)for(var s=0;s<i.length;s++){var c=i[s],u=e,g=t,C=g;e:for(;C!==null;){switch(C.tag){case 27:if(Ea(C.type)){ot=C.stateNode,en=!1;break e}break;case 5:ot=C.stateNode,en=!1;break e;case 3:case 4:ot=C.stateNode.containerInfo,en=!0;break e}C=C.return}if(ot===null)throw Error(o(160));Ap(u,g,c),ot=null,en=!1,u=c.alternate,u!==null&&(u.return=null),c.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)_p(t,e),t=t.sibling}var Yn=null;function _p(e,t){var i=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:tn(t,e),nn(e),s&4&&(ma(3,e,e.return),Nr(3,e),ma(5,e,e.return));break;case 1:tn(t,e),nn(e),s&512&&(Tt||i===null||hi(i,i.return)),s&64&&ji&&(e=e.updateQueue,e!==null&&(s=e.callbacks,s!==null&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=i===null?s:i.concat(s))));break;case 26:var c=Yn;if(tn(t,e),nn(e),s&512&&(Tt||i===null||hi(i,i.return)),s&4){var u=i!==null?i.memoizedState:null;if(s=e.memoizedState,i===null)if(s===null)if(e.stateNode===null){e:{s=e.type,i=e.memoizedProps,c=c.ownerDocument||c;t:switch(s){case"title":u=c.getElementsByTagName("title")[0],(!u||u[mn]||u[lt]||u.namespaceURI==="http://www.w3.org/2000/svg"||u.hasAttribute("itemprop"))&&(u=c.createElement(s),c.head.insertBefore(u,c.querySelector("head > title"))),Dt(u,s,i),u[lt]=e,ct(u),s=u;break e;case"link":var g=_y("link","href",c).get(s+(i.href||""));if(g){for(var C=0;C<g.length;C++)if(u=g[C],u.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&u.getAttribute("rel")===(i.rel==null?null:i.rel)&&u.getAttribute("title")===(i.title==null?null:i.title)&&u.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){g.splice(C,1);break t}}u=c.createElement(s),Dt(u,s,i),c.head.appendChild(u);break;case"meta":if(g=_y("meta","content",c).get(s+(i.content||""))){for(C=0;C<g.length;C++)if(u=g[C],u.getAttribute("content")===(i.content==null?null:""+i.content)&&u.getAttribute("name")===(i.name==null?null:i.name)&&u.getAttribute("property")===(i.property==null?null:i.property)&&u.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&u.getAttribute("charset")===(i.charSet==null?null:i.charSet)){g.splice(C,1);break t}}u=c.createElement(s),Dt(u,s,i),c.head.appendChild(u);break;default:throw Error(o(468,s))}u[lt]=e,ct(u),s=u}e.stateNode=s}else ky(c,e.type,e.stateNode);else e.stateNode=wy(c,s,e.memoizedProps);else u!==s?(u===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):u.count--,s===null?ky(c,e.type,e.stateNode):wy(c,s,e.memoizedProps)):s===null&&e.stateNode!==null&&Jd(e,e.memoizedProps,i.memoizedProps)}break;case 27:tn(t,e),nn(e),s&512&&(Tt||i===null||hi(i,i.return)),i!==null&&s&4&&Jd(e,e.memoizedProps,i.memoizedProps);break;case 5:if(tn(t,e),nn(e),s&512&&(Tt||i===null||hi(i,i.return)),e.flags&32){c=e.stateNode;try{ia(c,"")}catch(se){Je(e,e.return,se)}}s&4&&e.stateNode!=null&&(c=e.memoizedProps,Jd(e,c,i!==null?i.memoizedProps:c)),s&1024&&($d=!0);break;case 6:if(tn(t,e),nn(e),s&4){if(e.stateNode===null)throw Error(o(162));s=e.memoizedProps,i=e.stateNode;try{i.nodeValue=s}catch(se){Je(e,e.return,se)}}break;case 3:if(Tc=null,c=Yn,Yn=Cc(t.containerInfo),tn(t,e),Yn=c,nn(e),s&4&&i!==null&&i.memoizedState.isDehydrated)try{Mo(t.containerInfo)}catch(se){Je(e,e.return,se)}$d&&($d=!1,kp(e));break;case 4:s=Yn,Yn=Cc(e.stateNode.containerInfo),tn(t,e),nn(e),Yn=s;break;case 12:tn(t,e),nn(e);break;case 31:tn(t,e),nn(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,sc(e,s)));break;case 13:tn(t,e),nn(e),e.child.flags&8192&&e.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(rc=Ht()),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,sc(e,s)));break;case 22:c=e.memoizedState!==null;var A=i!==null&&i.memoizedState!==null,R=ji,B=Tt;if(ji=R||c,Tt=B||A,tn(t,e),Tt=B,ji=R,nn(e),s&8192)e:for(t=e.stateNode,t._visibility=c?t._visibility&-2:t._visibility|1,c&&(i===null||A||ji||Tt||Ss(e)),i=null,t=e;;){if(t.tag===5||t.tag===26){if(i===null){A=i=t;try{if(u=A.stateNode,c)g=u.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none";else{C=A.stateNode;var V=A.memoizedProps.style,M=V!=null&&V.hasOwnProperty("display")?V.display:null;C.style.display=M==null||typeof M=="boolean"?"":(""+M).trim()}}catch(se){Je(A,A.return,se)}}}else if(t.tag===6){if(i===null){A=t;try{A.stateNode.nodeValue=c?"":A.memoizedProps}catch(se){Je(A,A.return,se)}}}else if(t.tag===18){if(i===null){A=t;try{var j=A.stateNode;c?py(j,!0):py(A.stateNode,!1)}catch(se){Je(A,A.return,se)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;i===t&&(i=null),t=t.return}i===t&&(i=null),t.sibling.return=t.return,t=t.sibling}s&4&&(s=e.updateQueue,s!==null&&(i=s.retryQueue,i!==null&&(s.retryQueue=null,sc(e,i))));break;case 19:tn(t,e),nn(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,sc(e,s)));break;case 30:break;case 21:break;default:tn(t,e),nn(e)}}function nn(e){var t=e.flags;if(t&2){try{for(var i,s=e.return;s!==null;){if(vp(s)){i=s;break}s=s.return}if(i==null)throw Error(o(160));switch(i.tag){case 27:var c=i.stateNode,u=Xd(e);ac(e,u,c);break;case 5:var g=i.stateNode;i.flags&32&&(ia(g,""),i.flags&=-33);var C=Xd(e);ac(e,C,g);break;case 3:case 4:var A=i.stateNode.containerInfo,R=Xd(e);Zd(e,R,A);break;default:throw Error(o(161))}}catch(B){Je(e,e.return,B)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function kp(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;kp(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function zi(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Tp(e,t.alternate,t),t=t.sibling}function Ss(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ma(4,t,t.return),Ss(t);break;case 1:hi(t,t.return);var i=t.stateNode;typeof i.componentWillUnmount=="function"&&pp(t,t.return,i),Ss(t);break;case 27:Kr(t.stateNode);case 26:case 5:hi(t,t.return),Ss(t);break;case 22:t.memoizedState===null&&Ss(t);break;case 30:Ss(t);break;default:Ss(t)}e=e.sibling}}function Li(e,t,i){for(i=i&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var s=t.alternate,c=e,u=t,g=u.flags;switch(u.tag){case 0:case 11:case 15:Li(c,u,i),Nr(4,u);break;case 1:if(Li(c,u,i),s=u,c=s.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch(R){Je(s,s.return,R)}if(s=u,c=s.updateQueue,c!==null){var C=s.stateNode;try{var A=c.shared.hiddenCallbacks;if(A!==null)for(c.shared.hiddenCallbacks=null,c=0;c<A.length;c++)am(A[c],C)}catch(R){Je(s,s.return,R)}}i&&g&64&&mp(u),Mr(u,u.return);break;case 27:Cp(u);case 26:case 5:Li(c,u,i),i&&s===null&&g&4&&yp(u),Mr(u,u.return);break;case 12:Li(c,u,i);break;case 31:Li(c,u,i),i&&g&4&&bp(c,u);break;case 13:Li(c,u,i),i&&g&4&&wp(c,u);break;case 22:u.memoizedState===null&&Li(c,u,i),Mr(u,u.return);break;case 30:break;default:Li(c,u,i)}t=t.sibling}}function Wd(e,t){var i=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==i&&(e!=null&&e.refCount++,i!=null&&vr(i))}function eh(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&vr(e))}function Qn(e,t,i,s){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Ip(e,t,i,s),t=t.sibling}function Ip(e,t,i,s){var c=t.flags;switch(t.tag){case 0:case 11:case 15:Qn(e,t,i,s),c&2048&&Nr(9,t);break;case 1:Qn(e,t,i,s);break;case 3:Qn(e,t,i,s),c&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&vr(e)));break;case 12:if(c&2048){Qn(e,t,i,s),e=t.stateNode;try{var u=t.memoizedProps,g=u.id,C=u.onPostCommit;typeof C=="function"&&C(g,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(A){Je(t,t.return,A)}}else Qn(e,t,i,s);break;case 31:Qn(e,t,i,s);break;case 13:Qn(e,t,i,s);break;case 23:break;case 22:u=t.stateNode,g=t.alternate,t.memoizedState!==null?u._visibility&2?Qn(e,t,i,s):xr(e,t):u._visibility&2?Qn(e,t,i,s):(u._visibility|=2,To(e,t,i,s,(t.subtreeFlags&10256)!==0||!1)),c&2048&&Wd(g,t);break;case 24:Qn(e,t,i,s),c&2048&&eh(t.alternate,t);break;default:Qn(e,t,i,s)}}function To(e,t,i,s,c){for(c=c&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var u=e,g=t,C=i,A=s,R=g.flags;switch(g.tag){case 0:case 11:case 15:To(u,g,C,A,c),Nr(8,g);break;case 23:break;case 22:var B=g.stateNode;g.memoizedState!==null?B._visibility&2?To(u,g,C,A,c):xr(u,g):(B._visibility|=2,To(u,g,C,A,c)),c&&R&2048&&Wd(g.alternate,g);break;case 24:To(u,g,C,A,c),c&&R&2048&&eh(g.alternate,g);break;default:To(u,g,C,A,c)}t=t.sibling}}function xr(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var i=e,s=t,c=s.flags;switch(s.tag){case 22:xr(i,s),c&2048&&Wd(s.alternate,s);break;case 24:xr(i,s),c&2048&&eh(s.alternate,s);break;default:xr(i,s)}t=t.sibling}}var Dr=8192;function Eo(e,t,i){if(e.subtreeFlags&Dr)for(e=e.child;e!==null;)Op(e,t,i),e=e.sibling}function Op(e,t,i){switch(e.tag){case 26:Eo(e,t,i),e.flags&Dr&&e.memoizedState!==null&&$T(i,Yn,e.memoizedState,e.memoizedProps);break;case 5:Eo(e,t,i);break;case 3:case 4:var s=Yn;Yn=Cc(e.stateNode.containerInfo),Eo(e,t,i),Yn=s;break;case 22:e.memoizedState===null&&(s=e.alternate,s!==null&&s.memoizedState!==null?(s=Dr,Dr=16777216,Eo(e,t,i),Dr=s):Eo(e,t,i));break;default:Eo(e,t,i)}}function Rp(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Ur(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var i=0;i<t.length;i++){var s=t[i];It=s,Mp(s,e)}Rp(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Np(e),e=e.sibling}function Np(e){switch(e.tag){case 0:case 11:case 15:Ur(e),e.flags&2048&&ma(9,e,e.return);break;case 3:Ur(e);break;case 12:Ur(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,oc(e)):Ur(e);break;default:Ur(e)}}function oc(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var i=0;i<t.length;i++){var s=t[i];It=s,Mp(s,e)}Rp(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:ma(8,t,t.return),oc(t);break;case 22:i=t.stateNode,i._visibility&2&&(i._visibility&=-3,oc(t));break;default:oc(t)}e=e.sibling}}function Mp(e,t){for(;It!==null;){var i=It;switch(i.tag){case 0:case 11:case 15:ma(8,i,t);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var s=i.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:vr(i.memoizedState.cache)}if(s=i.child,s!==null)s.return=i,It=s;else e:for(i=e;It!==null;){s=It;var c=s.sibling,u=s.return;if(Ep(s),s===i){It=null;break e}if(c!==null){c.return=u,It=c;break e}It=u}}}var fT={getCacheForType:function(e){var t=Mt(vt),i=t.data.get(e);return i===void 0&&(i=e(),t.data.set(e,i)),i},cacheSignal:function(){return Mt(vt).controller.signal}},gT=typeof WeakMap=="function"?WeakMap:Map,Ye=0,et=null,Ne=null,De=0,qe=0,An=null,pa=!1,Ao=!1,th=!1,Bi=0,dt=0,ya=0,Ts=0,nh=0,bn=0,bo=0,jr=null,an=null,ih=!1,rc=0,xp=0,lc=1/0,cc=null,va=null,bt=0,Ca=null,wo=null,Ki=0,ah=0,sh=null,Dp=null,Hr=0,oh=null;function wn(){return(Ye&2)!==0&&De!==0?De&-De:D.T!==null?hh():Ks()}function Up(){if(bn===0)if((De&536870912)===0||ze){var e=Ci;Ci<<=1,(Ci&3932160)===0&&(Ci=262144),bn=e}else bn=536870912;return e=Tn.current,e!==null&&(e.flags|=32),bn}function sn(e,t,i){(e===et&&(qe===2||qe===9)||e.cancelPendingCommit!==null)&&(_o(e,0),Sa(e,De,bn,!1)),Ya(e,i),((Ye&2)===0||e!==et)&&(e===et&&((Ye&2)===0&&(Ts|=i),dt===4&&Sa(e,De,bn,!1)),fi(e))}function jp(e,t,i){if((Ye&6)!==0)throw Error(o(327));var s=!i&&(t&127)===0&&(t&e.expiredLanes)===0||Si(e,t),c=s?yT(e,t):lh(e,t,!0),u=s;do{if(c===0){Ao&&!s&&Sa(e,t,0,!1);break}else{if(i=e.current.alternate,u&&!mT(i)){c=lh(e,t,!1),u=!1;continue}if(c===2){if(u=t,e.errorRecoveryDisabledLanes&u)var g=0;else g=e.pendingLanes&-536870913,g=g!==0?g:g&536870912?536870912:0;if(g!==0){t=g;e:{var C=e;c=jr;var A=C.current.memoizedState.isDehydrated;if(A&&(_o(C,g).flags|=256),g=lh(C,g,!1),g!==2){if(th&&!A){C.errorRecoveryDisabledLanes|=u,Ts|=u,c=4;break e}u=an,an=c,u!==null&&(an===null?an=u:an.push.apply(an,u))}c=g}if(u=!1,c!==2)continue}}if(c===1){_o(e,0),Sa(e,t,0,!0);break}e:{switch(s=e,u=c,u){case 0:case 1:throw Error(o(345));case 4:if((t&4194048)!==t)break;case 6:Sa(s,t,bn,!pa);break e;case 2:an=null;break;case 3:case 5:break;default:throw Error(o(329))}if((t&62914560)===t&&(c=rc+300-Ht(),10<c)){if(Sa(s,t,bn,!pa),Fa(s,0,!0)!==0)break e;Ki=t,s.timeoutHandle=fy(Hp.bind(null,s,i,an,cc,ih,t,bn,Ts,bo,pa,u,"Throttled",-0,0),c);break e}Hp(s,i,an,cc,ih,t,bn,Ts,bo,pa,u,null,-0,0)}}break}while(!0);fi(e)}function Hp(e,t,i,s,c,u,g,C,A,R,B,V,M,j){if(e.timeoutHandle=-1,V=t.subtreeFlags,V&8192||(V&16785408)===16785408){V={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:vn},Op(t,u,V);var se=(u&62914560)===u?rc-Ht():(u&4194048)===u?xp-Ht():0;if(se=WT(V,se),se!==null){Ki=u,e.cancelPendingCommit=se(Fp.bind(null,e,t,u,i,s,c,g,C,A,B,V,null,M,j)),Sa(e,u,g,!R);return}}Fp(e,t,u,i,s,c,g,C,A)}function mT(e){for(var t=e;;){var i=t.tag;if((i===0||i===11||i===15)&&t.flags&16384&&(i=t.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var s=0;s<i.length;s++){var c=i[s],u=c.getSnapshot;c=c.value;try{if(!Cn(u(),c))return!1}catch{return!1}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Sa(e,t,i,s){t&=~nh,t&=~Ts,e.suspendedLanes|=t,e.pingedLanes&=~t,s&&(e.warmLanes|=t),s=e.expirationTimes;for(var c=t;0<c;){var u=31-Yt(c),g=1<<u;s[u]=-1,c&=~g}i!==0&&vl(e,i,t)}function uc(){return(Ye&6)===0?(zr(0),!1):!0}function rh(){if(Ne!==null){if(qe===0)var e=Ne.return;else e=Ne,Ri=hs=null,Ad(e),po=null,Sr=0,e=Ne;for(;e!==null;)gp(e.alternate,e),e=e.return;Ne=null}}function _o(e,t){var i=e.timeoutHandle;i!==-1&&(e.timeoutHandle=-1,UT(i)),i=e.cancelPendingCommit,i!==null&&(e.cancelPendingCommit=null,i()),Ki=0,rh(),et=e,Ne=i=Ii(e.current,null),De=t,qe=0,An=null,pa=!1,Ao=Si(e,t),th=!1,bo=bn=nh=Ts=ya=dt=0,an=jr=null,ih=!1,(t&8)!==0&&(t|=t&32);var s=e.entangledLanes;if(s!==0)for(e=e.entanglements,s&=t;0<s;){var c=31-Yt(s),u=1<<c;t|=e[c],s&=~u}return Bi=t,Nl(),i}function zp(e,t){be=null,D.H=Ir,t===mo||t===Ll?(t=em(),qe=3):t===dd?(t=em(),qe=4):qe=t===Ld?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,An=t,Ne===null&&(dt=1,Wl(e,Nn(t,e.current)))}function Lp(){var e=Tn.current;return e===null?!0:(De&4194048)===De?Un===null:(De&62914560)===De||(De&536870912)!==0?e===Un:!1}function Bp(){var e=D.H;return D.H=Ir,e===null?Ir:e}function Kp(){var e=D.A;return D.A=fT,e}function dc(){dt=4,pa||(De&4194048)!==De&&Tn.current!==null||(Ao=!0),(ya&134217727)===0&&(Ts&134217727)===0||et===null||Sa(et,De,bn,!1)}function lh(e,t,i){var s=Ye;Ye|=2;var c=Bp(),u=Kp();(et!==e||De!==t)&&(cc=null,_o(e,t)),t=!1;var g=dt;e:do try{if(qe!==0&&Ne!==null){var C=Ne,A=An;switch(qe){case 8:rh(),g=6;break e;case 3:case 2:case 9:case 6:Tn.current===null&&(t=!0);var R=qe;if(qe=0,An=null,ko(e,C,A,R),i&&Ao){g=0;break e}break;default:R=qe,qe=0,An=null,ko(e,C,A,R)}}pT(),g=dt;break}catch(B){zp(e,B)}while(!0);return t&&e.shellSuspendCounter++,Ri=hs=null,Ye=s,D.H=c,D.A=u,Ne===null&&(et=null,De=0,Nl()),g}function pT(){for(;Ne!==null;)Pp(Ne)}function yT(e,t){var i=Ye;Ye|=2;var s=Bp(),c=Kp();et!==e||De!==t?(cc=null,lc=Ht()+500,_o(e,t)):Ao=Si(e,t);e:do try{if(qe!==0&&Ne!==null){t=Ne;var u=An;t:switch(qe){case 1:qe=0,An=null,ko(e,t,u,1);break;case 2:case 9:if($g(u)){qe=0,An=null,Gp(t);break}t=function(){qe!==2&&qe!==9||et!==e||(qe=7),fi(e)},u.then(t,t);break e;case 3:qe=7;break e;case 4:qe=5;break e;case 7:$g(u)?(qe=0,An=null,Gp(t)):(qe=0,An=null,ko(e,t,u,7));break;case 5:var g=null;switch(Ne.tag){case 26:g=Ne.memoizedState;case 5:case 27:var C=Ne;if(g?Iy(g):C.stateNode.complete){qe=0,An=null;var A=C.sibling;if(A!==null)Ne=A;else{var R=C.return;R!==null?(Ne=R,hc(R)):Ne=null}break t}}qe=0,An=null,ko(e,t,u,5);break;case 6:qe=0,An=null,ko(e,t,u,6);break;case 8:rh(),dt=6;break e;default:throw Error(o(462))}}vT();break}catch(B){zp(e,B)}while(!0);return Ri=hs=null,D.H=s,D.A=c,Ye=i,Ne!==null?0:(et=null,De=0,Nl(),dt)}function vT(){for(;Ne!==null&&!js();)Pp(Ne)}function Pp(e){var t=hp(e.alternate,e,Bi);e.memoizedProps=e.pendingProps,t===null?hc(e):Ne=t}function Gp(e){var t=e,i=t.alternate;switch(t.tag){case 15:case 0:t=op(i,t,t.pendingProps,t.type,void 0,De);break;case 11:t=op(i,t,t.pendingProps,t.type.render,t.ref,De);break;case 5:Ad(t);default:gp(i,t),t=Ne=Kg(t,Bi),t=hp(i,t,Bi)}e.memoizedProps=e.pendingProps,t===null?hc(e):Ne=t}function ko(e,t,i,s){Ri=hs=null,Ad(t),po=null,Sr=0;var c=t.return;try{if(oT(e,c,t,i,De)){dt=1,Wl(e,Nn(i,e.current)),Ne=null;return}}catch(u){if(c!==null)throw Ne=c,u;dt=1,Wl(e,Nn(i,e.current)),Ne=null;return}t.flags&32768?(ze||s===1?e=!0:Ao||(De&536870912)!==0?e=!1:(pa=e=!0,(s===2||s===9||s===3||s===6)&&(s=Tn.current,s!==null&&s.tag===13&&(s.flags|=16384))),Vp(t,e)):hc(t)}function hc(e){var t=e;do{if((t.flags&32768)!==0){Vp(t,pa);return}e=t.return;var i=cT(t.alternate,t,Bi);if(i!==null){Ne=i;return}if(t=t.sibling,t!==null){Ne=t;return}Ne=t=e}while(t!==null);dt===0&&(dt=5)}function Vp(e,t){do{var i=uT(e.alternate,e);if(i!==null){i.flags&=32767,Ne=i;return}if(i=e.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!t&&(e=e.sibling,e!==null)){Ne=e;return}Ne=e=i}while(e!==null);dt=6,Ne=null}function Fp(e,t,i,s,c,u,g,C,A){e.cancelPendingCommit=null;do fc();while(bt!==0);if((Ye&6)!==0)throw Error(o(327));if(t!==null){if(t===e.current)throw Error(o(177));if(u=t.lanes|t.childLanes,u|=Xu,Tu(e,i,u,g,C,A),e===et&&(Ne=et=null,De=0),wo=t,Ca=e,Ki=i,ah=u,sh=c,Dp=s,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,ET(gn,function(){return Xp(),null})):(e.callbackNode=null,e.callbackPriority=0),s=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||s){s=D.T,D.T=null,c=Y.p,Y.p=2,g=Ye,Ye|=4;try{dT(e,t,i)}finally{Ye=g,Y.p=c,D.T=s}}bt=1,Yp(),Qp(),qp()}}function Yp(){if(bt===1){bt=0;var e=Ca,t=wo,i=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||i){i=D.T,D.T=null;var s=Y.p;Y.p=2;var c=Ye;Ye|=4;try{_p(t,e);var u=Sh,g=Mg(e.containerInfo),C=u.focusedElem,A=u.selectionRange;if(g!==C&&C&&C.ownerDocument&&Ng(C.ownerDocument.documentElement,C)){if(A!==null&&Fu(C)){var R=A.start,B=A.end;if(B===void 0&&(B=R),"selectionStart"in C)C.selectionStart=R,C.selectionEnd=Math.min(B,C.value.length);else{var V=C.ownerDocument||document,M=V&&V.defaultView||window;if(M.getSelection){var j=M.getSelection(),se=C.textContent.length,me=Math.min(A.start,se),We=A.end===void 0?me:Math.min(A.end,se);!j.extend&&me>We&&(g=We,We=me,me=g);var _=Rg(C,me),w=Rg(C,We);if(_&&w&&(j.rangeCount!==1||j.anchorNode!==_.node||j.anchorOffset!==_.offset||j.focusNode!==w.node||j.focusOffset!==w.offset)){var O=V.createRange();O.setStart(_.node,_.offset),j.removeAllRanges(),me>We?(j.addRange(O),j.extend(w.node,w.offset)):(O.setEnd(w.node,w.offset),j.addRange(O))}}}}for(V=[],j=C;j=j.parentNode;)j.nodeType===1&&V.push({element:j,left:j.scrollLeft,top:j.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<V.length;C++){var G=V[C];G.element.scrollLeft=G.left,G.element.scrollTop=G.top}}wc=!!Ch,Sh=Ch=null}finally{Ye=c,Y.p=s,D.T=i}}e.current=t,bt=2}}function Qp(){if(bt===2){bt=0;var e=Ca,t=wo,i=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||i){i=D.T,D.T=null;var s=Y.p;Y.p=2;var c=Ye;Ye|=4;try{Tp(e,t.alternate,t)}finally{Ye=c,Y.p=s,D.T=i}}bt=3}}function qp(){if(bt===4||bt===3){bt=0,Hs();var e=Ca,t=wo,i=Ki,s=Dp;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?bt=5:(bt=0,wo=Ca=null,Jp(e,e.pendingLanes));var c=e.pendingLanes;if(c===0&&(va=null),Ji(i),t=t.stateNode,Rt&&typeof Rt.onCommitFiberRoot=="function")try{Rt.onCommitFiberRoot(ni,t,void 0,(t.current.flags&128)===128)}catch{}if(s!==null){t=D.T,c=Y.p,Y.p=2,D.T=null;try{for(var u=e.onRecoverableError,g=0;g<s.length;g++){var C=s[g];u(C.value,{componentStack:C.stack})}}finally{D.T=t,Y.p=c}}(Ki&3)!==0&&fc(),fi(e),c=e.pendingLanes,(i&261930)!==0&&(c&42)!==0?e===oh?Hr++:(Hr=0,oh=e):Hr=0,zr(0)}}function Jp(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,vr(t)))}function fc(){return Yp(),Qp(),qp(),Xp()}function Xp(){if(bt!==5)return!1;var e=Ca,t=ah;ah=0;var i=Ji(Ki),s=D.T,c=Y.p;try{Y.p=32>i?32:i,D.T=null,i=sh,sh=null;var u=Ca,g=Ki;if(bt=0,wo=Ca=null,Ki=0,(Ye&6)!==0)throw Error(o(331));var C=Ye;if(Ye|=4,Np(u.current),Ip(u,u.current,g,i),Ye=C,zr(0,!1),Rt&&typeof Rt.onPostCommitFiberRoot=="function")try{Rt.onPostCommitFiberRoot(ni,u)}catch{}return!0}finally{Y.p=c,D.T=s,Jp(e,t)}}function Zp(e,t,i){t=Nn(i,t),t=zd(e.stateNode,t,2),e=ha(e,t,2),e!==null&&(Ya(e,2),fi(e))}function Je(e,t,i){if(e.tag===3)Zp(e,e,i);else for(;t!==null;){if(t.tag===3){Zp(t,e,i);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(va===null||!va.has(s))){e=Nn(i,e),i=$m(2),s=ha(t,i,2),s!==null&&(Wm(i,s,t,e),Ya(s,2),fi(s));break}}t=t.return}}function ch(e,t,i){var s=e.pingCache;if(s===null){s=e.pingCache=new gT;var c=new Set;s.set(t,c)}else c=s.get(t),c===void 0&&(c=new Set,s.set(t,c));c.has(i)||(th=!0,c.add(i),e=CT.bind(null,e,t,i),t.then(e,e))}function CT(e,t,i){var s=e.pingCache;s!==null&&s.delete(t),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,et===e&&(De&i)===i&&(dt===4||dt===3&&(De&62914560)===De&&300>Ht()-rc?(Ye&2)===0&&_o(e,0):nh|=i,bo===De&&(bo=0)),fi(e)}function $p(e,t){t===0&&(t=ir()),e=cs(e,t),e!==null&&(Ya(e,t),fi(e))}function ST(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),$p(e,i)}function TT(e,t){var i=0;switch(e.tag){case 31:case 13:var s=e.stateNode,c=e.memoizedState;c!==null&&(i=c.retryLane);break;case 19:s=e.stateNode;break;case 22:s=e.stateNode._retryCache;break;default:throw Error(o(314))}s!==null&&s.delete(t),$p(e,i)}function ET(e,t){return Ba(e,t)}var gc=null,Io=null,uh=!1,mc=!1,dh=!1,Ta=0;function fi(e){e!==Io&&e.next===null&&(Io===null?gc=Io=e:Io=Io.next=e),mc=!0,uh||(uh=!0,bT())}function zr(e,t){if(!dh&&mc){dh=!0;do for(var i=!1,s=gc;s!==null;){if(e!==0){var c=s.pendingLanes;if(c===0)var u=0;else{var g=s.suspendedLanes,C=s.pingedLanes;u=(1<<31-Yt(42|e)+1)-1,u&=c&~(g&~C),u=u&201326741?u&201326741|1:u?u|2:0}u!==0&&(i=!0,ny(s,u))}else u=De,u=Fa(s,s===et?u:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),(u&3)===0||Si(s,u)||(i=!0,ny(s,u));s=s.next}while(i);dh=!1}}function AT(){Wp()}function Wp(){mc=uh=!1;var e=0;Ta!==0&&DT()&&(e=Ta);for(var t=Ht(),i=null,s=gc;s!==null;){var c=s.next,u=ey(s,t);u===0?(s.next=null,i===null?gc=c:i.next=c,c===null&&(Io=i)):(i=s,(e!==0||(u&3)!==0)&&(mc=!0)),s=c}bt!==0&&bt!==5||zr(e),Ta!==0&&(Ta=0)}function ey(e,t){for(var i=e.suspendedLanes,s=e.pingedLanes,c=e.expirationTimes,u=e.pendingLanes&-62914561;0<u;){var g=31-Yt(u),C=1<<g,A=c[g];A===-1?((C&i)===0||(C&s)!==0)&&(c[g]=nr(C,t)):A<=t&&(e.expiredLanes|=C),u&=~C}if(t=et,i=De,i=Fa(e,e===t?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s=e.callbackNode,i===0||e===t&&(qe===2||qe===9)||e.cancelPendingCommit!==null)return s!==null&&s!==null&&Ka(s),e.callbackNode=null,e.callbackPriority=0;if((i&3)===0||Si(e,i)){if(t=i&-i,t===e.callbackPriority)return t;switch(s!==null&&Ka(s),Ji(i)){case 2:case 8:i=zs;break;case 32:i=gn;break;case 268435456:i=Pa;break;default:i=gn}return s=ty.bind(null,e),i=Ba(i,s),e.callbackPriority=t,e.callbackNode=i,t}return s!==null&&s!==null&&Ka(s),e.callbackPriority=2,e.callbackNode=null,2}function ty(e,t){if(bt!==0&&bt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var i=e.callbackNode;if(fc()&&e.callbackNode!==i)return null;var s=De;return s=Fa(e,e===et?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s===0?null:(jp(e,s,t),ey(e,Ht()),e.callbackNode!=null&&e.callbackNode===i?ty.bind(null,e):null)}function ny(e,t){if(fc())return null;jp(e,t,!0)}function bT(){jT(function(){(Ye&6)!==0?Ba(Zo,AT):Wp()})}function hh(){if(Ta===0){var e=fo;e===0&&(e=Va,Va<<=1,(Va&261888)===0&&(Va=256)),Ta=e}return Ta}function iy(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Za(""+e)}function ay(e,t){var i=t.ownerDocument.createElement("input");return i.name=t.name,i.value=t.value,e.id&&i.setAttribute("form",e.id),t.parentNode.insertBefore(i,t),e=new FormData(e),i.parentNode.removeChild(i),e}function wT(e,t,i,s,c){if(t==="submit"&&i&&i.stateNode===c){var u=iy((c[_t]||null).action),g=s.submitter;g&&(t=(t=g[_t]||null)?iy(t.formAction):g.getAttribute("formAction"),t!==null&&(u=t,g=null));var C=new ns("action","action",null,s,c);e.push({event:C,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(Ta!==0){var A=g?ay(c,g):new FormData(c);Md(i,{pending:!0,data:A,method:c.method,action:u},null,A)}}else typeof u=="function"&&(C.preventDefault(),A=g?ay(c,g):new FormData(c),Md(i,{pending:!0,data:A,method:c.method,action:u},u,A))},currentTarget:c}]})}}for(var fh=0;fh<Ju.length;fh++){var gh=Ju[fh],_T=gh.toLowerCase(),kT=gh[0].toUpperCase()+gh.slice(1);Fn(_T,"on"+kT)}Fn(Ug,"onAnimationEnd"),Fn(jg,"onAnimationIteration"),Fn(Hg,"onAnimationStart"),Fn("dblclick","onDoubleClick"),Fn("focusin","onFocus"),Fn("focusout","onBlur"),Fn(GS,"onTransitionRun"),Fn(VS,"onTransitionStart"),Fn(FS,"onTransitionCancel"),Fn(zg,"onTransitionEnd"),Ai("onMouseEnter",["mouseout","mouseover"]),Ai("onMouseLeave",["mouseout","mouseover"]),Ai("onPointerEnter",["pointerout","pointerover"]),Ai("onPointerLeave",["pointerout","pointerover"]),pn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),pn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),pn("onBeforeInput",["compositionend","keypress","textInput","paste"]),pn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),pn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),pn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),IT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Lr));function sy(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var s=e[i],c=s.event;s=s.listeners;e:{var u=void 0;if(t)for(var g=s.length-1;0<=g;g--){var C=s[g],A=C.instance,R=C.currentTarget;if(C=C.listener,A!==u&&c.isPropagationStopped())break e;u=C,c.currentTarget=R;try{u(c)}catch(B){Rl(B)}c.currentTarget=null,u=A}else for(g=0;g<s.length;g++){if(C=s[g],A=C.instance,R=C.currentTarget,C=C.listener,A!==u&&c.isPropagationStopped())break e;u=C,c.currentTarget=R;try{u(c)}catch(B){Rl(B)}c.currentTarget=null,u=A}}}}function Me(e,t){var i=t[qa];i===void 0&&(i=t[qa]=new Set);var s=e+"__bubble";i.has(s)||(oy(t,e,2,!1),i.add(s))}function mh(e,t,i){var s=0;t&&(s|=4),oy(i,e,s,t)}var pc="_reactListening"+Math.random().toString(36).slice(2);function ph(e){if(!e[pc]){e[pc]=!0,Qt.forEach(function(i){i!=="selectionchange"&&(IT.has(i)||mh(i,!1,e),mh(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[pc]||(t[pc]=!0,mh("selectionchange",!1,t))}}function oy(e,t,i,s){switch(Uy(t)){case 2:var c=nE;break;case 8:c=iE;break;default:c=Nh}i=c.bind(null,t,i,e),c=void 0,!Ie||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),s?c!==void 0?e.addEventListener(t,i,{capture:!0,passive:c}):e.addEventListener(t,i,!0):c!==void 0?e.addEventListener(t,i,{passive:c}):e.addEventListener(t,i,!1)}function yh(e,t,i,s,c){var u=s;if((t&1)===0&&(t&2)===0&&s!==null)e:for(;;){if(s===null)return;var g=s.tag;if(g===3||g===4){var C=s.stateNode.containerInfo;if(C===c)break;if(g===4)for(g=s.return;g!==null;){var A=g.tag;if((A===3||A===4)&&g.stateNode.containerInfo===c)return;g=g.return}for(;C!==null;){if(g=Zi(C),g===null)return;if(A=g.tag,A===5||A===6||A===26||A===27){s=u=g;continue e}C=C.parentNode}}s=s.return}Ys(function(){var R=u,B=Fs(i),V=[];e:{var M=Lg.get(e);if(M!==void 0){var j=ns,se=e;switch(e){case"keypress":if(ts(i)===0)break e;case"keydown":case"keyup":j=Hu;break;case"focusin":se="focus",j=dr;break;case"focusout":se="blur",j=dr;break;case"beforeblur":case"afterblur":j=dr;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":j=Zs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":j=_u;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":j=Lu;break;case Ug:case jg:case Hg:j=Ou;break;case zg:j=Ku;break;case"scroll":case"scrollend":j=wu;break;case"wheel":j=Gu;break;case"copy":case"cut":case"paste":j=Nu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":j=Ws;break;case"toggle":case"beforetoggle":j=Il}var me=(t&4)!==0,We=!me&&(e==="scroll"||e==="scrollend"),_=me?M!==null?M+"Capture":null:M;me=[];for(var w=R,O;w!==null;){var G=w;if(O=G.stateNode,G=G.tag,G!==5&&G!==26&&G!==27||O===null||_===null||(G=Wa(w,_),G!=null&&me.push(Br(w,G,O))),We)break;w=w.return}0<me.length&&(M=new j(M,se,null,i,B),V.push({event:M,listeners:me}))}}if((t&7)===0){e:{if(M=e==="mouseover"||e==="pointerover",j=e==="mouseout"||e==="pointerout",M&&i!==At&&(se=i.relatedTarget||i.fromElement)&&(Zi(se)||se[Ti]))break e;if((j||M)&&(M=B.window===B?B:(M=B.ownerDocument)?M.defaultView||M.parentWindow:window,j?(se=i.relatedTarget||i.toElement,j=R,se=se?Zi(se):null,se!==null&&(We=d(se),me=se.tag,se!==We||me!==5&&me!==27&&me!==6)&&(se=null)):(j=null,se=R),j!==se)){if(me=Zs,G="onMouseLeave",_="onMouseEnter",w="mouse",(e==="pointerout"||e==="pointerover")&&(me=Ws,G="onPointerLeave",_="onPointerEnter",w="pointer"),We=j==null?M:Ve(j),O=se==null?M:Ve(se),M=new me(G,w+"leave",j,i,B),M.target=We,M.relatedTarget=O,G=null,Zi(B)===R&&(me=new me(_,w+"enter",se,i,B),me.target=O,me.relatedTarget=We,G=me),We=G,j&&se)t:{for(me=OT,_=j,w=se,O=0,G=_;G;G=me(G))O++;G=0;for(var ge=w;ge;ge=me(ge))G++;for(;0<O-G;)_=me(_),O--;for(;0<G-O;)w=me(w),G--;for(;O--;){if(_===w||w!==null&&_===w.alternate){me=_;break t}_=me(_),w=me(w)}me=null}else me=null;j!==null&&ry(V,M,j,me,!1),se!==null&&We!==null&&ry(V,We,se,me,!0)}}e:{if(M=R?Ve(R):window,j=M.nodeName&&M.nodeName.toLowerCase(),j==="select"||j==="input"&&M.type==="file")var Ke=Pt;else if(Ce(M))if(fr)Ke=BS;else{Ke=Ig;var ce=kg}else j=M.nodeName,!j||j.toLowerCase()!=="input"||M.type!=="checkbox"&&M.type!=="radio"?R&&Vs(R.elementType)&&(Ke=Pt):Ke=LS;if(Ke&&(Ke=Ke(e,R))){Fe(V,Ke,i,B);break e}ce&&ce(e,M,R),e==="focusout"&&R&&M.type==="number"&&R.memoizedProps.value!=null&&lr(M,"number",M.value)}switch(ce=R?Ve(R):window,e){case"focusin":(Ce(ce)||ce.contentEditable==="true")&&(ao=ce,Yu=R,mr=null);break;case"focusout":mr=Yu=ao=null;break;case"mousedown":Qu=!0;break;case"contextmenu":case"mouseup":case"dragend":Qu=!1,xg(V,i,B);break;case"selectionchange":if(PS)break;case"keydown":case"keyup":xg(V,i,B)}var ke;if(ss)e:{switch(e){case"compositionstart":var Ue="onCompositionStart";break e;case"compositionend":Ue="onCompositionEnd";break e;case"compositionupdate":Ue="onCompositionUpdate";break e}Ue=void 0}else z?I(e,i)&&(Ue="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(Ue="onCompositionStart");Ue&&(Ol&&i.locale!=="ko"&&(z||Ue!=="onCompositionStart"?Ue==="onCompositionEnd"&&z&&(ke=El()):(li=B,Qs="value"in li?li.value:li.textContent,z=!0)),ce=yc(R,Ue),0<ce.length&&(Ue=new wl(Ue,e,null,i,B),V.push({event:Ue,listeners:ce}),ke?Ue.data=ke:(ke=U(i),ke!==null&&(Ue.data=ke)))),(ke=Vu?$(e,i):L(e,i))&&(Ue=yc(R,"onBeforeInput"),0<Ue.length&&(ce=new wl("onBeforeInput","beforeinput",null,i,B),V.push({event:ce,listeners:Ue}),ce.data=ke)),wT(V,e,R,i,B)}sy(V,t)})}function Br(e,t,i){return{instance:e,listener:t,currentTarget:i}}function yc(e,t){for(var i=t+"Capture",s=[];e!==null;){var c=e,u=c.stateNode;if(c=c.tag,c!==5&&c!==26&&c!==27||u===null||(c=Wa(e,i),c!=null&&s.unshift(Br(e,c,u)),c=Wa(e,t),c!=null&&s.push(Br(e,c,u))),e.tag===3)return s;e=e.return}return[]}function OT(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function ry(e,t,i,s,c){for(var u=t._reactName,g=[];i!==null&&i!==s;){var C=i,A=C.alternate,R=C.stateNode;if(C=C.tag,A!==null&&A===s)break;C!==5&&C!==26&&C!==27||R===null||(A=R,c?(R=Wa(i,u),R!=null&&g.unshift(Br(i,R,A))):c||(R=Wa(i,u),R!=null&&g.push(Br(i,R,A)))),i=i.return}g.length!==0&&e.push({event:t,listeners:g})}var RT=/\r\n?/g,NT=/\u0000|\uFFFD/g;function ly(e){return(typeof e=="string"?e:""+e).replace(RT,`
`).replace(NT,"")}function cy(e,t){return t=ly(t),ly(e)===t}function $e(e,t,i,s,c,u){switch(i){case"children":typeof s=="string"?t==="body"||t==="textarea"&&s===""||ia(e,s):(typeof s=="number"||typeof s=="bigint")&&t!=="body"&&ia(e,""+s);break;case"className":bi(e,"class",s);break;case"tabIndex":bi(e,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":bi(e,i,s);break;case"style":Bt(e,s,u);break;case"data":if(t!=="object"){bi(e,"data",s);break}case"src":case"href":if(s===""&&(t!=="a"||i!=="href")){e.removeAttribute(i);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(i);break}s=Za(""+s),e.setAttribute(i,s);break;case"action":case"formAction":if(typeof s=="function"){e.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof u=="function"&&(i==="formAction"?(t!=="input"&&$e(e,t,"name",c.name,c,null),$e(e,t,"formEncType",c.formEncType,c,null),$e(e,t,"formMethod",c.formMethod,c,null),$e(e,t,"formTarget",c.formTarget,c,null)):($e(e,t,"encType",c.encType,c,null),$e(e,t,"method",c.method,c,null),$e(e,t,"target",c.target,c,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(i);break}s=Za(""+s),e.setAttribute(i,s);break;case"onClick":s!=null&&(e.onclick=vn);break;case"onScroll":s!=null&&Me("scroll",e);break;case"onScrollEnd":s!=null&&Me("scrollend",e);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(o(61));if(i=s.__html,i!=null){if(c.children!=null)throw Error(o(60));e.innerHTML=i}}break;case"multiple":e.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":e.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){e.removeAttribute("xlink:href");break}i=Za(""+s),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(i,""+s):e.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(i,""):e.removeAttribute(i);break;case"capture":case"download":s===!0?e.setAttribute(i,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(i,s):e.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?e.setAttribute(i,s):e.removeAttribute(i);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?e.removeAttribute(i):e.setAttribute(i,s);break;case"popover":Me("beforetoggle",e),Me("toggle",e),$i(e,"popover",s);break;case"xlinkActuate":Pn(e,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":Pn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":Pn(e,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":Pn(e,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":Pn(e,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":Pn(e,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":Pn(e,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":Pn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":Pn(e,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":$i(e,"is",s);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=qt.get(i)||i,$i(e,i,s))}}function vh(e,t,i,s,c,u){switch(i){case"style":Bt(e,s,u);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(o(61));if(i=s.__html,i!=null){if(c.children!=null)throw Error(o(60));e.innerHTML=i}}break;case"children":typeof s=="string"?ia(e,s):(typeof s=="number"||typeof s=="bigint")&&ia(e,""+s);break;case"onScroll":s!=null&&Me("scroll",e);break;case"onScrollEnd":s!=null&&Me("scrollend",e);break;case"onClick":s!=null&&(e.onclick=vn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ja.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(c=i.endsWith("Capture"),t=i.slice(2,c?i.length-7:void 0),u=e[_t]||null,u=u!=null?u[i]:null,typeof u=="function"&&e.removeEventListener(t,u,c),typeof s=="function")){typeof u!="function"&&u!==null&&(i in e?e[i]=null:e.hasAttribute(i)&&e.removeAttribute(i)),e.addEventListener(t,s,c);break e}i in e?e[i]=s:s===!0?e.setAttribute(i,""):$i(e,i,s)}}}function Dt(e,t,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Me("error",e),Me("load",e);var s=!1,c=!1,u;for(u in i)if(i.hasOwnProperty(u)){var g=i[u];if(g!=null)switch(u){case"src":s=!0;break;case"srcSet":c=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:$e(e,t,u,g,i,null)}}c&&$e(e,t,"srcSet",i.srcSet,i,null),s&&$e(e,t,"src",i.src,i,null);return;case"input":Me("invalid",e);var C=u=g=c=null,A=null,R=null;for(s in i)if(i.hasOwnProperty(s)){var B=i[s];if(B!=null)switch(s){case"name":c=B;break;case"type":g=B;break;case"checked":A=B;break;case"defaultChecked":R=B;break;case"value":u=B;break;case"defaultValue":C=B;break;case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(o(137,t));break;default:$e(e,t,s,B,i,null)}}yn(e,u,C,A,R,g,c,!1);return;case"select":Me("invalid",e),s=g=u=null;for(c in i)if(i.hasOwnProperty(c)&&(C=i[c],C!=null))switch(c){case"value":u=C;break;case"defaultValue":g=C;break;case"multiple":s=C;default:$e(e,t,c,C,i,null)}t=u,i=g,e.multiple=!!s,t!=null?ea(e,!!s,t,!1):i!=null&&ea(e,!!s,i,!0);return;case"textarea":Me("invalid",e),u=c=s=null;for(g in i)if(i.hasOwnProperty(g)&&(C=i[g],C!=null))switch(g){case"value":s=C;break;case"defaultValue":c=C;break;case"children":u=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(o(91));break;default:$e(e,t,g,C,i,null)}na(e,s,c,u);return;case"option":for(A in i)i.hasOwnProperty(A)&&(s=i[A],s!=null)&&(A==="selected"?e.selected=s&&typeof s!="function"&&typeof s!="symbol":$e(e,t,A,s,i,null));return;case"dialog":Me("beforetoggle",e),Me("toggle",e),Me("cancel",e),Me("close",e);break;case"iframe":case"object":Me("load",e);break;case"video":case"audio":for(s=0;s<Lr.length;s++)Me(Lr[s],e);break;case"image":Me("error",e),Me("load",e);break;case"details":Me("toggle",e);break;case"embed":case"source":case"link":Me("error",e),Me("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(R in i)if(i.hasOwnProperty(R)&&(s=i[R],s!=null))switch(R){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:$e(e,t,R,s,i,null)}return;default:if(Vs(t)){for(B in i)i.hasOwnProperty(B)&&(s=i[B],s!==void 0&&vh(e,t,B,s,i,void 0));return}}for(C in i)i.hasOwnProperty(C)&&(s=i[C],s!=null&&$e(e,t,C,s,i,null))}function MT(e,t,i,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var c=null,u=null,g=null,C=null,A=null,R=null,B=null;for(j in i){var V=i[j];if(i.hasOwnProperty(j)&&V!=null)switch(j){case"checked":break;case"value":break;case"defaultValue":A=V;default:s.hasOwnProperty(j)||$e(e,t,j,null,s,V)}}for(var M in s){var j=s[M];if(V=i[M],s.hasOwnProperty(M)&&(j!=null||V!=null))switch(M){case"type":u=j;break;case"name":c=j;break;case"checked":R=j;break;case"defaultChecked":B=j;break;case"value":g=j;break;case"defaultValue":C=j;break;case"children":case"dangerouslySetInnerHTML":if(j!=null)throw Error(o(137,t));break;default:j!==V&&$e(e,t,M,j,s,V)}}Xa(e,g,C,A,R,B,u,c);return;case"select":j=g=C=M=null;for(u in i)if(A=i[u],i.hasOwnProperty(u)&&A!=null)switch(u){case"value":break;case"multiple":j=A;default:s.hasOwnProperty(u)||$e(e,t,u,null,s,A)}for(c in s)if(u=s[c],A=i[c],s.hasOwnProperty(c)&&(u!=null||A!=null))switch(c){case"value":M=u;break;case"defaultValue":C=u;break;case"multiple":g=u;default:u!==A&&$e(e,t,c,u,s,A)}t=C,i=g,s=j,M!=null?ea(e,!!i,M,!1):!!s!=!!i&&(t!=null?ea(e,!!i,t,!0):ea(e,!!i,i?[]:"",!1));return;case"textarea":j=M=null;for(C in i)if(c=i[C],i.hasOwnProperty(C)&&c!=null&&!s.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:$e(e,t,C,null,s,c)}for(g in s)if(c=s[g],u=i[g],s.hasOwnProperty(g)&&(c!=null||u!=null))switch(g){case"value":M=c;break;case"defaultValue":j=c;break;case"children":break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(o(91));break;default:c!==u&&$e(e,t,g,c,s,u)}ta(e,M,j);return;case"option":for(var se in i)M=i[se],i.hasOwnProperty(se)&&M!=null&&!s.hasOwnProperty(se)&&(se==="selected"?e.selected=!1:$e(e,t,se,null,s,M));for(A in s)M=s[A],j=i[A],s.hasOwnProperty(A)&&M!==j&&(M!=null||j!=null)&&(A==="selected"?e.selected=M&&typeof M!="function"&&typeof M!="symbol":$e(e,t,A,M,s,j));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var me in i)M=i[me],i.hasOwnProperty(me)&&M!=null&&!s.hasOwnProperty(me)&&$e(e,t,me,null,s,M);for(R in s)if(M=s[R],j=i[R],s.hasOwnProperty(R)&&M!==j&&(M!=null||j!=null))switch(R){case"children":case"dangerouslySetInnerHTML":if(M!=null)throw Error(o(137,t));break;default:$e(e,t,R,M,s,j)}return;default:if(Vs(t)){for(var We in i)M=i[We],i.hasOwnProperty(We)&&M!==void 0&&!s.hasOwnProperty(We)&&vh(e,t,We,void 0,s,M);for(B in s)M=s[B],j=i[B],!s.hasOwnProperty(B)||M===j||M===void 0&&j===void 0||vh(e,t,B,M,s,j);return}}for(var _ in i)M=i[_],i.hasOwnProperty(_)&&M!=null&&!s.hasOwnProperty(_)&&$e(e,t,_,null,s,M);for(V in s)M=s[V],j=i[V],!s.hasOwnProperty(V)||M===j||M==null&&j==null||$e(e,t,V,M,s,j)}function uy(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function xT(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,i=performance.getEntriesByType("resource"),s=0;s<i.length;s++){var c=i[s],u=c.transferSize,g=c.initiatorType,C=c.duration;if(u&&C&&uy(g)){for(g=0,C=c.responseEnd,s+=1;s<i.length;s++){var A=i[s],R=A.startTime;if(R>C)break;var B=A.transferSize,V=A.initiatorType;B&&uy(V)&&(A=A.responseEnd,g+=B*(A<C?1:(C-R)/(A-R)))}if(--s,t+=8*(u+g)/(c.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Ch=null,Sh=null;function vc(e){return e.nodeType===9?e:e.ownerDocument}function dy(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function hy(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Th(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Eh=null;function DT(){var e=window.event;return e&&e.type==="popstate"?e===Eh?!1:(Eh=e,!0):(Eh=null,!1)}var fy=typeof setTimeout=="function"?setTimeout:void 0,UT=typeof clearTimeout=="function"?clearTimeout:void 0,gy=typeof Promise=="function"?Promise:void 0,jT=typeof queueMicrotask=="function"?queueMicrotask:typeof gy<"u"?function(e){return gy.resolve(null).then(e).catch(HT)}:fy;function HT(e){setTimeout(function(){throw e})}function Ea(e){return e==="head"}function my(e,t){var i=t,s=0;do{var c=i.nextSibling;if(e.removeChild(i),c&&c.nodeType===8)if(i=c.data,i==="/$"||i==="/&"){if(s===0){e.removeChild(c),Mo(t);return}s--}else if(i==="$"||i==="$?"||i==="$~"||i==="$!"||i==="&")s++;else if(i==="html")Kr(e.ownerDocument.documentElement);else if(i==="head"){i=e.ownerDocument.head,Kr(i);for(var u=i.firstChild;u;){var g=u.nextSibling,C=u.nodeName;u[mn]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&u.rel.toLowerCase()==="stylesheet"||i.removeChild(u),u=g}}else i==="body"&&Kr(e.ownerDocument.body);i=c}while(i);Mo(t)}function py(e,t){var i=e;e=0;do{var s=i.nextSibling;if(i.nodeType===1?t?(i._stashedDisplay=i.style.display,i.style.display="none"):(i.style.display=i._stashedDisplay||"",i.getAttribute("style")===""&&i.removeAttribute("style")):i.nodeType===3&&(t?(i._stashedText=i.nodeValue,i.nodeValue=""):i.nodeValue=i._stashedText||""),s&&s.nodeType===8)if(i=s.data,i==="/$"){if(e===0)break;e--}else i!=="$"&&i!=="$?"&&i!=="$~"&&i!=="$!"||e++;i=s}while(i)}function Ah(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var i=t;switch(t=t.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":Ah(i),sr(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}e.removeChild(i)}}function zT(e,t,i,s){for(;e.nodeType===1;){var c=i;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!s&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(s){if(!e[mn])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(u=e.getAttribute("rel"),u==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(u!==c.rel||e.getAttribute("href")!==(c.href==null||c.href===""?null:c.href)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin)||e.getAttribute("title")!==(c.title==null?null:c.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(u=e.getAttribute("src"),(u!==(c.src==null?null:c.src)||e.getAttribute("type")!==(c.type==null?null:c.type)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin))&&u&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var u=c.name==null?null:""+c.name;if(c.type==="hidden"&&e.getAttribute("name")===u)return e}else return e;if(e=jn(e.nextSibling),e===null)break}return null}function LT(e,t,i){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=jn(e.nextSibling),e===null))return null;return e}function yy(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=jn(e.nextSibling),e===null))return null;return e}function bh(e){return e.data==="$?"||e.data==="$~"}function wh(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function BT(e,t){var i=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||i.readyState!=="loading")t();else{var s=function(){t(),i.removeEventListener("DOMContentLoaded",s)};i.addEventListener("DOMContentLoaded",s),e._reactRetry=s}}function jn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var _h=null;function vy(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"||i==="/&"){if(t===0)return jn(e.nextSibling);t--}else i!=="$"&&i!=="$!"&&i!=="$?"&&i!=="$~"&&i!=="&"||t++}e=e.nextSibling}return null}function Cy(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"){if(t===0)return e;t--}else i!=="/$"&&i!=="/&"||t++}e=e.previousSibling}return null}function Sy(e,t,i){switch(t=vc(i),e){case"html":if(e=t.documentElement,!e)throw Error(o(452));return e;case"head":if(e=t.head,!e)throw Error(o(453));return e;case"body":if(e=t.body,!e)throw Error(o(454));return e;default:throw Error(o(451))}}function Kr(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);sr(e)}var Hn=new Map,Ty=new Set;function Cc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Pi=Y.d;Y.d={f:KT,r:PT,D:GT,C:VT,L:FT,m:YT,X:qT,S:QT,M:JT};function KT(){var e=Pi.f(),t=uc();return e||t}function PT(e){var t=oi(e);t!==null&&t.tag===5&&t.type==="form"?zm(t):Pi.r(e)}var Oo=typeof document>"u"?null:document;function Ey(e,t,i){var s=Oo;if(s&&typeof t=="string"&&t){var c=zt(t);c='link[rel="'+e+'"][href="'+c+'"]',typeof i=="string"&&(c+='[crossorigin="'+i+'"]'),Ty.has(c)||(Ty.add(c),e={rel:e,crossOrigin:i,href:t},s.querySelector(c)===null&&(t=s.createElement("link"),Dt(t,"link",e),ct(t),s.head.appendChild(t)))}}function GT(e){Pi.D(e),Ey("dns-prefetch",e,null)}function VT(e,t){Pi.C(e,t),Ey("preconnect",e,t)}function FT(e,t,i){Pi.L(e,t,i);var s=Oo;if(s&&e&&t){var c='link[rel="preload"][as="'+zt(t)+'"]';t==="image"&&i&&i.imageSrcSet?(c+='[imagesrcset="'+zt(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(c+='[imagesizes="'+zt(i.imageSizes)+'"]')):c+='[href="'+zt(e)+'"]';var u=c;switch(t){case"style":u=Ro(e);break;case"script":u=No(e)}Hn.has(u)||(e=T({rel:"preload",href:t==="image"&&i&&i.imageSrcSet?void 0:e,as:t},i),Hn.set(u,e),s.querySelector(c)!==null||t==="style"&&s.querySelector(Pr(u))||t==="script"&&s.querySelector(Gr(u))||(t=s.createElement("link"),Dt(t,"link",e),ct(t),s.head.appendChild(t)))}}function YT(e,t){Pi.m(e,t);var i=Oo;if(i&&e){var s=t&&typeof t.as=="string"?t.as:"script",c='link[rel="modulepreload"][as="'+zt(s)+'"][href="'+zt(e)+'"]',u=c;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":u=No(e)}if(!Hn.has(u)&&(e=T({rel:"modulepreload",href:e},t),Hn.set(u,e),i.querySelector(c)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(Gr(u)))return}s=i.createElement("link"),Dt(s,"link",e),ct(s),i.head.appendChild(s)}}}function QT(e,t,i){Pi.S(e,t,i);var s=Oo;if(s&&e){var c=ri(s).hoistableStyles,u=Ro(e);t=t||"default";var g=c.get(u);if(!g){var C={loading:0,preload:null};if(g=s.querySelector(Pr(u)))C.loading=5;else{e=T({rel:"stylesheet",href:e,"data-precedence":t},i),(i=Hn.get(u))&&kh(e,i);var A=g=s.createElement("link");ct(A),Dt(A,"link",e),A._p=new Promise(function(R,B){A.onload=R,A.onerror=B}),A.addEventListener("load",function(){C.loading|=1}),A.addEventListener("error",function(){C.loading|=2}),C.loading|=4,Sc(g,t,s)}g={type:"stylesheet",instance:g,count:1,state:C},c.set(u,g)}}}function qT(e,t){Pi.X(e,t);var i=Oo;if(i&&e){var s=ri(i).hoistableScripts,c=No(e),u=s.get(c);u||(u=i.querySelector(Gr(c)),u||(e=T({src:e,async:!0},t),(t=Hn.get(c))&&Ih(e,t),u=i.createElement("script"),ct(u),Dt(u,"link",e),i.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},s.set(c,u))}}function JT(e,t){Pi.M(e,t);var i=Oo;if(i&&e){var s=ri(i).hoistableScripts,c=No(e),u=s.get(c);u||(u=i.querySelector(Gr(c)),u||(e=T({src:e,async:!0,type:"module"},t),(t=Hn.get(c))&&Ih(e,t),u=i.createElement("script"),ct(u),Dt(u,"link",e),i.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},s.set(c,u))}}function Ay(e,t,i,s){var c=(c=le.current)?Cc(c):null;if(!c)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(t=Ro(i.href),i=ri(c).hoistableStyles,s=i.get(t),s||(s={type:"style",instance:null,count:0,state:null},i.set(t,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){e=Ro(i.href);var u=ri(c).hoistableStyles,g=u.get(e);if(g||(c=c.ownerDocument||c,g={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,g),(u=c.querySelector(Pr(e)))&&!u._p&&(g.instance=u,g.state.loading=5),Hn.has(e)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},Hn.set(e,i),u||XT(c,e,i,g.state))),t&&s===null)throw Error(o(528,""));return g}if(t&&s!==null)throw Error(o(529,""));return null;case"script":return t=i.async,i=i.src,typeof i=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=No(i),i=ri(c).hoistableScripts,s=i.get(t),s||(s={type:"script",instance:null,count:0,state:null},i.set(t,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function Ro(e){return'href="'+zt(e)+'"'}function Pr(e){return'link[rel="stylesheet"]['+e+"]"}function by(e){return T({},e,{"data-precedence":e.precedence,precedence:null})}function XT(e,t,i,s){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?s.loading=1:(t=e.createElement("link"),s.preload=t,t.addEventListener("load",function(){return s.loading|=1}),t.addEventListener("error",function(){return s.loading|=2}),Dt(t,"link",i),ct(t),e.head.appendChild(t))}function No(e){return'[src="'+zt(e)+'"]'}function Gr(e){return"script[async]"+e}function wy(e,t,i){if(t.count++,t.instance===null)switch(t.type){case"style":var s=e.querySelector('style[data-href~="'+zt(i.href)+'"]');if(s)return t.instance=s,ct(s),s;var c=T({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return s=(e.ownerDocument||e).createElement("style"),ct(s),Dt(s,"style",c),Sc(s,i.precedence,e),t.instance=s;case"stylesheet":c=Ro(i.href);var u=e.querySelector(Pr(c));if(u)return t.state.loading|=4,t.instance=u,ct(u),u;s=by(i),(c=Hn.get(c))&&kh(s,c),u=(e.ownerDocument||e).createElement("link"),ct(u);var g=u;return g._p=new Promise(function(C,A){g.onload=C,g.onerror=A}),Dt(u,"link",s),t.state.loading|=4,Sc(u,i.precedence,e),t.instance=u;case"script":return u=No(i.src),(c=e.querySelector(Gr(u)))?(t.instance=c,ct(c),c):(s=i,(c=Hn.get(u))&&(s=T({},i),Ih(s,c)),e=e.ownerDocument||e,c=e.createElement("script"),ct(c),Dt(c,"link",s),e.head.appendChild(c),t.instance=c);case"void":return null;default:throw Error(o(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(s=t.instance,t.state.loading|=4,Sc(s,i.precedence,e));return t.instance}function Sc(e,t,i){for(var s=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),c=s.length?s[s.length-1]:null,u=c,g=0;g<s.length;g++){var C=s[g];if(C.dataset.precedence===t)u=C;else if(u!==c)break}u?u.parentNode.insertBefore(e,u.nextSibling):(t=i.nodeType===9?i.head:i,t.insertBefore(e,t.firstChild))}function kh(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Ih(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Tc=null;function _y(e,t,i){if(Tc===null){var s=new Map,c=Tc=new Map;c.set(i,s)}else c=Tc,s=c.get(i),s||(s=new Map,c.set(i,s));if(s.has(e))return s;for(s.set(e,null),i=i.getElementsByTagName(e),c=0;c<i.length;c++){var u=i[c];if(!(u[mn]||u[lt]||e==="link"&&u.getAttribute("rel")==="stylesheet")&&u.namespaceURI!=="http://www.w3.org/2000/svg"){var g=u.getAttribute(t)||"";g=e+g;var C=s.get(g);C?C.push(u):s.set(g,[u])}}return s}function ky(e,t,i){e=e.ownerDocument||e,e.head.insertBefore(i,t==="title"?e.querySelector("head > title"):null)}function ZT(e,t,i){if(i===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;return t.rel==="stylesheet"?(e=t.disabled,typeof t.precedence=="string"&&e==null):!0;case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Iy(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function $T(e,t,i,s){if(i.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var c=Ro(s.href),u=t.querySelector(Pr(c));if(u){t=u._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Ec.bind(e),t.then(e,e)),i.state.loading|=4,i.instance=u,ct(u);return}u=t.ownerDocument||t,s=by(s),(c=Hn.get(c))&&kh(s,c),u=u.createElement("link"),ct(u);var g=u;g._p=new Promise(function(C,A){g.onload=C,g.onerror=A}),Dt(u,"link",s),i.instance=u}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(i,t),(t=i.state.preload)&&(i.state.loading&3)===0&&(e.count++,i=Ec.bind(e),t.addEventListener("load",i),t.addEventListener("error",i))}}var Oh=0;function WT(e,t){return e.stylesheets&&e.count===0&&bc(e,e.stylesheets),0<e.count||0<e.imgCount?function(i){var s=setTimeout(function(){if(e.stylesheets&&bc(e,e.stylesheets),e.unsuspend){var u=e.unsuspend;e.unsuspend=null,u()}},6e4+t);0<e.imgBytes&&Oh===0&&(Oh=62500*xT());var c=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&bc(e,e.stylesheets),e.unsuspend)){var u=e.unsuspend;e.unsuspend=null,u()}},(e.imgBytes>Oh?50:800)+t);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(s),clearTimeout(c)}}:null}function Ec(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)bc(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Ac=null;function bc(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Ac=new Map,t.forEach(eE,e),Ac=null,Ec.call(e))}function eE(e,t){if(!(t.state.loading&4)){var i=Ac.get(e);if(i)var s=i.get(null);else{i=new Map,Ac.set(e,i);for(var c=e.querySelectorAll("link[data-precedence],style[data-precedence]"),u=0;u<c.length;u++){var g=c[u];(g.nodeName==="LINK"||g.getAttribute("media")!=="not all")&&(i.set(g.dataset.precedence,g),s=g)}s&&i.set(null,s)}c=t.instance,g=c.getAttribute("data-precedence"),u=i.get(g)||s,u===s&&i.set(null,c),i.set(g,c),this.count++,s=Ec.bind(this),c.addEventListener("load",s),c.addEventListener("error",s),u?u.parentNode.insertBefore(c,u.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(c,e.firstChild)),t.state.loading|=4}}var Vr={$$typeof:ae,Provider:null,Consumer:null,_currentValue:te,_currentValue2:te,_threadCount:0};function tE(e,t,i,s,c,u,g,C,A){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Bs(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bs(0),this.hiddenUpdates=Bs(null),this.identifierPrefix=s,this.onUncaughtError=c,this.onCaughtError=u,this.onRecoverableError=g,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=A,this.incompleteTransitions=new Map}function Oy(e,t,i,s,c,u,g,C,A,R,B,V){return e=new tE(e,t,i,g,A,R,B,V,C),t=1,u===!0&&(t|=24),u=Sn(3,null,null,t),e.current=u,u.stateNode=e,t=ld(),t.refCount++,e.pooledCache=t,t.refCount++,u.memoizedState={element:s,isDehydrated:i,cache:t},hd(u),e}function Ry(e){return e?(e=ro,e):ro}function Ny(e,t,i,s,c,u){c=Ry(c),s.context===null?s.context=c:s.pendingContext=c,s=da(t),s.payload={element:i},u=u===void 0?null:u,u!==null&&(s.callback=u),i=ha(e,s,t),i!==null&&(sn(i,e,t),Er(i,e,t))}function My(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function Rh(e,t){My(e,t),(e=e.alternate)&&My(e,t)}function xy(e){if(e.tag===13||e.tag===31){var t=cs(e,67108864);t!==null&&sn(t,e,67108864),Rh(e,67108864)}}function Dy(e){if(e.tag===13||e.tag===31){var t=wn();t=qi(t);var i=cs(e,t);i!==null&&sn(i,e,t),Rh(e,t)}}var wc=!0;function nE(e,t,i,s){var c=D.T;D.T=null;var u=Y.p;try{Y.p=2,Nh(e,t,i,s)}finally{Y.p=u,D.T=c}}function iE(e,t,i,s){var c=D.T;D.T=null;var u=Y.p;try{Y.p=8,Nh(e,t,i,s)}finally{Y.p=u,D.T=c}}function Nh(e,t,i,s){if(wc){var c=Mh(s);if(c===null)yh(e,t,s,_c,i),jy(e,s);else if(sE(c,e,t,i,s))s.stopPropagation();else if(jy(e,s),t&4&&-1<aE.indexOf(e)){for(;c!==null;){var u=oi(c);if(u!==null)switch(u.tag){case 3:if(u=u.stateNode,u.current.memoizedState.isDehydrated){var g=ai(u.pendingLanes);if(g!==0){var C=u;for(C.pendingLanes|=2,C.entangledLanes|=2;g;){var A=1<<31-Yt(g);C.entanglements[1]|=A,g&=~A}fi(u),(Ye&6)===0&&(lc=Ht()+500,zr(0))}}break;case 31:case 13:C=cs(u,2),C!==null&&sn(C,u,2),uc(),Rh(u,2)}if(u=Mh(s),u===null&&yh(e,t,s,_c,i),u===c)break;c=u}c!==null&&s.stopPropagation()}else yh(e,t,s,null,i)}}function Mh(e){return e=Fs(e),xh(e)}var _c=null;function xh(e){if(_c=null,e=Zi(e),e!==null){var t=d(e);if(t===null)e=null;else{var i=t.tag;if(i===13){if(e=h(t),e!==null)return e;e=null}else if(i===31){if(e=f(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return _c=e,null}function Uy(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(yl()){case Zo:return 2;case zs:return 8;case gn:case $o:return 32;case Pa:return 268435456;default:return 32}default:return 32}}var Dh=!1,Aa=null,ba=null,wa=null,Fr=new Map,Yr=new Map,_a=[],aE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function jy(e,t){switch(e){case"focusin":case"focusout":Aa=null;break;case"dragenter":case"dragleave":ba=null;break;case"mouseover":case"mouseout":wa=null;break;case"pointerover":case"pointerout":Fr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yr.delete(t.pointerId)}}function Qr(e,t,i,s,c,u){return e===null||e.nativeEvent!==u?(e={blockedOn:t,domEventName:i,eventSystemFlags:s,nativeEvent:u,targetContainers:[c]},t!==null&&(t=oi(t),t!==null&&xy(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function sE(e,t,i,s,c){switch(t){case"focusin":return Aa=Qr(Aa,e,t,i,s,c),!0;case"dragenter":return ba=Qr(ba,e,t,i,s,c),!0;case"mouseover":return wa=Qr(wa,e,t,i,s,c),!0;case"pointerover":var u=c.pointerId;return Fr.set(u,Qr(Fr.get(u)||null,e,t,i,s,c)),!0;case"gotpointercapture":return u=c.pointerId,Yr.set(u,Qr(Yr.get(u)||null,e,t,i,s,c)),!0}return!1}function Hy(e){var t=Zi(e.target);if(t!==null){var i=d(t);if(i!==null){if(t=i.tag,t===13){if(t=h(i),t!==null){e.blockedOn=t,ar(e.priority,function(){Dy(i)});return}}else if(t===31){if(t=f(i),t!==null){e.blockedOn=t,ar(e.priority,function(){Dy(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function kc(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=Mh(e.nativeEvent);if(i===null){i=e.nativeEvent;var s=new i.constructor(i.type,i);At=s,i.target.dispatchEvent(s),At=null}else return t=oi(i),t!==null&&xy(t),e.blockedOn=i,!1;t.shift()}return!0}function zy(e,t,i){kc(e)&&i.delete(t)}function oE(){Dh=!1,Aa!==null&&kc(Aa)&&(Aa=null),ba!==null&&kc(ba)&&(ba=null),wa!==null&&kc(wa)&&(wa=null),Fr.forEach(zy),Yr.forEach(zy)}function Ic(e,t){e.blockedOn===t&&(e.blockedOn=null,Dh||(Dh=!0,l.unstable_scheduleCallback(l.unstable_NormalPriority,oE)))}var Oc=null;function Ly(e){Oc!==e&&(Oc=e,l.unstable_scheduleCallback(l.unstable_NormalPriority,function(){Oc===e&&(Oc=null);for(var t=0;t<e.length;t+=3){var i=e[t],s=e[t+1],c=e[t+2];if(typeof s!="function"){if(xh(s||i)===null)continue;break}var u=oi(i);u!==null&&(e.splice(t,3),t-=3,Md(u,{pending:!0,data:c,method:i.method,action:s},s,c))}}))}function Mo(e){function t(A){return Ic(A,e)}Aa!==null&&Ic(Aa,e),ba!==null&&Ic(ba,e),wa!==null&&Ic(wa,e),Fr.forEach(t),Yr.forEach(t);for(var i=0;i<_a.length;i++){var s=_a[i];s.blockedOn===e&&(s.blockedOn=null)}for(;0<_a.length&&(i=_a[0],i.blockedOn===null);)Hy(i),i.blockedOn===null&&_a.shift();if(i=(e.ownerDocument||e).$$reactFormReplay,i!=null)for(s=0;s<i.length;s+=3){var c=i[s],u=i[s+1],g=c[_t]||null;if(typeof u=="function")g||Ly(i);else if(g){var C=null;if(u&&u.hasAttribute("formAction")){if(c=u,g=u[_t]||null)C=g.formAction;else if(xh(c)!==null)continue}else C=g.action;typeof C=="function"?i[s+1]=C:(i.splice(s,3),s-=3),Ly(i)}}}function By(){function e(u){u.canIntercept&&u.info==="react-transition"&&u.intercept({handler:function(){return new Promise(function(g){return c=g})},focusReset:"manual",scroll:"manual"})}function t(){c!==null&&(c(),c=null),s||setTimeout(i,20)}function i(){if(!s&&!navigation.transition){var u=navigation.currentEntry;u&&u.url!=null&&navigation.navigate(u.url,{state:u.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var s=!1,c=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(i,100),function(){s=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),c!==null&&(c(),c=null)}}}function Uh(e){this._internalRoot=e}Rc.prototype.render=Uh.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(o(409));var i=t.current,s=wn();Ny(i,s,e,t,null,null)},Rc.prototype.unmount=Uh.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ny(e.current,2,null,e,null,null),uc(),t[Ti]=null}};function Rc(e){this._internalRoot=e}Rc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ks();e={blockedOn:null,target:e,priority:t};for(var i=0;i<_a.length&&t!==0&&t<_a[i].priority;i++);_a.splice(i,0,e),i===0&&Hy(e)}};var Ky=n.version;if(Ky!=="19.2.4")throw Error(o(527,Ky,"19.2.4"));Y.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(o(188)):(e=Object.keys(e).join(","),Error(o(268,e)));return e=p(t),e=e!==null?S(e):null,e=e===null?null:e.stateNode,e};var rE={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:D,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Nc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Nc.isDisabled&&Nc.supportsFiber)try{ni=Nc.inject(rE),Rt=Nc}catch{}}return Jr.createRoot=function(e,t){if(!r(e))throw Error(o(299));var i=!1,s="",c=qm,u=Jm,g=Xm;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onUncaughtError!==void 0&&(c=t.onUncaughtError),t.onCaughtError!==void 0&&(u=t.onCaughtError),t.onRecoverableError!==void 0&&(g=t.onRecoverableError)),t=Oy(e,1,!1,null,null,i,s,null,c,u,g,By),e[Ti]=t.current,ph(e),new Uh(t)},Jr.hydrateRoot=function(e,t,i){if(!r(e))throw Error(o(299));var s=!1,c="",u=qm,g=Jm,C=Xm,A=null;return i!=null&&(i.unstable_strictMode===!0&&(s=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onUncaughtError!==void 0&&(u=i.onUncaughtError),i.onCaughtError!==void 0&&(g=i.onCaughtError),i.onRecoverableError!==void 0&&(C=i.onRecoverableError),i.formState!==void 0&&(A=i.formState)),t=Oy(e,1,!0,t,i??null,s,c,A,u,g,C,By),t.context=Ry(null),i=t.current,s=wn(),s=qi(s),c=da(s),c.callback=null,ha(i,c,s),i=s,t.current.lanes=i,Ya(t,i),fi(t),e[Ti]=t.current,ph(e),new Rc(t)},Jr.version="19.2.4",Jr}var Zy;function yE(){if(Zy)return zh.exports;Zy=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(n){console.error(n)}}return l(),zh.exports=pE(),zh.exports}var vE=yE();const al="timekerper-sync.json",sl="https://api.github.com",Sf=["zoomLevel","fitMode","debugMode","debugTimeOffset","darkMode"];function ol(l){return{Authorization:`Bearer ${l}`,Accept:"application/vnd.github+json","Content-Type":"application/json"}}async function CE(l){let n=1;for(;n<=10;){const a=await fetch(`${sl}/gists?per_page=100&page=${n}`,{headers:ol(l)});if(!a.ok)throw new Error(a.status===401?"Invalid token":`GitHub API error: ${a.status}`);const o=await a.json();if(o.length===0)break;for(const r of o)if(r.files[al]){const d=await fetch(`${sl}/gists/${r.id}`,{headers:ol(l)});if(!d.ok)throw new Error(`Failed to fetch gist: ${d.status}`);const f=(await d.json()).files[al]?.content;return{gistId:r.id,data:f?JSON.parse(f):null}}n++}return null}async function SE(l,n){const a=await fetch(`${sl}/gists`,{method:"POST",headers:ol(l),body:JSON.stringify({description:"Timekerper sync data",public:!1,files:{[al]:{content:JSON.stringify(n)}}})});if(!a.ok)throw new Error(`Failed to create gist: ${a.status}`);return(await a.json()).id}async function $y(l,n,a){const o=await fetch(`${sl}/gists/${n}`,{method:"PATCH",headers:ol(l),body:JSON.stringify({files:{[al]:{content:JSON.stringify(a)}}})});if(!o.ok)throw o.status===404?new Error("gist_not_found"):new Error(`Failed to push: ${o.status}`)}async function Wy(l,n){const a=await fetch(`${sl}/gists/${n}`,{headers:ol(l)});if(!a.ok)throw a.status===404?new Error("gist_not_found"):new Error(`Failed to pull: ${a.status}`);const r=(await a.json()).files[al]?.content;if(!r)throw new Error("Sync file missing from gist");return JSON.parse(r)}function Mc(l,n,a,o,r){const d=Object.fromEntries(Object.entries(o).filter(([h])=>!Sf.includes(h)));return{version:1,tasks:l,events:n,tags:a,settings:d,activeTaskId:r,pushedAt:new Date().toISOString()}}function TE(l,n){const a=["tasks","events","tags","activeTaskId"];for(const r of a)if(JSON.stringify(l[r])!==JSON.stringify(n[r]))return!0;const o=r=>r&&Object.fromEntries(Object.entries(r).filter(([d])=>!Sf.includes(d)));return JSON.stringify(o(l.settings))!==JSON.stringify(o(n.settings))}function Oe(l){const[n,a]=l.split(":").map(Number);return n*60+a}function cn(l){const n=Math.floor(l/60),a=l%60;return`${n.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`}function Ph(l){const[n,a]=l.split(":").map(Number),o=n>=12?"PM":"AM";return`${n>12?n-12:n===0?12:n}:${a.toString().padStart(2,"0")} ${o}`}function xo(l){if(l>=60){const n=Math.floor(l/60),a=l%60;return a>0?`${n}h ${a}m`:`${n}h`}return`${l}m`}function Gh(l,n,a){const[o,r]=l.split(":").map(Number),[d,h]=n.split(":").map(Number),f=o>=12?"pm":"am",y=d>=12?"pm":"am",p=o>12?o-12:o===0?12:o,S=d>12?d-12:d===0?12:d,T=`${p}:${r.toString().padStart(2,"0")}`,k=`${S}:${h.toString().padStart(2,"0")}${y}`,N=f===y?`${T}${k}`:`${T}${f}${k}`;return a?`(${N})`:N}function rn(){const l=new Date;return l.getHours()*60+l.getMinutes()}function Tf(l,n,a,o,r){const d=[];for(const p of l){if(p.date!==r)continue;const S=Math.max(Oe(p.start),a),T=Math.min(Oe(p.end),o);T>S&&d.push([S,T])}for(const p of n||[]){const S=Math.max(p.start,a),T=Math.min(p.end??o,o);T>S&&d.push([S,T])}if(d.length===0)return 0;d.sort((p,S)=>p[0]-S[0]);let h=0,[f,y]=d[0];for(let p=1;p<d.length;p++)d[p][0]<=y?y=Math.max(y,d[p][1]):(h+=y-f,[f,y]=d[p]);return h+=y-f,h}function ht(){const l=new Date;return l.getFullYear()+"-"+String(l.getMonth()+1).padStart(2,"0")+"-"+String(l.getDate()).padStart(2,"0")}function on(l,n){const a=new Date(l+"T12:00:00");return a.setDate(a.getDate()+n),a.getFullYear()+"-"+String(a.getMonth()+1).padStart(2,"0")+"-"+String(a.getDate()).padStart(2,"0")}function EE(l){return new Date(l+"T12:00:00").toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})}function AE(l){return new Date(l+"T12:00:00").toLocaleDateString("en-US",{weekday:"short",day:"numeric"})}function bE(l){return new Date(l+"T12:00:00").toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}function wE(l){const n=l["X-MICROSOFT-CDO-BUSYSTATUS"];if(n)return n.toUpperCase();const a=l.PARTSTAT;return a==="DECLINED"?"FREE":a==="TENTATIVE"?"TENTATIVE":l.TRANSP==="TRANSPARENT"?"FREE":null}const _E={"Eastern Standard Time":"America/New_York","Central Standard Time":"America/Chicago","Mountain Standard Time":"America/Denver","Pacific Standard Time":"America/Los_Angeles","US Mountain Standard Time":"America/Phoenix","US Eastern Standard Time":"America/Indianapolis","Alaska Standard Time":"America/Anchorage","Hawaiian Standard Time":"Pacific/Honolulu","Atlantic Standard Time":"America/Halifax","Newfoundland Standard Time":"America/St_Johns","GMT Standard Time":"Europe/London","Greenwich Standard Time":"Atlantic/Reykjavik","W. Europe Standard Time":"Europe/Berlin","Central European Standard Time":"Europe/Warsaw","Romance Standard Time":"Europe/Paris","Central Europe Standard Time":"Europe/Budapest","E. Europe Standard Time":"Europe/Chisinau","FLE Standard Time":"Europe/Kiev","GTB Standard Time":"Europe/Bucharest","Russian Standard Time":"Europe/Moscow","Israel Standard Time":"Asia/Jerusalem","South Africa Standard Time":"Africa/Johannesburg","India Standard Time":"Asia/Kolkata","China Standard Time":"Asia/Shanghai","Tokyo Standard Time":"Asia/Tokyo","Korea Standard Time":"Asia/Seoul","AUS Eastern Standard Time":"Australia/Sydney","New Zealand Standard Time":"Pacific/Auckland",UTC:"UTC"};function kE(l,n,a,o,r,d,h){const f=Date.UTC(l,n-1,a,o,r,d),y=new Intl.DateTimeFormat("en-US",{timeZone:h,year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!1}).formatToParts(new Date(f)),p=k=>{const N=y.find(F=>F.type===k);return N?+N.value:0},S=p("hour")===24?0:p("hour"),T=Date.UTC(p("year"),p("month")-1,p("day"),S,p("minute"),p("second"));return new Date(f-(T-f))}function Vh(l){if(!l)return null;let n=null,a=l;if(l.startsWith("TZID=")){const S=l.indexOf(":",5);S>0&&(n=l.slice(5,S).replace(/^"|"$/g,""),a=l.slice(S+1))}else l.includes(":")&&(a=l.split(":").pop());const o=a.match(/^(\d{4})(\d{2})(\d{2})(?:T(\d{2})(\d{2})(\d{2}))?/);if(!o)return null;const[,r,d,h,f,y,p]=o;if(a.endsWith("Z"))return new Date(Date.UTC(+r,+d-1,+h,+(f||0),+(y||0),+(p||0)));if(n){const S=_E[n]||n;try{return kE(+r,+d,+h,+(f||0),+(y||0),+(p||0),S)}catch{}}return new Date(+r,+d-1,+h,+(f||0),+(y||0),+(p||0))}function IE(l){const n=[],o=l.replace(/\r?\n[ \t]/g,"").replace(/\r/g,"").split(`
`);let r=!1,d={},h=0,f=[];for(const y of o){const p=y.trim();if(p==="BEGIN:VEVENT"){r=!0,d={},h=0,f=[];continue}if(p==="END:VEVENT"){r=!1;const S=d.SUMMARY||"Imported Event",T=Vh(d.DTSTART),k=Vh(d.DTEND);if(T&&k){const N=wE(d),F=T.getFullYear()+"-"+String(T.getMonth()+1).padStart(2,"0")+"-"+String(T.getDate()).padStart(2,"0"),q=String(T.getHours()).padStart(2,"0")+":"+String(T.getMinutes()).padStart(2,"0"),ye=String(k.getHours()).padStart(2,"0")+":"+String(k.getMinutes()).padStart(2,"0"),Z=d.UID||null,de=d["RECURRENCE-ID"]||null;let ae=null;if(de&&Z){const je=Vh(de);je&&(ae=je.getFullYear()+"-"+String(je.getMonth()+1).padStart(2,"0")+"-"+String(je.getDate()).padStart(2,"0"))}n.push({name:S,date:F,start:q,end:ye,status:N,isMeeting:h>0,categories:f,uid:Z,replacesDate:ae})}continue}if(r){const S=p.indexOf(":");if(S===-1)continue;const T=p.substring(0,S),k=p.substring(S+1),N=T.split(";")[0];if(d[N]=k,N==="ATTENDEE"&&h++,N==="CATEGORIES"&&f.push(...k.split(",").map(F=>F.trim()).filter(Boolean)),T.includes("PARTSTAT=")){const F=T.match(/PARTSTAT=([^;]+)/);F&&(d.PARTSTAT=F[1])}if(N==="DTSTART"||N==="DTEND"){const F=T.match(/TZID=([^;:]+)/);F&&(d[N]=`TZID=${F[1]}:${k}`)}}}return n}function sC(l,n,a,o){const r={BUSY:n.icsImportBusy,OOF:n.icsImportOof,TENTATIVE:n.icsImportTentative,FREE:n.icsImportFree,"WORKING-ELSEWHERE":n.icsImportWorkingElsewhere},d=n.icsCategoryRules||[],h=new Map;for(const p of l)!p.replacesDate&&p.uid&&h.set(p.uid,p);for(const p of l)if(p.replacesDate&&p.uid){const S=h.get(p.uid);S?(p.name==="Imported Event"&&(p.name=S.name),(!p.categories||p.categories.length===0)&&(p.categories=S.categories),p.isMeeting||(p.isMeeting=S.isMeeting),p.status||(p.status=S.status)):p.name==="Imported Event"&&(p._orphaned=!0)}const f=l.filter(p=>{if(p._orphaned)return!1;const S=r[p.status];if(S===void 0){if(!n.icsImportBusy)return!1}else if(!S)return!1;if(p.date<a||p.date>o||n.icsImportMeetingsOnly&&!p.isMeeting)return!1;if(p.categories&&p.categories.length>0){for(const T of p.categories)if(d.find(N=>N.include===!1&&N.category.toLowerCase()===T.toLowerCase()))return!1}return!0}),y=new Set;for(const p of f)p.replacesDate&&p.uid&&y.add(`${p.uid}|${p.replacesDate}`);return y.size===0?f:f.filter(p=>p.replacesDate?!0:!(p.uid&&y.has(`${p.uid}|${p.date}`)))}function ev(l,n,a,o,r,d=0){const h=l.filter(T=>T.date===n).map(T=>({start:Math.max(Oe(T.start),a),end:Math.min(Oe(T.end),o)})).filter(T=>T.end>T.start),f=(r||[]).map(T=>({start:Math.max(T.start,a),end:Math.min(T.end,o)})).filter(T=>T.end>T.start),y=[...h,...f].sort((T,k)=>T.start-k.start);let p=0,S=a;for(const T of y){if(T.start>S){const k=T.start-S;k>=d&&(p+=k)}S=Math.max(S,T.end)}if(S<o){const T=o-S;T>=d&&(p+=T)}return p}function OE(l,n,a,o,r,d){const h=Oe(a.extendedStart),f=Oe(a.extendedEnd),y=Oe(a.workdayStart),p=Oe(a.workdayEnd),S=a.restrictTasksToWorkHours?y:h,T=a.restrictTasksToWorkHours?p:f,k=a.debugMode&&a.debugTimeOffset||0,N=rn()+k,F=ht(),q=d===F,ye=d>F,Z=n.filter(ie=>ie.date===d).map(ie=>({...ie,startMin:Oe(ie.start),endMin:Oe(ie.end),type:"event",isPast:q?Oe(ie.end)<=N:!ye})).filter(ie=>ie.startMin<f&&ie.endMin>h).sort((ie,ee)=>ie.startMin-ee.startMin),de=[],ae=[];if(q||ye){const ie=l.filter(X=>!X.completed),ee=ie[0],re=q&&(ee?.pauseEvents?.some(X=>X.end==null)??!1),Te=[];if(q&&ee?.startedAtMin!=null&&ee.pauseEvents?.length>0)for(const X of ee.pauseEvents){const oe=X.start,b=X.end??N;if(b>oe&&(Te.push({startMin:oe,endMin:b}),b>h&&oe<f)){const x=Math.max(oe,h),J=Math.min(b,f);ae.push({startMin:x,endMin:J,start:cn(x),end:cn(J),type:"pause",name:"Paused",isPast:b<=N})}}let he;ye?he=S:ee?.startedAtMin!=null?he=Math.max(S,ee.startedAtMin):o?he=Math.max(S,N-r):he=Math.max(S,Math.min(N,T));let Ae=0;if(ye){const X=x=>{const J=[];for(const P of l)if(!(!P.completed||!P.workSegments?.length))for(const W of P.workSegments)W.date===x&&J.push({start:W.start,end:W.end});if(x===F&&ee?.startedAtMin!=null&&ee.pauseEvents?.length>0)for(const P of ee.pauseEvents){const W=P.end??N;W>P.start&&J.push({start:P.start,end:W})}return J},oe=a.minFragmentMinutes||5,b=Math.max(S,Math.min(N,T));b<T&&(Ae+=ev(n,F,b,T,X(F),oe));for(let x=on(F,1);x<d;x=on(x,1))Ae+=ev(n,x,S,T,X(x),oe)}const Ge=[];for(const X of l)if(!(!X.completed||!X.workSegments?.length))for(const oe of X.workSegments){if(oe.date!==d)continue;const b=Math.max(oe.start,he),x=Math.min(oe.end,f);x>b&&Ge.push({startMin:b,endMin:x})}const we=[...Z.filter(X=>X.endMin>he),...Te.filter(X=>X.endMin>he),...Ge.filter(X=>X.endMin>he)].sort((X,oe)=>X.startMin-oe.startMin),fe=[];for(const X of we){const oe=Math.max(X.startMin,he);fe.length===0||oe>fe[fe.length-1].end?fe.push({start:oe,end:X.endMin}):fe[fe.length-1].end=Math.max(fe[fe.length-1].end,X.endMin)}const Be=[];let _e=he;for(const X of fe)X.start>_e&&Be.push({start:_e,end:X.start}),_e=Math.max(_e,X.end);_e<T&&Be.push({start:_e,end:T});let D=0,Y=0,te=Ae;for(const X of ie){const oe=q&&X.id===o,b=X.adjustedDuration??X.duration;let x;if(ye&&te>0){if(te>=b){te-=b;continue}x=b-te,te=0}else x=oe?Math.max(r,b):b;let J=x,P=0;const W=ye&&x<b;for(;J>0&&D<Be.length;){const le=Be[D],pe=le.start+Y,it=le.end-pe;if(it<=0){D++,Y=0;continue}const He=Math.min(J,it),Ot=a.minFragmentMinutes||5;if(He<Ot&&J>it){D++,Y=0;continue}const vi=q&&pe+He<=N;de.push({taskId:X.id,taskName:X.name,tagId:X.tagId,start:cn(pe),end:cn(pe+He),startMin:pe,endMin:pe+He,duration:He,isSplit:x>He||P>0||W,blockIndex:P,type:"task",isActive:oe,isPast:vi,isPausedRemaining:re&&X.id===ee?.id&&!vi,continuesBefore:P>0||W,continuesAfter:J-He>0}),J-=He,Y+=He,P++,Y>=le.end-le.start&&(D++,Y=0)}}}const je=l.filter(ie=>ie.completed&&ie.startedAtMin!=null&&ie.actualDuration>=2);for(const ie of je){const ee=ie.workSegments||[];if(ee.length>0){const re=ee.filter(Te=>Te.date===d);for(let Te=0;Te<re.length;Te++){const he=re[Te],Ae=Math.max(he.start,h),Ge=Math.min(he.end,f);Ge>Ae&&de.push({taskId:ie.id,taskName:ie.name,tagId:ie.tagId,start:cn(Ae),end:cn(Ge),startMin:Ae,endMin:Ge,duration:Ge-Ae,isSplit:re.length>1,blockIndex:Te,type:"task",isActive:!1,isPast:!0,isCompleted:!0,continuesBefore:Te>0,continuesAfter:Te<re.length-1})}}else if(q){const re=Math.max(ie.startedAtMin,h),Te=Math.min(ie.startedAtMin+ie.actualDuration,f);Te>re&&de.push({taskId:ie.id,taskName:ie.name,tagId:ie.tagId,start:cn(re),end:cn(Te),startMin:re,endMin:Te,duration:Te-re,isSplit:!1,blockIndex:0,type:"task",isActive:!1,isPast:!0,isCompleted:!0,continuesBefore:!1,continuesAfter:!1})}}return[...Z,...de,...ae].sort((ie,ee)=>ie.startMin-ee.startMin)}function tv(l){const n=Math.round((Date.now()-l.getTime())/1e3);if(n<10)return"just now";if(n<60)return`${n}s ago`;const a=Math.round(n/60);return a<60?`${a}m ago`:l.toLocaleTimeString([],{hour:"numeric",minute:"2-digit"})}function RE({tasks:l,setTasks:n,events:a,setEvents:o,tags:r,setTags:d,settings:h,setSettings:f,activeTaskId:y,setActiveTaskId:p,setTaskStartTime:S,setElapsedMinutes:T,tasksRef:k,eventsRef:N,timeOffset:F}){const[q,ye]=H.useState(()=>localStorage.getItem("timekerper-sync-enabled")==="true"),[Z,de]=H.useState(()=>localStorage.getItem("timekerper-sync-pat")||""),[ae,je]=H.useState(()=>localStorage.getItem("timekerper-sync-gistId")||""),[ie,ee]=H.useState("idle"),[re,Te]=H.useState(null),[he,Ae]=H.useState(null),[Ge,we]=H.useState(null),fe=H.useRef(!1),Be=H.useRef(!1),_e=H.useRef(!1);H.useEffect(()=>{localStorage.setItem("timekerper-sync-pat",Z)},[Z]),H.useEffect(()=>{localStorage.setItem("timekerper-sync-gistId",ae)},[ae]),H.useEffect(()=>{localStorage.setItem("timekerper-sync-enabled",q)},[q]);const D=H.useCallback(P=>{if(Be.current=!0,P.tasks&&n(P.tasks),P.events&&o(P.events),P.tags&&d(P.tags),P.settings){const W=Object.fromEntries(Object.entries(P.settings).filter(([le])=>!Sf.includes(le)));f(le=>({...le,...W}))}if(P.activeTaskId!=null){const W=(P.tasks||[]).find(le=>le.id===P.activeTaskId&&!le.completed);if(W&&W.startedAtMin!=null){const le=rn()+F,pe=W.startedAtDate||ht(),it=W.pauseEvents&&W.pauseEvents.length>0,He=Tf(P.events||[],W.pauseEvents||[],W.startedAtMin,le,pe)+(it?0:W.pauseGapMinutes||0),Ot=Math.max(0,le-W.startedAtMin-He);p(P.activeTaskId),S(Date.now()-Ot*6e4),T(Ot)}else p(null),S(null),T(0)}else P.activeTaskId===null&&(p(null),S(null),T(0));setTimeout(()=>{Be.current=!1},0)},[F]),Y=H.useCallback(async()=>{if(!(Be.current||fe.current||!q||!ae||!Z)){fe.current=!0,ee("syncing");try{const P=Mc(k.current,N.current,r,h,y);await $y(Z,ae,P),_e.current=!1,Ae(new Date),ee("idle"),Te(null)}catch(P){ee("error"),Te(P.message)}finally{fe.current=!1}}},[q,ae,Z,r,h,y]),te=H.useCallback(async()=>{if(!(_e.current||fe.current||!q||!ae||!Z)){fe.current=!0,ee("syncing");try{const P=await Wy(Z,ae),W=Mc(k.current,N.current,r,h,y);TE(W,P)&&D(P),Ae(new Date),ee("idle"),Te(null)}catch(P){ee("error"),Te(P.message)}finally{fe.current=!1}}},[q,ae,Z,r,h,y,D]),X=async P=>{ee("syncing"),Te(null);try{const W=await CE(P);if(W)ee("idle"),we({pat:P,gistId:W.gistId});else{const le=Mc(k.current,N.current,r,h,y),pe=await SE(P,le);je(pe),de(P),ye(!0),ee("idle"),Ae(new Date)}}catch(W){ee("error"),Te(W.message)}},oe=async P=>{const{pat:W,gistId:le}=Ge;we(null),ee("syncing");try{if(P==="pull"){const pe=await Wy(W,le);D(pe)}else{const pe=Mc(k.current,N.current,r,h,y);await $y(W,le,pe)}je(le),de(W),ye(!0),ee("idle"),Ae(new Date)}catch(pe){ee("error"),Te(pe.message)}},b=()=>{ye(!1),de(""),je(""),ee("idle"),Te(null),Ae(null),localStorage.removeItem("timekerper-sync-pat"),localStorage.removeItem("timekerper-sync-gistId"),localStorage.removeItem("timekerper-sync-enabled")};H.useEffect(()=>{if(!q||Be.current)return;_e.current=!0;const P=setTimeout(()=>{Be.current||Y()},2e3);return()=>clearTimeout(P)},[l,a,r,h,y,q,Y]),H.useEffect(()=>{if(!q)return;const P=setInterval(te,6e4);return()=>clearInterval(P)},[q,te]),H.useEffect(()=>{q&&ae&&Z&&te()},[]);const x=q?v.jsx("span",{className:`sync-indicator ${ie}`,title:ie==="error"?re:ie==="syncing"?"Syncing...":he?`Last synced ${tv(he)}`:"Connected"}):null,J=v.jsxs("div",{className:"settings-section",children:[v.jsx("h4",{children:"Sync"}),v.jsx("p",{className:"settings-hint",children:"Sync your data across devices via a private GitHub Gist"}),q?v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"sync-status-row",children:[v.jsx("span",{className:`sync-dot ${ie}`}),v.jsxs("span",{children:[ie==="syncing"&&"Syncing...",ie==="idle"&&he&&`Last synced ${tv(he)}`,ie==="idle"&&!he&&"Connected",ie==="error"&&"Sync error"]}),v.jsx("button",{className:"btn-secondary sync-now-btn",onClick:async()=>{await Y(),await te()},children:"Sync Now"})]}),ie==="error"&&re&&v.jsx("p",{className:"sync-error",children:re}),v.jsx("button",{className:"btn-secondary",style:{marginTop:"0.5rem"},onClick:b,children:"Disconnect"})]}):v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"form-group",children:[v.jsxs("label",{children:["GitHub Personal Access Token ",v.jsx("span",{className:"label-hint",children:' needs "gist" scope only'})]}),v.jsxs("details",{className:"sync-help",children:[v.jsx("summary",{children:"How do I get one?"}),v.jsxs("ol",{children:[v.jsxs("li",{children:["Go to ",v.jsx("strong",{children:"github.com  Settings  Developer settings  Personal access tokens  Tokens (classic)"})]}),v.jsxs("li",{children:["Click ",v.jsx("strong",{children:"Generate new token (classic)"})]}),v.jsx("li",{children:'Give it a name (e.g. "Timekerper sync")'}),v.jsxs("li",{children:["Check only the ",v.jsx("strong",{children:"gist"})," scope"]}),v.jsxs("li",{children:["Click ",v.jsx("strong",{children:"Generate token"})," and copy it"]}),v.jsx("li",{children:"Paste the same token on each device you want to sync"})]})]}),v.jsx("input",{type:"password",className:"pat-input",value:Z,onChange:P=>de(P.target.value),placeholder:"ghp_xxxxxxxxxxxxxxxxxxxx"})]}),Ge?v.jsxs("div",{className:"sync-conflict",children:[v.jsx("p",{className:"sync-conflict-msg",children:"Existing sync data found. Which do you want to keep?"}),v.jsxs("div",{className:"sync-conflict-btns",children:[v.jsx("button",{className:"btn-primary",onClick:()=>oe("pull"),children:"Use cloud data"}),v.jsx("button",{className:"btn-secondary",onClick:()=>oe("push"),children:"Use this device"}),v.jsx("button",{className:"btn-secondary",onClick:()=>{we(null),de("")},children:"Cancel"})]})]}):v.jsx("button",{className:"btn-primary",onClick:()=>X(Z),disabled:!Z.trim()||ie==="syncing",children:ie==="syncing"?"Connecting...":"Connect"})]})]});return{syncIndicator:x,syncSettingsUI:J}}const NE=Object.freeze(Object.defineProperty({__proto__:null,useSync:RE},Symbol.toStringTag,{value:"Module"})),ME="modulepreload",xE=function(l,n){return new URL(l,n).href},nv={},DE=function(n,a,o){let r=Promise.resolve();if(a&&a.length>0){let p=function(S){return Promise.all(S.map(T=>Promise.resolve(T).then(k=>({status:"fulfilled",value:k}),k=>({status:"rejected",reason:k}))))};const h=document.getElementsByTagName("link"),f=document.querySelector("meta[property=csp-nonce]"),y=f?.nonce||f?.getAttribute("nonce");r=p(a.map(S=>{if(S=xE(S,o),S in nv)return;nv[S]=!0;const T=S.endsWith(".css"),k=T?'[rel="stylesheet"]':"";if(o)for(let F=h.length-1;F>=0;F--){const q=h[F];if(q.href===S&&(!T||q.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${S}"]${k}`))return;const N=document.createElement("link");if(N.rel=T?"stylesheet":ME,T||(N.as="script"),N.crossOrigin="",N.href=S,y&&N.setAttribute("nonce",y),document.head.appendChild(N),T)return new Promise((F,q)=>{N.addEventListener("load",F),N.addEventListener("error",()=>q(new Error(`Unable to preload CSS for ${S}`)))})}))}function d(h){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=h,window.dispatchEvent(f),!f.defaultPrevented)throw h}return r.then(h=>{for(const f of h||[])f.status==="rejected"&&d(f.reason);return n().catch(d)})};const UE="msal.js.common",oC="https://login.microsoftonline.com/common/",jE="login.microsoftonline.com",rC="common",HE="adfs",zE="dstsv2",LE=`${oC}discovery/instance?api-version=1.1&authorization_endpoint=`,iv=".ciamlogin.com",BE=".onmicrosoft.com",tf="|",lC="openid",cC="profile",Ef="offline_access",KE="email",Af="S256",PE="application/x-www-form-urlencoded;charset=utf-8",Xr="Not Available",nf="/",av="http://169.254.169.254/metadata/instance/compute/location",GE="2020-06-01",VE=2e3,FE="TryAutoDetect",YE="login.microsoft.com",QE=["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],sv=240,qE="invalid_instance",ov=200,JE=400,rv=400,XE=499,ZE=500,$E=599,zo={GET:"GET",POST:"POST"},Qo=[lC,cC,Ef],lv=[...Qo,KE],Zt={CONTENT_TYPE:"Content-Type",CONTENT_LENGTH:"Content-Length",RETRY_AFTER:"Retry-After",CCS_HEADER:"X-AnchorMailbox",WWWAuthenticate:"WWW-Authenticate",AuthenticationInfo:"Authentication-Info",X_MS_REQUEST_ID:"x-ms-request-id",X_MS_HTTP_VERSION:"x-ms-httpver"},cv={ACTIVE_ACCOUNT_FILTERS:"active-account-filters"},Ua={COMMON:"common",ORGANIZATIONS:"organizations",CONSUMERS:"consumers"},xc={ACCESS_TOKEN:"access_token",XMS_CC:"xms_cc"},un={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",NO_SESSION:"no_session"},bf={CODE:"code",IDTOKEN_TOKEN_REFRESHTOKEN:"id_token token refresh_token"},wf={QUERY:"query",FRAGMENT:"fragment"},uC={AUTHORIZATION_CODE_GRANT:"authorization_code",REFRESH_TOKEN_GRANT:"refresh_token"},WE="MSSTS",eA="ADFS",dC="Generic",hC="-",af=".",Ut={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"},_f="appmetadata",tA="client_info",Yc="1",sf="authority-metadata",nA=3600*24,qn={CONFIG:"config",CACHE:"cache",NETWORK:"network",HARDCODED_VALUES:"hardcoded_values"},uv=5,iA=330,aA=50,fC="server-telemetry",dv="|",Do=",",sA="1",oA="0",rA="unknown_error",Xe={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},lA=60,cA=3600,gC="throttling",uA="retry-after, h429",dA="invalid_grant",hA="client_mismatch",Uo={FAILED_AUTO_DETECTION:"1",INTERNAL_CACHE:"2",ENVIRONMENT_VARIABLE:"3",IMDS:"4"},Fh={CONFIGURED_NO_AUTO_DETECTION:"2",AUTO_DETECTION_REQUESTED_SUCCESSFUL:"4",AUTO_DETECTION_REQUESTED_FAILED:"5"},Es={NOT_APPLICABLE:"0",FORCE_REFRESH_OR_CLAIMS:"1",NO_CACHED_ACCESS_TOKEN:"2",CACHED_ACCESS_TOKEN_EXPIRED:"3",PROACTIVELY_REFRESHED:"4"},fA={Pop:"pop"},mC=300;const ks="client_id",pC="redirect_uri",gA="response_type",mA="response_mode",pA="grant_type",yA="claims",vA="scope",CA="refresh_token",SA="state",TA="nonce",EA="prompt",AA="code",bA="code_challenge",wA="code_challenge_method",_A="code_verifier",kA="client-request-id",IA="x-client-SKU",OA="x-client-VER",RA="x-client-OS",NA="x-client-CPU",MA="x-client-current-telemetry",xA="x-client-last-telemetry",DA="x-ms-lib-capability",UA="x-app-name",jA="x-app-ver",HA="post_logout_redirect_uri",zA="id_token_hint",LA="client_secret",BA="client_assertion",KA="client_assertion_type",yC="token_type",vC="req_cnf",hv="return_spa_code",PA="nativebroker",GA="logout_hint",VA="sid",FA="login_hint",YA="domain_hint",QA="x-client-xtra-sku",Qc="brk_client_id",qc="brk_redirect_uri",of="instance_aware",qA="ear_jwk",JA="ear_jwe_crypto";function kf(l){return`See https://aka.ms/msal.js.errors#${l} for details`}class tt extends Error{constructor(n,a,o){const r=a||(n?kf(n):""),d=r?`${n}: ${r}`:n;super(d),Object.setPrototypeOf(this,tt.prototype),this.errorCode=n||"",this.errorMessage=r||"",this.subError=o||"",this.name="AuthError"}setCorrelationId(n){this.correlationId=n}}function rf(l,n){return new tt(l,n||kf(l))}class If extends tt{constructor(n){super(n),this.name="ClientConfigurationError",Object.setPrototypeOf(this,If.prototype)}}function nt(l){return new If(l)}class Bn{static isEmptyObj(n){if(n)try{const a=JSON.parse(n);return Object.keys(a).length===0}catch{}return!0}static startsWith(n,a){return n.indexOf(a)===0}static endsWith(n,a){return n.length>=a.length&&n.lastIndexOf(a)===n.length-a.length}static queryStringToObject(n){const a={},o=n.split("&"),r=d=>decodeURIComponent(d.replace(/\+/g," "));return o.forEach(d=>{if(d.trim()){const[h,f]=d.split(/=(.+)/g,2);h&&f&&(a[r(h)]=r(f))}}),a}static trimArrayEntries(n){return n.map(a=>a.trim())}static removeEmptyStringsFromArray(n){return n.filter(a=>!!a)}static jsonParseHelper(n){try{return JSON.parse(n)}catch{return null}}}class Of extends tt{constructor(n,a){super(n,a),this.name="ClientAuthError",Object.setPrototypeOf(this,Of.prototype)}}function Q(l,n){return new Of(l,n)}const XA="redirect_uri_empty",ZA="authority_uri_insecure",Dc="url_parse_error",$A="empty_url_error",WA="empty_input_scopes_error",CC="invalid_claims",eb="token_request_empty",tb="logout_request_empty",SC="pkce_params_missing",TC="invalid_cloud_discovery_metadata",nb="invalid_authority_metadata",ib="untrusted_authority",Rf="missing_ssh_jwk",ab="missing_ssh_kid",sb="cannot_set_OIDCOptions",ob="cannot_allow_platform_broker",rb="authority_mismatch",lb="invalid_request_method_for_EAR";const EC="client_info_decoding_error",cb="client_info_empty_error",AC="token_parsing_error",ub="null_or_empty_token",Ra="endpoints_resolution_error",db="network_error",hb="openid_config_error",fb="hash_not_deserialized",rl="invalid_state",gb="state_mismatch",fv="state_not_found",mb="nonce_mismatch",bC="auth_time_not_found",pb="max_age_transpired",yb="multiple_matching_appMetadata",vb="request_cannot_be_made",Cb="cannot_remove_empty_scope",Sb="cannot_append_scopeset",gv="empty_input_scopeset",wC="no_account_in_silent_request",Tb="invalid_cache_record",_C="invalid_cache_environment",mv="no_account_found",kC="no_crypto_object",bs="token_refresh_required",Eb="token_claims_cnf_required_for_signedjwt",Ab="authorization_code_missing_from_server_response",bb="binding_key_not_removed",wb="end_session_endpoint_not_supported",IC="key_id_missing",Re="method_not_implemented";class Ft{constructor(n){const a=n?Bn.trimArrayEntries([...n]):[],o=a?Bn.removeEmptyStringsFromArray(a):[];if(!o||!o.length)throw nt(WA);this.scopes=new Set,o.forEach(r=>this.scopes.add(r))}static fromString(n){const o=(n||"").split(" ");return new Ft(o)}static createSearchScopes(n){const a=n&&n.length>0?n:[...Qo],o=new Ft(a);return o.containsOnlyOIDCScopes()?o.removeScope(Ef):o.removeOIDCScopes(),o}containsScope(n){const a=this.printScopesLowerCase().split(" "),o=new Ft(a);return n?o.scopes.has(n.toLowerCase()):!1}containsScopeSet(n){return!n||n.scopes.size<=0?!1:this.scopes.size>=n.scopes.size&&n.asArray().every(a=>this.containsScope(a))}containsOnlyOIDCScopes(){let n=0;return lv.forEach(a=>{this.containsScope(a)&&(n+=1)}),this.scopes.size===n}appendScope(n){n&&this.scopes.add(n.trim())}appendScopes(n){try{n.forEach(a=>this.appendScope(a))}catch{throw Q(Sb)}}removeScope(n){if(!n)throw Q(Cb);this.scopes.delete(n.trim())}removeOIDCScopes(){lv.forEach(n=>{this.scopes.delete(n)})}unionScopeSets(n){if(!n)throw Q(gv);const a=new Set;return n.scopes.forEach(o=>a.add(o.toLowerCase())),this.scopes.forEach(o=>a.add(o.toLowerCase())),a}intersectingScopeSets(n){if(!n)throw Q(gv);n.containsOnlyOIDCScopes()||n.removeOIDCScopes();const a=this.unionScopeSets(n),o=n.getScopeCount(),r=this.getScopeCount();return a.size<r+o}getScopeCount(){return this.scopes.size}asArray(){const n=[];return this.scopes.forEach(a=>n.push(a)),n}printScopes(){return this.scopes?this.asArray().join(" "):""}printScopesLowerCase(){return this.printScopes().toLowerCase()}}function lu(l,n,a){if(!n)return;const o=l.get(ks);o&&l.has(Qc)&&a?.addFields({embeddedClientId:o,embeddedRedirectUri:l.get(pC)},n)}function Nf(l,n){l.set(gA,n)}function _b(l,n){l.set(mA,n||wf.QUERY)}function kb(l){l.set(PA,"1")}function Mf(l,n,a=!0,o=Qo){a&&!o.includes("openid")&&!n.includes("openid")&&o.push("openid");const r=a?[...n||[],...o]:n||[],d=new Ft(r);l.set(vA,d.printScopes())}function xf(l,n){l.set(ks,n)}function Df(l,n){l.set(pC,n)}function Ib(l,n){l.set(HA,n)}function Ob(l,n){l.set(zA,n)}function Rb(l,n){l.set(YA,n)}function Uc(l,n){l.set(FA,n)}function Jc(l,n){l.set(Zt.CCS_HEADER,`UPN:${n}`)}function tl(l,n){l.set(Zt.CCS_HEADER,`Oid:${n.uid}@${n.utid}`)}function pv(l,n){l.set(VA,n)}function Uf(l,n,a){const o=jb(n,a);try{JSON.parse(o)}catch{throw nt(CC)}l.set(yA,o)}function hl(l,n){l.set(kA,n)}function jf(l,n){l.set(IA,n.sku),l.set(OA,n.version),n.os&&l.set(RA,n.os),n.cpu&&l.set(NA,n.cpu)}function Hf(l,n){n?.appName&&l.set(UA,n.appName),n?.appVersion&&l.set(jA,n.appVersion)}function Nb(l,n){l.set(EA,n)}function OC(l,n){n&&l.set(SA,n)}function Mb(l,n){l.set(TA,n)}function zf(l,n,a){if(n&&a)l.set(bA,n),l.set(wA,a);else throw nt(SC)}function xb(l,n){l.set(AA,n)}function Db(l,n){l.set(CA,n)}function Ub(l,n){l.set(_A,n)}function RC(l,n){l.set(LA,n)}function NC(l,n){n&&l.set(BA,n)}function MC(l,n){n&&l.set(KA,n)}function xC(l,n){l.set(pA,n)}function Lf(l){l.set(tA,"1")}function DC(l){l.has(of)||l.set(of,"true")}function pi(l,n){Object.entries(n).forEach(([a,o])=>{!l.has(a)&&o&&l.set(a,o)})}function jb(l,n){let a;if(!l)a={};else try{a=JSON.parse(l)}catch{throw nt(CC)}return n&&n.length>0&&(a.hasOwnProperty(xc.ACCESS_TOKEN)||(a[xc.ACCESS_TOKEN]={}),a[xc.ACCESS_TOKEN][xc.XMS_CC]={values:n}),JSON.stringify(a)}function Bf(l,n){n&&(l.set(yC,Xe.POP),l.set(vC,n))}function UC(l,n){n&&(l.set(yC,Xe.SSH),l.set(vC,n))}function jC(l,n){l.set(MA,n.generateCurrentRequestHeaderValue()),l.set(xA,n.generateLastRequestHeaderValue())}function HC(l){l.set(DA,uA)}function Hb(l,n){l.set(GA,n)}function cu(l,n,a){l.has(Qc)||l.set(Qc,n),l.has(qc)||l.set(qc,a)}function zb(l,n){l.set(qA,encodeURIComponent(n)),l.set(JA,"eyJhbGciOiJkaXIiLCJlbmMiOiJBMjU2R0NNIn0")}function yv(l){if(!l)return l;let n=l.toLowerCase();return Bn.endsWith(n,"?")?n=n.slice(0,-1):Bn.endsWith(n,"?/")&&(n=n.slice(0,-2)),Bn.endsWith(n,"/")||(n+="/"),n}function zC(l){return l.startsWith("#/")?l.substring(2):l.startsWith("#")||l.startsWith("?")?l.substring(1):l}function Xc(l){if(!l||l.indexOf("=")<0)return null;try{const n=zC(l),a=Object.fromEntries(new URLSearchParams(n));if(a.code||a.ear_jwe||a.error||a.error_description||a.state)return a}catch{throw Q(fb)}return null}function ll(l){const n=new Array;return l.forEach((a,o)=>{n.push(`${o}=${encodeURIComponent(a)}`)}),n.join("&")}function vv(l){if(!l)return l;const n=l.split("#")[0];try{const a=new URL(n),o=a.origin+a.pathname+a.search;return yv(o)}catch{return yv(n)}}const Zc={createNewGuid:()=>{throw Q(Re)},base64Decode:()=>{throw Q(Re)},base64Encode:()=>{throw Q(Re)},base64UrlEncode:()=>{throw Q(Re)},encodeKid:()=>{throw Q(Re)},async getPublicKeyThumbprint(){throw Q(Re)},async removeTokenBindingKey(){throw Q(Re)},async clearKeystore(){throw Q(Re)},async signJwt(){throw Q(Re)},async hashString(){throw Q(Re)}};var rt;(function(l){l[l.Error=0]="Error",l[l.Warning=1]="Warning",l[l.Info=2]="Info",l[l.Verbose=3]="Verbose",l[l.Trace=4]="Trace"})(rt||(rt={}));const Lb=50,Bb=500,As=new Map;function Kb(l,n){As.delete(l),As.set(l,n)}function Pb(l,n){const a=Date.now();let o=As.get(l);if(o)Kb(l,o);else if(o={logs:[],firstEventTime:a},As.set(l,o),As.size>Lb){const r=As.keys().next().value;r&&As.delete(r)}o.logs.push({...n,milliseconds:a-o.firstEventTime}),o.logs.length>Bb&&o.logs.shift()}function Gb(l){if(l.length!==6)return!1;for(let n=0;n<l.length;n++){const a=l[n];if(!(a>="a"&&a<="z"||a>="A"&&a<="Z"||a>="0"&&a<="9"))return!1}return!0}class yi{constructor(n,a,o){this.level=rt.Info;const r=()=>{},d=n||yi.createDefaultLoggerOptions();this.localCallback=d.loggerCallback||r,this.piiLoggingEnabled=d.piiLoggingEnabled||!1,this.level=typeof d.logLevel=="number"?d.logLevel:rt.Info,this.packageName=a||"",this.packageVersion=o||""}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:rt.Info}}clone(n,a){return new yi({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level},n,a)}logMessage(n,a){const o=a.correlationId;if(Gb(n)){const y={hash:n,level:a.logLevel,containsPii:a.containsPii||!1,milliseconds:0};Pb(o,y)}if(a.logLevel>this.level||!this.piiLoggingEnabled&&a.containsPii)return;const f=`${`[${new Date().toUTCString()}] : [${o}]`} : ${this.packageName}@${this.packageVersion} : ${rt[a.logLevel]} - ${n}`;this.executeCallback(a.logLevel,f,a.containsPii||!1)}executeCallback(n,a,o){this.localCallback&&this.localCallback(n,a,o)}error(n,a){this.logMessage(n,{logLevel:rt.Error,containsPii:!1,correlationId:a})}errorPii(n,a){this.logMessage(n,{logLevel:rt.Error,containsPii:!0,correlationId:a})}warning(n,a){this.logMessage(n,{logLevel:rt.Warning,containsPii:!1,correlationId:a})}warningPii(n,a){this.logMessage(n,{logLevel:rt.Warning,containsPii:!0,correlationId:a})}info(n,a){this.logMessage(n,{logLevel:rt.Info,containsPii:!1,correlationId:a})}infoPii(n,a){this.logMessage(n,{logLevel:rt.Info,containsPii:!0,correlationId:a})}verbose(n,a){this.logMessage(n,{logLevel:rt.Verbose,containsPii:!1,correlationId:a})}verbosePii(n,a){this.logMessage(n,{logLevel:rt.Verbose,containsPii:!0,correlationId:a})}trace(n,a){this.logMessage(n,{logLevel:rt.Trace,containsPii:!1,correlationId:a})}tracePii(n,a){this.logMessage(n,{logLevel:rt.Trace,containsPii:!0,correlationId:a})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}}const uu="@azure/msal-common",fl="16.1.0";const Kf={None:"none"};function Cv(l,n){return!!l&&!!n&&l===n.split(".")[1]}function qo(l,n,a,o){if(o){const{oid:r,sub:d,tid:h,name:f,tfp:y,acr:p,preferred_username:S,upn:T,login_hint:k}=o,N=h||y||p||"";return{tenantId:N,localAccountId:r||d||"",name:f,username:S||T||"",loginHint:k,isHomeTenant:Cv(N,l)}}else return{tenantId:a,localAccountId:n,username:"",isHomeTenant:Cv(a,l)}}function Pf(l,n,a,o){let r=l;if(n){const{isHomeTenant:d,...h}=n;r={...l,...h}}if(a){const{isHomeTenant:d,...h}=qo(l.homeAccountId,l.localAccountId,l.tenantId,a);return r={...r,...h,idTokenClaims:a,idToken:o},r}return r}function Vi(l,n){const a=Vb(l);try{const o=n(a);return JSON.parse(o)}catch{throw Q(AC)}}function ws(l){if(!l.signin_state)return!1;const n=["kmsi","dvc_dmjd"];return l.signin_state.some(a=>n.includes(a.trim().toLowerCase()))}function Vb(l){if(!l)throw Q(ub);const a=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(l);if(!a||a.length<4)throw Q(AC);return a[2]}function LC(l,n){if(n===0||Date.now()-3e5>l+n)throw Q(pb)}class Qe{get urlString(){return this._urlString}constructor(n){if(this._urlString=n,!this._urlString)throw nt($A);n.includes("#")||(this._urlString=Qe.canonicalizeUri(n))}static canonicalizeUri(n){if(n){let a=n.toLowerCase();return Bn.endsWith(a,"?")?a=a.slice(0,-1):Bn.endsWith(a,"?/")&&(a=a.slice(0,-2)),Bn.endsWith(a,"/")||(a+="/"),a}return n}validateAsUri(){let n;try{n=this.getUrlComponents()}catch{throw nt(Dc)}if(!n.HostNameAndPort||!n.PathSegments)throw nt(Dc);if(!n.Protocol||n.Protocol.toLowerCase()!=="https:")throw nt(ZA)}static appendQueryString(n,a){return a?n.indexOf("?")<0?`${n}?${a}`:`${n}&${a}`:n}static removeHashFromUrl(n){return Qe.canonicalizeUri(n.split("#")[0])}replaceTenantPath(n){const a=this.getUrlComponents(),o=a.PathSegments;return n&&o.length!==0&&(o[0]===Ua.COMMON||o[0]===Ua.ORGANIZATIONS)&&(o[0]=n),Qe.constructAuthorityUriFromObject(a)}getUrlComponents(){const n=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),a=this.urlString.match(n);if(!a)throw nt(Dc);const o={Protocol:a[1],HostNameAndPort:a[4],AbsolutePath:a[5],QueryString:a[7]};let r=o.AbsolutePath.split("/");return r=r.filter(d=>d&&d.length>0),o.PathSegments=r,o.QueryString&&o.QueryString.endsWith("/")&&(o.QueryString=o.QueryString.substring(0,o.QueryString.length-1)),o}static getDomainFromUrl(n){const a=RegExp("^([^:/?#]+://)?([^/?#]*)"),o=n.match(a);if(!o)throw nt(Dc);return o[2]}static getAbsoluteUrl(n,a){if(n[0]===nf){const r=new Qe(a).getUrlComponents();return r.Protocol+"//"+r.HostNameAndPort+n}return n}static constructAuthorityUriFromObject(n){return new Qe(n.Protocol+"//"+n.HostNameAndPort+"/"+n.PathSegments.join("/"))}}const Fb=[{host:"login.microsoftonline.com"},{host:"login.chinacloudapi.cn",issuerHost:"login.partner.microsoftonline.cn"},{host:"login.microsoftonline.us"},{host:"login.sovcloud-identity.fr"},{host:"login.sovcloud-identity.de"},{host:"login.sovcloud-identity.sg"}];function Yb(l,n){return{token_endpoint:`https://${l}/{tenantid}/oauth2/v2.0/token`,jwks_uri:`https://${l}/{tenantid}/discovery/v2.0/keys`,issuer:`https://${n}/{tenantid}/v2.0`,authorization_endpoint:`https://${l}/{tenantid}/oauth2/v2.0/authorize`,end_session_endpoint:`https://${l}/{tenantid}/oauth2/v2.0/logout`}}const Qb=Fb.reduce((l,{host:n,issuerHost:a})=>(l[n]=Yb(n,a||n),l),{}),BC={endpointMetadata:Qb,instanceDiscoveryMetadata:{metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]},{preferred_network:"login.sovcloud-identity.fr",preferred_cache:"login.sovcloud-identity.fr",aliases:["login.sovcloud-identity.fr"]},{preferred_network:"login.sovcloud-identity.de",preferred_cache:"login.sovcloud-identity.de",aliases:["login.sovcloud-identity.de"]},{preferred_network:"login.sovcloud-identity.sg",preferred_cache:"login.sovcloud-identity.sg",aliases:["login.sovcloud-identity.sg"]}]}},Sv=BC.endpointMetadata,Gf=BC.instanceDiscoveryMetadata,KC=new Set;Gf.metadata.forEach(l=>{l.aliases.forEach(n=>{KC.add(n)})});function qb(l,n,a){let o;const r=l.canonicalAuthority;if(r){const d=new Qe(r).getUrlComponents().HostNameAndPort;o=Tv(n,a,d,l.cloudDiscoveryMetadata?.metadata)||Tv(n,a,d,Gf.metadata)||l.knownAuthorities}return o||[]}function Tv(l,n,a,o,r){if(l.trace("1bmquz",n),a&&o){const d=$c(o,a);if(d)return l.trace("1fotbt",n),d.aliases;l.trace("14avvj",n)}return null}function Jb(l){return $c(Gf.metadata,l)}function $c(l,n){for(let a=0;a<l.length;a++){const o=l[a];if(o.aliases.includes(n))return o}return null}const lf="cache_quota_exceeded",Xb="cache_error_unknown";class Lo extends Error{constructor(n,a){const o=a||kf(n);super(o),Object.setPrototypeOf(this,Lo.prototype),this.name="CacheError",this.errorCode=n,this.errorMessage=o}}function cf(l){return l instanceof Error?l.name==="QuotaExceededError"||l.name==="NS_ERROR_DOM_QUOTA_REACHED"||l.message.includes("exceeded the quota")?new Lo(lf):new Lo(l.name,l.message):new Lo(Xb)}function Wc(l,n){if(!l)throw Q(cb);try{const a=n(l);return JSON.parse(a)}catch{throw Q(EC)}}function Bo(l){if(!l)throw Q(EC);const n=l.split(af,2);return{uid:n[0],utid:n.length<2?"":n[1]}}const Xn={Default:0,Adfs:1,Dsts:2,Ciam:3};function Vf(l){return l&&(l.tid||l.tfp||l.acr)||null}const dn={AAD:"AAD",OIDC:"OIDC",EAR:"EAR"};function Is(l){const n=l.tenantProfiles||[];return n.length===0&&l.realm&&l.localAccountId&&n.push(qo(l.homeAccountId,l.localAccountId,l.realm)),{homeAccountId:l.homeAccountId,environment:l.environment,tenantId:l.realm,username:l.username,localAccountId:l.localAccountId,loginHint:l.loginHint,name:l.name,nativeAccountId:l.nativeAccountId,authorityType:l.authorityType,tenantProfiles:new Map(n.map(a=>[a.tenantId,a])),dataBoundary:l.dataBoundary}}function Zb(l,n,a){let o;n.authorityType===Xn.Adfs?o=eA:n.protocolMode===dn.OIDC?o=dC:o=WE;let r,d;l.clientInfo&&a&&(r=Wc(l.clientInfo,a),r.xms_tdbr&&(d=r.xms_tdbr==="EU"?"EU":"None"));const h=l.environment||n&&n.getPreferredCache();if(!h)throw Q(_C);const f=l.idTokenClaims?.preferred_username||l.idTokenClaims?.upn,y=l.idTokenClaims?.emails?l.idTokenClaims.emails[0]:null,p=f||y||"",S=l.idTokenClaims?.login_hint,T=r?.utid||Vf(l.idTokenClaims)||"",k=r?.uid||l.idTokenClaims?.oid||l.idTokenClaims?.sub||"";let N;return l.tenantProfiles?N=l.tenantProfiles:N=[qo(l.homeAccountId,k,T,l.idTokenClaims)],{homeAccountId:l.homeAccountId,environment:h,realm:T,localAccountId:k,username:p,authorityType:o,loginHint:S,clientInfo:l.clientInfo,name:l.idTokenClaims?.name||"",lastModificationTime:void 0,lastModificationApp:void 0,cloudGraphHostName:l.cloudGraphHostName,msGraphHost:l.msGraphHost,nativeAccountId:l.nativeAccountId,tenantProfiles:N,dataBoundary:d}}function $b(l,n,a){const o=Array.from(l.tenantProfiles?.values()||[]);return o.length===0&&l.tenantId&&l.localAccountId&&o.push(qo(l.homeAccountId,l.localAccountId,l.tenantId,l.idTokenClaims)),{authorityType:l.authorityType||dC,homeAccountId:l.homeAccountId,localAccountId:l.localAccountId,nativeAccountId:l.nativeAccountId,realm:l.tenantId,environment:l.environment,username:l.username,loginHint:l.loginHint,name:l.name,cloudGraphHostName:n,msGraphHost:a,tenantProfiles:o,dataBoundary:l.dataBoundary}}function PC(l,n,a,o,r,d){if(!(n===Xn.Adfs||n===Xn.Dsts)){if(l)try{const h=Wc(l,o.base64Decode);if(h.uid&&h.utid)return`${h.uid}.${h.utid}`}catch{}a.warning("1ub6wv",r)}return d?.sub||""}function Wb(l){return l?l.hasOwnProperty("homeAccountId")&&l.hasOwnProperty("environment")&&l.hasOwnProperty("realm")&&l.hasOwnProperty("localAccountId")&&l.hasOwnProperty("username")&&l.hasOwnProperty("authorityType"):!1}class uf{constructor(n,a,o,r,d){this.clientId=n,this.cryptoImpl=a,this.commonLogger=o.clone(uu,fl),this.staticAuthorityOptions=d,this.performanceClient=r}getAllAccounts(n={},a){return this.buildTenantProfiles(this.getAccountsFilteredBy(n,a),a,n)}getAccountInfoFilteredBy(n,a){const o=this.getAllAccounts(n,a);return o.length>1?o.sort(d=>d.idTokenClaims?-1:1)[0]:o.length===1?o[0]:null}getBaseAccountInfo(n,a){const o=this.getAccountsFilteredBy(n,a);return o.length>0?Is(o[0]):null}buildTenantProfiles(n,a,o){return n.flatMap(r=>this.getTenantProfilesFromAccountEntity(r,a,o?.tenantId,o))}getTenantedAccountInfoByFilter(n,a,o,r,d){let h=null,f;if(d&&!this.tenantProfileMatchesFilter(o,d))return null;const y=this.getIdToken(n,r,a,o.tenantId);return y&&(f=Vi(y.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(f,d))?null:(h=Pf(n,o,f,y?.secret),h)}getTenantProfilesFromAccountEntity(n,a,o,r){const d=Is(n);let h=d.tenantProfiles||new Map;const f=this.getTokenKeys();if(o){const p=h.get(o);if(p)h=new Map([[o,p]]);else return[]}const y=[];return h.forEach(p=>{const S=this.getTenantedAccountInfoByFilter(d,f,p,a,r);S&&y.push(S)}),y}tenantProfileMatchesFilter(n,a){return!(a.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(n,a.localAccountId)||a.name&&n.name!==a.name||a.isHomeTenant!==void 0&&n.isHomeTenant!==a.isHomeTenant)}idTokenClaimsMatchTenantProfileFilter(n,a){return!(a&&(a.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(n,a.localAccountId)||a.loginHint&&!this.matchLoginHintFromTokenClaims(n,a.loginHint)||a.username&&!this.matchUsername(n.preferred_username,a.username)||a.name&&!this.matchName(n,a.name)||a.sid&&!this.matchSid(n,a.sid)))}async saveCacheRecord(n,a,o,r,d){if(!n)throw Q(Tb);try{n.account&&await this.setAccount(n.account,a,o,r),n.idToken&&d?.idToken!==!1&&await this.setIdTokenCredential(n.idToken,a,o),n.accessToken&&d?.accessToken!==!1&&await this.saveAccessToken(n.accessToken,a,o),n.refreshToken&&d?.refreshToken!==!1&&await this.setRefreshTokenCredential(n.refreshToken,a,o),n.appMetadata&&this.setAppMetadata(n.appMetadata,a)}catch(h){throw this.commonLogger?.error("0j476p",a),h instanceof tt?h:cf(h)}}async saveAccessToken(n,a,o){const r={clientId:n.clientId,credentialType:n.credentialType,environment:n.environment,homeAccountId:n.homeAccountId,realm:n.realm,tokenType:n.tokenType},d=this.getTokenKeys(),h=Ft.fromString(n.target);d.accessToken.forEach(f=>{if(!this.accessTokenKeyMatchesFilter(f,r,!1))return;const y=this.getAccessTokenCredential(f,a);y&&this.credentialMatchesFilter(y,r,a)&&Ft.fromString(y.target).intersectingScopeSets(h)&&this.removeAccessToken(f,a)}),await this.setAccessTokenCredential(n,a,o)}getAccountsFilteredBy(n,a){const o=this.getAccountKeys(),r=[];return o.forEach(d=>{const h=this.getAccount(d,a);if(!h||n.homeAccountId&&!this.matchHomeAccountId(h,n.homeAccountId)||n.username&&!this.matchUsername(h.username,n.username)||n.environment&&!this.matchEnvironment(h,n.environment,a)||n.realm&&!this.matchRealm(h,n.realm)||n.nativeAccountId&&!this.matchNativeAccountId(h,n.nativeAccountId)||n.authorityType&&!this.matchAuthorityType(h,n.authorityType))return;const f={localAccountId:n?.localAccountId,name:n?.name},y=h.tenantProfiles?.filter(p=>this.tenantProfileMatchesFilter(p,f));y&&y.length===0||r.push(h)}),r}credentialMatchesFilter(n,a,o){return!(a.clientId&&!this.matchClientId(n,a.clientId)||a.userAssertionHash&&!this.matchUserAssertionHash(n,a.userAssertionHash)||typeof a.homeAccountId=="string"&&!this.matchHomeAccountId(n,a.homeAccountId)||a.environment&&!this.matchEnvironment(n,a.environment,o)||a.realm&&!this.matchRealm(n,a.realm)||a.credentialType&&!this.matchCredentialType(n,a.credentialType)||a.familyId&&!this.matchFamilyId(n,a.familyId)||a.target&&!this.matchTarget(n,a.target)||n.credentialType===Ut.ACCESS_TOKEN_WITH_AUTH_SCHEME&&(a.tokenType&&!this.matchTokenType(n,a.tokenType)||a.tokenType===Xe.SSH&&a.keyId&&!this.matchKeyId(n,a.keyId)))}getAppMetadataFilteredBy(n,a){const o=this.getKeys(),r={};return o.forEach(d=>{if(!this.isAppMetadata(d))return;const h=this.getAppMetadata(d,a);h&&(n.environment&&!this.matchEnvironment(h,n.environment,a)||n.clientId&&!this.matchClientId(h,n.clientId)||(r[d]=h))}),r}getAuthorityMetadataByAlias(n,a){const o=this.getAuthorityMetadataKeys();let r=null;return o.forEach(d=>{if(!this.isAuthorityMetadata(d)||d.indexOf(this.clientId)===-1)return;const h=this.getAuthorityMetadata(d,a);h&&h.aliases.indexOf(n)!==-1&&(r=h)}),r}removeAllAccounts(n){this.getAllAccounts({},n).forEach(o=>{this.removeAccount(o,n)})}removeAccount(n,a){this.removeAccountContext(n,a);const o=this.getAccountKeys(),r=d=>d.includes(n.homeAccountId)&&d.includes(n.environment);o.filter(r).forEach(d=>{this.removeItem(d,a),this.performanceClient.incrementFields({accountsRemoved:1},a)})}removeAccountContext(n,a){const o=this.getTokenKeys(),r=d=>d.includes(n.homeAccountId)&&d.includes(n.environment);o.idToken.filter(r).forEach(d=>{this.removeIdToken(d,a)}),o.accessToken.filter(r).forEach(d=>{this.removeAccessToken(d,a)}),o.refreshToken.filter(r).forEach(d=>{this.removeRefreshToken(d,a)})}removeAccessToken(n,a){const o=this.getAccessTokenCredential(n,a);if(o&&(this.removeItem(n,a),this.performanceClient.incrementFields({accessTokensRemoved:1},a),o.credentialType.toLowerCase()===Ut.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()&&o.tokenType===Xe.POP)){const d=o.keyId;d&&this.cryptoImpl.removeTokenBindingKey(d,a).catch(()=>{this.commonLogger.error("0cx291",a),this.performanceClient?.incrementFields({removeTokenBindingKeyFailure:1},a)})}}removeAppMetadata(n){return this.getKeys().forEach(o=>{this.isAppMetadata(o)&&this.removeItem(o,n)}),!0}getIdToken(n,a,o,r){this.commonLogger.trace("1drz22",a);const d={homeAccountId:n.homeAccountId,environment:n.environment,credentialType:Ut.ID_TOKEN,clientId:this.clientId,realm:r},h=this.getIdTokensByFilter(d,a,o),f=h.size;if(f<1)return this.commonLogger.info("1atvtd",a),null;if(f>1){let y=h;if(!r){const p=new Map;h.forEach((T,k)=>{T.realm===n.tenantId&&p.set(k,T)});const S=p.size;if(S<1)return this.commonLogger.info("0ooalx",a),h.values().next().value;if(S===1)return this.commonLogger.info("1eq2vc",a),p.values().next().value;y=p}return this.commonLogger.info("1ws328",a),y.forEach((p,S)=>{this.removeIdToken(S,a)}),this.performanceClient.addFields({multiMatchedID:h.size},a),null}return this.commonLogger.info("1sm769",a),h.values().next().value}getIdTokensByFilter(n,a,o){const r=o&&o.idToken||this.getTokenKeys().idToken,d=new Map;return r.forEach(h=>{if(!this.idTokenKeyMatchesFilter(h,{clientId:this.clientId,...n}))return;const f=this.getIdTokenCredential(h,a);f&&this.credentialMatchesFilter(f,n,a)&&d.set(h,f)}),d}idTokenKeyMatchesFilter(n,a){const o=n.toLowerCase();return!(a.clientId&&o.indexOf(a.clientId.toLowerCase())===-1||a.homeAccountId&&o.indexOf(a.homeAccountId.toLowerCase())===-1)}removeIdToken(n,a){this.removeItem(n,a)}removeRefreshToken(n,a){this.removeItem(n,a)}getAccessToken(n,a,o,r){const d=a.correlationId;this.commonLogger.trace("1t7hz1",d);const h=Ft.createSearchScopes(a.scopes),f=a.authenticationScheme||Xe.BEARER,y=f.toLowerCase()!==Xe.BEARER.toLowerCase()?Ut.ACCESS_TOKEN_WITH_AUTH_SCHEME:Ut.ACCESS_TOKEN,p={homeAccountId:n.homeAccountId,environment:n.environment,credentialType:y,clientId:this.clientId,realm:r||n.tenantId,target:h,tokenType:f,keyId:a.sshKid},S=o&&o.accessToken||this.getTokenKeys().accessToken,T=[];S.forEach(N=>{if(this.accessTokenKeyMatchesFilter(N,p,!0)){const F=this.getAccessTokenCredential(N,d);F&&this.credentialMatchesFilter(F,p,d)&&T.push(F)}});const k=T.length;return k<1?(this.commonLogger.info("1nckna",d),null):k>1?(this.commonLogger.info("1wkfwp",d),T.forEach(N=>{this.removeAccessToken(this.generateCredentialKey(N),d)}),this.performanceClient.addFields({multiMatchedAT:T.length},d),null):(this.commonLogger.info("06yt98",d),T[0])}accessTokenKeyMatchesFilter(n,a,o){const r=n.toLowerCase();if(a.clientId&&r.indexOf(a.clientId.toLowerCase())===-1||a.homeAccountId&&r.indexOf(a.homeAccountId.toLowerCase())===-1||a.realm&&r.indexOf(a.realm.toLowerCase())===-1)return!1;if(a.target){const d=a.target.asArray();for(let h=0;h<d.length;h++){if(o&&!r.includes(d[h].toLowerCase()))return!1;if(!o&&r.includes(d[h].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(n,a){const o=this.getTokenKeys(),r=[];return o.accessToken.forEach(d=>{if(!this.accessTokenKeyMatchesFilter(d,n,!0))return;const h=this.getAccessTokenCredential(d,a);h&&this.credentialMatchesFilter(h,n,a)&&r.push(h)}),r}getRefreshToken(n,a,o,r){this.commonLogger.trace("0x53vi",o);const d=a?Yc:void 0,h={homeAccountId:n.homeAccountId,environment:n.environment,credentialType:Ut.REFRESH_TOKEN,clientId:this.clientId,familyId:d},f=r&&r.refreshToken||this.getTokenKeys().refreshToken,y=[];f.forEach(S=>{if(this.refreshTokenKeyMatchesFilter(S,h)){const T=this.getRefreshTokenCredential(S,o);T&&this.credentialMatchesFilter(T,h,o)&&y.push(T)}});const p=y.length;return p<1?(this.commonLogger.info("0dlw11",o),null):(p>1&&this.performanceClient.addFields({multiMatchedRT:p},o),this.commonLogger.info("0wcnep",o),y[0])}refreshTokenKeyMatchesFilter(n,a){const o=n.toLowerCase();return!(a.familyId&&o.indexOf(a.familyId.toLowerCase())===-1||!a.familyId&&a.clientId&&o.indexOf(a.clientId.toLowerCase())===-1||a.homeAccountId&&o.indexOf(a.homeAccountId.toLowerCase())===-1)}readAppMetadataFromCache(n,a){const o={environment:n,clientId:this.clientId},r=this.getAppMetadataFilteredBy(o,a),d=Object.keys(r).map(f=>r[f]),h=d.length;if(h<1)return null;if(h>1)throw Q(yb);return d[0]}isAppMetadataFOCI(n,a){const o=this.readAppMetadataFromCache(n,a);return!!(o&&o.familyId===Yc)}matchHomeAccountId(n,a){return typeof n.homeAccountId=="string"&&a===n.homeAccountId}matchLocalAccountIdFromTokenClaims(n,a){const o=n.oid||n.sub;return a===o}matchLocalAccountIdFromTenantProfile(n,a){return n.localAccountId===a}matchName(n,a){return a.toLowerCase()===n.name?.toLowerCase()}matchUsername(n,a){return!!(n&&typeof n=="string"&&a?.toLowerCase()===n.toLowerCase())}matchUserAssertionHash(n,a){return!!(n.userAssertionHash&&a===n.userAssertionHash)}matchEnvironment(n,a,o){if(this.staticAuthorityOptions){const d=qb(this.staticAuthorityOptions,this.commonLogger,o);if(d.includes(a)&&d.includes(n.environment))return!0}const r=this.getAuthorityMetadataByAlias(a,o);return!!(r&&r.aliases.indexOf(n.environment)>-1)}matchCredentialType(n,a){return n.credentialType&&a.toLowerCase()===n.credentialType.toLowerCase()}matchClientId(n,a){return!!(n.clientId&&a===n.clientId)}matchFamilyId(n,a){return!!(n.familyId&&a===n.familyId)}matchRealm(n,a){return n.realm?.toLowerCase()===a.toLowerCase()}matchNativeAccountId(n,a){return!!(n.nativeAccountId&&a===n.nativeAccountId)}matchLoginHintFromTokenClaims(n,a){return n.login_hint===a||n.preferred_username===a||n.upn===a}matchSid(n,a){return n.sid===a}matchAuthorityType(n,a){return!!(n.authorityType&&a.toLowerCase()===n.authorityType.toLowerCase())}matchTarget(n,a){return n.credentialType!==Ut.ACCESS_TOKEN&&n.credentialType!==Ut.ACCESS_TOKEN_WITH_AUTH_SCHEME||!n.target?!1:Ft.fromString(n.target).containsScopeSet(a)}matchTokenType(n,a){return!!(n.tokenType&&n.tokenType===a)}matchKeyId(n,a){return!!(n.keyId&&n.keyId===a)}isAppMetadata(n){return n.indexOf(_f)!==-1}isAuthorityMetadata(n){return n.indexOf(sf)!==-1}generateAuthorityMetadataCacheKey(n){return`${sf}-${this.clientId}-${n}`}static toObject(n,a){for(const o in a)n[o]=a[o];return n}}class e0 extends uf{async setAccount(){throw Q(Re)}getAccount(){throw Q(Re)}async setIdTokenCredential(){throw Q(Re)}getIdTokenCredential(){throw Q(Re)}async setAccessTokenCredential(){throw Q(Re)}getAccessTokenCredential(){throw Q(Re)}async setRefreshTokenCredential(){throw Q(Re)}getRefreshTokenCredential(){throw Q(Re)}setAppMetadata(){throw Q(Re)}getAppMetadata(){throw Q(Re)}setServerTelemetry(){throw Q(Re)}getServerTelemetry(){throw Q(Re)}setAuthorityMetadata(){throw Q(Re)}getAuthorityMetadata(){throw Q(Re)}getAuthorityMetadataKeys(){throw Q(Re)}setThrottlingCache(){throw Q(Re)}getThrottlingCache(){throw Q(Re)}removeItem(){throw Q(Re)}getKeys(){throw Q(Re)}getAccountKeys(){throw Q(Re)}getTokenKeys(){throw Q(Re)}generateCredentialKey(){throw Q(Re)}generateAccountKey(){throw Q(Re)}}const t0={InProgress:1};class GC{generateId(){return"callback-id"}startMeasurement(n,a){return{end:()=>null,discard:()=>{},add:()=>{},increment:()=>{},event:{eventId:this.generateId(),status:t0.InProgress,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:n,startTimeMs:Date.now(),correlationId:a||""}}}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}}const VC={tokenRenewalOffsetSeconds:mC,preventCorsPreflight:!1},n0={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:rt.Info,correlationId:""},i0={async sendGetRequestAsync(){throw Q(Re)},async sendPostRequestAsync(){throw Q(Re)}},a0={sku:UE,version:fl,cpu:"",os:""},s0={clientSecret:"",clientAssertion:void 0},o0={azureCloudInstance:Kf.None,tenant:`${rC}`},r0={application:{appName:"",appVersion:""}};function Ff({authOptions:l,systemOptions:n,loggerOptions:a,storageInterface:o,networkInterface:r,cryptoInterface:d,clientCredentials:h,libraryInfo:f,telemetry:y,serverTelemetryManager:p,persistencePlugin:S,serializableCache:T}){const k={...n0,...a};return{authOptions:l0(l),systemOptions:{...VC,...n},loggerOptions:k,storageInterface:o||new e0(l.clientId,Zc,new yi(k),new GC),networkInterface:r||i0,cryptoInterface:d||Zc,clientCredentials:h||s0,libraryInfo:{...a0,...f},telemetry:{...r0,...y},serverTelemetryManager:p||null,persistencePlugin:S||null,serializableCache:T||null}}function l0(l){return{clientCapabilities:[],azureCloudOptions:o0,instanceAware:!1,...l}}function FC(l){return l.authOptions.authority.options.protocolMode===dn.OIDC}class Ds extends tt{constructor(n,a,o,r,d){super(n,a,o),this.name="ServerError",this.errorNo=r,this.status=d,Object.setPrototypeOf(this,Ds.prototype)}}const df="no_tokens_found",c0="native_account_unavailable",YC="refresh_token_expired",QC="ux_not_allowed",u0="interaction_required",d0="consent_required",h0="login_required",Yf="bad_token",f0="interrupted_user";const Ev=[u0,d0,h0,Yf,QC,f0],g0=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token","ux_not_allowed","interrupted_user"];class Wn extends tt{constructor(n,a,o,r,d,h,f,y){super(n,a,o),Object.setPrototypeOf(this,Wn.prototype),this.timestamp=r||"",this.traceId=d||"",this.correlationId=h||"",this.claims=f||"",this.name="InteractionRequiredAuthError",this.errorNo=y}}function qC(l,n,a){const o=!!l&&Ev.indexOf(l)>-1,r=!!a&&g0.indexOf(a)>-1,d=!!n&&Ev.some(h=>n.indexOf(h)>-1);return o||d||r}function eu(l,n){return new Wn(l,n)}function m0(l,n,a){const o=p0(l,a);return n?`${o}${tf}${n}`:o}function p0(l,n){if(!l)throw Q(kC);const a={id:l.createNewGuid()};n&&(a.meta=n);const o=JSON.stringify(a);return l.base64Encode(o)}function gl(l,n){if(!l)throw Q(kC);if(!n)throw Q(rl);try{const a=n.split(tf),o=a[0],r=a.length>1?a.slice(1).join(tf):"",d=l(o),h=JSON.parse(d);return{userRequestState:r||"",libraryState:h}}catch{throw Q(rl)}}function ei(){return Math.round(new Date().getTime()/1e3)}function Av(l){return l.getTime()/1e3}function Kc(l){return l?new Date(Number(l)*1e3):new Date}function tu(l,n){const a=Number(l)||0;return ei()+n>a}function bv(l,n){const a=Number(l)+n*24*60*60*1e3;return Date.now()>a}function y0(l){return Number(l)>ei()}const v0="networkClientSendPostRequestAsync",C0="refreshTokenClientExecutePostToTokenEndpoint",S0="authorizationCodeClientExecutePostToTokenEndpoint",T0="refreshTokenClientExecuteTokenRequest",E0="refreshTokenClientAcquireToken",Yh="refreshTokenClientAcquireTokenWithCachedRefreshToken",A0="refreshTokenClientCreateTokenRequestBody",b0="silentFlowClientGenerateResultFromCacheRecord",Qf="getAuthCodeUrl",JC="handleCodeResponseFromServer",w0="authClientExecuteTokenRequest",_0="authClientCreateTokenRequestBody",k0="updateTokenEndpointAuthority",ml="popTokenGenerateCnf",qf="handleServerTokenResponse",I0="authorityResolveEndpointsAsync",O0="authorityGetCloudDiscoveryMetadataFromNetwork",R0="authorityUpdateCloudDiscoveryMetadata",N0="authorityGetEndpointMetadataFromNetwork",M0="authorityUpdateEndpointMetadata",wv="authorityUpdateMetadataWithRegionalInformation",x0="regionDiscoveryDetectRegion",_v="regionDiscoveryGetRegionFromIMDS",D0="regionDiscoveryGetCurrentVersion",U0="cacheManagerGetRefreshToken",j0="setUserData";const $n=(l,n,a,o,r)=>(...d)=>{a.trace("1plfzx",r);const h=o.startMeasurement(n,r);if(r){const f=n+"CallCount";o.incrementFields({[f]:1},r)}try{const f=l(...d);return h.end({success:!0}),a.trace("1g8n6a",r),f}catch(f){a.trace("0cfd8i",r);try{a.trace(JSON.stringify(f),r)}catch{a.trace("00dty7",r)}throw h.end({success:!1},f),f}},K=(l,n,a,o,r)=>(...d)=>{a.trace("1plfzx",r);const h=o.startMeasurement(n,r);if(r){const f=n+"CallCount";o.incrementFields({[f]:1},r)}return l(...d).then(f=>(a.trace("1g8n6a",r),h.end({success:!0}),f)).catch(f=>{a.trace("0cfd8i",r);try{a.trace(JSON.stringify(f),r)}catch{a.trace("00dty7",r)}throw h.end({success:!1},f),f})};const H0={SW:"sw"};class Fo{constructor(n,a){this.cryptoUtils=n,this.performanceClient=a}async generateCnf(n,a){const o=await K(this.generateKid.bind(this),ml,a,this.performanceClient,n.correlationId)(n),r=this.cryptoUtils.base64UrlEncode(JSON.stringify(o));return{kid:o.kid,reqCnfString:r}}async generateKid(n){return{kid:await this.cryptoUtils.getPublicKeyThumbprint(n),xms_ksl:H0.SW}}async signPopToken(n,a,o){return this.signPayload(n,a,o)}async signPayload(n,a,o,r){const{resourceRequestMethod:d,resourceRequestUri:h,shrClaims:f,shrNonce:y,shrOptions:p}=o,T=(h?new Qe(h):void 0)?.getUrlComponents();return this.cryptoUtils.signJwt({at:n,ts:ei(),m:d?.toUpperCase(),u:T?.HostNameAndPort,nonce:y||this.cryptoUtils.createNewGuid(),p:T?.AbsolutePath,q:T?.QueryString?[[],T.QueryString]:void 0,client_claims:f||void 0,...r},a,p,o.correlationId)}}class z0{constructor(n,a){this.cache=n,this.hasChanged=a}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}}function Jf(l,n,a,o,r){return{credentialType:Ut.ID_TOKEN,homeAccountId:l,environment:n,clientId:o,secret:a,realm:r,lastUpdatedAt:Date.now().toString()}}function Xf(l,n,a,o,r,d,h,f,y,p,S,T,k){const N={homeAccountId:l,credentialType:Ut.ACCESS_TOKEN,secret:a,cachedAt:ei().toString(),expiresOn:h.toString(),extendedExpiresOn:f.toString(),environment:n,clientId:o,realm:r,target:d,tokenType:S||Xe.BEARER,lastUpdatedAt:Date.now().toString()};if(T&&(N.userAssertionHash=T),p&&(N.refreshOn=p.toString()),N.tokenType?.toLowerCase()!==Xe.BEARER.toLowerCase())switch(N.credentialType=Ut.ACCESS_TOKEN_WITH_AUTH_SCHEME,N.tokenType){case Xe.POP:const F=Vi(a,y);if(!F?.cnf?.kid)throw Q(Eb);N.keyId=F.cnf.kid;break;case Xe.SSH:N.keyId=k}return N}function L0(l,n,a,o,r,d,h){const f={credentialType:Ut.REFRESH_TOKEN,homeAccountId:l,environment:n,clientId:o,secret:a,lastUpdatedAt:Date.now().toString()};return d&&(f.userAssertionHash=d),r&&(f.familyId=r),h&&(f.expiresOn=h.toString()),f}function du(l){return l.hasOwnProperty("homeAccountId")&&l.hasOwnProperty("environment")&&l.hasOwnProperty("credentialType")&&l.hasOwnProperty("clientId")&&l.hasOwnProperty("secret")}function kv(l){return l?du(l)&&l.hasOwnProperty("realm")&&l.hasOwnProperty("target")&&(l.credentialType===Ut.ACCESS_TOKEN||l.credentialType===Ut.ACCESS_TOKEN_WITH_AUTH_SCHEME):!1}function B0(l){return l?du(l)&&l.hasOwnProperty("realm")&&l.credentialType===Ut.ID_TOKEN:!1}function Iv(l){return l?du(l)&&l.credentialType===Ut.REFRESH_TOKEN:!1}function K0(l,n){const a=l.indexOf(fC)===0;let o=!0;return n&&(o=n.hasOwnProperty("failedRequests")&&n.hasOwnProperty("errors")&&n.hasOwnProperty("cacheHits")),a&&o}function P0(l,n){let a=!1;l&&(a=l.indexOf(gC)===0);let o=!0;return n&&(o=n.hasOwnProperty("throttleTime")),a&&o}function G0({environment:l,clientId:n}){return[_f,l,n].join(hC).toLowerCase()}function V0(l,n){return n?l.indexOf(_f)===0&&n.hasOwnProperty("clientId")&&n.hasOwnProperty("environment"):!1}function F0(l,n){return n?l.indexOf(sf)===0&&n.hasOwnProperty("aliases")&&n.hasOwnProperty("preferred_cache")&&n.hasOwnProperty("preferred_network")&&n.hasOwnProperty("canonical_authority")&&n.hasOwnProperty("authorization_endpoint")&&n.hasOwnProperty("token_endpoint")&&n.hasOwnProperty("issuer")&&n.hasOwnProperty("aliasesFromNetwork")&&n.hasOwnProperty("endpointsFromNetwork")&&n.hasOwnProperty("expiresAt")&&n.hasOwnProperty("jwks_uri"):!1}function Ov(){return ei()+nA}function jc(l,n,a){l.authorization_endpoint=n.authorization_endpoint,l.token_endpoint=n.token_endpoint,l.end_session_endpoint=n.end_session_endpoint,l.issuer=n.issuer,l.endpointsFromNetwork=a,l.jwks_uri=n.jwks_uri}function Qh(l,n,a){l.aliases=n.aliases,l.preferred_cache=n.preferred_cache,l.preferred_network=n.preferred_network,l.aliasesFromNetwork=a}function Rv(l){return l.expiresAt<=ei()}class Os{constructor(n,a,o,r,d,h,f){this.clientId=n,this.cacheStorage=a,this.cryptoObj=o,this.logger=r,this.performanceClient=d,this.serializableCache=h,this.persistencePlugin=f}validateTokenResponse(n,a,o){if(n.error||n.error_description||n.suberror){const r=`Error(s): ${n.error_codes||Xr} - Timestamp: ${n.timestamp||Xr} - Description: ${n.error_description||Xr} - Correlation ID: ${n.correlation_id||Xr} - Trace ID: ${n.trace_id||Xr}`,d=n.error_codes?.length?n.error_codes[0]:void 0,h=new Ds(n.error,r,n.suberror,d,n.status);if(o&&n.status&&n.status>=ZE&&n.status<=$E){this.logger.warning("16ks7j",a);return}else if(o&&n.status&&n.status>=JE&&n.status<=XE){this.logger.warning("0g61x3",a);return}throw qC(n.error,n.error_description,n.suberror)?new Wn(n.error,n.error_description,n.suberror,n.timestamp||"",n.trace_id||"",n.correlation_id||"",n.claims||"",d):h}}async handleServerTokenResponse(n,a,o,r,d,h,f,y,p,S){let T;if(n.id_token){if(T=Vi(n.id_token||"",this.cryptoObj.base64Decode),h&&h.nonce&&T.nonce!==h.nonce)throw Q(mb);if(r.maxAge||r.maxAge===0){const q=T.auth_time;if(!q)throw Q(bC);LC(q,r.maxAge)}}this.homeAccountIdentifier=PC(n.client_info||"",a.authorityType,this.logger,this.cryptoObj,r.correlationId,T);let k;h&&h.state&&(k=gl(this.cryptoObj.base64Decode,h.state)),n.key_id=n.key_id||r.sshKid||void 0;const N=this.generateCacheRecord(n,a,o,r,T,f,h);let F;try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("0jbz5k",r.correlationId),F=new z0(this.serializableCache,!0),await this.persistencePlugin.beforeCacheAccess(F)),y&&!p&&N.account&&this.cacheStorage.getAllAccounts({homeAccountId:N.account.homeAccountId,environment:N.account.environment},r.correlationId).length<1)return this.logger.warning("1gmt66",r.correlationId),this.performanceClient?.addFields({acntLoggedOut:!0},r.correlationId),await Os.generateAuthenticationResult(this.cryptoObj,a,N,!1,r,this.performanceClient,T,k,void 0,S);await this.cacheStorage.saveCacheRecord(N,r.correlationId,ws(T||{}),d,r.storeInCache)}finally{this.persistencePlugin&&this.serializableCache&&F&&(this.logger.verbose("1bh17u",r.correlationId),await this.persistencePlugin.afterCacheAccess(F))}return Os.generateAuthenticationResult(this.cryptoObj,a,N,!1,r,this.performanceClient,T,k,n,S)}generateCacheRecord(n,a,o,r,d,h,f){const y=a.getPreferredCache();if(!y)throw Q(_C);const p=Vf(d);let S,T;n.id_token&&d&&(S=Jf(this.homeAccountIdentifier,y,n.id_token,this.clientId,p||""),T=XC(this.cacheStorage,a,this.homeAccountIdentifier,this.cryptoObj.base64Decode,r.correlationId,d,n.client_info,y,p,f,void 0,this.logger));let k=null;if(n.access_token){const q=n.scope?Ft.fromString(n.scope):new Ft(r.scopes||[]),ye=(typeof n.expires_in=="string"?parseInt(n.expires_in,10):n.expires_in)||0,Z=(typeof n.ext_expires_in=="string"?parseInt(n.ext_expires_in,10):n.ext_expires_in)||0,de=(typeof n.refresh_in=="string"?parseInt(n.refresh_in,10):n.refresh_in)||void 0,ae=o+ye,je=ae+Z,ie=de&&de>0?o+de:void 0;k=Xf(this.homeAccountIdentifier,y,n.access_token,this.clientId,p||a.tenant||"",q.printScopes(),ae,je,this.cryptoObj.base64Decode,ie,n.token_type,h,n.key_id)}let N=null;if(n.refresh_token){let q;if(n.refresh_token_expires_in){const ye=typeof n.refresh_token_expires_in=="string"?parseInt(n.refresh_token_expires_in,10):n.refresh_token_expires_in;q=o+ye,this.performanceClient?.addFields({ntwkRtExpiresOnSeconds:q},r.correlationId)}N=L0(this.homeAccountIdentifier,y,n.refresh_token,this.clientId,n.foci,h,q)}let F=null;return n.foci&&(F={clientId:this.clientId,environment:y,familyId:n.foci}),{account:T,idToken:S,accessToken:k,refreshToken:N,appMetadata:F}}static async generateAuthenticationResult(n,a,o,r,d,h,f,y,p,S){let T="",k=[],N=null,F,q,ye="";if(o.accessToken){if(o.accessToken.tokenType===Xe.POP&&!d.popKid){const je=new Fo(n,h),{secret:ie,keyId:ee}=o.accessToken;if(!ee)throw Q(IC);T=await je.signPopToken(ie,ee,d)}else T=o.accessToken.secret;k=Ft.fromString(o.accessToken.target).asArray(),N=Kc(o.accessToken.expiresOn),F=Kc(o.accessToken.extendedExpiresOn),o.accessToken.refreshOn&&(q=Kc(o.accessToken.refreshOn))}o.appMetadata&&(ye=o.appMetadata.familyId===Yc?Yc:"");const Z=f?.oid||f?.sub||"",de=f?.tid||"";p?.spa_accountid&&o.account&&(o.account.nativeAccountId=p?.spa_accountid);const ae=o.account?Pf(Is(o.account),void 0,f,o.idToken?.secret):null;return{authority:a.canonicalAuthority,uniqueId:Z,tenantId:de,scopes:k,account:ae,idToken:o?.idToken?.secret||"",idTokenClaims:f||{},accessToken:T,fromCache:r,expiresOn:N,extExpiresOn:F,refreshOn:q,correlationId:d.correlationId,requestId:S||"",familyId:ye,tokenType:o.accessToken?.tokenType||"",state:y?y.userRequestState:"",cloudGraphHostName:o.account?.cloudGraphHostName||"",msGraphHost:o.account?.msGraphHost||"",code:p?.spa_code,fromPlatformBroker:!1}}}function XC(l,n,a,o,r,d,h,f,y,p,S,T){T?.verbose("09jz0t",r);const N=l.getAccountKeys().find(de=>de.startsWith(a));let F=null;N&&(F=l.getAccount(N,r));const q=F||Zb({homeAccountId:a,idTokenClaims:d,clientInfo:h,environment:f,cloudGraphHostName:p?.cloud_graph_host_name,msGraphHost:p?.msgraph_host,nativeAccountId:S},n,o),ye=q.tenantProfiles||[],Z=y||q.realm;if(Z&&!ye.find(de=>de.tenantId===Z)){const de=qo(a,q.localAccountId,Z,d);ye.push(de)}return q.tenantProfiles=ye,q}const Zn={HOME_ACCOUNT_ID:"home_account_id",UPN:"UPN"};async function ZC(l,n,a){return typeof l=="string"?l:l({clientId:n,tokenEndpoint:a})}function hu(l,n,a){return{clientId:l,authority:n.authority,scopes:n.scopes,homeAccountIdentifier:a,claims:n.claims,authenticationScheme:n.authenticationScheme,resourceRequestMethod:n.resourceRequestMethod,resourceRequestUri:n.resourceRequestUri,shrClaims:n.shrClaims,sshKid:n.sshKid,embeddedClientId:n.embeddedClientId||n.extraParameters?.clientId}}class gi{static generateThrottlingStorageKey(n){return`${gC}.${JSON.stringify(n)}`}static preProcess(n,a,o){const r=gi.generateThrottlingStorageKey(a),d=n.getThrottlingCache(r,o);if(d){if(d.throttleTime<Date.now()){n.removeItem(r,o);return}throw new Ds(d.errorCodes?.join(" ")||"",d.errorMessage,d.subError)}}static postProcess(n,a,o,r){if(gi.checkResponseStatus(o)||gi.checkResponseForRetryAfter(o)){const d={throttleTime:gi.calculateThrottleTime(parseInt(o.headers[Zt.RETRY_AFTER])),error:o.body.error,errorCodes:o.body.error_codes,errorMessage:o.body.error_description,subError:o.body.suberror};n.setThrottlingCache(gi.generateThrottlingStorageKey(a),d,r)}}static checkResponseStatus(n){return n.status===429||n.status>=500&&n.status<600}static checkResponseForRetryAfter(n){return n.headers?n.headers.hasOwnProperty(Zt.RETRY_AFTER)&&(n.status<200||n.status>=300):!1}static calculateThrottleTime(n){const a=n<=0?0:n,o=Date.now()/1e3;return Math.floor(Math.min(o+(a||lA),o+cA)*1e3)}static removeThrottle(n,a,o,r){const d=hu(a,o,r),h=this.generateThrottlingStorageKey(d);n.removeItem(h,o.correlationId)}}class fu extends tt{constructor(n,a,o){super(n.errorCode,n.errorMessage,n.subError),Object.setPrototypeOf(this,fu.prototype),this.name="NetworkError",this.error=n,this.httpStatus=a,this.responseHeaders=o}}function el(l,n,a,o){return l.errorMessage=`${l.errorMessage}, additionalErrorInfo: error.name:${o?.name}, error.message:${o?.message}`,new fu(l,n,a)}function $C(l,n,a){const o={};if(o[Zt.CONTENT_TYPE]=PE,!n&&a)switch(a.type){case Zn.HOME_ACCOUNT_ID:try{const r=Bo(a.credential);o[Zt.CCS_HEADER]=`Oid:${r.uid}@${r.utid}`}catch{l.verbose("1qhtee","")}break;case Zn.UPN:o[Zt.CCS_HEADER]=`UPN: ${a.credential}`;break}return o}function WC(l,n,a,o){const r=new Map;return l.embeddedClientId&&cu(r,n,a),l.extraQueryParameters&&pi(r,l.extraQueryParameters),hl(r,l.correlationId),lu(r,l.correlationId,o),ll(r)}async function eS(l,n,a,o,r,d,h,f,y,p){const S=await Y0(o,l,{body:n,headers:a},r,d,h,f,y);return p&&S.status<500&&S.status!==429&&p.clearTelemetryCache(),S}async function Y0(l,n,a,o,r,d,h,f){gi.preProcess(r,l,o);let y;try{y=await K(d.sendPostRequestAsync.bind(d),v0,h,f,o)(n,a);const p=y.headers||{};f?.addFields({refreshTokenSize:y.body.refresh_token?.length||0,httpVerToken:p[Zt.X_MS_HTTP_VERSION]||"",requestId:p[Zt.X_MS_REQUEST_ID]||""},o)}catch(p){if(p instanceof fu){const S=p.responseHeaders;throw S&&f?.addFields({httpVerToken:S[Zt.X_MS_HTTP_VERSION]||"",requestId:S[Zt.X_MS_REQUEST_ID]||"",contentTypeHeader:S[Zt.CONTENT_TYPE]||void 0,contentLengthHeader:S[Zt.CONTENT_LENGTH]||void 0,httpStatus:p.httpStatus},o),p.error}throw p instanceof tt?p:Q(db)}return gi.postProcess(r,l,y,o),y}function Q0(l){return l.hasOwnProperty("authorization_endpoint")&&l.hasOwnProperty("token_endpoint")&&l.hasOwnProperty("issuer")&&l.hasOwnProperty("jwks_uri")}function q0(l){return l.hasOwnProperty("tenant_discovery_endpoint")&&l.hasOwnProperty("metadata")}function J0(l){return l.hasOwnProperty("error")&&l.hasOwnProperty("error_description")}class gu{constructor(n,a,o,r){this.networkInterface=n,this.logger=a,this.performanceClient=o,this.correlationId=r}async detectRegion(n,a){let o=n;if(o)a.region_source=Uo.ENVIRONMENT_VARIABLE;else{const r=gu.IMDS_OPTIONS;try{const d=await K(this.getRegionFromIMDS.bind(this),_v,this.logger,this.performanceClient,this.correlationId)(GE,r);if(d.status===ov&&(o=d.body,a.region_source=Uo.IMDS),d.status===rv){const h=await K(this.getCurrentVersion.bind(this),D0,this.logger,this.performanceClient,this.correlationId)(r);if(!h)return a.region_source=Uo.FAILED_AUTO_DETECTION,null;const f=await K(this.getRegionFromIMDS.bind(this),_v,this.logger,this.performanceClient,this.correlationId)(h,r);f.status===ov&&(o=f.body,a.region_source=Uo.IMDS)}}catch{return a.region_source=Uo.FAILED_AUTO_DETECTION,null}}return o||(a.region_source=Uo.FAILED_AUTO_DETECTION),o||null}async getRegionFromIMDS(n,a){return this.networkInterface.sendGetRequestAsync(`${av}?api-version=${n}&format=text`,a,VE)}async getCurrentVersion(n){try{const a=await this.networkInterface.sendGetRequestAsync(`${av}?format=json`,n);return a.status===rv&&a.body&&a.body["newest-versions"]&&a.body["newest-versions"].length>0?a.body["newest-versions"][0]:null}catch{return null}}}gu.IMDS_OPTIONS={headers:{Metadata:"true"}};class ln{constructor(n,a,o,r,d,h,f,y){this.canonicalAuthority=n,this._canonicalAuthority.validateAsUri(),this.networkInterface=a,this.cacheManager=o,this.authorityOptions=r,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=d,this.performanceClient=f,this.correlationId=h,this.managedIdentity=y||!1,this.regionDiscovery=new gu(a,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(n){if(n.HostNameAndPort.endsWith(iv))return Xn.Ciam;const a=n.PathSegments;if(a.length)switch(a[0].toLowerCase()){case HE:return Xn.Adfs;case zE:return Xn.Dsts}return Xn.Default}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(n){this._canonicalAuthority=new Qe(n),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw Q(Ra)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw Q(Ra)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw Q(Ra)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw Q(wb);return this.replacePath(this.metadata.end_session_endpoint)}else throw Q(Ra)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw Q(Ra)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw Q(Ra)}canReplaceTenant(n){return n.PathSegments.length===1&&!ln.reservedTenantDomains.has(n.PathSegments[0])&&this.getAuthorityType(n)===Xn.Default&&this.protocolMode!==dn.OIDC}replaceTenant(n){return n.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(n){let a=n;const r=new Qe(this.metadata.canonical_authority).getUrlComponents(),d=r.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((f,y)=>{let p=d[y];if(y===0&&this.canReplaceTenant(r)){const S=new Qe(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];p!==S&&(this.logger.verbose("1q3g2x",this.correlationId),p=S)}f!==p&&(a=a.replace(`/${p}/`,`/${f}/`))}),this.replaceTenant(a)}get defaultOpenIdConfigurationEndpoint(){const n=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||this.authorityType===Xn.Adfs||this.protocolMode===dn.OIDC&&!this.isAliasOfKnownMicrosoftAuthority(n)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}async resolveEndpointsAsync(){const n=this.getCurrentMetadataEntity(),a=await K(this.updateCloudDiscoveryMetadata.bind(this),R0,this.logger,this.performanceClient,this.correlationId)(n);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,n.preferred_network);const o=await K(this.updateEndpointMetadata.bind(this),M0,this.logger,this.performanceClient,this.correlationId)(n);this.updateCachedMetadata(n,a,{source:o}),this.performanceClient?.addFields({cloudDiscoverySource:a,authorityEndpointSource:o},this.correlationId)}getCurrentMetadataEntity(){let n=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort,this.correlationId);return n||(n={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:Ov(),jwks_uri:""}),n}updateCachedMetadata(n,a,o){a!==qn.CACHE&&o?.source!==qn.CACHE&&(n.expiresAt=Ov(),n.canonical_authority=this.canonicalAuthority);const r=this.cacheManager.generateAuthorityMetadataCacheKey(n.preferred_cache,this.correlationId);this.cacheManager.setAuthorityMetadata(r,n,this.correlationId),this.metadata=n}async updateEndpointMetadata(n){const a=this.updateEndpointMetadataFromLocalSources(n);if(a){if(a.source===qn.HARDCODED_VALUES&&this.authorityOptions.azureRegionConfiguration?.azureRegion&&a.metadata){const r=await K(this.updateMetadataWithRegionalInformation.bind(this),wv,this.logger,this.performanceClient,this.correlationId)(a.metadata);jc(n,r,!1),n.canonical_authority=this.canonicalAuthority}return a.source}let o=await K(this.getEndpointMetadataFromNetwork.bind(this),N0,this.logger,this.performanceClient,this.correlationId)();if(o)return this.authorityOptions.azureRegionConfiguration?.azureRegion&&(o=await K(this.updateMetadataWithRegionalInformation.bind(this),wv,this.logger,this.performanceClient,this.correlationId)(o)),jc(n,o,!0),qn.NETWORK;throw Q(hb,this.defaultOpenIdConfigurationEndpoint)}updateEndpointMetadataFromLocalSources(n){this.logger.verbose("1fi0kc",this.correlationId);const a=this.getEndpointMetadataFromConfig();if(a)return this.logger.verbose("06t0uj",this.correlationId),jc(n,a,!1),{source:qn.CONFIG};this.logger.verbose("151k0p",this.correlationId);const o=this.getEndpointMetadataFromHardcodedValues();if(o)return jc(n,o,!1),{source:qn.HARDCODED_VALUES,metadata:o};this.logger.verbose("1imop5",this.correlationId);const r=Rv(n);return this.isAuthoritySameType(n)&&n.endpointsFromNetwork&&!r?(this.logger.verbose("16uq31",""),{source:qn.CACHE}):(r&&this.logger.verbose("0uoibc",""),null)}isAuthoritySameType(n){return new Qe(n.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch{throw nt(nb)}return null}async getEndpointMetadataFromNetwork(){const n={},a=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose("1y65x6",this.correlationId);try{const o=await this.networkInterface.sendGetRequestAsync(a,n);return Q0(o.body)?o.body:(this.logger.verbose("1koyv8",this.correlationId),null)}catch{return this.logger.verbose("0a9wik",this.correlationId),null}}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in Sv?Sv[this.hostnameAndPort]:null}async updateMetadataWithRegionalInformation(n){const a=this.authorityOptions.azureRegionConfiguration?.azureRegion;if(a){if(a!==FE)return this.regionDiscoveryMetadata.region_outcome=Fh.CONFIGURED_NO_AUTO_DETECTION,this.regionDiscoveryMetadata.region_used=a,ln.replaceWithRegionalInformation(n,a);const o=await K(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),x0,this.logger,this.performanceClient,this.correlationId)(this.authorityOptions.azureRegionConfiguration?.environmentRegion,this.regionDiscoveryMetadata);if(o)return this.regionDiscoveryMetadata.region_outcome=Fh.AUTO_DETECTION_REQUESTED_SUCCESSFUL,this.regionDiscoveryMetadata.region_used=o,ln.replaceWithRegionalInformation(n,o);this.regionDiscoveryMetadata.region_outcome=Fh.AUTO_DETECTION_REQUESTED_FAILED}return n}async updateCloudDiscoveryMetadata(n){const a=this.updateCloudDiscoveryMetadataFromLocalSources(n);if(a)return a;const o=await K(this.getCloudDiscoveryMetadataFromNetwork.bind(this),O0,this.logger,this.performanceClient,this.correlationId)();if(o)return Qh(n,o,!0),qn.NETWORK;throw nt(ib)}updateCloudDiscoveryMetadataFromLocalSources(n){this.logger.verbose("0jhlgt",this.correlationId),this.logger.verbosePii("1fy7uz",this.correlationId),this.logger.verbosePii("08zabj",this.correlationId),this.logger.verbosePii("1o1kv3",this.correlationId);const a=this.getCloudDiscoveryMetadataFromConfig();if(a)return this.logger.verbose("1nakio",this.correlationId),Qh(n,a,!1),qn.CONFIG;this.logger.verbose("1x74aj",this.correlationId);const o=Jb(this.hostnameAndPort);if(o)return this.logger.verbose("0by47c",this.correlationId),Qh(n,o,!1),qn.HARDCODED_VALUES;this.logger.verbose("0r2fzy",this.correlationId);const r=Rv(n);return this.isAuthoritySameType(n)&&n.aliasesFromNetwork&&!r?(this.logger.verbose("1uffgh",""),qn.CACHE):(r&&this.logger.verbose("0uoibc",""),null)}getCloudDiscoveryMetadataFromConfig(){if(this.authorityType===Xn.Ciam)return this.logger.verbose("04y84h",this.correlationId),ln.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("0gszr3",this.correlationId);try{this.logger.verbose("1iifkx",this.correlationId);const n=JSON.parse(this.authorityOptions.cloudDiscoveryMetadata),a=$c(n.metadata,this.hostnameAndPort);if(this.logger.verbose("0q67e3",""),a)return this.logger.verbose("0hzfao",this.correlationId),a;this.logger.verbose("1ajz3u",this.correlationId)}catch{throw this.logger.verbose("1wq5tu",this.correlationId),nt(TC)}}return this.isInKnownAuthorities()?(this.logger.verbose("0mt9al",this.correlationId),ln.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}async getCloudDiscoveryMetadataFromNetwork(){const n=`${LE}${this.canonicalAuthority}oauth2/v2.0/authorize`,a={};let o=null;try{const r=await this.networkInterface.sendGetRequestAsync(n,a);let d,h;if(q0(r.body))d=r.body,h=d.metadata,this.logger.verbosePii("1vglyt",this.correlationId);else if(J0(r.body)){if(this.logger.warning("062uto",this.correlationId),d=r.body,d.error===qE)return this.logger.error("1x90tm",this.correlationId),null;this.logger.warning("0wchdm",this.correlationId),this.logger.warning("1s5mpv",this.correlationId),this.logger.warning("1yhqpw",this.correlationId),h=[]}else return this.logger.error("0768g0",this.correlationId),null;this.logger.verbose("1lrobr",this.correlationId),o=$c(h,this.hostnameAndPort)}catch(r){return r instanceof tt?this.logger.error("0vwhc7",this.correlationId):this.logger.error("0s2z41",this.correlationId),null}return o||(this.logger.warning("0jp28q",this.correlationId),this.logger.verbose("130sd8",this.correlationId),o=ln.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),o}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(a=>a&&Qe.getDomainFromUrl(a).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(n,a){let o;if(a&&a.azureCloudInstance!==Kf.None){const r=a.tenant?a.tenant:rC;o=`${a.azureCloudInstance}/${r}/`}return o||n}static createCloudDiscoveryMetadataFromHost(n){return{preferred_network:n,preferred_cache:n,aliases:[n]}}getPreferredCache(){if(this.managedIdentity)return jE;if(this.discoveryComplete())return this.metadata.preferred_cache;throw Q(Ra)}isAlias(n){return this.metadata.aliases.indexOf(n)>-1}isAliasOfKnownMicrosoftAuthority(n){return KC.has(n)}static isPublicCloudAuthority(n){return QE.indexOf(n)>=0}static buildRegionalAuthorityString(n,a,o){const r=new Qe(n);r.validateAsUri();const d=r.getUrlComponents();let h=`${a}.${d.HostNameAndPort}`;this.isPublicCloudAuthority(d.HostNameAndPort)&&(h=`${a}.${YE}`);const f=Qe.constructAuthorityUriFromObject({...r.getUrlComponents(),HostNameAndPort:h}).urlString;return o?`${f}?${o}`:f}static replaceWithRegionalInformation(n,a){const o={...n};return o.authorization_endpoint=ln.buildRegionalAuthorityString(o.authorization_endpoint,a),o.token_endpoint=ln.buildRegionalAuthorityString(o.token_endpoint,a),o.end_session_endpoint&&(o.end_session_endpoint=ln.buildRegionalAuthorityString(o.end_session_endpoint,a)),o}static transformCIAMAuthority(n){let a=n;const r=new Qe(n).getUrlComponents();if(r.PathSegments.length===0&&r.HostNameAndPort.endsWith(iv)){const d=r.HostNameAndPort.split(".")[0];a=`${a}${d}${BE}`}return a}}ln.reservedTenantDomains=new Set(["{tenant}","{tenantid}",Ua.COMMON,Ua.CONSUMERS,Ua.ORGANIZATIONS]);function X0(l){const o=new Qe(l).getUrlComponents().PathSegments.slice(-1)[0]?.toLowerCase();switch(o){case Ua.COMMON:case Ua.ORGANIZATIONS:case Ua.CONSUMERS:return;default:return o}}function tS(l){return l.endsWith(nf)?l:`${l}${nf}`}function Z0(l){const n=l.cloudDiscoveryMetadata;let a;if(n)try{a=JSON.parse(n)}catch{throw nt(TC)}return{canonicalAuthority:l.authority?tS(l.authority):void 0,knownAuthorities:l.knownAuthorities,cloudDiscoveryMetadata:a}}async function nS(l,n,a,o,r,d,h){const f=ln.transformCIAMAuthority(tS(l)),y=new ln(f,n,a,o,r,d,h);try{return await K(y.resolveEndpointsAsync.bind(y),I0,r,h,d)(),y}catch{throw Q(Ra)}}class iS{constructor(n,a){this.includeRedirectUri=!0,this.config=Ff(n),this.logger=new yi(this.config.loggerOptions,uu,fl),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=a,this.oidcDefaultScopes=this.config.authOptions.authority.options.OIDCOptions?.defaultScopes}async acquireToken(n,a,o){if(!n.code)throw Q(vb);o&&o.cloud_instance_host_name&&await K(this.updateTokenEndpointAuthority.bind(this),k0,this.logger,this.performanceClient,n.correlationId)(o.cloud_instance_host_name,n.correlationId);const r=ei(),d=await K(this.executeTokenRequest.bind(this),w0,this.logger,this.performanceClient,n.correlationId)(this.authority,n,this.serverTelemetryManager),h=d.headers?.[Zt.X_MS_REQUEST_ID],f=new Os(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.performanceClient,this.config.serializableCache,this.config.persistencePlugin);return f.validateTokenResponse(d.body,n.correlationId),K(f.handleServerTokenResponse.bind(f),qf,this.logger,this.performanceClient,n.correlationId)(d.body,this.authority,r,n,a,o,void 0,void 0,void 0,h)}getLogoutUri(n){if(!n)throw nt(tb);const a=this.createLogoutUrlQueryString(n);return Qe.appendQueryString(this.authority.endSessionEndpoint,a)}async executeTokenRequest(n,a,o){const r=WC(a,this.config.authOptions.clientId,this.config.authOptions.redirectUri,this.performanceClient),d=Qe.appendQueryString(n.tokenEndpoint,r),h=await K(this.createTokenRequestBody.bind(this),_0,this.logger,this.performanceClient,a.correlationId)(a);let f;if(a.clientInfo)try{const S=Wc(a.clientInfo,this.cryptoUtils.base64Decode);f={credential:`${S.uid}${af}${S.utid}`,type:Zn.HOME_ACCOUNT_ID}}catch{this.logger.verbose("0wznt3",a.correlationId)}const y=$C(this.logger,this.config.systemOptions.preventCorsPreflight,f||a.ccsCredential),p=hu(this.config.authOptions.clientId,a);return K(eS,S0,this.logger,this.performanceClient,a.correlationId)(d,h,y,p,a.correlationId,this.cacheManager,this.networkClient,this.logger,this.performanceClient,o)}async createTokenRequestBody(n){const a=new Map;if(xf(a,n.embeddedClientId||n.extraParameters?.[ks]||this.config.authOptions.clientId),this.includeRedirectUri)Df(a,n.redirectUri);else if(!n.redirectUri)throw nt(XA);if(Mf(a,n.scopes,!0,this.oidcDefaultScopes),xb(a,n.code),jf(a,this.config.libraryInfo),Hf(a,this.config.telemetry.application),HC(a),this.serverTelemetryManager&&!FC(this.config)&&jC(a,this.serverTelemetryManager),n.codeVerifier&&Ub(a,n.codeVerifier),this.config.clientCredentials.clientSecret&&RC(a,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const r=this.config.clientCredentials.clientAssertion;NC(a,await ZC(r.assertion,this.config.authOptions.clientId,n.resourceRequestUri)),MC(a,r.assertionType)}if(xC(a,uC.AUTHORIZATION_CODE_GRANT),Lf(a),n.authenticationScheme===Xe.POP){const r=new Fo(this.cryptoUtils,this.performanceClient);let d;n.popKid?d=this.cryptoUtils.encodeKid(n.popKid):d=(await K(r.generateCnf.bind(r),ml,this.logger,this.performanceClient,n.correlationId)(n,this.logger)).reqCnfString,Bf(a,d)}else if(n.authenticationScheme===Xe.SSH)if(n.sshJwk)UC(a,n.sshJwk);else throw nt(Rf);(!Bn.isEmptyObj(n.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&Uf(a,n.claims,this.config.authOptions.clientCapabilities);let o;if(n.clientInfo)try{const r=Wc(n.clientInfo,this.cryptoUtils.base64Decode);o={credential:`${r.uid}${af}${r.utid}`,type:Zn.HOME_ACCOUNT_ID}}catch{this.logger.verbose("0wznt3",n.correlationId)}else o=n.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&o)switch(o.type){case Zn.HOME_ACCOUNT_ID:try{const r=Bo(o.credential);tl(a,r)}catch{this.logger.verbose("1qhtee",n.correlationId)}break;case Zn.UPN:Jc(a,o.credential);break}return n.embeddedClientId&&cu(a,this.config.authOptions.clientId,this.config.authOptions.redirectUri),n.extraParameters&&pi(a,n.extraParameters),n.enableSpaAuthorizationCode&&(!n.extraParameters||!n.extraParameters[hv])&&pi(a,{[hv]:"1"}),lu(a,n.correlationId,this.performanceClient),ll(a)}createLogoutUrlQueryString(n){const a=new Map;return n.postLogoutRedirectUri&&Ib(a,n.postLogoutRedirectUri),n.correlationId&&hl(a,n.correlationId),n.idTokenHint&&Ob(a,n.idTokenHint),n.state&&OC(a,n.state),n.logoutHint&&Hb(a,n.logoutHint),n.extraQueryParameters&&pi(a,n.extraQueryParameters),this.config.authOptions.instanceAware&&DC(a),ll(a)}async updateTokenEndpointAuthority(n,a){const o=`https://${n}/${this.authority.tenant}/`,r=await nS(o,this.networkClient,this.cacheManager,this.authority.options,this.logger,a,this.performanceClient);this.authority=r}}const $0=300;class W0{constructor(n,a){this.config=Ff(n),this.logger=new yi(this.config.loggerOptions,uu,fl),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=a}async acquireToken(n,a){const o=ei(),r=await K(this.executeTokenRequest.bind(this),T0,this.logger,this.performanceClient,n.correlationId)(n,this.authority),d=r.headers?.[Zt.X_MS_REQUEST_ID],h=new Os(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.performanceClient,this.config.serializableCache,this.config.persistencePlugin);return h.validateTokenResponse(r.body,n.correlationId),K(h.handleServerTokenResponse.bind(h),qf,this.logger,this.performanceClient,n.correlationId)(r.body,this.authority,o,n,a,void 0,void 0,!0,n.forceCache,d)}async acquireTokenByRefreshToken(n,a){if(!n)throw nt(eb);if(!n.account)throw Q(wC);if(this.cacheManager.isAppMetadataFOCI(n.account.environment,n.correlationId))try{return await K(this.acquireTokenWithCachedRefreshToken.bind(this),Yh,this.logger,this.performanceClient,n.correlationId)(n,!0,a)}catch(r){const d=r instanceof Wn&&r.errorCode===df,h=r instanceof Ds&&r.errorCode===dA&&r.subError===hA;if(d||h)return K(this.acquireTokenWithCachedRefreshToken.bind(this),Yh,this.logger,this.performanceClient,n.correlationId)(n,!1,a);throw r}return K(this.acquireTokenWithCachedRefreshToken.bind(this),Yh,this.logger,this.performanceClient,n.correlationId)(n,!1,a)}async acquireTokenWithCachedRefreshToken(n,a,o){const r=$n(this.cacheManager.getRefreshToken.bind(this.cacheManager),U0,this.logger,this.performanceClient,n.correlationId)(n.account,a,n.correlationId,void 0);if(!r)throw eu(df);if(r.expiresOn){const h=n.refreshTokenExpirationOffsetSeconds||$0;if(this.performanceClient?.addFields({cacheRtExpiresOnSeconds:Number(r.expiresOn),rtOffsetSeconds:h},n.correlationId),tu(r.expiresOn,h))throw eu(YC)}const d={...n,refreshToken:r.secret,authenticationScheme:n.authenticationScheme||Xe.BEARER,ccsCredential:{credential:n.account.homeAccountId,type:Zn.HOME_ACCOUNT_ID}};try{return await K(this.acquireToken.bind(this),E0,this.logger,this.performanceClient,n.correlationId)(d,o)}catch(h){if(h instanceof Wn&&h.subError===Yf){this.logger.verbose("1pg3ap",n.correlationId);const f=this.cacheManager.generateCredentialKey(r);this.cacheManager.removeRefreshToken(f,n.correlationId)}throw h}}async executeTokenRequest(n,a){const o=WC(n,this.config.authOptions.clientId,this.config.authOptions.redirectUri,this.performanceClient),r=Qe.appendQueryString(a.tokenEndpoint,o),d=await K(this.createTokenRequestBody.bind(this),A0,this.logger,this.performanceClient,n.correlationId)(n),h=$C(this.logger,this.config.systemOptions.preventCorsPreflight,n.ccsCredential),f=hu(this.config.authOptions.clientId,n);return K(eS,C0,this.logger,this.performanceClient,n.correlationId)(r,d,h,f,n.correlationId,this.cacheManager,this.networkClient,this.logger,this.performanceClient,this.serverTelemetryManager)}async createTokenRequestBody(n){const a=new Map;if(xf(a,n.embeddedClientId||n.extraParameters?.[ks]||this.config.authOptions.clientId),n.redirectUri&&Df(a,n.redirectUri),Mf(a,n.scopes,!0,this.config.authOptions.authority.options.OIDCOptions?.defaultScopes),xC(a,uC.REFRESH_TOKEN_GRANT),Lf(a),jf(a,this.config.libraryInfo),Hf(a,this.config.telemetry.application),HC(a),this.serverTelemetryManager&&!FC(this.config)&&jC(a,this.serverTelemetryManager),Db(a,n.refreshToken),this.config.clientCredentials.clientSecret&&RC(a,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const o=this.config.clientCredentials.clientAssertion;NC(a,await ZC(o.assertion,this.config.authOptions.clientId,n.resourceRequestUri)),MC(a,o.assertionType)}if(n.authenticationScheme===Xe.POP){const o=new Fo(this.cryptoUtils,this.performanceClient);let r;n.popKid?r=this.cryptoUtils.encodeKid(n.popKid):r=(await K(o.generateCnf.bind(o),ml,this.logger,this.performanceClient,n.correlationId)(n,this.logger)).reqCnfString,Bf(a,r)}else if(n.authenticationScheme===Xe.SSH)if(n.sshJwk)UC(a,n.sshJwk);else throw nt(Rf);if((!Bn.isEmptyObj(n.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&Uf(a,n.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&n.ccsCredential)switch(n.ccsCredential.type){case Zn.HOME_ACCOUNT_ID:try{const o=Bo(n.ccsCredential.credential);tl(a,o)}catch{this.logger.verbose("1qhtee",n.correlationId)}break;case Zn.UPN:Jc(a,n.ccsCredential.credential);break}return n.embeddedClientId&&cu(a,this.config.authOptions.clientId,this.config.authOptions.redirectUri),n.extraParameters&&pi(a,{...n.extraParameters}),lu(a,n.correlationId,this.performanceClient),ll(a)}}class ew{constructor(n,a){this.config=Ff(n),this.logger=new yi(this.config.loggerOptions,uu,fl),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=a}async acquireCachedToken(n){let a=Es.NOT_APPLICABLE;if(n.forceRefresh||!Bn.isEmptyObj(n.claims))throw this.setCacheOutcome(Es.FORCE_REFRESH_OR_CLAIMS,n.correlationId),Q(bs);if(!n.account)throw Q(wC);const o=n.account.tenantId||X0(n.authority),r=this.cacheManager.getTokenKeys(),d=this.cacheManager.getAccessToken(n.account,n,r,o);if(d){if(y0(d.cachedAt)||tu(d.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome(Es.CACHED_ACCESS_TOKEN_EXPIRED,n.correlationId),Q(bs);d.refreshOn&&tu(d.refreshOn,0)&&(a=Es.PROACTIVELY_REFRESHED)}else throw this.setCacheOutcome(Es.NO_CACHED_ACCESS_TOKEN,n.correlationId),Q(bs);const h=n.authority||this.authority.getPreferredCache(),f={account:this.cacheManager.getAccount(this.cacheManager.generateAccountKey(n.account),n.correlationId),accessToken:d,idToken:this.cacheManager.getIdToken(n.account,n.correlationId,r,o),refreshToken:null,appMetadata:this.cacheManager.readAppMetadataFromCache(h,n.correlationId)};return this.setCacheOutcome(a,n.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[await K(this.generateResultFromCacheRecord.bind(this),b0,this.logger,this.performanceClient,n.correlationId)(f,n),a]}setCacheOutcome(n,a){this.serverTelemetryManager?.setCacheOutcome(n),this.performanceClient?.addFields({cacheOutcome:n},a),n!==Es.NOT_APPLICABLE&&this.logger.info("09ingz",a)}async generateResultFromCacheRecord(n,a){let o;if(n.idToken&&(o=Vi(n.idToken.secret,this.config.cryptoInterface.base64Decode)),a.maxAge||a.maxAge===0){const r=o?.auth_time;if(!r)throw Q(bC);LC(r,a.maxAge)}return Os.generateAuthenticationResult(this.cryptoUtils,this.authority,n,!0,a,this.performanceClient,o)}}const tw={sendGetRequestAsync:()=>Promise.reject(Q(Re)),sendPostRequestAsync:()=>Promise.reject(Q(Re))};function nw(l,n,a,o){const r=n.correlationId,d=new Map;xf(d,n.embeddedClientId||n.extraQueryParameters?.[ks]||l.clientId);const h=[...n.scopes||[],...n.extraScopesToConsent||[]];if(Mf(d,h,!0,l.authority.options.OIDCOptions?.defaultScopes),Df(d,n.redirectUri),hl(d,r),_b(d,n.responseMode),Lf(d),n.prompt&&(Nb(d,n.prompt),o?.addFields({prompt:n.prompt},r)),n.domainHint&&(Rb(d,n.domainHint),o?.addFields({domainHintFromRequest:!0},r)),n.prompt!==un.SELECT_ACCOUNT)if(n.sid&&n.prompt===un.NONE)a.verbose("1tvqyx",n.correlationId),pv(d,n.sid),o?.addFields({sidFromRequest:!0},r);else if(n.account){const f=sw(n.account);let y=ow(n.account);if(y&&n.domainHint&&(a.warning("0wkg3v",n.correlationId),y=null),y){a.verbose("1eyfsw",n.correlationId),Uc(d,y),o?.addFields({loginHintFromClaim:!0},r);try{const p=Bo(n.account.homeAccountId);tl(d,p)}catch{a.verbose("12ugck",n.correlationId)}}else if(f&&n.prompt===un.NONE){a.verbose("1rmd8s",n.correlationId),pv(d,f),o?.addFields({sidFromClaim:!0},r);try{const p=Bo(n.account.homeAccountId);tl(d,p)}catch{a.verbose("12ugck",n.correlationId)}}else if(n.loginHint)a.verbose("0y3007",n.correlationId),Uc(d,n.loginHint),Jc(d,n.loginHint),o?.addFields({loginHintFromRequest:!0},r);else if(n.account.username){a.verbose("02f507",n.correlationId),Uc(d,n.account.username),o?.addFields({loginHintFromUpn:!0},r);try{const p=Bo(n.account.homeAccountId);tl(d,p)}catch{a.verbose("12ugck",n.correlationId)}}}else n.loginHint&&(a.verbose("0g01ey",n.correlationId),Uc(d,n.loginHint),Jc(d,n.loginHint),o?.addFields({loginHintFromRequest:!0},r));else a.verbose("169k9v",n.correlationId);return n.nonce&&Mb(d,n.nonce),n.state&&OC(d,n.state),(n.claims||l.clientCapabilities&&l.clientCapabilities.length>0)&&Uf(d,n.claims,l.clientCapabilities),n.embeddedClientId&&cu(d,l.clientId,l.redirectUri),l.instanceAware&&(!n.extraQueryParameters||!Object.keys(n.extraQueryParameters).includes(of))&&DC(d),d}function Zf(l,n){const a=ll(n);return Qe.appendQueryString(l.authorizationEndpoint,a)}function iw(l,n){if(aS(l,n),!l.code)throw Q(Ab);return l}function aS(l,n){if(!l.state||!n)throw l.state?Q(fv,"Cached State"):Q(fv,"Server State");let a,o;try{a=decodeURIComponent(l.state)}catch{throw Q(rl,l.state)}try{o=decodeURIComponent(n)}catch{throw Q(rl,l.state)}if(a!==o)throw Q(gb);if(l.error||l.error_description||l.suberror){const r=aw(l);throw qC(l.error,l.error_description,l.suberror)?new Wn(l.error||"",l.error_description,l.suberror,l.timestamp||"",l.trace_id||"",l.correlation_id||"",l.claims||"",r):new Ds(l.error||"",l.error_description,l.suberror,r)}}function aw(l){const n="code=",a=l.error_uri?.lastIndexOf(n);return a&&a>=0?l.error_uri?.substring(a+n.length):void 0}function sw(l){return l.idTokenClaims?.sid||null}function ow(l){return l.loginHint||l.idTokenClaims?.login_hint||null}const hf="unexpected_error";const Nv=",",sS="|";function rw(l){const{skus:n,libraryName:a,libraryVersion:o,extensionName:r,extensionVersion:d}=l,h=new Map([[0,[a,o]],[2,[r,d]]]);let f=[];if(n?.length){if(f=n.split(Nv),f.length<4)return n}else f=Array.from({length:4},()=>sS);return h.forEach((y,p)=>{y.length===2&&y[0]?.length&&y[1]?.length&&lw({skuArr:f,index:p,skuName:y[0],skuVersion:y[1]})}),f.join(Nv)}function lw(l){const{skuArr:n,index:a,skuName:o,skuVersion:r}=l;a>=n.length||(n[a]=[o,r].join(sS))}class cl{constructor(n,a){this.cacheOutcome=Es.NOT_APPLICABLE,this.cacheManager=a,this.apiId=n.apiId,this.correlationId=n.correlationId,this.wrapperSKU=n.wrapperSKU||"",this.wrapperVer=n.wrapperVer||"",this.telemetryCacheKey=fC+hC+n.clientId}generateCurrentRequestHeaderValue(){const n=`${this.apiId}${Do}${this.cacheOutcome}`,a=[this.wrapperSKU,this.wrapperVer],o=this.getNativeBrokerErrorCode();o?.length&&a.push(`broker_error=${o}`);const r=a.join(Do),d=this.getRegionDiscoveryFields(),h=[n,d].join(Do);return[uv,h,r].join(dv)}generateLastRequestHeaderValue(){const n=this.getLastRequests(),a=cl.maxErrorsToSend(n),o=n.failedRequests.slice(0,2*a).join(Do),r=n.errors.slice(0,a).join(Do),d=n.errors.length,h=a<d?sA:oA,f=[d,h].join(Do);return[uv,n.cacheHits,o,r,f].join(dv)}cacheFailedRequest(n){const a=this.getLastRequests();a.errors.length>=aA&&(a.failedRequests.shift(),a.failedRequests.shift(),a.errors.shift()),a.failedRequests.push(this.apiId,this.correlationId),n instanceof Error&&n&&n.toString()?n instanceof tt?n.subError?a.errors.push(n.subError):n.errorCode?a.errors.push(n.errorCode):a.errors.push(n.toString()):a.errors.push(n.toString()):a.errors.push(rA),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,a,this.correlationId)}incrementCacheHits(){const n=this.getLastRequests();return n.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,n,this.correlationId),n.cacheHits}getLastRequests(){const n={failedRequests:[],errors:[],cacheHits:0};return this.cacheManager.getServerTelemetry(this.telemetryCacheKey,this.correlationId)||n}clearTelemetryCache(){const n=this.getLastRequests(),a=cl.maxErrorsToSend(n),o=n.errors.length;if(a===o)this.cacheManager.removeItem(this.telemetryCacheKey,this.correlationId);else{const r={failedRequests:n.failedRequests.slice(a*2),errors:n.errors.slice(a),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,r,this.correlationId)}}static maxErrorsToSend(n){let a,o=0,r=0;const d=n.errors.length;for(a=0;a<d;a++){const h=n.failedRequests[2*a]||"",f=n.failedRequests[2*a+1]||"",y=n.errors[a]||"";if(r+=h.toString().length+f.toString().length+y.length+3,r<iA)o+=1;else break}return o}getRegionDiscoveryFields(){const n=[];return n.push(this.regionUsed||""),n.push(this.regionSource||""),n.push(this.regionOutcome||""),n.join(",")}updateRegionDiscoveryMetadata(n){this.regionUsed=n.region_used,this.regionSource=n.region_source,this.regionOutcome=n.region_outcome}setCacheOutcome(n){this.cacheOutcome=n}setNativeBrokerErrorCode(n){const a=this.getLastRequests();a.nativeBrokerErrorCode=n,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,a,this.correlationId)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){const n=this.getLastRequests();delete n.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,n,this.correlationId)}static makeExtraSkuString(n){return rw(n)}}class $f extends tt{constructor(n,a){super(n,a),this.name="JoseHeaderError",Object.setPrototypeOf(this,$f.prototype)}}function Mv(l){return new $f(l)}const cw="missing_kid_error",uw="missing_alg_error";class Wf{constructor(n){this.typ=n.typ,this.alg=n.alg,this.kid=n.kid}static getShrHeaderString(n){if(!n.kid)throw Mv(cw);if(!n.alg)throw Mv(uw);const a=new Wf({typ:n.typ||fA.Pop,kid:n.kid,alg:n.alg});return JSON.stringify(a)}}function mu(l){return`See https://aka.ms/msal.js.errors#${l} for details`}class pl extends tt{constructor(n,a){super(n,mu(n),a),Object.setPrototypeOf(this,pl.prototype),this.name="BrowserAuthError"}}function ne(l,n){return new pl(l,n)}const zn={INVALID_GRANT_ERROR:"invalid_grant",POPUP_WIDTH:483,POPUP_HEIGHT:600,POPUP_NAME_PREFIX:"msal",MSAL_SKU:"msal.js.browser"},Ln={CHANNEL_ID:"53ee284d-920a-4b59-9d30-a60315b26836",PREFERRED_EXTENSION_ID:"ppnbnpeolgkicgegkbkbjmhlideopiji",MATS_TELEMETRY:"MATS",MICROSOFT_ENTRA_BROKERID:"MicrosoftEntra",DOM_API_NAME:"DOM API",PLATFORM_DOM_APIS:"get-token-and-sign-out",PLATFORM_DOM_PROVIDER:"PlatformAuthDOMHandler",PLATFORM_EXTENSION_PROVIDER:"PlatformAuthExtensionHandler"},Zr={HandshakeRequest:"Handshake",HandshakeResponse:"HandshakeResponse",GetToken:"GetToken",Response:"Response"},Kn={LocalStorage:"localStorage",SessionStorage:"sessionStorage",MemoryStorage:"memoryStorage"},xv={GET:"GET",POST:"POST"},Ma={SIGNIN:"signin",SIGNOUT:"signout"},Et={ORIGIN_URI:"request.origin",URL_HASH:"urlHash",REQUEST_PARAMS:"request.params",VERIFIER:"code.verifier",INTERACTION_STATUS_KEY:"interaction.status",NATIVE_REQUEST:"request.native"},Hc={WRAPPER_SKU:"wrapper.sku",WRAPPER_VER:"wrapper.version"},Le={acquireTokenRedirect:861,acquireTokenPopup:862,ssoSilent:863,acquireTokenSilent_authCode:864,handleRedirectPromise:865,acquireTokenByCode:866,acquireTokenSilent_silentFlow:61,logout:961,logoutPopup:962,hydrateCache:963,loadExternalTokens:964},Dv={861:"acquireTokenRedirect",862:"acquireTokenPopup",863:"ssoSilent",864:"acquireTokenSilent_authCode",865:"handleRedirectPromise",866:"acquireTokenByCode",61:"acquireTokenSilent_silentFlow",961:"logout",962:"logoutPopup",963:"hydrateCache",964:"loadExternalTokens"},dw=l=>typeof l=="number"&&l in Dv?Dv[l]:"unknown";var ve;(function(l){l.Redirect="redirect",l.Popup="popup",l.Silent="silent",l.None="none"})(ve||(ve={}));const Uv={scopes:Qo},oS="jwk",ff="msal.db",hw=1,fw=`${ff}.keys`,Xt={Default:0,AccessToken:1,AccessTokenAndRefreshToken:2,RefreshToken:3,RefreshTokenAndNetwork:4,Skip:5},gw=[Xt.Default,Xt.Skip,Xt.RefreshTokenAndNetwork];function zc(l){return encodeURIComponent(ul(l).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"))}function za(l){return rS(l).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function ul(l){return rS(new TextEncoder().encode(l))}function rS(l){const n=Array.from(l,a=>String.fromCodePoint(a)).join("");return btoa(n)}const lS="pkce_not_created",cS="ear_jwk_empty",mw="ear_jwe_empty",jv="crypto_nonexistent",eg="empty_navigate_uri",pw="hash_empty_error",tg="no_state_in_hash",yw="hash_does_not_contain_known_properties",uS="unable_to_parse_state",vw="state_interaction_type_mismatch",Cw="interaction_in_progress",Sw="interaction_in_progress_cancelled",Tw="popup_window_error",Ew="empty_window_error",gf="user_cancelled",Aw="redirect_bridge_empty_response",bw="redirect_in_iframe",ww="block_iframe_reload",_w="block_nested_popups",ng="silent_logout_unsupported",kw="no_account_error",Iw="no_token_request_cache_error",Ow="unable_to_parse_token_request_cache_error",dS="non_browser_environment",$r="database_not_open",mf="no_network_connectivity",Rw="post_request_failed",Nw="get_request_failed",Hv="failed_to_parse_response",hS="crypto_key_not_found",Mw="auth_code_required",xw="auth_code_or_nativeAccountId_required",Dw="spa_code_and_nativeAccountId_present",fS="database_unavailable",Uw="unable_to_acquire_token_from_native_platform",jw="native_handshake_timeout",Hw="native_extension_not_installed",gS="native_connection_not_established",Pc="uninitialized_public_client_application",zw="native_prompt_not_supported",Lw="invalid_base64_string",Bw="invalid_pop_token_request",Kw="failed_to_build_headers",Pw="failed_to_parse_headers",qh="failed_to_decrypt_ear_response",nu="timed_out",Gw="empty_response";function _n(l){return new TextDecoder().decode(ja(l))}function ja(l){let n=l.replace(/-/g,"+").replace(/_/g,"/");switch(n.length%4){case 0:break;case 2:n+="==";break;case 3:n+="=";break;default:throw ne(Lw)}const a=atob(n);return Uint8Array.from(a,o=>o.codePointAt(0)||0)}const Vw="RSASSA-PKCS1-v1_5",Jo="AES-GCM",mS="HKDF",ig="SHA-256",Fw=2048,Yw=new Uint8Array([1,0,1]),zv="0123456789abcdef",Lv=new Uint32Array(1),ag="raw",pS="encrypt",sg="decrypt",Qw="deriveKey",qw="crypto_subtle_undefined",og={name:Vw,hash:ig,modulusLength:Fw,publicExponent:Yw};function Jw(l){if(!window)throw ne(dS);if(!window.crypto)throw ne(jv);if(!l&&!window.crypto.subtle)throw ne(jv,qw)}async function yS(l){const a=new TextEncoder().encode(l);return window.crypto.subtle.digest(ig,a)}function Xw(l){return window.crypto.getRandomValues(l)}function Jh(){return window.crypto.getRandomValues(Lv),Lv[0]}function Rs(){const l=Date.now(),n=Jh()*1024+(Jh()&1023),a=new Uint8Array(16),o=Math.trunc(n/2**30),r=n&2**30-1,d=Jh();a[0]=l/2**40,a[1]=l/2**32,a[2]=l/2**24,a[3]=l/2**16,a[4]=l/2**8,a[5]=l,a[6]=112|o>>>8,a[7]=o,a[8]=128|r>>>24,a[9]=r>>>16,a[10]=r>>>8,a[11]=r,a[12]=d>>>24,a[13]=d>>>16,a[14]=d>>>8,a[15]=d;let h="";for(let f=0;f<a.length;f++)h+=zv.charAt(a[f]>>>4),h+=zv.charAt(a[f]&15),(f===3||f===5||f===7||f===9)&&(h+="-");return h}async function Zw(l,n){return window.crypto.subtle.generateKey(og,l,n)}async function Xh(l){return window.crypto.subtle.exportKey(oS,l)}async function $w(l,n,a){return window.crypto.subtle.importKey(oS,l,og,n,a)}async function Ww(l,n){return window.crypto.subtle.sign(og,l,n)}async function rg(){const l=await vS(),a={alg:"dir",kty:"oct",k:za(new Uint8Array(l))};return ul(JSON.stringify(a))}async function e_(l){const n=_n(l),o=JSON.parse(n).k,r=ja(o);return window.crypto.subtle.importKey(ag,r,Jo,!1,[sg])}async function t_(l,n){const a=n.split(".");if(a.length!==5)throw ne(qh,"jwe_length");const o=await e_(l).catch(()=>{throw ne(qh,"import_key")});try{const r=new TextEncoder().encode(a[0]),d=ja(a[2]),h=ja(a[3]),f=ja(a[4]),y=f.byteLength*8,p=new Uint8Array(h.length+f.length);p.set(h),p.set(f,h.length);const S=await window.crypto.subtle.decrypt({name:Jo,iv:d,tagLength:y,additionalData:r},o,p);return new TextDecoder().decode(S)}catch{throw ne(qh,"decrypt")}}async function vS(){const l=await window.crypto.subtle.generateKey({name:Jo,length:256},!0,[pS,sg]);return window.crypto.subtle.exportKey(ag,l)}async function Bv(l){return window.crypto.subtle.importKey(ag,l,mS,!1,[Qw])}async function CS(l,n,a){return window.crypto.subtle.deriveKey({name:mS,salt:n,hash:ig,info:new TextEncoder().encode(a)},l,{name:Jo,length:256},!1,[pS,sg])}async function n_(l,n,a){const o=new TextEncoder().encode(n),r=window.crypto.getRandomValues(new Uint8Array(16)),d=await CS(l,r,a),h=await window.crypto.subtle.encrypt({name:Jo,iv:new Uint8Array(12)},d,o);return{data:za(new Uint8Array(h)),nonce:za(r)}}async function Kv(l,n,a,o){const r=ja(o),d=await CS(l,ja(n),a),h=await window.crypto.subtle.decrypt({name:Jo,iv:new Uint8Array(12)},d,r);return new TextDecoder().decode(h)}async function i_(l){const n=await yS(l),a=new Uint8Array(n);return za(a)}class lg extends tt{constructor(n,a){super(n,a),this.name="BrowserConfigurationAuthError",Object.setPrototypeOf(this,lg.prototype)}}function cg(l){return new lg(l,mu(l))}const SS="storage_not_supported",a_="in_mem_redirect_unavailable";function s_(){const l=window.location.hash,n=window.location.search;let a=!1,o=!1,r="",d;if(l&&l.length>1){const S=l.charAt(0)==="#"?l.substring(1):l,T=new URLSearchParams(S);T.has("state")&&(a=!0,r=S,d=T)}if(n&&n.length>1){const S=n.charAt(0)==="?"?n.substring(1):n,T=new URLSearchParams(S);T.has("state")&&(o=!0,r=S,d=T)}if(a&&o){const S=n.charAt(0)==="?"?n.substring(1):n,T=l.charAt(0)==="#"?l.substring(1):l;r=`${S}${T}`,d=new URLSearchParams(r)}if(!r||!d)throw ne(Gw);const h=d.get("state");if(!h)throw ne(tg);const{libraryState:f}=gl(_n,h),{id:y,meta:p}=f;if(!y||!p)throw ne(uS,"missing_library_state");return{params:d,payload:r,urlHash:l,urlQuery:n,hasResponseInHash:a,hasResponseInQuery:o,libraryState:{id:y,meta:p}}}function TS(l){l.location.hash="",typeof l.history.replaceState=="function"&&l.history.replaceState(null,"",`${l.location.origin}${l.location.pathname}${l.location.search}`)}function o_(l){const n=l.split("#");n.shift(),window.location.hash=n.length>0?n.join("#"):""}function pu(){return window.parent!==window}function r_(){if(pu())return!1;try{const{libraryState:l}=s_(),{meta:n}=l;return n.interactionType===ve.Popup}catch{return!1}}let xa=null;function l_(l,n){xa&&(l.verbose("18y01k",n),clearTimeout(xa.timeoutId),xa.channel.close(),xa.reject(ne(Sw)),xa=null)}async function Ho(l,n,a,o){return new Promise((r,d)=>{n.verbose("1rf6em",o.correlationId);const{libraryState:h}=gl(a.base64Decode,o.state||""),f=new BroadcastChannel(h.id);let y;const p=window.setTimeout(()=>{xa=null,f.close(),d(ne(nu,"redirect_bridge_timeout"))},l);xa={timeoutId:p,channel:f,reject:d},f.onmessage=S=>{y=S.data.payload,xa=null,clearTimeout(p),f.close(),y?r(y):d(ne(Aw))}})}function Da(){return typeof window<"u"&&window.location?window.location.href.split("?")[0].split("#")[0]:""}function c_(){const n=new Qe(window.location.href).getUrlComponents();return`${n.Protocol}//${n.HostNameAndPort}/`}function u_(){if(Xc(window.location.hash)&&pu())throw ne(ww)}function d_(l){if(pu()&&!l)throw ne(bw)}function h_(){if(r_())throw ne(_w)}function ES(){if(typeof window>"u")throw ne(dS)}function AS(l){if(!l)throw ne(Pc)}function ug(l){ES(),u_(),h_(),AS(l)}function Pv(l,n){if(ug(l),d_(n.system.allowRedirectInIframe),n.cache.cacheLocation===Kn.MemoryStorage)throw cg(a_)}function bS(l){const n=document.createElement("link");n.rel="preconnect",n.href=new URL(l).origin,n.crossOrigin="anonymous",document.head.appendChild(n),window.setTimeout(()=>{try{document.head.removeChild(n)}catch{}},1e4)}function pf(){return Rs()}const f_="acquireTokenFromCache",g_="acquireTokenByRefreshToken",m_="acquireTokenSilentAsync",p_="cryptoOptsGetPublicKeyThumbprint",y_="cryptoOptsSignJwt",v_="silentCacheClientAcquireToken",C_="silentIframeClientAcquireToken",S_="awaitConcurrentIframe",T_="silentRefreshClientAcquireToken",_s="standardInteractionClientGetDiscoveredAuthority",wS="nativeInteractionClientAcquireToken",E_="refreshTokenClientAcquireTokenByRefreshToken",Gv="acquireTokenBySilentIframe",dg="initializeBaseRequest",A_="initializeSilentRequest",b_="initializeCache",Vv="silentIframeClientTokenHelper",Zh="silentHandlerInitiateAuthRequest",iu="silentHandlerMonitorIframeForHash",w_="silentHandlerLoadFrameSync",Ha="standardInteractionClientCreateAuthCodeClient",yu="standardInteractionClientGetClientConfiguration",vu="standardInteractionClientInitializeAuthorizationRequest",__="silentFlowClientAcquireCachedToken",k_="getStandardParams",I_="handleCodeResponse",hg="handleResponseEar",_S="handleResponsePlatformBroker",Ko="handleResponseCode",O_="authClientAcquireToken",nl="deserializeResponse",R_="authorityFactoryCreateDiscoveredInstance",N_="acquireTokenByCodeAsync",M_="handleRedirectPromise",x_="handleNativeRedirectPromise",D_="nativeMessageHandlerHandshake",U_="importExistingCache",Ns="generatePkceCodes",j_="generateCodeVerifier",H_="generateCodeChallengeFromVerifier",z_="sha256Digest",L_="getRandomValues",Fv="generateHKDF",B_="generateBaseKey",K_="base64Decode",P_="urlEncodeArr",G_="encrypt",Yv="decrypt",fg="generateEarKey",V_="decryptEarResponse";class F_{constructor(){this.dbName=ff,this.version=hw,this.tableName=fw,this.dbOpen=!1}async open(){return new Promise((n,a)=>{const o=window.indexedDB.open(this.dbName,this.version);o.addEventListener("upgradeneeded",r=>{r.target.result.createObjectStore(this.tableName)}),o.addEventListener("success",r=>{const d=r;this.db=d.target.result,this.dbOpen=!0,n()}),o.addEventListener("error",()=>a(ne(fS)))})}closeConnection(){const n=this.db;n&&this.dbOpen&&(n.close(),this.dbOpen=!1)}async validateDbIsOpen(){if(!this.dbOpen)return this.open()}async getItem(n){return await this.validateDbIsOpen(),new Promise((a,o)=>{if(!this.db)return o(ne($r));const h=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).get(n);h.addEventListener("success",f=>{const y=f;this.closeConnection(),a(y.target.result)}),h.addEventListener("error",f=>{this.closeConnection(),o(f)})})}async setItem(n,a){return await this.validateDbIsOpen(),new Promise((o,r)=>{if(!this.db)return r(ne($r));const f=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).put(a,n);f.addEventListener("success",()=>{this.closeConnection(),o()}),f.addEventListener("error",y=>{this.closeConnection(),r(y)})})}async removeItem(n){return await this.validateDbIsOpen(),new Promise((a,o)=>{if(!this.db)return o(ne($r));const h=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).delete(n);h.addEventListener("success",()=>{this.closeConnection(),a()}),h.addEventListener("error",f=>{this.closeConnection(),o(f)})})}async getKeys(){return await this.validateDbIsOpen(),new Promise((n,a)=>{if(!this.db)return a(ne($r));const d=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).getAllKeys();d.addEventListener("success",h=>{const f=h;this.closeConnection(),n(f.target.result)}),d.addEventListener("error",h=>{this.closeConnection(),a(h)})})}async containsKey(n){return await this.validateDbIsOpen(),new Promise((a,o)=>{if(!this.db)return o(ne($r));const h=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).count(n);h.addEventListener("success",f=>{const y=f;this.closeConnection(),a(y.target.result===1)}),h.addEventListener("error",f=>{this.closeConnection(),o(f)})})}async deleteDatabase(){return this.db&&this.dbOpen&&this.closeConnection(),new Promise((n,a)=>{const o=window.indexedDB.deleteDatabase(ff),r=setTimeout(()=>a(!1),200);o.addEventListener("success",()=>(clearTimeout(r),n(!0))),o.addEventListener("blocked",()=>(clearTimeout(r),n(!0))),o.addEventListener("error",()=>(clearTimeout(r),a(!1)))})}}class Cu{constructor(){this.cache=new Map}async initialize(){}getItem(n){return this.cache.get(n)||null}getUserData(n){return this.getItem(n)}setItem(n,a){this.cache.set(n,a)}async setUserData(n,a){this.setItem(n,a)}removeItem(n){this.cache.delete(n)}getKeys(){const n=[];return this.cache.forEach((a,o)=>{n.push(o)}),n}containsKey(n){return this.cache.has(n)}clear(){this.cache.clear()}decryptData(){return Promise.resolve(null)}}class Y_{constructor(n){this.inMemoryCache=new Cu,this.indexedDBCache=new F_,this.logger=n}handleDatabaseAccessError(n,a){if(n instanceof pl&&n.errorCode===fS)this.logger.error("1wx7zz",a);else throw n}async getItem(n,a){const o=this.inMemoryCache.getItem(n);if(!o)try{return this.logger.verbose("0naxpl",a),await this.indexedDBCache.getItem(n)}catch(r){this.handleDatabaseAccessError(r,a)}return o}async setItem(n,a,o){this.inMemoryCache.setItem(n,a);try{await this.indexedDBCache.setItem(n,a)}catch(r){this.handleDatabaseAccessError(r,o)}}async removeItem(n,a){this.inMemoryCache.removeItem(n);try{await this.indexedDBCache.removeItem(n)}catch(o){this.handleDatabaseAccessError(o,a)}}async getKeys(n){const a=this.inMemoryCache.getKeys();if(a.length===0)try{return this.logger.verbose("1iqrbq",n),await this.indexedDBCache.getKeys()}catch(o){this.handleDatabaseAccessError(o,n)}return a}async containsKey(n,a){const o=this.inMemoryCache.containsKey(n);if(!o)try{return this.logger.verbose("03zl2j",a),await this.indexedDBCache.containsKey(n)}catch(r){this.handleDatabaseAccessError(r,a)}return o}clearInMemory(n){this.logger.verbose("03r21p",n),this.inMemoryCache.clear(),this.logger.verbose("0uksk1",n)}async clearPersistent(n){try{this.logger.verbose("0rdqut",n);const a=await this.indexedDBCache.deleteDatabase();return a&&this.logger.verbose("149ouc",n),a}catch(a){return this.handleDatabaseAccessError(a,n),!1}}}class Yi{constructor(n,a,o){this.logger=n,Jw(o??!1),this.cache=new Y_(this.logger),this.performanceClient=a}createNewGuid(){return Rs()}base64Encode(n){return ul(n)}base64Decode(n){return _n(n)}base64UrlEncode(n){return zc(n)}encodeKid(n){return this.base64UrlEncode(JSON.stringify({kid:n}))}async getPublicKeyThumbprint(n){const a=this.performanceClient?.startMeasurement(p_,n.correlationId),o=await Zw(Yi.EXTRACTABLE,Yi.POP_KEY_USAGES),r=await Xh(o.publicKey),d={e:r.e,kty:r.kty,n:r.n},h=Qv(d),f=await this.hashString(h),y=await Xh(o.privateKey),p=await $w(y,!1,["sign"]);return await this.cache.setItem(f,{privateKey:p,publicKey:o.publicKey,requestMethod:n.resourceRequestMethod,requestUri:n.resourceRequestUri},n.correlationId),a&&a.end({success:!0}),f}async removeTokenBindingKey(n,a){if(await this.cache.removeItem(n,a),await this.cache.containsKey(n,a))throw Q(bb)}async clearKeystore(n){this.cache.clearInMemory(n);try{return await this.cache.clearPersistent(n),!0}catch(a){return a instanceof Error?this.logger.error("1owpn8",n):this.logger.error("0yrmwo",n),!1}}async signJwt(n,a,o,r){const d=this.performanceClient?.startMeasurement(y_,r),h=await this.cache.getItem(a,r||"");if(!h)throw ne(hS);const f=await Xh(h.publicKey),y=Qv(f),p=zc(JSON.stringify({kid:a})),S=Wf.getShrHeaderString({...o?.header,alg:f.alg,kid:p}),T=zc(S);n.cnf={jwk:JSON.parse(y)};const k=zc(JSON.stringify(n)),N=`${T}.${k}`,q=new TextEncoder().encode(N),ye=await Ww(h.privateKey,q),Z=za(new Uint8Array(ye)),de=`${N}.${Z}`;return d&&d.end({success:!0}),de}async hashString(n){return i_(n)}}Yi.POP_KEY_USAGES=["sign","verify"];Yi.EXTRACTABLE=!0;function Qv(l){return JSON.stringify(l,Object.keys(l).sort())}const Q_="acquireTokenSilent",q_="acquireTokenByCode",J_="acquireTokenPopup",X_="acquireTokenPreRedirect",$h="acquireTokenRedirect",Z_="ssoSilent",$_="initializeClientApplication",W_="localStorageUpdated";const jt="msal",gg="browser",qv="|",Vt=2,Gc=2,ek=`${jt}.${gg}.log.level`,tk=`${jt}.${gg}.log.pii`,nk=`${jt}.${gg}.platform.auth.dom`,Jv=`${jt}.version`,Xv="account.keys",Zv="token.keys";function Po(l=Gc){return l<1?`${jt}.${Xv}`:`${jt}.${l}.${Xv}`}function Go(l,n=Vt){return n<1?`${jt}.${Zv}.${l}`:`${jt}.${n}.${Zv}.${l}`}const ik=1440*60*1e3,yf={Lax:"Lax",None:"None"};class kS{initialize(){return Promise.resolve()}getItem(n){const a=`${encodeURIComponent(n)}`,o=document.cookie.split(";");for(let r=0;r<o.length;r++){const d=o[r],[h,...f]=decodeURIComponent(d).trim().split("="),y=f.join("=");if(h===a)return y}return""}getUserData(){throw Q(Re)}setItem(n,a,o,r=!0,d=yf.Lax){let h=`${encodeURIComponent(n)}=${encodeURIComponent(a)};path=/;SameSite=${d};`;if(o){const f=ak(o);h+=`expires=${f};`}(r||d===yf.None)&&(h+="Secure;"),document.cookie=h}async setUserData(){return Promise.reject(Q(Re))}removeItem(n){this.setItem(n,"",-1)}getKeys(){const n=document.cookie.split(";"),a=[];return n.forEach(o=>{const r=decodeURIComponent(o).trim().split("=");a.push(r[0])}),a}containsKey(n){return this.getKeys().includes(n)}decryptData(){return Promise.resolve(null)}}function ak(l){const n=new Date;return new Date(n.getTime()+l*ik).toUTCString()}function Na(l,n){const a=l.getItem(Po(n));return a?JSON.parse(a):[]}function Jn(l,n,a){const o=n.getItem(Go(l,a));if(o){const r=JSON.parse(o);if(r&&r.hasOwnProperty("idToken")&&r.hasOwnProperty("accessToken")&&r.hasOwnProperty("refreshToken"))return r}return{idToken:[],accessToken:[],refreshToken:[]}}function Vc(l){return l.hasOwnProperty("id")&&l.hasOwnProperty("nonce")&&l.hasOwnProperty("data")}const $v="msal.cache.encryption",sk="msal.broadcast.cache";class ok{constructor(n,a,o){if(!window.localStorage)throw cg(SS);this.memoryStorage=new Cu,this.initialized=!1,this.clientId=n,this.logger=a,this.performanceClient=o,this.broadcast=new BroadcastChannel(sk)}async initialize(n){const a=new kS,o=a.getItem($v);let r={key:"",id:""};if(o)try{r=JSON.parse(o)}catch{}if(r.key&&r.id){const d=$n(ja,K_,this.logger,this.performanceClient,n)(r.key);this.encryptionCookie={id:r.id,key:await K(Bv,Fv,this.logger,this.performanceClient,n)(d)}}else{const d=Rs(),h=await K(vS,B_,this.logger,this.performanceClient,n)(),f=$n(za,P_,this.logger,this.performanceClient,n)(new Uint8Array(h));this.encryptionCookie={id:d,key:await K(Bv,Fv,this.logger,this.performanceClient,n)(h)};const y={id:d,key:f};a.setItem($v,JSON.stringify(y),0,!0,yf.None)}await K(this.importExistingCache.bind(this),U_,this.logger,this.performanceClient,n)(n),this.broadcast.addEventListener("message",d=>{this.updateCache(d,n)}),this.initialized=!0}getItem(n){return window.localStorage.getItem(n)}getUserData(n){if(!this.initialized)throw ne(Pc);return this.memoryStorage.getItem(n)}async decryptData(n,a,o){if(!this.initialized||!this.encryptionCookie)throw ne(Pc);if(a.id!==this.encryptionCookie.id)return this.performanceClient.incrementFields({encryptedCacheExpiredCount:1},o),null;const r=await K(Kv,Yv,this.logger,this.performanceClient,o)(this.encryptionCookie.key,a.nonce,this.getContext(n),a.data);if(!r)return null;try{return{...JSON.parse(r),lastUpdatedAt:a.lastUpdatedAt}}catch{return this.performanceClient.incrementFields({encryptedCacheCorruptionCount:1},o),null}}setItem(n,a){window.localStorage.setItem(n,a)}async setUserData(n,a,o,r,d){if(!this.initialized||!this.encryptionCookie)throw ne(Pc);if(d)this.setItem(n,a);else{const{data:h,nonce:f}=await K(n_,G_,this.logger,this.performanceClient,o)(this.encryptionCookie.key,a,this.getContext(n)),y={id:this.encryptionCookie.id,nonce:f,data:h,lastUpdatedAt:r};this.setItem(n,JSON.stringify(y))}this.memoryStorage.setItem(n,a),this.broadcast.postMessage({key:n,value:a,context:this.getContext(n)})}removeItem(n){this.memoryStorage.containsKey(n)&&(this.memoryStorage.removeItem(n),this.broadcast.postMessage({key:n,value:null,context:this.getContext(n)})),window.localStorage.removeItem(n)}getKeys(){return Object.keys(window.localStorage)}containsKey(n){return window.localStorage.hasOwnProperty(n)}clear(){this.memoryStorage.clear(),Na(this).forEach(o=>this.removeItem(o));const a=Jn(this.clientId,this);a.idToken.forEach(o=>this.removeItem(o)),a.accessToken.forEach(o=>this.removeItem(o)),a.refreshToken.forEach(o=>this.removeItem(o)),this.getKeys().forEach(o=>{(o.startsWith(jt)||o.indexOf(this.clientId)!==-1)&&this.removeItem(o)})}async importExistingCache(n){if(!this.encryptionCookie)return;let a=Na(this);a=await this.importArray(a,n),a.length?this.setItem(Po(),JSON.stringify(a)):this.removeItem(Po());const o=Jn(this.clientId,this);o.idToken=await this.importArray(o.idToken,n),o.accessToken=await this.importArray(o.accessToken,n),o.refreshToken=await this.importArray(o.refreshToken,n),o.idToken.length||o.accessToken.length||o.refreshToken.length?this.setItem(Go(this.clientId),JSON.stringify(o)):this.removeItem(Go(this.clientId))}async getItemFromEncryptedCache(n,a){if(!this.encryptionCookie)return null;const o=this.getItem(n);if(!o)return null;let r;try{r=JSON.parse(o)}catch{return null}return Vc(r)?r.id!==this.encryptionCookie.id?(this.performanceClient.incrementFields({encryptedCacheExpiredCount:1},a),null):(this.performanceClient.incrementFields({encryptedCacheCount:1},a),K(Kv,Yv,this.logger,this.performanceClient,a)(this.encryptionCookie.key,r.nonce,this.getContext(n),r.data)):(this.performanceClient.incrementFields({unencryptedCacheCount:1},a),o)}async importArray(n,a){const o=[],r=[];return n.forEach(d=>{const h=this.getItemFromEncryptedCache(d,a).then(f=>{f?(this.memoryStorage.setItem(d,f),o.push(d)):this.removeItem(d)});r.push(h)}),await Promise.all(r),o}getContext(n){let a="";return n.includes(this.clientId)&&(a=this.clientId),a}updateCache(n,a){this.logger.trace("17cxcm",a);const o=this.performanceClient.startMeasurement(W_);o.add({isBackground:!0});const{key:r,value:d,context:h}=n.data;if(!r){this.logger.error("0e10qr",a),o.end({success:!1,errorCode:"noKey"});return}if(h&&h!==this.clientId){this.logger.trace("04rtdy",a),o.end({success:!1,errorCode:"contextMismatch"});return}d?(this.memoryStorage.setItem(r,d),this.logger.verbose("1vzsgt",a)):(this.memoryStorage.removeItem(r),this.logger.verbose("04ypih",a)),o.end({success:!0})}}class rk{constructor(){if(!window.sessionStorage)throw cg(SS)}async initialize(){}getItem(n){return window.sessionStorage.getItem(n)}getUserData(n){return this.getItem(n)}setItem(n,a){window.sessionStorage.setItem(n,a)}async setUserData(n,a){this.setItem(n,a)}removeItem(n){window.sessionStorage.removeItem(n)}getKeys(){return Object.keys(window.sessionStorage)}containsKey(n){return window.sessionStorage.hasOwnProperty(n)}decryptData(){return Promise.resolve(null)}}const Se={INITIALIZE_START:"msal:initializeStart",INITIALIZE_END:"msal:initializeEnd",ACTIVE_ACCOUNT_CHANGED:"msal:activeAccountChanged",LOGIN_SUCCESS:"msal:loginSuccess",ACQUIRE_TOKEN_START:"msal:acquireTokenStart",BROKERED_REQUEST_START:"msal:brokeredRequestStart",ACQUIRE_TOKEN_SUCCESS:"msal:acquireTokenSuccess",BROKERED_REQUEST_SUCCESS:"msal:brokeredRequestSuccess",ACQUIRE_TOKEN_FAILURE:"msal:acquireTokenFailure",BROKERED_REQUEST_FAILURE:"msal:brokeredRequestFailure",ACQUIRE_TOKEN_NETWORK_START:"msal:acquireTokenFromNetworkStart",HANDLE_REDIRECT_START:"msal:handleRedirectStart",HANDLE_REDIRECT_END:"msal:handleRedirectEnd",POPUP_OPENED:"msal:popupOpened",LOGOUT_START:"msal:logoutStart",LOGOUT_SUCCESS:"msal:logoutSuccess",LOGOUT_FAILURE:"msal:logoutFailure",LOGOUT_END:"msal:logoutEnd",RESTORE_FROM_BFCACHE:"msal:restoreFromBFCache",BROKER_CONNECTION_ESTABLISHED:"msal:brokerConnectionEstablished"};const lk="@azure/msal-browser",Ms="5.3.0";function Ia(l,n){const a=l.indexOf(n);a>-1&&l.splice(a,1)}class vf extends uf{constructor(n,a,o,r,d,h,f){super(n,o,r,d,f),this.cacheConfig=a,this.logger=r,this.internalStorage=new Cu,this.browserStorage=Wv(n,a.cacheLocation,r,d),this.temporaryCacheStorage=Wv(n,Kn.SessionStorage,r,d),this.cookieStorage=new kS,this.eventHandler=h}async initialize(n){this.performanceClient.addFields({cacheLocation:this.cacheConfig.cacheLocation,cacheRetentionDays:this.cacheConfig.cacheRetentionDays},n),await this.browserStorage.initialize(n),await this.migrateExistingCache(n),this.trackVersionChanges(n)}async migrateExistingCache(n){let a=Na(this.browserStorage),o=Jn(this.clientId,this.browserStorage);this.performanceClient.addFields({preMigrateAcntCount:a.length,preMigrateATCount:o.accessToken.length,preMigrateITCount:o.idToken.length,preMigrateRTCount:o.refreshToken.length},n);for(let d=0;d<Gc;d++){const h=d;await this.removeStaleAccounts(d,h,n)}for(let d=0;d<Vt;d++){const h=d;await this.migrateIdTokens(d,h,n)}const r=this.getKMSIValues();for(let d=0;d<Vt;d++)await this.migrateAccessTokens(d,r,n),await this.migrateRefreshTokens(d,r,n);a=Na(this.browserStorage),o=Jn(this.clientId,this.browserStorage),this.performanceClient.addFields({postMigrateAcntCount:a.length,postMigrateATCount:o.accessToken.length,postMigrateITCount:o.idToken.length,postMigrateRTCount:o.refreshToken.length},n)}async updateOldEntry(n,a){const o=this.browserStorage.getItem(n),r=this.validateAndParseJson(o||"");if(!r)return this.browserStorage.removeItem(n),null;if(!r.lastUpdatedAt)r.lastUpdatedAt=Date.now().toString(),this.setItem(n,JSON.stringify(r),a);else if(bv(r.lastUpdatedAt,this.cacheConfig.cacheRetentionDays))return this.browserStorage.removeItem(n),this.performanceClient.incrementFields({expiredCacheRemovedCount:1},a),null;const d=Vc(r)?await this.browserStorage.decryptData(n,r,a):r;return!d||!du(d)?(this.performanceClient.incrementFields({invalidCacheCount:1},a),null):(kv(d)||Iv(d))&&d.expiresOn&&tu(d.expiresOn,mC)?(this.browserStorage.removeItem(n),this.performanceClient.incrementFields({expiredCacheRemovedCount:1},a),null):d}async removeStaleAccounts(n,a,o){const r=Na(this.browserStorage,n);if(r.length!==0){for(const d of[...r]){this.performanceClient.incrementFields({oldAcntCount:1},o);const h=this.browserStorage.getItem(d),f=this.validateAndParseJson(h||"");if(!f){Ia(r,d);continue}if(f.lastUpdatedAt)bv(f.lastUpdatedAt,this.cacheConfig.cacheRetentionDays)&&(await this.removeAccountOldSchema(d,f,a,o),Ia(r,d));else{f.lastUpdatedAt=Date.now().toString(),this.setItem(d,JSON.stringify(f),o);continue}}this.setAccountKeys(r,o,n)}}async removeAccountOldSchema(n,a,o,r){const h=(Vc(a)?await this.browserStorage.decryptData(n,a,r):a)?.homeAccountId;if(h){const f=this.getTokenKeys(o);[...f.idToken].filter(y=>y.includes(h)).forEach(y=>{this.browserStorage.removeItem(y),Ia(f.idToken,y)}),[...f.accessToken].filter(y=>y.includes(h)).forEach(y=>{this.browserStorage.removeItem(y),Ia(f.accessToken,y)}),[...f.refreshToken].filter(y=>y.includes(h)).forEach(y=>{this.browserStorage.removeItem(y),Ia(f.refreshToken,y)}),this.setTokenKeys(f,r,o)}this.performanceClient.incrementFields({expiredAcntRemovedCount:1},r),this.browserStorage.removeItem(n)}getKMSIValues(){const n={},a=this.getTokenKeys().idToken;for(const o of a){const r=this.browserStorage.getUserData(o);if(r){const d=JSON.parse(r),h=Vi(d.secret,_n);h&&(n[d.homeAccountId]=ws(h))}}return n}async migrateIdTokens(n,a,o){const r=Jn(this.clientId,this.browserStorage,n);if(r.idToken.length===0)return;const d=Jn(this.clientId,this.browserStorage,Vt),h=Na(this.browserStorage),f=Na(this.browserStorage,a);for(const y of[...r.idToken]){this.performanceClient.incrementFields({oldITCount:1},o);const p=await this.updateOldEntry(y,o);if(!p){Ia(r.idToken,y);continue}const S=h.find(de=>de.includes(p.homeAccountId)),T=f.find(de=>de.includes(p.homeAccountId));let k=null;if(S)k=this.getAccount(S,o);else if(T){const de=this.browserStorage.getItem(T),ae=this.validateAndParseJson(de||"");k=ae&&Vc(ae)?await this.browserStorage.decryptData(T,ae,o):ae}if(!k){this.performanceClient.incrementFields({skipITMigrateCount:1},o);continue}const N=Vi(p.secret,_n),F=this.generateCredentialKey(p),q=this.getIdTokenCredential(F,o),ye=Object.keys(N).includes("signin_state"),Z=q&&Object.keys(Vi(q.secret,_n)||{}).includes("signin_state");if(!q||p.lastUpdatedAt>q.lastUpdatedAt&&(ye||!Z)){const de=k.tenantProfiles||[],ae=Vf(N)||k.realm;if(ae&&!de.find(ee=>ee.tenantId===ae)){const ee=qo(k.homeAccountId,k.localAccountId,ae,N);de.push(ee)}k.tenantProfiles=de;const je=this.generateAccountKey(Is(k)),ie=ws(N);await this.setUserData(je,JSON.stringify(k),o,k.lastUpdatedAt,ie),h.includes(je)||h.push(je),await this.setUserData(F,JSON.stringify(p),o,p.lastUpdatedAt,ie),this.performanceClient.incrementFields({migratedITCount:1},o),d.idToken.push(F)}}this.setTokenKeys(r,o,n),this.setTokenKeys(d,o),this.setAccountKeys(h,o)}async migrateAccessTokens(n,a,o){const r=Jn(this.clientId,this.browserStorage,n);if(r.accessToken.length===0)return;const d=Jn(this.clientId,this.browserStorage,Vt);for(const h of[...r.accessToken]){this.performanceClient.incrementFields({oldATCount:1},o);const f=await this.updateOldEntry(h,o);if(!f){Ia(r.accessToken,h);continue}if(!(f.homeAccountId in a)){this.performanceClient.incrementFields({skipATMigrateCount:1},o);continue}const y=this.generateCredentialKey(f),p=a[f.homeAccountId];if(!d.accessToken.includes(y))await this.setUserData(y,JSON.stringify(f),o,f.lastUpdatedAt,p),this.performanceClient.incrementFields({migratedATCount:1},o),d.accessToken.push(y);else{const S=this.getAccessTokenCredential(y,o);(!S||f.lastUpdatedAt>S.lastUpdatedAt)&&(await this.setUserData(y,JSON.stringify(f),o,f.lastUpdatedAt,p),this.performanceClient.incrementFields({migratedATCount:1},o))}}this.setTokenKeys(r,o,n),this.setTokenKeys(d,o)}async migrateRefreshTokens(n,a,o){const r=Jn(this.clientId,this.browserStorage,n);if(r.refreshToken.length===0)return;const d=Jn(this.clientId,this.browserStorage,Vt);for(const h of[...r.refreshToken]){this.performanceClient.incrementFields({oldRTCount:1},o);const f=await this.updateOldEntry(h,o);if(!f){Ia(r.refreshToken,h);continue}if(!(f.homeAccountId in a)){this.performanceClient.incrementFields({skipRTMigrateCount:1},o);continue}const y=this.generateCredentialKey(f),p=a[f.homeAccountId];if(!d.refreshToken.includes(y))await this.setUserData(y,JSON.stringify(f),o,f.lastUpdatedAt,p),this.performanceClient.incrementFields({migratedRTCount:1},o),d.refreshToken.push(y);else{const S=this.getRefreshTokenCredential(y,o);(!S||f.lastUpdatedAt>S.lastUpdatedAt)&&(await this.setUserData(y,JSON.stringify(f),o,f.lastUpdatedAt,p),this.performanceClient.incrementFields({migratedRTCount:1},o))}}this.setTokenKeys(r,o,n),this.setTokenKeys(d,o)}trackVersionChanges(n){const a=this.browserStorage.getItem(Jv);a&&(this.logger.info("1wuc87",n),this.performanceClient.addFields({previousLibraryVersion:a},n)),a!==Ms&&this.setItem(Jv,Ms,n)}validateAndParseJson(n){if(!n)return null;try{const a=JSON.parse(n);return a&&typeof a=="object"?a:null}catch{return null}}setItem(n,a,o){const r=new Array(Vt+1).fill(0),d=[],h=20;for(let f=0;f<=h;f++)try{if(this.browserStorage.setItem(n,a),f>0)for(let y=0;y<=Vt;y++){const p=r.slice(0,y).reduce((T,k)=>T+k,0);if(p>=f)break;const S=f>p+r[y]?p+r[y]:f;f>p&&r[y]>0&&this.removeAccessTokenKeys(d.slice(p,S),o,y)}break}catch(y){const p=cf(y);if(p.errorCode===lf&&f<h){if(!d.length)for(let S=0;S<=Vt;S++)if(n===Go(this.clientId,S)){const T=JSON.parse(a).accessToken;d.push(...T),r[S]=T.length}else{const T=this.getTokenKeys(S).accessToken;d.push(...T),r[S]=T.length}if(d.length<=f)throw p;this.removeAccessToken(d[f],o,!1)}else throw p}}async setUserData(n,a,o,r,d){const h=new Array(Vt+1).fill(0),f=[],y=20;for(let p=0;p<=y;p++)try{if(await K(this.browserStorage.setUserData.bind(this.browserStorage),j0,this.logger,this.performanceClient,o)(n,a,o,r,d),p>0)for(let S=0;S<=Vt;S++){const T=h.slice(0,S).reduce((N,F)=>N+F,0);if(T>=p)break;const k=p>T+h[S]?T+h[S]:p;p>T&&h[S]>0&&this.removeAccessTokenKeys(f.slice(T,k),o,S)}break}catch(S){const T=cf(S);if(T.errorCode===lf&&p<y){if(!f.length)for(let k=0;k<=Vt;k++){const N=this.getTokenKeys(k).accessToken;f.push(...N),h[k]=N.length}if(f.length<=p)throw T;this.removeAccessToken(f[p],o,!1)}else throw T}}getAccount(n,a){this.logger.trace("1lfvm6",a);const o=this.browserStorage.getUserData(n);if(!o)return this.removeAccountKeyFromMap(n,a),null;const r=this.validateAndParseJson(o);if(!r||!Wb(r))return null;const d=uf.toObject({},r);return this.performanceClient.addFields({accountCachedBy:dw(d.cachedByApiId)},a),d}async setAccount(n,a,o,r){this.logger.trace("1bz3wr",a);const d=this.generateAccountKey(Is(n)),h=Date.now().toString();n.lastUpdatedAt=h,n.cachedByApiId=r,await this.setUserData(d,JSON.stringify(n),a,h,o),this.addAccountKeyToMap(d,a),this.performanceClient.addFields({kmsi:o},a)}setAccountKeys(n,a,o=Gc){n.length===0?this.removeItem(Po(o)):this.setItem(Po(o),JSON.stringify(n),a)}getAccountKeys(){return Na(this.browserStorage)}addAccountKeyToMap(n,a){this.logger.trace("0rb85k",a),this.logger.tracePii("1l9bdo",a);const o=this.getAccountKeys();return o.indexOf(n)===-1?(o.push(n),this.setItem(Po(),JSON.stringify(o),a),this.logger.verbose("0xia39",a),!0):(this.logger.verbose("0161kk",a),!1)}removeAccountKeyFromMap(n,a){this.logger.trace("1jpigu",a),this.logger.tracePii("1xzspl",a);const o=this.getAccountKeys(),r=o.indexOf(n);r>-1?(o.splice(r,1),this.setAccountKeys(o,a)):this.logger.trace("1dytu2",a)}removeAccount(n,a){const o=this.getActiveAccount(a);o?.homeAccountId===n.homeAccountId&&o?.environment===n.environment&&this.setActiveAccount(null,a),super.removeAccount(n,a),this.removeAccountKeyFromMap(this.generateAccountKey(n),a),this.browserStorage.getKeys().forEach(r=>{r.includes(n.homeAccountId)&&r.includes(n.environment)&&this.browserStorage.removeItem(r)})}removeIdToken(n,a){super.removeIdToken(n,a);const o=this.getTokenKeys(),r=o.idToken.indexOf(n);r>-1&&(this.logger.info("05udv9",a),o.idToken.splice(r,1),this.setTokenKeys(o,a))}removeAccessToken(n,a,o=!0){super.removeAccessToken(n,a),o&&this.removeAccessTokenKeys([n],a)}removeAccessTokenKeys(n,a,o=Vt){this.logger.trace("17o18n",a);const r=this.getTokenKeys(o);let d=0;if(n.forEach(h=>{const f=r.accessToken.indexOf(h);f>-1&&(r.accessToken.splice(f,1),d++)}),d>0){this.logger.info("15i5d5",a),this.setTokenKeys(r,a,o);return}}removeRefreshToken(n,a){super.removeRefreshToken(n,a);const o=this.getTokenKeys(),r=o.refreshToken.indexOf(n);r>-1&&(this.logger.info("1f4fq3",a),o.refreshToken.splice(r,1),this.setTokenKeys(o,a))}getTokenKeys(n=Vt){return Jn(this.clientId,this.browserStorage,n)}setTokenKeys(n,a,o=Vt){if(n.idToken.length===0&&n.accessToken.length===0&&n.refreshToken.length===0){this.removeItem(Go(this.clientId,o));return}else this.setItem(Go(this.clientId,o),JSON.stringify(n),a)}getIdTokenCredential(n,a){const o=this.browserStorage.getUserData(n);if(!o)return this.logger.trace("1jukz6",a),this.removeIdToken(n,a),null;const r=this.validateAndParseJson(o);return!r||!B0(r)?(this.logger.trace("1jukz6",a),null):(this.logger.trace("01ju66",a),r)}async setIdTokenCredential(n,a,o){this.logger.trace("13hjll",a);const r=this.generateCredentialKey(n),d=Date.now().toString();n.lastUpdatedAt=d,await this.setUserData(r,JSON.stringify(n),a,d,o);const h=this.getTokenKeys();h.idToken.indexOf(r)===-1&&(this.logger.info("07jy92",a),h.idToken.push(r),this.setTokenKeys(h,a))}getAccessTokenCredential(n,a){const o=this.browserStorage.getUserData(n);if(!o)return this.logger.trace("0bqvx8",a),this.removeAccessTokenKeys([n],a),null;const r=this.validateAndParseJson(o);return!r||!kv(r)?(this.logger.trace("0bqvx8",a),null):(this.logger.trace("1o81rl",a),r)}async setAccessTokenCredential(n,a,o){this.logger.trace("1pondb",a);const r=this.generateCredentialKey(n),d=Date.now().toString();n.lastUpdatedAt=d,await this.setUserData(r,JSON.stringify(n),a,d,o);const h=this.getTokenKeys(),f=h.accessToken.indexOf(r);f!==-1&&h.accessToken.splice(f,1),this.logger.trace("1onhey",a),h.accessToken.push(r),this.setTokenKeys(h,a)}getRefreshTokenCredential(n,a){const o=this.browserStorage.getUserData(n);if(!o)return this.logger.trace("0jlizt",a),this.removeRefreshToken(n,a),null;const r=this.validateAndParseJson(o);return!r||!Iv(r)?(this.logger.trace("0jlizt",a),null):(this.logger.trace("0nokxi",a),r)}async setRefreshTokenCredential(n,a,o){this.logger.trace("0tcg8d",a);const r=this.generateCredentialKey(n),d=Date.now().toString();n.lastUpdatedAt=d,await this.setUserData(r,JSON.stringify(n),a,d,o);const h=this.getTokenKeys();h.refreshToken.indexOf(r)===-1&&(this.logger.info("0eckjs",a),h.refreshToken.push(r),this.setTokenKeys(h,a))}getAppMetadata(n,a){const o=this.browserStorage.getItem(n);if(!o)return this.logger.trace("1q101h",a),null;const r=this.validateAndParseJson(o);return!r||!V0(n,r)?(this.logger.trace("1q101h",a),null):(this.logger.trace("19pvg2",a),r)}setAppMetadata(n,a){this.logger.trace("0cyma6",a);const o=G0(n);this.setItem(o,JSON.stringify(n),a)}getServerTelemetry(n,a){const o=this.browserStorage.getItem(n);if(!o)return this.logger.trace("0jk19c",a),null;const r=this.validateAndParseJson(o);return!r||!K0(n,r)?(this.logger.trace("0jk19c",a),null):(this.logger.trace("12jguk",a),r)}setServerTelemetry(n,a,o){this.logger.trace("1poh61",o),this.setItem(n,JSON.stringify(a),o)}getAuthorityMetadata(n,a){const o=this.internalStorage.getItem(n);if(!o)return this.logger.trace("1r39oe",a),null;const r=this.validateAndParseJson(o);return r&&F0(n,r)?(this.logger.trace("1ohvk3",a),r):null}getAuthorityMetadataKeys(){return this.internalStorage.getKeys().filter(a=>this.isAuthorityMetadata(a))}setWrapperMetadata(n,a){this.internalStorage.setItem(Hc.WRAPPER_SKU,n),this.internalStorage.setItem(Hc.WRAPPER_VER,a)}getWrapperMetadata(){const n=this.internalStorage.getItem(Hc.WRAPPER_SKU)||"",a=this.internalStorage.getItem(Hc.WRAPPER_VER)||"";return[n,a]}setAuthorityMetadata(n,a,o){this.logger.trace("07w8n2",o),this.internalStorage.setItem(n,JSON.stringify(a))}getActiveAccount(n){const a=this.generateCacheKey(cv.ACTIVE_ACCOUNT_FILTERS),o=this.browserStorage.getItem(a);if(!o)return this.logger.trace("08gw0e",n),null;const r=this.validateAndParseJson(o);return r?(this.logger.trace("1t3ch7",n),this.getAccountInfoFilteredBy({homeAccountId:r.homeAccountId,localAccountId:r.localAccountId,tenantId:r.tenantId},n)):(this.logger.trace("0me1up",n),null)}setActiveAccount(n,a){const o=this.generateCacheKey(cv.ACTIVE_ACCOUNT_FILTERS);if(n){this.logger.verbose("0rsj80",a);const r={homeAccountId:n.homeAccountId,localAccountId:n.localAccountId,tenantId:n.tenantId};this.setItem(o,JSON.stringify(r),a)}else this.logger.verbose("1bp5z5",a),this.browserStorage.removeItem(o);this.eventHandler.emitEvent(Se.ACTIVE_ACCOUNT_CHANGED,a)}getThrottlingCache(n,a){const o=this.browserStorage.getItem(n);if(!o)return this.logger.trace("1h4wa6",a),null;const r=this.validateAndParseJson(o);return!r||!P0(n,r)?(this.logger.trace("1h4wa6",a),null):(this.logger.trace("0of6n8",a),r)}setThrottlingCache(n,a,o){this.logger.trace("0wfgh6",o),this.setItem(n,JSON.stringify(a),o)}getTemporaryCache(n,a,o){const r=o?this.generateCacheKey(n):n,d=this.temporaryCacheStorage.getItem(r);if(!d){if(this.cacheConfig.cacheLocation===Kn.LocalStorage){const h=this.browserStorage.getItem(r);if(h)return this.logger.trace("1yt61y",a),h}return this.logger.trace("1qhy81",a),null}return d}setTemporaryCache(n,a,o){const r=o?this.generateCacheKey(n):n;this.temporaryCacheStorage.setItem(r,a)}removeItem(n){this.browserStorage.removeItem(n)}removeTemporaryItem(n){this.temporaryCacheStorage.removeItem(n)}getKeys(){return this.browserStorage.getKeys()}clear(n){this.removeAllAccounts(n),this.removeAppMetadata(n),this.temporaryCacheStorage.getKeys().forEach(a=>{(a.indexOf(jt)!==-1||a.indexOf(this.clientId)!==-1)&&this.removeTemporaryItem(a)}),this.browserStorage.getKeys().forEach(a=>{(a.indexOf(jt)!==-1||a.indexOf(this.clientId)!==-1)&&this.browserStorage.removeItem(a)}),this.internalStorage.clear()}generateCacheKey(n){return Bn.startsWith(n,jt)?n:`${jt}.${this.clientId}.${n}`}generateCredentialKey(n){const a=n.credentialType===Ut.REFRESH_TOKEN&&n.familyId||n.clientId,o=n.tokenType&&n.tokenType.toLowerCase()!==Xe.BEARER.toLowerCase()?n.tokenType.toLowerCase():"";return[`${jt}.${Vt}`,n.homeAccountId,n.environment,n.credentialType,a,n.realm||"",n.target||"",o].join(qv).toLowerCase()}generateAccountKey(n){const a=n.homeAccountId.split(".")[1];return[`${jt}.${Gc}`,n.homeAccountId,n.environment,a||n.tenantId||""].join(qv).toLowerCase()}resetRequestCache(n){this.logger.trace("0h0ynu",n),this.removeTemporaryItem(this.generateCacheKey(Et.REQUEST_PARAMS)),this.removeTemporaryItem(this.generateCacheKey(Et.VERIFIER)),this.removeTemporaryItem(this.generateCacheKey(Et.ORIGIN_URI)),this.removeTemporaryItem(this.generateCacheKey(Et.URL_HASH)),this.removeTemporaryItem(this.generateCacheKey(Et.NATIVE_REQUEST)),this.setInteractionInProgress(!1,void 0)}cacheAuthorizeRequest(n,a,o){this.logger.trace("1tzef5",a);const r=ul(JSON.stringify(n));if(this.setTemporaryCache(Et.REQUEST_PARAMS,r,!0),o){const d=ul(o);this.setTemporaryCache(Et.VERIFIER,d,!0)}}getCachedRequest(n){this.logger.trace("0uen20",n);const a=this.getTemporaryCache(Et.REQUEST_PARAMS,n,!0);if(!a)throw ne(Iw);const o=this.getTemporaryCache(Et.VERIFIER,n,!0);let r,d="";try{r=JSON.parse(_n(a)),o&&(d=_n(o))}catch{throw this.logger.errorPii("0ewsey",n),this.logger.error("0tvdic",n),ne(Ow)}return[r,d]}getCachedNativeRequest(){this.logger.trace("1yxcdm","");const n=this.getTemporaryCache(Et.NATIVE_REQUEST,"",!0);if(!n)return this.logger.trace("0mnxd4",""),null;const a=this.validateAndParseJson(n);return a||(this.logger.error("0rrkip",""),null)}isInteractionInProgress(n){const a=this.getInteractionInProgress()?.clientId;return n?a===this.clientId:!!a}getInteractionInProgress(){const n=`${jt}.${Et.INTERACTION_STATUS_KEY}`,a=this.getTemporaryCache(n,"",!1);try{return a?JSON.parse(a):null}catch{return this.logger.error("0jjyys",""),this.removeTemporaryItem(n),this.resetRequestCache(""),TS(window),null}}setInteractionInProgress(n,a=Ma.SIGNIN,o=!1,r=""){const d=`${jt}.${Et.INTERACTION_STATUS_KEY}`;if(n){if(this.getInteractionInProgress())if(o)this.logger.warning("1pmscr",r),l_(this.logger,r),this.removeTemporaryItem(d);else throw ne(Cw);this.setTemporaryCache(d,JSON.stringify({clientId:this.clientId,type:a}),!1)}else!n&&this.getInteractionInProgress()?.clientId===this.clientId&&this.removeTemporaryItem(d)}async hydrateCache(n,a){const o=Jf(n.account.homeAccountId,n.account.environment,n.idToken,this.clientId,n.tenantId),r=Xf(n.account.homeAccountId,n.account.environment,n.accessToken,this.clientId,n.tenantId,n.scopes.join(" "),n.expiresOn?Av(n.expiresOn):0,n.extExpiresOn?Av(n.extExpiresOn):0,_n,void 0,n.tokenType,void 0,a.sshKid),d={idToken:o,accessToken:r};return this.saveCacheRecord(d,n.correlationId,ws(Vi(n.idToken,_n)),Le.hydrateCache)}async saveCacheRecord(n,a,o,r,d){try{await super.saveCacheRecord(n,a,o,r,d)}catch(h){if(h instanceof Lo&&this.performanceClient&&a)try{const f=this.getTokenKeys();this.performanceClient.addFields({cacheRtCount:f.refreshToken.length,cacheIdCount:f.idToken.length,cacheAtCount:f.accessToken.length},a)}catch{}throw h}}}function Wv(l,n,a,o){try{switch(n){case Kn.LocalStorage:return new ok(l,a,o);case Kn.SessionStorage:return new rk;case Kn.MemoryStorage:default:break}}catch(r){a.error(r,"")}return new Cu}const ck=(l,n,a,o)=>{const r={cacheLocation:Kn.MemoryStorage,cacheRetentionDays:5};return new vf(l,r,Zc,n,a,o)};function uk(l,n,a,o,r){return l.verbose("1yd030",o),a?n.getAllAccounts(r,o):[]}function dk(l,n,a,o){if(n.trace("0u7b90",o),Object.keys(l).length===0)return n.warning("1kz0cu",o),null;const r=a.getAccountInfoFilteredBy(l,o);return r?(n.verbose("0btgll",o),r):(n.verbose("0ltaj5",o),null)}function hk(l,n,a){n.setActiveAccount(l,a)}function fk(l,n){return l.getActiveAccount(n)}const gk="msal.broadcast.event";class mk{constructor(n){this.eventCallbacks=new Map,this.logger=n||new yi({}),typeof BroadcastChannel<"u"&&(this.broadcastChannel=new BroadcastChannel(gk)),this.invokeCrossTabCallbacks=this.invokeCrossTabCallbacks.bind(this)}addEventCallback(n,a,o){if(typeof window<"u"){const r=o||pf();return this.eventCallbacks.has(r)?(this.logger.error("1578i0",""),null):(this.eventCallbacks.set(r,[n,a||[]]),this.logger.verbose("1cnec4",""),r)}return null}removeEventCallback(n){this.eventCallbacks.delete(n),this.logger.verbose("12zotd","")}emitEvent(n,a,o,r,d){const h={eventType:n,interactionType:o||null,payload:r||null,error:d||null,correlationId:a,timestamp:Date.now()};switch(n){case Se.LOGIN_SUCCESS:case Se.LOGOUT_SUCCESS:case Se.ACTIVE_ACCOUNT_CHANGED:this.broadcastChannel?.postMessage(h)}this.invokeCallbacks(h)}invokeCallbacks(n){this.eventCallbacks.forEach(([a,o],r)=>{(o.length===0||o.includes(n.eventType))&&(this.logger.verbose("15jpwk",""),a.apply(null,[n]))})}invokeCrossTabCallbacks(n){const a=n.data;this.invokeCallbacks(a)}subscribeCrossTab(){this.broadcastChannel?.addEventListener("message",this.invokeCrossTabCallbacks)}unsubscribeCrossTab(){this.broadcastChannel?.removeEventListener("message",this.invokeCrossTabCallbacks)}}class IS{constructor(n,a,o,r,d,h,f,y,p){this.config=n,this.browserStorage=a,this.browserCrypto=o,this.networkClient=this.config.system.networkClient,this.eventHandler=d,this.navigationClient=h,this.platformAuthProvider=p,this.correlationId=y,this.logger=r.clone(zn.MSAL_SKU,Ms),this.performanceClient=f}}function au(l,n,a,o){a.verbose("0bd1la",o);const r=l||n||"";return Qe.getAbsoluteUrl(r,Da())}function hn(l,n,a,o,r,d){r.verbose("1p12tq",a);const h={clientId:n,correlationId:a,apiId:l,forceRefresh:!1,wrapperSKU:o.getWrapperMetadata()[0],wrapperVer:o.getWrapperMetadata()[1]};return new cl(h,o)}async function Fi(l,n,a,o,r,d,h,f,y){const p=f&&f.hasOwnProperty("instance_aware")?f.instance_aware:void 0,S={protocolMode:l.system.protocolMode,OIDCOptions:l.auth.OIDCOptions,knownAuthorities:l.auth.knownAuthorities,cloudDiscoveryMetadata:l.auth.cloudDiscoveryMetadata,authorityMetadata:l.auth.authorityMetadata},T=d||l.auth.authority,k=p?.length?p==="true":l.auth.instanceAware,N=y&&k?l.auth.authority.replace(Qe.getDomainFromUrl(T),y.environment):T,F=ln.generateAuthority(N,h||l.auth.azureCloudOptions),q=await K(nS,R_,r,a,n)(F,l.system.networkClient,o,S,r,n,a);if(y&&!q.isAlias(y.environment))throw nt(rb);return q}async function mg(l,n,a,o,r){if(r)try{l.removeAccount(r,o),a.verbose("0s4z6h",o)}catch{a.error("0mgg1d",o)}else try{a.verbose("0zj631",o),l.clear(o),await n.clearKeystore(o)}catch{a.error("12ih0c",o)}}async function pg(l,n,a,o,r){const d=l.authority||n.auth.authority,h=[...l&&l.scopes||[]],f={...l,correlationId:l.correlationId,authority:d,scopes:h};if(!f.authenticationScheme)f.authenticationScheme=Xe.BEARER,o.verbose("1l4fwv",r);else{if(f.authenticationScheme===Xe.SSH){if(!l.sshJwk)throw nt(Rf);if(!l.sshKid)throw nt(ab)}o.verbose("1ecmns",r)}return f}async function pk(l,n,a,o,r){const d=await K(pg,dg,r,o,l.correlationId)(l,a,o,r,l.correlationId);return{...l,...d,account:n,forceRefresh:l.forceRefresh||!1}}function OS(l,n){let a;const o=l.httpMethod;if(n===dn.EAR){if(o&&o!==zo.POST)throw nt(lb);a=zo.POST}else a=o||zo.GET;return a}class Xo extends IS{initializeLogoutRequest(n){this.logger.verbose("0546u4",this.correlationId);const a={correlationId:this.correlationId,...n};if(n)if(n.logoutHint)this.logger.verbose("12k4l4",this.correlationId);else if(n.account){const o=this.getLogoutHintFromIdTokenClaims(n.account);o&&(this.logger.verbose("0st5di",this.correlationId),a.logoutHint=o)}else this.logger.verbose("0pdtc3",this.correlationId);else this.logger.verbose("07ndze",this.correlationId);return!n||n.postLogoutRedirectUri!==null?n&&n.postLogoutRedirectUri?(this.logger.verbose("1vamm6",a.correlationId),a.postLogoutRedirectUri=Qe.getAbsoluteUrl(n.postLogoutRedirectUri,Da())):this.config.auth.postLogoutRedirectUri===null?this.logger.verbose("15m5g7",a.correlationId):this.config.auth.postLogoutRedirectUri?(this.logger.verbose("1f4xlz",a.correlationId),a.postLogoutRedirectUri=Qe.getAbsoluteUrl(this.config.auth.postLogoutRedirectUri,Da())):(this.logger.verbose("17s5rf",a.correlationId),a.postLogoutRedirectUri=Qe.getAbsoluteUrl(Da(),Da())):this.logger.verbose("0ljv63",a.correlationId),a}getLogoutHintFromIdTokenClaims(n){const a=n.idTokenClaims;if(a){if(a.login_hint)return a.login_hint;this.logger.verbose("0mvp54",this.correlationId)}else this.logger.verbose("1e7bdp",this.correlationId);return null}async createAuthCodeClient(n){const a=await K(this.getClientConfiguration.bind(this),yu,this.logger,this.performanceClient,this.correlationId)(n);return new iS(a,this.performanceClient)}async getClientConfiguration(n){const{serverTelemetryManager:a,requestAuthority:o,requestAzureCloudOptions:r,requestExtraQueryParameters:d,account:h}=n,f=n.authority||await K(Fi,_s,this.logger,this.performanceClient,this.correlationId)(this.config,this.correlationId,this.performanceClient,this.browserStorage,this.logger,o,r,d,h),y=this.config.system.loggerOptions;return{authOptions:{clientId:this.config.auth.clientId,authority:f,clientCapabilities:this.config.auth.clientCapabilities,redirectUri:this.config.auth.redirectUri},systemOptions:{tokenRenewalOffsetSeconds:this.config.system.tokenRenewalOffsetSeconds,preventCorsPreflight:!0},loggerOptions:{loggerCallback:y.loggerCallback,piiLoggingEnabled:y.piiLoggingEnabled,logLevel:y.logLevel,correlationId:this.correlationId},cryptoInterface:this.browserCrypto,networkInterface:this.networkClient,storageInterface:this.browserStorage,serverTelemetryManager:a,libraryInfo:{sku:zn.MSAL_SKU,version:Ms,cpu:"",os:""},telemetry:this.config.telemetry}}}async function Su(l,n,a,o,r,d,h,f){const y=au(l.redirectUri,a.auth.redirectUri,d,f),p={interactionType:n},S=m0(o,l&&l.state||"",p),k={...await K(pg,dg,d,h,f)({...l,correlationId:f},a,h,d,f),redirectUri:y,state:S,nonce:l.nonce||Rs(),responseMode:a.auth.OIDCOptions.responseMode},N={...k,httpMethod:OS(k,a.system.protocolMode)};if(l.loginHint||l.sid)return N;const F=l.account||r.getActiveAccount(f);return F&&(d.verbose("1eqlb3",f),d.verbosePii("0tf99t",f),N.account=F),N}function yk(l,n){if(!n)return null;try{return gl(l.base64Decode,n).libraryState.meta}catch{throw Q(rl)}}function il(l,n,a,o){const r=Xc(l);if(!r)throw zC(l)?(a.error("13pl0s",o),a.errorPii("1097vx",o),ne(yw)):(a.error("18h0l1",o),ne(pw));return r}function vk(l,n,a){if(!l.state)throw ne(tg);const o=yk(n,l.state);if(!o)throw ne(uS);if(o.interactionType!==a)throw ne(vw)}class RS{constructor(n,a,o,r,d){this.authModule=n,this.browserStorage=a,this.authCodeRequest=o,this.logger=r,this.performanceClient=d}async handleCodeResponse(n,a,o){let r;try{r=iw(n,a.state)}catch(d){throw d instanceof Ds&&d.subError===gf?ne(gf):d}return K(this.handleCodeResponseFromServer.bind(this),JC,this.logger,this.performanceClient,a.correlationId)(r,a,o)}async handleCodeResponseFromServer(n,a,o,r=!0){if(this.logger.trace("0mf2hb",a.correlationId),this.authCodeRequest.code=n.code,r&&(n.nonce=a.nonce||void 0),n.state=a.state,n.client_info)this.authCodeRequest.clientInfo=n.client_info;else{const h=this.createCcsCredentials(a);h&&(this.authCodeRequest.ccsCredential=h)}return await K(this.authModule.acquireToken.bind(this.authModule),O_,this.logger,this.performanceClient,a.correlationId)(this.authCodeRequest,o,n)}createCcsCredentials(n){return n.account?{credential:n.account.homeAccountId,type:Zn.HOME_ACCOUNT_ID}:n.loginHint?{credential:n.loginHint,type:Zn.UPN}:null}}const Ck="ContentError",Sk="PageException",Tk="user_switch";const Ek="USER_INTERACTION_REQUIRED",Ak="USER_CANCEL",bk="NO_NETWORK",wk="PERSISTENT_ERROR",_k="DISABLED",kk="ACCOUNT_UNAVAILABLE",Ik="UX_NOT_ALLOWED";const Ok=-2147186943;class mi extends tt{constructor(n,a,o){super(n,a||mu(n)),Object.setPrototypeOf(this,mi.prototype),this.name="NativeAuthError",this.ext=o}}function jo(l){if(l.ext&&l.ext.status&&(l.ext.status===wk||l.ext.status===_k)||l.ext&&l.ext.error&&l.ext.error===Ok)return!0;switch(l.errorCode){case Ck:case Sk:return!0;default:return!1}}function su(l,n,a){if(a&&a.status)switch(a.status){case kk:return eu(c0,mu(l));case Ek:return new Wn(l,n);case Ak:return ne(gf);case bk:return ne(mf);case Ik:return eu(QC)}return new mi(l,n,a)}class NS extends Xo{async acquireToken(n){const a=hn(Le.acquireTokenSilent_silentFlow,this.config.auth.clientId,this.correlationId,this.browserStorage,this.logger),o=await K(this.getClientConfiguration.bind(this),yu,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:a,requestAuthority:n.authority,requestAzureCloudOptions:n.azureCloudOptions,account:n.account}),r=new ew(o,this.performanceClient);this.logger.verbose("0wa871",this.correlationId);try{const h=(await K(r.acquireCachedToken.bind(r),__,this.logger,this.performanceClient,n.correlationId)(n))[0];return this.performanceClient.addFields({fromCache:!0},n.correlationId),h}catch(d){throw d instanceof pl&&d.errorCode===hS&&this.logger.verbose("06wena",this.correlationId),d}}logout(n){this.logger.verbose("1rkurh",this.correlationId);const a=this.initializeLogoutRequest(n);return mg(this.browserStorage,this.browserCrypto,this.logger,this.correlationId,a.account)}}class Fc extends IS{constructor(n,a,o,r,d,h,f,y,p,S,T,k){super(n,a,o,r,d,h,y,k,p),this.apiId=f,this.accountId=S,this.platformAuthProvider=p,this.nativeStorageManager=T,this.silentCacheClient=new NS(n,this.nativeStorageManager,o,r,d,h,y,k,p);const N=this.platformAuthProvider.getExtensionName();this.skus=cl.makeExtraSkuString({libraryName:zn.MSAL_SKU,libraryVersion:Ms,extensionName:N,extensionVersion:this.platformAuthProvider.getExtensionVersion()})}addRequestSKUs(n){n.extraParameters={...n.extraParameters,[QA]:this.skus}}async acquireToken(n,a){this.logger.trace("03qeos",this.correlationId);const o=this.performanceClient.startMeasurement(wS,n.correlationId),r=ei(),d=hn(this.apiId,this.config.auth.clientId,this.correlationId,this.browserStorage,this.logger);try{const h=await this.initializeNativeRequest(n);try{const y=await this.acquireTokensFromCache(this.accountId,h);return o.end({success:!0,isNativeBroker:!1,fromCache:!0}),y}catch(y){if(a===Xt.AccessToken)throw this.logger.info("0eitbc",this.correlationId),y;this.logger.info("0957j1",this.correlationId)}const f=await this.platformAuthProvider.sendMessage(h);return await this.handleNativeResponse(f,h,r).then(y=>(o.end({success:!0,isNativeBroker:!0,requestId:y.requestId}),d.clearNativeBrokerErrorCode(),y)).catch(y=>{throw o.end({success:!1,errorCode:y.errorCode,subErrorCode:y.subError,isNativeBroker:!0}),y})}catch(h){throw h instanceof mi&&d.setNativeBrokerErrorCode(h.errorCode),h}}createSilentCacheRequest(n,a){return{authority:n.authority,correlationId:this.correlationId,scopes:Ft.fromString(n.scope).asArray(),account:a,forceRefresh:!1}}async acquireTokensFromCache(n,a){if(!n)throw this.logger.warning("1ndf3e",this.correlationId),Q(mv);const o=this.browserStorage.getBaseAccountInfo({nativeAccountId:n},a.correlationId);if(!o)throw Q(mv);try{const r=this.createSilentCacheRequest(a,o),d=await this.silentCacheClient.acquireToken(r),h={...o,idTokenClaims:d?.idTokenClaims,idToken:d?.idToken};return{...d,account:h}}catch(r){throw r}}async acquireTokenRedirect(n,a,o){this.logger.trace("0luikq",this.correlationId);const r=await this.initializeNativeRequest(n),d=o?.navigateToLoginRequestUrl??!0;try{await this.platformAuthProvider.sendMessage(r)}catch(y){if(y instanceof mi&&(hn(this.apiId,this.config.auth.clientId,this.correlationId,this.browserStorage,this.logger).setNativeBrokerErrorCode(y.errorCode),jo(y)))throw y}this.browserStorage.setTemporaryCache(Et.NATIVE_REQUEST,JSON.stringify(r),!0);const h={apiId:Le.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},f=d?window.location.href:au(n.redirectUri,this.config.auth.redirectUri,this.logger,this.correlationId);a.end({success:!0}),await this.navigationClient.navigateExternal(f,h)}async handleRedirectPromise(n,a){if(this.logger.trace("1c5lhw",this.correlationId),!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("0le6uv",this.correlationId),null;const o=this.browserStorage.getCachedNativeRequest();if(!o)return this.logger.verbose("0a6zjb",this.correlationId),n&&a&&n?.addFields({errorCode:"no_cached_request"},a),null;const{prompt:r,...d}=o;r&&this.logger.verbose("0ac34v",this.correlationId),this.browserStorage.removeItem(this.browserStorage.generateCacheKey(Et.NATIVE_REQUEST));const h=ei();try{this.logger.verbose("003x5a",this.correlationId);const f=await this.platformAuthProvider.sendMessage(d),y=await this.handleNativeResponse(f,d,h);return hn(this.apiId,this.config.auth.clientId,this.correlationId,this.browserStorage,this.logger).clearNativeBrokerErrorCode(),y}catch(f){throw f}}logout(){return this.logger.trace("0u2sjm",this.correlationId),Promise.reject("Logout not implemented yet")}async handleNativeResponse(n,a,o){this.logger.trace("1bojln",this.correlationId);const r=Vi(n.id_token,_n),d=this.createHomeAccountIdentifier(n,r),h=this.browserStorage.getAccountInfoFilteredBy({nativeAccountId:a.accountId},this.correlationId)?.homeAccountId;if(a.extraParameters?.child_client_id&&n.account.id!==a.accountId)this.logger.info("1ub1in",this.correlationId);else if(d!==h&&n.account.id!==a.accountId)throw su(Tk);const f=await Fi(this.config,this.correlationId,this.performanceClient,this.browserStorage,this.logger,a.authority),y=XC(this.browserStorage,f,d,_n,this.correlationId,r,n.client_info,void 0,r.tid,void 0,n.account.id);n.expires_in=Number(n.expires_in);const p=await this.generateAuthenticationResult(n,a,r,y,f.canonicalAuthority,o);return await this.cacheAccount(y,ws(r)),await this.cacheNativeTokens(n,a,d,r,n.access_token,p.tenantId,o),p}createHomeAccountIdentifier(n,a){return PC(n.client_info||"",Xn.Default,this.logger,this.browserCrypto,this.correlationId,a)}generateScopes(n,a){return a?Ft.fromString(a):Ft.fromString(n)}async generatePopAccessToken(n,a){if(a.tokenType===Xe.POP&&a.signPopToken){if(n.shr)return this.logger.trace("0coqhu",this.correlationId),n.shr;const o=new Fo(this.browserCrypto,this.performanceClient),r={resourceRequestMethod:a.resourceRequestMethod,resourceRequestUri:a.resourceRequestUri,shrClaims:a.shrClaims,shrNonce:a.shrNonce,correlationId:this.correlationId};if(!a.keyId)throw Q(IC);return o.signPopToken(n.access_token,a.keyId,r)}else return n.access_token}async generateAuthenticationResult(n,a,o,r,d,h){const f=this.addTelemetryFromNativeResponse(n.properties.MATS),y=this.generateScopes(a.scope,n.scope),p=n.account.properties||{},S=p.UID||o.oid||o.sub||"",T=p.TenantId||o.tid||"",k=Pf(Is(r),void 0,o,n.id_token);k.nativeAccountId!==n.account.id&&(k.nativeAccountId=n.account.id);const N=await this.generatePopAccessToken(n,a),F=a.tokenType===Xe.POP?Xe.POP:Xe.BEARER;return{authority:d,uniqueId:S,tenantId:T,scopes:y.asArray(),account:k,idToken:n.id_token,idTokenClaims:o,accessToken:N,fromCache:f?this.isResponseFromCache(f):!1,expiresOn:Kc(h+n.expires_in),tokenType:F,correlationId:this.correlationId,state:n.state,fromPlatformBroker:!0}}async cacheAccount(n,a){await this.browserStorage.setAccount(n,this.correlationId,a,this.apiId),this.browserStorage.removeAccountContext(Is(n),this.correlationId)}cacheNativeTokens(n,a,o,r,d,h,f){const y=Jf(o,a.authority,n.id_token||"",a.clientId,r.tid||""),p=a.tokenType===Xe.POP?sv:(typeof n.expires_in=="string"?parseInt(n.expires_in,10):n.expires_in)||0,S=f+p,T=this.generateScopes(n.scope,a.scope),k=Xf(o,a.authority,d,a.clientId,r.tid||h,T.printScopes(),S,0,_n,void 0,a.tokenType,void 0,a.keyId),N={idToken:y,accessToken:k};return this.nativeStorageManager.saveCacheRecord(N,this.correlationId,ws(r),this.apiId,a.storeInCache)}getExpiresInValue(n,a){return n===Xe.POP?sv:(typeof a=="string"?parseInt(a,10):a)||0}addTelemetryFromNativeResponse(n){const a=this.getMATSFromResponse(n);return a?(this.performanceClient.addFields({extensionId:this.platformAuthProvider.getExtensionId(),extensionVersion:this.platformAuthProvider.getExtensionVersion(),matsBrokerVersion:a.broker_version,matsAccountJoinOnStart:a.account_join_on_start,matsAccountJoinOnEnd:a.account_join_on_end,matsDeviceJoin:a.device_join,matsPromptBehavior:a.prompt_behavior,matsApiErrorCode:a.api_error_code,matsUiVisible:a.ui_visible,matsSilentCode:a.silent_code,matsSilentBiSubCode:a.silent_bi_sub_code,matsSilentMessage:a.silent_message,matsSilentStatus:a.silent_status,matsHttpStatus:a.http_status,matsHttpEventCount:a.http_event_count},this.correlationId),a):null}getMATSFromResponse(n){if(n)try{return JSON.parse(n)}catch{this.logger.error("0b3l57",this.correlationId)}return null}isResponseFromCache(n){return typeof n.is_cached>"u"?(this.logger.verbose("1okqev",this.correlationId),!1):!!n.is_cached}async initializeNativeRequest(n){this.logger.trace("04j6wj",this.correlationId);const a=await this.getCanonicalAuthority(n),{scopes:o,...r}=n,d=new Ft(o||[]);d.appendScopes(Qo);const h={...r,accountId:this.accountId,clientId:this.config.auth.clientId,authority:a.urlString,scope:d.printScopes(),redirectUri:au(n.redirectUri,this.config.auth.redirectUri,this.logger,this.correlationId),prompt:this.getPrompt(n.prompt),correlationId:this.correlationId,tokenType:n.authenticationScheme,windowTitleSubstring:document.title,extraParameters:{...n.extraParameters},extendedExpiryToken:!1,keyId:n.popKid};if(h.signPopToken&&n.popKid)throw ne(Bw);if(this.handleExtraBrokerParams(h),h.extraParameters=h.extraParameters||{},h.extraParameters.telemetry=Ln.MATS_TELEMETRY,n.authenticationScheme===Xe.POP){const f={resourceRequestUri:n.resourceRequestUri,resourceRequestMethod:n.resourceRequestMethod,shrClaims:n.shrClaims,shrNonce:n.shrNonce,correlationId:this.correlationId},y=new Fo(this.browserCrypto,this.performanceClient);let p;if(h.keyId)p=this.browserCrypto.base64UrlEncode(JSON.stringify({kid:h.keyId})),h.signPopToken=!1;else{const S=await K(y.generateCnf.bind(y),ml,this.logger,this.performanceClient,this.correlationId)(f,this.logger);p=S.reqCnfString,h.keyId=S.kid,h.signPopToken=!0}h.reqCnf=p}return this.addRequestSKUs(h),h}async getCanonicalAuthority(n){const a=n.authority||this.config.auth.authority,{azureCloudOptions:o,account:r}=n;r&&await Fi(this.config,this.correlationId,this.performanceClient,this.browserStorage,this.logger,a,o,void 0,r);const d=new Qe(a);return d.validateAsUri(),d}getPrompt(n){switch(this.apiId){case Le.ssoSilent:case Le.acquireTokenSilent_silentFlow:return this.logger.trace("1hiwaz",this.correlationId),un.NONE}if(!n){this.logger.trace("1qlu04",this.correlationId);return}switch(n){case un.NONE:case un.CONSENT:case un.LOGIN:return this.logger.trace("1ynje4",this.correlationId),n;default:throw this.logger.trace("0nkr6q",this.correlationId),ne(zw)}}handleExtraBrokerParams(n){const a=n.extraParameters&&n.extraParameters.hasOwnProperty(Qc)&&n.extraParameters.hasOwnProperty(qc)&&n.extraParameters.hasOwnProperty(ks);if(!n.embeddedClientId&&!a)return;let o="";const r=n.redirectUri;n.embeddedClientId?(n.redirectUri=this.config.auth.redirectUri,o=n.embeddedClientId):n.extraParameters&&(n.redirectUri=n.extraParameters[qc],o=n.extraParameters[ks]),n.extraParameters={child_client_id:o,child_redirect_uri:r},this.performanceClient?.addFields({embeddedClientId:o,embeddedRedirectUri:r},n.correlationId)}}async function yg(l,n,a,o,r){const d=nw({...l.auth,authority:n},a,o,r);if(jf(d,{sku:zn.MSAL_SKU,version:Ms,os:"",cpu:""}),l.system.protocolMode!==dn.OIDC&&Hf(d,l.telemetry.application),a.platformBroker&&(kb(d),a.authenticationScheme===Xe.POP)){const h=new Yi(o,r),f=new Fo(h,r);let y;a.popKid?y=h.encodeKid(a.popKid):y=(await K(f.generateCnf.bind(f),ml,o,r,a.correlationId)(a,o)).reqCnfString,Bf(d,y)}return lu(d,a.correlationId,r),d}async function vg(l,n,a,o,r){if(!a.codeChallenge)throw nt(SC);const d=await K(yg,k_,o,r,a.correlationId)(l,n,a,o,r);return Nf(d,bf.CODE),zf(d,a.codeChallenge,Af),pi(d,{...a.extraQueryParameters,...a.extraParameters}),Zf(n,d)}async function Cg(l,n,a,o,r,d){if(!o.earJwk)throw ne(cS);const h=await yg(n,a,o,r,d);Nf(h,bf.IDTOKEN_TOKEN_REFRESHTOKEN),zb(h,o.earJwk),zf(h,o.codeChallenge,Af),pi(h,{...o.extraParameters});const f=new Map;pi(f,o.extraQueryParameters||{}),hl(f,o.correlationId);const y=Zf(a,f);return MS(l,y,h)}async function Sg(l,n,a,o,r,d){const h=await yg(n,a,o,r,d);Nf(h,bf.CODE),zf(h,o.codeChallenge,o.codeChallengeMethod||Af),pi(h,{...o.extraParameters});const f=new Map;pi(f,o.extraQueryParameters||{}),hl(f,o.correlationId);const y=Zf(a,f);return MS(l,y,h)}function MS(l,n,a){const o=l.createElement("form");return o.method="post",o.action=n,a.forEach((r,d)=>{const h=l.createElement("input");h.hidden=!0,h.name=d,h.value=r,o.appendChild(h)}),l.body.appendChild(o),o}async function xS(l,n,a,o,r,d,h,f,y,p){if(f.verbose("11qcow",l.correlationId),!p)throw ne(gS);const S=new Yi(f,y),T=new Fc(o,r,S,f,h,o.system.navigationClient,a,y,p,n,d,l.correlationId),{userRequestState:k}=gl(S.base64Decode,l.state);return K(T.acquireToken.bind(T),wS,f,y,l.correlationId)({...l,state:k,prompt:void 0})}async function Vo(l,n,a,o,r,d,h,f,y,p,S,T){if(gi.removeThrottle(h,r.auth.clientId,l),n.accountId)return K(xS,_S,p,S,l.correlationId)(l,n.accountId,o,r,h,f,y,p,S,T);const k={...l,code:n.code||"",codeVerifier:a},N=new RS(d,h,k,p,S);return await K(N.handleCodeResponse.bind(N),I_,p,S,l.correlationId)(n,l,o)}async function Tg(l,n,a,o,r,d,h,f,y,p,S){if(gi.removeThrottle(d,o.auth.clientId,l),aS(n,l.state),!n.ear_jwe)throw ne(mw);if(!l.earJwk)throw ne(cS);const T=JSON.parse(await K(t_,V_,y,p,l.correlationId)(l.earJwk,n.ear_jwe));if(T.accountId)return K(xS,_S,y,p,l.correlationId)(l,T.accountId,a,o,d,h,f,y,p,S);const k=new Os(o.auth.clientId,d,new Yi(y,p),y,p,null,null);k.validateTokenResponse(T,l.correlationId);const N={code:"",state:l.state,nonce:l.nonce,client_info:T.client_info,cloud_graph_host_name:T.cloud_graph_host_name,cloud_instance_host_name:T.cloud_instance_host_name,cloud_instance_name:T.cloud_instance_name,msgraph_host:T.msgraph_host};return await K(k.handleServerTokenResponse.bind(k),qf,y,p,l.correlationId)(T,r,ei(),l,a,N,void 0,void 0,void 0,void 0)}const Rk=32;async function xs(l,n,a){const o=$n(Nk,j_,n,l,a)(l,n,a),r=await K(Mk,H_,n,l,a)(o,l,n,a);return{verifier:o,challenge:r}}function Nk(l,n,a){try{const o=new Uint8Array(Rk);return $n(Xw,L_,n,l,a)(o),za(o)}catch{throw ne(lS)}}async function Mk(l,n,a,o){try{const r=await K(yS,z_,a,n,o)(l);return za(new Uint8Array(r))}catch{throw ne(lS)}}class ou{navigateInternal(n,a){return ou.defaultNavigateWindow(n,a)}navigateExternal(n,a){return ou.defaultNavigateWindow(n,a)}static defaultNavigateWindow(n,a){return a.noHistory?window.location.replace(n):window.location.assign(n),new Promise((o,r)=>{setTimeout(()=>{r(ne(nu,"failed_to_redirect"))},a.timeout)})}}class xk{async sendGetRequestAsync(n,a){let o,r={},d=0;const h=eC(a);try{o=await fetch(n,{method:xv.GET,headers:h})}catch(f){throw el(ne(window.navigator.onLine?Nw:mf),void 0,void 0,f)}r=tC(o.headers);try{return d=o.status,{headers:r,body:await o.json(),status:d}}catch(f){throw el(ne(Hv),d,r,f)}}async sendPostRequestAsync(n,a){const o=a&&a.body||"",r=eC(a);let d,h=0,f={};try{d=await fetch(n,{method:xv.POST,headers:r,body:o})}catch(y){throw el(ne(window.navigator.onLine?Rw:mf),void 0,void 0,y)}f=tC(d.headers);try{return h=d.status,{headers:f,body:await d.json(),status:h}}catch(y){throw el(ne(Hv),h,f,y)}}}function eC(l){try{const n=new Headers;if(!(l&&l.headers))return n;const a=l.headers;return Object.entries(a).forEach(([o,r])=>{n.append(o,r)}),n}catch(n){throw el(ne(Kw),void 0,void 0,n)}}function tC(l){try{const n={};return l.forEach((a,o)=>{n[o]=a}),n}catch{throw ne(Pw)}}const Dk=6e4,Uk=1e4,jk=3e4,DS=2e3;function Hk({auth:l,cache:n,system:a,telemetry:o},r){const d={clientId:"",authority:`${oC}`,knownAuthorities:[],cloudDiscoveryMetadata:"",authorityMetadata:"",redirectUri:typeof window<"u"&&window.location?window.location.href.split("?")[0].split("#")[0]:"",postLogoutRedirectUri:"",clientCapabilities:[],OIDCOptions:{responseMode:wf.FRAGMENT,defaultScopes:[lC,cC,Ef]},azureCloudOptions:{azureCloudInstance:Kf.None,tenant:""},instanceAware:!1},h={cacheLocation:Kn.SessionStorage,cacheRetentionDays:5},f={loggerCallback:()=>{},logLevel:rt.Info,piiLoggingEnabled:!1},p={...{...VC,loggerOptions:f,networkClient:r?new xk:tw,navigationClient:new ou,popupBridgeTimeout:a?.popupBridgeTimeout||Dk,iframeBridgeTimeout:a?.iframeBridgeTimeout||Uk,redirectNavigationTimeout:jk,allowRedirectInIframe:!1,navigatePopups:!0,allowPlatformBroker:!1,nativeBrokerHandshakeTimeout:a?.nativeBrokerHandshakeTimeout||DS,protocolMode:dn.AAD},...a,loggerOptions:a?.loggerOptions||f},S={application:{appName:"",appVersion:""},client:new GC};if(a?.protocolMode!==dn.OIDC&&l?.OIDCOptions&&new yi(p.loggerOptions).warning(JSON.stringify(nt(sb)),""),a?.protocolMode&&a.protocolMode===dn.OIDC&&p?.allowPlatformBroker)throw nt(ob);return{auth:{...d,...l,OIDCOptions:{...d.OIDCOptions,...l?.OIDCOptions}},cache:{...h,...n},system:p,telemetry:{...S,...o}}}class ru{constructor(n,a,o,r){this.logger=n,this.handshakeTimeoutMs=a,this.extensionId=r,this.resolvers=new Map,this.handshakeResolvers=new Map,this.messageChannel=new MessageChannel,this.windowListener=this.onWindowMessage.bind(this),this.performanceClient=o,this.handshakeEvent=o.startMeasurement(D_),this.platformAuthType=Ln.PLATFORM_EXTENSION_PROVIDER}async sendMessage(n){this.logger.trace("0on4p2",n.correlationId);const a={method:Zr.GetToken,request:n},o={channel:Ln.CHANNEL_ID,extensionId:this.extensionId,responseId:Rs(),body:a};this.logger.trace("1qadfi",n.correlationId),this.logger.tracePii("1xm533",n.correlationId),this.messageChannel.port1.postMessage(o);const r=await new Promise((h,f)=>{this.resolvers.set(o.responseId,{resolve:h,reject:f})});return this.validatePlatformBrokerResponse(r)}static async createProvider(n,a,o,r){n.trace("15zfnw",r);try{const d=new ru(n,a,o,Ln.PREFERRED_EXTENSION_ID);return await d.sendHandshakeRequest(r),d}catch{const h=new ru(n,a,o);return await h.sendHandshakeRequest(r),h}}async sendHandshakeRequest(n){this.logger.trace("1dpg9o",n),window.addEventListener("message",this.windowListener,!1);const a={channel:Ln.CHANNEL_ID,extensionId:this.extensionId,responseId:Rs(),body:{method:Zr.HandshakeRequest}};return this.handshakeEvent.add({extensionId:this.extensionId,extensionHandshakeTimeoutMs:this.handshakeTimeoutMs}),this.messageChannel.port1.onmessage=o=>{this.onChannelMessage(o)},window.postMessage(a,window.origin,[this.messageChannel.port2]),new Promise((o,r)=>{this.handshakeResolvers.set(a.responseId,{resolve:o,reject:r}),this.timeoutId=window.setTimeout(()=>{window.removeEventListener("message",this.windowListener,!1),this.messageChannel.port1.close(),this.messageChannel.port2.close(),this.handshakeEvent.end({extensionHandshakeTimedOut:!0,success:!1}),r(ne(jw)),this.handshakeResolvers.delete(a.responseId)},this.handshakeTimeoutMs)})}onWindowMessage(n){const a=pf();if(this.logger.trace("0jpn5u",a),n.source!==window)return;const o=n.data;if(!(!o.channel||o.channel!==Ln.CHANNEL_ID)&&!(o.extensionId&&o.extensionId!==this.extensionId)&&o.body.method===Zr.HandshakeRequest){const r=this.handshakeResolvers.get(o.responseId);if(!r){this.logger.trace("07buhm",a);return}this.logger.verbose(o.extensionId?"0xrkug":"No extension installed",a),clearTimeout(this.timeoutId),this.messageChannel.port1.close(),this.messageChannel.port2.close(),window.removeEventListener("message",this.windowListener,!1),this.handshakeEvent.end({success:!1,extensionInstalled:!1}),r.reject(ne(Hw))}}onChannelMessage(n){const a=pf();this.logger.trace("1py8yf",a);const o=n.data,r=this.resolvers.get(o.responseId),d=this.handshakeResolvers.get(o.responseId);try{const h=o.body.method;if(h===Zr.Response){if(!r)return;const f=o.body.response;if(this.logger.trace("19hpgm",a),this.logger.tracePii("179a24",a),f.status!=="Success")r.reject(su(f.code,f.description,f.ext));else if(f.result)f.result.code&&f.result.description?r.reject(su(f.result.code,f.result.description,f.result.ext)):r.resolve(f.result);else throw rf(hf,"Event does not contain result.");this.resolvers.delete(o.responseId)}else if(h===Zr.HandshakeResponse){if(!d){this.logger.trace("082qnt",a);return}clearTimeout(this.timeoutId),window.removeEventListener("message",this.windowListener,!1),this.extensionId=o.extensionId,this.extensionVersion=o.body.version,this.logger.verbose("0yf5ib",a),this.handshakeEvent.end({extensionInstalled:!0,success:!0}),d.resolve(),this.handshakeResolvers.delete(o.responseId)}}catch(h){this.logger.error("0xf978",a),this.logger.errorPii("04i99o",a),this.logger.errorPii("0xdvsy",a),r?r.reject(h):d&&d.reject(h)}}validatePlatformBrokerResponse(n){if(n.hasOwnProperty("access_token")&&n.hasOwnProperty("id_token")&&n.hasOwnProperty("client_info")&&n.hasOwnProperty("account")&&n.hasOwnProperty("scope")&&n.hasOwnProperty("expires_in"))return n;throw rf(hf,"Response missing expected properties.")}getExtensionId(){return this.extensionId}getExtensionVersion(){return this.extensionVersion}getExtensionName(){return this.getExtensionId()===Ln.PREFERRED_EXTENSION_ID?"chrome":this.getExtensionId()?.length?"unknown":void 0}}class Eg{constructor(n,a,o){this.logger=n,this.performanceClient=a,this.correlationId=o,this.platformAuthType=Ln.PLATFORM_DOM_PROVIDER}static async createProvider(n,a,o){if(n.trace("12mj4a",o),window.navigator?.platformAuthentication&&(await window.navigator.platformAuthentication.getSupportedContracts(Ln.MICROSOFT_ENTRA_BROKERID))?.includes(Ln.PLATFORM_DOM_APIS))return n.trace("1h5q1r",o),new Eg(n,a,o)}getExtensionId(){return Ln.MICROSOFT_ENTRA_BROKERID}getExtensionVersion(){return""}getExtensionName(){return Ln.DOM_API_NAME}async sendMessage(n){this.logger.trace("02bcil",n.correlationId);try{const a=this.initializePlatformDOMRequest(n),o=await window.navigator.platformAuthentication.executeGetToken(a);return this.validatePlatformBrokerResponse(o,n.correlationId)}catch(a){throw this.logger.error("11im7g",n.correlationId),a}}initializePlatformDOMRequest(n){this.logger.trace("15d6yv",n.correlationId);const{accountId:a,clientId:o,authority:r,scope:d,redirectUri:h,correlationId:f,state:y,storeInCache:p,embeddedClientId:S,extraParameters:T,...k}=n,N=this.getDOMExtraParams(k);return{accountId:a,brokerId:this.getExtensionId(),authority:r,clientId:o,correlationId:f||this.correlationId,extraParameters:{...T,...N},isSecurityTokenService:!1,redirectUri:h,scope:d,state:y,storeInCache:p,embeddedClientId:S}}validatePlatformBrokerResponse(n,a){if(n.hasOwnProperty("isSuccess")){if(n.hasOwnProperty("accessToken")&&n.hasOwnProperty("idToken")&&n.hasOwnProperty("clientInfo")&&n.hasOwnProperty("account")&&n.hasOwnProperty("scopes")&&n.hasOwnProperty("expiresIn"))return this.logger.trace("0h4vei",a),this.convertToPlatformBrokerResponse(n,a);if(n.hasOwnProperty("error")){const o=n;if(o.isSuccess===!1&&o.error&&o.error.code)throw this.logger.trace("0g92vm",a),su(o.error.code,o.error.description,{error:parseInt(o.error.errorCode),protocol_error:o.error.protocolError,status:o.error.status,properties:o.error.properties})}}throw rf(hf,"Response missing expected properties.")}convertToPlatformBrokerResponse(n,a){return this.logger.trace("14913t",a),{access_token:n.accessToken,id_token:n.idToken,client_info:n.clientInfo,account:n.account,expires_in:n.expiresIn,scope:n.scopes,state:n.state||"",properties:n.properties||{},extendedLifetimeToken:n.extendedLifetimeToken??!1,shr:n.proofOfPossessionPayload}}getDOMExtraParams(n){return{...Object.entries(n).reduce((r,[d,h])=>(r[d]=String(h),r),{})}}}async function zk(l,n,a,o){l.trace("134j0v",a);const r=Lk();l.trace("04c81g",a);let d;try{r&&(d=await Eg.createProvider(l,n,a)),d||(l.trace("0l3na8",a),d=await ru.createProvider(l,o||DS,n,a))}catch(h){l.trace("0icbd7",h)}return d}function Lk(){let l;try{return l=window[Kn.SessionStorage],l?.getItem(nk)==="true"}catch{return!1}}function dl(l,n,a,o,r){if(n.trace("0uko3r",a),!l.system.allowPlatformBroker)return n.trace("04hozs",a),!1;if(!o)return n.trace("0kvv1r",a),!1;if(r)switch(r){case Xe.BEARER:case Xe.POP:return n.trace("18tev1",a),!0;default:return n.trace("1dd2nh",a),!1}return!0}class Bk extends Xo{constructor(n,a,o,r,d,h,f,y,p,S){super(n,a,o,r,d,h,f,p,S),this.nativeStorage=y,this.eventHandler=d}acquireToken(n,a){let o;try{if(o={popupName:this.generatePopupName(n.scopes||Qo,n.authority||this.config.auth.authority),popupWindowAttributes:n.popupWindowAttributes||{},popupWindowParent:n.popupWindowParent??window},this.performanceClient.addFields({isAsyncPopup:!this.config.system.navigatePopups},this.correlationId),this.config.system.navigatePopups){const d={...n,httpMethod:OS(n,this.config.system.protocolMode)};return this.logger.verbose("1f9ok3",this.correlationId),o.popup=this.openSizedPopup("about:blank",o),this.acquireTokenPopupAsync(d,o,a)}else return this.logger.verbose("162h4u",this.correlationId),this.acquireTokenPopupAsync(n,o,a)}catch(r){return Promise.reject(r)}}logout(n){try{this.logger.verbose("068rup",this.correlationId);const a=this.initializeLogoutRequest(n),o={popupName:this.generateLogoutPopupName(a),popupWindowAttributes:n?.popupWindowAttributes||{},popupWindowParent:n?.popupWindowParent??window},r=n&&n.authority,d=n&&n.mainWindowRedirectUri;return this.config.system.navigatePopups?(this.logger.verbose("1a28da",this.correlationId),o.popup=this.openSizedPopup("about:blank",o),this.logoutPopupAsync(a,o,r,d)):(this.logger.verbose("1phd8u",this.correlationId),this.logoutPopupAsync(a,o,r,d))}catch(a){return Promise.reject(a)}}async acquireTokenPopupAsync(n,a,o){this.logger.verbose("1g77pg",this.correlationId);const r=await K(Su,vu,this.logger,this.performanceClient,this.correlationId)(n,ve.Popup,this.config,this.browserCrypto,this.browserStorage,this.logger,this.performanceClient,this.correlationId);a.popup&&bS(r.authority);const d=dl(this.config,this.logger,this.correlationId,this.platformAuthProvider,n.authenticationScheme);return r.platformBroker=d,this.config.system.protocolMode===dn.EAR?this.executeEarFlow(r,a,o):this.executeCodeFlow(r,a,o)}async executeCodeFlow(n,a,o){const r=n.correlationId,d=hn(Le.acquireTokenPopup,this.config.auth.clientId,this.correlationId,this.browserStorage,this.logger),h=o||await K(xs,Ns,this.logger,this.performanceClient,r)(this.performanceClient,this.logger,r),f={...n,codeChallenge:h.challenge};try{const y=await K(this.createAuthCodeClient.bind(this),Ha,this.logger,this.performanceClient,r)({serverTelemetryManager:d,requestAuthority:f.authority,requestAzureCloudOptions:f.azureCloudOptions,requestExtraQueryParameters:f.extraQueryParameters,account:f.account});if(f.httpMethod===zo.POST)return await this.executeCodeFlowWithPost(f,a,y,h.verifier);{const p=await K(vg,Qf,this.logger,this.performanceClient,r)(this.config,y.authority,f,this.logger,this.performanceClient),S=this.initiateAuthRequest(p,a);this.eventHandler.emitEvent(Se.POPUP_OPENED,r,ve.Popup,{popupWindow:S},null);const T=await Ho(this.config.system.popupBridgeTimeout,this.logger,this.browserCrypto,n),k=$n(il,nl,this.logger,this.performanceClient,this.correlationId)(T,this.config.auth.OIDCOptions.responseMode,this.logger,this.correlationId);return await K(Vo,Ko,this.logger,this.performanceClient,r)(n,k,h.verifier,Le.acquireTokenPopup,this.config,y,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}}catch(y){throw a.popup?.close(),y instanceof tt&&(y.setCorrelationId(this.correlationId),d.cacheFailedRequest(y)),y}}async executeEarFlow(n,a,o){const{correlationId:r,authority:d,azureCloudOptions:h,extraQueryParameters:f,account:y}=n,p=await K(Fi,_s,this.logger,this.performanceClient,r)(this.config,this.correlationId,this.performanceClient,this.browserStorage,this.logger,d,h,f,y),S=await K(rg,fg,this.logger,this.performanceClient,r)(),T=o||await K(xs,Ns,this.logger,this.performanceClient,r)(this.performanceClient,this.logger,r),k={...n,earJwk:S,codeChallenge:T.challenge},N=a.popup||this.openPopup("about:blank",a);(await Cg(N.document,this.config,p,k,this.logger,this.performanceClient)).submit();const q=await K(Ho,iu,this.logger,this.performanceClient,r)(this.config.system.popupBridgeTimeout,this.logger,this.browserCrypto,k),ye=$n(il,nl,this.logger,this.performanceClient,this.correlationId)(q,this.config.auth.OIDCOptions.responseMode,this.logger,this.correlationId);if(!ye.ear_jwe&&ye.code){const Z=await K(this.createAuthCodeClient.bind(this),Ha,this.logger,this.performanceClient,r)({serverTelemetryManager:hn(Le.acquireTokenPopup,this.config.auth.clientId,r,this.browserStorage,this.logger),requestAuthority:n.authority,requestAzureCloudOptions:n.azureCloudOptions,requestExtraQueryParameters:n.extraQueryParameters,account:n.account,authority:p});return K(Vo,Ko,this.logger,this.performanceClient,r)(k,ye,T.verifier,Le.acquireTokenPopup,this.config,Z,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}else return K(Tg,hg,this.logger,this.performanceClient,r)(k,ye,Le.acquireTokenPopup,this.config,p,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async executeCodeFlowWithPost(n,a,o,r){const d=n.correlationId,h=await K(Fi,_s,this.logger,this.performanceClient,d)(this.config,this.correlationId,this.performanceClient,this.browserStorage,this.logger),f=a.popup||this.openPopup("about:blank",a);(await Sg(f.document,this.config,h,n,this.logger,this.performanceClient)).submit();const p=await K(Ho,iu,this.logger,this.performanceClient,d)(this.config.system.popupBridgeTimeout,this.logger,this.browserCrypto,n),S=$n(il,nl,this.logger,this.performanceClient,this.correlationId)(p,this.config.auth.OIDCOptions.responseMode,this.logger,this.correlationId);return K(Vo,Ko,this.logger,this.performanceClient,d)(n,S,r,Le.acquireTokenPopup,this.config,o,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async logoutPopupAsync(n,a,o,r){this.logger.verbose("0b7yrk",this.correlationId),this.eventHandler.emitEvent(Se.LOGOUT_START,this.correlationId,ve.Popup,n);const d=hn(Le.logoutPopup,this.config.auth.clientId,this.correlationId,this.browserStorage,this.logger);try{await mg(this.browserStorage,this.browserCrypto,this.logger,this.correlationId,n.account);const h=await K(this.createAuthCodeClient.bind(this),Ha,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:d,requestAuthority:o,account:n.account||void 0});try{h.authority.endSessionEndpoint}catch{if(n.account?.homeAccountId&&n.postLogoutRedirectUri&&h.authority.protocolMode===dn.OIDC){if(this.eventHandler.emitEvent(Se.LOGOUT_SUCCESS,n.correlationId,ve.Popup,n),r){const p={apiId:Le.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},S=Qe.getAbsoluteUrl(r,Da());await this.navigationClient.navigateInternal(S,p)}a.popup?.close();return}}const f=h.getLogoutUri(n);this.eventHandler.emitEvent(Se.LOGOUT_SUCCESS,n.correlationId,ve.Popup,n);const y=this.openPopup(f,a);if(this.eventHandler.emitEvent(Se.POPUP_OPENED,n.correlationId,ve.Popup,{popupWindow:y},null),await Ho(this.config.system.popupBridgeTimeout,this.logger,this.browserCrypto,n).catch(()=>{}),r){const p={apiId:Le.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},S=Qe.getAbsoluteUrl(r,Da());this.logger.verbose("0qcur2",this.correlationId),this.logger.verbosePii("0oj7lk",this.correlationId),await this.navigationClient.navigateInternal(S,p)}else this.logger.verbose("03zgcf",this.correlationId)}catch(h){throw a.popup?.close(),h instanceof tt&&(h.setCorrelationId(this.correlationId),d.cacheFailedRequest(h)),this.eventHandler.emitEvent(Se.LOGOUT_FAILURE,this.correlationId,ve.Popup,null,h),this.eventHandler.emitEvent(Se.LOGOUT_END,this.correlationId,ve.Popup),h}this.eventHandler.emitEvent(Se.LOGOUT_END,this.correlationId,ve.Popup)}initiateAuthRequest(n,a){if(n)return this.logger.infoPii("1kcr9k",this.correlationId),this.openPopup(n,a);throw this.logger.error("1l7hyp",this.correlationId),ne(eg)}openPopup(n,a){try{let o;if(a.popup?(o=a.popup,this.logger.verbosePii("0cgeo7",this.correlationId),o.location.assign(n)):typeof a.popup>"u"&&(this.logger.verbosePii("0c2awd",this.correlationId),o=this.openSizedPopup(n,a)),!o)throw ne(Ew);return o.focus&&o.focus(),this.currentWindow=o,o}catch{throw this.logger.error("0dxfb9",this.correlationId),ne(Tw)}}openSizedPopup(n,{popupName:a,popupWindowAttributes:o,popupWindowParent:r}){const d=r.screenLeft?r.screenLeft:r.screenX,h=r.screenTop?r.screenTop:r.screenY,f=r.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,y=r.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;let p=o.popupSize?.width,S=o.popupSize?.height,T=o.popupPosition?.top,k=o.popupPosition?.left;return(!p||p<0||p>f)&&(this.logger.verbose("08vfmo",this.correlationId),p=zn.POPUP_WIDTH),(!S||S<0||S>y)&&(this.logger.verbose("09cxa0",this.correlationId),S=zn.POPUP_HEIGHT),(!T||T<0||T>y)&&(this.logger.verbose("1qh4wo",this.correlationId),T=Math.max(0,y/2-zn.POPUP_HEIGHT/2+h)),(!k||k<0||k>f)&&(this.logger.verbose("1sz3en",this.correlationId),k=Math.max(0,f/2-zn.POPUP_WIDTH/2+d)),r.open(n,a,`width=${p}, height=${S}, top=${T}, left=${k}, scrollbars=yes`)}generatePopupName(n,a){return`${zn.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${n.join("-")}.${a}.${this.correlationId}`}generateLogoutPopupName(n){const a=n.account&&n.account.homeAccountId;return`${zn.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${a}.${this.correlationId}`}}function Kk(){if(typeof window>"u"||typeof window.performance>"u"||typeof window.performance.getEntriesByType!="function")return;const l=window.performance.getEntriesByType("navigation");return(l.length?l[0]:void 0)?.type}class Pk extends Xo{constructor(n,a,o,r,d,h,f,y,p,S){super(n,a,o,r,d,h,f,p,S),this.nativeStorage=y}async acquireToken(n){const a=await K(Su,vu,this.logger,this.performanceClient,this.correlationId)(n,ve.Redirect,this.config,this.browserCrypto,this.browserStorage,this.logger,this.performanceClient,this.correlationId);a.platformBroker=dl(this.config,this.logger,this.correlationId,this.platformAuthProvider,n.authenticationScheme);const o=d=>{d.persisted&&(this.logger.verbose("0udvtt",this.correlationId),this.browserStorage.resetRequestCache(this.correlationId),this.eventHandler.emitEvent(Se.RESTORE_FROM_BFCACHE,this.correlationId,ve.Redirect))},r=this.getRedirectStartPage(n.redirectStartPage);this.logger.verbosePii("0zao0a",this.correlationId),this.browserStorage.setTemporaryCache(Et.ORIGIN_URI,r,!0),window.addEventListener("pageshow",o);try{this.config.system.protocolMode===dn.EAR?await this.executeEarFlow(a):await this.executeCodeFlow(a)}catch(d){throw d instanceof tt&&d.setCorrelationId(this.correlationId),window.removeEventListener("pageshow",o),d}}async executeCodeFlow(n){const a=n.correlationId,o=hn(Le.acquireTokenRedirect,this.config.auth.clientId,this.correlationId,this.browserStorage,this.logger),r=await K(xs,Ns,this.logger,this.performanceClient,a)(this.performanceClient,this.logger,a),d={...n,codeChallenge:r.challenge};this.browserStorage.cacheAuthorizeRequest(d,this.correlationId,r.verifier);try{if(d.httpMethod===zo.POST)return await this.executeCodeFlowWithPost(d);{const h=await K(this.createAuthCodeClient.bind(this),Ha,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:o,requestAuthority:d.authority,requestAzureCloudOptions:d.azureCloudOptions,requestExtraQueryParameters:d.extraQueryParameters,account:d.account}),f=await K(vg,Qf,this.logger,this.performanceClient,n.correlationId)(this.config,h.authority,d,this.logger,this.performanceClient);return await this.initiateAuthRequest(f)}}catch(h){throw h instanceof tt&&(h.setCorrelationId(this.correlationId),o.cacheFailedRequest(h)),h}}async executeEarFlow(n){const{correlationId:a,authority:o,azureCloudOptions:r,extraQueryParameters:d,account:h}=n,f=await K(Fi,_s,this.logger,this.performanceClient,a)(this.config,this.correlationId,this.performanceClient,this.browserStorage,this.logger,o,r,d,h),y=await K(rg,fg,this.logger,this.performanceClient,a)(),p=await K(xs,Ns,this.logger,this.performanceClient,a)(this.performanceClient,this.logger,a),S={...n,earJwk:y,codeChallenge:p.challenge};return this.browserStorage.cacheAuthorizeRequest(S,this.correlationId,p.verifier),(await Cg(document,this.config,f,S,this.logger,this.performanceClient)).submit(),new Promise((k,N)=>{setTimeout(()=>{N(ne(nu,"failed_to_redirect"))},this.config.system.redirectNavigationTimeout)})}async executeCodeFlowWithPost(n){const a=n.correlationId,o=await K(Fi,_s,this.logger,this.performanceClient,a)(this.config,this.correlationId,this.performanceClient,this.browserStorage,this.logger);return this.browserStorage.cacheAuthorizeRequest(n,this.correlationId),(await Sg(document,this.config,o,n,this.logger,this.performanceClient)).submit(),new Promise((d,h)=>{setTimeout(()=>{h(ne(nu,"failed_to_redirect"))},this.config.system.redirectNavigationTimeout)})}async handleRedirectPromise(n,a,o,r){const d=hn(Le.handleRedirectPromise,this.config.auth.clientId,this.correlationId,this.browserStorage,this.logger),h=r?.navigateToLoginRequestUrl??!0;try{const[f,y]=this.getRedirectResponse(r?.hash||"");if(!f)return this.logger.info("1qmv0q",this.correlationId),this.browserStorage.resetRequestCache(this.correlationId),Kk()!=="back_forward"?o.event.errorCode="no_server_response":this.logger.verbose("1eqegq",this.correlationId),null;const p=this.browserStorage.getTemporaryCache(Et.ORIGIN_URI,this.correlationId,!0)||"",S=vv(p),T=vv(window.location.href);if(S===T&&h)return this.logger.verbose("11yred",this.correlationId),p.indexOf("#")>-1&&o_(p),await this.handleResponse(f,n,a,d);if(h){if(!pu()||this.config.system.allowRedirectInIframe){this.browserStorage.setTemporaryCache(Et.URL_HASH,y,!0);const k={apiId:Le.handleRedirectPromise,timeout:this.config.system.redirectNavigationTimeout,noHistory:!0};let N=!0;if(!p||p==="null"){const F=c_();this.browserStorage.setTemporaryCache(Et.ORIGIN_URI,F,!0),this.logger.warning("1dutq1",this.correlationId),N=await this.navigationClient.navigateInternal(F,k)}else this.logger.verbose("08jpy1",this.correlationId),N=await this.navigationClient.navigateInternal(p,k);if(!N)return await this.handleResponse(f,n,a,d)}}else return this.logger.verbose("0v4sdv",this.correlationId),await this.handleResponse(f,n,a,d);return null}catch(f){throw f instanceof tt&&(f.setCorrelationId(this.correlationId),d.cacheFailedRequest(f)),f}}getRedirectResponse(n){this.logger.verbose("1c5i8m",this.correlationId);let a=n;a||(this.config.auth.OIDCOptions.responseMode===wf.QUERY?a=window.location.search:a=window.location.hash);let o=Xc(a);if(o){try{vk(o,this.browserCrypto,ve.Redirect)}catch(d){return d instanceof tt&&this.logger.error("0bkq6p",this.correlationId),[null,""]}return TS(window),this.logger.verbose("00uvho",this.correlationId),[o,a]}const r=this.browserStorage.getTemporaryCache(Et.URL_HASH,this.correlationId,!0);return this.browserStorage.removeItem(this.browserStorage.generateCacheKey(Et.URL_HASH)),r&&(o=Xc(r),o)?(this.logger.verbose("001671",this.correlationId),[o,r]):[null,""]}async handleResponse(n,a,o,r){if(!n.state)throw ne(tg);const{authority:h,azureCloudOptions:f,extraQueryParameters:y,account:p}=a;if(n.ear_jwe){const T=await K(Fi,_s,this.logger,this.performanceClient,a.correlationId)(this.config,this.correlationId,this.performanceClient,this.browserStorage,this.logger,h,f,y,p);return K(Tg,hg,this.logger,this.performanceClient,a.correlationId)(a,n,Le.acquireTokenRedirect,this.config,T,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}const S=await K(this.createAuthCodeClient.bind(this),Ha,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:r,requestAuthority:a.authority});return K(Vo,Ko,this.logger,this.performanceClient,a.correlationId)(a,n,o,Le.acquireTokenRedirect,this.config,S,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async initiateAuthRequest(n){if(this.logger.verbose("0yaw2e",this.correlationId),n){this.logger.infoPii("1luf83",this.correlationId);const a={apiId:Le.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},o=this.config.auth.onRedirectNavigate;if(typeof o=="function")if(this.logger.verbose("1nehvl",this.correlationId),o(n)!==!1){this.logger.verbose("1a0jxh",this.correlationId),await this.navigationClient.navigateExternal(n,a);return}else{this.logger.verbose("09k5h5",this.correlationId);return}else{this.logger.verbose("0klwf7",this.correlationId),await this.navigationClient.navigateExternal(n,a);return}}else throw this.logger.info("0rlh4e",this.correlationId),ne(eg)}async logout(n){this.logger.verbose("1rkurh",this.correlationId);const a=this.initializeLogoutRequest(n),o=hn(Le.logout,this.config.auth.clientId,this.correlationId,this.browserStorage,this.logger);try{this.eventHandler.emitEvent(Se.LOGOUT_START,this.correlationId,ve.Redirect,n),await mg(this.browserStorage,this.browserCrypto,this.logger,this.correlationId,a.account);const r={apiId:Le.logout,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},d=await K(this.createAuthCodeClient.bind(this),Ha,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:o,requestAuthority:n&&n.authority,requestExtraQueryParameters:n?.extraQueryParameters,account:n&&n.account||void 0});if(d.authority.protocolMode===dn.OIDC)try{d.authority.endSessionEndpoint}catch{if(a.account?.homeAccountId){this.eventHandler.emitEvent(Se.LOGOUT_SUCCESS,this.correlationId,ve.Redirect,a);return}}const h=d.getLogoutUri(a);a.account?.homeAccountId&&this.eventHandler.emitEvent(Se.LOGOUT_SUCCESS,this.correlationId,ve.Redirect,a);const f=this.config.auth.onRedirectNavigate;if(typeof f=="function")if(f(h)!==!1){this.logger.verbose("06v57e",this.correlationId),this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0,Ma.SIGNOUT),await this.navigationClient.navigateExternal(h,r);return}else this.browserStorage.setInteractionInProgress(!1),this.logger.verbose("0xqes1",this.correlationId);else{this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0,Ma.SIGNOUT),await this.navigationClient.navigateExternal(h,r);return}}catch(r){throw r instanceof tt&&(r.setCorrelationId(this.correlationId),o.cacheFailedRequest(r)),this.eventHandler.emitEvent(Se.LOGOUT_FAILURE,this.correlationId,ve.Redirect,null,r),this.eventHandler.emitEvent(Se.LOGOUT_END,this.correlationId,ve.Redirect),r}this.eventHandler.emitEvent(Se.LOGOUT_END,this.correlationId,ve.Redirect)}getRedirectStartPage(n){const a=n||window.location.href;return Qe.getAbsoluteUrl(a,Da())}}async function Gk(l,n,a,o){if(!l)throw a.info("1l7hyp",o),ne(eg);return $n(Yk,w_,a,n,o)(l)}async function Vk(l,n,a,o,r){const d=Ag();if(!d.contentDocument)throw"No document associated with iframe!";return(await Sg(d.contentDocument,l,n,a,o,r)).submit(),d}async function Fk(l,n,a,o,r){const d=Ag();if(!d.contentDocument)throw"No document associated with iframe!";return(await Cg(d.contentDocument,l,n,a,o,r)).submit(),d}function Yk(l){const n=Ag();return n.src=l,n}function Ag(){const l=document.createElement("iframe");return l.className="msalSilentIframe",l.style.visibility="hidden",l.style.position="absolute",l.style.width=l.style.height="0",l.style.border="0",l.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),l.setAttribute("allow","local-network-access *"),document.body.appendChild(l),l}class Qk extends Xo{constructor(n,a,o,r,d,h,f,y,p,S,T){super(n,a,o,r,d,h,y,S,T),this.apiId=f,this.nativeStorage=p}async acquireToken(n){!n.loginHint&&!n.sid&&(!n.account||!n.account.username)&&this.logger.warning("1kl318",this.correlationId);const a={...n};a.prompt?a.prompt!==un.NONE&&a.prompt!==un.NO_SESSION&&(this.logger.warning("0bmctg",this.correlationId),a.prompt=un.NONE):a.prompt=un.NONE;const o=await K(Su,vu,this.logger,this.performanceClient,this.correlationId)(a,ve.Silent,this.config,this.browserCrypto,this.browserStorage,this.logger,this.performanceClient,this.correlationId);return o.platformBroker=dl(this.config,this.logger,this.correlationId,this.platformAuthProvider,o.authenticationScheme),bS(o.authority),this.config.system.protocolMode===dn.EAR?this.executeEarFlow(o):this.executeCodeFlow(o)}async executeCodeFlow(n){let a;const o=hn(this.apiId,this.config.auth.clientId,this.correlationId,this.browserStorage,this.logger);try{return a=await K(this.createAuthCodeClient.bind(this),Ha,this.logger,this.performanceClient,n.correlationId)({serverTelemetryManager:o,requestAuthority:n.authority,requestAzureCloudOptions:n.azureCloudOptions,requestExtraQueryParameters:n.extraQueryParameters,account:n.account}),await K(this.silentTokenHelper.bind(this),Vv,this.logger,this.performanceClient,n.correlationId)(a,n)}catch(r){if(r instanceof tt&&(r.setCorrelationId(this.correlationId),o.cacheFailedRequest(r)),!a||!(r instanceof tt)||r.errorCode!==zn.INVALID_GRANT_ERROR)throw r;return this.performanceClient.addFields({retryError:r.errorCode},this.correlationId),await K(this.silentTokenHelper.bind(this),Vv,this.logger,this.performanceClient,this.correlationId)(a,n)}}async executeEarFlow(n){const{correlationId:a,authority:o,azureCloudOptions:r,extraQueryParameters:d,account:h}=n,f=await K(Fi,_s,this.logger,this.performanceClient,a)(this.config,this.correlationId,this.performanceClient,this.browserStorage,this.logger,o,r,d,h),y=await K(rg,fg,this.logger,this.performanceClient,a)(),p=await K(xs,Ns,this.logger,this.performanceClient,a)(this.performanceClient,this.logger,a),S={...n,earJwk:y,codeChallenge:p.challenge};await K(Fk,Zh,this.logger,this.performanceClient,a)(this.config,f,S,this.logger,this.performanceClient);const T=this.config.auth.OIDCOptions.responseMode,k=await K(Ho,iu,this.logger,this.performanceClient,a)(this.config.system.iframeBridgeTimeout,this.logger,this.browserCrypto,n),N=$n(il,nl,this.logger,this.performanceClient,a)(k,T,this.logger,this.correlationId);if(!N.ear_jwe&&N.code){const F=await K(this.createAuthCodeClient.bind(this),Ha,this.logger,this.performanceClient,a)({serverTelemetryManager:hn(this.apiId,this.config.auth.clientId,a,this.browserStorage,this.logger),requestAuthority:n.authority,requestAzureCloudOptions:n.azureCloudOptions,requestExtraQueryParameters:n.extraQueryParameters,account:n.account,authority:f});return K(Vo,Ko,this.logger,this.performanceClient,a)(S,N,p.verifier,this.apiId,this.config,F,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}else return K(Tg,hg,this.logger,this.performanceClient,a)(S,N,this.apiId,this.config,f,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}logout(){return Promise.reject(ne(ng))}async silentTokenHelper(n,a){const o=a.correlationId,r=await K(xs,Ns,this.logger,this.performanceClient,o)(this.performanceClient,this.logger,o),d={...a,codeChallenge:r.challenge};if(a.httpMethod===zo.POST)await K(Vk,Zh,this.logger,this.performanceClient,o)(this.config,n.authority,d,this.logger,this.performanceClient);else{const p=await K(vg,Qf,this.logger,this.performanceClient,o)(this.config,n.authority,d,this.logger,this.performanceClient);await K(Gk,Zh,this.logger,this.performanceClient,o)(p,this.performanceClient,this.logger,o)}const h=this.config.auth.OIDCOptions.responseMode,f=await K(Ho,iu,this.logger,this.performanceClient,o)(this.config.system.iframeBridgeTimeout,this.logger,this.browserCrypto,a),y=$n(il,nl,this.logger,this.performanceClient,o)(f,h,this.logger,this.correlationId);return K(Vo,Ko,this.logger,this.performanceClient,o)(a,y,r.verifier,this.apiId,this.config,n,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}}class qk extends Xo{async acquireToken(n){const a=await K(pg,dg,this.logger,this.performanceClient,n.correlationId)(n,this.config,this.performanceClient,this.logger,this.correlationId),o={...n,...a};n.redirectUri&&(o.redirectUri=au(n.redirectUri,this.config.auth.redirectUri,this.logger,this.correlationId));const r=hn(Le.acquireTokenSilent_silentFlow,this.config.auth.clientId,this.correlationId,this.browserStorage,this.logger),d=await this.createRefreshTokenClient({serverTelemetryManager:r,authorityUrl:o.authority,azureCloudOptions:o.azureCloudOptions,account:o.account});return K(d.acquireTokenByRefreshToken.bind(d),E_,this.logger,this.performanceClient,n.correlationId)(o,Le.acquireTokenSilent_silentFlow).catch(h=>{throw h.setCorrelationId(this.correlationId),r.cacheFailedRequest(h),h})}logout(){return Promise.reject(ne(ng))}async createRefreshTokenClient(n){const a=await K(this.getClientConfiguration.bind(this),yu,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:n.serverTelemetryManager,requestAuthority:n.authorityUrl,requestAzureCloudOptions:n.azureCloudOptions,requestExtraQueryParameters:n.extraQueryParameters,account:n.account});return new W0(a,this.performanceClient)}}class Jk extends iS{constructor(n,a){super(n,a),this.includeRedirectUri=!1}}class Xk extends Xo{constructor(n,a,o,r,d,h,f,y,p,S){super(n,a,o,r,d,h,y,p,S),this.apiId=f}async acquireToken(n){if(!n.code)throw ne(Mw);const a=await K(Su,vu,this.logger,this.performanceClient,this.correlationId)(n,ve.Silent,this.config,this.browserCrypto,this.browserStorage,this.logger,this.performanceClient,this.correlationId),o=hn(this.apiId,this.config.auth.clientId,this.correlationId,this.browserStorage,this.logger);try{const r={...a,code:n.code},d=await K(this.getClientConfiguration.bind(this),yu,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:o,requestAuthority:a.authority,requestAzureCloudOptions:a.azureCloudOptions,requestExtraQueryParameters:a.extraQueryParameters,account:a.account}),h=new Jk(d,this.performanceClient);this.logger.verbose("1uic5e",this.correlationId);const f=new RS(h,this.browserStorage,r,this.logger,this.performanceClient);return await K(f.handleCodeResponseFromServer.bind(f),JC,this.logger,this.performanceClient,this.correlationId)({code:n.code,msgraph_host:n.msGraphHost,cloud_graph_host_name:n.cloudGraphHostName,cloud_instance_host_name:n.cloudInstanceHostName},a,this.apiId,!1)}catch(r){throw r instanceof tt&&(r.setCorrelationId(this.correlationId),o.cacheFailedRequest(r)),r}}logout(){return Promise.reject(ne(ng))}}function Zk(l,n,a,o){const r=window.msal?.clientIds||[],d=r.length,h=r.filter(f=>f===l).length;h>1&&a.warning("1e88vg",o),n.add({msalInstanceCount:d,sameClientIdInstanceCount:h})}function Lc(l,n,a){try{ug(l)}catch(o){throw n.end({success:!1},o,a),o}}class bg{constructor(n){this.operatingContext=n,this.isBrowserEnvironment=this.operatingContext.isBrowserEnvironment(),this.config=n.getConfig(),this.initialized=!1,this.logger=this.operatingContext.getLogger(),this.networkClient=this.config.system.networkClient,this.navigationClient=this.config.system.navigationClient,this.redirectResponse=new Map,this.hybridAuthCodeResponses=new Map,this.performanceClient=this.config.telemetry.client,this.browserCrypto=this.isBrowserEnvironment?new Yi(this.logger,this.performanceClient):Zc,this.eventHandler=new mk(this.logger),this.browserStorage=this.isBrowserEnvironment?new vf(this.config.auth.clientId,this.config.cache,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler,Z0(this.config.auth)):ck(this.config.auth.clientId,this.logger,this.performanceClient,this.eventHandler);const a={cacheLocation:Kn.MemoryStorage,cacheRetentionDays:5};this.nativeInternalStorage=new vf(this.config.auth.clientId,a,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler),this.activeSilentTokenRequests=new Map,this.trackPageVisibility=this.trackPageVisibility.bind(this),this.trackPageVisibilityWithMeasurement=this.trackPageVisibilityWithMeasurement.bind(this)}static async createController(n,a){const o=new bg(n);return await o.initialize(a),o}trackPageVisibility(n){n&&(this.logger.info("16v6hv",n),this.performanceClient.incrementFields({visibilityChangeCount:1},n))}async initialize(n){const a=this.getRequestCorrelationId(n);if(this.logger.trace("1f7joy",a),this.initialized){this.logger.info("061m5x",a);return}if(!this.isBrowserEnvironment){this.logger.info("19fvpi",a),this.initialized=!0,this.eventHandler.emitEvent(Se.INITIALIZE_END,a);return}const o=this.config.system.allowPlatformBroker,r=this.performanceClient.startMeasurement($_,a);if(this.eventHandler.emitEvent(Se.INITIALIZE_START,a),this.logMultipleInstances(r,a),await K(this.browserStorage.initialize.bind(this.browserStorage),b_,this.logger,this.performanceClient,a)(a),o)try{this.platformAuthProvider=await zk(this.logger,this.performanceClient,a,this.config.system.nativeBrokerHandshakeTimeout)}catch(d){this.logger.verbose(d,a)}this.config.cache.cacheLocation===Kn.LocalStorage&&this.eventHandler.subscribeCrossTab(),!this.config.system.navigatePopups&&await this.preGeneratePkceCodes(a),this.initialized=!0,this.eventHandler.emitEvent(Se.INITIALIZE_END,a),r.end({allowPlatformBroker:o,success:!0})}async handleRedirectPromise(n){if(this.logger.verbose("02l8bm",""),AS(this.initialized),this.isBrowserEnvironment){const a=n?.hash||"";let o=this.redirectResponse.get(a);return typeof o>"u"?(o=this.handleRedirectPromiseInternal(n),this.redirectResponse.set(a,o),this.logger.verbose("1wn9kp","")):this.logger.verbose("0w0gm3",""),o}return this.logger.verbose("12xi63",""),null}async handleRedirectPromiseInternal(n){if(!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("0le6uv",""),null;if(this.browserStorage.getInteractionInProgress()?.type===Ma.SIGNOUT)return this.logger.verbose("1ywcv2",""),this.browserStorage.setInteractionInProgress(!1),Promise.resolve(null);const o=this.getAllAccounts(),r=this.browserStorage.getCachedNativeRequest(),d=r&&this.platformAuthProvider&&!n?.hash;let h,f;try{if(d&&this.platformAuthProvider){const y=r?.correlationId||"";this.eventHandler.emitEvent(Se.HANDLE_REDIRECT_START,y,ve.Redirect),h=this.performanceClient.startMeasurement($h,y),this.logger.trace("12v7is",y);const p=new Fc(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Le.handleRedirectPromise,this.performanceClient,this.platformAuthProvider,r.accountId,this.nativeInternalStorage,r.correlationId);f=K(p.handleRedirectPromise.bind(p),x_,this.logger,this.performanceClient,h.event.correlationId)(this.performanceClient,h.event.correlationId)}else{const[y,p]=this.browserStorage.getCachedRequest(""),S=y.correlationId;this.eventHandler.emitEvent(Se.HANDLE_REDIRECT_START,S,ve.Redirect),h=this.performanceClient.startMeasurement($h,S),this.logger.trace("0znzs5",S);const T=this.createRedirectClient(S);f=K(T.handleRedirectPromise.bind(T),M_,this.logger,this.performanceClient,h.event.correlationId)(y,p,h,n)}}catch(y){throw this.browserStorage.resetRequestCache(""),y}return f.then(y=>(y?(this.browserStorage.resetRequestCache(y.correlationId),this.eventHandler.emitEvent(Se.ACQUIRE_TOKEN_SUCCESS,y.correlationId,ve.Redirect,y),this.logger.verbose("0ui8f5",y.correlationId),o.length<this.getAllAccounts().length&&(this.eventHandler.emitEvent(Se.LOGIN_SUCCESS,y.correlationId,ve.Redirect,y.account),this.logger.verbose("16im3l",y.correlationId)),h.end({success:!0},void 0,y.account)):h.event.errorCode?h.end({success:!1},void 0):h.discard(),this.eventHandler.emitEvent(Se.HANDLE_REDIRECT_END,h.event.correlationId,ve.Redirect),y)).catch(y=>{this.browserStorage.resetRequestCache(h.event.correlationId);const p=y;throw this.eventHandler.emitEvent(Se.ACQUIRE_TOKEN_FAILURE,h.event.correlationId,ve.Redirect,null,p),this.eventHandler.emitEvent(Se.HANDLE_REDIRECT_END,h.event.correlationId,ve.Redirect),h.end({success:!1},p),y})}async acquireTokenRedirect(n){const a=this.getRequestCorrelationId(n);this.logger.verbose("0os66p",a);const o=this.performanceClient.startMeasurement(X_,a);o.add({scenarioId:n.scenarioId});const r=this.config.auth.onRedirectNavigate;this.config.auth.onRedirectNavigate=d=>{const h=typeof r=="function"?r(d):void 0;return o.add({navigateCallbackResult:h!==!1}),o.event=o.end({success:!0},void 0,n.account)||o.event,h};try{Pv(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0,Ma.SIGNIN),this.eventHandler.emitEvent(Se.ACQUIRE_TOKEN_START,a,ve.Redirect,n);let d;return this.platformAuthProvider&&this.canUsePlatformBroker(n)?d=new Fc(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Le.acquireTokenRedirect,this.performanceClient,this.platformAuthProvider,this.getNativeAccountId(n),this.nativeInternalStorage,a).acquireTokenRedirect(n,o).catch(f=>{if(f instanceof mi&&jo(f))return this.platformAuthProvider=void 0,this.createRedirectClient(a).acquireToken(n);if(f instanceof Wn)return this.logger.verbose("1ipyz4",a),this.createRedirectClient(a).acquireToken(n);throw f}):d=this.createRedirectClient(a).acquireToken(n),await d}catch(d){throw this.browserStorage.resetRequestCache(a),o.event.status===2?this.performanceClient.startMeasurement($h,a).end({success:!1},d,n.account):o.end({success:!1},d,n.account),this.eventHandler.emitEvent(Se.ACQUIRE_TOKEN_FAILURE,a,ve.Redirect,null,d),d}}acquireTokenPopup(n){const a=this.getRequestCorrelationId(n),o=this.performanceClient.startMeasurement(J_,a);o.add({scenarioId:n.scenarioId});try{this.logger.verbose("0ch87b",a),Lc(this.initialized,o,n.account),this.browserStorage.setInteractionInProgress(!0,Ma.SIGNIN,n.overrideInteractionInProgress,a)}catch(f){return Promise.reject(f)}const r=this.getAllAccounts();this.eventHandler.emitEvent(Se.ACQUIRE_TOKEN_START,a,ve.Popup,n);let d;const h=this.getPreGeneratedPkceCodes(a);return this.canUsePlatformBroker(n)?d=this.acquireTokenNative({...n,correlationId:a},Le.acquireTokenPopup).then(f=>(o.end({success:!0,isNativeBroker:!0},void 0,f.account),f)).catch(f=>{if(f instanceof mi&&jo(f))return this.platformAuthProvider=void 0,this.createPopupClient(a).acquireToken(n,h);if(f instanceof Wn)return this.logger.verbose("0yy5fw",a),this.createPopupClient(a).acquireToken(n,h);throw f}):d=this.createPopupClient(a).acquireToken(n,h),d.then(f=>{const y=r.length<this.getAllAccounts().length;return this.eventHandler.emitEvent(Se.ACQUIRE_TOKEN_SUCCESS,a,ve.Popup,f),y&&this.eventHandler.emitEvent(Se.LOGIN_SUCCESS,a,ve.Popup,f.account),o.end({success:!0,accessTokenSize:f.accessToken.length,idTokenSize:f.idToken.length},void 0,f.account),f}).catch(f=>(this.eventHandler.emitEvent(Se.ACQUIRE_TOKEN_FAILURE,a,ve.Popup,null,f),o.end({success:!1},f,n.account),Promise.reject(f))).finally(async()=>{this.browserStorage.setInteractionInProgress(!1),this.config.system.navigatePopups||await this.preGeneratePkceCodes(a)})}trackPageVisibilityWithMeasurement(){const n=this.ssoSilentMeasurement||this.acquireTokenByCodeAsyncMeasurement;n&&n.increment({visibilityChangeCount:1})}async ssoSilent(n){const a=this.getRequestCorrelationId(n),o={...n,prompt:n.prompt,correlationId:a};this.ssoSilentMeasurement=this.performanceClient.startMeasurement(Z_,a),this.ssoSilentMeasurement?.add({scenarioId:n.scenarioId}),Lc(this.initialized,this.ssoSilentMeasurement,n.account),this.ssoSilentMeasurement?.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement);const r=this.getAllAccounts();this.logger.verbose("0w1b45",a),this.eventHandler.emitEvent(Se.ACQUIRE_TOKEN_START,a,ve.Silent,o);let d;return this.canUsePlatformBroker(o)?d=this.acquireTokenNative(o,Le.ssoSilent).catch(h=>{if(h instanceof mi&&jo(h))return this.platformAuthProvider=void 0,this.createSilentIframeClient(o.correlationId).acquireToken(o);throw h}):d=this.createSilentIframeClient(o.correlationId).acquireToken(o),d.then(h=>{const f=r.length<this.getAllAccounts().length;return this.eventHandler.emitEvent(Se.ACQUIRE_TOKEN_SUCCESS,a,ve.Silent,h),f&&this.eventHandler.emitEvent(Se.LOGIN_SUCCESS,a,ve.Silent,h.account),this.ssoSilentMeasurement?.end({success:!0,isNativeBroker:h.fromPlatformBroker,accessTokenSize:h.accessToken.length,idTokenSize:h.idToken.length},void 0,h.account),h}).catch(h=>{throw this.eventHandler.emitEvent(Se.ACQUIRE_TOKEN_FAILURE,a,ve.Silent,null,h),this.ssoSilentMeasurement?.end({success:!1},h,n.account),h}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenByCode(n){const a=this.getRequestCorrelationId(n);this.logger.trace("0ch6ga",a);const o=this.performanceClient.startMeasurement(q_,a);Lc(this.initialized,o),this.eventHandler.emitEvent(Se.ACQUIRE_TOKEN_START,a,ve.Silent,n),o.add({scenarioId:n.scenarioId});try{if(n.code&&n.nativeAccountId)throw ne(Dw);if(n.code){const r=n.code;let d=this.hybridAuthCodeResponses.get(r);return d?(this.logger.verbose("0qgp28",a),o.discard()):(this.logger.verbose("06eh73",a),d=this.acquireTokenByCodeAsync({...n,correlationId:a}).then(h=>(this.eventHandler.emitEvent(Se.ACQUIRE_TOKEN_SUCCESS,a,ve.Silent,h),this.hybridAuthCodeResponses.delete(r),o.end({success:!0,isNativeBroker:h.fromPlatformBroker,accessTokenSize:h.accessToken.length,idTokenSize:h.idToken.length},void 0,h.account),h)).catch(h=>{throw this.hybridAuthCodeResponses.delete(r),this.eventHandler.emitEvent(Se.ACQUIRE_TOKEN_FAILURE,a,ve.Silent,null,h),o.end({success:!1},h),h}),this.hybridAuthCodeResponses.set(r,d)),await d}else if(n.nativeAccountId)if(this.canUsePlatformBroker(n,n.nativeAccountId)){const r=await this.acquireTokenNative({...n,correlationId:a},Le.acquireTokenByCode,n.nativeAccountId).catch(d=>{throw d instanceof mi&&jo(d)&&(this.platformAuthProvider=void 0),d});return o.end({success:!0},void 0,r.account),r}else throw ne(Uw);else throw ne(xw)}catch(r){throw this.eventHandler.emitEvent(Se.ACQUIRE_TOKEN_FAILURE,a,ve.Silent,null,r),o.end({success:!1},r),r}}async acquireTokenByCodeAsync(n){const a=this.getRequestCorrelationId(n);return this.logger.trace("10d9hy",a),this.acquireTokenByCodeAsyncMeasurement=this.performanceClient.startMeasurement(N_,a),this.acquireTokenByCodeAsyncMeasurement?.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),await this.createSilentAuthCodeClient(a).acquireToken(n).then(d=>(this.acquireTokenByCodeAsyncMeasurement?.end({success:!0,fromCache:d.fromCache,isNativeBroker:d.fromPlatformBroker}),d)).catch(d=>{throw this.acquireTokenByCodeAsyncMeasurement?.end({success:!1},d),d}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenFromCache(n,a){switch(a){case Xt.Default:case Xt.AccessToken:case Xt.AccessTokenAndRefreshToken:const o=this.createSilentCacheClient(n.correlationId);return K(o.acquireToken.bind(o),v_,this.logger,this.performanceClient,n.correlationId)(n);default:throw Q(bs)}}async acquireTokenByRefreshToken(n,a){switch(a){case Xt.Default:case Xt.AccessTokenAndRefreshToken:case Xt.RefreshToken:case Xt.RefreshTokenAndNetwork:const o=this.createSilentRefreshClient(n.correlationId);return K(o.acquireToken.bind(o),T_,this.logger,this.performanceClient,n.correlationId)(n);default:throw Q(bs)}}async acquireTokenBySilentIframe(n){const a=this.createSilentIframeClient(n.correlationId);return K(a.acquireToken.bind(a),C_,this.logger,this.performanceClient,n.correlationId)(n)}async logoutRedirect(n){const a=this.getRequestCorrelationId(n);return Pv(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0,Ma.SIGNOUT),this.createRedirectClient(a).logout(n)}logoutPopup(n){try{const a=this.getRequestCorrelationId(n);return ug(this.initialized),this.browserStorage.setInteractionInProgress(!0,Ma.SIGNOUT),this.createPopupClient(a).logout(n).finally(()=>{this.browserStorage.setInteractionInProgress(!1)})}catch(a){return Promise.reject(a)}}async clearCache(n){if(!this.isBrowserEnvironment)return;const a=this.getRequestCorrelationId(n);return this.createSilentCacheClient(a).logout(n)}getAllAccounts(n){return uk(this.logger,this.browserStorage,this.isBrowserEnvironment,this.getRequestCorrelationId(),n)}getAccount(n){return dk(n,this.logger,this.browserStorage,this.getRequestCorrelationId())}setActiveAccount(n){hk(n,this.browserStorage,this.getRequestCorrelationId())}getActiveAccount(){return fk(this.browserStorage,this.getRequestCorrelationId())}async hydrateCache(n,a){this.logger.verbose("16jycr",n.correlationId);const o=$b(n.account,n.cloudGraphHostName,n.msGraphHost);return await this.browserStorage.setAccount(o,n.correlationId,ws(n.idTokenClaims),Le.hydrateCache),n.fromPlatformBroker?(this.logger.verbose("1fxyu8",n.correlationId),this.nativeInternalStorage.hydrateCache(n,a)):this.browserStorage.hydrateCache(n,a)}async acquireTokenNative(n,a,o,r){const d=this.getRequestCorrelationId(n);if(this.logger.trace("0b9y3p",d),!this.platformAuthProvider)throw ne(gS);return new Fc(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,a,this.performanceClient,this.platformAuthProvider,o||this.getNativeAccountId(n),this.nativeInternalStorage,d).acquireToken(n,r)}canUsePlatformBroker(n,a){const o=this.getRequestCorrelationId(n);if(this.logger.trace("1n9lbl",o),!this.platformAuthProvider)return this.logger.trace("0vnu11",o),!1;if(!dl(this.config,this.logger,o,this.platformAuthProvider,n.authenticationScheme))return this.logger.trace("1m4bzf",o),!1;if(n.prompt)switch(n.prompt){case un.NONE:case un.CONSENT:case un.LOGIN:this.logger.trace("0vdv8e",o);break;default:return this.logger.trace("0pdzw6",o),!1}return!a&&!this.getNativeAccountId(n)?(this.logger.trace("16lbtk",o),!1):!0}getNativeAccountId(n){const a=n.account||this.getAccount({loginHint:n.loginHint,sid:n.sid})||this.getActiveAccount();return a&&a.nativeAccountId||""}createPopupClient(n){return new Bk(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,n,this.platformAuthProvider)}createRedirectClient(n){return new Pk(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,n,this.platformAuthProvider)}createSilentIframeClient(n){return new Qk(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Le.ssoSilent,this.performanceClient,this.nativeInternalStorage,n,this.platformAuthProvider)}createSilentCacheClient(n){return new NS(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,n,this.platformAuthProvider)}createSilentRefreshClient(n){return new qk(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,n,this.platformAuthProvider)}createSilentAuthCodeClient(n){return new Xk(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Le.acquireTokenByCode,this.performanceClient,n,this.platformAuthProvider)}addEventCallback(n,a){return this.eventHandler.addEventCallback(n,a)}removeEventCallback(n){this.eventHandler.removeEventCallback(n)}addPerformanceCallback(n){return ES(),this.performanceClient.addPerformanceCallback(n)}removePerformanceCallback(n){return this.performanceClient.removePerformanceCallback(n)}getLogger(){return this.logger}setLogger(n){this.logger=n}initializeWrapperLibrary(n,a){this.browserStorage.setWrapperMetadata(n,a)}setNavigationClient(n){this.navigationClient=n}getConfiguration(){return this.config}getPerformanceClient(){return this.performanceClient}isBrowserEnv(){return this.isBrowserEnvironment}getRequestCorrelationId(n){return n?.correlationId?n.correlationId:this.isBrowserEnvironment?Rs():""}async loginRedirect(n){const a=this.getRequestCorrelationId(n);return this.logger.verbose("0lz9hf",a),this.acquireTokenRedirect({correlationId:a,...n||Uv})}loginPopup(n){const a=this.getRequestCorrelationId(n);return this.logger.verbose("0qw7v5",a),this.acquireTokenPopup({correlationId:a,...n||Uv})}async acquireTokenSilent(n){const a=this.getRequestCorrelationId(n),o=this.performanceClient.startMeasurement(Q_,a);o.add({cacheLookupPolicy:n.cacheLookupPolicy,scenarioId:n.scenarioId}),Lc(this.initialized,o,n.account),this.logger.verbose("0x1c4s",a);const r=n.account||this.getActiveAccount();if(!r)throw ne(kw);return this.acquireTokenSilentDeduped(n,r,a).then(d=>(o.end({success:!0,fromCache:d.fromCache,isNativeBroker:d.fromPlatformBroker,accessTokenSize:d.accessToken.length,idTokenSize:d.idToken.length},void 0,d.account),{...d,state:n.state,correlationId:a})).catch(d=>{throw d instanceof tt&&d.setCorrelationId(a),o.end({success:!1},d,r),d})}async acquireTokenSilentDeduped(n,a,o){const r=hu(this.config.auth.clientId,{...n,authority:n.authority||this.config.auth.authority},a.homeAccountId),d=JSON.stringify(r),h=this.activeSilentTokenRequests.get(d);if(typeof h>"u"){this.logger.verbose("0fcjbk",o),this.performanceClient.addFields({deduped:!1},o);const f=K(this.acquireTokenSilentAsync.bind(this),m_,this.logger,this.performanceClient,o)({...n,correlationId:o},a);return this.activeSilentTokenRequests.set(d,f),f.finally(()=>{this.activeSilentTokenRequests.delete(d)})}else return this.logger.verbose("1yq7nb",o),this.performanceClient.addFields({deduped:!0},o),h}async acquireTokenSilentAsync(n,a){const o=()=>this.trackPageVisibility(n.correlationId);this.eventHandler.emitEvent(Se.ACQUIRE_TOKEN_START,n.correlationId,ve.Silent,n),n.correlationId&&this.performanceClient.incrementFields({visibilityChangeCount:0},n.correlationId),document.addEventListener("visibilitychange",o);const r=await K(pk,A_,this.logger,this.performanceClient,n.correlationId)(n,a,this.config,this.performanceClient,this.logger),d=n.cacheLookupPolicy||Xt.Default;return this.acquireTokenSilentNoIframe(r,d).catch(async f=>{if($k(f,d)){const p=`${f.errorCode}${f.subError?`|${f.subError}`:""}`;if(this.performanceClient.addFields({silentRefreshReason:p},n.correlationId),this.activeIframeRequest)if(d!==Xt.Skip){const[S,T]=this.activeIframeRequest;this.logger.verbose("1w8fso",r.correlationId);const k=this.performanceClient.startMeasurement(S_,r.correlationId);k.add({awaitIframeCorrelationId:T});const N=await S;if(k.end({success:N}),N)return this.logger.verbose("0ywzzi",r.correlationId),this.acquireTokenSilentNoIframe(r,d);throw this.logger.info("17y14q",r.correlationId),f}else return this.logger.warning("1bd4p8",r.correlationId),K(this.acquireTokenBySilentIframe.bind(this),Gv,this.logger,this.performanceClient,r.correlationId)(r);else{let S;return this.activeIframeRequest=[new Promise(T=>{S=T}),r.correlationId],this.logger.verbose("0rh08z",r.correlationId),K(this.acquireTokenBySilentIframe.bind(this),Gv,this.logger,this.performanceClient,r.correlationId)(r).then(T=>(S(!0),T)).catch(T=>{throw S(!1),T}).finally(()=>{this.activeIframeRequest=void 0})}}else throw f}).then(f=>(this.eventHandler.emitEvent(Se.ACQUIRE_TOKEN_SUCCESS,n.correlationId,ve.Silent,f),n.correlationId&&this.performanceClient.addFields({fromCache:f.fromCache,isNativeBroker:f.fromPlatformBroker},n.correlationId),f)).catch(f=>{throw this.eventHandler.emitEvent(Se.ACQUIRE_TOKEN_FAILURE,n.correlationId,ve.Silent,null,f),f}).finally(()=>{document.removeEventListener("visibilitychange",o)})}async acquireTokenSilentNoIframe(n,a){return dl(this.config,this.logger,n.correlationId,this.platformAuthProvider,n.authenticationScheme)&&n.account.nativeAccountId?(this.logger.verbose("0sczo4",n.correlationId),this.acquireTokenNative(n,Le.acquireTokenSilent_silentFlow,n.account.nativeAccountId,a).catch(async o=>{throw o instanceof mi&&jo(o)?(this.logger.verbose("07rkmb",n.correlationId),this.platformAuthProvider=void 0,Q(bs)):o})):(this.logger.verbose("0ox81t",n.correlationId),a===Xt.AccessToken&&this.logger.verbose("0fvwxe",n.correlationId),K(this.acquireTokenFromCache.bind(this),f_,this.logger,this.performanceClient,n.correlationId)(n,a).catch(o=>{if(a===Xt.AccessToken)throw o;return this.eventHandler.emitEvent(Se.ACQUIRE_TOKEN_NETWORK_START,n.correlationId,ve.Silent,n),K(this.acquireTokenByRefreshToken.bind(this),g_,this.logger,this.performanceClient,n.correlationId)(n,a)}))}async preGeneratePkceCodes(n){return this.logger.verbose("1x6uj6",n),this.pkceCode=await K(xs,Ns,this.logger,this.performanceClient,n)(this.performanceClient,this.logger,n),Promise.resolve()}getPreGeneratedPkceCodes(n){const a=this.pkceCode?{...this.pkceCode}:void 0;return this.pkceCode=void 0,a?this.logger.verbose("12js1o",n):this.logger.verbose("1oe9ci",n),this.performanceClient.addFields({usePreGeneratedPkce:!!a},n),a}logMultipleInstances(n,a){const o=this.config.auth.clientId;if(!window)return;window.msal=window.msal||{},window.msal.clientIds=window.msal.clientIds||[],window.msal.clientIds.length>0&&this.logger.verbose("1qtz3l",a),window.msal.clientIds.push(o),Zk(o,n,this.logger,a)}}function $k(l,n){const a=!(l instanceof Wn&&l.subError!==Yf),o=l.errorCode===zn.INVALID_GRANT_ERROR||l.errorCode===bs,r=a&&o||l.errorCode===df||l.errorCode===YC,d=gw.includes(n);return r&&d}class wg{static loggerCallback(n,a){switch(n){case rt.Error:console.error(a);return;case rt.Info:console.info(a);return;case rt.Verbose:console.debug(a);return;case rt.Warning:console.warn(a);return;default:console.log(a);return}}constructor(n){this.browserEnvironment=typeof window<"u",this.config=Hk(n,this.browserEnvironment);let a;try{a=window[Kn.SessionStorage]}catch{}const o=a?.getItem(ek),r=a?.getItem(tk)?.toLowerCase(),d=r==="true"?!0:r==="false"?!1:void 0,h={...this.config.system.loggerOptions},f=o&&Object.keys(rt).includes(o)?rt[o]:void 0;f&&(h.loggerCallback=wg.loggerCallback,h.logLevel=f),d!==void 0&&(h.piiLoggingEnabled=d),this.logger=new yi(h,lk,Ms),this.available=!1}getConfig(){return this.config}getLogger(){return this.logger}isAvailable(){return this.available}isBrowserEnvironment(){return this.browserEnvironment}}class Yo extends wg{getModuleName(){return Yo.MODULE_NAME}getId(){return Yo.ID}async initialize(n){return this.available=typeof window<"u",this.available}}Yo.MODULE_NAME="";Yo.ID="StandardOperatingContext";class Wk{constructor(n,a){this.controller=a||new bg(new Yo(n))}async initialize(n){return this.controller.initialize(n)}async acquireTokenPopup(n){return this.controller.acquireTokenPopup(n)}acquireTokenRedirect(n){return this.controller.acquireTokenRedirect(n)}acquireTokenSilent(n){return this.controller.acquireTokenSilent(n)}acquireTokenByCode(n){return this.controller.acquireTokenByCode(n)}addEventCallback(n,a){return this.controller.addEventCallback(n,a)}removeEventCallback(n){return this.controller.removeEventCallback(n)}addPerformanceCallback(n){return this.controller.addPerformanceCallback(n)}removePerformanceCallback(n){return this.controller.removePerformanceCallback(n)}getAccount(n){return this.controller.getAccount(n)}getAllAccounts(n){return this.controller.getAllAccounts(n)}handleRedirectPromise(n){return this.controller.handleRedirectPromise(n)}loginPopup(n){return this.controller.loginPopup(n)}loginRedirect(n){return this.controller.loginRedirect(n)}logoutRedirect(n){return this.controller.logoutRedirect(n)}logoutPopup(n){return this.controller.logoutPopup(n)}ssoSilent(n){return this.controller.ssoSilent(n)}getLogger(){return this.controller.getLogger()}setLogger(n){this.controller.setLogger(n)}setActiveAccount(n){this.controller.setActiveAccount(n)}getActiveAccount(){return this.controller.getActiveAccount()}initializeWrapperLibrary(n,a){return this.controller.initializeWrapperLibrary(n,a)}setNavigationClient(n){this.controller.setNavigationClient(n)}getConfiguration(){return this.controller.getConfiguration()}async hydrateCache(n,a){return this.controller.hydrateCache(n,a)}clearCache(n){return this.controller.clearCache(n)}}const _g=typeof window<"u"&&!!window.electronOutlook,eI=_g?null:{auth:{clientId:"893adac7-4ea6-44e3-b2fe-e7bd49f64814",authority:"https://login.microsoftonline.com/d8d598e0-2fb2-4605-8514-1967b50e2bd6",redirectUri:window.location.origin+window.location.pathname},cache:{cacheLocation:"localStorage",storeAuthStateInCookie:!1}},US=["Calendars.ReadWrite.Shared"],tI="https://graph.microsoft.com/v1.0";let jS=null;const Bc=_g?null:new Wk(eI),nI=!_g&&Bc?Bc.initialize().then(()=>Bc.handleRedirectPromise()).then(l=>(l&&console.log("MSAL redirect login succeeded:",l.account?.username),Bc)).catch(l=>(console.error("MSAL init failed:",l),jS=l?.message||String(l),null)):Promise.resolve(null);function iI(){return jS}async function aI(){return nI}async function sI(l){const n=l.getAllAccounts();if(n.length===0)return null;try{return(await l.acquireTokenSilent({scopes:US,account:n[0]})).accessToken}catch{return null}}function oI(l){l.loginRedirect({scopes:US})}async function rI(l){l.getAllAccounts().length>0&&l.clearCache()}async function lI(l,n,a){const o=new URLSearchParams({startDateTime:`${n}T00:00:00`,endDateTime:`${a}T23:59:59`,$top:"100",$select:"subject,start,end,showAs,isAllDay,isCancelled,attendees,categories",$orderby:"start/dateTime"}),r=[];let d=`${tI}/me/calendarView?${o}`;for(;d;){const h=await fetch(d,{headers:{Authorization:`Bearer ${l}`}});if(!h.ok)throw h.status===401?new Error("outlook_token_expired"):new Error(`Graph API error: ${h.status}`);const f=await h.json();r.push(...f.value||[]),d=f["@odata.nextLink"]||null}return r}const cI={busy:"BUSY",oof:"OOF",tentative:"TENTATIVE",free:"FREE",workingElsewhere:"WORKING-ELSEWHERE",unknown:"BUSY"};function HS(l){const n=new Date(l.start.dateTime),a=new Date(l.end.dateTime),o=n.getFullYear()+"-"+String(n.getMonth()+1).padStart(2,"0")+"-"+String(n.getDate()).padStart(2,"0"),r=String(n.getHours()).padStart(2,"0")+":"+String(n.getMinutes()).padStart(2,"0"),d=String(a.getHours()).padStart(2,"0")+":"+String(a.getMinutes()).padStart(2,"0");return{name:l.subject||"Outlook Event",date:o,start:r,end:d,status:cI[l.showAs]||"BUSY",isMeeting:(l.attendees?.length||0)>0,categories:l.categories||[],isAllDay:l.isAllDay||!1,isCancelled:l.isCancelled||!1,graphId:l.id}}const uI=Object.freeze(Object.defineProperty({__proto__:null,acquireTokenSilent:sI,fetchCalendarEvents:lI,getInitializedMsal:aI,getMsalInitError:iI,graphEventToParsedFormat:HS,loginRedirect:oI,logout:rI},Symbol.toStringTag,{value:"Module"})),Gi=typeof window<"u"&&window.electronOutlook,Wr=Gi?Promise.resolve(null):DE(()=>Promise.resolve().then(()=>uI),void 0,import.meta.url).catch(()=>null);function dI({events:l,setEvents:n,settings:a,pushUndo:o,minDate:r,maxDate:d,tags:h}){const[f,y]=H.useState(!1),[p,S]=H.useState("idle"),[T,k]=H.useState(null),[N,F]=H.useState(null),[q,ye]=H.useState(null),Z=H.useRef(null),de=H.useRef(!1),ae=H.useRef(null);H.useEffect(()=>{let he=!1;return Gi?Gi.checkAccount().then(Ae=>{!he&&Ae&&y(!0)}):Wr.then(Ae=>{if(!(he||!Ae))return Ae.getInitializedMsal().then(Ge=>{if(!he){if(!Ge){S("error"),k(Ae.getMsalInitError?.()||"MSAL failed to initialize");return}Z.current=Ge,Ge.getAllAccounts().length>0&&y(!0)}})}),()=>{he=!0}},[]);const je=H.useCallback(async()=>{if(Gi){S("fetching"),k(null);try{await Gi.connect(),y(!0),S("idle")}catch(he){S("error"),k(he.message||"Connection failed")}}else{if(!Z.current){const Ae=await Wr;S("error"),k(Ae?.getMsalInitError?.()||"MSAL not ready  try refreshing the page");return}(await Wr)?.loginRedirect(Z.current)}},[]),ie=H.useCallback(async()=>{if(o(),n(he=>he.filter(Ae=>!Ae.outlookSynced)),Gi)await Gi.disconnect();else if(Z.current){const he=await Wr;try{await he?.logout(Z.current)}catch{}}y(!1),S("idle"),k(null),F(null)},[o,n]),ee=H.useCallback((he,Ae)=>{const we=he.filter(fe=>!fe.categories||fe.categories.length===0?!0:!fe.categories.some(Be=>Ae.some(_e=>_e.include===!1&&_e.category.toLowerCase()===Be.toLowerCase()))).map((fe,Be)=>{let _e=null;if(fe.categories?.length>0)for(const D of fe.categories){const Y=Ae.find(te=>te.include!==!1&&te.tagId&&te.category.toLowerCase()===D.toLowerCase());if(Y){_e=Y.tagId;break}}return{id:Date.now()+Be,name:fe.name,start:fe.start,end:fe.end,date:fe.date,tagId:_e,outlookSynced:!0}});o(),n(fe=>{const Be=fe.filter(D=>!D.outlookSynced),_e=[];for(const D of we)Be.some(te=>te.name===D.name&&te.start===D.start&&te.end===D.end&&te.date===D.date)||_e.push(D);return[...Be,..._e]}),F(new Date),S("idle"),ye(null),ae.current=null},[o,n]),re=H.useCallback(he=>{const Ae=ae.current;Ae&&ee(Ae.filteredEvents,he)},[ee]),Te=H.useCallback(async()=>{if(!de.current){de.current=!0,S("fetching"),k(null);try{let he;if(Gi)he=await Gi.fetchEvents(r,d);else{if(!Z.current)throw new Error("Not connected");const X=await Wr;let oe=await X.acquireTokenSilent(Z.current);if(!oe){X.loginRedirect(Z.current);return}he=await X.fetchCalendarEvents(oe,r,d)}const Ae=he.filter(X=>!X.isCancelled).map(HS).filter(X=>!X.isAllDay).filter(X=>X.start!==X.end),Ge={...a,icsCategoryRules:[]},we=sC(Ae,Ge,r,d);if(we.length===0){o(),n(X=>X.filter(oe=>!oe.outlookSynced)),F(new Date),S("idle");return}const fe={};let Be=0;for(const X of we)if(X.categories?.length>0)for(const oe of X.categories)fe[oe]=(fe[oe]||0)+1;else Be++;const _e=Object.keys(fe).sort();if(_e.length===0){ee(we,[]);return}const D=a.icsCategoryRules||[];if(_e.every(X=>D.some(oe=>oe.category.toLowerCase()===X.toLowerCase()))){ee(we,D);return}const te={filteredEvents:we,catCounts:fe,uncategorized:Be};ae.current=te,ye(te),S("idle")}catch(he){S("error"),k(he.message)}finally{de.current=!1}}},[r,d,a,o,n,ee]);return H.useEffect(()=>{f&&Te()},[f,r,d]),H.useEffect(()=>{if(!f)return;const he=setInterval(Te,300*1e3);return()=>clearInterval(he)},[f,Te]),{outlookAvailable:!0,outlookConnected:f,outlookStatus:p,outlookError:T,lastFetched:N,connectOutlook:je,disconnectOutlook:ie,refreshOutlookEvents:Te,pendingOutlookImport:q,finishOutlookImport:re}}const hI=Object.freeze(Object.defineProperty({__proto__:null,useOutlook:dI},Symbol.toStringTag,{value:"Module"}));function fI(){return{syncIndicator:null,syncSettingsUI:null}}function gI(){return{outlookAvailable:!1,outlookConnected:!1,outlookStatus:"idle",outlookError:null,lastFetched:null,connectOutlook:()=>{},disconnectOutlook:()=>{},refreshOutlookEvents:()=>{},pendingOutlookImport:null,finishOutlookImport:()=>{}}}const mI=Object.assign({"./useSync.jsx":NE}),pI=mI["./useSync.jsx"]?.useSync??fI,yI=Object.assign({"./useOutlook.jsx":hI}),vI=yI["./useOutlook.jsx"]?.useOutlook??gI,CI="2026-02-26 11:11 PM CT";function zS(l){const n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(l);return n?{r:parseInt(n[1],16),g:parseInt(n[2],16),b:parseInt(n[3],16)}:{r:148,g:163,b:184}}function SI(l,n,a){const{r:o,g:r,b:d}=zS(l),h=a?{r:30,g:41,b:59}:{r:255,g:255,b:255},f=(y,p)=>Math.round(y*n+p*(1-n));return`rgb(${f(o,h.r)}, ${f(r,h.g)}, ${f(d,h.b)})`}function TI(l,n,a){const{r:o,g:r,b:d}=zS(l),h=a?{r:30,g:41,b:59}:{r:255,g:255,b:255},f={r:o*n+h.r*(1-n),g:r*n+h.g*(1-n),b:d*n+h.b*(1-n)};return(f.r*299+f.g*587+f.b*114)/1e3>150?"#1a1a1a":"#ffffff"}function EI(l,n){const[a]=l.split(":").map(Number),[o]=n.split(":").map(Number),r=l.split(":")[1];return a>=19&&a<=23&&o!==a-12?`${(a-12).toString().padStart(2,"0")}:${r}`:a>=1&&a<=6&&o!==a+12?`${(a+12).toString().padStart(2,"0")}:${r}`:l}const Oa=[.5,.75,1,1.5,2,3],Wh={small:{title:"0.7rem",time:"0.55rem",label:"Small"},medium:{title:"0.8rem",time:"0.65rem",label:"Medium"},large:{title:"0.95rem",time:"0.75rem",label:"Large"},xlarge:{title:"1.1rem",time:"0.85rem",label:"Extra Large"}},nC={workdayStart:"09:00",workdayEnd:"17:00",useExtendedHours:!0,extendedStart:"06:00",extendedEnd:"23:59",autoStartNext:!1,darkMode:!1,zoomLevel:1.5,fitMode:!0,smartDuration:!0,defaultTaskDuration:30,defaultEventDuration:60,defaultTaskColor:"#94a3b8",defaultEventColor:"#94a3b8",minFragmentMinutes:5,calendarFontSize:"medium",wrapListNames:!0,restrictTasksToWorkHours:!0,debugMode:!1,debugTimeOffset:0,icsImportBusy:!0,icsImportOof:!0,icsImportTentative:!1,icsImportFree:!1,icsImportWorkingElsewhere:!1,icsImportMeetingsOnly:!1,icsReplaceOnImport:"no",icsCategoryRules:[]},iC=["zoomLevel","fitMode","debugMode","debugTimeOffset","darkMode"],AI=[{id:1,name:"Epic Medical Center",color:"#ef4444"},{id:2,name:"Verona Hospital",color:"#667eea"},{id:3,name:"Fitchburg Health",color:"#10b981"},{id:4,name:"Internal",color:"#f59e0b"}],bI=[{id:1,name:"Tech note review",duration:30,adjustedDuration:null,completed:!1,tagId:null,pausedElapsed:0},{id:2,name:"Sherlock #12345678",duration:75,adjustedDuration:null,completed:!1,tagId:3,pausedElapsed:0},{id:3,name:"Firewatch investigation",duration:60,adjustedDuration:null,completed:!1,tagId:1,pausedElapsed:0}],wI=[{id:1,name:"EMC check-in",start:"11:00",end:"11:30",tagId:1},{id:2,name:"Workgroup meeting",start:"13:30",end:"14:30",tagId:4},{id:3,name:"Verona Hospital office hours",start:"15:00",end:"16:00",tagId:2}];function ef(){const l=localStorage.getItem("timekerper-activeTaskId");if(!l||l==="null")return null;const n=JSON.parse(l),a=localStorage.getItem("timekerper-tasks");if(!a)return null;const r=JSON.parse(a).find(q=>q.id===n&&!q.completed);if(!r||r.startedAtMin==null)return null;const d=localStorage.getItem("timekerper-settings"),h=d?JSON.parse(d):{},f=h.debugMode&&h.debugTimeOffset||0,y=rn()+f,p=localStorage.getItem("timekerper-events"),S=p?JSON.parse(p):[],T=r.startedAtDate||ht(),k=r.pauseEvents&&r.pauseEvents.length>0,N=Tf(S,r.pauseEvents||[],r.startedAtMin,y,T)+(k?0:r.pauseGapMinutes||0),F=Math.max(0,y-r.startedAtMin-N);return{id:n,taskStartTime:Date.now()-F*6e4,elapsedMinutes:F}}function _I(l,n){const a=ht(),o=l.map(d=>{let h=d;return d.startedAtMin!=null&&!d.startedAtDate&&(h={...h,startedAtDate:a}),d.workSegments?.some(f=>!f.date)&&(h={...h,workSegments:h.workSegments.map(f=>f.date?f:{...f,date:a})}),d.pauseEvents?.some(f=>!f.date)&&(h={...h,pauseEvents:h.pauseEvents.map(f=>f.date?f:{...f,date:a})}),h}),r=n.map(d=>d.date?d:{...d,date:a});return{tasks:o,events:r}}function kI(){const l=localStorage.getItem("timekerper-tasks"),n=localStorage.getItem("timekerper-events"),a=l?JSON.parse(l):bI,o=n?JSON.parse(n):wI;if(parseInt(localStorage.getItem("timekerper-migrationVersion")||"0")<1){const d=_I(a,o);return localStorage.setItem("timekerper-tasks",JSON.stringify(d.tasks)),localStorage.setItem("timekerper-events",JSON.stringify(d.events)),localStorage.setItem("timekerper-migrationVersion","1"),d}return{tasks:a,events:o}}const aC=kI();function II(){const[l,n]=H.useState(aC.tasks),[a,o]=H.useState(aC.events),[r,d]=H.useState(()=>{const m=localStorage.getItem("timekerper-settings"),E=m?{...nC,...JSON.parse(m)}:nC;return typeof E.darkMode!="boolean"&&(E.darkMode=E.darkMode==="on"||E.darkMode===!0),E}),[h,f]=H.useState(()=>{const m=localStorage.getItem("timekerper-tags");return m?JSON.parse(m):AI}),[y,p]=H.useState(()=>ef()?.id??null),[S,T]=H.useState(()=>ef()?.taskStartTime??null),[k,N]=H.useState(()=>ef()?.elapsedMinutes??0),F=r.debugMode&&r.debugTimeOffset||0,[q,ye]=H.useState(rn()+F),[Z,de]=H.useState(ht()),[ae,je]=H.useState(()=>localStorage.getItem("tk_calendarView")||"1day"),ie=H.useRef(ht()),ee=ht(),re=Z===ee,he=(new Date(ee+"T12:00:00").getDay()+6)%7,Ae=on(ee,-he),Ge=on(ee,-1),we=Ae<Ge?Ae:Ge,fe=on(ee,7),[Be,_e]=H.useState(!1),[D,Y]=H.useState(!1),[te,X]=H.useState(!1),[oe,b]=H.useState(!1),[x,J]=H.useState(null),[P,W]=H.useState(null),[le,pe]=H.useState(!0),[it,He]=H.useState(!1),[Ot,vi]=H.useState("all"),[pt,fn]=H.useState(null),[wt,yt]=H.useState([]),[La,Us]=H.useState(null),[ti,Qi]=H.useState(""),[Ba,Ka]=H.useState(30),[js,Hs]=H.useState(null),[Ht,yl]=H.useState(!1),[Zo,zs]=H.useState(""),[gn,$o]=H.useState("09:00"),[Pa,Ga]=H.useState("10:00"),[Ls,ni]=H.useState(null),[Rt,kn]=H.useState(ht()),[Yt,Wo]=H.useState(!1),[er,tr]=H.useState(""),[Va,Ci]=H.useState(null),ii=H.useRef(!1),ai=H.useRef(null),Fa=H.useRef(null),Si=H.useRef(null),nr=H.useRef(null),ir=H.useRef(null),Bs=H.useRef(null),[Ya,Tu]=H.useState(320),[vl,Cl]=H.useState(300),Qa=H.useRef(!1),qi=H.useRef(!1),[Ji,Ks]=H.useState(null),[ar,In]=H.useState(null),[lt,_t]=H.useState(null),[Ti,qa]=H.useState(null),Ei=H.useRef([]),Xi=H.useRef([]),si=H.useRef(l),mn=H.useRef(a),{syncIndicator:sr,syncSettingsUI:Zi}=pI({tasks:l,setTasks:n,events:a,setEvents:o,tags:h,setTags:f,settings:r,setSettings:d,activeTaskId:y,setActiveTaskId:p,setTaskStartTime:T,setElapsedMinutes:N,tasksRef:si,eventsRef:mn,timeOffset:F}),[,oi]=H.useState(0);H.useEffect(()=>{si.current=l},[l]),H.useEffect(()=>{mn.current=a},[a]);const Ve=H.useCallback(()=>{Ei.current=[...Ei.current.slice(-49),{tasks:si.current,events:mn.current}],Xi.current=[],oi(m=>m+1)},[]),{outlookAvailable:ri,outlookConnected:ct,outlookStatus:Qt,outlookError:Ja,lastFetched:pn,connectOutlook:Ai,disconnectOutlook:Eu,refreshOutlookEvents:or,pendingOutlookImport:Ps,finishOutlookImport:Sl}=vI({events:a,setEvents:o,settings:r,pushUndo:Ve,minDate:we,maxDate:fe,tags:h});H.useEffect(()=>{if(!Ps)return;const{catCounts:m,uncategorized:E}=Ps,I=Object.keys(m).sort(),U=r.icsCategoryRules||[],z=I.map($=>{const L=U.find(ue=>ue.category.toLowerCase()===$.toLowerCase());return L?{category:$,include:L.include,tagId:L.tagId}:{category:$,include:!0,tagId:null}});yt(z),fn({mode:"outlook-import",catCounts:m,uncategorized:E})},[Ps]);const $i=H.useCallback(()=>{const m=Ei.current;if(m.length===0)return;const E=m[m.length-1];Xi.current=[...Xi.current,{tasks:si.current,events:mn.current}],Ei.current=m.slice(0,-1),n(E.tasks),o(E.events),si.current=E.tasks,mn.current=E.events,oi(I=>I+1)},[]),bi=H.useCallback(()=>{const m=Xi.current;if(m.length===0)return;const E=m[m.length-1];Ei.current=[...Ei.current,{tasks:si.current,events:mn.current}],Xi.current=m.slice(0,-1),n(E.tasks),o(E.events),si.current=E.tasks,mn.current=E.events,oi(I=>I+1)},[]),Pn=Ei.current.length>0,$t=Xi.current.length>0,Tl=Z>we,Au=Z<fe,Wi=ae==="1day"?1:parseInt(ae)||1,Gn=H.useMemo(()=>{if(Wi===1)return ie.current=Z,[Z];const m=Wi-1;let E=ie.current;return Z>on(E,m)?E=on(Z,-m):Z<E&&(E=Z),on(E,m)>fe&&(E=on(fe,-m)),E<we&&(E=we),ie.current=E,Array.from({length:Wi},(I,U)=>on(E,U))},[Z,Wi,we,fe]),Gs=Gn.includes(ee),rr=H.useCallback(()=>{de(m=>{const E=on(m,-1);return E>=we?E:m})},[we]),zt=H.useCallback(()=>{de(m=>{const E=on(m,1);return E<=fe?E:m})},[fe]),Xa=H.useCallback(()=>{de(ht())},[]),yn=H.useCallback(m=>{je(m);const E=m==="1day"?1:parseInt(m)||1;E>1&&de(I=>on(I,E-1)>fe?on(fe,-(E-1)):I<we?we:I)},[fe,we]);H.useEffect(()=>{const m=E=>{const I=document.activeElement?.tagName?.toLowerCase();I==="input"||I==="textarea"||((E.ctrlKey||E.metaKey)&&E.key==="z"&&(E.preventDefault(),E.shiftKey?bi():$i()),(E.ctrlKey||E.metaKey)&&E.key==="y"&&(E.preventDefault(),bi()),E.key==="ArrowLeft"&&!E.ctrlKey&&!E.metaKey&&!E.shiftKey&&rr(),E.key==="ArrowRight"&&!E.ctrlKey&&!E.metaKey&&!E.shiftKey&&zt(),(E.key==="t"||E.key==="T")&&Xa())};return window.addEventListener("keydown",m),()=>window.removeEventListener("keydown",m)},[$i,bi,rr,zt,Xa]),H.useEffect(()=>{localStorage.setItem("timekerper-tasks",JSON.stringify(l))},[l]),H.useEffect(()=>{localStorage.setItem("timekerper-events",JSON.stringify(a))},[a]),H.useEffect(()=>{localStorage.setItem("timekerper-settings",JSON.stringify(r))},[r]),H.useEffect(()=>{localStorage.setItem("timekerper-tags",JSON.stringify(h))},[h]),H.useEffect(()=>{localStorage.setItem("timekerper-activeTaskId",JSON.stringify(y))},[y]),H.useEffect(()=>{localStorage.setItem("tk_calendarView",ae)},[ae]),H.useEffect(()=>{if(!y||!S)return;const m=setInterval(()=>{const E=rn()+F;ye(E);const I=l.find(U=>U.id===y);if(I&&I.startedAtMin!=null){const U=I.startedAtDate||ht(),z=Tf(a,I.pauseEvents||[],I.startedAtMin,E,U);N(Math.max(0,E-I.startedAtMin-z))}},1e3);return()=>clearInterval(m)},[y,S,F,l,a]),H.useEffect(()=>{if(y)return;const m=()=>ye(rn()+F);m();const E=setInterval(m,15e3);return()=>clearInterval(E)},[y,F]),H.useEffect(()=>{document.documentElement.setAttribute("data-theme",r.darkMode===!0?"dark":"light")},[r.darkMode]),H.useEffect(()=>{if(!oe)return;const m=E=>{nr.current&&!nr.current.contains(E.target)&&b(!1)};return document.addEventListener("mousedown",m),()=>document.removeEventListener("mousedown",m)},[oe]),H.useEffect(()=>{const m=I=>{if(Qa.current){const U=Math.max(260,Math.min(I.clientX,window.innerWidth-300));Tu(U)}else if(qi.current){const U=document.querySelector(".header")?.offsetHeight||0,z=I.clientY-U,$=window.innerHeight-U,L=Math.max(120,Math.min(z,$-200));Cl(L)}},E=()=>{Qa.current&&(Qa.current=!1,document.body.style.cursor="",document.body.style.userSelect=""),qi.current&&(qi.current=!1,document.body.style.cursor="",document.body.style.userSelect="")};return window.addEventListener("mousemove",m),window.addEventListener("mouseup",E),()=>{window.removeEventListener("mousemove",m),window.removeEventListener("mouseup",E)}},[]);const lr=H.useCallback(()=>{Qa.current=!0,document.body.style.cursor="col-resize",document.body.style.userSelect="none"},[]),ea=H.useCallback(()=>{qi.current=!0,document.body.style.cursor="row-resize",document.body.style.userSelect="none"},[]),ta=H.useMemo(()=>r.useExtendedHours?r:{...r,extendedStart:r.workdayStart,extendedEnd:r.workdayEnd},[r]),na=H.useMemo(()=>Gn.map(m=>OE(l,a,ta,y,k,m)),[Gn,l,a,ta,y,k,q]),ia=H.useMemo(()=>na.map(m=>{const E={};for(const I of m)I.type==="task"&&(E[I.taskId]=Math.max(E[I.taskId]||0,I.blockIndex+1));return E}),[na]),bu=H.useMemo(()=>na.map(m=>{const E=m.map((z,$)=>({...z,_idx:$})).filter(z=>z.type==="event");if(E.length===0)return{};const I={},U=[];for(const z of E){const $=U.filter(Ce=>Ce.endMin>z.startMin);U.length=0,U.push(...$);const L=new Set(U.map(Ce=>Ce.col));let ue=0;for(;L.has(ue);)ue++;U.push({endMin:z.endMin,col:ue}),I[z._idx]={col:ue,total:0}}for(const z of E){let $=1;for(const L of E)L.startMin<z.endMin&&L.endMin>z.startMin&&($=Math.max($,I[L._idx].col+1));I[z._idx].total=$}return I}),[na]),Lt=l.find(m=>!m.completed),Bt=l.find(m=>m.id===y),Vs=Bt&&k>(Bt.adjustedDuration??Bt.duration),qt=Oe(ta.extendedStart),wi=Oe(ta.extendedEnd),Za=Oe(r.workdayStart),vn=Oe(r.workdayEnd),At=r.zoomLevel,Fs=(wi-qt)*At,_i=Math.floor(qt/60),aa=Math.ceil(wi/60),cr=Array.from({length:aa-_i},(m,E)=>_i+E),$a=H.useCallback(m=>m&&h.find(E=>E.id===m)?.color||null,[h]),Ys=H.useCallback(m=>m&&h.find(E=>E.id===m)?.name||null,[h]),Wa=H.useCallback((m,E,I)=>{const U=(m.startMin-qt)*At,z=(m.endMin-m.startMin)*At,$={top:`${U}px`,height:`${Math.max(z,4)}px`},L=I[E];if(L&&L.total>1){const xe=`(100% - ${8+2*(L.total-1)}px) / ${L.total}`;$.left=`calc(4px + ${L.col} * (${xe} + 2px))`,$.width=`calc(${xe})`,$.right="auto"}return $},[qt,At]),Vn=H.useCallback(m=>(m.endMin-m.startMin)*At,[At]),Ie=H.useCallback((m,E)=>{(m==="extendedEnd"||m==="workdayEnd")&&E==="00:00"&&(E="23:59"),d(I=>({...I,[m]:E}))},[]),es=H.useCallback((m,E)=>{const I=m.match(/^(.+?)\s+\[(.+?)\]$/);let U=null,z=m;if(I){z=I[1];const $=I[2];U=h.find(L=>L.name===$)?.id??null}if(r.smartDuration){const $=z.match(/^(.+?)\s+(\d+)$/);if($)return{name:$[1],duration:parseInt($[2],10),tagId:U}}return{name:z,duration:E,tagId:U}},[r.smartDuration,h]),li=H.useCallback(()=>{if(!Lt)return;const m=(Lt.pausedElapsed||0)*6e4,E=rn()+F;n(I=>I.map(U=>{if(U.id!==Lt.id)return U;const z={};if(U.startedAtMin==null&&(z.startedAtMin=E,z.startedAtDate=ht()),U.pausedAtMin!=null){z.pauseGapMinutes=(U.pauseGapMinutes||0)+Math.max(0,E-U.pausedAtMin),z.pausedAtMin=null;const $=[...U.pauseEvents||[]];$.length>0&&$[$.length-1].end==null&&($[$.length-1]={...$[$.length-1],end:E}),z.pauseEvents=$}return Object.keys(z).length>0?{...U,...z}:U})),p(Lt.id),T(Date.now()-m),N(Lt.pausedElapsed||0)},[Lt,F]),Qs=()=>{const m=rn()+F,E=r.restrictTasksToWorkHours?Oe(r.workdayStart):Oe(r.extendedStart),I=r.restrictTasksToWorkHours?Oe(r.workdayEnd):Oe(r.extendedEnd);if(m<E||m>=I)return!0;const U=ht(),z=r.minFragmentMinutes||5;return a.filter($=>$.date===U).some($=>{const L=Oe($.start),ue=Oe($.end);return m>=L&&m<ue||L>m&&L-m<=z})},qs=H.useCallback(()=>{if(!y)return;Ve();const m=k,E=rn()+F;n(I=>{const U=I.map(z=>{if(z.id!==y)return z;const $=z.startedAtMin+(z.pausedElapsed||0)+(z.pauseGapMinutes||0);return{...z,completed:!0,actualDuration:m,workSegments:[...z.workSegments||[],{start:$,end:E,date:ht()}],pausedElapsed:0,pausedAtMin:null,pauseEvents:[]}});if(r.autoStartNext&&!Qs()){const z=U.find($=>!$.completed);if(z){const $=(z.pausedElapsed||0)*6e4,L=rn()+F;setTimeout(()=>{n(ue=>ue.map(Ce=>{if(Ce.id!==z.id)return Ce;const Fe={};if(Ce.startedAtMin==null&&(Fe.startedAtMin=L,Fe.startedAtDate=ht()),Ce.pausedAtMin!=null){Fe.pauseGapMinutes=(Ce.pauseGapMinutes||0)+Math.max(0,L-Ce.pausedAtMin),Fe.pausedAtMin=null;const xe=[...Ce.pauseEvents||[]];xe.length>0&&xe[xe.length-1].end==null&&(xe[xe.length-1]={...xe[xe.length-1],end:L}),Fe.pauseEvents=xe}return Object.keys(Fe).length>0?{...Ce,...Fe}:Ce})),p(z.id),T(Date.now()-$),N(z.pausedElapsed||0)},0)}else p(null),T(null),N(0)}else p(null),T(null),N(0);return U})},[y,Ve,r.autoStartNext,a,F]),El=H.useCallback(()=>{if(!y)return;Ve();const m=rn()+F;n(E=>E.map(I=>{if(I.id!==y)return I;const U=I.startedAtMin+(I.pausedElapsed||0)+(I.pauseGapMinutes||0);return{...I,pausedElapsed:k,pausedAtMin:m,workSegments:[...I.workSegments||[],{start:U,end:m,date:ht()}],pauseEvents:[...I.pauseEvents||[],{start:m,end:null,date:ht()}]}})),p(null),T(null),N(0)},[y,k,Ve,F]),ts=H.useCallback(()=>{y&&n(m=>m.map(E=>E.id===y?{...E,startedAtMin:null,startedAtDate:null,pausedAtMin:null,pauseGapMinutes:0,pausedElapsed:0,workSegments:[],pauseEvents:[]}:E)),p(null),T(null),N(0)},[y]),ki=H.useCallback(m=>{y&&(Ve(),n(E=>E.map(I=>{if(I.id!==y)return I;const U=I.adjustedDuration??I.duration;return{...I,adjustedDuration:Math.max(5,U+m)}})))},[y,Ve]),Al=()=>{J(null),Qi(""),Ka(r.defaultTaskDuration),Hs(null),yl(!1),_e(!0)},kt=m=>{J(m),Qi(m.name),Ka(m.adjustedDuration??m.duration),Hs(m.tagId),_e(!0)},On=()=>{if(ti.trim()){if(Ve(),x)n(m=>m.map(E=>E.id===x.id?{...E,name:ti,adjustedDuration:Ba,tagId:js}:E));else{const E=ti.split(`
`).map(I=>I.trim()).filter(I=>I.length>0).map((I,U)=>{const z=es(I,Ba);return{id:Date.now()+U,name:z.name,duration:z.duration,adjustedDuration:null,completed:!1,tagId:z.tagId!==null?z.tagId:js,pausedElapsed:0}});n(I=>Ht?[...E,...I]:[...I,...E])}_e(!1)}},ns=m=>{Ve(),m===y&&ts(),n(E=>E.filter(I=>I.id!==m))},is=m=>{Ve();const E=m===y,I=E?k:0,U=rn()+F;E&&!r.autoStartNext&&(p(null),T(null),N(0)),n(z=>{const $=z.map(L=>{if(L.id!==m)return L;if(L.completed)return{...L,completed:!1,actualDuration:void 0,startedAtMin:null,startedAtDate:null,pausedAtMin:null,pauseGapMinutes:0,pausedElapsed:0,workSegments:[],pauseEvents:[]};{const ue={...L,completed:!0,pausedElapsed:0,pausedAtMin:null,pauseEvents:[]};if(E){const Ce=L.startedAtMin+(L.pausedElapsed||0)+(L.pauseGapMinutes||0);ue.workSegments=[...L.workSegments||[],{start:Ce,end:U,date:ht()}],ue.actualDuration=I}else L.workSegments?.length>0?ue.actualDuration=L.workSegments.reduce((Ce,Fe)=>Ce+(Fe.end-Fe.start),0):ue.actualDuration=0;return ue}});if(E&&r.autoStartNext&&!Qs()){const L=$.find(ue=>!ue.completed);if(L){const ue=(L.pausedElapsed||0)*6e4,Ce=rn()+F;setTimeout(()=>{n(Fe=>Fe.map(xe=>{if(xe.id!==L.id)return xe;const ft={};if(xe.startedAtMin==null&&(ft.startedAtMin=Ce,ft.startedAtDate=ht()),xe.pausedAtMin!=null){ft.pauseGapMinutes=(xe.pauseGapMinutes||0)+Math.max(0,Ce-xe.pausedAtMin),ft.pausedAtMin=null;const Wt=[...xe.pauseEvents||[]];Wt.length>0&&Wt[Wt.length-1].end==null&&(Wt[Wt.length-1]={...Wt[Wt.length-1],end:Ce}),ft.pauseEvents=Wt}return Object.keys(ft).length>0?{...xe,...ft}:xe})),p(L.id),T(Date.now()-ue),N(L.pausedElapsed||0)},0)}else p(null),T(null),N(0)}return $})},wu=m=>{Ve();const E=l.findIndex(z=>z.id===m.id),I={...m,id:Date.now(),completed:!1,pausedElapsed:0,adjustedDuration:null,startedAtMin:null,startedAtDate:null,pausedAtMin:null,pauseGapMinutes:0,workSegments:[],pauseEvents:[]},U=[...l];U.splice(E+1,0,I),n(U)},ur=()=>{W(null),zs("");const m=new Date,E=m.getHours()*60+m.getMinutes(),I=Math.ceil((E+1)/30)*30,U=Math.min(I,Oe(ta.extendedEnd)-r.defaultEventDuration);$o(cn(U));const z=U+r.defaultEventDuration;Ga(cn(z)),ni(null),kn(Z),ii.current=!1,Y(!0)},Js=m=>{W(m),zs(m.name),$o(m.start),Ga(m.end),ni(m.tagId),kn(m.date||ht()),ii.current=!0,Y(!0)},as=m=>{const E=EI(m,gn);if(!ii.current){const I=Oe(gn),z=Oe(Pa)-I,$=Oe(E);Ga(cn($+z))}$o(E)},Xs=m=>{ii.current=!0,Ga(m)},Zs=()=>{const m=Zo.trim()||"Event";let E=Pa;Oe(Pa)<=Oe(gn)&&(E=cn(Oe(gn)+r.defaultEventDuration)),Ve(),o(P?I=>I.map(U=>U.id===P.id?{...U,name:m,start:gn,end:E,tagId:Ls,date:Rt}:U):I=>[...I,{id:Date.now(),name:m,start:gn,end:E,tagId:Ls,date:Rt}]),Y(!1)},bl=m=>{Ve(),o(E=>E.filter(I=>I.id!==m))},_u=H.useCallback(()=>{Ve(),y&&(p(null),T(null),N(0)),n([])},[Ve,y]),ku=H.useCallback(()=>{Ve(),o(m=>m.filter(E=>E.date!==Z))},[Ve,Z]),dr=H.useCallback(()=>{Ve(),n(m=>m.filter(E=>!E.completed))},[Ve]),Iu=H.useCallback(()=>{Ve(),o(m=>m.filter(E=>{if(E.date<Z)return!1;if(E.date===Z){if(Z<ee)return!1;if(Z===ee)return Oe(E.end)>q}return!0}))},[Ve,Z,q,ee]),Ou=(m,E)=>{Ks(E),m.dataTransfer.effectAllowed="move",m.dataTransfer.setData("text/plain",E)},Ru=(m,E)=>{m.preventDefault(),m.dataTransfer.dropEffect="move",E!==ar&&In(E)},Nu=(m,E)=>{m.preventDefault(),!(Ji===null||Ji===E)&&(Ve(),n(I=>{const U=[...I],z=U.findIndex(ue=>ue.id===Ji),$=U.findIndex(ue=>ue.id===E),[L]=U.splice(z,1);return U.splice($,0,L),U}),Ks(null),In(null))},Mu=()=>{Ks(null),In(null)},wl=()=>{f(m=>[...m,{id:Date.now(),name:"New Tag",color:"#94a3b8"}])},_l=(m,E)=>{f(I=>I.map(U=>U.id===m?{...U,...E}:U))},xu=m=>{Ve(),f(E=>E.filter(I=>I.id!==m)),n(E=>E.map(I=>I.tagId===m?{...I,tagId:null}:I)),o(E=>E.map(I=>I.tagId===m?{...I,tagId:null}:I))},Du=()=>{const m=Object.fromEntries(Object.entries(r).filter(([$])=>!iC.includes($))),E=JSON.stringify({settings:m,tags:h,version:1},null,2),I=new Blob([E],{type:"application/json"}),U=URL.createObjectURL(I),z=document.createElement("a");z.href=U,z.download="timekerper-settings.json",z.click(),URL.revokeObjectURL(U)},Uu=()=>{const E=l.filter(I=>!I.completed).map(I=>{const U=I.adjustedDuration??I.duration;return`${I.name} ${U}`}).join(`
`);navigator.clipboard.writeText(E),Ci("tasks"),setTimeout(()=>Ci(I=>I==="tasks"?null:I),1500)},hr=()=>{const m=ht(),I=a.filter(U=>U.date>=m).sort((U,z)=>U.date<z.date?-1:U.date>z.date?1:Oe(U.start)-Oe(z.start)).map(U=>{const z=Ys(U.tagId),$=z?` [${z}]`:"";return`${U.name} ${U.start}-${U.end} ${U.date}${$}`}).join(`
`);navigator.clipboard.writeText(I),Ci("events"),setTimeout(()=>Ci(U=>U==="events"?null:U),1500)},ju=()=>{const m=er.split(`
`).map($=>$.trim()).filter($=>$.length>0);if(m.length===0)return;Ve();const E=[];for(const $ of m){const L=$.match(/^(.+?)\s+(\d{1,2}:\d{2})\s*-\s*(\d{1,2}:\d{2})\s+(\d{4}-\d{2}-\d{2})(?:\s+\[(.+?)\])?$/);if(L){const ue=L[5],Ce=ue?h.find(Fe=>Fe.name===ue)?.id??null:null;E.push({id:Date.now()+E.length,name:L[1],start:L[2].padStart(5,"0"),end:L[3].padStart(5,"0"),date:L[4],tagId:Ce})}}let I=[...a];const U=[];let z=0;for(const $ of E){const L=I.findIndex(ue=>ue.name===$.name&&ue.start===$.start&&ue.end===$.end&&ue.date===$.date);L>=0?($.tagId!=null&&I[L].tagId==null&&(I[L]={...I[L],tagId:$.tagId}),z++):U.push($)}(U.length>0||I!==a)&&o([...I,...U]),z>0&&U.length===0?alert(`All ${z} event${z!==1?"s":""} already exist. Nothing imported.`):z>0&&alert(`Added ${U.length} event${U.length!==1?"s":""}. Skipped ${z} duplicate${z!==1?"s":""}.`),tr(""),Wo(!1)},Hu=m=>{const E=m.target.files?.[0];if(!E)return;const I=new FileReader;I.onload=U=>{try{const z=JSON.parse(U.target.result);if(z.settings){const $=Object.fromEntries(Object.entries(z.settings).filter(([L])=>!iC.includes(L)));d(L=>({...L,...$}))}z.tags&&Array.isArray(z.tags)&&f(z.tags)}catch{}},I.readAsText(E),m.target.value=""},$s=(m,E)=>{const I=m.filter(L=>!L.categories||L.categories.length===0?!0:!L.categories.some(ue=>E.some(Ce=>Ce.include===!1&&Ce.category.toLowerCase()===ue.toLowerCase())));if(I.length===0){alert("No events to import after applying category filters.");return}Ve();const U=I.map((L,ue)=>{let Ce=null;if(L.categories&&L.categories.length>0)for(const Fe of L.categories){const xe=E.find(ft=>ft.include!==!1&&ft.tagId&&ft.category.toLowerCase()===Fe.toLowerCase());if(xe){Ce=xe.tagId;break}}return{id:Date.now()+ue,name:L.name,start:L.start,end:L.end,date:L.date,tagId:Ce,icsImported:!0}}),z=r.icsReplaceOnImport;if(z==="ask"){Us({newEvents:U});return}Ws(U,z==="yes"||z===!0)},Ws=(m,E)=>{const I=E?a.filter(L=>!L.icsImported):a;let U=[...I];const z=[];let $=0;for(const L of m){const ue=U.findIndex(Ce=>Ce.name===L.name&&Ce.start===L.start&&Ce.end===L.end&&Ce.date===L.date);ue>=0?(L.tagId!=null&&U[ue].tagId==null&&(U[ue]={...U[ue],tagId:L.tagId}),$++):z.push(L)}if(z.length===0&&U===I){alert(`All ${$} event${$!==1?"s":""} already exist. Nothing imported.`),E&&o(I);return}o([...U,...z]),$>0&&alert(`Imported ${z.length} event${z.length!==1?"s":""}. Skipped ${$} duplicate${$!==1?"s":""}.`)},zu=m=>{const E=m.target.files?.[0];if(!E)return;const I=new FileReader;I.onload=U=>{try{const z=IE(U.target.result),$={...r,icsCategoryRules:[]},L=sC(z,$,we,fe);if(L.length===0){alert("No events to import. Check your status filter settings or date range.");return}const ue={};let Ce=0;for(const Kt of L)if(Kt.categories&&Kt.categories.length>0)for(const Pt of Kt.categories)ue[Pt]=(ue[Pt]||0)+1;else Ce++;const Fe=Object.keys(ue).sort();if(Fe.length===0){$s(L,[]);return}const xe=r.icsCategoryRules||[];if(Fe.every(Kt=>xe.some(Pt=>Pt.category.toLowerCase()===Kt.toLowerCase()))){$s(L,xe);return}const Wt=Fe.map(Kt=>{const Pt=xe.find(fr=>fr.category.toLowerCase()===Kt.toLowerCase());return Pt?{category:Kt,include:Pt.include,tagId:Pt.tagId}:{category:Kt,include:!0,tagId:null}});yt(Wt),fn({mode:"import",filteredEvents:L,catCounts:ue,uncategorized:Ce})}catch{alert("Could not parse the .ics file. Make sure it is a valid iCalendar file.")}},I.readAsText(E),m.target.value=""},Lu=()=>{yt([...r.icsCategoryRules||[]]),fn({mode:"settings"})},Bu=(m,E)=>{_t(E),m.dataTransfer.effectAllowed="move",m.dataTransfer.setData("text/plain",E)},Ku=(m,E)=>{m.preventDefault(),m.dataTransfer.dropEffect="move",E!==Ti&&qa(E)},Pu=(m,E)=>{m.preventDefault(),!(lt===null||lt===E)&&(f(I=>{const U=[...I],z=U.findIndex(ue=>ue.id===lt),$=U.findIndex(ue=>ue.id===E),[L]=U.splice(z,1);return U.splice($,0,L),U}),_t(null),qa(null))},Gu=()=>{_t(null),qa(null)},kl=()=>{const m=Oa.find(E=>E>r.zoomLevel);m!=null&&(Ie("zoomLevel",m),Ie("fitMode",!1))},Il=()=>{const m=[...Oa].reverse().find(E=>E<r.zoomLevel);m!=null&&(Ie("zoomLevel",m),Ie("fitMode",!1))},eo=H.useCallback(()=>{if(!Si.current)return;const m=Si.current.clientHeight,E=wi-qt;if(E<=0)return;const I=Math.max(.1,Math.min(5,m/E));Ie("zoomLevel",Math.floor(I*100)/100),Ie("fitMode",!0)},[wi,qt,Ie]);H.useEffect(()=>{if(!r.fitMode)return;const m=()=>{eo()};return window.addEventListener("resize",m),()=>window.removeEventListener("resize",m)},[r.fitMode,eo]);const ss=m=>{m.key==="Enter"&&(m.ctrlKey||!x&&!ti.includes(`
`)&&m.target.tagName!=="TEXTAREA")&&On(),m.key==="Enter"&&x&&On()},os=m=>{m.key==="Enter"&&(m.preventDefault(),ai.current?.focus())},Vu=m=>{m.key==="Enter"&&(m.preventDefault(),Fa.current?.focus())},Ol=m=>{m.key==="Enter"&&(m.preventDefault(),Zs())};return v.jsxs("div",{className:"app",children:[v.jsxs("header",{className:"header",children:[v.jsxs("h1",{children:["Timekerper",sr,ct&&v.jsx("span",{className:`outlook-indicator ${Qt}`,title:Qt==="error"?Ja||"Error":Qt==="fetching"?"Fetching...":pn?`Outlook: ${pn.toLocaleTimeString([],{hour:"numeric",minute:"2-digit"})}`:"Outlook connected"})]}),v.jsxs("div",{className:"header-right",children:[v.jsxs("div",{className:"undo-redo",children:[v.jsx("button",{onClick:$i,disabled:!Pn,title:"Undo (Ctrl+Z)",children:""}),v.jsx("button",{onClick:bi,disabled:!$t,title:"Redo (Ctrl+Shift+Z)",children:""})]}),v.jsxs("div",{className:"zoom-controls",children:[v.jsx("button",{onClick:Il,disabled:r.zoomLevel<=Oa[0],children:""}),v.jsxs("span",{className:"zoom-label",children:[Math.round(At*100),"%"]}),v.jsx("button",{onClick:kl,disabled:r.zoomLevel>=Oa[Oa.length-1],children:"+"}),v.jsx("button",{onClick:eo,className:"fit-btn",title:"Fit calendar to window height",children:"Fit"})]}),v.jsxs("div",{className:"view-toggle",children:[v.jsx("button",{className:ae==="1day"?"active":"",onClick:()=>yn("1day"),children:"Day"}),v.jsx("button",{className:ae==="2day"?"active":"",onClick:()=>yn("2day"),children:"2"}),v.jsx("button",{className:ae==="3day"?"active":"",onClick:()=>yn("3day"),children:"3"}),v.jsx("button",{className:ae==="4day"?"active":"",onClick:()=>yn("4day"),children:"4"}),v.jsx("button",{className:ae==="5day"?"active":"",onClick:()=>yn("5day"),children:"5"})]}),v.jsxs("div",{className:"view-menu-wrapper",ref:nr,children:[v.jsx("button",{className:"view-menu-btn",onClick:()=>b(m=>!m),title:"View options",children:"View "}),oe&&v.jsxs("div",{className:"view-menu-dropdown",children:[v.jsxs("div",{className:"view-menu-section",children:[v.jsx("span",{className:"view-menu-label",children:"Zoom"}),v.jsxs("div",{className:"view-menu-row",children:[v.jsx("button",{onClick:Il,disabled:r.zoomLevel<=Oa[0],children:""}),v.jsxs("span",{className:"view-menu-zoom-level",children:[Math.round(At*100),"%"]}),v.jsx("button",{onClick:kl,disabled:r.zoomLevel>=Oa[Oa.length-1],children:"+"}),v.jsx("button",{onClick:eo,className:"fit-btn",children:"Fit"})]})]}),v.jsxs("div",{className:"view-menu-section",children:[v.jsx("span",{className:"view-menu-label",children:"Layout"}),v.jsxs("div",{className:"view-menu-row",children:[v.jsx("button",{className:ae==="1day"?"active":"",onClick:()=>{yn("1day"),b(!1)},children:"Day"}),v.jsx("button",{className:ae==="2day"?"active":"",onClick:()=>{yn("2day"),b(!1)},children:"2"}),v.jsx("button",{className:ae==="3day"?"active":"",onClick:()=>{yn("3day"),b(!1)},children:"3"}),v.jsx("button",{className:ae==="4day"?"active":"",onClick:()=>{yn("4day"),b(!1)},children:"4"}),v.jsx("button",{className:ae==="5day"?"active":"",onClick:()=>{yn("5day"),b(!1)},children:"5"})]})]})]})]}),v.jsxs("div",{className:"date-nav",children:[v.jsx("button",{className:"date-nav-btn",onClick:rr,disabled:!Tl,title:"Previous day ()",children:""}),v.jsxs("span",{className:"date-nav-label",children:[v.jsx("span",{className:"date-long",children:EE(Z)}),v.jsx("span",{className:"date-short",children:bE(Z)})]}),v.jsx("button",{className:"date-nav-btn",onClick:zt,disabled:!Au,title:"Next day ()",children:""}),v.jsx("button",{className:"today-btn",onClick:Xa,disabled:re,title:"Go to today (T)",children:"Today"})]}),v.jsxs("button",{className:"settings-btn",onClick:()=>X(!0),title:"Settings",children:[v.jsx("span",{className:"settings-label-long",children:"Settings"}),v.jsx("span",{className:"settings-label-short",children:""})]})]})]}),v.jsxs("main",{className:"main-content",children:[v.jsxs("aside",{className:"task-panel",style:{width:`${Ya}px`,"--panel-height":`${vl}px`},children:[Gs?y&&Bt?v.jsxs("div",{className:"active-task-panel compact",children:[v.jsxs("div",{className:"active-task-header",children:[v.jsx("h2",{children:"Working On"}),v.jsxs("div",{className:"active-task-actions",children:[v.jsx("button",{className:"btn-done",onClick:qs,children:"Done"}),v.jsx("button",{className:"btn-pause",onClick:El,children:"Pause"}),v.jsx("button",{className:"btn-cancel",onClick:ts,children:"Cancel"})]})]}),v.jsx("span",{className:"active-task-name",children:Bt.name}),v.jsxs("div",{className:"active-task-row",children:[v.jsxs("div",{className:`timer ${Vs?"over":""}`,children:[v.jsx("span",{className:"elapsed",children:xo(k)}),v.jsxs("span",{className:"estimate",children:["/ ",xo(Bt.adjustedDuration??Bt.duration)]}),Bt.adjustedDuration&&Bt.adjustedDuration!==Bt.duration&&v.jsxs("span",{className:"original-estimate",children:["(orig ",xo(Bt.duration),")"]}),Vs&&v.jsxs("span",{className:"over-notice",children:["+",xo(k-(Bt.adjustedDuration??Bt.duration))," over"]})]}),v.jsxs("div",{className:"time-adjust-btns",children:[v.jsx("button",{onClick:()=>ki(-15),children:"-15"}),v.jsx("button",{onClick:()=>ki(-5),children:"-5"}),v.jsx("button",{onClick:()=>ki(5),children:"+5"}),v.jsx("button",{onClick:()=>ki(15),children:"+15"})]})]})]}):v.jsx("div",{className:"start-task-panel compact",children:Lt?v.jsxs("div",{className:"start-task-row",children:[v.jsxs("div",{className:"start-task-info",children:[v.jsx("span",{className:"next-task-label",children:"Next:"}),v.jsx("span",{className:"next-task-name",children:Lt.name}),v.jsxs("span",{className:"next-task-duration",children:[xo(Lt.adjustedDuration??Lt.duration),Lt.pausedElapsed>0&&v.jsxs("span",{className:"paused-time",children:[" (",xo(Lt.pausedElapsed)," done)"]})]})]}),v.jsx("button",{className:"btn-start",onClick:li,children:Lt.pausedElapsed>0?"Resume":"Start"})]}):v.jsx("p",{className:"no-tasks",children:"All tasks completed!"})}):v.jsx("div",{className:"date-view-banner",children:v.jsx("span",{className:"date-view-label",children:Z<ee?"Viewing past days":"Viewing future days"})}),v.jsxs("div",{className:"panel-scroll",children:[v.jsxs("div",{className:"panel-section",children:[v.jsxs("div",{className:"panel-section-header",children:[v.jsx("h2",{children:"Tasks"}),v.jsxs("span",{className:"task-summary",children:[l.filter(m=>!m.completed).length," tasks,"," ",l.filter(m=>!m.completed).reduce((m,E)=>m+(E.adjustedDuration??E.duration),0)," min"]}),l.some(m=>m.completed)&&v.jsx("button",{className:"section-toggle",onClick:()=>pe(m=>!m),children:le?`Show completed (${l.filter(m=>m.completed).length})`:"Hide completed"})]}),v.jsx("ul",{className:"task-list",children:l.map((m,E)=>{if(le&&m.completed)return null;const I=re&&!m.completed&&E===l.findIndex(z=>!z.completed),U=$a(m.tagId);return v.jsxs("li",{draggable:!m.completed,onDragStart:z=>Ou(z,m.id),onDragOver:z=>Ru(z,m.id),onDrop:z=>Nu(z,m.id),onDragEnd:Mu,className:["task-item",m.completed&&"completed",m.id===y&&"active",I&&!m.completed&&"next-up",ar===m.id&&"drag-over",Ji===m.id&&"dragging"].filter(Boolean).join(" "),title:m.name,children:[v.jsx("span",{className:"drag-handle",title:"Drag to reorder",children:""}),v.jsx("input",{type:"checkbox",checked:m.completed,onChange:()=>is(m.id),className:"task-checkbox"}),U&&v.jsx("span",{className:"tag-dot",style:{backgroundColor:U},title:Ys(m.tagId)}),v.jsx("span",{className:`task-name${r.wrapListNames?" wrap":""}`,onClick:()=>kt(m),children:m.name}),v.jsxs("span",{className:"list-end",children:[v.jsx("span",{className:"task-duration",onClick:()=>kt(m),style:{cursor:"pointer"},children:m.adjustedDuration&&m.adjustedDuration!==m.duration?`${m.adjustedDuration}m`:`${m.duration}m`}),m.pausedElapsed>0&&!m.completed&&v.jsx("span",{className:"paused-badge",title:"Paused",children:"||"}),v.jsx("button",{className:"action-btn",onClick:()=>wu(m),title:"Duplicate",children:""}),v.jsx("button",{className:"action-btn delete",onClick:()=>ns(m.id),title:"Delete",children:""})]})]},m.id)})}),v.jsxs("div",{className:"panel-section-actions",children:[v.jsx("button",{className:"add-btn",onClick:Al,children:"+ Add Task"}),l.some(m=>!m.completed)&&v.jsx("button",{className:"clear-btn",onClick:Uu,children:Va==="tasks"?"Copied!":"Export Tasks"}),l.some(m=>m.completed)&&v.jsx("button",{className:"clear-btn",onClick:dr,children:"Clear Completed"}),l.length>0&&v.jsx("button",{className:"clear-btn",onClick:_u,children:"Clear All"})]})]}),v.jsxs("div",{className:"panel-section",children:[v.jsxs("div",{className:"panel-section-header",children:[v.jsx("h2",{children:re?"Events":`Events (${new Date(Z+"T12:00:00").toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})})`}),a.some(m=>m.icsImported||m.outlookSynced)&&(()=>{const E=a.filter(z=>z.date===Z).filter(z=>!(it&&re&&Oe(z.end)<=q)),I=z=>z.icsImported||z.outlookSynced,U=Ot==="manual"?E.filter(I).length:Ot==="outlook"?E.filter(z=>!I(z)).length:0;return v.jsx("button",{className:"source-filter-toggle",onClick:()=>vi(z=>z==="all"?"manual":z==="manual"?"outlook":"all"),children:Ot==="all"?"All sources":Ot==="manual"?`Manual only${U?` (${U} hidden)`:""}`:`Outlook only${U?` (${U} hidden)`:""}`})})(),re&&a.filter(m=>m.date===Z).some(m=>Oe(m.end)<=q)&&v.jsx("button",{className:"section-toggle",onClick:()=>He(m=>!m),children:it?`Show past (${a.filter(m=>m.date===Z&&Oe(m.end)<=q).length})`:"Hide past"})]}),v.jsx("ul",{className:"event-list",children:a.filter(m=>m.date===Z).sort((m,E)=>Oe(m.start)-Oe(E.start)).map(m=>{const E=m.icsImported||m.outlookSynced;if(Ot==="manual"&&E||Ot==="outlook"&&!E)return null;const I=re?Oe(m.end)<=q:Z<ee;if(it&&I)return null;const U=$a(m.tagId);return v.jsxs("li",{className:`event-item${I?" past-event":""}`,onClick:()=>Js(m),title:`${m.name} (${Gh(m.start,m.end,!1)})`,children:[U&&v.jsx("span",{className:"tag-dot",style:{backgroundColor:U},title:Ys(m.tagId)}),m.outlookSynced&&v.jsx("span",{className:"outlook-icon",title:"From Outlook (live)",children:""}),m.icsImported&&!m.outlookSynced&&v.jsx("span",{className:"ics-icon",title:"Imported from .ics file",children:""}),v.jsx("span",{className:`event-name${r.wrapListNames?" wrap":""}`,children:m.name}),v.jsxs("span",{className:"list-end",children:[v.jsx("span",{className:"event-time",children:Gh(m.start,m.end,!1)}),v.jsx("button",{className:"action-btn delete",onClick:z=>{z.stopPropagation(),bl(m.id)},title:"Delete",children:""})]})]},m.id)})}),Yt&&v.jsxs("div",{className:"bulk-event-entry",children:[v.jsx("textarea",{value:er,onChange:m=>tr(m.target.value),placeholder:`Paste events (one per line):
Staff Meeting 10:00-12:15 ${ht()} [Internal]
Team meeting 14:00-14:30 ${ht()}`,rows:4,autoFocus:!0}),v.jsxs("div",{className:"bulk-event-actions",children:[v.jsx("button",{className:"btn-primary",onClick:ju,disabled:!er.trim(),children:"Add Events"}),v.jsx("button",{className:"btn-secondary",onClick:()=>{Wo(!1),tr("")},children:"Cancel"})]})]}),v.jsxs("div",{className:"panel-section-actions",children:[v.jsx("button",{className:"add-btn secondary",onClick:ur,children:"+ Add Event"}),v.jsx("button",{className:"clear-btn",onClick:()=>Wo(m=>!m),children:"Bulk Add"}),v.jsx("button",{className:"clear-btn ics-import-btn",onClick:()=>Bs.current?.click(),children:"Import .ics"}),v.jsx("input",{ref:Bs,type:"file",accept:".ics,.ical,.ifb,.icalendar",onChange:zu,style:{display:"none"}}),ri&&(ct?v.jsx("button",{className:"clear-btn outlook-btn",onClick:or,disabled:Qt==="fetching",children:Qt==="fetching"?"Fetching...":" Outlook"}):v.jsx("button",{className:"clear-btn outlook-btn",onClick:Ai,children:"Connect Outlook"})),ri&&Qt==="error"&&Ja&&v.jsx("div",{className:"outlook-error",children:Ja}),a.length>0&&v.jsx("button",{className:"clear-btn",onClick:hr,children:Va==="events"?"Copied!":"Export Events"}),a.filter(m=>m.date===Z).some(m=>re?Oe(m.end)<=q:Z<ee)&&v.jsx("button",{className:"clear-btn",onClick:Iu,children:"Clear Past"}),a.some(m=>m.date===Z)&&v.jsx("button",{className:"clear-btn",onClick:ku,children:"Clear All"})]})]})]})]}),v.jsx("div",{className:"resize-handle resize-handle-h",onMouseDown:lr}),v.jsx("div",{className:"resize-handle resize-handle-v",onMouseDown:ea}),v.jsxs("section",{className:"calendar-panel",children:[Gn.length>1&&v.jsxs("div",{className:"day-headers",children:[v.jsx("div",{className:"day-header-spacer"}),Gn.map(m=>v.jsx("div",{className:`day-header${m===ee?" today":""}${m===Z?" focused":""}${m<ee?" past":""}`,onClick:()=>de(m),children:AE(m)},m))]}),v.jsxs("div",{className:"calendar-container",ref:Si,children:[v.jsx("div",{className:"time-labels",style:{height:`${Fs}px`},children:cr.map(m=>v.jsxs("div",{className:"time-label",style:{position:"absolute",top:`${(m*60-qt)*At}px`,height:`${60*At}px`},children:[m>12?m-12:m===0?12:m,":00 ",m>=12?"PM":"AM"]},m))}),Gn.map((m,E)=>{const I=na[E],U=bu[E],z=ia[E],$=m===ee;return v.jsxs("div",{className:`calendar-grid day-column${$?" today":""}${m===Z&&Gn.length>1?" focused":""}${m<ee?" past":""}`,style:{height:`${Fs}px`,"--block-title-size":Wh[r.calendarFontSize]?.title||"0.8rem","--block-time-size":Wh[r.calendarFontSize]?.time||"0.65rem"},onClick:()=>Gn.length>1&&de(m),children:[cr.map((L,ue)=>v.jsx("div",{className:"hour-line",style:{top:`${(L*60-qt)*At}px`}},ue)),Za>qt&&v.jsx("div",{className:"dim-zone",style:{top:0,height:`${(Za-qt)*At}px`}}),vn<wi&&v.jsx("div",{className:"dim-zone",style:{top:`${(vn-qt)*At}px`,height:`${(wi-vn)*At}px`}}),$&&q>=qt&&q<=wi&&v.jsx("div",{className:"current-time-line",style:{top:`${(q-qt)*At}px`},children:v.jsx("span",{className:"current-time-label",children:"Now"})}),I.map((L,ue)=>{const Ce=L.type==="pause",Fe=L.type==="task",xe=$a(L.tagId),ft=Vn(L),Wt=ft<40,Kt=ft<25,Pt=Ce?"#f59e0b":xe||(Fe?r.defaultTaskColor:r.defaultEventColor),to=Ce?r.darkMode?"#fbbf24":"#92400e":TI(Pt,Ce?.25:Fe?.1:1,r.darkMode),no=Ce?L.name:Fe?L.taskName:L.name;return v.jsx("div",{className:["calendar-block",`${L.type}-block`,L.isActive&&"active",L.isPast&&"past",L.isCompleted&&"completed-block",L.isPausedRemaining&&"paused-remaining",Wt&&"compact",Kt&&"tiny"].filter(Boolean).join(" "),style:{...Wa(L,ue,U),...Ce?{color:to}:{backgroundColor:Fe?SI(Pt,.1,r.darkMode):Pt,color:to,...Fe?{borderLeft:`10px solid ${Pt}`,borderRadius:(()=>{const io=z[L.taskId]||1,ci=L.blockIndex===0,sa=L.blockIndex===io-1;return`${ci?"5px":"0"} 5px 5px ${sa?"5px":"0"}`})()}:{}}},title:`${no}
${Ph(L.start)} - ${Ph(L.end)}`,onClick:io=>{if(io.stopPropagation(),L.type==="task"){const ci=l.find(sa=>sa.id===L.taskId);ci&&kt(ci)}else if(L.type==="event"){const ci=a.find(sa=>sa.id===L.id);ci&&Js(ci)}},children:v.jsxs("div",{className:"block-content",children:[v.jsxs("span",{className:"block-name",children:[L.outlookSynced&&v.jsx("span",{className:"outlook-icon",children:""}),L.icsImported&&!L.outlookSynced&&v.jsx("span",{className:"ics-icon",children:""}),L.continuesBefore&&" ",no,L.continuesAfter&&" ",L.isActive&&" "]}),v.jsx("span",{className:"block-time",children:Gh(L.start,L.end,Fe)})]})},`${L.type}-${L.taskId||L.id}-${ue}`)})]},m)})]})]})]}),Be&&v.jsx("div",{className:"modal-overlay",onMouseDown:()=>{ti.trim()?On():_e(!1)},children:v.jsxs("div",{className:"modal",onMouseDown:m=>m.stopPropagation(),children:[v.jsx("h3",{children:x?"Edit Task":"Add Tasks"}),v.jsxs("div",{className:"form-group",children:[v.jsxs("label",{children:[x?"Task Name":"Task Name(s)",!x&&v.jsx("span",{className:"label-hint",children:"  one per line for bulk add"})]}),x?v.jsx("input",{type:"text",value:ti,onChange:m=>Qi(m.target.value),onKeyDown:ss,placeholder:"What do you need to do?",autoFocus:!0}):v.jsx("textarea",{value:ti,onChange:m=>Qi(m.target.value),onKeyDown:ss,placeholder:r.smartDuration?`Enter tasks (one per line):
Tech note review
Sherlock #12345678 75
Firewatch investigation 60`:"Enter tasks (one per line)",rows:4,autoFocus:!0}),!x&&r.smartDuration&&v.jsx("p",{className:"form-hint",children:'Numbers at the end of a line set the duration (e.g., "task name 30" = 30 min)'})]}),v.jsxs("div",{className:"form-group",children:[v.jsxs("label",{children:[x?"Duration (minutes)":"Default Duration (minutes)",!x&&r.smartDuration&&v.jsx("span",{className:"label-hint",children:"  used when no number is specified"})]}),v.jsx("input",{type:"number",value:Ba,onChange:m=>Ka(Number(m.target.value)),onKeyDown:x?ss:void 0,min:"5",max:"480"})]}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{children:"Tag"}),v.jsxs("div",{className:"tag-selector",children:[v.jsx("button",{className:`tag-option no-tag ${js===null?"selected":""}`,onClick:()=>Hs(null),title:"No tag",children:""}),h.map(m=>v.jsx("button",{className:`tag-option ${js===m.id?"selected":""}`,onClick:()=>Hs(m.id),style:{backgroundColor:m.color},title:m.name},m.id))]})]}),!x&&v.jsxs("label",{className:"toggle-row",children:[v.jsx("input",{type:"checkbox",checked:Ht,onChange:m=>yl(m.target.checked)}),v.jsx("span",{children:"Add to top of list"})]}),v.jsxs("div",{className:"modal-actions",children:[x&&v.jsx("button",{className:"btn-delete",onClick:()=>{ns(x.id),_e(!1)},children:"Delete"}),v.jsx("button",{className:"btn-secondary",onClick:()=>_e(!1),children:"Cancel"}),v.jsx("button",{className:"btn-primary",onClick:On,children:x?"Save Changes":"Add Task(s)"})]})]})}),D&&v.jsx("div",{className:"modal-overlay",onMouseDown:()=>Zs(),children:v.jsxs("div",{className:"modal",onMouseDown:m=>m.stopPropagation(),children:[v.jsx("h3",{children:P?"Edit Event":"Add Event"}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{children:"Event Name"}),v.jsx("input",{type:"text",value:Zo,onChange:m=>zs(m.target.value),onKeyDown:os,placeholder:"Meeting name",autoFocus:!0})]}),v.jsxs("div",{className:"form-row",children:[v.jsxs("div",{className:"form-group",children:[v.jsx("label",{children:"Start"}),v.jsx("input",{type:"time",value:gn,onChange:m=>as(m.target.value),ref:ai,onKeyDown:Vu})]}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{children:"End"}),v.jsx("input",{type:"time",value:Pa,onChange:m=>Xs(m.target.value),ref:Fa,onKeyDown:Ol})]})]}),v.jsxs("div",{className:"form-row",children:[v.jsxs("div",{className:"form-group",children:[v.jsx("label",{children:"Date"}),v.jsx("input",{type:"date",value:Rt,onChange:m=>kn(m.target.value),min:we,max:fe})]}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{children:"Duration"}),v.jsx("div",{className:"quick-duration-btns",children:[30,60,90].map(m=>v.jsxs("button",{className:"quick-dur-btn",onClick:()=>{ii.current=!0,Ga(cn(Oe(gn)+m))},children:[m,"m"]},m))})]})]}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{children:"Tag"}),v.jsxs("div",{className:"tag-selector",children:[v.jsx("button",{className:`tag-option no-tag ${Ls===null?"selected":""}`,onClick:()=>ni(null),title:"No tag",children:""}),h.map(m=>v.jsx("button",{className:`tag-option ${Ls===m.id?"selected":""}`,onClick:()=>ni(m.id),style:{backgroundColor:m.color},title:m.name},m.id))]})]}),v.jsxs("div",{className:"modal-actions",children:[P&&v.jsx("button",{className:"btn-delete",onClick:()=>{bl(P.id),Y(!1)},children:"Delete"}),v.jsx("button",{className:"btn-secondary",onClick:()=>Y(!1),children:"Cancel"}),v.jsx("button",{className:"btn-primary",onClick:Zs,children:P?"Save Changes":"Add Event"})]})]})}),te&&v.jsx("div",{className:"modal-overlay",onMouseDown:()=>X(!1),children:v.jsxs("div",{className:"modal modal-wide",onMouseDown:m=>m.stopPropagation(),children:[v.jsx("h3",{children:"Settings"}),v.jsxs("div",{className:"settings-section",children:[v.jsx("h4",{children:"Working Hours"}),v.jsxs("div",{className:"form-row",children:[v.jsxs("div",{className:"form-group",children:[v.jsx("label",{children:"Start"}),v.jsx("input",{type:"time",value:r.workdayStart,onChange:m=>Ie("workdayStart",m.target.value)})]}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{children:"End"}),v.jsx("input",{type:"time",value:r.workdayEnd,onChange:m=>Ie("workdayEnd",m.target.value)})]})]})]}),v.jsxs("div",{className:"settings-section",children:[v.jsx("h4",{children:"Extended View Hours"}),v.jsxs("label",{className:"toggle-row",children:[v.jsx("input",{type:"checkbox",checked:r.useExtendedHours,onChange:m=>Ie("useExtendedHours",m.target.checked)}),v.jsx("span",{children:"Show hours outside working hours"})]}),r.useExtendedHours&&v.jsxs(v.Fragment,{children:[v.jsx("p",{className:"settings-hint",children:"Calendar range  dimmed outside working hours"}),v.jsxs("div",{className:"form-row",children:[v.jsxs("div",{className:"form-group",children:[v.jsx("label",{children:"Start"}),v.jsx("input",{type:"time",value:r.extendedStart,onChange:m=>Ie("extendedStart",m.target.value)})]}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{children:"End"}),v.jsx("input",{type:"time",value:r.extendedEnd,onChange:m=>Ie("extendedEnd",m.target.value)})]})]})]})]}),v.jsxs("div",{className:"settings-section",children:[v.jsx("h4",{children:"Defaults"}),v.jsxs("div",{className:"form-row",children:[v.jsxs("div",{className:"form-group",children:[v.jsx("label",{children:"Task Duration (min)"}),v.jsx("input",{type:"number",value:r.defaultTaskDuration,onChange:m=>Ie("defaultTaskDuration",Number(m.target.value)),min:"5",max:"480"})]}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{children:"Event Duration (min)"}),v.jsx("input",{type:"number",value:r.defaultEventDuration,onChange:m=>Ie("defaultEventDuration",Number(m.target.value)),min:"5",max:"480"})]})]}),v.jsxs("div",{className:"form-row",children:[v.jsxs("div",{className:"form-group",children:[v.jsx("label",{children:"Task Color"}),v.jsx("input",{type:"color",value:r.defaultTaskColor,onChange:m=>Ie("defaultTaskColor",m.target.value),className:"color-input"})]}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{children:"Event Color"}),v.jsx("input",{type:"color",value:r.defaultEventColor,onChange:m=>Ie("defaultEventColor",m.target.value),className:"color-input"})]})]})]}),v.jsxs("div",{className:"settings-section",children:[v.jsx("h4",{children:"Calendar"}),v.jsxs("div",{className:"form-row",children:[v.jsxs("div",{className:"form-group",children:[v.jsx("label",{children:"Min Fragment (min)"}),v.jsx("input",{type:"number",value:r.minFragmentMinutes,onChange:m=>Ie("minFragmentMinutes",Math.max(1,Math.min(10,Number(m.target.value)))),min:"1",max:"10"}),v.jsx("p",{className:"form-hint",children:"Smallest task fragment to show (110 min)"})]}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{children:"Font Size"}),v.jsx("select",{value:r.calendarFontSize,onChange:m=>Ie("calendarFontSize",m.target.value),className:"select-input",children:Object.entries(Wh).map(([m,E])=>v.jsx("option",{value:m,children:E.label},m))})]})]})]}),v.jsxs("div",{className:"settings-section",children:[v.jsx("h4",{children:"Behavior"}),v.jsxs("label",{className:"toggle-row",children:[v.jsx("input",{type:"checkbox",checked:r.autoStartNext,onChange:m=>Ie("autoStartNext",m.target.checked)}),v.jsx("span",{children:"Auto-start next task on completion"})]}),v.jsxs("label",{className:"toggle-row",children:[v.jsx("input",{type:"checkbox",checked:r.smartDuration,onChange:m=>Ie("smartDuration",m.target.checked)}),v.jsx("span",{children:"Smart duration  numbers at end of task name set duration"})]}),v.jsxs("label",{className:"toggle-row",children:[v.jsx("input",{type:"checkbox",checked:r.wrapListNames,onChange:m=>Ie("wrapListNames",m.target.checked)}),v.jsx("span",{children:"Wrap names in list view"})]}),v.jsxs("label",{className:"toggle-row",children:[v.jsx("input",{type:"checkbox",checked:r.restrictTasksToWorkHours,onChange:m=>Ie("restrictTasksToWorkHours",m.target.checked)}),v.jsx("span",{children:"Restrict tasks to work hours only"})]}),v.jsxs("label",{className:"toggle-row",children:[v.jsx("input",{type:"checkbox",checked:r.darkMode,onChange:m=>Ie("darkMode",m.target.checked)}),v.jsx("span",{children:"Dark mode"})]})]}),v.jsxs("div",{className:"settings-section",children:[v.jsx("h4",{children:"Tags"}),v.jsx("div",{className:"tag-edit-list",children:h.map(m=>v.jsxs("div",{className:`tag-edit-row${lt===m.id?" dragging":""}${Ti===m.id&&lt!==m.id?" drag-over":""}`,draggable:!0,onDragStart:E=>Bu(E,m.id),onDragOver:E=>Ku(E,m.id),onDrop:E=>Pu(E,m.id),onDragEnd:Gu,children:[v.jsx("span",{className:"drag-handle",title:"Drag to reorder",children:""}),v.jsx("input",{type:"color",value:m.color,onChange:E=>_l(m.id,{color:E.target.value}),className:"color-input"}),v.jsx("input",{type:"text",value:m.name,onChange:E=>_l(m.id,{name:E.target.value}),className:"tag-name-input"}),v.jsx("button",{className:"action-btn delete",onClick:()=>xu(m.id),children:""})]},m.id))}),v.jsx("button",{className:"add-btn small",onClick:wl,children:"+ Add Tag"})]}),v.jsxs("div",{className:"settings-section",children:[v.jsx("h4",{children:"Calendar Import Filters"}),v.jsx("p",{className:"settings-hint",children:"Which event statuses to include when importing from .ics files or Outlook live sync"}),v.jsxs("label",{className:"toggle-row",children:[v.jsx("input",{type:"checkbox",checked:r.icsImportBusy,onChange:m=>Ie("icsImportBusy",m.target.checked)}),v.jsx("span",{children:"Busy"})]}),v.jsxs("label",{className:"toggle-row",children:[v.jsx("input",{type:"checkbox",checked:r.icsImportOof,onChange:m=>Ie("icsImportOof",m.target.checked)}),v.jsx("span",{children:"Out of Office"})]}),v.jsxs("label",{className:"toggle-row",children:[v.jsx("input",{type:"checkbox",checked:r.icsImportTentative,onChange:m=>Ie("icsImportTentative",m.target.checked)}),v.jsx("span",{children:"Tentative"})]}),v.jsxs("label",{className:"toggle-row",children:[v.jsx("input",{type:"checkbox",checked:r.icsImportWorkingElsewhere,onChange:m=>Ie("icsImportWorkingElsewhere",m.target.checked)}),v.jsx("span",{children:"Working Elsewhere"})]}),v.jsxs("label",{className:"toggle-row",children:[v.jsx("input",{type:"checkbox",checked:r.icsImportFree,onChange:m=>Ie("icsImportFree",m.target.checked)}),v.jsx("span",{children:"Free"})]}),v.jsxs("div",{style:{marginTop:"0.75rem"},children:[v.jsxs("label",{className:"toggle-row",children:[v.jsx("input",{type:"checkbox",checked:r.icsImportMeetingsOnly,onChange:m=>Ie("icsImportMeetingsOnly",m.target.checked)}),v.jsx("span",{children:"Meetings only (skip appointments with no attendees)"})]}),v.jsxs("label",{className:"toggle-row",children:[v.jsx("span",{children:"Previous imports:"}),v.jsxs("select",{value:r.icsReplaceOnImport===!0?"yes":r.icsReplaceOnImport===!1?"no":r.icsReplaceOnImport,onChange:m=>Ie("icsReplaceOnImport",m.target.value),children:[v.jsx("option",{value:"no",children:"Keep (deduplicate)"}),v.jsx("option",{value:"yes",children:"Clear before importing"}),v.jsx("option",{value:"ask",children:"Ask each time"})]})]})]}),v.jsxs("div",{style:{marginTop:"0.5rem"},children:[v.jsxs("button",{className:"btn-secondary",onClick:Lu,children:["Category Mapping",(r.icsCategoryRules||[]).length>0?` (${r.icsCategoryRules.length} saved)`:""]}),v.jsx("p",{className:"form-hint",children:"Map Outlook categories to tags or exclude them during import"})]})]}),ri&&v.jsxs("div",{className:"settings-section",children:[v.jsx("h4",{children:"Outlook Calendar (Live)"}),v.jsx("p",{className:"settings-hint",children:"Connect to your Outlook calendar to automatically sync events"}),ct?v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"outlook-status-row",children:[v.jsx("span",{className:`outlook-indicator ${Qt}`}),v.jsxs("span",{children:[Qt==="fetching"&&"Fetching events...",Qt==="idle"&&pn&&`Last fetched ${pn.toLocaleTimeString([],{hour:"numeric",minute:"2-digit"})}`,Qt==="idle"&&!pn&&"Connected",Qt==="error"&&(Ja||"Error fetching events")]}),v.jsx("button",{className:"btn-secondary",onClick:or,disabled:Qt==="fetching",style:{marginLeft:"auto"},children:"Refresh Now"})]}),v.jsx("p",{className:"settings-hint",style:{marginTop:"0.5rem"},children:"Uses the same status filters as calendar import (above). Events refresh automatically every 5 minutes."}),v.jsx("button",{className:"btn-secondary",style:{marginTop:"0.5rem"},onClick:Eu,children:"Disconnect"})]}):v.jsx("button",{className:"btn-primary",onClick:Ai,children:"Sign in with Microsoft"})]}),v.jsxs("div",{className:"settings-section",children:[v.jsx("h4",{children:"Debug"}),v.jsxs("label",{className:"toggle-row",children:[v.jsx("input",{type:"checkbox",checked:r.debugMode,onChange:m=>Ie("debugMode",m.target.checked)}),v.jsx("span",{children:"Debug mode"})]}),r.debugMode&&v.jsxs("div",{className:"form-group",style:{marginTop:"0.5rem"},children:[v.jsx("label",{children:"Time offset (minutes)"}),v.jsx("input",{type:"number",value:r.debugTimeOffset,onChange:m=>Ie("debugTimeOffset",Number(m.target.value))}),v.jsxs("p",{className:"form-hint",children:["Effective time: ",Ph(cn(rn()+(r.debugTimeOffset||0)))," ","(",r.debugTimeOffset>0?"+":"",r.debugTimeOffset||0,"m from real time)"]}),v.jsxs("p",{className:"settings-hint",style:{marginTop:"1rem",fontSize:"0.85em",opacity:.7},children:["Last updated: ",CI]})]})]}),Zi,v.jsxs("div",{className:"settings-section",children:[v.jsx("h4",{children:"Transfer Settings"}),v.jsx("p",{className:"settings-hint",children:"Export or import your settings and tags for use on another device"}),v.jsxs("div",{className:"transfer-btns",children:[v.jsx("button",{className:"btn-secondary",onClick:Du,children:"Export Settings"}),v.jsx("button",{className:"btn-secondary",onClick:()=>ir.current?.click(),children:"Import Settings"}),v.jsx("input",{ref:ir,type:"file",accept:".json",onChange:Hu,style:{display:"none"}})]})]}),v.jsx("div",{className:"modal-actions",children:v.jsx("button",{className:"btn-primary",onClick:()=>X(!1),children:"Done"})})]})}),La&&v.jsx("div",{className:"modal-overlay",style:{zIndex:200},onMouseDown:()=>Us(null),children:v.jsxs("div",{className:"modal",onMouseDown:m=>m.stopPropagation(),children:[v.jsx("h3",{children:"Clear previously imported events before importing?"}),v.jsxs("div",{className:"modal-actions",children:[v.jsx("button",{onClick:()=>{const{newEvents:m}=La;Us(null),Ws(m,!1)},children:"Keep (deduplicate)"}),v.jsx("button",{className:"primary",onClick:()=>{const{newEvents:m}=La;Us(null),Ws(m,!0)},children:"Clear before importing"})]})]})}),pt&&v.jsx("div",{className:"modal-overlay",style:{zIndex:200},onMouseDown:()=>{fn(null),yt([])},children:v.jsxs("div",{className:"modal modal-wide",onMouseDown:m=>m.stopPropagation(),children:[v.jsx("h3",{children:pt.mode==="settings"?"Category Mapping":"Map Categories"}),(pt.mode==="import"||pt.mode==="outlook-import")&&pt.uncategorized>0&&v.jsxs("p",{className:"form-hint",style:{marginBottom:"0.75rem"},children:[pt.uncategorized," event",pt.uncategorized!==1?"s":""," without a category will always be imported."]}),v.jsx("div",{className:"category-mapping-list",children:wt.map((m,E)=>v.jsxs("div",{className:`category-mapping-row${m.include===!1?" excluded":""}`,children:[pt.mode==="settings"?v.jsx("input",{type:"text",className:"category-rule-name",value:m.category,onChange:I=>{const U=[...wt];U[E]={...U[E],category:I.target.value},yt(U)},placeholder:"Category name"}):v.jsxs("span",{className:"category-mapping-name",children:[m.category,pt.catCounts?.[m.category]!=null&&v.jsxs("span",{className:"category-mapping-count",children:["(",pt.catCounts[m.category],")"]})]}),v.jsxs("label",{className:"category-mapping-toggle",children:[v.jsx("input",{type:"checkbox",checked:m.include!==!1,onChange:I=>{const U=[...wt];U[E]={...U[E],include:I.target.checked},I.target.checked||(U[E].tagId=null),yt(U)}}),"Include"]}),m.include!==!1&&v.jsxs("div",{className:"tag-selector compact",children:[v.jsx("button",{className:`tag-option no-tag ${m.tagId===null?"selected":""}`,onClick:()=>{const I=[...wt];I[E]={...I[E],tagId:null},yt(I)},title:"No tag",children:""}),h.map(I=>v.jsx("button",{className:`tag-option ${m.tagId===I.id?"selected":""}`,onClick:()=>{const U=[...wt];U[E]={...U[E],tagId:I.id},yt(U)},style:{backgroundColor:I.color},title:I.name},I.id))]}),pt.mode==="settings"&&v.jsx("button",{className:"action-btn delete",onClick:()=>yt(I=>I.filter((U,z)=>z!==E)),title:"Remove rule",children:""})]},E))}),pt.mode==="settings"&&v.jsx("button",{className:"btn-secondary",style:{marginTop:"0.5rem"},onClick:()=>yt(m=>[...m,{category:"",include:!0,tagId:null}]),children:"+ Add Category"}),v.jsxs("div",{className:"modal-actions",style:{marginTop:"1rem"},children:[v.jsx("button",{className:"btn-secondary",onClick:()=>{fn(null),yt([])},children:"Cancel"}),pt.mode==="import"?v.jsxs(v.Fragment,{children:[v.jsx("button",{className:"btn-primary",onClick:()=>{const m=wt.filter(E=>E.category.trim());$s(pt.filteredEvents,m),fn(null),yt([])},children:"Import"}),v.jsx("button",{className:"btn-primary",onClick:()=>{const m=wt.filter(E=>E.category.trim());Ie("icsCategoryRules",m),$s(pt.filteredEvents,m),fn(null),yt([])},children:"Remember & Import"})]}):pt.mode==="outlook-import"?v.jsxs(v.Fragment,{children:[v.jsx("button",{className:"btn-primary",onClick:()=>{const m=wt.filter(E=>E.category.trim());Sl(m),fn(null),yt([])},children:"Apply"}),v.jsx("button",{className:"btn-primary",onClick:()=>{const m=wt.filter(E=>E.category.trim());Ie("icsCategoryRules",m),Sl(m),fn(null),yt([])},children:"Remember & Apply"})]}):v.jsx("button",{className:"btn-primary",onClick:()=>{const m=wt.filter(E=>E.category.trim());Ie("icsCategoryRules",m),fn(null),yt([])},children:"Save"})]})]})})]})}vE.createRoot(document.getElementById("root")).render(v.jsx(H.StrictMode,{children:v.jsx(II,{})}));
